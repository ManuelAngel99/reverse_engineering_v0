(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([
  "object" == typeof document ? document.currentScript : void 0,
  734235,
  (e, t, n) => {
    "use strict";
    (Object.defineProperty(n, "__esModule", { value: !0 }),
      Object.defineProperty(n, "default", {
        enumerable: !0,
        get: function () {
          return c;
        },
      }));
    let r = e.r(324834),
      i = e.r(576191),
      s = e.r(175467),
      a = e.r(568153);
    function o(e) {
      return { default: e && "default" in e ? e.default : e };
    }
    let l = {
        loader: () => Promise.resolve(o(() => null)),
        loading: null,
        ssr: !0,
      },
      c = function (e) {
        let t = { ...l, ...e },
          n = (0, i.lazy)(() => t.loader().then(o)),
          c = t.loading;
        function u(e) {
          let o = c
              ? (0, r.jsx)(c, { isLoading: !0, pastDelay: !0, error: null })
              : null,
            l = !t.ssr || !!t.loading,
            u = l ? i.Suspense : i.Fragment,
            d = l ? { fallback: o } : {},
            h = t.ssr
              ? (0, r.jsxs)(r.Fragment, {
                  children: [
                    "undefined" == typeof window
                      ? (0, r.jsx)(a.PreloadChunks, { moduleIds: t.modules })
                      : null,
                    (0, r.jsx)(n, { ...e }),
                  ],
                })
              : (0, r.jsx)(s.BailoutToCSR, {
                  reason: "next/dynamic",
                  children: (0, r.jsx)(n, { ...e }),
                });
          return (0, r.jsx)(u, { ...d, children: h });
        }
        return ((u.displayName = "LoadableComponent"), u);
      };
  },
  563261,
  (e, t, n) => {
    "use strict";
    (Object.defineProperty(n, "__esModule", { value: !0 }),
      Object.defineProperty(n, "default", {
        enumerable: !0,
        get: function () {
          return i;
        },
      }));
    let r = e.r(481258)._(e.r(734235));
    function i(e, t) {
      let n = {};
      "function" == typeof e && (n.loader = e);
      let i = { ...n, ...t };
      return (0, r.default)({ ...i, modules: i.loadableGenerated?.modules });
    }
    ("function" == typeof n.default ||
      ("object" == typeof n.default && null !== n.default)) &&
      void 0 === n.default.__esModule &&
      (Object.defineProperty(n.default, "__esModule", { value: !0 }),
      Object.assign(n.default, n),
      (t.exports = n.default));
  },
  15185,
  678845,
  595432,
  760343,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(304649),
      s = e.i(198737);
    let a = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.5 11.5607L6.03033 11.0303L8 9.06066L9.96967 11.0303L10.5 11.5607L11.5607 10.5L11.0303 9.96967L9.06066 8L11.0303 6.03033L11.5607 5.5L10.5 4.43934L9.96967 4.96967L8 6.93934L6.03033 4.96967L5.5 4.43934L4.43934 5.5L4.96967 6.03033L6.93934 8L4.96967 9.96967L4.43934 10.5L5.5 11.5607Z" fill="currentColor"/>',
    );
    function o(e) {
      return (0, t.jsx)("div", {
        className:
          "bg-v0-background-200 my-4 space-y-4 rounded-lg border px-4 pb-6 pt-2",
        children: e.children,
      });
    }
    function l({ value: e, selected: n, onClick: r, children: s, index: a }) {
      return (0, t.jsxs)("label", {
        className: "flex w-full cursor-pointer flex-col",
        children: [
          (0, t.jsx)("input", {
            className: "size-0",
            defaultChecked: n,
            name: "answer",
            onClick: r,
            type: "radio",
            value: e,
          }),
          (0, t.jsxs)("span", {
            className: (0, i.cn)(
              "bg-v0-background-100 flex items-center justify-start gap-3 px-4 py-3 transition-colors",
              n && "bg-v0-blue-100",
            ),
            children: [
              (0, t.jsx)("span", {
                className: (0, i.cn)(
                  "flex size-5 select-none items-center justify-center rounded-full bg-v0-blue-100 text-center text-xs font-semibold text-v0-blue-800 transition-colors",
                  n && "bg-v0-blue-400 text-v0-white",
                ),
                children: String.fromCharCode(65 + a),
              }),
              s,
            ],
          }),
        ],
      });
    }
    function c({ correct: e, selected: n, className: r }) {
      return e || n
        ? (0, t.jsx)("span", {
            className: (0, i.cn)(
              "inline-block size-6 shrink-0 rounded-full p-1 align-middle",
              e
                ? "bg-v0-blue-100 text-v0-blue-700"
                : "bg-v0-red-200 text-v0-red-700",
              r,
            ),
            children: e ? (0, t.jsx)(s.CheckCircle, {}) : (0, t.jsx)(a, {}),
          })
        : null;
    }
    function u({ answer: e, correctAnswer: n }) {
      return (0, t.jsxs)("span", {
        className: (0, i.cn)(
          "animate-slide-down-and-fade flex select-none items-center justify-center gap-1 rounded-full py-1 pl-3 pr-5",
          e === n && "bg-v0-blue-100 text-v0-blue-700",
          e && e !== n && "bg-v0-red-200 text-v0-red-700",
        ),
        children: [
          void 0 !== e &&
            (0, t.jsxs)(t.Fragment, {
              children: [
                (0, t.jsx)(c, { correct: e === n, selected: !0 }),
                " ",
              ],
            }),
          void 0 === e
            ? (0, t.jsxs)(t.Fragment, {
                children: [
                  "The correct answer is: ",
                  (0, t.jsx)("strong", { children: n }),
                ],
              })
            : e === n
              ? (0, t.jsx)("span", {
                  className: "font-bold text-v0-blue-700",
                  children: "Correct",
                })
              : (0, t.jsx)("span", {
                  className: "font-bold text-v0-red-700",
                  children: "Incorrect",
                }),
        ],
      });
    }
    function d({ answers: e, correctAnswer: i, question: s }) {
      let [a, d] = (0, n.useState)(null),
        [h, p] = (0, n.useState)(!1),
        [m, f] = (0, n.useState)(!1),
        g = () => {
          (p(!0), f(!0));
        };
      return s && Array.isArray(e) && 0 !== e.length
        ? (0, t.jsxs)(o, {
            children: [
              (0, t.jsx)("p", {
                className:
                  "text-md px-4 text-center font-semibold md:px-8 lg:px-12",
                children: s,
              }),
              (0, t.jsx)("div", {
                className:
                  "mx-0 flex flex-col divide-y overflow-hidden rounded-md border md:mx-8 lg:mx-12",
                children: e.map((e, n) =>
                  (0, t.jsxs)(
                    l,
                    {
                      index: n,
                      onClick: () => {
                        m || d(e);
                      },
                      selected: e === a,
                      value: e,
                      children: [
                        (0, t.jsx)("span", {
                          className: "flex-1",
                          children: e,
                        }),
                        h
                          ? (0, t.jsx)(c, {
                              className: "animate-slide-down-and-fade ml-2",
                              correct: e === i,
                              selected: e === a,
                            })
                          : null,
                      ],
                    },
                    e,
                  ),
                ),
              }),
              (0, t.jsx)("div", {
                className: "flex justify-center",
                children:
                  h && null !== a
                    ? (0, t.jsx)(u, { answer: a, correctAnswer: i })
                    : (0, t.jsx)(r.Button, {
                        className: "h-9 select-none",
                        disabled: null === a,
                        onClick: g,
                        size: "sm",
                        children: "Check answer",
                      }),
              }),
            ],
          })
        : null;
    }
    (e.s(["CrossCircle", 0, a], 678845), e.s(["Quiz", () => d], 15185));
    var h = t,
      p = e.i(7284);
    function m({ children: e, className: t, ...n }) {
      return (0, h.jsx)("div", {
        className: (0, p.default)(
          "steps mb-12 ml-2 border-l border-v0-gray-200 pl-5 sm:ml-4 sm:pl-6",
          "[counter-reset:step]",
          t,
        ),
        ...n,
        children: e,
      });
    }
    e.s(["Steps", () => m], 595432);
    var f = t;
    function g({ title: e }) {
      return (0, f.jsxs)("div", {
        className: "rounded-lg border border-v0-gray-100 p-4 shadow-sm",
        children: [
          (0, f.jsx)("p", {
            className: "mb-2 mt-0 font-medium text-v0-gray-900",
            children: e,
          }),
          (0, f.jsxs)("div", {
            className: "animate-pulse",
            children: [
              (0, f.jsx)("div", {
                className: "h-4 w-3/4 rounded bg-v0-gray-200",
              }),
              (0, f.jsx)("div", {
                className: "mt-2 h-4 w-1/2 rounded bg-v0-gray-200",
              }),
              (0, f.jsx)("div", {
                className: "mt-2 h-4 w-3/4 rounded bg-v0-gray-200",
              }),
            ],
          }),
        ],
      });
    }
    e.s(["LoadingCard", () => g], 760343);
  },
  845210,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191);
    let r = (0, n.createContext)(!1);
    function i({ children: e }) {
      return (0, t.jsx)(r.Provider, { value: !0, children: e });
    }
    function s() {
      return { isPublished: (0, n.use)(r) || !1 };
    }
    e.s(["PublishedPageProvider", () => i, "usePublishedPage", () => s]);
  },
  338993,
  636139,
  379686,
  739126,
  938807,
  5550,
  393753,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649),
      r = e.i(283751),
      i = e.i(845210);
    function s({
      className: e,
      headerClassName: i,
      language: s,
      actions: a,
      syntax: o,
    }) {
      return (0, t.jsx)("div", {
        className: (0, n.cn)(
          "codeblock border-v0-alpha-400 relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",
          e,
        ),
        "data-seg": "root",
        children: (0, t.jsxs)("div", {
          className:
            "group/inline-code-block relative flex size-full flex-col overflow-hidden",
          children: [
            (0, t.jsxs)("div", {
              className: (0, n.cn)(
                "bg-v0-background-200 flex h-10 w-full shrink-0 items-center justify-between rounded-t-lg border-b pl-2.5 pr-1.5",
                i,
              ),
              "data-seg": "skip",
              children: [
                s
                  ? (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children: (0, t.jsx)(r.FileIcon, { lang: s }),
                    })
                  : null,
                (0, t.jsx)("div", {
                  className: "flex items-center space-x-1 text-v0-gray-900",
                  children: a,
                }),
              ],
            }),
            o,
          ],
        }),
      });
    }
    function a({
      className: e,
      showLineNumbers: r,
      actions: s,
      fileName: a,
      syntax: l,
    }) {
      let { isPublished: c } = (0, i.usePublishedPage)();
      return c
        ? (0, t.jsxs)("div", {
            className: (0, n.cn)(
              "codeblock @container/codeblock bg-v0-background-200 flex size-full flex-col overflow-hidden rounded-lg pt-3",
              e,
            ),
            "data-seg": "root",
            children: [
              (0, t.jsxs)("div", {
                className: "z-10 mx-3 flex translate-y-px justify-between",
                "data-seg": "skip",
                children: [
                  (0, t.jsx)(o, { active: !0, fileName: a }),
                  (0, t.jsx)("div", {
                    className: "flex -translate-y-1.5 items-center gap-1",
                    children: s,
                  }),
                ],
              }),
              (0, t.jsx)("div", {
                className: (0, n.cn)(
                  "border-v0-alpha-400 bg-v0-background-100 relative flex flex-1 flex-col overflow-hidden border-t px-3 font-sans",
                  r && "px-0",
                ),
                children: l,
              }),
            ],
          })
        : (0, t.jsx)("div", {
            className: (0, n.cn)(
              "codeblock @container/codeblock bg-v0-background-200 flex size-full flex-col",
              e,
            ),
            "data-seg": "root",
            children: (0, t.jsx)("div", {
              className: (0, n.cn)(
                "relative flex flex-1 flex-col overflow-hidden px-3 font-sans",
                r && "px-0",
              ),
              children: l,
            }),
          });
    }
    function o({ active: e, fileName: r, onClick: i }) {
      return (0, t.jsxs)("button", {
        className: (0, n.cn)(
          "font-regular border-v0-alpha-400 pointer-events-none relative h-full whitespace-nowrap rounded-t-md border border-b-0 px-4 pb-1 pt-1.5 text-[13px] text-v0-gray-900 transition-colors",
          e
            ? "bg-v0-background-100 font-medium"
            : "border-transparent bg-transparent hover:bg-v0-gray-200",
        ),
        onClick: i,
        children: [
          (0, t.jsx)(l, { active: e, side: "left" }),
          r,
          (0, t.jsx)(l, { active: e, side: "right" }),
        ],
      });
    }
    function l({ active: e, side: r }) {
      if (!e) return null;
      let i = "left" === r;
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsx)("div", {
            className: (0, n.cn)(
              "bg-v0-background-200 absolute bottom-0 z-20 h-[4px] w-[4px] border-b border-v0-gray-200",
              i
                ? "right-[-4px] rounded-bl-[3px] border-l"
                : "left-[-4px] rounded-br-[3px] border-r",
            ),
          }),
          (0, t.jsx)("div", {
            className: (0, n.cn)(
              "bg-v0-background-100 absolute bottom-0 z-10 h-[4px] w-[4px]",
              i ? "right-[-4px]" : "left-[-4px]",
            ),
          }),
        ],
      });
    }
    e.s(["InlineCodeBlock", () => s, "TabbedCodeBlock", () => a], 338993);
    let c = ["javascript", "typescript", "python", "sql"],
      u = ["js", "jsx", "mjs", "cjs", "ts", "tsx", "mts", "cts", "py", "sql"];
    function d(e) {
      switch (e) {
        case "plaintext":
        case "png":
        case "jpg":
        case "jpeg":
        case "slim":
        case "shaderlab":
          return "text";
        case "bat":
          return "batch";
        case "dockercompose":
          return "yaml";
        case "git-rebase":
        case "git-commit":
          return "markdown";
        case "typescriptreact":
          return "tsx";
        case "javascriptreact":
        case "svelte":
        case "astro":
          return "jsx";
        case "jsonc":
          return "json5";
        case "objective-c":
        case "objective-cpp":
          return "objectivec";
        case "perl6":
          return "perl";
        case "shellscript":
          return "bash";
        case "terraform":
          return "hcl";
        case "bibtex":
          return "tex";
        case "cuda-cpp":
          return "cpp";
        case "jade":
          return "pascal";
        case "vue":
        case "vue-html":
          return "html";
        case "xsl":
          return "xml";
        default:
          return e;
      }
    }
    function h(e) {
      return e
        ? e.endsWith(".md") || e.endsWith(".markdown")
          ? "markdown"
          : e.endsWith(".svg")
            ? "svg"
            : null
        : null;
    }
    (e.s(
      [
        "getPrismLanguage",
        () => d,
        "runnableExtensions",
        0,
        u,
        "runnableLanguages",
        0,
        c,
      ],
      636139,
    ),
      e.s(["getPreviewableFileType", () => h], 379686));
    var p = e.i(418625);
    function m(e) {
      let { blockId: t, fileName: n, originalCode: r, newCode: i } = e,
        { data: s, mutate: a } = (0, p.default)(["block:diffView:show", t], {
          fallbackData: !1,
        }),
        { data: o } = (0, p.default)(["block:diffView", t, n], {
          fallbackData: !!r && r !== i,
        });
      return { hasDiffs: o, showDiffs: s, setShowDiffs: a };
    }
    e.s(["useDiffView", () => m], 739126);
    var f = t,
      g = n;
    let x = ({ size: e = 16, className: t }) =>
      (0, f.jsxs)("svg", {
        className: (0, g.cn)("trash-icon overflow-visible", t),
        fill: "none",
        stroke: "currentColor",
        height: e,
        viewBox: "0 0 16 16",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, f.jsx)("path", {
            d: "M10.0001 1.33203H4.00008C3.64646 1.33203 3.30732 1.47251 3.05727 1.72256C2.80722 1.9726 2.66675 2.31174 2.66675 2.66536V13.332C2.66675 13.6857 2.80722 14.0248 3.05727 14.2748C3.30732 14.5249 3.64646 14.6654 4.00008 14.6654H12.0001C12.3537 14.6654 12.6928 14.5249 12.9429 14.2748C13.1929 14.0248 13.3334 13.6857 13.3334 13.332V4.66536L10.0001 1.33203Z",
            stroke: "currentColor",
            strokeWidth: "1.33333",
            strokeLinecap: "round",
            strokeLinejoin: "round",
          }),
          (0, f.jsx)("path", {
            d: "M6 6.66797H10",
            stroke: "currentColor",
            strokeWidth: "1.33333",
            strokeLinecap: "square",
            strokeLinejoin: "round",
          }),
          (0, f.jsx)("path", {
            d: "M8 8.66797V4.66797",
            stroke: "currentColor",
            strokeWidth: "1.33333",
            strokeLinecap: "square",
            strokeLinejoin: "round",
          }),
          (0, f.jsx)("path", {
            d: "M6 11.332H10",
            stroke: "currentColor",
            strokeWidth: "1.33333",
            strokeLinecap: "square",
            strokeLinejoin: "round",
          }),
        ],
      });
    e.s(["DiffIcon", 0, x], 938807);
    var v = e.i(919012),
      y = (0, v.createServerReference)(
        "4035326aeec9d33ffd4b4920b7c1a1ed80f6288174",
        v.callServer,
        void 0,
        v.findSourceMapURL,
        "executeScriptAction",
      );
    function b(e, t, n) {
      let r = [],
        i = new Date().toISOString();
      if (
        (e.stdout.forEach((e) => {
          r.push({
            type: "output",
            blockId: t,
            fileName: n,
            content: e.map((e) => JSON.stringify(e, void 0, 2)).join(" "),
            timestamp: i,
            method: "stdout",
          });
        }),
        n.endsWith(".sql") &&
          e.stdout.at(0)?.at(0) === "[]" &&
          0 === e.stderr.length &&
          r.push({
            type: "output",
            blockId: t,
            fileName: n,
            content: "SQL query executed successfully.",
            timestamp: i,
            method: "stdout",
          }),
        e.returned)
      )
        if (
          "$$attachments" in e.returned &&
          Array.isArray(e.returned.$$attachments)
        )
          for (let s of e.returned.$$attachments) {
            let [e, a] = s;
            r.push({
              type: "output",
              blockId: t,
              fileName: n,
              content: `Attachment: ${e}`,
              timestamp: i,
              method: "stdout",
              attachment: { mimeType: e, data: a },
            });
          }
        else {
          let s = JSON.stringify(e.returned, void 0, 2);
          r.push({
            type: "output",
            blockId: t,
            fileName: n,
            content: s,
            timestamp: i,
            method: "stdout",
          });
        }
      return (
        e.stderr.forEach((e) => {
          r.push({
            type: "output",
            blockId: t,
            fileName: n,
            content: e.map((e) => JSON.stringify(e, void 0, 2)).join(" "),
            timestamp: i,
            method: "stderr",
          });
        }),
        r
      );
    }
    (e.s(["executeScriptAction", () => y], 5550),
      e.s(["transformExecutionOutputToEvents", () => b], 393753));
  },
  239372,
  (e, t, n) => {
    t.exports = function (e, t) {
      for (
        var n = -1, r = null == e ? 0 : e.length;
        ++n < r && !1 !== t(e[n], n, e);

      );
      return e;
    };
  },
  347474,
  (e, t, n) => {
    var r = e.r(622280);
    t.exports = (function () {
      try {
        var e = r(Object, "defineProperty");
        return (e({}, "", {}), e);
      } catch (e) {}
    })();
  },
  930215,
  (e, t, n) => {
    var r = e.r(347474);
    t.exports = function (e, t, n) {
      "__proto__" == t && r
        ? r(e, t, { configurable: !0, enumerable: !0, value: n, writable: !0 })
        : (e[t] = n);
    };
  },
  263217,
  (e, t, n) => {
    var r = e.r(930215),
      i = e.r(278744),
      s = Object.prototype.hasOwnProperty;
    t.exports = function (e, t, n) {
      var a = e[t];
      (s.call(e, t) && i(a, n) && (void 0 !== n || t in e)) || r(e, t, n);
    };
  },
  410194,
  (e, t, n) => {
    var r = e.r(263217),
      i = e.r(930215);
    t.exports = function (e, t, n, s) {
      var a = !n;
      n || (n = {});
      for (var o = -1, l = t.length; ++o < l; ) {
        var c = t[o],
          u = s ? s(n[c], e[c], c, n, e) : void 0;
        (void 0 === u && (u = e[c]), a ? i(n, c, u) : r(n, c, u));
      }
      return n;
    };
  },
  908687,
  (e, t, n) => {
    var r = e.r(410194),
      i = e.r(833089);
    t.exports = function (e, t) {
      return e && r(t, i(t), e);
    };
  },
  242151,
  (e, t, n) => {
    t.exports = function (e) {
      var t = [];
      if (null != e) for (var n in Object(e)) t.push(n);
      return t;
    };
  },
  206645,
  (e, t, n) => {
    var r = e.r(791606),
      i = e.r(570795),
      s = e.r(242151),
      a = Object.prototype.hasOwnProperty;
    t.exports = function (e) {
      if (!r(e)) return s(e);
      var t = i(e),
        n = [];
      for (var o in e)
        ("constructor" == o && (t || !a.call(e, o))) || n.push(o);
      return n;
    };
  },
  975419,
  (e, t, n) => {
    var r = e.r(127424),
      i = e.r(206645),
      s = e.r(707850);
    t.exports = function (e) {
      return s(e) ? r(e, !0) : i(e);
    };
  },
  120341,
  (e, t, n) => {
    var r = e.r(410194),
      i = e.r(975419);
    t.exports = function (e, t) {
      return e && r(t, i(t), e);
    };
  },
  44242,
  (e, t, n) => {
    var r = e.r(818408),
      i = n && !n.nodeType && n,
      s = i && t && !t.nodeType && t,
      a = s && s.exports === i ? r.Buffer : void 0,
      o = a ? a.allocUnsafe : void 0;
    t.exports = function (e, t) {
      if (t) return e.slice();
      var n = e.length,
        r = o ? o(n) : new e.constructor(n);
      return (e.copy(r), r);
    };
  },
  133442,
  (e, t, n) => {
    t.exports = function (e, t) {
      var n = -1,
        r = e.length;
      for (t || (t = Array(r)); ++n < r; ) t[n] = e[n];
      return t;
    };
  },
  603332,
  (e, t, n) => {
    var r = e.r(410194),
      i = e.r(896852);
    t.exports = function (e, t) {
      return r(e, i(e), t);
    };
  },
  530968,
  (e, t, n) => {
    t.exports = e.r(991915)(Object.getPrototypeOf, Object);
  },
  667874,
  (e, t, n) => {
    var r = e.r(334666),
      i = e.r(530968),
      s = e.r(896852),
      a = e.r(287024);
    t.exports = Object.getOwnPropertySymbols
      ? function (e) {
          for (var t = []; e; ) (r(t, s(e)), (e = i(e)));
          return t;
        }
      : a;
  },
  983664,
  (e, t, n) => {
    var r = e.r(410194),
      i = e.r(667874);
    t.exports = function (e, t) {
      return r(e, i(e), t);
    };
  },
  326640,
  (e, t, n) => {
    var r = e.r(41612),
      i = e.r(667874),
      s = e.r(975419);
    t.exports = function (e) {
      return r(e, s, i);
    };
  },
  137208,
  (e, t, n) => {
    var r = Object.prototype.hasOwnProperty;
    t.exports = function (e) {
      var t = e.length,
        n = new e.constructor(t);
      return (
        t &&
          "string" == typeof e[0] &&
          r.call(e, "index") &&
          ((n.index = e.index), (n.input = e.input)),
        n
      );
    };
  },
  688187,
  (e, t, n) => {
    var r = e.r(533576);
    t.exports = function (e) {
      var t = new e.constructor(e.byteLength);
      return (new r(t).set(new r(e)), t);
    };
  },
  255438,
  (e, t, n) => {
    var r = e.r(688187);
    t.exports = function (e, t) {
      var n = t ? r(e.buffer) : e.buffer;
      return new e.constructor(n, e.byteOffset, e.byteLength);
    };
  },
  997169,
  (e, t, n) => {
    var r = /\w*$/;
    t.exports = function (e) {
      var t = new e.constructor(e.source, r.exec(e));
      return ((t.lastIndex = e.lastIndex), t);
    };
  },
  790793,
  (e, t, n) => {
    var r = e.r(407667),
      i = r ? r.prototype : void 0,
      s = i ? i.valueOf : void 0;
    t.exports = function (e) {
      return s ? Object(s.call(e)) : {};
    };
  },
  651235,
  (e, t, n) => {
    var r = e.r(688187);
    t.exports = function (e, t) {
      var n = t ? r(e.buffer) : e.buffer;
      return new e.constructor(n, e.byteOffset, e.length);
    };
  },
  299513,
  (e, t, n) => {
    var r = e.r(688187),
      i = e.r(255438),
      s = e.r(997169),
      a = e.r(790793),
      o = e.r(651235),
      l = "[object Boolean]",
      c = "[object Date]",
      u = "[object Map]",
      d = "[object Number]",
      h = "[object RegExp]",
      p = "[object Set]",
      m = "[object String]",
      f = "[object Symbol]",
      g = "[object ArrayBuffer]",
      x = "[object DataView]",
      v = "[object Float32Array]",
      y = "[object Float64Array]",
      b = "[object Int8Array]",
      j = "[object Int16Array]",
      w = "[object Int32Array]",
      C = "[object Uint8Array]",
      k = "[object Uint8ClampedArray]",
      S = "[object Uint16Array]",
      N = "[object Uint32Array]";
    t.exports = function (e, t, n) {
      var E = e.constructor;
      switch (t) {
        case g:
          return r(e);
        case l:
        case c:
          return new E(+e);
        case x:
          return i(e, n);
        case v:
        case y:
        case b:
        case j:
        case w:
        case C:
        case k:
        case S:
        case N:
          return o(e, n);
        case u:
          return new E();
        case d:
        case m:
          return new E(e);
        case h:
          return s(e);
        case p:
          return new E();
        case f:
          return a(e);
      }
    };
  },
  116947,
  (e, t, n) => {
    var r = e.r(791606),
      i = Object.create;
    t.exports = (function () {
      function e() {}
      return function (t) {
        if (!r(t)) return {};
        if (i) return i(t);
        e.prototype = t;
        var n = new e();
        return ((e.prototype = void 0), n);
      };
    })();
  },
  807299,
  (e, t, n) => {
    var r = e.r(116947),
      i = e.r(530968),
      s = e.r(570795);
    t.exports = function (e) {
      return "function" != typeof e.constructor || s(e) ? {} : r(i(e));
    };
  },
  44732,
  (e, t, n) => {
    var r = e.r(626568),
      i = e.r(819674),
      s = "[object Map]";
    t.exports = function (e) {
      return i(e) && r(e) == s;
    };
  },
  249084,
  (e, t, n) => {
    var r = e.r(44732),
      i = e.r(632900),
      s = e.r(29979),
      a = s && s.isMap;
    t.exports = a ? i(a) : r;
  },
  292596,
  (e, t, n) => {
    var r = e.r(626568),
      i = e.r(819674),
      s = "[object Set]";
    t.exports = function (e) {
      return i(e) && r(e) == s;
    };
  },
  791316,
  (e, t, n) => {
    var r = e.r(292596),
      i = e.r(632900),
      s = e.r(29979),
      a = s && s.isSet;
    t.exports = a ? i(a) : r;
  },
  716543,
  (e, t, n) => {
    var r = e.r(875266),
      i = e.r(239372),
      s = e.r(263217),
      a = e.r(908687),
      o = e.r(120341),
      l = e.r(44242),
      c = e.r(133442),
      u = e.r(603332),
      d = e.r(983664),
      h = e.r(628423),
      p = e.r(326640),
      m = e.r(626568),
      f = e.r(137208),
      g = e.r(299513),
      x = e.r(807299),
      v = e.r(272098),
      y = e.r(385370),
      b = e.r(249084),
      j = e.r(791606),
      w = e.r(791316),
      C = e.r(833089),
      k = e.r(975419),
      S = 1,
      N = 2,
      E = 4,
      A = "[object Arguments]",
      D = "[object Array]",
      I = "[object Boolean]",
      M = "[object Date]",
      T = "[object Error]",
      L = "[object Function]",
      P = "[object GeneratorFunction]",
      R = "[object Map]",
      F = "[object Number]",
      _ = "[object Object]",
      O = "[object RegExp]",
      B = "[object Set]",
      V = "[object String]",
      z = "[object Symbol]",
      H = "[object WeakMap]",
      $ = "[object ArrayBuffer]",
      U = "[object DataView]",
      G = "[object Float32Array]",
      W = "[object Float64Array]",
      q = "[object Int8Array]",
      Z = "[object Int16Array]",
      K = "[object Int32Array]",
      Y = "[object Uint8Array]",
      J = "[object Uint8ClampedArray]",
      Q = "[object Uint16Array]",
      X = "[object Uint32Array]",
      ee = {};
    function et(e, t, n, D, I, M) {
      var T,
        R = t & S,
        F = t & N,
        O = t & E;
      if ((n && (T = I ? n(e, D, I, M) : n(e)), void 0 !== T)) return T;
      if (!j(e)) return e;
      var B = v(e);
      if (B) {
        if (((T = f(e)), !R)) return c(e, T);
      } else {
        var V = m(e),
          z = V == L || V == P;
        if (y(e)) return l(e, R);
        if (V == _ || V == A || (z && !I)) {
          if (((T = F || z ? {} : x(e)), !R))
            return F ? d(e, o(T, e)) : u(e, a(T, e));
        } else {
          if (!ee[V]) return I ? e : {};
          T = g(e, V, R);
        }
      }
      M || (M = new r());
      var H = M.get(e);
      if (H) return H;
      (M.set(e, T),
        w(e)
          ? e.forEach(function (r) {
              T.add(et(r, t, n, r, e, M));
            })
          : b(e) &&
            e.forEach(function (r, i) {
              T.set(i, et(r, t, n, i, e, M));
            }));
      var $ = O ? (F ? p : h) : F ? k : C,
        U = B ? void 0 : $(e);
      return (
        i(U || e, function (r, i) {
          (U && (r = e[(i = r)]), s(T, i, et(r, t, n, i, e, M)));
        }),
        T
      );
    }
    ((ee[A] =
      ee[D] =
      ee[$] =
      ee[U] =
      ee[I] =
      ee[M] =
      ee[G] =
      ee[W] =
      ee[q] =
      ee[Z] =
      ee[K] =
      ee[R] =
      ee[F] =
      ee[_] =
      ee[O] =
      ee[B] =
      ee[V] =
      ee[z] =
      ee[Y] =
      ee[J] =
      ee[Q] =
      ee[X] =
        !0),
      (ee[T] = ee[L] = ee[H] = !1),
      (t.exports = et));
  },
  120311,
  (e, t, n) => {
    var r = e.r(716543),
      i = 1,
      s = 4;
    t.exports = function (e) {
      return r(e, i | s);
    };
  },
  6644,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M11 3.75C11 4.44036 11.5596 5 12.25 5C12.9404 5 13.5 4.44036 13.5 3.75C13.5 3.05964 12.9404 2.5 12.25 2.5C11.5596 2.5 11 3.05964 11 3.75ZM9.84848 5.09086C9.62652 4.69418 9.5 4.23687 9.5 3.75C9.5 2.23122 10.7312 1 12.25 1C13.7688 1 15 2.23122 15 3.75C15 5.26878 13.7688 6.5 12.25 6.5C11.7631 6.5 11.3058 6.37348 10.9091 6.15152L6.15153 10.9091C6.37348 11.3058 6.5 11.7631 6.5 12.25C6.5 13.7688 5.26878 15 3.75 15C2.23122 15 1 13.7688 1 12.25C1 10.7312 2.23122 9.5 3.75 9.5C4.23687 9.5 4.69419 9.62652 5.09087 9.84848L9.84848 5.09086ZM2.5 12.25C2.5 12.9404 3.05964 13.5 3.75 13.5C4.44036 13.5 5 12.9404 5 12.25C5 11.5596 4.44036 11 3.75 11C3.05964 11 2.5 11.5596 2.5 12.25ZM3.75 5C3.05964 5 2.5 4.44036 2.5 3.75C2.5 3.05964 3.05964 2.5 3.75 2.5C4.44036 2.5 5 3.05964 5 3.75C5 4.44036 4.44036 5 3.75 5ZM1 3.75C1 5.26878 2.23122 6.5 3.75 6.5C5.26878 6.5 6.5 5.26878 6.5 3.75C6.5 2.23122 5.26878 1 3.75 1C2.23122 1 1 2.23122 1 3.75ZM11 12.25C11 12.9404 11.5596 13.5 12.25 13.5C12.9404 13.5 13.5 12.9404 13.5 12.25C13.5 11.5596 12.9404 11 12.25 11C11.5596 11 11 11.5596 11 12.25ZM12.25 15C10.7312 15 9.5 13.7688 9.5 12.25C9.5 10.7312 10.7312 9.5 12.25 9.5C13.7688 9.5 15 10.7312 15 12.25C15 13.7688 13.7688 15 12.25 15Z" fill="currentColor"/>',
    );
    e.s(["SecureConnection", 0, t]);
  },
  314907,
  (e) => {
    "use strict";
    var t = e.i(9654);
    let n = {
      get url() {
        return `file://${e.P("node_modules/.pnpm/jotai@2.8.0_@types+react@19.2.0_react@19.2.0/node_modules/jotai/esm/vanilla/utils.mjs")}`;
      },
    };
    function r(e, t) {
      let n = null,
        r = new Map(),
        i = (s) => {
          let a;
          if (void 0 === t) a = r.get(s);
          else
            for (let [e, n] of r)
              if (t(e, s)) {
                a = n;
                break;
              }
          if (void 0 !== a)
            if (null == n || !n(a[1], s)) return a[0];
            else i.remove(s);
          let o = e(s);
          return (r.set(s, [o, Date.now()]), o);
        };
      return (
        (i.remove = (e) => {
          if (void 0 === t) r.delete(e);
          else
            for (let [n] of r)
              if (t(n, e)) {
                r.delete(n);
                break;
              }
        }),
        (i.setShouldRemove = (e) => {
          if ((n = e)) for (let [e, t] of r) n(t[1], e) && r.delete(e);
        }),
        i
      );
    }
    Symbol((n.env ? n.env.MODE : void 0) !== "production" ? "RESET" : "");
    let i = (e, t, n) => (t.has(n) ? t : t.set(n, e())).get(n),
      s = new WeakMap(),
      a = (e, t, n, r) => {
        let a = i(() => new WeakMap(), s, t),
          o = i(() => new WeakMap(), a, n);
        return i(e, o, r);
      };
    function o(e, n, r = Object.is) {
      return a(
        () => {
          let i = Symbol(),
            s = ([e, t]) => {
              if (t === i) return n(e);
              let s = n(e, t);
              return r(t, s) ? t : s;
            },
            a = (0, t.atom)((t) => {
              let n = t(a);
              return s([t(e), n]);
            });
          return ((a.init = i), a);
        },
        e,
        n,
        r,
      );
    }
    let l = (e) => "function" == typeof (null == e ? void 0 : e.then);
    ((function (
      e = () => {
        try {
          return window.localStorage;
        } catch (e) {
          (n.env ? n.env.MODE : void 0) !== "production" &&
            "undefined" != typeof window &&
            console.warn(e);
          return;
        }
      },
      t,
    ) {
      let r,
        i,
        s = {
          getItem: (t, n) => {
            var s, a;
            let o = (e) => {
                if (r !== (e = e || "")) {
                  try {
                    i = JSON.parse(e, void 0);
                  } catch (e) {
                    return n;
                  }
                  r = e;
                }
                return i;
              },
              c =
                null != (a = null == (s = e()) ? void 0 : s.getItem(t))
                  ? a
                  : null;
            return l(c) ? c.then(o) : o(c);
          },
          setItem: (t, n) => {
            var r;
            return null == (r = e())
              ? void 0
              : r.setItem(t, JSON.stringify(n, void 0));
          },
          removeItem: (t) => {
            var n;
            return null == (n = e()) ? void 0 : n.removeItem(t);
          },
        };
      "undefined" != typeof window &&
        "function" == typeof window.addEventListener &&
        window.Storage &&
        (s.subscribe = (t, n, r) => {
          if (!(e() instanceof window.Storage)) return () => {};
          let i = (i) => {
            if (i.storageArea === e() && i.key === t) {
              let e;
              try {
                e = JSON.parse(i.newValue || "");
              } catch (t) {
                e = r;
              }
              n(e);
            }
          };
          return (
            window.addEventListener("storage", i),
            () => {
              window.removeEventListener("storage", i);
            }
          );
        });
    })(),
      e.s(["atomFamily", () => r, "selectAtom", () => o]));
  },
  418929,
  875817,
  756307,
  187195,
  653270,
  732674,
  445231,
  124251,
  548731,
  632814,
  770496,
  73687,
  654225,
  605667,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(142219),
      i = e.i(53223),
      s = e.i(324834),
      a = e.i(908431),
      o = i,
      l = e.i(120311),
      c = a,
      u = s,
      d = e.i(903500),
      h = s;
    function p(e) {
      this.content = e;
    }
    ((p.prototype = {
      constructor: p,
      find: function (e) {
        for (var t = 0; t < this.content.length; t += 2)
          if (this.content[t] === e) return t;
        return -1;
      },
      get: function (e) {
        var t = this.find(e);
        return -1 == t ? void 0 : this.content[t + 1];
      },
      update: function (e, t, n) {
        var r = n && n != e ? this.remove(n) : this,
          i = r.find(e),
          s = r.content.slice();
        return (
          -1 == i ? s.push(n || e, t) : ((s[i + 1] = t), n && (s[i] = n)),
          new p(s)
        );
      },
      remove: function (e) {
        var t = this.find(e);
        if (-1 == t) return this;
        var n = this.content.slice();
        return (n.splice(t, 2), new p(n));
      },
      addToStart: function (e, t) {
        return new p([e, t].concat(this.remove(e).content));
      },
      addToEnd: function (e, t) {
        var n = this.remove(e).content.slice();
        return (n.push(e, t), new p(n));
      },
      addBefore: function (e, t, n) {
        var r = this.remove(t),
          i = r.content.slice(),
          s = r.find(e);
        return (i.splice(-1 == s ? i.length : s, 0, t, n), new p(i));
      },
      forEach: function (e) {
        for (var t = 0; t < this.content.length; t += 2)
          e(this.content[t], this.content[t + 1]);
      },
      prepend: function (e) {
        return (e = p.from(e)).size
          ? new p(e.content.concat(this.subtract(e).content))
          : this;
      },
      append: function (e) {
        return (e = p.from(e)).size
          ? new p(this.subtract(e).content.concat(e.content))
          : this;
      },
      subtract: function (e) {
        var t = this;
        e = p.from(e);
        for (var n = 0; n < e.content.length; n += 2)
          t = t.remove(e.content[n]);
        return t;
      },
      toObject: function () {
        var e = {};
        return (
          this.forEach(function (t, n) {
            e[t] = n;
          }),
          e
        );
      },
      get size() {
        return this.content.length >> 1;
      },
    }),
      (p.from = function (e) {
        if (e instanceof p) return e;
        var t = [];
        if (e) for (var n in e) t.push(n, e[n]);
        return new p(t);
      }));
    let m = p;
    function f(e, t, n) {
      for (let r = 0; ; r++) {
        if (r == e.childCount || r == t.childCount)
          return e.childCount == t.childCount ? null : n;
        let i = e.child(r),
          s = t.child(r);
        if (i == s) {
          n += i.nodeSize;
          continue;
        }
        if (!i.sameMarkup(s)) return n;
        if (i.isText && i.text != s.text) {
          for (let e = 0; i.text[e] == s.text[e]; e++) n++;
          return n;
        }
        if (i.content.size || s.content.size) {
          let e = f(i.content, s.content, n + 1);
          if (null != e) return e;
        }
        n += i.nodeSize;
      }
    }
    function g(e, t, n, r) {
      for (let i = e.childCount, s = t.childCount; ; ) {
        if (0 == i || 0 == s) return i == s ? null : { a: n, b: r };
        let a = e.child(--i),
          o = t.child(--s),
          l = a.nodeSize;
        if (a == o) {
          ((n -= l), (r -= l));
          continue;
        }
        if (!a.sameMarkup(o)) return { a: n, b: r };
        if (a.isText && a.text != o.text) {
          let e = 0,
            t = Math.min(a.text.length, o.text.length);
          for (
            ;
            e < t &&
            a.text[a.text.length - e - 1] == o.text[o.text.length - e - 1];

          )
            (e++, n--, r--);
          return { a: n, b: r };
        }
        if (a.content.size || o.content.size) {
          let e = g(a.content, o.content, n - 1, r - 1);
          if (e) return e;
        }
        ((n -= l), (r -= l));
      }
    }
    class x {
      constructor(e, t) {
        if (((this.content = e), (this.size = t || 0), null == t))
          for (let t = 0; t < e.length; t++) this.size += e[t].nodeSize;
      }
      nodesBetween(e, t, n, r = 0, i) {
        for (let s = 0, a = 0; a < t; s++) {
          let o = this.content[s],
            l = a + o.nodeSize;
          if (l > e && !1 !== n(o, r + a, i || null, s) && o.content.size) {
            let i = a + 1;
            o.nodesBetween(
              Math.max(0, e - i),
              Math.min(o.content.size, t - i),
              n,
              r + i,
            );
          }
          a = l;
        }
      }
      descendants(e) {
        this.nodesBetween(0, this.size, e);
      }
      textBetween(e, t, n, r) {
        let i = "",
          s = !0;
        return (
          this.nodesBetween(
            e,
            t,
            (a, o) => {
              let l = a.isText
                ? a.text.slice(Math.max(e, o) - o, t - o)
                : a.isLeaf
                  ? r
                    ? "function" == typeof r
                      ? r(a)
                      : r
                    : a.type.spec.leafText
                      ? a.type.spec.leafText(a)
                      : ""
                  : "";
              (a.isBlock &&
                ((a.isLeaf && l) || a.isTextblock) &&
                n &&
                (s ? (s = !1) : (i += n)),
                (i += l));
            },
            0,
          ),
          i
        );
      }
      append(e) {
        if (!e.size) return this;
        if (!this.size) return e;
        let t = this.lastChild,
          n = e.firstChild,
          r = this.content.slice(),
          i = 0;
        for (
          t.isText &&
          t.sameMarkup(n) &&
          ((r[r.length - 1] = t.withText(t.text + n.text)), (i = 1));
          i < e.content.length;
          i++
        )
          r.push(e.content[i]);
        return new x(r, this.size + e.size);
      }
      cut(e, t = this.size) {
        if (0 == e && t == this.size) return this;
        let n = [],
          r = 0;
        if (t > e)
          for (let i = 0, s = 0; s < t; i++) {
            let a = this.content[i],
              o = s + a.nodeSize;
            (o > e &&
              ((s < e || o > t) &&
                (a = a.isText
                  ? a.cut(Math.max(0, e - s), Math.min(a.text.length, t - s))
                  : a.cut(
                      Math.max(0, e - s - 1),
                      Math.min(a.content.size, t - s - 1),
                    )),
              n.push(a),
              (r += a.nodeSize)),
              (s = o));
          }
        return new x(n, r);
      }
      cutByIndex(e, t) {
        return e == t
          ? x.empty
          : 0 == e && t == this.content.length
            ? this
            : new x(this.content.slice(e, t));
      }
      replaceChild(e, t) {
        let n = this.content[e];
        if (n == t) return this;
        let r = this.content.slice(),
          i = this.size + t.nodeSize - n.nodeSize;
        return ((r[e] = t), new x(r, i));
      }
      addToStart(e) {
        return new x([e].concat(this.content), this.size + e.nodeSize);
      }
      addToEnd(e) {
        return new x(this.content.concat(e), this.size + e.nodeSize);
      }
      eq(e) {
        if (this.content.length != e.content.length) return !1;
        for (let t = 0; t < this.content.length; t++)
          if (!this.content[t].eq(e.content[t])) return !1;
        return !0;
      }
      get firstChild() {
        return this.content.length ? this.content[0] : null;
      }
      get lastChild() {
        return this.content.length
          ? this.content[this.content.length - 1]
          : null;
      }
      get childCount() {
        return this.content.length;
      }
      child(e) {
        let t = this.content[e];
        if (!t) throw RangeError("Index " + e + " out of range for " + this);
        return t;
      }
      maybeChild(e) {
        return this.content[e] || null;
      }
      forEach(e) {
        for (let t = 0, n = 0; t < this.content.length; t++) {
          let r = this.content[t];
          (e(r, n, t), (n += r.nodeSize));
        }
      }
      findDiffStart(e, t = 0) {
        return f(this, e, t);
      }
      findDiffEnd(e, t = this.size, n = e.size) {
        return g(this, e, t, n);
      }
      findIndex(e, t = -1) {
        if (0 == e) return y(0, e);
        if (e == this.size) return y(this.content.length, e);
        if (e > this.size || e < 0)
          throw RangeError(`Position ${e} outside of fragment (${this})`);
        for (let n = 0, r = 0; ; n++) {
          let i = r + this.child(n).nodeSize;
          if (i >= e) {
            if (i == e || t > 0) return y(n + 1, i);
            return y(n, r);
          }
          r = i;
        }
      }
      toString() {
        return "<" + this.toStringInner() + ">";
      }
      toStringInner() {
        return this.content.join(", ");
      }
      toJSON() {
        return this.content.length ? this.content.map((e) => e.toJSON()) : null;
      }
      static fromJSON(e, t) {
        if (!t) return x.empty;
        if (!Array.isArray(t))
          throw RangeError("Invalid input for Fragment.fromJSON");
        return new x(t.map(e.nodeFromJSON));
      }
      static fromArray(e) {
        if (!e.length) return x.empty;
        let t,
          n = 0;
        for (let r = 0; r < e.length; r++) {
          let i = e[r];
          ((n += i.nodeSize),
            r && i.isText && e[r - 1].sameMarkup(i)
              ? (t || (t = e.slice(0, r)),
                (t[t.length - 1] = i.withText(t[t.length - 1].text + i.text)))
              : t && t.push(i));
        }
        return new x(t || e, n);
      }
      static from(e) {
        if (!e) return x.empty;
        if (e instanceof x) return e;
        if (Array.isArray(e)) return this.fromArray(e);
        if (e.attrs) return new x([e], e.nodeSize);
        throw RangeError(
          "Can not convert " +
            e +
            " to a Fragment" +
            (e.nodesBetween
              ? " (looks like multiple versions of prosemirror-model were loaded)"
              : ""),
        );
      }
    }
    x.empty = new x([], 0);
    let v = { index: 0, offset: 0 };
    function y(e, t) {
      return ((v.index = e), (v.offset = t), v);
    }
    function b(e, t) {
      if (e === t) return !0;
      if (!(e && "object" == typeof e) || !(t && "object" == typeof t))
        return !1;
      let n = Array.isArray(e);
      if (Array.isArray(t) != n) return !1;
      if (n) {
        if (e.length != t.length) return !1;
        for (let n = 0; n < e.length; n++) if (!b(e[n], t[n])) return !1;
      } else {
        for (let n in e) if (!(n in t) || !b(e[n], t[n])) return !1;
        for (let n in t) if (!(n in e)) return !1;
      }
      return !0;
    }
    class j {
      constructor(e, t) {
        ((this.type = e), (this.attrs = t));
      }
      addToSet(e) {
        let t,
          n = !1;
        for (let r = 0; r < e.length; r++) {
          let i = e[r];
          if (this.eq(i)) return e;
          if (this.type.excludes(i.type)) t || (t = e.slice(0, r));
          else {
            if (i.type.excludes(this.type)) return e;
            (!n &&
              i.type.rank > this.type.rank &&
              (t || (t = e.slice(0, r)), t.push(this), (n = !0)),
              t && t.push(i));
          }
        }
        return (t || (t = e.slice()), n || t.push(this), t);
      }
      removeFromSet(e) {
        for (let t = 0; t < e.length; t++)
          if (this.eq(e[t])) return e.slice(0, t).concat(e.slice(t + 1));
        return e;
      }
      isInSet(e) {
        for (let t = 0; t < e.length; t++) if (this.eq(e[t])) return !0;
        return !1;
      }
      eq(e) {
        return this == e || (this.type == e.type && b(this.attrs, e.attrs));
      }
      toJSON() {
        let e = { type: this.type.name };
        for (let t in this.attrs) {
          e.attrs = this.attrs;
          break;
        }
        return e;
      }
      static fromJSON(e, t) {
        if (!t) throw RangeError("Invalid input for Mark.fromJSON");
        let n = e.marks[t.type];
        if (!n)
          throw RangeError(`There is no mark type ${t.type} in this schema`);
        let r = n.create(t.attrs);
        return (n.checkAttrs(r.attrs), r);
      }
      static sameSet(e, t) {
        if (e == t) return !0;
        if (e.length != t.length) return !1;
        for (let n = 0; n < e.length; n++) if (!e[n].eq(t[n])) return !1;
        return !0;
      }
      static setFrom(e) {
        if (!e || (Array.isArray(e) && 0 == e.length)) return j.none;
        if (e instanceof j) return [e];
        let t = e.slice();
        return (t.sort((e, t) => e.type.rank - t.type.rank), t);
      }
    }
    j.none = [];
    class w extends Error {}
    class C {
      constructor(e, t, n) {
        ((this.content = e), (this.openStart = t), (this.openEnd = n));
      }
      get size() {
        return this.content.size - this.openStart - this.openEnd;
      }
      insertAt(e, t) {
        let n = S(this.content, e + this.openStart, t);
        return n && new C(n, this.openStart, this.openEnd);
      }
      removeBetween(e, t) {
        return new C(
          k(this.content, e + this.openStart, t + this.openStart),
          this.openStart,
          this.openEnd,
        );
      }
      eq(e) {
        return (
          this.content.eq(e.content) &&
          this.openStart == e.openStart &&
          this.openEnd == e.openEnd
        );
      }
      toString() {
        return this.content + "(" + this.openStart + "," + this.openEnd + ")";
      }
      toJSON() {
        if (!this.content.size) return null;
        let e = { content: this.content.toJSON() };
        return (
          this.openStart > 0 && (e.openStart = this.openStart),
          this.openEnd > 0 && (e.openEnd = this.openEnd),
          e
        );
      }
      static fromJSON(e, t) {
        if (!t) return C.empty;
        let n = t.openStart || 0,
          r = t.openEnd || 0;
        if ("number" != typeof n || "number" != typeof r)
          throw RangeError("Invalid input for Slice.fromJSON");
        return new C(x.fromJSON(e, t.content), n, r);
      }
      static maxOpen(e, t = !0) {
        let n = 0,
          r = 0;
        for (
          let r = e.firstChild;
          r && !r.isLeaf && (t || !r.type.spec.isolating);
          r = r.firstChild
        )
          n++;
        for (
          let n = e.lastChild;
          n && !n.isLeaf && (t || !n.type.spec.isolating);
          n = n.lastChild
        )
          r++;
        return new C(e, n, r);
      }
    }
    function k(e, t, n) {
      let { index: r, offset: i } = e.findIndex(t),
        s = e.maybeChild(r),
        { index: a, offset: o } = e.findIndex(n);
      if (i == t || s.isText) {
        if (o != n && !e.child(a).isText)
          throw RangeError("Removing non-flat range");
        return e.cut(0, t).append(e.cut(n));
      }
      if (r != a) throw RangeError("Removing non-flat range");
      return e.replaceChild(r, s.copy(k(s.content, t - i - 1, n - i - 1)));
    }
    function S(e, t, n, r) {
      let { index: i, offset: s } = e.findIndex(t),
        a = e.maybeChild(i);
      if (s == t || a.isText)
        return r && !r.canReplace(i, i, n)
          ? null
          : e.cut(0, t).append(n).append(e.cut(t));
      let o = S(a.content, t - s - 1, n);
      return o && e.replaceChild(i, a.copy(o));
    }
    function N(e, t, n) {
      if (n.openStart > e.depth)
        throw new w("Inserted content deeper than insertion position");
      if (e.depth - n.openStart != t.depth - n.openEnd)
        throw new w("Inconsistent open depths");
      return E(e, t, n, 0);
    }
    function E(e, t, n, r) {
      let i = e.index(r),
        s = e.node(r);
      if (i == t.index(r) && r < e.depth - n.openStart) {
        let a = E(e, t, n, r + 1);
        return s.copy(s.content.replaceChild(i, a));
      }
      if (!n.content.size) return T(s, P(e, t, r));
      if (n.openStart || n.openEnd || e.depth != r || t.depth != r) {
        let { start: i, end: a } = R(n, e);
        return T(s, L(e, i, a, t, r));
      }
      {
        let r = e.parent,
          i = r.content;
        return T(
          r,
          i
            .cut(0, e.parentOffset)
            .append(n.content)
            .append(i.cut(t.parentOffset)),
        );
      }
    }
    function A(e, t) {
      if (!t.type.compatibleContent(e.type))
        throw new w("Cannot join " + t.type.name + " onto " + e.type.name);
    }
    function D(e, t, n) {
      let r = e.node(n);
      return (A(r, t.node(n)), r);
    }
    function I(e, t) {
      let n = t.length - 1;
      n >= 0 && e.isText && e.sameMarkup(t[n])
        ? (t[n] = e.withText(t[n].text + e.text))
        : t.push(e);
    }
    function M(e, t, n, r) {
      let i = (t || e).node(n),
        s = 0,
        a = t ? t.index(n) : i.childCount;
      e &&
        ((s = e.index(n)),
        e.depth > n ? s++ : e.textOffset && (I(e.nodeAfter, r), s++));
      for (let e = s; e < a; e++) I(i.child(e), r);
      t && t.depth == n && t.textOffset && I(t.nodeBefore, r);
    }
    function T(e, t) {
      return (e.type.checkContent(t), e.copy(t));
    }
    function L(e, t, n, r, i) {
      let s = e.depth > i && D(e, t, i + 1),
        a = r.depth > i && D(n, r, i + 1),
        o = [];
      return (
        M(null, e, i, o),
        s && a && t.index(i) == n.index(i)
          ? (A(s, a), I(T(s, L(e, t, n, r, i + 1)), o))
          : (s && I(T(s, P(e, t, i + 1)), o),
            M(t, n, i, o),
            a && I(T(a, P(n, r, i + 1)), o)),
        M(r, null, i, o),
        new x(o)
      );
    }
    function P(e, t, n) {
      let r = [];
      return (
        M(null, e, n, r),
        e.depth > n && I(T(D(e, t, n + 1), P(e, t, n + 1)), r),
        M(t, null, n, r),
        new x(r)
      );
    }
    function R(e, t) {
      let n = t.depth - e.openStart,
        r = t.node(n).copy(e.content);
      for (let e = n - 1; e >= 0; e--) r = t.node(e).copy(x.from(r));
      return {
        start: r.resolveNoCache(e.openStart + n),
        end: r.resolveNoCache(r.content.size - e.openEnd - n),
      };
    }
    C.empty = new C(x.empty, 0, 0);
    class F {
      constructor(e, t, n) {
        ((this.pos = e),
          (this.path = t),
          (this.parentOffset = n),
          (this.depth = t.length / 3 - 1));
      }
      resolveDepth(e) {
        return null == e ? this.depth : e < 0 ? this.depth + e : e;
      }
      get parent() {
        return this.node(this.depth);
      }
      get doc() {
        return this.node(0);
      }
      node(e) {
        return this.path[3 * this.resolveDepth(e)];
      }
      index(e) {
        return this.path[3 * this.resolveDepth(e) + 1];
      }
      indexAfter(e) {
        return (
          (e = this.resolveDepth(e)),
          this.index(e) + (e != this.depth || this.textOffset ? 1 : 0)
        );
      }
      start(e) {
        return 0 == (e = this.resolveDepth(e)) ? 0 : this.path[3 * e - 1] + 1;
      }
      end(e) {
        return (
          (e = this.resolveDepth(e)),
          this.start(e) + this.node(e).content.size
        );
      }
      before(e) {
        if (!(e = this.resolveDepth(e)))
          throw RangeError("There is no position before the top-level node");
        return e == this.depth + 1 ? this.pos : this.path[3 * e - 1];
      }
      after(e) {
        if (!(e = this.resolveDepth(e)))
          throw RangeError("There is no position after the top-level node");
        return e == this.depth + 1
          ? this.pos
          : this.path[3 * e - 1] + this.path[3 * e].nodeSize;
      }
      get textOffset() {
        return this.pos - this.path[this.path.length - 1];
      }
      get nodeAfter() {
        let e = this.parent,
          t = this.index(this.depth);
        if (t == e.childCount) return null;
        let n = this.pos - this.path[this.path.length - 1],
          r = e.child(t);
        return n ? e.child(t).cut(n) : r;
      }
      get nodeBefore() {
        let e = this.index(this.depth),
          t = this.pos - this.path[this.path.length - 1];
        return t
          ? this.parent.child(e).cut(0, t)
          : 0 == e
            ? null
            : this.parent.child(e - 1);
      }
      posAtIndex(e, t) {
        t = this.resolveDepth(t);
        let n = this.path[3 * t],
          r = 0 == t ? 0 : this.path[3 * t - 1] + 1;
        for (let t = 0; t < e; t++) r += n.child(t).nodeSize;
        return r;
      }
      marks() {
        let e = this.parent,
          t = this.index();
        if (0 == e.content.size) return j.none;
        if (this.textOffset) return e.child(t).marks;
        let n = e.maybeChild(t - 1),
          r = e.maybeChild(t);
        if (!n) {
          let e = n;
          ((n = r), (r = e));
        }
        let i = n.marks;
        for (var s = 0; s < i.length; s++)
          !1 !== i[s].type.spec.inclusive ||
            (r && i[s].isInSet(r.marks)) ||
            (i = i[s--].removeFromSet(i));
        return i;
      }
      marksAcross(e) {
        let t = this.parent.maybeChild(this.index());
        if (!t || !t.isInline) return null;
        let n = t.marks,
          r = e.parent.maybeChild(e.index());
        for (var i = 0; i < n.length; i++)
          !1 !== n[i].type.spec.inclusive ||
            (r && n[i].isInSet(r.marks)) ||
            (n = n[i--].removeFromSet(n));
        return n;
      }
      sharedDepth(e) {
        for (let t = this.depth; t > 0; t--)
          if (this.start(t) <= e && this.end(t) >= e) return t;
        return 0;
      }
      blockRange(e = this, t) {
        if (e.pos < this.pos) return e.blockRange(this);
        for (
          let n =
            this.depth -
            (this.parent.inlineContent || this.pos == e.pos ? 1 : 0);
          n >= 0;
          n--
        )
          if (e.pos <= this.end(n) && (!t || t(this.node(n))))
            return new V(this, e, n);
        return null;
      }
      sameParent(e) {
        return this.pos - this.parentOffset == e.pos - e.parentOffset;
      }
      max(e) {
        return e.pos > this.pos ? e : this;
      }
      min(e) {
        return e.pos < this.pos ? e : this;
      }
      toString() {
        let e = "";
        for (let t = 1; t <= this.depth; t++)
          e +=
            (e ? "/" : "") + this.node(t).type.name + "_" + this.index(t - 1);
        return e + ":" + this.parentOffset;
      }
      static resolve(e, t) {
        if (!(t >= 0 && t <= e.content.size))
          throw RangeError("Position " + t + " out of range");
        let n = [],
          r = 0,
          i = t;
        for (let t = e; ; ) {
          let { index: e, offset: s } = t.content.findIndex(i),
            a = i - s;
          if ((n.push(t, e, r + s), !a || (t = t.child(e)).isText)) break;
          ((i = a - 1), (r += s + 1));
        }
        return new F(t, n, i);
      }
      static resolveCached(e, t) {
        let n = B.get(e);
        if (n)
          for (let e = 0; e < n.elts.length; e++) {
            let r = n.elts[e];
            if (r.pos == t) return r;
          }
        else B.set(e, (n = new _()));
        let r = (n.elts[n.i] = F.resolve(e, t));
        return ((n.i = (n.i + 1) % O), r);
      }
    }
    class _ {
      constructor() {
        ((this.elts = []), (this.i = 0));
      }
    }
    let O = 12,
      B = new WeakMap();
    class V {
      constructor(e, t, n) {
        ((this.$from = e), (this.$to = t), (this.depth = n));
      }
      get start() {
        return this.$from.before(this.depth + 1);
      }
      get end() {
        return this.$to.after(this.depth + 1);
      }
      get parent() {
        return this.$from.node(this.depth);
      }
      get startIndex() {
        return this.$from.index(this.depth);
      }
      get endIndex() {
        return this.$to.indexAfter(this.depth);
      }
    }
    let z = Object.create(null);
    class H {
      constructor(e, t, n, r = j.none) {
        ((this.type = e),
          (this.attrs = t),
          (this.marks = r),
          (this.content = n || x.empty));
      }
      get children() {
        return this.content.content;
      }
      get nodeSize() {
        return this.isLeaf ? 1 : 2 + this.content.size;
      }
      get childCount() {
        return this.content.childCount;
      }
      child(e) {
        return this.content.child(e);
      }
      maybeChild(e) {
        return this.content.maybeChild(e);
      }
      forEach(e) {
        this.content.forEach(e);
      }
      nodesBetween(e, t, n, r = 0) {
        this.content.nodesBetween(e, t, n, r, this);
      }
      descendants(e) {
        this.nodesBetween(0, this.content.size, e);
      }
      get textContent() {
        return this.isLeaf && this.type.spec.leafText
          ? this.type.spec.leafText(this)
          : this.textBetween(0, this.content.size, "");
      }
      textBetween(e, t, n, r) {
        return this.content.textBetween(e, t, n, r);
      }
      get firstChild() {
        return this.content.firstChild;
      }
      get lastChild() {
        return this.content.lastChild;
      }
      eq(e) {
        return this == e || (this.sameMarkup(e) && this.content.eq(e.content));
      }
      sameMarkup(e) {
        return this.hasMarkup(e.type, e.attrs, e.marks);
      }
      hasMarkup(e, t, n) {
        return (
          this.type == e &&
          b(this.attrs, t || e.defaultAttrs || z) &&
          j.sameSet(this.marks, n || j.none)
        );
      }
      copy(e = null) {
        return e == this.content
          ? this
          : new H(this.type, this.attrs, e, this.marks);
      }
      mark(e) {
        return e == this.marks
          ? this
          : new H(this.type, this.attrs, this.content, e);
      }
      cut(e, t = this.content.size) {
        return 0 == e && t == this.content.size
          ? this
          : this.copy(this.content.cut(e, t));
      }
      slice(e, t = this.content.size, n = !1) {
        if (e == t) return C.empty;
        let r = this.resolve(e),
          i = this.resolve(t),
          s = n ? 0 : r.sharedDepth(t),
          a = r.start(s);
        return new C(
          r.node(s).content.cut(r.pos - a, i.pos - a),
          r.depth - s,
          i.depth - s,
        );
      }
      replace(e, t, n) {
        return N(this.resolve(e), this.resolve(t), n);
      }
      nodeAt(e) {
        for (let t = this; ; ) {
          let { index: n, offset: r } = t.content.findIndex(e);
          if (!(t = t.maybeChild(n))) return null;
          if (r == e || t.isText) return t;
          e -= r + 1;
        }
      }
      childAfter(e) {
        let { index: t, offset: n } = this.content.findIndex(e);
        return { node: this.content.maybeChild(t), index: t, offset: n };
      }
      childBefore(e) {
        if (0 == e) return { node: null, index: 0, offset: 0 };
        let { index: t, offset: n } = this.content.findIndex(e);
        if (n < e) return { node: this.content.child(t), index: t, offset: n };
        let r = this.content.child(t - 1);
        return { node: r, index: t - 1, offset: n - r.nodeSize };
      }
      resolve(e) {
        return F.resolveCached(this, e);
      }
      resolveNoCache(e) {
        return F.resolve(this, e);
      }
      rangeHasMark(e, t, n) {
        let r = !1;
        return (
          t > e &&
            this.nodesBetween(
              e,
              t,
              (e) => (n.isInSet(e.marks) && (r = !0), !r),
            ),
          r
        );
      }
      get isBlock() {
        return this.type.isBlock;
      }
      get isTextblock() {
        return this.type.isTextblock;
      }
      get inlineContent() {
        return this.type.inlineContent;
      }
      get isInline() {
        return this.type.isInline;
      }
      get isText() {
        return this.type.isText;
      }
      get isLeaf() {
        return this.type.isLeaf;
      }
      get isAtom() {
        return this.type.isAtom;
      }
      toString() {
        if (this.type.spec.toDebugString)
          return this.type.spec.toDebugString(this);
        let e = this.type.name;
        return (
          this.content.size && (e += "(" + this.content.toStringInner() + ")"),
          U(this.marks, e)
        );
      }
      contentMatchAt(e) {
        let t = this.type.contentMatch.matchFragment(this.content, 0, e);
        if (!t)
          throw Error("Called contentMatchAt on a node with invalid content");
        return t;
      }
      canReplace(e, t, n = x.empty, r = 0, i = n.childCount) {
        let s = this.contentMatchAt(e).matchFragment(n, r, i),
          a = s && s.matchFragment(this.content, t);
        if (!a || !a.validEnd) return !1;
        for (let e = r; e < i; e++)
          if (!this.type.allowsMarks(n.child(e).marks)) return !1;
        return !0;
      }
      canReplaceWith(e, t, n, r) {
        if (r && !this.type.allowsMarks(r)) return !1;
        let i = this.contentMatchAt(e).matchType(n),
          s = i && i.matchFragment(this.content, t);
        return !!s && s.validEnd;
      }
      canAppend(e) {
        return e.content.size
          ? this.canReplace(this.childCount, this.childCount, e.content)
          : this.type.compatibleContent(e.type);
      }
      check() {
        (this.type.checkContent(this.content),
          this.type.checkAttrs(this.attrs));
        let e = j.none;
        for (let t = 0; t < this.marks.length; t++) {
          let n = this.marks[t];
          (n.type.checkAttrs(n.attrs), (e = n.addToSet(e)));
        }
        if (!j.sameSet(e, this.marks))
          throw RangeError(
            `Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e) => e.type.name)}`,
          );
        this.content.forEach((e) => e.check());
      }
      toJSON() {
        let e = { type: this.type.name };
        for (let t in this.attrs) {
          e.attrs = this.attrs;
          break;
        }
        return (
          this.content.size && (e.content = this.content.toJSON()),
          this.marks.length && (e.marks = this.marks.map((e) => e.toJSON())),
          e
        );
      }
      static fromJSON(e, t) {
        let n;
        if (!t) throw RangeError("Invalid input for Node.fromJSON");
        if (t.marks) {
          if (!Array.isArray(t.marks))
            throw RangeError("Invalid mark data for Node.fromJSON");
          n = t.marks.map(e.markFromJSON);
        }
        if ("text" == t.type) {
          if ("string" != typeof t.text)
            throw RangeError("Invalid text node in JSON");
          return e.text(t.text, n);
        }
        let r = x.fromJSON(e, t.content),
          i = e.nodeType(t.type).create(t.attrs, r, n);
        return (i.type.checkAttrs(i.attrs), i);
      }
    }
    H.prototype.text = void 0;
    class $ extends H {
      constructor(e, t, n, r) {
        if ((super(e, t, null, r), !n))
          throw RangeError("Empty text nodes are not allowed");
        this.text = n;
      }
      toString() {
        return this.type.spec.toDebugString
          ? this.type.spec.toDebugString(this)
          : U(this.marks, JSON.stringify(this.text));
      }
      get textContent() {
        return this.text;
      }
      textBetween(e, t) {
        return this.text.slice(e, t);
      }
      get nodeSize() {
        return this.text.length;
      }
      mark(e) {
        return e == this.marks
          ? this
          : new $(this.type, this.attrs, this.text, e);
      }
      withText(e) {
        return e == this.text
          ? this
          : new $(this.type, this.attrs, e, this.marks);
      }
      cut(e = 0, t = this.text.length) {
        return 0 == e && t == this.text.length
          ? this
          : this.withText(this.text.slice(e, t));
      }
      eq(e) {
        return this.sameMarkup(e) && this.text == e.text;
      }
      toJSON() {
        let e = super.toJSON();
        return ((e.text = this.text), e);
      }
    }
    function U(e, t) {
      for (let n = e.length - 1; n >= 0; n--)
        t = e[n].type.name + "(" + t + ")";
      return t;
    }
    class G {
      constructor(e) {
        ((this.validEnd = e), (this.next = []), (this.wrapCache = []));
      }
      static parse(e, t) {
        let n = new W(e, t);
        if (null == n.next) return G.empty;
        let r = q(n);
        n.next && n.err("Unexpected trailing text");
        let i = er(ee(r));
        return (ei(i, n), i);
      }
      matchType(e) {
        for (let t = 0; t < this.next.length; t++)
          if (this.next[t].type == e) return this.next[t].next;
        return null;
      }
      matchFragment(e, t = 0, n = e.childCount) {
        let r = this;
        for (let i = t; r && i < n; i++) r = r.matchType(e.child(i).type);
        return r;
      }
      get inlineContent() {
        return 0 != this.next.length && this.next[0].type.isInline;
      }
      get defaultType() {
        for (let e = 0; e < this.next.length; e++) {
          let { type: t } = this.next[e];
          if (!(t.isText || t.hasRequiredAttrs())) return t;
        }
        return null;
      }
      compatible(e) {
        for (let t = 0; t < this.next.length; t++)
          for (let n = 0; n < e.next.length; n++)
            if (this.next[t].type == e.next[n].type) return !0;
        return !1;
      }
      fillBefore(e, t = !1, n = 0) {
        let r = [this];
        function i(s, a) {
          let o = s.matchFragment(e, n);
          if (o && (!t || o.validEnd))
            return x.from(a.map((e) => e.createAndFill()));
          for (let e = 0; e < s.next.length; e++) {
            let { type: t, next: n } = s.next[e];
            if (!(t.isText || t.hasRequiredAttrs()) && -1 == r.indexOf(n)) {
              r.push(n);
              let e = i(n, a.concat(t));
              if (e) return e;
            }
          }
          return null;
        }
        return i(this, []);
      }
      findWrapping(e) {
        for (let t = 0; t < this.wrapCache.length; t += 2)
          if (this.wrapCache[t] == e) return this.wrapCache[t + 1];
        let t = this.computeWrapping(e);
        return (this.wrapCache.push(e, t), t);
      }
      computeWrapping(e) {
        let t = Object.create(null),
          n = [{ match: this, type: null, via: null }];
        for (; n.length; ) {
          let r = n.shift(),
            i = r.match;
          if (i.matchType(e)) {
            let e = [];
            for (let t = r; t.type; t = t.via) e.push(t.type);
            return e.reverse();
          }
          for (let e = 0; e < i.next.length; e++) {
            let { type: s, next: a } = i.next[e];
            s.isLeaf ||
              s.hasRequiredAttrs() ||
              s.name in t ||
              (r.type && !a.validEnd) ||
              (n.push({ match: s.contentMatch, type: s, via: r }),
              (t[s.name] = !0));
          }
        }
        return null;
      }
      get edgeCount() {
        return this.next.length;
      }
      edge(e) {
        if (e >= this.next.length)
          throw RangeError(`There's no ${e}th edge in this content match`);
        return this.next[e];
      }
      toString() {
        let e = [];
        function t(n) {
          e.push(n);
          for (let r = 0; r < n.next.length; r++)
            -1 == e.indexOf(n.next[r].next) && t(n.next[r].next);
        }
        return (
          t(this),
          e
            .map((t, n) => {
              let r = n + (t.validEnd ? "*" : " ") + " ";
              for (let n = 0; n < t.next.length; n++)
                r +=
                  (n ? ", " : "") +
                  t.next[n].type.name +
                  "->" +
                  e.indexOf(t.next[n].next);
              return r;
            })
            .join("\n")
        );
      }
    }
    G.empty = new G(!0);
    class W {
      constructor(e, t) {
        ((this.string = e),
          (this.nodeTypes = t),
          (this.inline = null),
          (this.pos = 0),
          (this.tokens = e.split(/\s*(?=\b|\W|$)/)),
          "" == this.tokens[this.tokens.length - 1] && this.tokens.pop(),
          "" == this.tokens[0] && this.tokens.shift());
      }
      get next() {
        return this.tokens[this.pos];
      }
      eat(e) {
        return this.next == e && (this.pos++ || !0);
      }
      err(e) {
        throw SyntaxError(e + " (in content expression '" + this.string + "')");
      }
    }
    function q(e) {
      let t = [];
      do t.push(Z(e));
      while (e.eat("|"));
      return 1 == t.length ? t[0] : { type: "choice", exprs: t };
    }
    function Z(e) {
      let t = [];
      do t.push(K(e));
      while (e.next && ")" != e.next && "|" != e.next);
      return 1 == t.length ? t[0] : { type: "seq", exprs: t };
    }
    function K(e) {
      let t = X(e);
      for (;;)
        if (e.eat("+")) t = { type: "plus", expr: t };
        else if (e.eat("*")) t = { type: "star", expr: t };
        else if (e.eat("?")) t = { type: "opt", expr: t };
        else if (e.eat("{")) t = J(e, t);
        else break;
      return t;
    }
    function Y(e) {
      /\D/.test(e.next) && e.err("Expected number, got '" + e.next + "'");
      let t = Number(e.next);
      return (e.pos++, t);
    }
    function J(e, t) {
      let n = Y(e),
        r = n;
      return (
        e.eat(",") && (r = "}" != e.next ? Y(e) : -1),
        e.eat("}") || e.err("Unclosed braced range"),
        { type: "range", min: n, max: r, expr: t }
      );
    }
    function Q(e, t) {
      let n = e.nodeTypes,
        r = n[t];
      if (r) return [r];
      let i = [];
      for (let e in n) {
        let r = n[e];
        r.isInGroup(t) && i.push(r);
      }
      return (
        0 == i.length && e.err("No node type or group '" + t + "' found"),
        i
      );
    }
    function X(e) {
      if (e.eat("(")) {
        let t = q(e);
        return (e.eat(")") || e.err("Missing closing paren"), t);
      }
      if (/\W/.test(e.next)) e.err("Unexpected token '" + e.next + "'");
      else {
        let t = Q(e, e.next).map(
          (t) => (
            null == e.inline
              ? (e.inline = t.isInline)
              : e.inline != t.isInline &&
                e.err("Mixing inline and block content"),
            { type: "name", value: t }
          ),
        );
        return (e.pos++, 1 == t.length ? t[0] : { type: "choice", exprs: t });
      }
    }
    function ee(e) {
      let t = [[]];
      return (i(s(e, 0), n()), t);
      function n() {
        return t.push([]) - 1;
      }
      function r(e, n, r) {
        let i = { term: r, to: n };
        return (t[e].push(i), i);
      }
      function i(e, t) {
        e.forEach((e) => (e.to = t));
      }
      function s(e, t) {
        if ("choice" == e.type)
          return e.exprs.reduce((e, n) => e.concat(s(n, t)), []);
        if ("seq" == e.type)
          for (let r = 0; ; r++) {
            let a = s(e.exprs[r], t);
            if (r == e.exprs.length - 1) return a;
            i(a, (t = n()));
          }
        else if ("star" == e.type) {
          let a = n();
          return (r(t, a), i(s(e.expr, a), a), [r(a)]);
        } else if ("plus" == e.type) {
          let a = n();
          return (i(s(e.expr, t), a), i(s(e.expr, a), a), [r(a)]);
        } else if ("opt" == e.type) return [r(t)].concat(s(e.expr, t));
        else if ("range" == e.type) {
          let a = t;
          for (let t = 0; t < e.min; t++) {
            let t = n();
            (i(s(e.expr, a), t), (a = t));
          }
          if (-1 == e.max) i(s(e.expr, a), a);
          else
            for (let t = e.min; t < e.max; t++) {
              let t = n();
              (r(a, t), i(s(e.expr, a), t), (a = t));
            }
          return [r(a)];
        } else if ("name" == e.type) return [r(t, void 0, e.value)];
        else throw Error("Unknown expr type");
      }
    }
    function et(e, t) {
      return t - e;
    }
    function en(e, t) {
      let n = [];
      return (r(t), n.sort(et));
      function r(t) {
        let i = e[t];
        if (1 == i.length && !i[0].term) return r(i[0].to);
        n.push(t);
        for (let e = 0; e < i.length; e++) {
          let { term: t, to: s } = i[e];
          t || -1 != n.indexOf(s) || r(s);
        }
      }
    }
    function er(e) {
      let t = Object.create(null);
      return n(en(e, 0));
      function n(r) {
        let i = [];
        r.forEach((t) => {
          e[t].forEach(({ term: t, to: n }) => {
            let r;
            if (t) {
              for (let e = 0; e < i.length; e++) i[e][0] == t && (r = i[e][1]);
              en(e, n).forEach((e) => {
                (r || i.push([t, (r = [])]), -1 == r.indexOf(e) && r.push(e));
              });
            }
          });
        });
        let s = (t[r.join(",")] = new G(r.indexOf(e.length - 1) > -1));
        for (let e = 0; e < i.length; e++) {
          let r = i[e][1].sort(et);
          s.next.push({ type: i[e][0], next: t[r.join(",")] || n(r) });
        }
        return s;
      }
    }
    function ei(e, t) {
      for (let n = 0, r = [e]; n < r.length; n++) {
        let e = r[n],
          i = !e.validEnd,
          s = [];
        for (let t = 0; t < e.next.length; t++) {
          let { type: n, next: a } = e.next[t];
          (s.push(n.name),
            i && !(n.isText || n.hasRequiredAttrs()) && (i = !1),
            -1 == r.indexOf(a) && r.push(a));
        }
        i &&
          t.err(
            "Only non-generatable nodes (" +
              s.join(", ") +
              ") in a required position (see https://prosemirror.net/docs/guide/#generatable)",
          );
      }
    }
    function es(e) {
      let t = Object.create(null);
      for (let n in e) {
        let r = e[n];
        if (!r.hasDefault) return null;
        t[n] = r.default;
      }
      return t;
    }
    function ea(e, t) {
      let n = Object.create(null);
      for (let r in e) {
        let i = t && t[r];
        if (void 0 === i) {
          let t = e[r];
          if (t.hasDefault) i = t.default;
          else throw RangeError("No value supplied for attribute " + r);
        }
        n[r] = i;
      }
      return n;
    }
    function eo(e, t, n, r) {
      for (let r in t)
        if (!(r in e))
          throw RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);
      for (let n in e) {
        let r = e[n];
        r.validate && r.validate(t[n]);
      }
    }
    function el(e, t) {
      let n = Object.create(null);
      if (t) for (let r in t) n[r] = new ed(e, r, t[r]);
      return n;
    }
    class ec {
      constructor(e, t, n) {
        ((this.name = e),
          (this.schema = t),
          (this.spec = n),
          (this.markSet = null),
          (this.groups = n.group ? n.group.split(" ") : []),
          (this.attrs = el(e, n.attrs)),
          (this.defaultAttrs = es(this.attrs)),
          (this.contentMatch = null),
          (this.inlineContent = null),
          (this.isBlock = !(n.inline || "text" == e)),
          (this.isText = "text" == e));
      }
      get isInline() {
        return !this.isBlock;
      }
      get isTextblock() {
        return this.isBlock && this.inlineContent;
      }
      get isLeaf() {
        return this.contentMatch == G.empty;
      }
      get isAtom() {
        return this.isLeaf || !!this.spec.atom;
      }
      isInGroup(e) {
        return this.groups.indexOf(e) > -1;
      }
      get whitespace() {
        return this.spec.whitespace || (this.spec.code ? "pre" : "normal");
      }
      hasRequiredAttrs() {
        for (let e in this.attrs) if (this.attrs[e].isRequired) return !0;
        return !1;
      }
      compatibleContent(e) {
        return this == e || this.contentMatch.compatible(e.contentMatch);
      }
      computeAttrs(e) {
        return !e && this.defaultAttrs ? this.defaultAttrs : ea(this.attrs, e);
      }
      create(e = null, t, n) {
        if (this.isText)
          throw Error("NodeType.create can't construct text nodes");
        return new H(this, this.computeAttrs(e), x.from(t), j.setFrom(n));
      }
      createChecked(e = null, t, n) {
        return (
          (t = x.from(t)),
          this.checkContent(t),
          new H(this, this.computeAttrs(e), t, j.setFrom(n))
        );
      }
      createAndFill(e = null, t, n) {
        if (((e = this.computeAttrs(e)), (t = x.from(t)).size)) {
          let e = this.contentMatch.fillBefore(t);
          if (!e) return null;
          t = e.append(t);
        }
        let r = this.contentMatch.matchFragment(t),
          i = r && r.fillBefore(x.empty, !0);
        return i ? new H(this, e, t.append(i), j.setFrom(n)) : null;
      }
      validContent(e) {
        let t = this.contentMatch.matchFragment(e);
        if (!t || !t.validEnd) return !1;
        for (let t = 0; t < e.childCount; t++)
          if (!this.allowsMarks(e.child(t).marks)) return !1;
        return !0;
      }
      checkContent(e) {
        if (!this.validContent(e))
          throw RangeError(
            `Invalid content for node ${this.name}: ${e.toString().slice(0, 50)}`,
          );
      }
      checkAttrs(e) {
        eo(this.attrs, e, "node", this.name);
      }
      allowsMarkType(e) {
        return null == this.markSet || this.markSet.indexOf(e) > -1;
      }
      allowsMarks(e) {
        if (null == this.markSet) return !0;
        for (let t = 0; t < e.length; t++)
          if (!this.allowsMarkType(e[t].type)) return !1;
        return !0;
      }
      allowedMarks(e) {
        let t;
        if (null == this.markSet) return e;
        for (let n = 0; n < e.length; n++)
          this.allowsMarkType(e[n].type)
            ? t && t.push(e[n])
            : t || (t = e.slice(0, n));
        return t ? (t.length ? t : j.none) : e;
      }
      static compile(e, t) {
        let n = Object.create(null);
        e.forEach((e, r) => (n[e] = new ec(e, t, r)));
        let r = t.spec.topNode || "doc";
        if (!n[r])
          throw RangeError("Schema is missing its top node type ('" + r + "')");
        if (!n.text) throw RangeError("Every schema needs a 'text' type");
        for (let e in n.text.attrs)
          throw RangeError("The text node type should not have attributes");
        return n;
      }
    }
    function eu(e, t, n) {
      let r = n.split("|");
      return (n) => {
        let i = null === n ? "null" : typeof n;
        if (0 > r.indexOf(i))
          throw RangeError(
            `Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`,
          );
      };
    }
    class ed {
      constructor(e, t, n) {
        ((this.hasDefault = Object.prototype.hasOwnProperty.call(n, "default")),
          (this.default = n.default),
          (this.validate =
            "string" == typeof n.validate ? eu(e, t, n.validate) : n.validate));
      }
      get isRequired() {
        return !this.hasDefault;
      }
    }
    class eh {
      constructor(e, t, n, r) {
        ((this.name = e),
          (this.rank = t),
          (this.schema = n),
          (this.spec = r),
          (this.attrs = el(e, r.attrs)),
          (this.excluded = null));
        let i = es(this.attrs);
        this.instance = i ? new j(this, i) : null;
      }
      create(e = null) {
        return !e && this.instance
          ? this.instance
          : new j(this, ea(this.attrs, e));
      }
      static compile(e, t) {
        let n = Object.create(null),
          r = 0;
        return (e.forEach((e, i) => (n[e] = new eh(e, r++, t, i))), n);
      }
      removeFromSet(e) {
        for (var t = 0; t < e.length; t++)
          e[t].type == this &&
            ((e = e.slice(0, t).concat(e.slice(t + 1))), t--);
        return e;
      }
      isInSet(e) {
        for (let t = 0; t < e.length; t++) if (e[t].type == this) return e[t];
      }
      checkAttrs(e) {
        eo(this.attrs, e, "mark", this.name);
      }
      excludes(e) {
        return this.excluded.indexOf(e) > -1;
      }
    }
    class ep {
      constructor(e) {
        ((this.linebreakReplacement = null),
          (this.cached = Object.create(null)));
        let t = (this.spec = {});
        for (let n in e) t[n] = e[n];
        ((t.nodes = m.from(e.nodes)),
          (t.marks = m.from(e.marks || {})),
          (this.nodes = ec.compile(this.spec.nodes, this)),
          (this.marks = eh.compile(this.spec.marks, this)));
        let n = Object.create(null);
        for (let e in this.nodes) {
          if (e in this.marks)
            throw RangeError(e + " can not be both a node and a mark");
          let t = this.nodes[e],
            r = t.spec.content || "",
            i = t.spec.marks;
          if (
            ((t.contentMatch = n[r] || (n[r] = G.parse(r, this.nodes))),
            (t.inlineContent = t.contentMatch.inlineContent),
            t.spec.linebreakReplacement)
          ) {
            if (this.linebreakReplacement)
              throw RangeError("Multiple linebreak nodes defined");
            if (!t.isInline || !t.isLeaf)
              throw RangeError(
                "Linebreak replacement nodes must be inline leaf nodes",
              );
            this.linebreakReplacement = t;
          }
          t.markSet =
            "_" == i
              ? null
              : i
                ? em(this, i.split(" "))
                : "" != i && t.inlineContent
                  ? null
                  : [];
        }
        for (let e in this.marks) {
          let t = this.marks[e],
            n = t.spec.excludes;
          t.excluded = null == n ? [t] : "" == n ? [] : em(this, n.split(" "));
        }
        ((this.nodeFromJSON = this.nodeFromJSON.bind(this)),
          (this.markFromJSON = this.markFromJSON.bind(this)),
          (this.topNodeType = this.nodes[this.spec.topNode || "doc"]),
          (this.cached.wrappings = Object.create(null)));
      }
      node(e, t = null, n, r) {
        if ("string" == typeof e) e = this.nodeType(e);
        else if (e instanceof ec) {
          if (e.schema != this)
            throw RangeError(
              "Node type from different schema used (" + e.name + ")",
            );
        } else throw RangeError("Invalid node type: " + e);
        return e.createChecked(t, n, r);
      }
      text(e, t) {
        let n = this.nodes.text;
        return new $(n, n.defaultAttrs, e, j.setFrom(t));
      }
      mark(e, t) {
        return ("string" == typeof e && (e = this.marks[e]), e.create(t));
      }
      nodeFromJSON(e) {
        return H.fromJSON(this, e);
      }
      markFromJSON(e) {
        return j.fromJSON(this, e);
      }
      nodeType(e) {
        let t = this.nodes[e];
        if (!t) throw RangeError("Unknown node type: " + e);
        return t;
      }
    }
    function em(e, t) {
      let n = [];
      for (let r = 0; r < t.length; r++) {
        let i = t[r],
          s = e.marks[i],
          a = s;
        if (s) n.push(s);
        else
          for (let t in e.marks) {
            let r = e.marks[t];
            ("_" == i ||
              (r.spec.group && r.spec.group.split(" ").indexOf(i) > -1)) &&
              n.push((a = r));
          }
        if (!a) throw SyntaxError("Unknown mark type: '" + t[r] + "'");
      }
      return n;
    }
    function ef(e) {
      return null != e.tag;
    }
    function eg(e) {
      return null != e.style;
    }
    class ex {
      constructor(e, t) {
        ((this.schema = e),
          (this.rules = t),
          (this.tags = []),
          (this.styles = []));
        let n = (this.matchedStyles = []);
        (t.forEach((e) => {
          if (ef(e)) this.tags.push(e);
          else if (eg(e)) {
            let t = /[^=]*/.exec(e.style)[0];
            (0 > n.indexOf(t) && n.push(t), this.styles.push(e));
          }
        }),
          (this.normalizeLists = !this.tags.some((t) => {
            if (!/^(ul|ol)\b/.test(t.tag) || !t.node) return !1;
            let n = e.nodes[t.node];
            return n.contentMatch.matchType(n);
          })));
      }
      parse(e, t = {}) {
        let n = new eN(this, t, !1);
        return (n.addAll(e, j.none, t.from, t.to), n.finish());
      }
      parseSlice(e, t = {}) {
        let n = new eN(this, t, !0);
        return (n.addAll(e, j.none, t.from, t.to), C.maxOpen(n.finish()));
      }
      matchTag(e, t, n) {
        for (
          let r = n ? this.tags.indexOf(n) + 1 : 0;
          r < this.tags.length;
          r++
        ) {
          let n = this.tags[r];
          if (
            eA(e, n.tag) &&
            (void 0 === n.namespace || e.namespaceURI == n.namespace) &&
            (!n.context || t.matchesContext(n.context))
          ) {
            if (n.getAttrs) {
              let t = n.getAttrs(e);
              if (!1 === t) continue;
              n.attrs = t || void 0;
            }
            return n;
          }
        }
      }
      matchStyle(e, t, n, r) {
        for (
          let i = r ? this.styles.indexOf(r) + 1 : 0;
          i < this.styles.length;
          i++
        ) {
          let r = this.styles[i],
            s = r.style;
          if (
            0 == s.indexOf(e) &&
            (!r.context || n.matchesContext(r.context)) &&
            (!(s.length > e.length) ||
              (61 == s.charCodeAt(e.length) && s.slice(e.length + 1) == t))
          ) {
            if (r.getAttrs) {
              let e = r.getAttrs(t);
              if (!1 === e) continue;
              r.attrs = e || void 0;
            }
            return r;
          }
        }
      }
      static schemaRules(e) {
        let t = [];
        function n(e) {
          let n = null == e.priority ? 50 : e.priority,
            r = 0;
          for (; r < t.length; r++) {
            let e = t[r];
            if ((null == e.priority ? 50 : e.priority) < n) break;
          }
          t.splice(r, 0, e);
        }
        for (let t in e.marks) {
          let r = e.marks[t].spec.parseDOM;
          r &&
            r.forEach((e) => {
              (n((e = eD(e))),
                e.mark || e.ignore || e.clearMark || (e.mark = t));
            });
        }
        for (let t in e.nodes) {
          let r = e.nodes[t].spec.parseDOM;
          r &&
            r.forEach((e) => {
              (n((e = eD(e))), e.node || e.ignore || e.mark || (e.node = t));
            });
        }
        return t;
      }
      static fromSchema(e) {
        return (
          e.cached.domParser ||
          (e.cached.domParser = new ex(e, ex.schemaRules(e)))
        );
      }
    }
    let ev = {
        address: !0,
        article: !0,
        aside: !0,
        blockquote: !0,
        canvas: !0,
        dd: !0,
        div: !0,
        dl: !0,
        fieldset: !0,
        figcaption: !0,
        figure: !0,
        footer: !0,
        form: !0,
        h1: !0,
        h2: !0,
        h3: !0,
        h4: !0,
        h5: !0,
        h6: !0,
        header: !0,
        hgroup: !0,
        hr: !0,
        li: !0,
        noscript: !0,
        ol: !0,
        output: !0,
        p: !0,
        pre: !0,
        section: !0,
        table: !0,
        tfoot: !0,
        ul: !0,
      },
      ey = {
        head: !0,
        noscript: !0,
        object: !0,
        script: !0,
        style: !0,
        title: !0,
      },
      eb = { ol: !0, ul: !0 },
      ej = 1,
      ew = 2,
      eC = 4;
    function ek(e, t, n) {
      return null != t
        ? (t ? ej : 0) | ("full" === t ? ew : 0)
        : e && "pre" == e.whitespace
          ? ej | ew
          : n & ~eC;
    }
    class eS {
      constructor(e, t, n, r, i, s) {
        ((this.type = e),
          (this.attrs = t),
          (this.marks = n),
          (this.solid = r),
          (this.options = s),
          (this.content = []),
          (this.activeMarks = j.none),
          (this.match = i || (s & eC ? null : e.contentMatch)));
      }
      findWrapping(e) {
        if (!this.match) {
          if (!this.type) return [];
          let t = this.type.contentMatch.fillBefore(x.from(e));
          if (t) this.match = this.type.contentMatch.matchFragment(t);
          else {
            let t = this.type.contentMatch,
              n;
            return (n = t.findWrapping(e.type)) ? ((this.match = t), n) : null;
          }
        }
        return this.match.findWrapping(e.type);
      }
      finish(e) {
        if (!(this.options & ej)) {
          let e = this.content[this.content.length - 1],
            t;
          if (e && e.isText && (t = /[ \t\r\n\u000c]+$/.exec(e.text))) {
            let n = e;
            e.text.length == t[0].length
              ? this.content.pop()
              : (this.content[this.content.length - 1] = n.withText(
                  n.text.slice(0, n.text.length - t[0].length),
                ));
          }
        }
        let t = x.from(this.content);
        return (
          !e &&
            this.match &&
            (t = t.append(this.match.fillBefore(x.empty, !0))),
          this.type ? this.type.create(this.attrs, t, this.marks) : t
        );
      }
      inlineContext(e) {
        return this.type
          ? this.type.inlineContent
          : this.content.length
            ? this.content[0].isInline
            : e.parentNode &&
              !ev.hasOwnProperty(e.parentNode.nodeName.toLowerCase());
      }
    }
    class eN {
      constructor(e, t, n) {
        ((this.parser = e),
          (this.options = t),
          (this.isOpen = n),
          (this.open = 0),
          (this.localPreserveWS = !1));
        let r = t.topNode,
          i,
          s = ek(null, t.preserveWhitespace, 0) | (n ? eC : 0);
        ((i = r
          ? new eS(
              r.type,
              r.attrs,
              j.none,
              !0,
              t.topMatch || r.type.contentMatch,
              s,
            )
          : n
            ? new eS(null, null, j.none, !0, null, s)
            : new eS(e.schema.topNodeType, null, j.none, !0, null, s)),
          (this.nodes = [i]),
          (this.find = t.findPositions),
          (this.needsBlock = !1));
      }
      get top() {
        return this.nodes[this.open];
      }
      addDOM(e, t) {
        3 == e.nodeType
          ? this.addTextNode(e, t)
          : 1 == e.nodeType && this.addElement(e, t);
      }
      addTextNode(e, t) {
        let n = e.nodeValue,
          r = this.top,
          i =
            r.options & ew
              ? "full"
              : this.localPreserveWS || (r.options & ej) > 0;
        if ("full" === i || r.inlineContext(e) || /[^ \t\r\n\u000c]/.test(n)) {
          if (i)
            n =
              "full" !== i
                ? n.replace(/\r?\n|\r/g, " ")
                : n.replace(/\r\n?/g, "\n");
          else if (
            ((n = n.replace(/[ \t\r\n\u000c]+/g, " ")),
            /^[ \t\r\n\u000c]/.test(n) && this.open == this.nodes.length - 1)
          ) {
            let t = r.content[r.content.length - 1],
              i = e.previousSibling;
            (!t ||
              (i && "BR" == i.nodeName) ||
              (t.isText && /[ \t\r\n\u000c]$/.test(t.text))) &&
              (n = n.slice(1));
          }
          (n && this.insertNode(this.parser.schema.text(n), t, !/\S/.test(n)),
            this.findInText(e));
        } else this.findInside(e);
      }
      addElement(e, t, n) {
        let r = this.localPreserveWS,
          i = this.top;
        ("PRE" == e.tagName || /pre/.test(e.style && e.style.whiteSpace)) &&
          (this.localPreserveWS = !0);
        let s = e.nodeName.toLowerCase(),
          a;
        eb.hasOwnProperty(s) && this.parser.normalizeLists && eE(e);
        let o =
          (this.options.ruleFromNode && this.options.ruleFromNode(e)) ||
          (a = this.parser.matchTag(e, this, n));
        e: if (o ? o.ignore : ey.hasOwnProperty(s))
          (this.findInside(e), this.ignoreFallback(e, t));
        else if (!o || o.skip || o.closeParent) {
          o && o.closeParent
            ? (this.open = Math.max(0, this.open - 1))
            : o && o.skip.nodeType && (e = o.skip);
          let n,
            r = this.needsBlock;
          if (ev.hasOwnProperty(s))
            (i.content.length &&
              i.content[0].isInline &&
              this.open &&
              (this.open--, (i = this.top)),
              (n = !0),
              i.type || (this.needsBlock = !0));
          else if (!e.firstChild) {
            this.leafFallback(e, t);
            break e;
          }
          let a = o && o.skip ? t : this.readStyles(e, t);
          (a && this.addAll(e, a), n && this.sync(i), (this.needsBlock = r));
        } else {
          let n = this.readStyles(e, t);
          n && this.addElementByRule(e, o, n, !1 === o.consuming ? a : void 0);
        }
        this.localPreserveWS = r;
      }
      leafFallback(e, t) {
        "BR" == e.nodeName &&
          this.top.type &&
          this.top.type.inlineContent &&
          this.addTextNode(e.ownerDocument.createTextNode("\n"), t);
      }
      ignoreFallback(e, t) {
        "BR" != e.nodeName ||
          (this.top.type && this.top.type.inlineContent) ||
          this.findPlace(this.parser.schema.text("-"), t, !0);
      }
      readStyles(e, t) {
        let n = e.style;
        if (n && n.length)
          for (let e = 0; e < this.parser.matchedStyles.length; e++) {
            let r = this.parser.matchedStyles[e],
              i = n.getPropertyValue(r);
            if (i)
              for (let e; ; ) {
                let n = this.parser.matchStyle(r, i, this, e);
                if (!n) break;
                if (n.ignore) return null;
                if (
                  ((t = n.clearMark
                    ? t.filter((e) => !n.clearMark(e))
                    : t.concat(
                        this.parser.schema.marks[n.mark].create(n.attrs),
                      )),
                  !1 === n.consuming)
                )
                  e = n;
                else break;
              }
          }
        return t;
      }
      addElementByRule(e, t, n, r) {
        let i, s;
        if (t.node)
          if ((s = this.parser.schema.nodes[t.node]).isLeaf)
            this.insertNode(s.create(t.attrs), n, "BR" == e.nodeName) ||
              this.leafFallback(e, n);
          else {
            let e = this.enter(s, t.attrs || null, n, t.preserveWhitespace);
            e && ((i = !0), (n = e));
          }
        else {
          let e = this.parser.schema.marks[t.mark];
          n = n.concat(e.create(t.attrs));
        }
        let a = this.top;
        if (s && s.isLeaf) this.findInside(e);
        else if (r) this.addElement(e, n, r);
        else if (t.getContent)
          (this.findInside(e),
            t
              .getContent(e, this.parser.schema)
              .forEach((e) => this.insertNode(e, n, !1)));
        else {
          let r = e;
          ("string" == typeof t.contentElement
            ? (r = e.querySelector(t.contentElement))
            : "function" == typeof t.contentElement
              ? (r = t.contentElement(e))
              : t.contentElement && (r = t.contentElement),
            this.findAround(e, r, !0),
            this.addAll(r, n),
            this.findAround(e, r, !1));
        }
        i && this.sync(a) && this.open--;
      }
      addAll(e, t, n, r) {
        let i = n || 0;
        for (
          let s = n ? e.childNodes[n] : e.firstChild,
            a = null == r ? null : e.childNodes[r];
          s != a;
          s = s.nextSibling, ++i
        )
          (this.findAtPoint(e, i), this.addDOM(s, t));
        this.findAtPoint(e, i);
      }
      findPlace(e, t, n) {
        let r, i;
        for (let t = this.open, s = 0; t >= 0; t--) {
          let a = this.nodes[t],
            o = a.findWrapping(e);
          if (
            o &&
            (!r || r.length > o.length + s) &&
            ((r = o), (i = a), !o.length)
          )
            break;
          if (a.solid) {
            if (n) break;
            s += 2;
          }
        }
        if (!r) return null;
        this.sync(i);
        for (let e = 0; e < r.length; e++)
          t = this.enterInner(r[e], null, t, !1);
        return t;
      }
      insertNode(e, t, n) {
        if (e.isInline && this.needsBlock && !this.top.type) {
          let e = this.textblockFromContext();
          e && (t = this.enterInner(e, null, t));
        }
        let r = this.findPlace(e, t, n);
        if (r) {
          this.closeExtra();
          let t = this.top;
          t.match && (t.match = t.match.matchType(e.type));
          let n = j.none;
          for (let i of r.concat(e.marks))
            (t.type ? t.type.allowsMarkType(i.type) : eI(i.type, e.type)) &&
              (n = i.addToSet(n));
          return (t.content.push(e.mark(n)), !0);
        }
        return !1;
      }
      enter(e, t, n, r) {
        let i = this.findPlace(e.create(t), n, !1);
        return (i && (i = this.enterInner(e, t, n, !0, r)), i);
      }
      enterInner(e, t, n, r = !1, i) {
        this.closeExtra();
        let s = this.top;
        s.match = s.match && s.match.matchType(e);
        let a = ek(e, i, s.options);
        s.options & eC && 0 == s.content.length && (a |= eC);
        let o = j.none;
        return (
          (n = n.filter(
            (t) =>
              (s.type ? !s.type.allowsMarkType(t.type) : !eI(t.type, e)) ||
              ((o = t.addToSet(o)), !1),
          )),
          this.nodes.push(new eS(e, t, o, r, null, a)),
          this.open++,
          n
        );
      }
      closeExtra(e = !1) {
        let t = this.nodes.length - 1;
        if (t > this.open) {
          for (; t > this.open; t--)
            this.nodes[t - 1].content.push(this.nodes[t].finish(e));
          this.nodes.length = this.open + 1;
        }
      }
      finish() {
        return (
          (this.open = 0),
          this.closeExtra(this.isOpen),
          this.nodes[0].finish(!!(this.isOpen || this.options.topOpen))
        );
      }
      sync(e) {
        for (let t = this.open; t >= 0; t--)
          if (this.nodes[t] == e) return ((this.open = t), !0);
          else this.localPreserveWS && (this.nodes[t].options |= ej);
        return !1;
      }
      get currentPos() {
        this.closeExtra();
        let e = 0;
        for (let t = this.open; t >= 0; t--) {
          let n = this.nodes[t].content;
          for (let t = n.length - 1; t >= 0; t--) e += n[t].nodeSize;
          t && e++;
        }
        return e;
      }
      findAtPoint(e, t) {
        if (this.find)
          for (let n = 0; n < this.find.length; n++)
            this.find[n].node == e &&
              this.find[n].offset == t &&
              (this.find[n].pos = this.currentPos);
      }
      findInside(e) {
        if (this.find)
          for (let t = 0; t < this.find.length; t++)
            null == this.find[t].pos &&
              1 == e.nodeType &&
              e.contains(this.find[t].node) &&
              (this.find[t].pos = this.currentPos);
      }
      findAround(e, t, n) {
        if (e != t && this.find)
          for (let r = 0; r < this.find.length; r++)
            null == this.find[r].pos &&
              1 == e.nodeType &&
              e.contains(this.find[r].node) &&
              t.compareDocumentPosition(this.find[r].node) & (n ? 2 : 4) &&
              (this.find[r].pos = this.currentPos);
      }
      findInText(e) {
        if (this.find)
          for (let t = 0; t < this.find.length; t++)
            this.find[t].node == e &&
              (this.find[t].pos =
                this.currentPos - (e.nodeValue.length - this.find[t].offset));
      }
      matchesContext(e) {
        if (e.indexOf("|") > -1)
          return e.split(/\s*\|\s*/).some(this.matchesContext, this);
        let t = e.split("/"),
          n = this.options.context,
          r = !this.isOpen && (!n || n.parent.type == this.nodes[0].type),
          i = -(n ? n.depth + 1 : 0) + +!r,
          s = (e, a) => {
            for (; e >= 0; e--) {
              let o = t[e];
              if ("" == o) {
                if (e == t.length - 1 || 0 == e) continue;
                for (; a >= i; a--) if (s(e - 1, a)) return !0;
                return !1;
              }
              {
                let e =
                  a > 0 || (0 == a && r)
                    ? this.nodes[a].type
                    : n && a >= i
                      ? n.node(a - i).type
                      : null;
                if (!e || (e.name != o && !e.isInGroup(o))) return !1;
                a--;
              }
            }
            return !0;
          };
        return s(t.length - 1, this.open);
      }
      textblockFromContext() {
        let e = this.options.context;
        if (e)
          for (let t = e.depth; t >= 0; t--) {
            let n = e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;
            if (n && n.isTextblock && n.defaultAttrs) return n;
          }
        for (let e in this.parser.schema.nodes) {
          let t = this.parser.schema.nodes[e];
          if (t.isTextblock && t.defaultAttrs) return t;
        }
      }
    }
    function eE(e) {
      for (let t = e.firstChild, n = null; t; t = t.nextSibling) {
        let e = 1 == t.nodeType ? t.nodeName.toLowerCase() : null;
        e && eb.hasOwnProperty(e) && n
          ? (n.appendChild(t), (t = n))
          : "li" == e
            ? (n = t)
            : e && (n = null);
      }
    }
    function eA(e, t) {
      return (
        e.matches ||
        e.msMatchesSelector ||
        e.webkitMatchesSelector ||
        e.mozMatchesSelector
      ).call(e, t);
    }
    function eD(e) {
      let t = {};
      for (let n in e) t[n] = e[n];
      return t;
    }
    function eI(e, t) {
      let n = t.schema.nodes;
      for (let r in n) {
        let i = n[r];
        if (!i.allowsMarkType(e)) continue;
        let s = [],
          a = (e) => {
            s.push(e);
            for (let n = 0; n < e.edgeCount; n++) {
              let { type: r, next: i } = e.edge(n);
              if (r == t || (0 > s.indexOf(i) && a(i))) return !0;
            }
          };
        if (a(i.contentMatch)) return !0;
      }
    }
    class eM {
      constructor(e, t) {
        ((this.nodes = e), (this.marks = t));
      }
      serializeFragment(e, t = {}, n) {
        n || (n = eL(t).createDocumentFragment());
        let r = n,
          i = [];
        return (
          e.forEach((e) => {
            if (i.length || e.marks.length) {
              let n = 0,
                s = 0;
              for (; n < i.length && s < e.marks.length; ) {
                let t = e.marks[s];
                if (!this.marks[t.type.name]) {
                  s++;
                  continue;
                }
                if (!t.eq(i[n][0]) || !1 === t.type.spec.spanning) break;
                (n++, s++);
              }
              for (; n < i.length; ) r = i.pop()[1];
              for (; s < e.marks.length; ) {
                let n = e.marks[s++],
                  a = this.serializeMark(n, e.isInline, t);
                a &&
                  (i.push([n, r]),
                  r.appendChild(a.dom),
                  (r = a.contentDOM || a.dom));
              }
            }
            r.appendChild(this.serializeNodeInner(e, t));
          }),
          n
        );
      }
      serializeNodeInner(e, t) {
        let { dom: n, contentDOM: r } = e_(
          eL(t),
          this.nodes[e.type.name](e),
          null,
          e.attrs,
        );
        if (r) {
          if (e.isLeaf)
            throw RangeError("Content hole not allowed in a leaf node spec");
          this.serializeFragment(e.content, t, r);
        }
        return n;
      }
      serializeNode(e, t = {}) {
        let n = this.serializeNodeInner(e, t);
        for (let r = e.marks.length - 1; r >= 0; r--) {
          let i = this.serializeMark(e.marks[r], e.isInline, t);
          i && ((i.contentDOM || i.dom).appendChild(n), (n = i.dom));
        }
        return n;
      }
      serializeMark(e, t, n = {}) {
        let r = this.marks[e.type.name];
        return r && e_(eL(n), r(e, t), null, e.attrs);
      }
      static renderSpec(e, t, n = null, r) {
        return e_(e, t, n, r);
      }
      static fromSchema(e) {
        return (
          e.cached.domSerializer ||
          (e.cached.domSerializer = new eM(
            this.nodesFromSchema(e),
            this.marksFromSchema(e),
          ))
        );
      }
      static nodesFromSchema(e) {
        let t = eT(e.nodes);
        return (t.text || (t.text = (e) => e.text), t);
      }
      static marksFromSchema(e) {
        return eT(e.marks);
      }
    }
    function eT(e) {
      let t = {};
      for (let n in e) {
        let r = e[n].spec.toDOM;
        r && (t[n] = r);
      }
      return t;
    }
    function eL(e) {
      return e.document || window.document;
    }
    let eP = new WeakMap();
    function eR(e) {
      let t = eP.get(e);
      return (void 0 === t && eP.set(e, (t = eF(e))), t);
    }
    function eF(e) {
      let t = null;
      function n(e) {
        if (e && "object" == typeof e)
          if (Array.isArray(e))
            if ("string" == typeof e[0]) (t || (t = []), t.push(e));
            else for (let t = 0; t < e.length; t++) n(e[t]);
          else for (let t in e) n(e[t]);
      }
      return (n(e), t);
    }
    function e_(e, t, n, r) {
      let i;
      if ("string" == typeof t) return { dom: e.createTextNode(t) };
      if (null != t.nodeType) return { dom: t };
      if (t.dom && null != t.dom.nodeType) return t;
      let s = t[0],
        a;
      if ("string" != typeof s)
        throw RangeError("Invalid array passed to renderSpec");
      if (r && (a = eR(r)) && a.indexOf(t) > -1)
        throw RangeError(
          "Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.",
        );
      let o = s.indexOf(" ");
      o > 0 && ((n = s.slice(0, o)), (s = s.slice(o + 1)));
      let l = n ? e.createElementNS(n, s) : e.createElement(s),
        c = t[1],
        u = 1;
      if (
        c &&
        "object" == typeof c &&
        null == c.nodeType &&
        !Array.isArray(c)
      ) {
        for (let e in ((u = 2), c))
          if (null != c[e]) {
            let t = e.indexOf(" ");
            t > 0
              ? l.setAttributeNS(e.slice(0, t), e.slice(t + 1), c[e])
              : l.setAttribute(e, c[e]);
          }
      }
      for (let s = u; s < t.length; s++) {
        let a = t[s];
        if (0 === a) {
          if (s < t.length - 1 || s > u)
            throw RangeError(
              "Content hole must be the only child of its parent node",
            );
          return { dom: l, contentDOM: l };
        }
        {
          let { dom: t, contentDOM: s } = e_(e, a, n, r);
          if ((l.appendChild(t), s)) {
            if (i) throw RangeError("Multiple content holes");
            i = s;
          }
        }
      }
      return { dom: l, contentDOM: i };
    }
    e.s(
      [
        "DOMParser",
        () => ex,
        "DOMSerializer",
        () => eM,
        "Fragment",
        () => x,
        "Mark",
        () => j,
        "MarkType",
        () => eh,
        "Node",
        () => H,
        "NodeRange",
        () => V,
        "ReplaceError",
        () => w,
        "Schema",
        () => ep,
        "Slice",
        () => C,
      ],
      875817,
    );
    let eO = 65535,
      eB = 65536;
    function eV(e, t) {
      return e + t * eB;
    }
    function ez(e) {
      return e & eO;
    }
    function eH(e) {
      return (e - (e & eO)) / eB;
    }
    let e$ = 1,
      eU = 2,
      eG = 4,
      eW = 8;
    class eq {
      constructor(e, t, n) {
        ((this.pos = e), (this.delInfo = t), (this.recover = n));
      }
      get deleted() {
        return (this.delInfo & eW) > 0;
      }
      get deletedBefore() {
        return (this.delInfo & (e$ | eG)) > 0;
      }
      get deletedAfter() {
        return (this.delInfo & (eU | eG)) > 0;
      }
      get deletedAcross() {
        return (this.delInfo & eG) > 0;
      }
    }
    class eZ {
      constructor(e, t = !1) {
        if (((this.ranges = e), (this.inverted = t), !e.length && eZ.empty))
          return eZ.empty;
      }
      recover(e) {
        let t = 0,
          n = ez(e);
        if (!this.inverted)
          for (let e = 0; e < n; e++)
            t += this.ranges[3 * e + 2] - this.ranges[3 * e + 1];
        return this.ranges[3 * n] + t + eH(e);
      }
      mapResult(e, t = 1) {
        return this._map(e, t, !1);
      }
      map(e, t = 1) {
        return this._map(e, t, !0);
      }
      _map(e, t, n) {
        let r = 0,
          i = this.inverted ? 2 : 1,
          s = this.inverted ? 1 : 2;
        for (let a = 0; a < this.ranges.length; a += 3) {
          let o = this.ranges[a] - (this.inverted ? r : 0);
          if (o > e) break;
          let l = this.ranges[a + i],
            c = this.ranges[a + s],
            u = o + l;
          if (e <= u) {
            let i = l ? (e == o ? -1 : e == u ? 1 : t) : t,
              s = o + r + (i < 0 ? 0 : c);
            if (n) return s;
            let d = e == (t < 0 ? o : u) ? null : eV(a / 3, e - o),
              h = e == o ? eU : e == u ? e$ : eG;
            return ((t < 0 ? e != o : e != u) && (h |= eW), new eq(s, h, d));
          }
          r += c - l;
        }
        return n ? e + r : new eq(e + r, 0, null);
      }
      touches(e, t) {
        let n = 0,
          r = ez(t),
          i = this.inverted ? 2 : 1,
          s = this.inverted ? 1 : 2;
        for (let t = 0; t < this.ranges.length; t += 3) {
          let a = this.ranges[t] - (this.inverted ? n : 0);
          if (a > e) break;
          let o = this.ranges[t + i];
          if (e <= a + o && t == 3 * r) return !0;
          n += this.ranges[t + s] - o;
        }
        return !1;
      }
      forEach(e) {
        let t = this.inverted ? 2 : 1,
          n = this.inverted ? 1 : 2;
        for (let r = 0, i = 0; r < this.ranges.length; r += 3) {
          let s = this.ranges[r],
            a = s - (this.inverted ? i : 0),
            o = s + (this.inverted ? 0 : i),
            l = this.ranges[r + t],
            c = this.ranges[r + n];
          (e(a, a + l, o, o + c), (i += c - l));
        }
      }
      invert() {
        return new eZ(this.ranges, !this.inverted);
      }
      toString() {
        return (this.inverted ? "-" : "") + JSON.stringify(this.ranges);
      }
      static offset(e) {
        return 0 == e ? eZ.empty : new eZ(e < 0 ? [0, -e, 0] : [0, 0, e]);
      }
    }
    eZ.empty = new eZ([]);
    class eK {
      constructor(e, t, n = 0, r = e ? e.length : 0) {
        ((this.mirror = t),
          (this.from = n),
          (this.to = r),
          (this._maps = e || []),
          (this.ownData = !(e || t)));
      }
      get maps() {
        return this._maps;
      }
      slice(e = 0, t = this.maps.length) {
        return new eK(this._maps, this.mirror, e, t);
      }
      appendMap(e, t) {
        (this.ownData ||
          ((this._maps = this._maps.slice()),
          (this.mirror = this.mirror && this.mirror.slice()),
          (this.ownData = !0)),
          (this.to = this._maps.push(e)),
          null != t && this.setMirror(this._maps.length - 1, t));
      }
      appendMapping(e) {
        for (let t = 0, n = this._maps.length; t < e._maps.length; t++) {
          let r = e.getMirror(t);
          this.appendMap(e._maps[t], null != r && r < t ? n + r : void 0);
        }
      }
      getMirror(e) {
        if (this.mirror) {
          for (let t = 0; t < this.mirror.length; t++)
            if (this.mirror[t] == e) return this.mirror[t + (t % 2 ? -1 : 1)];
        }
      }
      setMirror(e, t) {
        (this.mirror || (this.mirror = []), this.mirror.push(e, t));
      }
      appendMappingInverted(e) {
        for (
          let t = e.maps.length - 1, n = this._maps.length + e._maps.length;
          t >= 0;
          t--
        ) {
          let r = e.getMirror(t);
          this.appendMap(
            e._maps[t].invert(),
            null != r && r > t ? n - r - 1 : void 0,
          );
        }
      }
      invert() {
        let e = new eK();
        return (e.appendMappingInverted(this), e);
      }
      map(e, t = 1) {
        if (this.mirror) return this._map(e, t, !0);
        for (let n = this.from; n < this.to; n++) e = this._maps[n].map(e, t);
        return e;
      }
      mapResult(e, t = 1) {
        return this._map(e, t, !1);
      }
      _map(e, t, n) {
        let r = 0;
        for (let n = this.from; n < this.to; n++) {
          let i = this._maps[n].mapResult(e, t);
          if (null != i.recover) {
            let t = this.getMirror(n);
            if (null != t && t > n && t < this.to) {
              ((n = t), (e = this._maps[t].recover(i.recover)));
              continue;
            }
          }
          ((r |= i.delInfo), (e = i.pos));
        }
        return n ? e : new eq(e, r, null);
      }
    }
    let eY = Object.create(null);
    class eJ {
      getMap() {
        return eZ.empty;
      }
      merge(e) {
        return null;
      }
      static fromJSON(e, t) {
        if (!t || !t.stepType)
          throw RangeError("Invalid input for Step.fromJSON");
        let n = eY[t.stepType];
        if (!n) throw RangeError(`No step type ${t.stepType} defined`);
        return n.fromJSON(e, t);
      }
      static jsonID(e, t) {
        if (e in eY) throw RangeError("Duplicate use of step JSON ID " + e);
        return ((eY[e] = t), (t.prototype.jsonID = e), t);
      }
    }
    class eQ {
      constructor(e, t) {
        ((this.doc = e), (this.failed = t));
      }
      static ok(e) {
        return new eQ(e, null);
      }
      static fail(e) {
        return new eQ(null, e);
      }
      static fromReplace(e, t, n, r) {
        try {
          return eQ.ok(e.replace(t, n, r));
        } catch (e) {
          if (e instanceof w) return eQ.fail(e.message);
          throw e;
        }
      }
    }
    function eX(e, t, n) {
      let r = [];
      for (let i = 0; i < e.childCount; i++) {
        let s = e.child(i);
        (s.content.size && (s = s.copy(eX(s.content, t, s))),
          s.isInline && (s = t(s, n, i)),
          r.push(s));
      }
      return x.fromArray(r);
    }
    class e0 extends eJ {
      constructor(e, t, n) {
        (super(), (this.from = e), (this.to = t), (this.mark = n));
      }
      apply(e) {
        let t = e.slice(this.from, this.to),
          n = e.resolve(this.from),
          r = n.node(n.sharedDepth(this.to)),
          i = new C(
            eX(
              t.content,
              (e, t) =>
                e.isAtom && t.type.allowsMarkType(this.mark.type)
                  ? e.mark(this.mark.addToSet(e.marks))
                  : e,
              r,
            ),
            t.openStart,
            t.openEnd,
          );
        return eQ.fromReplace(e, this.from, this.to, i);
      }
      invert() {
        return new e1(this.from, this.to, this.mark);
      }
      map(e) {
        let t = e.mapResult(this.from, 1),
          n = e.mapResult(this.to, -1);
        return (t.deleted && n.deleted) || t.pos >= n.pos
          ? null
          : new e0(t.pos, n.pos, this.mark);
      }
      merge(e) {
        return e instanceof e0 &&
          e.mark.eq(this.mark) &&
          this.from <= e.to &&
          this.to >= e.from
          ? new e0(
              Math.min(this.from, e.from),
              Math.max(this.to, e.to),
              this.mark,
            )
          : null;
      }
      toJSON() {
        return {
          stepType: "addMark",
          mark: this.mark.toJSON(),
          from: this.from,
          to: this.to,
        };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.from || "number" != typeof t.to)
          throw RangeError("Invalid input for AddMarkStep.fromJSON");
        return new e0(t.from, t.to, e.markFromJSON(t.mark));
      }
    }
    eJ.jsonID("addMark", e0);
    class e1 extends eJ {
      constructor(e, t, n) {
        (super(), (this.from = e), (this.to = t), (this.mark = n));
      }
      apply(e) {
        let t = e.slice(this.from, this.to),
          n = new C(
            eX(t.content, (e) => e.mark(this.mark.removeFromSet(e.marks)), e),
            t.openStart,
            t.openEnd,
          );
        return eQ.fromReplace(e, this.from, this.to, n);
      }
      invert() {
        return new e0(this.from, this.to, this.mark);
      }
      map(e) {
        let t = e.mapResult(this.from, 1),
          n = e.mapResult(this.to, -1);
        return (t.deleted && n.deleted) || t.pos >= n.pos
          ? null
          : new e1(t.pos, n.pos, this.mark);
      }
      merge(e) {
        return e instanceof e1 &&
          e.mark.eq(this.mark) &&
          this.from <= e.to &&
          this.to >= e.from
          ? new e1(
              Math.min(this.from, e.from),
              Math.max(this.to, e.to),
              this.mark,
            )
          : null;
      }
      toJSON() {
        return {
          stepType: "removeMark",
          mark: this.mark.toJSON(),
          from: this.from,
          to: this.to,
        };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.from || "number" != typeof t.to)
          throw RangeError("Invalid input for RemoveMarkStep.fromJSON");
        return new e1(t.from, t.to, e.markFromJSON(t.mark));
      }
    }
    eJ.jsonID("removeMark", e1);
    class e2 extends eJ {
      constructor(e, t) {
        (super(), (this.pos = e), (this.mark = t));
      }
      apply(e) {
        let t = e.nodeAt(this.pos);
        if (!t) return eQ.fail("No node at mark step's position");
        let n = t.type.create(t.attrs, null, this.mark.addToSet(t.marks));
        return eQ.fromReplace(
          e,
          this.pos,
          this.pos + 1,
          new C(x.from(n), 0, +!t.isLeaf),
        );
      }
      invert(e) {
        let t = e.nodeAt(this.pos);
        if (t) {
          let e = this.mark.addToSet(t.marks);
          if (e.length == t.marks.length) {
            for (let n = 0; n < t.marks.length; n++)
              if (!t.marks[n].isInSet(e)) return new e2(this.pos, t.marks[n]);
            return new e2(this.pos, this.mark);
          }
        }
        return new e5(this.pos, this.mark);
      }
      map(e) {
        let t = e.mapResult(this.pos, 1);
        return t.deletedAfter ? null : new e2(t.pos, this.mark);
      }
      toJSON() {
        return {
          stepType: "addNodeMark",
          pos: this.pos,
          mark: this.mark.toJSON(),
        };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.pos)
          throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");
        return new e2(t.pos, e.markFromJSON(t.mark));
      }
    }
    eJ.jsonID("addNodeMark", e2);
    class e5 extends eJ {
      constructor(e, t) {
        (super(), (this.pos = e), (this.mark = t));
      }
      apply(e) {
        let t = e.nodeAt(this.pos);
        if (!t) return eQ.fail("No node at mark step's position");
        let n = t.type.create(t.attrs, null, this.mark.removeFromSet(t.marks));
        return eQ.fromReplace(
          e,
          this.pos,
          this.pos + 1,
          new C(x.from(n), 0, +!t.isLeaf),
        );
      }
      invert(e) {
        let t = e.nodeAt(this.pos);
        return t && this.mark.isInSet(t.marks)
          ? new e2(this.pos, this.mark)
          : this;
      }
      map(e) {
        let t = e.mapResult(this.pos, 1);
        return t.deletedAfter ? null : new e5(t.pos, this.mark);
      }
      toJSON() {
        return {
          stepType: "removeNodeMark",
          pos: this.pos,
          mark: this.mark.toJSON(),
        };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.pos)
          throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");
        return new e5(t.pos, e.markFromJSON(t.mark));
      }
    }
    eJ.jsonID("removeNodeMark", e5);
    class e3 extends eJ {
      constructor(e, t, n, r = !1) {
        (super(),
          (this.from = e),
          (this.to = t),
          (this.slice = n),
          (this.structure = r));
      }
      apply(e) {
        return this.structure && e9(e, this.from, this.to)
          ? eQ.fail("Structure replace would overwrite content")
          : eQ.fromReplace(e, this.from, this.to, this.slice);
      }
      getMap() {
        return new eZ([this.from, this.to - this.from, this.slice.size]);
      }
      invert(e) {
        return new e3(
          this.from,
          this.from + this.slice.size,
          e.slice(this.from, this.to),
        );
      }
      map(e) {
        let t = e.mapResult(this.from, 1),
          n = e.mapResult(this.to, -1);
        return t.deletedAcross && n.deletedAcross
          ? null
          : new e3(t.pos, Math.max(t.pos, n.pos), this.slice, this.structure);
      }
      merge(e) {
        if (!(e instanceof e3) || e.structure || this.structure) return null;
        if (
          this.from + this.slice.size != e.from ||
          this.slice.openEnd ||
          e.slice.openStart
        )
          if (e.to != this.from || this.slice.openStart || e.slice.openEnd)
            return null;
          else {
            let t =
              this.slice.size + e.slice.size == 0
                ? C.empty
                : new C(
                    e.slice.content.append(this.slice.content),
                    e.slice.openStart,
                    this.slice.openEnd,
                  );
            return new e3(e.from, this.to, t, this.structure);
          }
        {
          let t =
            this.slice.size + e.slice.size == 0
              ? C.empty
              : new C(
                  this.slice.content.append(e.slice.content),
                  this.slice.openStart,
                  e.slice.openEnd,
                );
          return new e3(
            this.from,
            this.to + (e.to - e.from),
            t,
            this.structure,
          );
        }
      }
      toJSON() {
        let e = { stepType: "replace", from: this.from, to: this.to };
        return (
          this.slice.size && (e.slice = this.slice.toJSON()),
          this.structure && (e.structure = !0),
          e
        );
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.from || "number" != typeof t.to)
          throw RangeError("Invalid input for ReplaceStep.fromJSON");
        return new e3(t.from, t.to, C.fromJSON(e, t.slice), !!t.structure);
      }
    }
    eJ.jsonID("replace", e3);
    class e4 extends eJ {
      constructor(e, t, n, r, i, s, a = !1) {
        (super(),
          (this.from = e),
          (this.to = t),
          (this.gapFrom = n),
          (this.gapTo = r),
          (this.slice = i),
          (this.insert = s),
          (this.structure = a));
      }
      apply(e) {
        if (
          this.structure &&
          (e9(e, this.from, this.gapFrom) || e9(e, this.gapTo, this.to))
        )
          return eQ.fail("Structure gap-replace would overwrite content");
        let t = e.slice(this.gapFrom, this.gapTo);
        if (t.openStart || t.openEnd) return eQ.fail("Gap is not a flat range");
        let n = this.slice.insertAt(this.insert, t.content);
        return n
          ? eQ.fromReplace(e, this.from, this.to, n)
          : eQ.fail("Content does not fit in gap");
      }
      getMap() {
        return new eZ([
          this.from,
          this.gapFrom - this.from,
          this.insert,
          this.gapTo,
          this.to - this.gapTo,
          this.slice.size - this.insert,
        ]);
      }
      invert(e) {
        let t = this.gapTo - this.gapFrom;
        return new e4(
          this.from,
          this.from + this.slice.size + t,
          this.from + this.insert,
          this.from + this.insert + t,
          e
            .slice(this.from, this.to)
            .removeBetween(this.gapFrom - this.from, this.gapTo - this.from),
          this.gapFrom - this.from,
          this.structure,
        );
      }
      map(e) {
        let t = e.mapResult(this.from, 1),
          n = e.mapResult(this.to, -1),
          r = this.from == this.gapFrom ? t.pos : e.map(this.gapFrom, -1),
          i = this.to == this.gapTo ? n.pos : e.map(this.gapTo, 1);
        return (t.deletedAcross && n.deletedAcross) || r < t.pos || i > n.pos
          ? null
          : new e4(t.pos, n.pos, r, i, this.slice, this.insert, this.structure);
      }
      toJSON() {
        let e = {
          stepType: "replaceAround",
          from: this.from,
          to: this.to,
          gapFrom: this.gapFrom,
          gapTo: this.gapTo,
          insert: this.insert,
        };
        return (
          this.slice.size && (e.slice = this.slice.toJSON()),
          this.structure && (e.structure = !0),
          e
        );
      }
      static fromJSON(e, t) {
        if (
          "number" != typeof t.from ||
          "number" != typeof t.to ||
          "number" != typeof t.gapFrom ||
          "number" != typeof t.gapTo ||
          "number" != typeof t.insert
        )
          throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");
        return new e4(
          t.from,
          t.to,
          t.gapFrom,
          t.gapTo,
          C.fromJSON(e, t.slice),
          t.insert,
          !!t.structure,
        );
      }
    }
    function e9(e, t, n) {
      let r = e.resolve(t),
        i = n - t,
        s = r.depth;
      for (; i > 0 && s > 0 && r.indexAfter(s) == r.node(s).childCount; )
        (s--, i--);
      if (i > 0) {
        let e = r.node(s).maybeChild(r.indexAfter(s));
        for (; i > 0; ) {
          if (!e || e.isLeaf) return !0;
          ((e = e.firstChild), i--);
        }
      }
      return !1;
    }
    function e7(e, t, n, r) {
      let i,
        s,
        a = [],
        o = [];
      (e.doc.nodesBetween(t, n, (e, l, c) => {
        if (!e.isInline) return;
        let u = e.marks;
        if (!r.isInSet(u) && c.type.allowsMarkType(r.type)) {
          let c = Math.max(l, t),
            d = Math.min(l + e.nodeSize, n),
            h = r.addToSet(u);
          for (let e = 0; e < u.length; e++)
            u[e].isInSet(h) ||
              (i && i.to == c && i.mark.eq(u[e])
                ? (i.to = d)
                : a.push((i = new e1(c, d, u[e]))));
          s && s.to == c ? (s.to = d) : o.push((s = new e0(c, d, r)));
        }
      }),
        a.forEach((t) => e.step(t)),
        o.forEach((t) => e.step(t)));
    }
    function e6(e, t, n, r) {
      let i = [],
        s = 0;
      (e.doc.nodesBetween(t, n, (e, a) => {
        if (!e.isInline) return;
        s++;
        let o = null;
        if (r instanceof eh) {
          let t = e.marks,
            n;
          for (; (n = r.isInSet(t)); )
            ((o || (o = [])).push(n), (t = n.removeFromSet(t)));
        } else r ? r.isInSet(e.marks) && (o = [r]) : (o = e.marks);
        if (o && o.length) {
          let r = Math.min(a + e.nodeSize, n);
          for (let e = 0; e < o.length; e++) {
            let n = o[e],
              l;
            for (let e = 0; e < i.length; e++) {
              let t = i[e];
              t.step == s - 1 && n.eq(i[e].style) && (l = t);
            }
            l
              ? ((l.to = r), (l.step = s))
              : i.push({ style: n, from: Math.max(a, t), to: r, step: s });
          }
        }
      }),
        i.forEach((t) => e.step(new e1(t.from, t.to, t.style))));
    }
    function e8(e, t, n, r = n.contentMatch, i = !0) {
      let s = e.doc.nodeAt(t),
        a = [],
        o = t + 1;
      for (let t = 0; t < s.childCount; t++) {
        let l = s.child(t),
          c = o + l.nodeSize,
          u = r.matchType(l.type);
        if (u) {
          r = u;
          for (let t = 0; t < l.marks.length; t++)
            n.allowsMarkType(l.marks[t].type) ||
              e.step(new e1(o, c, l.marks[t]));
          if (i && l.isText && "pre" != n.whitespace) {
            let e,
              t = /\r?\n|\r/g,
              r;
            for (; (e = t.exec(l.text)); )
              (r ||
                (r = new C(
                  x.from(n.schema.text(" ", n.allowedMarks(l.marks))),
                  0,
                  0,
                )),
                a.push(new e3(o + e.index, o + e.index + e[0].length, r)));
          }
        } else a.push(new e3(o, c, C.empty));
        o = c;
      }
      if (!r.validEnd) {
        let t = r.fillBefore(x.empty, !0);
        e.replace(o, o, new C(t, 0, 0));
      }
      for (let t = a.length - 1; t >= 0; t--) e.step(a[t]);
    }
    function te(e, t, n) {
      return (
        (0 == t || e.canReplace(t, e.childCount)) &&
        (n == e.childCount || e.canReplace(0, n))
      );
    }
    function tt(e) {
      let t = e.parent.content.cutByIndex(e.startIndex, e.endIndex);
      for (let n = e.depth; ; --n) {
        let r = e.$from.node(n),
          i = e.$from.index(n),
          s = e.$to.indexAfter(n);
        if (n < e.depth && r.canReplace(i, s, t)) return n;
        if (0 == n || r.type.spec.isolating || !te(r, i, s)) break;
      }
      return null;
    }
    function tn(e, t, n) {
      let { $from: r, $to: i, depth: s } = t,
        a = r.before(s + 1),
        o = i.after(s + 1),
        l = a,
        c = o,
        u = x.empty,
        d = 0;
      for (let e = s, t = !1; e > n; e--)
        t || r.index(e) > 0
          ? ((t = !0), (u = x.from(r.node(e).copy(u))), d++)
          : l--;
      let h = x.empty,
        p = 0;
      for (let e = s, t = !1; e > n; e--)
        t || i.after(e + 1) < i.end(e)
          ? ((t = !0), (h = x.from(i.node(e).copy(h))), p++)
          : c++;
      e.step(new e4(l, c, a, o, new C(u.append(h), d, p), u.size - d, !0));
    }
    function tr(e, t, n = null, r = e) {
      let i = ts(e, t),
        s = i && ta(r, t);
      return s
        ? i.map(ti).concat({ type: t, attrs: n }).concat(s.map(ti))
        : null;
    }
    function ti(e) {
      return { type: e, attrs: null };
    }
    function ts(e, t) {
      let { parent: n, startIndex: r, endIndex: i } = e,
        s = n.contentMatchAt(r).findWrapping(t);
      if (!s) return null;
      let a = s.length ? s[0] : t;
      return n.canReplaceWith(r, i, a) ? s : null;
    }
    function ta(e, t) {
      let { parent: n, startIndex: r, endIndex: i } = e,
        s = n.child(r),
        a = t.contentMatch.findWrapping(s.type);
      if (!a) return null;
      let o = (a.length ? a[a.length - 1] : t).contentMatch;
      for (let e = r; o && e < i; e++) o = o.matchType(n.child(e).type);
      return o && o.validEnd ? a : null;
    }
    function to(e, t, n) {
      let r = x.empty;
      for (let e = n.length - 1; e >= 0; e--) {
        if (r.size) {
          let t = n[e].type.contentMatch.matchFragment(r);
          if (!t || !t.validEnd)
            throw RangeError(
              "Wrapper type given to Transform.wrap does not form valid content of its parent wrapper",
            );
        }
        r = x.from(n[e].type.create(n[e].attrs, r));
      }
      let i = t.start,
        s = t.end;
      e.step(new e4(i, s, i, s, new C(r, 0, 0), n.length, !0));
    }
    function tl(e, t, n, r, i) {
      if (!r.isTextblock)
        throw RangeError("Type given to setBlockType should be a textblock");
      let s = e.steps.length;
      e.doc.nodesBetween(t, n, (t, n) => {
        let a = "function" == typeof i ? i(t) : i;
        if (
          t.isTextblock &&
          !t.hasMarkup(r, a) &&
          td(e.doc, e.mapping.slice(s).map(n), r)
        ) {
          let i = null;
          if (r.schema.linebreakReplacement) {
            let e = "pre" == r.whitespace,
              t = !!r.contentMatch.matchType(r.schema.linebreakReplacement);
            e && !t ? (i = !1) : !e && t && (i = !0);
          }
          (!1 === i && tu(e, t, n, s),
            e8(e, e.mapping.slice(s).map(n, 1), r, void 0, null === i));
          let o = e.mapping.slice(s),
            l = o.map(n, 1),
            c = o.map(n + t.nodeSize, 1);
          return (
            e.step(
              new e4(
                l,
                c,
                l + 1,
                c - 1,
                new C(x.from(r.create(a, null, t.marks)), 0, 0),
                1,
                !0,
              ),
            ),
            !0 === i && tc(e, t, n, s),
            !1
          );
        }
      });
    }
    function tc(e, t, n, r) {
      t.forEach((i, s) => {
        if (i.isText) {
          let a,
            o = /\r?\n|\r/g;
          for (; (a = o.exec(i.text)); ) {
            let i = e.mapping.slice(r).map(n + 1 + s + a.index);
            e.replaceWith(
              i,
              i + 1,
              t.type.schema.linebreakReplacement.create(),
            );
          }
        }
      });
    }
    function tu(e, t, n, r) {
      t.forEach((i, s) => {
        if (i.type == i.type.schema.linebreakReplacement) {
          let i = e.mapping.slice(r).map(n + 1 + s);
          e.replaceWith(i, i + 1, t.type.schema.text("\n"));
        }
      });
    }
    function td(e, t, n) {
      let r = e.resolve(t),
        i = r.index();
      return r.parent.canReplaceWith(i, i + 1, n);
    }
    function th(e, t, n, r, i) {
      let s = e.doc.nodeAt(t);
      if (!s) throw RangeError("No node at given position");
      n || (n = s.type);
      let a = n.create(r, null, i || s.marks);
      if (s.isLeaf) return e.replaceWith(t, t + s.nodeSize, a);
      if (!n.validContent(s.content))
        throw RangeError("Invalid content for node type " + n.name);
      e.step(
        new e4(
          t,
          t + s.nodeSize,
          t + 1,
          t + s.nodeSize - 1,
          new C(x.from(a), 0, 0),
          1,
          !0,
        ),
      );
    }
    function tp(e, t, n = 1, r) {
      let i = e.resolve(t),
        s = i.depth - n,
        a = (r && r[r.length - 1]) || i.parent;
      if (
        s < 0 ||
        i.parent.type.spec.isolating ||
        !i.parent.canReplace(i.index(), i.parent.childCount) ||
        !a.type.validContent(
          i.parent.content.cutByIndex(i.index(), i.parent.childCount),
        )
      )
        return !1;
      for (let e = i.depth - 1, t = n - 2; e > s; e--, t--) {
        let n = i.node(e),
          s = i.index(e);
        if (n.type.spec.isolating) return !1;
        let a = n.content.cutByIndex(s, n.childCount),
          o = r && r[t + 1];
        o && (a = a.replaceChild(0, o.type.create(o.attrs)));
        let l = (r && r[t]) || n;
        if (!n.canReplace(s + 1, n.childCount) || !l.type.validContent(a))
          return !1;
      }
      let o = i.indexAfter(s),
        l = r && r[0];
      return i.node(s).canReplaceWith(o, o, l ? l.type : i.node(s + 1).type);
    }
    function tm(e, t, n = 1, r) {
      let i = e.doc.resolve(t),
        s = x.empty,
        a = x.empty;
      for (let e = i.depth, t = i.depth - n, o = n - 1; e > t; e--, o--) {
        s = x.from(i.node(e).copy(s));
        let t = r && r[o];
        a = x.from(t ? t.type.create(t.attrs, a) : i.node(e).copy(a));
      }
      e.step(new e3(t, t, new C(s.append(a), n, n), !0));
    }
    function tf(e, t) {
      let n = e.resolve(t),
        r = n.index();
      return tx(n.nodeBefore, n.nodeAfter) && n.parent.canReplace(r, r + 1);
    }
    function tg(e, t) {
      t.content.size || e.type.compatibleContent(t.type);
      let n = e.contentMatchAt(e.childCount),
        { linebreakReplacement: r } = e.type.schema;
      for (let i = 0; i < t.childCount; i++) {
        let s = t.child(i),
          a = s.type == r ? e.type.schema.nodes.text : s.type;
        if (!(n = n.matchType(a)) || !e.type.allowsMarks(s.marks)) return !1;
      }
      return n.validEnd;
    }
    function tx(e, t) {
      return !!(e && t && !e.isLeaf && tg(e, t));
    }
    function tv(e, t, n = -1) {
      let r = e.resolve(t);
      for (let e = r.depth; ; e--) {
        let i,
          s,
          a = r.index(e);
        if (
          (e == r.depth
            ? ((i = r.nodeBefore), (s = r.nodeAfter))
            : n > 0
              ? ((i = r.node(e + 1)), a++, (s = r.node(e).maybeChild(a)))
              : ((i = r.node(e).maybeChild(a - 1)), (s = r.node(e + 1))),
          i && !i.isTextblock && tx(i, s) && r.node(e).canReplace(a, a + 1))
        )
          return t;
        if (0 == e) break;
        t = n < 0 ? r.before(e) : r.after(e);
      }
    }
    function ty(e, t, n) {
      let r = null,
        { linebreakReplacement: i } = e.doc.type.schema,
        s = e.doc.resolve(t - n),
        a = s.node().type;
      if (i && a.inlineContent) {
        let e = "pre" == a.whitespace,
          t = !!a.contentMatch.matchType(i);
        e && !t ? (r = !1) : !e && t && (r = !0);
      }
      let o = e.steps.length;
      if (!1 === r) {
        let r = e.doc.resolve(t + n);
        tu(e, r.node(), r.before(), o);
      }
      a.inlineContent &&
        e8(e, t + n - 1, a, s.node().contentMatchAt(s.index()), null == r);
      let l = e.mapping.slice(o),
        c = l.map(t - n);
      if ((e.step(new e3(c, l.map(t + n, -1), C.empty, !0)), !0 === r)) {
        let t = e.doc.resolve(c);
        tc(e, t.node(), t.before(), e.steps.length);
      }
      return e;
    }
    function tb(e, t, n) {
      let r = e.resolve(t);
      if (r.parent.canReplaceWith(r.index(), r.index(), n)) return t;
      if (0 == r.parentOffset)
        for (let e = r.depth - 1; e >= 0; e--) {
          let t = r.index(e);
          if (r.node(e).canReplaceWith(t, t, n)) return r.before(e + 1);
          if (t > 0) return null;
        }
      if (r.parentOffset == r.parent.content.size)
        for (let e = r.depth - 1; e >= 0; e--) {
          let t = r.indexAfter(e);
          if (r.node(e).canReplaceWith(t, t, n)) return r.after(e + 1);
          if (t < r.node(e).childCount) break;
        }
      return null;
    }
    function tj(e, t, n) {
      let r = e.resolve(t);
      if (!n.content.size) return t;
      let i = n.content;
      for (let e = 0; e < n.openStart; e++) i = i.firstChild.content;
      for (let e = 1; e <= (0 == n.openStart && n.size ? 2 : 1); e++)
        for (let t = r.depth; t >= 0; t--) {
          let n =
              t == r.depth
                ? 0
                : r.pos <= (r.start(t + 1) + r.end(t + 1)) / 2
                  ? -1
                  : 1,
            s = r.index(t) + +(n > 0),
            a = r.node(t),
            o = !1;
          if (1 == e) o = a.canReplace(s, s, i);
          else {
            let e = a.contentMatchAt(s).findWrapping(i.firstChild.type);
            o = e && a.canReplaceWith(s, s, e[0]);
          }
          if (o)
            return 0 == n ? r.pos : n < 0 ? r.before(t + 1) : r.after(t + 1);
        }
      return null;
    }
    function tw(e, t, n = t, r = C.empty) {
      if (t == n && !r.size) return null;
      let i = e.resolve(t),
        s = e.resolve(n);
      return tC(i, s, r) ? new e3(t, n, r) : new tk(i, s, r).fit();
    }
    function tC(e, t, n) {
      return (
        !n.openStart &&
        !n.openEnd &&
        e.start() == t.start() &&
        e.parent.canReplace(e.index(), t.index(), n.content)
      );
    }
    eJ.jsonID("replaceAround", e4);
    class tk {
      constructor(e, t, n) {
        ((this.$from = e),
          (this.$to = t),
          (this.unplaced = n),
          (this.frontier = []),
          (this.placed = x.empty));
        for (let t = 0; t <= e.depth; t++) {
          let n = e.node(t);
          this.frontier.push({
            type: n.type,
            match: n.contentMatchAt(e.indexAfter(t)),
          });
        }
        for (let t = e.depth; t > 0; t--)
          this.placed = x.from(e.node(t).copy(this.placed));
      }
      get depth() {
        return this.frontier.length - 1;
      }
      fit() {
        for (; this.unplaced.size; ) {
          let e = this.findFittable();
          e ? this.placeNodes(e) : this.openMore() || this.dropNode();
        }
        let e = this.mustMoveInline(),
          t = this.placed.size - this.depth - this.$from.depth,
          n = this.$from,
          r = this.close(e < 0 ? this.$to : n.doc.resolve(e));
        if (!r) return null;
        let i = this.placed,
          s = n.depth,
          a = r.depth;
        for (; s && a && 1 == i.childCount; )
          ((i = i.firstChild.content), s--, a--);
        let o = new C(i, s, a);
        return e > -1
          ? new e4(n.pos, e, this.$to.pos, this.$to.end(), o, t)
          : o.size || n.pos != this.$to.pos
            ? new e3(n.pos, r.pos, o)
            : null;
      }
      findFittable() {
        let e = this.unplaced.openStart;
        for (
          let t = this.unplaced.content, n = 0, r = this.unplaced.openEnd;
          n < e;
          n++
        ) {
          let i = t.firstChild;
          if ((t.childCount > 1 && (r = 0), i.type.spec.isolating && r <= n)) {
            e = n;
            break;
          }
          t = i.content;
        }
        for (let t = 1; t <= 2; t++)
          for (let n = 1 == t ? e : this.unplaced.openStart; n >= 0; n--) {
            let e,
              r = null,
              i = (e = n
                ? (r = tE(this.unplaced.content, n - 1).firstChild).content
                : this.unplaced.content).firstChild;
            for (let e = this.depth; e >= 0; e--) {
              let { type: s, match: a } = this.frontier[e],
                o,
                l = null;
              if (
                1 == t &&
                (i
                  ? a.matchType(i.type) || (l = a.fillBefore(x.from(i), !1))
                  : r && s.compatibleContent(r.type))
              )
                return {
                  sliceDepth: n,
                  frontierDepth: e,
                  parent: r,
                  inject: l,
                };
              if (2 == t && i && (o = a.findWrapping(i.type)))
                return { sliceDepth: n, frontierDepth: e, parent: r, wrap: o };
              if (r && a.matchType(r.type)) break;
            }
          }
      }
      openMore() {
        let { content: e, openStart: t, openEnd: n } = this.unplaced,
          r = tE(e, t);
        return (
          !!r.childCount &&
          !r.firstChild.isLeaf &&
          ((this.unplaced = new C(
            e,
            t + 1,
            Math.max(n, r.size + t >= e.size - n ? t + 1 : 0),
          )),
          !0)
        );
      }
      dropNode() {
        let { content: e, openStart: t, openEnd: n } = this.unplaced,
          r = tE(e, t);
        if (r.childCount <= 1 && t > 0) {
          let i = e.size - t <= t + r.size;
          this.unplaced = new C(tS(e, t - 1, 1), t - 1, i ? t - 1 : n);
        } else this.unplaced = new C(tS(e, t, 1), t, n);
      }
      placeNodes({
        sliceDepth: e,
        frontierDepth: t,
        parent: n,
        inject: r,
        wrap: i,
      }) {
        for (; this.depth > t; ) this.closeFrontierNode();
        if (i) for (let e = 0; e < i.length; e++) this.openFrontierNode(i[e]);
        let s = this.unplaced,
          a = n ? n.content : s.content,
          o = s.openStart - e,
          l = 0,
          c = [],
          { match: u, type: d } = this.frontier[t];
        if (r) {
          for (let e = 0; e < r.childCount; e++) c.push(r.child(e));
          u = u.matchFragment(r);
        }
        let h = a.size + e - (s.content.size - s.openEnd);
        for (; l < a.childCount; ) {
          let e = a.child(l),
            t = u.matchType(e.type);
          if (!t) break;
          (++l > 1 || 0 == o || e.content.size) &&
            ((u = t),
            c.push(
              tA(
                e.mark(d.allowedMarks(e.marks)),
                1 == l ? o : 0,
                l == a.childCount ? h : -1,
              ),
            ));
        }
        let p = l == a.childCount;
        (p || (h = -1),
          (this.placed = tN(this.placed, t, x.from(c))),
          (this.frontier[t].match = u),
          p &&
            h < 0 &&
            n &&
            n.type == this.frontier[this.depth].type &&
            this.frontier.length > 1 &&
            this.closeFrontierNode());
        for (let e = 0, t = a; e < h; e++) {
          let e = t.lastChild;
          (this.frontier.push({
            type: e.type,
            match: e.contentMatchAt(e.childCount),
          }),
            (t = e.content));
        }
        this.unplaced = p
          ? 0 == e
            ? C.empty
            : new C(tS(s.content, e - 1, 1), e - 1, h < 0 ? s.openEnd : e - 1)
          : new C(tS(s.content, e, l), s.openStart, s.openEnd);
      }
      mustMoveInline() {
        if (!this.$to.parent.isTextblock) return -1;
        let e = this.frontier[this.depth],
          t;
        if (
          !e.type.isTextblock ||
          !tD(this.$to, this.$to.depth, e.type, e.match, !1) ||
          (this.$to.depth == this.depth &&
            (t = this.findCloseLevel(this.$to)) &&
            t.depth == this.depth)
        )
          return -1;
        let { depth: n } = this.$to,
          r = this.$to.after(n);
        for (; n > 1 && r == this.$to.end(--n); ) ++r;
        return r;
      }
      findCloseLevel(e) {
        t: for (let t = Math.min(this.depth, e.depth); t >= 0; t--) {
          let { match: n, type: r } = this.frontier[t],
            i = t < e.depth && e.end(t + 1) == e.pos + (e.depth - (t + 1)),
            s = tD(e, t, r, n, i);
          if (s) {
            for (let n = t - 1; n >= 0; n--) {
              let { match: t, type: r } = this.frontier[n],
                i = tD(e, n, r, t, !0);
              if (!i || i.childCount) continue t;
            }
            return {
              depth: t,
              fit: s,
              move: i ? e.doc.resolve(e.after(t + 1)) : e,
            };
          }
        }
      }
      close(e) {
        let t = this.findCloseLevel(e);
        if (!t) return null;
        for (; this.depth > t.depth; ) this.closeFrontierNode();
        (t.fit.childCount && (this.placed = tN(this.placed, t.depth, t.fit)),
          (e = t.move));
        for (let n = t.depth + 1; n <= e.depth; n++) {
          let t = e.node(n),
            r = t.type.contentMatch.fillBefore(t.content, !0, e.index(n));
          this.openFrontierNode(t.type, t.attrs, r);
        }
        return e;
      }
      openFrontierNode(e, t = null, n) {
        let r = this.frontier[this.depth];
        ((r.match = r.match.matchType(e)),
          (this.placed = tN(this.placed, this.depth, x.from(e.create(t, n)))),
          this.frontier.push({ type: e, match: e.contentMatch }));
      }
      closeFrontierNode() {
        let e = this.frontier.pop().match.fillBefore(x.empty, !0);
        e.childCount &&
          (this.placed = tN(this.placed, this.frontier.length, e));
      }
    }
    function tS(e, t, n) {
      return 0 == t
        ? e.cutByIndex(n, e.childCount)
        : e.replaceChild(
            0,
            e.firstChild.copy(tS(e.firstChild.content, t - 1, n)),
          );
    }
    function tN(e, t, n) {
      return 0 == t
        ? e.append(n)
        : e.replaceChild(
            e.childCount - 1,
            e.lastChild.copy(tN(e.lastChild.content, t - 1, n)),
          );
    }
    function tE(e, t) {
      for (let n = 0; n < t; n++) e = e.firstChild.content;
      return e;
    }
    function tA(e, t, n) {
      if (t <= 0) return e;
      let r = e.content;
      return (
        t > 1 &&
          (r = r.replaceChild(
            0,
            tA(r.firstChild, t - 1, 1 == r.childCount ? n - 1 : 0),
          )),
        t > 0 &&
          ((r = e.type.contentMatch.fillBefore(r).append(r)),
          n <= 0 &&
            (r = r.append(
              e.type.contentMatch.matchFragment(r).fillBefore(x.empty, !0),
            ))),
        e.copy(r)
      );
    }
    function tD(e, t, n, r, i) {
      let s = e.node(t),
        a = i ? e.indexAfter(t) : e.index(t);
      if (a == s.childCount && !n.compatibleContent(s.type)) return null;
      let o = r.fillBefore(s.content, !0, a);
      return o && !tI(n, s.content, a) ? o : null;
    }
    function tI(e, t, n) {
      for (let r = n; r < t.childCount; r++)
        if (!e.allowsMarks(t.child(r).marks)) return !0;
      return !1;
    }
    function tM(e) {
      return e.spec.defining || e.spec.definingForContent;
    }
    function tT(e, t, n, r) {
      if (!r.size) return e.deleteRange(t, n);
      let i = e.doc.resolve(t),
        s = e.doc.resolve(n);
      if (tC(i, s, r)) return e.step(new e3(t, n, r));
      let a = tF(i, e.doc.resolve(n));
      0 == a[a.length - 1] && a.pop();
      let o = -(i.depth + 1);
      a.unshift(o);
      for (let e = i.depth, t = i.pos - 1; e > 0; e--, t--) {
        let n = i.node(e).type.spec;
        if (n.defining || n.definingAsContext || n.isolating) break;
        a.indexOf(e) > -1 ? (o = e) : i.before(e) == t && a.splice(1, 0, -e);
      }
      let l = a.indexOf(o),
        c = [],
        u = r.openStart;
      for (let e = r.content, t = 0; ; t++) {
        let n = e.firstChild;
        if ((c.push(n), t == r.openStart)) break;
        e = n.content;
      }
      for (let e = u - 1; e >= 0; e--) {
        let t = c[e],
          n = tM(t.type);
        if (n && !t.sameMarkup(i.node(Math.abs(o) - 1))) u = e;
        else if (n || !t.type.isTextblock) break;
      }
      for (let t = r.openStart; t >= 0; t--) {
        let o = (t + u + 1) % (r.openStart + 1),
          d = c[o];
        if (d)
          for (let t = 0; t < a.length; t++) {
            let c = a[(t + l) % a.length],
              u = !0;
            c < 0 && ((u = !1), (c = -c));
            let h = i.node(c - 1),
              p = i.index(c - 1);
            if (h.canReplaceWith(p, p, d.type, d.marks))
              return e.replace(
                i.before(c),
                u ? s.after(c) : n,
                new C(tL(r.content, 0, r.openStart, o), o, r.openEnd),
              );
          }
      }
      let d = e.steps.length;
      for (
        let o = a.length - 1;
        o >= 0 && (e.replace(t, n, r), !(e.steps.length > d));
        o--
      ) {
        let e = a[o];
        e < 0 || ((t = i.before(e)), (n = s.after(e)));
      }
    }
    function tL(e, t, n, r, i) {
      if (t < n) {
        let i = e.firstChild;
        e = e.replaceChild(0, i.copy(tL(i.content, t + 1, n, r, i)));
      }
      if (t > r) {
        let t = i.contentMatchAt(0),
          n = t.fillBefore(e).append(e);
        e = n.append(t.matchFragment(n).fillBefore(x.empty, !0));
      }
      return e;
    }
    function tP(e, t, n, r) {
      if (!r.isInline && t == n && e.doc.resolve(t).parent.content.size) {
        let i = tb(e.doc, t, r.type);
        null != i && (t = n = i);
      }
      e.replaceRange(t, n, new C(x.from(r), 0, 0));
    }
    function tR(e, t, n) {
      let r = e.doc.resolve(t),
        i = e.doc.resolve(n),
        s = tF(r, i);
      for (let t = 0; t < s.length; t++) {
        let n = s[t],
          a = t == s.length - 1;
        if ((a && 0 == n) || r.node(n).type.contentMatch.validEnd)
          return e.delete(r.start(n), i.end(n));
        if (
          n > 0 &&
          (a || r.node(n - 1).canReplace(r.index(n - 1), i.indexAfter(n - 1)))
        )
          return e.delete(r.before(n), i.after(n));
      }
      for (let s = 1; s <= r.depth && s <= i.depth; s++)
        if (
          t - r.start(s) == r.depth - s &&
          n > r.end(s) &&
          i.end(s) - n != i.depth - s &&
          r.start(s - 1) == i.start(s - 1) &&
          r.node(s - 1).canReplace(r.index(s - 1), i.index(s - 1))
        )
          return e.delete(r.before(s), n);
      e.delete(t, n);
    }
    function tF(e, t) {
      let n = [],
        r = Math.min(e.depth, t.depth);
      for (let i = r; i >= 0; i--) {
        let r = e.start(i);
        if (
          r < e.pos - (e.depth - i) ||
          t.end(i) > t.pos + (t.depth - i) ||
          e.node(i).type.spec.isolating ||
          t.node(i).type.spec.isolating
        )
          break;
        (r == t.start(i) ||
          (i == e.depth &&
            i == t.depth &&
            e.parent.inlineContent &&
            t.parent.inlineContent &&
            i &&
            t.start(i - 1) == r - 1)) &&
          n.push(i);
      }
      return n;
    }
    class t_ extends eJ {
      constructor(e, t, n) {
        (super(), (this.pos = e), (this.attr = t), (this.value = n));
      }
      apply(e) {
        let t = e.nodeAt(this.pos);
        if (!t) return eQ.fail("No node at attribute step's position");
        let n = Object.create(null);
        for (let e in t.attrs) n[e] = t.attrs[e];
        n[this.attr] = this.value;
        let r = t.type.create(n, null, t.marks);
        return eQ.fromReplace(
          e,
          this.pos,
          this.pos + 1,
          new C(x.from(r), 0, +!t.isLeaf),
        );
      }
      getMap() {
        return eZ.empty;
      }
      invert(e) {
        return new t_(this.pos, this.attr, e.nodeAt(this.pos).attrs[this.attr]);
      }
      map(e) {
        let t = e.mapResult(this.pos, 1);
        return t.deletedAfter ? null : new t_(t.pos, this.attr, this.value);
      }
      toJSON() {
        return {
          stepType: "attr",
          pos: this.pos,
          attr: this.attr,
          value: this.value,
        };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.pos || "string" != typeof t.attr)
          throw RangeError("Invalid input for AttrStep.fromJSON");
        return new t_(t.pos, t.attr, t.value);
      }
    }
    eJ.jsonID("attr", t_);
    class tO extends eJ {
      constructor(e, t) {
        (super(), (this.attr = e), (this.value = t));
      }
      apply(e) {
        let t = Object.create(null);
        for (let n in e.attrs) t[n] = e.attrs[n];
        t[this.attr] = this.value;
        let n = e.type.create(t, e.content, e.marks);
        return eQ.ok(n);
      }
      getMap() {
        return eZ.empty;
      }
      invert(e) {
        return new tO(this.attr, e.attrs[this.attr]);
      }
      map(e) {
        return this;
      }
      toJSON() {
        return { stepType: "docAttr", attr: this.attr, value: this.value };
      }
      static fromJSON(e, t) {
        if ("string" != typeof t.attr)
          throw RangeError("Invalid input for DocAttrStep.fromJSON");
        return new tO(t.attr, t.value);
      }
    }
    eJ.jsonID("docAttr", tO);
    let tB = class extends Error {};
    (((tB = function e(t) {
      let n = Error.call(this, t);
      return ((n.__proto__ = e.prototype), n);
    }).prototype = Object.create(Error.prototype)),
      (tB.prototype.constructor = tB),
      (tB.prototype.name = "TransformError"));
    class tV {
      constructor(e) {
        ((this.doc = e),
          (this.steps = []),
          (this.docs = []),
          (this.mapping = new eK()));
      }
      get before() {
        return this.docs.length ? this.docs[0] : this.doc;
      }
      step(e) {
        let t = this.maybeStep(e);
        if (t.failed) throw new tB(t.failed);
        return this;
      }
      maybeStep(e) {
        let t = e.apply(this.doc);
        return (t.failed || this.addStep(e, t.doc), t);
      }
      get docChanged() {
        return this.steps.length > 0;
      }
      addStep(e, t) {
        (this.docs.push(this.doc),
          this.steps.push(e),
          this.mapping.appendMap(e.getMap()),
          (this.doc = t));
      }
      replace(e, t = e, n = C.empty) {
        let r = tw(this.doc, e, t, n);
        return (r && this.step(r), this);
      }
      replaceWith(e, t, n) {
        return this.replace(e, t, new C(x.from(n), 0, 0));
      }
      delete(e, t) {
        return this.replace(e, t, C.empty);
      }
      insert(e, t) {
        return this.replaceWith(e, e, t);
      }
      replaceRange(e, t, n) {
        return (tT(this, e, t, n), this);
      }
      replaceRangeWith(e, t, n) {
        return (tP(this, e, t, n), this);
      }
      deleteRange(e, t) {
        return (tR(this, e, t), this);
      }
      lift(e, t) {
        return (tn(this, e, t), this);
      }
      join(e, t = 1) {
        return (ty(this, e, t), this);
      }
      wrap(e, t) {
        return (to(this, e, t), this);
      }
      setBlockType(e, t = e, n, r = null) {
        return (tl(this, e, t, n, r), this);
      }
      setNodeMarkup(e, t, n = null, r) {
        return (th(this, e, t, n, r), this);
      }
      setNodeAttribute(e, t, n) {
        return (this.step(new t_(e, t, n)), this);
      }
      setDocAttribute(e, t) {
        return (this.step(new tO(e, t)), this);
      }
      addNodeMark(e, t) {
        return (this.step(new e2(e, t)), this);
      }
      removeNodeMark(e, t) {
        let n = this.doc.nodeAt(e);
        if (!n) throw RangeError("No node at position " + e);
        if (t instanceof j) t.isInSet(n.marks) && this.step(new e5(e, t));
        else {
          let r = n.marks,
            i,
            s = [];
          for (; (i = t.isInSet(r)); )
            (s.push(new e5(e, i)), (r = i.removeFromSet(r)));
          for (let e = s.length - 1; e >= 0; e--) this.step(s[e]);
        }
        return this;
      }
      split(e, t = 1, n) {
        return (tm(this, e, t, n), this);
      }
      addMark(e, t, n) {
        return (e7(this, e, t, n), this);
      }
      removeMark(e, t, n) {
        return (e6(this, e, t, n), this);
      }
      clearIncompatible(e, t, n) {
        return (e8(this, e, t, n), this);
      }
    }
    e.s(
      [
        "Mapping",
        () => eK,
        "RemoveMarkStep",
        () => e1,
        "ReplaceAroundStep",
        () => e4,
        "ReplaceStep",
        () => e3,
        "Transform",
        () => tV,
        "canJoin",
        () => tf,
        "canSplit",
        () => tp,
        "dropPoint",
        () => tj,
        "findWrapping",
        () => tr,
        "joinPoint",
        () => tv,
        "liftTarget",
        () => tt,
        "replaceStep",
        () => tw,
      ],
      756307,
    );
    let tz = Object.create(null);
    class tH {
      constructor(e, t, n) {
        ((this.$anchor = e),
          (this.$head = t),
          (this.ranges = n || [new t$(e.min(t), e.max(t))]));
      }
      get anchor() {
        return this.$anchor.pos;
      }
      get head() {
        return this.$head.pos;
      }
      get from() {
        return this.$from.pos;
      }
      get to() {
        return this.$to.pos;
      }
      get $from() {
        return this.ranges[0].$from;
      }
      get $to() {
        return this.ranges[0].$to;
      }
      get empty() {
        let e = this.ranges;
        for (let t = 0; t < e.length; t++)
          if (e[t].$from.pos != e[t].$to.pos) return !1;
        return !0;
      }
      content() {
        return this.$from.doc.slice(this.from, this.to, !0);
      }
      replace(e, t = C.empty) {
        let n = t.content.lastChild,
          r = null;
        for (let e = 0; e < t.openEnd; e++) ((r = n), (n = n.lastChild));
        let i = e.steps.length,
          s = this.ranges;
        for (let a = 0; a < s.length; a++) {
          let { $from: o, $to: l } = s[a],
            c = e.mapping.slice(i);
          (e.replaceRange(c.map(o.pos), c.map(l.pos), a ? C.empty : t),
            0 == a && tX(e, i, (n ? n.isInline : r && r.isTextblock) ? -1 : 1));
        }
      }
      replaceWith(e, t) {
        let n = e.steps.length,
          r = this.ranges;
        for (let i = 0; i < r.length; i++) {
          let { $from: s, $to: a } = r[i],
            o = e.mapping.slice(n),
            l = o.map(s.pos),
            c = o.map(a.pos);
          i
            ? e.deleteRange(l, c)
            : (e.replaceRangeWith(l, c, t), tX(e, n, t.isInline ? -1 : 1));
        }
      }
      static findFrom(e, t, n = !1) {
        let r = e.parent.inlineContent
          ? new tW(e)
          : tQ(e.node(0), e.parent, e.pos, e.index(), t, n);
        if (r) return r;
        for (let r = e.depth - 1; r >= 0; r--) {
          let i =
            t < 0
              ? tQ(e.node(0), e.node(r), e.before(r + 1), e.index(r), t, n)
              : tQ(e.node(0), e.node(r), e.after(r + 1), e.index(r) + 1, t, n);
          if (i) return i;
        }
        return null;
      }
      static near(e, t = 1) {
        return this.findFrom(e, t) || this.findFrom(e, -t) || new tY(e.node(0));
      }
      static atStart(e) {
        return tQ(e, e, 0, 0, 1) || new tY(e);
      }
      static atEnd(e) {
        return tQ(e, e, e.content.size, e.childCount, -1) || new tY(e);
      }
      static fromJSON(e, t) {
        if (!t || !t.type)
          throw RangeError("Invalid input for Selection.fromJSON");
        let n = tz[t.type];
        if (!n) throw RangeError(`No selection type ${t.type} defined`);
        return n.fromJSON(e, t);
      }
      static jsonID(e, t) {
        if (e in tz)
          throw RangeError("Duplicate use of selection JSON ID " + e);
        return ((tz[e] = t), (t.prototype.jsonID = e), t);
      }
      getBookmark() {
        return tW.between(this.$anchor, this.$head).getBookmark();
      }
    }
    tH.prototype.visible = !0;
    class t$ {
      constructor(e, t) {
        ((this.$from = e), (this.$to = t));
      }
    }
    let tU = !1;
    function tG(e) {
      tU ||
        e.parent.inlineContent ||
        ((tU = !0),
        console.warn(
          "TextSelection endpoint not pointing into a node with inline content (" +
            e.parent.type.name +
            ")",
        ));
    }
    class tW extends tH {
      constructor(e, t = e) {
        (tG(e), tG(t), super(e, t));
      }
      get $cursor() {
        return this.$anchor.pos == this.$head.pos ? this.$head : null;
      }
      map(e, t) {
        let n = e.resolve(t.map(this.head));
        if (!n.parent.inlineContent) return tH.near(n);
        let r = e.resolve(t.map(this.anchor));
        return new tW(r.parent.inlineContent ? r : n, n);
      }
      replace(e, t = C.empty) {
        if ((super.replace(e, t), t == C.empty)) {
          let t = this.$from.marksAcross(this.$to);
          t && e.ensureMarks(t);
        }
      }
      eq(e) {
        return (
          e instanceof tW && e.anchor == this.anchor && e.head == this.head
        );
      }
      getBookmark() {
        return new tq(this.anchor, this.head);
      }
      toJSON() {
        return { type: "text", anchor: this.anchor, head: this.head };
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.anchor || "number" != typeof t.head)
          throw RangeError("Invalid input for TextSelection.fromJSON");
        return new tW(e.resolve(t.anchor), e.resolve(t.head));
      }
      static create(e, t, n = t) {
        let r = e.resolve(t);
        return new this(r, n == t ? r : e.resolve(n));
      }
      static between(e, t, n) {
        let r = e.pos - t.pos;
        if (((!n || r) && (n = r >= 0 ? 1 : -1), !t.parent.inlineContent)) {
          let e = tH.findFrom(t, n, !0) || tH.findFrom(t, -n, !0);
          if (!e) return tH.near(t, n);
          t = e.$head;
        }
        return (
          e.parent.inlineContent ||
            (0 == r
              ? (e = t)
              : (e = (tH.findFrom(e, -n, !0) || tH.findFrom(e, n, !0)).$anchor)
                  .pos <
                  t.pos !=
                  r < 0 && (e = t)),
          new tW(e, t)
        );
      }
    }
    tH.jsonID("text", tW);
    class tq {
      constructor(e, t) {
        ((this.anchor = e), (this.head = t));
      }
      map(e) {
        return new tq(e.map(this.anchor), e.map(this.head));
      }
      resolve(e) {
        return tW.between(e.resolve(this.anchor), e.resolve(this.head));
      }
    }
    class tZ extends tH {
      constructor(e) {
        let t = e.nodeAfter;
        (super(e, e.node(0).resolve(e.pos + t.nodeSize)), (this.node = t));
      }
      map(e, t) {
        let { deleted: n, pos: r } = t.mapResult(this.anchor),
          i = e.resolve(r);
        return n ? tH.near(i) : new tZ(i);
      }
      content() {
        return new C(x.from(this.node), 0, 0);
      }
      eq(e) {
        return e instanceof tZ && e.anchor == this.anchor;
      }
      toJSON() {
        return { type: "node", anchor: this.anchor };
      }
      getBookmark() {
        return new tK(this.anchor);
      }
      static fromJSON(e, t) {
        if ("number" != typeof t.anchor)
          throw RangeError("Invalid input for NodeSelection.fromJSON");
        return new tZ(e.resolve(t.anchor));
      }
      static create(e, t) {
        return new tZ(e.resolve(t));
      }
      static isSelectable(e) {
        return !e.isText && !1 !== e.type.spec.selectable;
      }
    }
    ((tZ.prototype.visible = !1), tH.jsonID("node", tZ));
    class tK {
      constructor(e) {
        this.anchor = e;
      }
      map(e) {
        let { deleted: t, pos: n } = e.mapResult(this.anchor);
        return t ? new tq(n, n) : new tK(n);
      }
      resolve(e) {
        let t = e.resolve(this.anchor),
          n = t.nodeAfter;
        return n && tZ.isSelectable(n) ? new tZ(t) : tH.near(t);
      }
    }
    class tY extends tH {
      constructor(e) {
        super(e.resolve(0), e.resolve(e.content.size));
      }
      replace(e, t = C.empty) {
        if (t == C.empty) {
          e.delete(0, e.doc.content.size);
          let t = tH.atStart(e.doc);
          t.eq(e.selection) || e.setSelection(t);
        } else super.replace(e, t);
      }
      toJSON() {
        return { type: "all" };
      }
      static fromJSON(e) {
        return new tY(e);
      }
      map(e) {
        return new tY(e);
      }
      eq(e) {
        return e instanceof tY;
      }
      getBookmark() {
        return tJ;
      }
    }
    tH.jsonID("all", tY);
    let tJ = {
      map() {
        return this;
      },
      resolve: (e) => new tY(e),
    };
    function tQ(e, t, n, r, i, s = !1) {
      if (t.inlineContent) return tW.create(e, n);
      for (
        let a = r - (i > 0 ? 0 : 1);
        i > 0 ? a < t.childCount : a >= 0;
        a += i
      ) {
        let r = t.child(a);
        if (r.isAtom) {
          if (!s && tZ.isSelectable(r))
            return tZ.create(e, n - (i < 0 ? r.nodeSize : 0));
        } else {
          let t = tQ(e, r, n + i, i < 0 ? r.childCount : 0, i, s);
          if (t) return t;
        }
        n += r.nodeSize * i;
      }
      return null;
    }
    function tX(e, t, n) {
      let r,
        i = e.steps.length - 1;
      if (i < t) return;
      let s = e.steps[i];
      (s instanceof e3 || s instanceof e4) &&
        (e.mapping.maps[i].forEach((e, t, n, i) => {
          null == r && (r = i);
        }),
        e.setSelection(tH.near(e.doc.resolve(r), n)));
    }
    let t0 = 1,
      t1 = 2,
      t2 = 4;
    class t5 extends tV {
      constructor(e) {
        (super(e.doc),
          (this.curSelectionFor = 0),
          (this.updated = 0),
          (this.meta = Object.create(null)),
          (this.time = Date.now()),
          (this.curSelection = e.selection),
          (this.storedMarks = e.storedMarks));
      }
      get selection() {
        return (
          this.curSelectionFor < this.steps.length &&
            ((this.curSelection = this.curSelection.map(
              this.doc,
              this.mapping.slice(this.curSelectionFor),
            )),
            (this.curSelectionFor = this.steps.length)),
          this.curSelection
        );
      }
      setSelection(e) {
        if (e.$from.doc != this.doc)
          throw RangeError(
            "Selection passed to setSelection must point at the current document",
          );
        return (
          (this.curSelection = e),
          (this.curSelectionFor = this.steps.length),
          (this.updated = (this.updated | t0) & ~t1),
          (this.storedMarks = null),
          this
        );
      }
      get selectionSet() {
        return (this.updated & t0) > 0;
      }
      setStoredMarks(e) {
        return ((this.storedMarks = e), (this.updated |= t1), this);
      }
      ensureMarks(e) {
        return (
          j.sameSet(this.storedMarks || this.selection.$from.marks(), e) ||
            this.setStoredMarks(e),
          this
        );
      }
      addStoredMark(e) {
        return this.ensureMarks(
          e.addToSet(this.storedMarks || this.selection.$head.marks()),
        );
      }
      removeStoredMark(e) {
        return this.ensureMarks(
          e.removeFromSet(this.storedMarks || this.selection.$head.marks()),
        );
      }
      get storedMarksSet() {
        return (this.updated & t1) > 0;
      }
      addStep(e, t) {
        (super.addStep(e, t),
          (this.updated = this.updated & ~t1),
          (this.storedMarks = null));
      }
      setTime(e) {
        return ((this.time = e), this);
      }
      replaceSelection(e) {
        return (this.selection.replace(this, e), this);
      }
      replaceSelectionWith(e, t = !0) {
        let n = this.selection;
        return (
          t &&
            (e = e.mark(
              this.storedMarks ||
                (n.empty
                  ? n.$from.marks()
                  : n.$from.marksAcross(n.$to) || j.none),
            )),
          n.replaceWith(this, e),
          this
        );
      }
      deleteSelection() {
        return (this.selection.replace(this), this);
      }
      insertText(e, t, n) {
        let r = this.doc.type.schema;
        if (null == t)
          return e
            ? this.replaceSelectionWith(r.text(e), !0)
            : this.deleteSelection();
        {
          if ((null == n && (n = t), (n = null == n ? t : n), !e))
            return this.deleteRange(t, n);
          let i = this.storedMarks;
          if (!i) {
            let e = this.doc.resolve(t);
            i = n == t ? e.marks() : e.marksAcross(this.doc.resolve(n));
          }
          return (
            this.replaceRangeWith(t, n, r.text(e, i)),
            this.selection.empty ||
              this.setSelection(tH.near(this.selection.$to)),
            this
          );
        }
      }
      setMeta(e, t) {
        return ((this.meta["string" == typeof e ? e : e.key] = t), this);
      }
      getMeta(e) {
        return this.meta["string" == typeof e ? e : e.key];
      }
      get isGeneric() {
        for (let e in this.meta) return !1;
        return !0;
      }
      scrollIntoView() {
        return ((this.updated |= t2), this);
      }
      get scrolledIntoView() {
        return (this.updated & t2) > 0;
      }
    }
    function t3(e, t) {
      return t && e ? e.bind(t) : e;
    }
    class t4 {
      constructor(e, t, n) {
        ((this.name = e),
          (this.init = t3(t.init, n)),
          (this.apply = t3(t.apply, n)));
      }
    }
    let t9 = [
      new t4("doc", {
        init: (e) => e.doc || e.schema.topNodeType.createAndFill(),
        apply: (e) => e.doc,
      }),
      new t4("selection", {
        init: (e, t) => e.selection || tH.atStart(t.doc),
        apply: (e) => e.selection,
      }),
      new t4("storedMarks", {
        init: (e) => e.storedMarks || null,
        apply: (e, t, n, r) => (r.selection.$cursor ? e.storedMarks : null),
      }),
      new t4("scrollToSelection", {
        init: () => 0,
        apply: (e, t) => (e.scrolledIntoView ? t + 1 : t),
      }),
    ];
    class t7 {
      constructor(e, t) {
        ((this.schema = e),
          (this.plugins = []),
          (this.pluginsByKey = Object.create(null)),
          (this.fields = t9.slice()),
          t &&
            t.forEach((e) => {
              if (this.pluginsByKey[e.key])
                throw RangeError(
                  "Adding different instances of a keyed plugin (" +
                    e.key +
                    ")",
                );
              (this.plugins.push(e),
                (this.pluginsByKey[e.key] = e),
                e.spec.state &&
                  this.fields.push(new t4(e.key, e.spec.state, e)));
            }));
      }
    }
    class t6 {
      constructor(e) {
        this.config = e;
      }
      get schema() {
        return this.config.schema;
      }
      get plugins() {
        return this.config.plugins;
      }
      apply(e) {
        return this.applyTransaction(e).state;
      }
      filterTransaction(e, t = -1) {
        for (let n = 0; n < this.config.plugins.length; n++)
          if (n != t) {
            let t = this.config.plugins[n];
            if (
              t.spec.filterTransaction &&
              !t.spec.filterTransaction.call(t, e, this)
            )
              return !1;
          }
        return !0;
      }
      applyTransaction(e) {
        if (!this.filterTransaction(e))
          return { state: this, transactions: [] };
        let t = [e],
          n = this.applyInner(e),
          r = null;
        for (;;) {
          let i = !1;
          for (let s = 0; s < this.config.plugins.length; s++) {
            let a = this.config.plugins[s];
            if (a.spec.appendTransaction) {
              let o = r ? r[s].n : 0,
                l = r ? r[s].state : this,
                c =
                  o < t.length &&
                  a.spec.appendTransaction.call(a, o ? t.slice(o) : t, l, n);
              if (c && n.filterTransaction(c, s)) {
                if ((c.setMeta("appendedTransaction", e), !r)) {
                  r = [];
                  for (let e = 0; e < this.config.plugins.length; e++)
                    r.push(
                      e < s ? { state: n, n: t.length } : { state: this, n: 0 },
                    );
                }
                (t.push(c), (n = n.applyInner(c)), (i = !0));
              }
              r && (r[s] = { state: n, n: t.length });
            }
          }
          if (!i) return { state: n, transactions: t };
        }
      }
      applyInner(e) {
        if (!e.before.eq(this.doc))
          throw RangeError("Applying a mismatched transaction");
        let t = new t6(this.config),
          n = this.config.fields;
        for (let r = 0; r < n.length; r++) {
          let i = n[r];
          t[i.name] = i.apply(e, this[i.name], this, t);
        }
        return t;
      }
      get tr() {
        return new t5(this);
      }
      static create(e) {
        let t = new t7(e.doc ? e.doc.type.schema : e.schema, e.plugins),
          n = new t6(t);
        for (let r = 0; r < t.fields.length; r++)
          n[t.fields[r].name] = t.fields[r].init(e, n);
        return n;
      }
      reconfigure(e) {
        let t = new t7(this.schema, e.plugins),
          n = t.fields,
          r = new t6(t);
        for (let t = 0; t < n.length; t++) {
          let i = n[t].name;
          r[i] = this.hasOwnProperty(i) ? this[i] : n[t].init(e, r);
        }
        return r;
      }
      toJSON(e) {
        let t = { doc: this.doc.toJSON(), selection: this.selection.toJSON() };
        if (
          (this.storedMarks &&
            (t.storedMarks = this.storedMarks.map((e) => e.toJSON())),
          e && "object" == typeof e)
        )
          for (let n in e) {
            if ("doc" == n || "selection" == n)
              throw RangeError(
                "The JSON fields `doc` and `selection` are reserved",
              );
            let r = e[n],
              i = r.spec.state;
            i && i.toJSON && (t[n] = i.toJSON.call(r, this[r.key]));
          }
        return t;
      }
      static fromJSON(e, t, n) {
        if (!t) throw RangeError("Invalid input for EditorState.fromJSON");
        if (!e.schema)
          throw RangeError("Required config field 'schema' missing");
        let r = new t7(e.schema, e.plugins),
          i = new t6(r);
        return (
          r.fields.forEach((r) => {
            if ("doc" == r.name) i.doc = H.fromJSON(e.schema, t.doc);
            else if ("selection" == r.name)
              i.selection = tH.fromJSON(i.doc, t.selection);
            else if ("storedMarks" == r.name)
              t.storedMarks &&
                (i.storedMarks = t.storedMarks.map(e.schema.markFromJSON));
            else {
              if (n)
                for (let s in n) {
                  let a = n[s],
                    o = a.spec.state;
                  if (
                    a.key == r.name &&
                    o &&
                    o.fromJSON &&
                    Object.prototype.hasOwnProperty.call(t, s)
                  ) {
                    i[r.name] = o.fromJSON.call(a, e, t[s], i);
                    return;
                  }
                }
              i[r.name] = r.init(e, i);
            }
          }),
          i
        );
      }
    }
    function t8(e, t, n) {
      for (let r in e) {
        let i = e[r];
        (i instanceof Function
          ? (i = i.bind(t))
          : "handleDOMEvents" == r && (i = t8(i, t, {})),
          (n[r] = i));
      }
      return n;
    }
    class ne {
      constructor(e) {
        ((this.spec = e),
          (this.props = {}),
          e.props && t8(e.props, this, this.props),
          (this.key = e.key ? e.key.key : nn("plugin")));
      }
      getState(e) {
        return e[this.key];
      }
    }
    let nt = Object.create(null);
    function nn(e) {
      return e in nt ? e + "$" + ++nt[e] : ((nt[e] = 0), e + "$");
    }
    class nr {
      constructor(e = "key") {
        this.key = nn(e);
      }
      get(e) {
        return e.config.pluginsByKey[this.key];
      }
      getState(e) {
        return e[this.key];
      }
    }
    e.s(
      [
        "AllSelection",
        () => tY,
        "EditorState",
        () => t6,
        "NodeSelection",
        () => tZ,
        "Plugin",
        () => ne,
        "PluginKey",
        () => nr,
        "Selection",
        () => tH,
        "SelectionRange",
        () => t$,
        "TextSelection",
        () => tW,
      ],
      187195,
    );
    let ni = (e, t) =>
      !e.selection.empty &&
      (t && t(e.tr.deleteSelection().scrollIntoView()), !0);
    function ns(e, t) {
      let { $cursor: n } = e.selection;
      return n && (t ? t.endOfTextblock("backward", e) : !(n.parentOffset > 0))
        ? n
        : null;
    }
    let na = (e, t, n) => {
        let r = ns(e, n);
        if (!r) return !1;
        let i = nh(r);
        if (!i) {
          let n = r.blockRange(),
            i = n && tt(n);
          return null != i && (t && t(e.tr.lift(n, i).scrollIntoView()), !0);
        }
        let s = i.nodeBefore;
        if (nD(e, i, t, -1)) return !0;
        if (0 == r.parent.content.size && (nu(s, "end") || tZ.isSelectable(s)))
          for (let n = r.depth; ; n--) {
            let a = tw(e.doc, r.before(n), r.after(n), C.empty);
            if (a && a.slice.size < a.to - a.from) {
              if (t) {
                let n = e.tr.step(a);
                (n.setSelection(
                  nu(s, "end")
                    ? tH.findFrom(n.doc.resolve(n.mapping.map(i.pos, -1)), -1)
                    : tZ.create(n.doc, i.pos - s.nodeSize),
                ),
                  t(n.scrollIntoView()));
              }
              return !0;
            }
            if (1 == n || r.node(n - 1).childCount > 1) break;
          }
        return (
          !!s.isAtom &&
          i.depth == r.depth - 1 &&
          (t && t(e.tr.delete(i.pos - s.nodeSize, i.pos).scrollIntoView()), !0)
        );
      },
      no = (e, t, n) => {
        let r = ns(e, n);
        if (!r) return !1;
        let i = nh(r);
        return !!i && nc(e, i, t);
      },
      nl = (e, t, n) => {
        let r = np(e, n);
        if (!r) return !1;
        let i = ng(r);
        return !!i && nc(e, i, t);
      };
    function nc(e, t, n) {
      let r = t.nodeBefore,
        i = t.pos - 1;
      for (; !r.isTextblock; i--) {
        if (r.type.spec.isolating) return !1;
        let e = r.lastChild;
        if (!e) return !1;
        r = e;
      }
      let s = t.nodeAfter,
        a = t.pos + 1;
      for (; !s.isTextblock; a++) {
        if (s.type.spec.isolating) return !1;
        let e = s.firstChild;
        if (!e) return !1;
        s = e;
      }
      let o = tw(e.doc, i, a, C.empty);
      if (!o || o.from != i || (o instanceof e3 && o.slice.size >= a - i))
        return !1;
      if (n) {
        let t = e.tr.step(o);
        (t.setSelection(tW.create(t.doc, i)), n(t.scrollIntoView()));
      }
      return !0;
    }
    function nu(e, t, n = !1) {
      for (let r = e; r; r = "start" == t ? r.firstChild : r.lastChild) {
        if (r.isTextblock) return !0;
        if (n && 1 != r.childCount) break;
      }
      return !1;
    }
    let nd = (e, t, n) => {
      let { $head: r, empty: i } = e.selection,
        s = r;
      if (!i) return !1;
      if (r.parent.isTextblock) {
        if (n ? !n.endOfTextblock("backward", e) : r.parentOffset > 0)
          return !1;
        s = nh(r);
      }
      let a = s && s.nodeBefore;
      return (
        !!a &&
        !!tZ.isSelectable(a) &&
        (t &&
          t(
            e.tr
              .setSelection(tZ.create(e.doc, s.pos - a.nodeSize))
              .scrollIntoView(),
          ),
        !0)
      );
    };
    function nh(e) {
      if (!e.parent.type.spec.isolating)
        for (let t = e.depth - 1; t >= 0; t--) {
          if (e.index(t) > 0) return e.doc.resolve(e.before(t + 1));
          if (e.node(t).type.spec.isolating) break;
        }
      return null;
    }
    function np(e, t) {
      let { $cursor: n } = e.selection;
      return n &&
        (t
          ? t.endOfTextblock("forward", e)
          : !(n.parentOffset < n.parent.content.size))
        ? n
        : null;
    }
    let nm = (e, t, n) => {
        let r = np(e, n);
        if (!r) return !1;
        let i = ng(r);
        if (!i) return !1;
        let s = i.nodeAfter;
        if (nD(e, i, t, 1)) return !0;
        if (
          0 == r.parent.content.size &&
          (nu(s, "start") || tZ.isSelectable(s))
        ) {
          let n = tw(e.doc, r.before(), r.after(), C.empty);
          if (n && n.slice.size < n.to - n.from) {
            if (t) {
              let r = e.tr.step(n);
              (r.setSelection(
                nu(s, "start")
                  ? tH.findFrom(r.doc.resolve(r.mapping.map(i.pos)), 1)
                  : tZ.create(r.doc, r.mapping.map(i.pos)),
              ),
                t(r.scrollIntoView()));
            }
            return !0;
          }
        }
        return (
          !!s.isAtom &&
          i.depth == r.depth - 1 &&
          (t && t(e.tr.delete(i.pos, i.pos + s.nodeSize).scrollIntoView()), !0)
        );
      },
      nf = (e, t, n) => {
        let { $head: r, empty: i } = e.selection,
          s = r;
        if (!i) return !1;
        if (r.parent.isTextblock) {
          if (
            n
              ? !n.endOfTextblock("forward", e)
              : r.parentOffset < r.parent.content.size
          )
            return !1;
          s = ng(r);
        }
        let a = s && s.nodeAfter;
        return (
          !!a &&
          !!tZ.isSelectable(a) &&
          (t && t(e.tr.setSelection(tZ.create(e.doc, s.pos)).scrollIntoView()),
          !0)
        );
      };
    function ng(e) {
      if (!e.parent.type.spec.isolating)
        for (let t = e.depth - 1; t >= 0; t--) {
          let n = e.node(t);
          if (e.index(t) + 1 < n.childCount)
            return e.doc.resolve(e.after(t + 1));
          if (n.type.spec.isolating) break;
        }
      return null;
    }
    let nx = (e, t) => {
        let n = e.selection,
          r = n instanceof tZ,
          i;
        if (r) {
          if (n.node.isTextblock || !tf(e.doc, n.from)) return !1;
          i = n.from;
        } else if (null == (i = tv(e.doc, n.from, -1))) return !1;
        if (t) {
          let n = e.tr.join(i);
          (r &&
            n.setSelection(
              tZ.create(n.doc, i - e.doc.resolve(i).nodeBefore.nodeSize),
            ),
            t(n.scrollIntoView()));
        }
        return !0;
      },
      nv = (e, t) => {
        let n = e.selection,
          r;
        if (n instanceof tZ) {
          if (n.node.isTextblock || !tf(e.doc, n.to)) return !1;
          r = n.to;
        } else if (null == (r = tv(e.doc, n.to, 1))) return !1;
        return (t && t(e.tr.join(r).scrollIntoView()), !0);
      },
      ny = (e, t) => {
        let { $from: n, $to: r } = e.selection,
          i = n.blockRange(r),
          s = i && tt(i);
        return null != s && (t && t(e.tr.lift(i, s).scrollIntoView()), !0);
      },
      nb = (e, t) => {
        let { $head: n, $anchor: r } = e.selection;
        return (
          !!n.parent.type.spec.code &&
          !!n.sameParent(r) &&
          (t && t(e.tr.insertText("\n").scrollIntoView()), !0)
        );
      };
    function nj(e) {
      for (let t = 0; t < e.edgeCount; t++) {
        let { type: n } = e.edge(t);
        if (n.isTextblock && !n.hasRequiredAttrs()) return n;
      }
      return null;
    }
    let nw = (e, t) => {
        let { $head: n, $anchor: r } = e.selection;
        if (!n.parent.type.spec.code || !n.sameParent(r)) return !1;
        let i = n.node(-1),
          s = n.indexAfter(-1),
          a = nj(i.contentMatchAt(s));
        if (!a || !i.canReplaceWith(s, s, a)) return !1;
        if (t) {
          let r = n.after(),
            i = e.tr.replaceWith(r, r, a.createAndFill());
          (i.setSelection(tH.near(i.doc.resolve(r), 1)), t(i.scrollIntoView()));
        }
        return !0;
      },
      nC = (e, t) => {
        let n = e.selection,
          { $from: r, $to: i } = n;
        if (n instanceof tY || r.parent.inlineContent || i.parent.inlineContent)
          return !1;
        let s = nj(i.parent.contentMatchAt(i.indexAfter()));
        if (!s || !s.isTextblock) return !1;
        if (t) {
          let n = (!r.parentOffset && i.index() < i.parent.childCount ? r : i)
              .pos,
            a = e.tr.insert(n, s.createAndFill());
          (a.setSelection(tW.create(a.doc, n + 1)), t(a.scrollIntoView()));
        }
        return !0;
      },
      nk = (e, t) => {
        let { $cursor: n } = e.selection;
        if (!n || n.parent.content.size) return !1;
        if (n.depth > 1 && n.after() != n.end(-1)) {
          let r = n.before();
          if (tp(e.doc, r)) return (t && t(e.tr.split(r).scrollIntoView()), !0);
        }
        let r = n.blockRange(),
          i = r && tt(r);
        return null != i && (t && t(e.tr.lift(r, i).scrollIntoView()), !0);
      },
      nS = (function (e) {
        return (e, t) => {
          let { $from: n, $to: r } = e.selection;
          if (e.selection instanceof tZ && e.selection.node.isBlock)
            return (
              !!n.parentOffset &&
              !!tp(e.doc, n.pos) &&
              (t && t(e.tr.split(n.pos).scrollIntoView()), !0)
            );
          if (!n.depth) return !1;
          let i = [],
            s,
            a,
            o = !1,
            l = !1;
          for (let e = n.depth; ; e--) {
            if (n.node(e).isBlock) {
              ((o = n.end(e) == n.pos + (n.depth - e)),
                (l = n.start(e) == n.pos - (n.depth - e)),
                (a = nj(n.node(e - 1).contentMatchAt(n.indexAfter(e - 1)))));
              let t = void 0;
              (i.unshift(t || (o && a ? { type: a } : null)), (s = e));
              break;
            }
            if (1 == e) return !1;
            i.unshift(null);
          }
          let c = e.tr;
          (e.selection instanceof tW || e.selection instanceof tY) &&
            c.deleteSelection();
          let u = c.mapping.map(n.pos),
            d = tp(c.doc, u, i.length, i);
          if (
            (d ||
              ((i[0] = a ? { type: a } : null),
              (d = tp(c.doc, u, i.length, i))),
            c.split(u, i.length, i),
            !o && l && n.node(s).type != a)
          ) {
            let e = c.mapping.map(n.before(s)),
              t = c.doc.resolve(e);
            a &&
              n.node(s - 1).canReplaceWith(t.index(), t.index() + 1, a) &&
              c.setNodeMarkup(c.mapping.map(n.before(s)), a);
          }
          return (t && t(c.scrollIntoView()), !0);
        };
      })(),
      nN = (e, t) => {
        let { $from: n, to: r } = e.selection,
          i,
          s = n.sharedDepth(r);
        return (
          0 != s &&
          ((i = n.before(s)),
          t && t(e.tr.setSelection(tZ.create(e.doc, i))),
          !0)
        );
      },
      nE = (e, t) => (t && t(e.tr.setSelection(new tY(e.doc))), !0);
    function nA(e, t, n) {
      let r = t.nodeBefore,
        i = t.nodeAfter,
        s = t.index();
      return (
        !!r &&
        !!i &&
        !!r.type.compatibleContent(i.type) &&
        (!r.content.size && t.parent.canReplace(s - 1, s)
          ? (n && n(e.tr.delete(t.pos - r.nodeSize, t.pos).scrollIntoView()),
            !0)
          : !!t.parent.canReplace(s, s + 1) &&
            !!(i.isTextblock || tf(e.doc, t.pos)) &&
            (n && n(e.tr.join(t.pos).scrollIntoView()), !0))
      );
    }
    function nD(e, t, n, r) {
      let i = t.nodeBefore,
        s = t.nodeAfter,
        a,
        o,
        l = i.type.spec.isolating || s.type.spec.isolating;
      if (!l && nA(e, t, n)) return !0;
      let c = !l && t.parent.canReplace(t.index(), t.index() + 1);
      if (
        c &&
        (a = (o = i.contentMatchAt(i.childCount)).findWrapping(s.type)) &&
        o.matchType(a[0] || s.type).validEnd
      ) {
        if (n) {
          let r = t.pos + s.nodeSize,
            o = x.empty;
          for (let e = a.length - 1; e >= 0; e--)
            o = x.from(a[e].create(null, o));
          o = x.from(i.copy(o));
          let l = e.tr.step(
              new e4(t.pos - 1, r, t.pos, r, new C(o, 1, 0), a.length, !0),
            ),
            c = l.doc.resolve(r + 2 * a.length);
          (c.nodeAfter &&
            c.nodeAfter.type == i.type &&
            tf(l.doc, c.pos) &&
            l.join(c.pos),
            n(l.scrollIntoView()));
        }
        return !0;
      }
      let u = s.type.spec.isolating || (r > 0 && l) ? null : tH.findFrom(t, 1),
        d = u && u.$from.blockRange(u.$to),
        h = d && tt(d);
      if (null != h && h >= t.depth)
        return (n && n(e.tr.lift(d, h).scrollIntoView()), !0);
      if (c && nu(s, "start", !0) && nu(i, "end")) {
        let r = i,
          a = [];
        for (; a.push(r), !r.isTextblock; ) r = r.lastChild;
        let o = s,
          l = 1;
        for (; !o.isTextblock; o = o.firstChild) l++;
        if (r.canReplace(r.childCount, r.childCount, o.content)) {
          if (n) {
            let r = x.empty;
            for (let e = a.length - 1; e >= 0; e--) r = x.from(a[e].copy(r));
            n(
              e.tr
                .step(
                  new e4(
                    t.pos - a.length,
                    t.pos + s.nodeSize,
                    t.pos + l,
                    t.pos + s.nodeSize - l,
                    new C(r, a.length, 0),
                    0,
                    !0,
                  ),
                )
                .scrollIntoView(),
            );
          }
          return !0;
        }
      }
      return !1;
    }
    function nI(e) {
      return function (t, n) {
        let r = t.selection,
          i = e < 0 ? r.$from : r.$to,
          s = i.depth;
        for (; i.node(s).isInline; ) {
          if (!s) return !1;
          s--;
        }
        return (
          !!i.node(s).isTextblock &&
          (n &&
            n(
              t.tr.setSelection(
                tW.create(t.doc, e < 0 ? i.start(s) : i.end(s)),
              ),
            ),
          !0)
        );
      };
    }
    let nM = nI(-1),
      nT = nI(1);
    function nL(e, t = null) {
      return function (n, r) {
        let { $from: i, $to: s } = n.selection,
          a = i.blockRange(s),
          o = a && tr(a, e, t);
        return !!o && (r && r(n.tr.wrap(a, o).scrollIntoView()), !0);
      };
    }
    function nP(e, t = null) {
      return function (n, r) {
        let i = !1;
        for (let r = 0; r < n.selection.ranges.length && !i; r++) {
          let {
            $from: { pos: s },
            $to: { pos: a },
          } = n.selection.ranges[r];
          n.doc.nodesBetween(s, a, (r, s) => {
            if (i) return !1;
            if (!(!r.isTextblock || r.hasMarkup(e, t)))
              if (r.type == e) i = !0;
              else {
                let t = n.doc.resolve(s),
                  r = t.index();
                i = t.parent.canReplaceWith(r, r + 1, e);
              }
          });
        }
        if (!i) return !1;
        if (r) {
          let i = n.tr;
          for (let r = 0; r < n.selection.ranges.length; r++) {
            let {
              $from: { pos: s },
              $to: { pos: a },
            } = n.selection.ranges[r];
            i.setBlockType(s, a, e, t);
          }
          r(i.scrollIntoView());
        }
        return !0;
      };
    }
    function nR(...e) {
      return function (t, n, r) {
        for (let i = 0; i < e.length; i++) if (e[i](t, n, r)) return !0;
        return !1;
      };
    }
    let nF = nR(ni, na, nd),
      n_ = nR(ni, nm, nf),
      nO = {
        Enter: nR(nb, nC, nk, nS),
        "Mod-Enter": nw,
        Backspace: nF,
        "Mod-Backspace": nF,
        "Shift-Backspace": nF,
        Delete: n_,
        "Mod-Delete": n_,
        "Mod-a": nE,
      },
      nB = {
        "Ctrl-h": nO.Backspace,
        "Alt-Backspace": nO["Mod-Backspace"],
        "Ctrl-d": nO.Delete,
        "Ctrl-Alt-Backspace": nO["Mod-Delete"],
        "Alt-Delete": nO["Mod-Delete"],
        "Alt-d": nO["Mod-Delete"],
        "Ctrl-a": nM,
        "Ctrl-e": nT,
      };
    for (let e in nO) nB[e] = nO[e];
    function nV(e, t = null) {
      return function (n, r) {
        let { $from: i, $to: s } = n.selection,
          a = i.blockRange(s);
        if (!a) return !1;
        let o = r ? n.tr : null;
        return !!nz(o, a, e, t) && (r && r(o.scrollIntoView()), !0);
      };
    }
    function nz(e, t, n, r = null) {
      let i = !1,
        s = t,
        a = t.$from.doc;
      if (
        t.depth >= 2 &&
        t.$from.node(t.depth - 1).type.compatibleContent(n) &&
        0 == t.startIndex
      ) {
        if (0 == t.$from.index(t.depth - 1)) return !1;
        let e = a.resolve(t.start - 2);
        ((s = new V(e, e, t.depth)),
          t.endIndex < t.parent.childCount &&
            (t = new V(t.$from, a.resolve(t.$to.end(t.depth)), t.depth)),
          (i = !0));
      }
      let o = tr(s, n, r, t);
      return !!o && (e && nH(e, t, o, i, n), !0);
    }
    function nH(e, t, n, r, i) {
      let s = x.empty;
      for (let e = n.length - 1; e >= 0; e--)
        s = x.from(n[e].type.create(n[e].attrs, s));
      e.step(
        new e4(
          t.start - 2 * !!r,
          t.end,
          t.start,
          t.end,
          new C(s, 0, 0),
          n.length,
          !0,
        ),
      );
      let a = 0;
      for (let e = 0; e < n.length; e++) n[e].type == i && (a = e + 1);
      let o = n.length - a,
        l = t.start + n.length - 2 * !!r,
        c = t.parent;
      for (let n = t.startIndex, r = t.endIndex, i = !0; n < r; n++, i = !1)
        (!i && tp(e.doc, l, o) && (e.split(l, o), (l += 2 * o)),
          (l += c.child(n).nodeSize));
      return e;
    }
    function n$(e) {
      return function (t, n) {
        let { $from: r, $to: i } = t.selection,
          s = r.blockRange(
            i,
            (t) => t.childCount > 0 && t.firstChild.type == e,
          );
        return (
          !!s &&
          (!n || (r.node(s.depth - 1).type == e ? nU(t, n, e, s) : nG(t, n, s)))
        );
      };
    }
    function nU(e, t, n, r) {
      let i = e.tr,
        s = r.end,
        a = r.$to.end(r.depth);
      s < a &&
        (i.step(
          new e4(
            s - 1,
            a,
            s,
            a,
            new C(x.from(n.create(null, r.parent.copy())), 1, 0),
            1,
            !0,
          ),
        ),
        (r = new V(i.doc.resolve(r.$from.pos), i.doc.resolve(a), r.depth)));
      let o = tt(r);
      if (null == o) return !1;
      i.lift(r, o);
      let l = i.mapping.map(s, -1) - 1;
      return (tf(i.doc, l) && i.join(l), t(i.scrollIntoView()), !0);
    }
    function nG(e, t, n) {
      let r = e.tr,
        i = n.parent;
      for (let e = n.end, t = n.endIndex - 1, s = n.startIndex; t > s; t--)
        ((e -= i.child(t).nodeSize), r.delete(e - 1, e + 1));
      let s = r.doc.resolve(n.start),
        a = s.nodeAfter;
      if (r.mapping.map(n.end) != n.start + s.nodeAfter.nodeSize) return !1;
      let o = 0 == n.startIndex,
        l = n.endIndex == i.childCount,
        c = s.node(-1),
        u = s.index(-1);
      if (
        !c.canReplace(u + +!o, u + 1, a.content.append(l ? x.empty : x.from(i)))
      )
        return !1;
      let d = s.pos,
        h = d + a.nodeSize;
      return (
        r.step(
          new e4(
            d - !!o,
            h + +!!l,
            d + 1,
            h - 1,
            new C(
              (o ? x.empty : x.from(i.copy(x.empty))).append(
                l ? x.empty : x.from(i.copy(x.empty)),
              ),
              +!o,
              +!l,
            ),
            +!o,
          ),
        ),
        t(r.scrollIntoView()),
        !0
      );
    }
    function nW(e) {
      return function (t, n) {
        let { $from: r, $to: i } = t.selection,
          s = r.blockRange(
            i,
            (t) => t.childCount > 0 && t.firstChild.type == e,
          );
        if (!s) return !1;
        let a = s.startIndex;
        if (0 == a) return !1;
        let o = s.parent,
          l = o.child(a - 1);
        if (l.type != e) return !1;
        if (n) {
          let r = l.lastChild && l.lastChild.type == o.type,
            i = x.from(r ? e.create() : null),
            a = new C(
              x.from(e.create(null, x.from(o.type.create(null, i)))),
              r ? 3 : 1,
              0,
            ),
            c = s.start,
            u = s.end;
          n(
            t.tr
              .step(new e4(c - (r ? 3 : 1), u, c, u, a, 1, !0))
              .scrollIntoView(),
          );
        }
        return !0;
      };
    }
    ("undefined" != typeof navigator
      ? /Mac|iP(hone|[oa]d)/.test(navigator.platform)
      : "undefined" != typeof os && os.platform && os.platform(),
      e.s([], 653270),
      e.s([], 732674));
    let nq = function (e) {
        for (var t = 0; ; t++) if (!(e = e.previousSibling)) return t;
      },
      nZ = function (e) {
        let t = e.assignedSlot || e.parentNode;
        return t && 11 == t.nodeType ? t.host : t;
      },
      nK = null,
      nY = function (e, t, n) {
        let r = nK || (nK = document.createRange());
        return (
          r.setEnd(e, null == n ? e.nodeValue.length : n),
          r.setStart(e, t || 0),
          r
        );
      },
      nJ = function () {
        nK = null;
      },
      nQ = function (e, t, n, r) {
        return n && (n0(e, t, n, r, -1) || n0(e, t, n, r, 1));
      },
      nX = /^(img|br|input|textarea|hr)$/i;
    function n0(e, t, n, r, i) {
      for (var s; ; ) {
        if (e == n && t == r) return !0;
        if (t == (i < 0 ? 0 : n1(e))) {
          let n = e.parentNode;
          if (
            !n ||
            1 != n.nodeType ||
            n4(e) ||
            nX.test(e.nodeName) ||
            "false" == e.contentEditable
          )
            return !1;
          ((t = nq(e) + (i < 0 ? 0 : 1)), (e = n));
        } else {
          if (1 != e.nodeType) return !1;
          let n = e.childNodes[t + (i < 0 ? -1 : 0)];
          if (1 == n.nodeType && "false" == n.contentEditable)
            if (null == (s = n.pmViewDesc) || !s.ignoreForSelection) return !1;
            else t += i;
          else ((e = n), (t = i < 0 ? n1(e) : 0));
        }
      }
    }
    function n1(e) {
      return 3 == e.nodeType ? e.nodeValue.length : e.childNodes.length;
    }
    function n2(e, t) {
      for (;;) {
        if (3 == e.nodeType && t) return e;
        if (1 == e.nodeType && t > 0) {
          if ("false" == e.contentEditable) return null;
          t = n1((e = e.childNodes[t - 1]));
        } else {
          if (!e.parentNode || n4(e)) return null;
          ((t = nq(e)), (e = e.parentNode));
        }
      }
    }
    function n5(e, t) {
      for (;;) {
        if (3 == e.nodeType && t < e.nodeValue.length) return e;
        if (1 == e.nodeType && t < e.childNodes.length) {
          if ("false" == e.contentEditable) return null;
          ((e = e.childNodes[t]), (t = 0));
        } else {
          if (!e.parentNode || n4(e)) return null;
          ((t = nq(e) + 1), (e = e.parentNode));
        }
      }
    }
    function n3(e, t, n) {
      for (let r = 0 == t, i = t == n1(e); r || i; ) {
        if (e == n) return !0;
        let t = nq(e);
        if (!(e = e.parentNode)) return !1;
        ((r = r && 0 == t), (i = i && t == n1(e)));
      }
    }
    function n4(e) {
      let t;
      for (let n = e; n && !(t = n.pmViewDesc); n = n.parentNode);
      return t && t.node && t.node.isBlock && (t.dom == e || t.contentDOM == e);
    }
    let n9 = function (e) {
      return (
        e.focusNode &&
        nQ(e.focusNode, e.focusOffset, e.anchorNode, e.anchorOffset)
      );
    };
    function n7(e, t) {
      let n = document.createEvent("Event");
      return (
        n.initEvent("keydown", !0, !0),
        (n.keyCode = e),
        (n.key = n.code = t),
        n
      );
    }
    function n6(e) {
      let t = e.activeElement;
      for (; t && t.shadowRoot; ) t = t.shadowRoot.activeElement;
      return t;
    }
    function n8(e, t, n) {
      if (e.caretPositionFromPoint)
        try {
          let r = e.caretPositionFromPoint(t, n);
          if (r)
            return {
              node: r.offsetNode,
              offset: Math.min(n1(r.offsetNode), r.offset),
            };
        } catch (e) {}
      if (e.caretRangeFromPoint) {
        let r = e.caretRangeFromPoint(t, n);
        if (r)
          return {
            node: r.startContainer,
            offset: Math.min(n1(r.startContainer), r.startOffset),
          };
      }
    }
    let re = "undefined" != typeof navigator ? navigator : null,
      rt = "undefined" != typeof document ? document : null,
      rn = (re && re.userAgent) || "",
      rr = /Edge\/(\d+)/.exec(rn),
      ri = /MSIE \d/.exec(rn),
      rs = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rn),
      ra = !!(ri || rs || rr),
      ro = ri ? document.documentMode : rs ? +rs[1] : rr ? +rr[1] : 0,
      rl = !ra && /gecko\/(\d+)/i.test(rn);
    rl && (/Firefox\/(\d+)/.exec(rn) || [0, 0])[1];
    let rc = !ra && /Chrome\/(\d+)/.exec(rn),
      ru = !!rc,
      rd = rc ? +rc[1] : 0,
      rh = !ra && !!re && /Apple Computer/.test(re.vendor),
      rp = rh && (/Mobile\/\w+/.test(rn) || (!!re && re.maxTouchPoints > 2)),
      rm = rp || (!!re && /Mac/.test(re.platform)),
      rf = !!re && /Win/.test(re.platform),
      rg = /Android \d/.test(rn),
      rx = !!rt && "webkitFontSmoothing" in rt.documentElement.style,
      rv = rx
        ? +(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1]
        : 0;
    function ry(e) {
      let t = e.defaultView && e.defaultView.visualViewport;
      return t
        ? { left: 0, right: t.width, top: 0, bottom: t.height }
        : {
            left: 0,
            right: e.documentElement.clientWidth,
            top: 0,
            bottom: e.documentElement.clientHeight,
          };
    }
    function rb(e, t) {
      return "number" == typeof e ? e : e[t];
    }
    function rj(e) {
      let t = e.getBoundingClientRect(),
        n = t.width / e.offsetWidth || 1,
        r = t.height / e.offsetHeight || 1;
      return {
        left: t.left,
        right: t.left + e.clientWidth * n,
        top: t.top,
        bottom: t.top + e.clientHeight * r,
      };
    }
    function rw(e, t, n) {
      let r = e.someProp("scrollThreshold") || 0,
        i = e.someProp("scrollMargin") || 5,
        s = e.dom.ownerDocument;
      for (let a = n || e.dom; a; ) {
        if (1 != a.nodeType) {
          a = nZ(a);
          continue;
        }
        let e = a,
          n = e == s.body,
          o = n ? ry(s) : rj(e),
          l = 0,
          c = 0;
        if (
          (t.top < o.top + rb(r, "top")
            ? (c = -(o.top - t.top + rb(i, "top")))
            : t.bottom > o.bottom - rb(r, "bottom") &&
              (c =
                t.bottom - t.top > o.bottom - o.top
                  ? t.top + rb(i, "top") - o.top
                  : t.bottom - o.bottom + rb(i, "bottom")),
          t.left < o.left + rb(r, "left")
            ? (l = -(o.left - t.left + rb(i, "left")))
            : t.right > o.right - rb(r, "right") &&
              (l = t.right - o.right + rb(i, "right")),
          l || c)
        )
          if (n) s.defaultView.scrollBy(l, c);
          else {
            let n = e.scrollLeft,
              r = e.scrollTop;
            (c && (e.scrollTop += c), l && (e.scrollLeft += l));
            let i = e.scrollLeft - n,
              s = e.scrollTop - r;
            t = {
              left: t.left - i,
              top: t.top - s,
              right: t.right - i,
              bottom: t.bottom - s,
            };
          }
        let u = n ? "fixed" : getComputedStyle(a).position;
        if (/^(fixed|sticky)$/.test(u)) break;
        a = "absolute" == u ? a.offsetParent : nZ(a);
      }
    }
    function rC(e) {
      let t,
        n,
        r = e.dom.getBoundingClientRect(),
        i = Math.max(0, r.top);
      for (
        let s = (r.left + r.right) / 2, a = i + 1;
        a < Math.min(innerHeight, r.bottom);
        a += 5
      ) {
        let r = e.root.elementFromPoint(s, a);
        if (!r || r == e.dom || !e.dom.contains(r)) continue;
        let o = r.getBoundingClientRect();
        if (o.top >= i - 20) {
          ((t = r), (n = o.top));
          break;
        }
      }
      return { refDOM: t, refTop: n, stack: rk(e.dom) };
    }
    function rk(e) {
      let t = [],
        n = e.ownerDocument;
      for (
        let r = e;
        r && (t.push({ dom: r, top: r.scrollTop, left: r.scrollLeft }), e != n);
        r = nZ(r)
      );
      return t;
    }
    function rS({ refDOM: e, refTop: t, stack: n }) {
      let r = e ? e.getBoundingClientRect().top : 0;
      rN(n, 0 == r ? 0 : r - t);
    }
    function rN(e, t) {
      for (let n = 0; n < e.length; n++) {
        let { dom: r, top: i, left: s } = e[n];
        (r.scrollTop != i + t && (r.scrollTop = i + t),
          r.scrollLeft != s && (r.scrollLeft = s));
      }
    }
    let rE = null;
    function rA(e) {
      if (e.setActive) return e.setActive();
      if (rE) return e.focus(rE);
      let t = rk(e);
      (e.focus(
        null == rE
          ? {
              get preventScroll() {
                return ((rE = { preventScroll: !0 }), !0);
              },
            }
          : void 0,
      ),
        rE || ((rE = !1), rN(t, 0)));
    }
    function rD(e, t) {
      let n,
        r,
        i,
        s = 2e8,
        a,
        o = 0,
        l = t.top,
        c = t.top;
      for (let u = e.firstChild, d = 0; u; u = u.nextSibling, d++) {
        let e;
        if (1 == u.nodeType) e = u.getClientRects();
        else {
          if (3 != u.nodeType) continue;
          e = nY(u).getClientRects();
        }
        for (let h = 0; h < e.length; h++) {
          let p = e[h];
          if (p.top <= l && p.bottom >= c) {
            ((l = Math.max(p.bottom, l)), (c = Math.min(p.top, c)));
            let e =
              p.left > t.left
                ? p.left - t.left
                : p.right < t.left
                  ? t.left - p.right
                  : 0;
            if (e < s) {
              ((i = u),
                (s = e),
                (a =
                  e && 3 == i.nodeType
                    ? { left: p.right < t.left ? p.right : p.left, top: t.top }
                    : t),
                1 == u.nodeType &&
                  e &&
                  (o = d + +(t.left >= (p.left + p.right) / 2)));
              continue;
            }
          } else
            p.top > t.top &&
              !n &&
              p.left <= t.left &&
              p.right >= t.left &&
              ((n = u),
              (r = {
                left: Math.max(p.left, Math.min(p.right, t.left)),
                top: p.top,
              }));
          !i &&
            ((t.left >= p.right && t.top >= p.top) ||
              (t.left >= p.left && t.top >= p.bottom)) &&
            (o = d + 1);
        }
      }
      return (!i && n && ((i = n), (a = r), (s = 0)), i && 3 == i.nodeType)
        ? rI(i, a)
        : !i || (s && 1 == i.nodeType)
          ? { node: e, offset: o }
          : rD(i, a);
    }
    function rI(e, t) {
      let n = e.nodeValue.length,
        r = document.createRange();
      for (let i = 0; i < n; i++) {
        (r.setEnd(e, i + 1), r.setStart(e, i));
        let n = rO(r, 1);
        if (n.top != n.bottom && rM(t, n))
          return { node: e, offset: i + +(t.left >= (n.left + n.right) / 2) };
      }
      return { node: e, offset: 0 };
    }
    function rM(e, t) {
      return (
        e.left >= t.left - 1 &&
        e.left <= t.right + 1 &&
        e.top >= t.top - 1 &&
        e.top <= t.bottom + 1
      );
    }
    function rT(e, t) {
      let n = e.parentNode;
      return n &&
        /^li$/i.test(n.nodeName) &&
        t.left < e.getBoundingClientRect().left
        ? n
        : e;
    }
    function rL(e, t, n) {
      let { node: r, offset: i } = rD(t, n),
        s = -1;
      if (1 == r.nodeType && !r.firstChild) {
        let e = r.getBoundingClientRect();
        s = e.left != e.right && n.left > (e.left + e.right) / 2 ? 1 : -1;
      }
      return e.docView.posFromDOM(r, i, s);
    }
    function rP(e, t, n, r) {
      let i = -1;
      for (let n = t, s = !1; n != e.dom; ) {
        let t = e.docView.nearestDesc(n, !0),
          a;
        if (!t) return null;
        if (
          1 == t.dom.nodeType &&
          ((t.node.isBlock && t.parent) || !t.contentDOM) &&
          ((a = t.dom.getBoundingClientRect()).width || a.height) &&
          (t.node.isBlock &&
            t.parent &&
            ((!s && a.left > r.left) || a.top > r.top
              ? (i = t.posBefore)
              : ((!s && a.right < r.left) || a.bottom < r.top) &&
                (i = t.posAfter),
            (s = !0)),
          !t.contentDOM && i < 0 && !t.node.isText)
        )
          return (
            t.node.isBlock
              ? r.top < (a.top + a.bottom) / 2
              : r.left < (a.left + a.right) / 2
          )
            ? t.posBefore
            : t.posAfter;
        n = t.dom.parentNode;
      }
      return i > -1 ? i : e.docView.posFromDOM(t, n, -1);
    }
    function rR(e, t, n) {
      let r = e.childNodes.length;
      if (r && n.top < n.bottom)
        for (
          let i = Math.max(
              0,
              Math.min(
                r - 1,
                Math.floor((r * (t.top - n.top)) / (n.bottom - n.top)) - 2,
              ),
            ),
            s = i;
          ;

        ) {
          let n = e.childNodes[s];
          if (1 == n.nodeType) {
            let e = n.getClientRects();
            for (let r = 0; r < e.length; r++) {
              let i = e[r];
              if (rM(t, i)) return rR(n, t, i);
            }
          }
          if ((s = (s + 1) % r) == i) break;
        }
      return e;
    }
    function rF(e, t) {
      let n,
        r = e.dom.ownerDocument,
        i,
        s = 0,
        a = n8(r, t.left, t.top);
      a && ({ node: i, offset: s } = a);
      let o = (e.root.elementFromPoint ? e.root : r).elementFromPoint(
        t.left,
        t.top,
      );
      if (!o || !e.dom.contains(1 != o.nodeType ? o.parentNode : o)) {
        let n = e.dom.getBoundingClientRect();
        if (!rM(t, n) || !(o = rR(e.dom, t, n))) return null;
      }
      if (rh) for (let e = o; i && e; e = nZ(e)) e.draggable && (i = void 0);
      if (((o = rT(o, t)), i)) {
        let r;
        if (
          rl &&
          1 == i.nodeType &&
          (s = Math.min(s, i.childNodes.length)) < i.childNodes.length
        ) {
          let e = i.childNodes[s],
            n;
          "IMG" == e.nodeName &&
            (n = e.getBoundingClientRect()).right <= t.left &&
            n.bottom > t.top &&
            s++;
        }
        (rx &&
          s &&
          1 == i.nodeType &&
          1 == (r = i.childNodes[s - 1]).nodeType &&
          "false" == r.contentEditable &&
          r.getBoundingClientRect().top >= t.top &&
          s--,
          i == e.dom &&
          s == i.childNodes.length - 1 &&
          1 == i.lastChild.nodeType &&
          t.top > i.lastChild.getBoundingClientRect().bottom
            ? (n = e.state.doc.content.size)
            : (0 == s ||
                1 != i.nodeType ||
                "BR" != i.childNodes[s - 1].nodeName) &&
              (n = rP(e, i, s, t)));
      }
      null == n && (n = rL(e, o, t));
      let l = e.docView.nearestDesc(o, !0);
      return { pos: n, inside: l ? l.posAtStart - l.border : -1 };
    }
    function r_(e) {
      return e.top < e.bottom || e.left < e.right;
    }
    function rO(e, t) {
      let n = e.getClientRects();
      if (n.length) {
        let e = n[t < 0 ? 0 : n.length - 1];
        if (r_(e)) return e;
      }
      return Array.prototype.find.call(n, r_) || e.getBoundingClientRect();
    }
    let rB = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
    function rV(e, t, n) {
      let {
          node: r,
          offset: i,
          atom: s,
        } = e.docView.domFromPos(t, n < 0 ? -1 : 1),
        a = rx || rl;
      if (3 == r.nodeType)
        if (
          a &&
          (rB.test(r.nodeValue) || (n < 0 ? !i : i == r.nodeValue.length))
        ) {
          let e = rO(nY(r, i, i), n);
          if (
            rl &&
            i &&
            /\s/.test(r.nodeValue[i - 1]) &&
            i < r.nodeValue.length
          ) {
            let t = rO(nY(r, i - 1, i - 1), -1);
            if (t.top == e.top) {
              let n = rO(nY(r, i, i + 1), -1);
              if (n.top != e.top) return rz(n, n.left < t.left);
            }
          }
          return e;
        } else {
          let e = i,
            t = i,
            s = n < 0 ? 1 : -1;
          return (
            n < 0 && !i
              ? (t++, (s = -1))
              : n >= 0 && i == r.nodeValue.length
                ? (e--, (s = 1))
                : n < 0
                  ? e--
                  : t++,
            rz(rO(nY(r, e, t), s), s < 0)
          );
        }
      if (!e.state.doc.resolve(t - (s || 0)).parent.inlineContent) {
        if (null == s && i && (n < 0 || i == n1(r))) {
          let e = r.childNodes[i - 1];
          if (1 == e.nodeType) return rH(e.getBoundingClientRect(), !1);
        }
        if (null == s && i < n1(r)) {
          let e = r.childNodes[i];
          if (1 == e.nodeType) return rH(e.getBoundingClientRect(), !0);
        }
        return rH(r.getBoundingClientRect(), n >= 0);
      }
      if (null == s && i && (n < 0 || i == n1(r))) {
        let e = r.childNodes[i - 1],
          t =
            3 == e.nodeType
              ? nY(e, n1(e) - !a)
              : 1 != e.nodeType || ("BR" == e.nodeName && e.nextSibling)
                ? null
                : e;
        if (t) return rz(rO(t, 1), !1);
      }
      if (null == s && i < n1(r)) {
        let e = r.childNodes[i];
        for (; e.pmViewDesc && e.pmViewDesc.ignoreForCoords; )
          e = e.nextSibling;
        let t = e
          ? 3 == e.nodeType
            ? nY(e, 0, +!a)
            : 1 == e.nodeType
              ? e
              : null
          : null;
        if (t) return rz(rO(t, -1), !0);
      }
      return rz(rO(3 == r.nodeType ? nY(r) : r, -n), n >= 0);
    }
    function rz(e, t) {
      if (0 == e.width) return e;
      let n = t ? e.left : e.right;
      return { top: e.top, bottom: e.bottom, left: n, right: n };
    }
    function rH(e, t) {
      if (0 == e.height) return e;
      let n = t ? e.top : e.bottom;
      return { top: n, bottom: n, left: e.left, right: e.right };
    }
    function r$(e, t, n) {
      let r = e.state,
        i = e.root.activeElement;
      (r != t && e.updateState(t), i != e.dom && e.focus());
      try {
        return n();
      } finally {
        (r != t && e.updateState(r), i != e.dom && i && i.focus());
      }
    }
    function rU(e, t, n) {
      let r = t.selection,
        i = "up" == n ? r.$from : r.$to;
      return r$(e, t, () => {
        let { node: t } = e.docView.domFromPos(i.pos, "up" == n ? -1 : 1);
        for (;;) {
          let n = e.docView.nearestDesc(t, !0);
          if (!n) break;
          if (n.node.isBlock) {
            t = n.contentDOM || n.dom;
            break;
          }
          t = n.dom.parentNode;
        }
        let r = rV(e, i.pos, 1);
        for (let e = t.firstChild; e; e = e.nextSibling) {
          let t;
          if (1 == e.nodeType) t = e.getClientRects();
          else {
            if (3 != e.nodeType) continue;
            t = nY(e, 0, e.nodeValue.length).getClientRects();
          }
          for (let e = 0; e < t.length; e++) {
            let i = t[e];
            if (
              i.bottom > i.top + 1 &&
              ("up" == n
                ? r.top - i.top > (i.bottom - r.top) * 2
                : i.bottom - r.bottom > (r.bottom - i.top) * 2)
            )
              return !1;
          }
        }
        return !0;
      });
    }
    let rG = /[\u0590-\u08ac]/;
    function rW(e, t, n) {
      let { $head: r } = t.selection;
      if (!r.parent.isTextblock) return !1;
      let i = r.parentOffset,
        s = !i,
        a = i == r.parent.content.size,
        o = e.domSelection();
      return o
        ? rG.test(r.parent.textContent) && o.modify
          ? r$(e, t, () => {
              let {
                  focusNode: t,
                  focusOffset: i,
                  anchorNode: s,
                  anchorOffset: a,
                } = e.domSelectionRange(),
                l = o.caretBidiLevel;
              o.modify("move", n, "character");
              let c = r.depth ? e.docView.domAfterPos(r.before()) : e.dom,
                { focusNode: u, focusOffset: d } = e.domSelectionRange(),
                h =
                  (u && !c.contains(1 == u.nodeType ? u : u.parentNode)) ||
                  (t == u && i == d);
              try {
                (o.collapse(s, a),
                  t && (t != s || i != a) && o.extend && o.extend(t, i));
              } catch (e) {}
              return (null != l && (o.caretBidiLevel = l), h);
            })
          : "left" == n || "backward" == n
            ? s
            : a
        : r.pos == r.start() || r.pos == r.end();
    }
    let rq = null,
      rZ = null,
      rK = !1;
    function rY(e, t, n) {
      return rq == t && rZ == n
        ? rK
        : ((rq = t),
          (rZ = n),
          (rK = "up" == n || "down" == n ? rU(e, t, n) : rW(e, t, n)));
    }
    let rJ = 0,
      rQ = 1,
      rX = 2,
      r0 = 3;
    class r1 {
      constructor(e, t, n, r) {
        ((this.parent = e),
          (this.children = t),
          (this.dom = n),
          (this.contentDOM = r),
          (this.dirty = rJ),
          (n.pmViewDesc = this));
      }
      matchesWidget(e) {
        return !1;
      }
      matchesMark(e) {
        return !1;
      }
      matchesNode(e, t, n) {
        return !1;
      }
      matchesHack(e) {
        return !1;
      }
      parseRule() {
        return null;
      }
      stopEvent(e) {
        return !1;
      }
      get size() {
        let e = 0;
        for (let t = 0; t < this.children.length; t++)
          e += this.children[t].size;
        return e;
      }
      get border() {
        return 0;
      }
      destroy() {
        ((this.parent = void 0),
          this.dom.pmViewDesc == this && (this.dom.pmViewDesc = void 0));
        for (let e = 0; e < this.children.length; e++)
          this.children[e].destroy();
      }
      posBeforeChild(e) {
        for (let t = 0, n = this.posAtStart; ; t++) {
          let r = this.children[t];
          if (r == e) return n;
          n += r.size;
        }
      }
      get posBefore() {
        return this.parent.posBeforeChild(this);
      }
      get posAtStart() {
        return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;
      }
      get posAfter() {
        return this.posBefore + this.size;
      }
      get posAtEnd() {
        return this.posAtStart + this.size - 2 * this.border;
      }
      localPosFromDOM(e, t, n) {
        let r;
        if (
          this.contentDOM &&
          this.contentDOM.contains(1 == e.nodeType ? e : e.parentNode)
        )
          if (n < 0) {
            let n, r;
            if (e == this.contentDOM) n = e.childNodes[t - 1];
            else {
              for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
              n = e.previousSibling;
            }
            for (; n && !((r = n.pmViewDesc) && r.parent == this); )
              n = n.previousSibling;
            return n ? this.posBeforeChild(r) + r.size : this.posAtStart;
          } else {
            let n, r;
            if (e == this.contentDOM) n = e.childNodes[t];
            else {
              for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
              n = e.nextSibling;
            }
            for (; n && !((r = n.pmViewDesc) && r.parent == this); )
              n = n.nextSibling;
            return n ? this.posBeforeChild(r) : this.posAtEnd;
          }
        if (e == this.dom && this.contentDOM) r = t > nq(this.contentDOM);
        else if (
          this.contentDOM &&
          this.contentDOM != this.dom &&
          this.dom.contains(this.contentDOM)
        )
          r = 2 & e.compareDocumentPosition(this.contentDOM);
        else if (this.dom.firstChild) {
          if (0 == t)
            for (let t = e; ; t = t.parentNode) {
              if (t == this.dom) {
                r = !1;
                break;
              }
              if (t.previousSibling) break;
            }
          if (null == r && t == e.childNodes.length)
            for (let t = e; ; t = t.parentNode) {
              if (t == this.dom) {
                r = !0;
                break;
              }
              if (t.nextSibling) break;
            }
        }
        return (null == r ? n > 0 : r) ? this.posAtEnd : this.posAtStart;
      }
      nearestDesc(e, t = !1) {
        for (let n = !0, r = e; r; r = r.parentNode) {
          let i = this.getDesc(r),
            s;
          if (i && (!t || i.node))
            if (
              !n ||
              !(s = i.nodeDOM) ||
              (1 == s.nodeType
                ? s.contains(1 == e.nodeType ? e : e.parentNode)
                : s == e)
            )
              return i;
            else n = !1;
        }
      }
      getDesc(e) {
        let t = e.pmViewDesc;
        for (let e = t; e; e = e.parent) if (e == this) return t;
      }
      posFromDOM(e, t, n) {
        for (let r = e; r; r = r.parentNode) {
          let i = this.getDesc(r);
          if (i) return i.localPosFromDOM(e, t, n);
        }
        return -1;
      }
      descAt(e) {
        for (let t = 0, n = 0; t < this.children.length; t++) {
          let r = this.children[t],
            i = n + r.size;
          if (n == e && i != n) {
            for (; !r.border && r.children.length; )
              for (let e = 0; e < r.children.length; e++) {
                let t = r.children[e];
                if (t.size) {
                  r = t;
                  break;
                }
              }
            return r;
          }
          if (e < i) return r.descAt(e - n - r.border);
          n = i;
        }
      }
      domFromPos(e, t) {
        if (!this.contentDOM) return { node: this.dom, offset: 0, atom: e + 1 };
        let n = 0,
          r = 0;
        for (let t = 0; n < this.children.length; n++) {
          let i = this.children[n],
            s = t + i.size;
          if (s > e || i instanceof r6) {
            r = e - t;
            break;
          }
          t = s;
        }
        if (r)
          return this.children[n].domFromPos(r - this.children[n].border, t);
        for (
          let e;
          n &&
          !(e = this.children[n - 1]).size &&
          e instanceof r2 &&
          e.side >= 0;
          n--
        );
        if (t <= 0) {
          let e,
            r = !0;
          for (
            ;
            (e = n ? this.children[n - 1] : null) &&
            e.dom.parentNode != this.contentDOM;
            n--, r = !1
          );
          return e && t && r && !e.border && !e.domAtom
            ? e.domFromPos(e.size, t)
            : { node: this.contentDOM, offset: e ? nq(e.dom) + 1 : 0 };
        }
        {
          let e,
            r = !0;
          for (
            ;
            (e = n < this.children.length ? this.children[n] : null) &&
            e.dom.parentNode != this.contentDOM;
            n++, r = !1
          );
          return e && r && !e.border && !e.domAtom
            ? e.domFromPos(0, t)
            : {
                node: this.contentDOM,
                offset: e ? nq(e.dom) : this.contentDOM.childNodes.length,
              };
        }
      }
      parseRange(e, t, n = 0) {
        if (0 == this.children.length)
          return {
            node: this.contentDOM,
            from: e,
            to: t,
            fromOffset: 0,
            toOffset: this.contentDOM.childNodes.length,
          };
        let r = -1,
          i = -1;
        for (let s = n, a = 0; ; a++) {
          let n = this.children[a],
            o = s + n.size;
          if (-1 == r && e <= o) {
            let i = s + n.border;
            if (
              e >= i &&
              t <= o - n.border &&
              n.node &&
              n.contentDOM &&
              this.contentDOM.contains(n.contentDOM)
            )
              return n.parseRange(e, t, i);
            e = s;
            for (let t = a; t > 0; t--) {
              let n = this.children[t - 1];
              if (
                n.size &&
                n.dom.parentNode == this.contentDOM &&
                !n.emptyChildAt(1)
              ) {
                r = nq(n.dom) + 1;
                break;
              }
              e -= n.size;
            }
            -1 == r && (r = 0);
          }
          if (r > -1 && (o > t || a == this.children.length - 1)) {
            t = o;
            for (let e = a + 1; e < this.children.length; e++) {
              let n = this.children[e];
              if (
                n.size &&
                n.dom.parentNode == this.contentDOM &&
                !n.emptyChildAt(-1)
              ) {
                i = nq(n.dom);
                break;
              }
              t += n.size;
            }
            -1 == i && (i = this.contentDOM.childNodes.length);
            break;
          }
          s = o;
        }
        return {
          node: this.contentDOM,
          from: e,
          to: t,
          fromOffset: r,
          toOffset: i,
        };
      }
      emptyChildAt(e) {
        if (this.border || !this.contentDOM || !this.children.length) return !1;
        let t = this.children[e < 0 ? 0 : this.children.length - 1];
        return 0 == t.size || t.emptyChildAt(e);
      }
      domAfterPos(e) {
        let { node: t, offset: n } = this.domFromPos(e, 0);
        if (1 != t.nodeType || n == t.childNodes.length)
          throw RangeError("No node after pos " + e);
        return t.childNodes[n];
      }
      setSelection(e, t, n, r = !1) {
        let i = Math.min(e, t),
          s = Math.max(e, t);
        for (let a = 0, o = 0; a < this.children.length; a++) {
          let l = this.children[a],
            c = o + l.size;
          if (i > o && s < c)
            return l.setSelection(e - o - l.border, t - o - l.border, n, r);
          o = c;
        }
        let a = this.domFromPos(e, e ? -1 : 1),
          o = t == e ? a : this.domFromPos(t, t ? -1 : 1),
          l = n.root.getSelection(),
          c = n.domSelectionRange(),
          u = !1;
        if ((rl || rh) && e == t) {
          let { node: e, offset: t } = a;
          if (3 == e.nodeType) {
            if (
              (u = !!(t && "\n" == e.nodeValue[t - 1])) &&
              t == e.nodeValue.length
            )
              for (let t = e, n; t; t = t.parentNode) {
                if ((n = t.nextSibling)) {
                  "BR" == n.nodeName &&
                    (a = o = { node: n.parentNode, offset: nq(n) + 1 });
                  break;
                }
                let e = t.pmViewDesc;
                if (e && e.node && e.node.isBlock) break;
              }
          } else {
            let n = e.childNodes[t - 1];
            u = n && ("BR" == n.nodeName || "false" == n.contentEditable);
          }
        }
        if (
          rl &&
          c.focusNode &&
          c.focusNode != o.node &&
          1 == c.focusNode.nodeType
        ) {
          let e = c.focusNode.childNodes[c.focusOffset];
          e && "false" == e.contentEditable && (r = !0);
        }
        if (
          !(r || (u && rh)) &&
          nQ(a.node, a.offset, c.anchorNode, c.anchorOffset) &&
          nQ(o.node, o.offset, c.focusNode, c.focusOffset)
        )
          return;
        let d = !1;
        if ((l.extend || e == t) && !u) {
          l.collapse(a.node, a.offset);
          try {
            (e != t && l.extend(o.node, o.offset), (d = !0));
          } catch (e) {}
        }
        if (!d) {
          if (e > t) {
            let e = a;
            ((a = o), (o = e));
          }
          let n = document.createRange();
          (n.setEnd(o.node, o.offset),
            n.setStart(a.node, a.offset),
            l.removeAllRanges(),
            l.addRange(n));
        }
      }
      ignoreMutation(e) {
        return !this.contentDOM && "selection" != e.type;
      }
      get contentLost() {
        return (
          this.contentDOM &&
          this.contentDOM != this.dom &&
          !this.dom.contains(this.contentDOM)
        );
      }
      markDirty(e, t) {
        for (let n = 0, r = 0; r < this.children.length; r++) {
          let i = this.children[r],
            s = n + i.size;
          if (n == s ? e <= s && t >= n : e < s && t > n) {
            let r = n + i.border,
              a = s - i.border;
            if (e >= r && t <= a) {
              ((this.dirty = e == n || t == s ? rX : rQ),
                e == r &&
                t == a &&
                (i.contentLost || i.dom.parentNode != this.contentDOM)
                  ? (i.dirty = r0)
                  : i.markDirty(e - r, t - r));
              return;
            }
            i.dirty =
              i.dom != i.contentDOM ||
              i.dom.parentNode != this.contentDOM ||
              i.children.length
                ? r0
                : rX;
          }
          n = s;
        }
        this.dirty = rX;
      }
      markParentsDirty() {
        let e = 1;
        for (let t = this.parent; t; t = t.parent, e++) {
          let n = 1 == e ? rX : rQ;
          t.dirty < n && (t.dirty = n);
        }
      }
      get domAtom() {
        return !1;
      }
      get ignoreForCoords() {
        return !1;
      }
      get ignoreForSelection() {
        return !1;
      }
      isText(e) {
        return !1;
      }
    }
    class r2 extends r1 {
      constructor(e, t, n, r) {
        let i,
          s = t.type.toDOM;
        if (
          ("function" == typeof s &&
            (s = s(n, () =>
              i ? (i.parent ? i.parent.posBeforeChild(i) : void 0) : r,
            )),
          !t.type.spec.raw)
        ) {
          if (1 != s.nodeType) {
            let e = document.createElement("span");
            (e.appendChild(s), (s = e));
          }
          ((s.contentEditable = "false"),
            s.classList.add("ProseMirror-widget"));
        }
        (super(e, [], s, null),
          (this.widget = t),
          (this.widget = t),
          (i = this));
      }
      matchesWidget(e) {
        return this.dirty == rJ && e.type.eq(this.widget.type);
      }
      parseRule() {
        return { ignore: !0 };
      }
      stopEvent(e) {
        let t = this.widget.spec.stopEvent;
        return !!t && t(e);
      }
      ignoreMutation(e) {
        return "selection" != e.type || this.widget.spec.ignoreSelection;
      }
      destroy() {
        (this.widget.type.destroy(this.dom), super.destroy());
      }
      get domAtom() {
        return !0;
      }
      get ignoreForSelection() {
        return !!this.widget.type.spec.relaxedSide;
      }
      get side() {
        return this.widget.type.side;
      }
    }
    class r5 extends r1 {
      constructor(e, t, n, r) {
        (super(e, [], t, null), (this.textDOM = n), (this.text = r));
      }
      get size() {
        return this.text.length;
      }
      localPosFromDOM(e, t) {
        return e != this.textDOM
          ? this.posAtStart + (t ? this.size : 0)
          : this.posAtStart + t;
      }
      domFromPos(e) {
        return { node: this.textDOM, offset: e };
      }
      ignoreMutation(e) {
        return "characterData" === e.type && e.target.nodeValue == e.oldValue;
      }
    }
    class r3 extends r1 {
      constructor(e, t, n, r, i) {
        (super(e, [], n, r), (this.mark = t), (this.spec = i));
      }
      static create(e, t, n, r) {
        let i = r.nodeViews[t.type.name],
          s = i && i(t, r, n);
        return (
          (s && s.dom) ||
            (s = eM.renderSpec(
              document,
              t.type.spec.toDOM(t, n),
              null,
              t.attrs,
            )),
          new r3(e, t, s.dom, s.contentDOM || s.dom, s)
        );
      }
      parseRule() {
        return this.dirty & r0 || this.mark.type.spec.reparseInView
          ? null
          : {
              mark: this.mark.type.name,
              attrs: this.mark.attrs,
              contentElement: this.contentDOM,
            };
      }
      matchesMark(e) {
        return this.dirty != r0 && this.mark.eq(e);
      }
      markDirty(e, t) {
        if ((super.markDirty(e, t), this.dirty != rJ)) {
          let e = this.parent;
          for (; !e.node; ) e = e.parent;
          (e.dirty < this.dirty && (e.dirty = this.dirty), (this.dirty = rJ));
        }
      }
      slice(e, t, n) {
        let r = r3.create(this.parent, this.mark, !0, n),
          i = this.children,
          s = this.size;
        (t < s && (i = ix(i, t, s, n)), e > 0 && (i = ix(i, 0, e, n)));
        for (let e = 0; e < i.length; e++) i[e].parent = r;
        return ((r.children = i), r);
      }
      ignoreMutation(e) {
        return this.spec.ignoreMutation
          ? this.spec.ignoreMutation(e)
          : super.ignoreMutation(e);
      }
      destroy() {
        (this.spec.destroy && this.spec.destroy(), super.destroy());
      }
    }
    class r4 extends r1 {
      constructor(e, t, n, r, i, s, a, o, l) {
        (super(e, [], i, s),
          (this.node = t),
          (this.outerDeco = n),
          (this.innerDeco = r),
          (this.nodeDOM = a));
      }
      static create(e, t, n, r, i, s) {
        let a = i.nodeViews[t.type.name],
          o,
          l =
            a &&
            a(
              t,
              i,
              () => (o ? (o.parent ? o.parent.posBeforeChild(o) : void 0) : s),
              n,
              r,
            ),
          c = l && l.dom,
          u = l && l.contentDOM;
        if (t.isText)
          if (c) {
            if (3 != c.nodeType)
              throw RangeError("Text must be rendered as a DOM text node");
          } else c = document.createTextNode(t.text);
        else if (!c) {
          let e = eM.renderSpec(document, t.type.spec.toDOM(t), null, t.attrs);
          ({ dom: c, contentDOM: u } = e);
        }
        u ||
          t.isText ||
          "BR" == c.nodeName ||
          (c.hasAttribute("contenteditable") || (c.contentEditable = "false"),
          t.type.spec.draggable && (c.draggable = !0));
        let d = c;
        return ((c = io(c, n, t)), l)
          ? (o = new r8(e, t, n, r, c, u || null, d, l, i, s + 1))
          : t.isText
            ? new r7(e, t, n, r, c, d, i)
            : new r4(e, t, n, r, c, u || null, d, i, s + 1);
      }
      parseRule() {
        if (this.node.type.spec.reparseInView) return null;
        let e = { node: this.node.type.name, attrs: this.node.attrs };
        if (
          ("pre" == this.node.type.whitespace &&
            (e.preserveWhitespace = "full"),
          this.contentDOM)
        )
          if (this.contentLost) {
            for (let t = this.children.length - 1; t >= 0; t--) {
              let n = this.children[t];
              if (this.dom.contains(n.dom.parentNode)) {
                e.contentElement = n.dom.parentNode;
                break;
              }
            }
            e.contentElement || (e.getContent = () => x.empty);
          } else e.contentElement = this.contentDOM;
        else e.getContent = () => this.node.content;
        return e;
      }
      matchesNode(e, t, n) {
        return (
          this.dirty == rJ &&
          e.eq(this.node) &&
          il(t, this.outerDeco) &&
          n.eq(this.innerDeco)
        );
      }
      get size() {
        return this.node.nodeSize;
      }
      get border() {
        return +!this.node.isLeaf;
      }
      updateChildren(e, t) {
        let n = this.node.inlineContent,
          r = t,
          i = e.composing ? this.localCompositionInfo(e, t) : null,
          s = i && i.pos > -1 ? i : null,
          a = i && i.pos < 0,
          o = new iu(this, s && s.node, e);
        (ip(
          this.node,
          this.innerDeco,
          (t, i, s) => {
            (t.spec.marks
              ? o.syncToMarks(t.spec.marks, n, e)
              : t.type.side >= 0 &&
                !s &&
                o.syncToMarks(
                  i == this.node.childCount ? j.none : this.node.child(i).marks,
                  n,
                  e,
                ),
              o.placeWidget(t, e, r));
          },
          (t, s, l, c) => {
            let u;
            (o.syncToMarks(t.marks, n, e),
              o.findNodeMatch(t, s, l, c) ||
                (a &&
                  e.state.selection.from > r &&
                  e.state.selection.to < r + t.nodeSize &&
                  (u = o.findIndexWithChild(i.node)) > -1 &&
                  o.updateNodeAt(t, s, l, u, e)) ||
                o.updateNextNode(t, s, l, e, c, r) ||
                o.addNode(t, s, l, e, r),
              (r += t.nodeSize));
          },
        ),
          o.syncToMarks([], n, e),
          this.node.isTextblock && o.addTextblockHacks(),
          o.destroyRest(),
          (o.changed || this.dirty == rX) &&
            (s && this.protectLocalComposition(e, s),
            ie(this.contentDOM, this.children, e),
            rp && im(this.dom)));
      }
      localCompositionInfo(e, t) {
        let { from: n, to: r } = e.state.selection;
        if (
          !(e.state.selection instanceof tW) ||
          n < t ||
          r > t + this.node.content.size
        )
          return null;
        let i = e.input.compositionNode;
        if (!i || !this.dom.contains(i.parentNode)) return null;
        if (!this.node.inlineContent) return { node: i, pos: -1, text: "" };
        {
          let e = i.nodeValue,
            s = ig(this.node.content, e, n - t, r - t);
          return s < 0 ? null : { node: i, pos: s, text: e };
        }
      }
      protectLocalComposition(e, { node: t, pos: n, text: r }) {
        if (this.getDesc(t)) return;
        let i = t;
        for (; i.parentNode != this.contentDOM; i = i.parentNode) {
          for (; i.previousSibling; )
            i.parentNode.removeChild(i.previousSibling);
          for (; i.nextSibling; ) i.parentNode.removeChild(i.nextSibling);
          i.pmViewDesc && (i.pmViewDesc = void 0);
        }
        let s = new r5(this, i, t, r);
        (e.input.compositionNodes.push(s),
          (this.children = ix(this.children, n, n + r.length, e, s)));
      }
      update(e, t, n, r) {
        return (
          this.dirty != r0 &&
          !!e.sameMarkup(this.node) &&
          (this.updateInner(e, t, n, r), !0)
        );
      }
      updateInner(e, t, n, r) {
        (this.updateOuterDeco(t),
          (this.node = e),
          (this.innerDeco = n),
          this.contentDOM && this.updateChildren(r, this.posAtStart),
          (this.dirty = rJ));
      }
      updateOuterDeco(e) {
        if (il(e, this.outerDeco)) return;
        let t = 1 != this.nodeDOM.nodeType,
          n = this.dom;
        ((this.dom = is(
          this.dom,
          this.nodeDOM,
          ii(this.outerDeco, this.node, t),
          ii(e, this.node, t),
        )),
          this.dom != n &&
            ((n.pmViewDesc = void 0), (this.dom.pmViewDesc = this)),
          (this.outerDeco = e));
      }
      selectNode() {
        (1 == this.nodeDOM.nodeType &&
          this.nodeDOM.classList.add("ProseMirror-selectednode"),
          (this.contentDOM || !this.node.type.spec.draggable) &&
            (this.dom.draggable = !0));
      }
      deselectNode() {
        1 == this.nodeDOM.nodeType &&
          (this.nodeDOM.classList.remove("ProseMirror-selectednode"),
          (this.contentDOM || !this.node.type.spec.draggable) &&
            this.dom.removeAttribute("draggable"));
      }
      get domAtom() {
        return this.node.isAtom;
      }
    }
    function r9(e, t, n, r, i) {
      io(r, t, e);
      let s = new r4(void 0, e, t, n, r, r, r, i, 0);
      return (s.contentDOM && s.updateChildren(i, 0), s);
    }
    class r7 extends r4 {
      constructor(e, t, n, r, i, s, a) {
        super(e, t, n, r, i, null, s, a, 0);
      }
      parseRule() {
        let e = this.nodeDOM.parentNode;
        for (; e && e != this.dom && !e.pmIsDeco; ) e = e.parentNode;
        return { skip: e || !0 };
      }
      update(e, t, n, r) {
        return (
          this.dirty != r0 &&
          (this.dirty == rJ || !!this.inParent()) &&
          !!e.sameMarkup(this.node) &&
          (this.updateOuterDeco(t),
          (this.dirty != rJ || e.text != this.node.text) &&
            e.text != this.nodeDOM.nodeValue &&
            ((this.nodeDOM.nodeValue = e.text),
            r.trackWrites == this.nodeDOM && (r.trackWrites = null)),
          (this.node = e),
          (this.dirty = rJ),
          !0)
        );
      }
      inParent() {
        let e = this.parent.contentDOM;
        for (let t = this.nodeDOM; t; t = t.parentNode) if (t == e) return !0;
        return !1;
      }
      domFromPos(e) {
        return { node: this.nodeDOM, offset: e };
      }
      localPosFromDOM(e, t, n) {
        return e == this.nodeDOM
          ? this.posAtStart + Math.min(t, this.node.text.length)
          : super.localPosFromDOM(e, t, n);
      }
      ignoreMutation(e) {
        return "characterData" != e.type && "selection" != e.type;
      }
      slice(e, t, n) {
        let r = this.node.cut(e, t),
          i = document.createTextNode(r.text);
        return new r7(this.parent, r, this.outerDeco, this.innerDeco, i, i, n);
      }
      markDirty(e, t) {
        (super.markDirty(e, t),
          this.dom != this.nodeDOM &&
            (0 == e || t == this.nodeDOM.nodeValue.length) &&
            (this.dirty = r0));
      }
      get domAtom() {
        return !1;
      }
      isText(e) {
        return this.node.text == e;
      }
    }
    class r6 extends r1 {
      parseRule() {
        return { ignore: !0 };
      }
      matchesHack(e) {
        return this.dirty == rJ && this.dom.nodeName == e;
      }
      get domAtom() {
        return !0;
      }
      get ignoreForCoords() {
        return "IMG" == this.dom.nodeName;
      }
    }
    class r8 extends r4 {
      constructor(e, t, n, r, i, s, a, o, l, c) {
        (super(e, t, n, r, i, s, a, l, c), (this.spec = o));
      }
      update(e, t, n, r) {
        if (this.dirty == r0) return !1;
        if (
          this.spec.update &&
          (this.node.type == e.type || this.spec.multiType)
        ) {
          let i = this.spec.update(e, t, n);
          return (i && this.updateInner(e, t, n, r), i);
        }
        return (!!this.contentDOM || !!e.isLeaf) && super.update(e, t, n, r);
      }
      selectNode() {
        this.spec.selectNode ? this.spec.selectNode() : super.selectNode();
      }
      deselectNode() {
        this.spec.deselectNode
          ? this.spec.deselectNode()
          : super.deselectNode();
      }
      setSelection(e, t, n, r) {
        this.spec.setSelection
          ? this.spec.setSelection(e, t, n.root)
          : super.setSelection(e, t, n, r);
      }
      destroy() {
        (this.spec.destroy && this.spec.destroy(), super.destroy());
      }
      stopEvent(e) {
        return !!this.spec.stopEvent && this.spec.stopEvent(e);
      }
      ignoreMutation(e) {
        return this.spec.ignoreMutation
          ? this.spec.ignoreMutation(e)
          : super.ignoreMutation(e);
      }
    }
    function ie(e, t, n) {
      let r = e.firstChild,
        i = !1;
      for (let s = 0; s < t.length; s++) {
        let a = t[s],
          o = a.dom;
        if (o.parentNode == e) {
          for (; o != r; ) ((r = ic(r)), (i = !0));
          r = r.nextSibling;
        } else ((i = !0), e.insertBefore(o, r));
        if (a instanceof r3) {
          let t = r ? r.previousSibling : e.lastChild;
          (ie(a.contentDOM, a.children, n),
            (r = t ? t.nextSibling : e.firstChild));
        }
      }
      for (; r; ) ((r = ic(r)), (i = !0));
      i && n.trackWrites == e && (n.trackWrites = null);
    }
    let it = function (e) {
      e && (this.nodeName = e);
    };
    it.prototype = Object.create(null);
    let ir = [new it()];
    function ii(e, t, n) {
      if (0 == e.length) return ir;
      let r = n ? ir[0] : new it(),
        i = [r];
      for (let s = 0; s < e.length; s++) {
        let a = e[s].type.attrs;
        if (a)
          for (let e in (a.nodeName && i.push((r = new it(a.nodeName))), a)) {
            let s = a[e];
            null != s &&
              (n &&
                1 == i.length &&
                i.push((r = new it(t.isInline ? "span" : "div"))),
              "class" == e
                ? (r.class = (r.class ? r.class + " " : "") + s)
                : "style" == e
                  ? (r.style = (r.style ? r.style + ";" : "") + s)
                  : "nodeName" != e && (r[e] = s));
          }
      }
      return i;
    }
    function is(e, t, n, r) {
      if (n == ir && r == ir) return t;
      let i = t;
      for (let t = 0; t < r.length; t++) {
        let s = r[t],
          a = n[t];
        if (t) {
          let t;
          ((a &&
            a.nodeName == s.nodeName &&
            i != e &&
            (t = i.parentNode) &&
            t.nodeName.toLowerCase() == s.nodeName) ||
            (((t = document.createElement(s.nodeName)).pmIsDeco = !0),
            t.appendChild(i),
            (a = ir[0])),
            (i = t));
        }
        ia(i, a || ir[0], s);
      }
      return i;
    }
    function ia(e, t, n) {
      for (let r in t)
        "class" == r ||
          "style" == r ||
          "nodeName" == r ||
          r in n ||
          e.removeAttribute(r);
      for (let r in n)
        "class" != r &&
          "style" != r &&
          "nodeName" != r &&
          n[r] != t[r] &&
          e.setAttribute(r, n[r]);
      if (t.class != n.class) {
        let r = t.class ? t.class.split(" ").filter(Boolean) : [],
          i = n.class ? n.class.split(" ").filter(Boolean) : [];
        for (let t = 0; t < r.length; t++)
          -1 == i.indexOf(r[t]) && e.classList.remove(r[t]);
        for (let t = 0; t < i.length; t++)
          -1 == r.indexOf(i[t]) && e.classList.add(i[t]);
        0 == e.classList.length && e.removeAttribute("class");
      }
      if (t.style != n.style) {
        if (t.style) {
          let n =
              /\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,
            r;
          for (; (r = n.exec(t.style)); ) e.style.removeProperty(r[1]);
        }
        n.style && (e.style.cssText += n.style);
      }
    }
    function io(e, t, n) {
      return is(e, e, ir, ii(t, n, 1 != e.nodeType));
    }
    function il(e, t) {
      if (e.length != t.length) return !1;
      for (let n = 0; n < e.length; n++)
        if (!e[n].type.eq(t[n].type)) return !1;
      return !0;
    }
    function ic(e) {
      let t = e.nextSibling;
      return (e.parentNode.removeChild(e), t);
    }
    class iu {
      constructor(e, t, n) {
        ((this.lock = t),
          (this.view = n),
          (this.index = 0),
          (this.stack = []),
          (this.changed = !1),
          (this.top = e),
          (this.preMatch = id(e.node.content, e)));
      }
      destroyBetween(e, t) {
        if (e != t) {
          for (let n = e; n < t; n++) this.top.children[n].destroy();
          (this.top.children.splice(e, t - e), (this.changed = !0));
        }
      }
      destroyRest() {
        this.destroyBetween(this.index, this.top.children.length);
      }
      syncToMarks(e, t, n) {
        let r = 0,
          i = this.stack.length >> 1,
          s = Math.min(i, e.length);
        for (
          ;
          r < s &&
          (r == i - 1 ? this.top : this.stack[(r + 1) << 1]).matchesMark(
            e[r],
          ) &&
          !1 !== e[r].type.spec.spanning;

        )
          r++;
        for (; r < i; )
          (this.destroyRest(),
            (this.top.dirty = rJ),
            (this.index = this.stack.pop()),
            (this.top = this.stack.pop()),
            i--);
        for (; i < e.length; ) {
          this.stack.push(this.top, this.index + 1);
          let r = -1;
          for (
            let t = this.index;
            t < Math.min(this.index + 3, this.top.children.length);
            t++
          ) {
            let n = this.top.children[t];
            if (n.matchesMark(e[i]) && !this.isLocked(n.dom)) {
              r = t;
              break;
            }
          }
          if (r > -1)
            (r > this.index &&
              ((this.changed = !0), this.destroyBetween(this.index, r)),
              (this.top = this.top.children[this.index]));
          else {
            let r = r3.create(this.top, e[i], t, n);
            (this.top.children.splice(this.index, 0, r),
              (this.top = r),
              (this.changed = !0));
          }
          ((this.index = 0), i++);
        }
      }
      findNodeMatch(e, t, n, r) {
        let i = -1,
          s;
        if (
          r >= this.preMatch.index &&
          (s = this.preMatch.matches[r - this.preMatch.index]).parent ==
            this.top &&
          s.matchesNode(e, t, n)
        )
          i = this.top.children.indexOf(s, this.index);
        else
          for (
            let r = this.index, s = Math.min(this.top.children.length, r + 5);
            r < s;
            r++
          ) {
            let s = this.top.children[r];
            if (s.matchesNode(e, t, n) && !this.preMatch.matched.has(s)) {
              i = r;
              break;
            }
          }
        return (
          !(i < 0) && (this.destroyBetween(this.index, i), this.index++, !0)
        );
      }
      updateNodeAt(e, t, n, r, i) {
        let s = this.top.children[r];
        return (
          s.dirty == r0 && s.dom == s.contentDOM && (s.dirty = rX),
          !!s.update(e, t, n, i) &&
            (this.destroyBetween(this.index, r), this.index++, !0)
        );
      }
      findIndexWithChild(e) {
        for (;;) {
          let t = e.parentNode;
          if (!t) return -1;
          if (t == this.top.contentDOM) {
            let t = e.pmViewDesc;
            if (t) {
              for (let e = this.index; e < this.top.children.length; e++)
                if (this.top.children[e] == t) return e;
            }
            return -1;
          }
          e = t;
        }
      }
      updateNextNode(e, t, n, r, i, s) {
        for (let a = this.index; a < this.top.children.length; a++) {
          let o = this.top.children[a];
          if (o instanceof r4) {
            let l = this.preMatch.matched.get(o);
            if (null != l && l != i) return !1;
            let c = o.dom,
              u,
              d =
                this.isLocked(c) &&
                !(
                  e.isText &&
                  o.node &&
                  o.node.isText &&
                  o.nodeDOM.nodeValue == e.text &&
                  o.dirty != r0 &&
                  il(t, o.outerDeco)
                );
            if (!d && o.update(e, t, n, r))
              return (
                this.destroyBetween(this.index, a),
                o.dom != c && (this.changed = !0),
                this.index++,
                !0
              );
            if (!d && (u = this.recreateWrapper(o, e, t, n, r, s)))
              return (
                this.destroyBetween(this.index, a),
                (this.top.children[this.index] = u),
                u.contentDOM &&
                  ((u.dirty = rX), u.updateChildren(r, s + 1), (u.dirty = rJ)),
                (this.changed = !0),
                this.index++,
                !0
              );
            break;
          }
        }
        return !1;
      }
      recreateWrapper(e, t, n, r, i, s) {
        if (
          e.dirty ||
          t.isAtom ||
          !e.children.length ||
          !e.node.content.eq(t.content) ||
          !il(n, e.outerDeco) ||
          !r.eq(e.innerDeco)
        )
          return null;
        let a = r4.create(this.top, t, n, r, i, s);
        if (a.contentDOM)
          for (let t of ((a.children = e.children),
          (e.children = []),
          a.children))
            t.parent = a;
        return (e.destroy(), a);
      }
      addNode(e, t, n, r, i) {
        let s = r4.create(this.top, e, t, n, r, i);
        (s.contentDOM && s.updateChildren(r, i + 1),
          this.top.children.splice(this.index++, 0, s),
          (this.changed = !0));
      }
      placeWidget(e, t, n) {
        let r =
          this.index < this.top.children.length
            ? this.top.children[this.index]
            : null;
        if (
          r &&
          r.matchesWidget(e) &&
          (e == r.widget || !r.widget.type.toDOM.parentNode)
        )
          this.index++;
        else {
          let r = new r2(this.top, e, t, n);
          (this.top.children.splice(this.index++, 0, r), (this.changed = !0));
        }
      }
      addTextblockHacks() {
        let e = this.top.children[this.index - 1],
          t = this.top;
        for (; e instanceof r3; ) e = (t = e).children[t.children.length - 1];
        (!e ||
          !(e instanceof r7) ||
          /\n$/.test(e.node.text) ||
          (this.view.requiresGeckoHackNode && /\s$/.test(e.node.text))) &&
          ((rh || ru) &&
            e &&
            "false" == e.dom.contentEditable &&
            this.addHackNode("IMG", t),
          this.addHackNode("BR", this.top));
      }
      addHackNode(e, t) {
        if (
          t == this.top &&
          this.index < t.children.length &&
          t.children[this.index].matchesHack(e)
        )
          this.index++;
        else {
          let n = document.createElement(e);
          ("IMG" == e &&
            ((n.className = "ProseMirror-separator"), (n.alt = "")),
            "BR" == e && (n.className = "ProseMirror-trailingBreak"));
          let r = new r6(this.top, [], n, null);
          (t != this.top
            ? t.children.push(r)
            : t.children.splice(this.index++, 0, r),
            (this.changed = !0));
        }
      }
      isLocked(e) {
        return (
          this.lock &&
          (e == this.lock ||
            (1 == e.nodeType && e.contains(this.lock.parentNode)))
        );
      }
    }
    function id(e, t) {
      let n = t,
        r = n.children.length,
        i = e.childCount,
        s = new Map(),
        a = [];
      n: for (; i > 0; ) {
        let o;
        for (;;)
          if (r) {
            let e = n.children[r - 1];
            if (e instanceof r3) ((n = e), (r = e.children.length));
            else {
              ((o = e), r--);
              break;
            }
          } else if (n == t) break n;
          else ((r = n.parent.children.indexOf(n)), (n = n.parent));
        let l = o.node;
        if (l) {
          if (l != e.child(i - 1)) break;
          (--i, s.set(o, i), a.push(o));
        }
      }
      return { index: i, matched: s, matches: a.reverse() };
    }
    function ih(e, t) {
      return e.type.side - t.type.side;
    }
    function ip(e, t, n, r) {
      let i = t.locals(e),
        s = 0;
      if (0 == i.length) {
        for (let n = 0; n < e.childCount; n++) {
          let a = e.child(n);
          (r(a, i, t.forChild(s, a), n), (s += a.nodeSize));
        }
        return;
      }
      let a = 0,
        o = [],
        l = null;
      for (let c = 0; ; ) {
        let u, d, h, p;
        for (; a < i.length && i[a].to == s; ) {
          let e = i[a++];
          e.widget && (u ? (d || (d = [u])).push(e) : (u = e));
        }
        if (u)
          if (d) {
            d.sort(ih);
            for (let e = 0; e < d.length; e++) n(d[e], c, !!l);
          } else n(u, c, !!l);
        if (l) ((p = -1), (h = l), (l = null));
        else if (c < e.childCount) ((p = c), (h = e.child(c++)));
        else break;
        for (let e = 0; e < o.length; e++) o[e].to <= s && o.splice(e--, 1);
        for (; a < i.length && i[a].from <= s && i[a].to > s; ) o.push(i[a++]);
        let m = s + h.nodeSize;
        if (h.isText) {
          let e = m;
          a < i.length && i[a].from < e && (e = i[a].from);
          for (let t = 0; t < o.length; t++) o[t].to < e && (e = o[t].to);
          e < m &&
            ((l = h.cut(e - s)), (h = h.cut(0, e - s)), (m = e), (p = -1));
        } else for (; a < i.length && i[a].to < m; ) a++;
        let f =
          h.isInline && !h.isLeaf ? o.filter((e) => !e.inline) : o.slice();
        (r(h, f, t.forChild(s, h), p), (s = m));
      }
    }
    function im(e) {
      if ("UL" == e.nodeName || "OL" == e.nodeName) {
        let t = e.style.cssText;
        ((e.style.cssText = t + "; list-style: square !important"),
          window.getComputedStyle(e).listStyle,
          (e.style.cssText = t));
      }
    }
    function ig(e, t, n, r) {
      for (let i = 0, s = 0; i < e.childCount && s <= r; ) {
        let a = e.child(i++),
          o = s;
        if (((s += a.nodeSize), !a.isText)) continue;
        let l = a.text;
        for (; i < e.childCount; ) {
          let t = e.child(i++);
          if (((s += t.nodeSize), !t.isText)) break;
          l += t.text;
        }
        if (s >= n) {
          if (s >= r && l.slice(r - t.length - o, r - o) == t)
            return r - t.length;
          let e = o < r ? l.lastIndexOf(t, r - o - 1) : -1;
          if (e >= 0 && e + t.length + o >= n) return o + e;
          if (
            n == r &&
            l.length >= r + t.length - o &&
            l.slice(r - o, r - o + t.length) == t
          )
            return r;
        }
      }
      return -1;
    }
    function ix(e, t, n, r, i) {
      let s = [];
      for (let a = 0, o = 0; a < e.length; a++) {
        let l = e[a],
          c = o,
          u = (o += l.size);
        c >= n || u <= t
          ? s.push(l)
          : (c < t && s.push(l.slice(0, t - c, r)),
            i && (s.push(i), (i = void 0)),
            u > n && s.push(l.slice(n - c, l.size, r)));
      }
      return s;
    }
    function iv(e, t = null) {
      let n = e.domSelectionRange(),
        r = e.state.doc;
      if (!n.focusNode) return null;
      let i = e.docView.nearestDesc(n.focusNode),
        s = i && 0 == i.size,
        a = e.docView.posFromDOM(n.focusNode, n.focusOffset, 1);
      if (a < 0) return null;
      let o = r.resolve(a),
        l,
        c;
      if (n9(n)) {
        for (l = a; i && !i.node; ) i = i.parent;
        let e = i.node;
        if (
          i &&
          e.isAtom &&
          tZ.isSelectable(e) &&
          i.parent &&
          !(e.isInline && n3(n.focusNode, n.focusOffset, i.dom))
        ) {
          let e = i.posBefore;
          c = new tZ(a == e ? o : r.resolve(e));
        }
      } else {
        if (
          n instanceof e.dom.ownerDocument.defaultView.Selection &&
          n.rangeCount > 1
        ) {
          let t = a,
            i = a;
          for (let r = 0; r < n.rangeCount; r++) {
            let s = n.getRangeAt(r);
            ((t = Math.min(
              t,
              e.docView.posFromDOM(s.startContainer, s.startOffset, 1),
            )),
              (i = Math.max(
                i,
                e.docView.posFromDOM(s.endContainer, s.endOffset, -1),
              )));
          }
          if (t < 0) return null;
          (([l, a] = i == e.state.selection.anchor ? [i, t] : [t, i]),
            (o = r.resolve(a)));
        } else l = e.docView.posFromDOM(n.anchorNode, n.anchorOffset, 1);
        if (l < 0) return null;
      }
      let u = r.resolve(l);
      if (!c) {
        let n =
          "pointer" == t || (e.state.selection.head < o.pos && !s) ? 1 : -1;
        c = iD(e, u, o, n);
      }
      return c;
    }
    function iy(e) {
      return e.editable
        ? e.hasFocus()
        : iM(e) &&
            document.activeElement &&
            document.activeElement.contains(e.dom);
    }
    function ib(e, t = !1) {
      let n = e.state.selection;
      if ((iE(e, n), iy(e))) {
        if (!t && e.input.mouseDown && e.input.mouseDown.allowDefault && ru) {
          let t = e.domSelectionRange(),
            n = e.domObserver.currentSelection;
          if (
            t.anchorNode &&
            n.anchorNode &&
            nQ(t.anchorNode, t.anchorOffset, n.anchorNode, n.anchorOffset)
          ) {
            ((e.input.mouseDown.delayedSelectionSync = !0),
              e.domObserver.setCurSelection());
            return;
          }
        }
        if ((e.domObserver.disconnectSelection(), e.cursorWrapper)) iN(e);
        else {
          let { anchor: r, head: i } = n,
            s,
            a;
          (ij &&
            !(n instanceof tW) &&
            (n.$from.parent.inlineContent || (s = iw(e, n.from)),
            n.empty || n.$from.parent.inlineContent || (a = iw(e, n.to))),
            e.docView.setSelection(r, i, e, t),
            ij && (s && ik(s), a && ik(a)),
            n.visible
              ? e.dom.classList.remove("ProseMirror-hideselection")
              : (e.dom.classList.add("ProseMirror-hideselection"),
                "onselectionchange" in document && iS(e)));
        }
        (e.domObserver.setCurSelection(), e.domObserver.connectSelection());
      }
    }
    let ij = rh || (ru && rd < 63);
    function iw(e, t) {
      let { node: n, offset: r } = e.docView.domFromPos(t, 0),
        i = r < n.childNodes.length ? n.childNodes[r] : null,
        s = r ? n.childNodes[r - 1] : null;
      if (rh && i && "false" == i.contentEditable) return iC(i);
      if (
        (!i || "false" == i.contentEditable) &&
        (!s || "false" == s.contentEditable)
      ) {
        if (i) return iC(i);
        else if (s) return iC(s);
      }
    }
    function iC(e) {
      return (
        (e.contentEditable = "true"),
        rh && e.draggable && ((e.draggable = !1), (e.wasDraggable = !0)),
        e
      );
    }
    function ik(e) {
      ((e.contentEditable = "false"),
        e.wasDraggable && ((e.draggable = !0), (e.wasDraggable = null)));
    }
    function iS(e) {
      let t = e.dom.ownerDocument;
      t.removeEventListener("selectionchange", e.input.hideSelectionGuard);
      let n = e.domSelectionRange(),
        r = n.anchorNode,
        i = n.anchorOffset;
      t.addEventListener(
        "selectionchange",
        (e.input.hideSelectionGuard = () => {
          (n.anchorNode != r || n.anchorOffset != i) &&
            (t.removeEventListener(
              "selectionchange",
              e.input.hideSelectionGuard,
            ),
            setTimeout(() => {
              (!iy(e) || e.state.selection.visible) &&
                e.dom.classList.remove("ProseMirror-hideselection");
            }, 20));
        }),
      );
    }
    function iN(e) {
      let t = e.domSelection(),
        n = document.createRange();
      if (!t) return;
      let r = e.cursorWrapper.dom,
        i = "IMG" == r.nodeName;
      (i ? n.setStart(r.parentNode, nq(r) + 1) : n.setStart(r, 0),
        n.collapse(!0),
        t.removeAllRanges(),
        t.addRange(n),
        !i &&
          !e.state.selection.visible &&
          ra &&
          ro <= 11 &&
          ((r.disabled = !0), (r.disabled = !1)));
    }
    function iE(e, t) {
      if (t instanceof tZ) {
        let n = e.docView.descAt(t.from);
        n != e.lastSelectedViewDesc &&
          (iA(e), n && n.selectNode(), (e.lastSelectedViewDesc = n));
      } else iA(e);
    }
    function iA(e) {
      e.lastSelectedViewDesc &&
        (e.lastSelectedViewDesc.parent && e.lastSelectedViewDesc.deselectNode(),
        (e.lastSelectedViewDesc = void 0));
    }
    function iD(e, t, n, r) {
      return (
        e.someProp("createSelectionBetween", (r) => r(e, t, n)) ||
        tW.between(t, n, r)
      );
    }
    function iI(e) {
      return (!e.editable || !!e.hasFocus()) && iM(e);
    }
    function iM(e) {
      let t = e.domSelectionRange();
      if (!t.anchorNode) return !1;
      try {
        return (
          e.dom.contains(
            3 == t.anchorNode.nodeType ? t.anchorNode.parentNode : t.anchorNode,
          ) &&
          (e.editable ||
            e.dom.contains(
              3 == t.focusNode.nodeType ? t.focusNode.parentNode : t.focusNode,
            ))
        );
      } catch (e) {
        return !1;
      }
    }
    function iT(e) {
      let t = e.docView.domFromPos(e.state.selection.anchor, 0),
        n = e.domSelectionRange();
      return nQ(t.node, t.offset, n.anchorNode, n.anchorOffset);
    }
    function iL(e, t) {
      let { $anchor: n, $head: r } = e.selection,
        i = t > 0 ? n.max(r) : n.min(r),
        s = i.parent.inlineContent
          ? i.depth
            ? e.doc.resolve(t > 0 ? i.after() : i.before())
            : null
          : i;
      return s && tH.findFrom(s, t);
    }
    function iP(e, t) {
      return (e.dispatch(e.state.tr.setSelection(t).scrollIntoView()), !0);
    }
    function iR(e, t, n) {
      let r = e.state.selection;
      if (r instanceof tW) {
        if (n.indexOf("s") > -1) {
          let { $head: n } = r,
            i = n.textOffset ? null : t < 0 ? n.nodeBefore : n.nodeAfter;
          if (!i || i.isText || !i.isLeaf) return !1;
          let s = e.state.doc.resolve(n.pos + i.nodeSize * (t < 0 ? -1 : 1));
          return iP(e, new tW(r.$anchor, s));
        } else if (!r.empty) return !1;
        else if (e.endOfTextblock(t > 0 ? "forward" : "backward")) {
          let n = iL(e.state, t);
          return !!n && n instanceof tZ && iP(e, n);
        } else if (!(rm && n.indexOf("m") > -1)) {
          let n = r.$head,
            i = n.textOffset ? null : t < 0 ? n.nodeBefore : n.nodeAfter,
            s;
          if (!i || i.isText) return !1;
          let a = t < 0 ? n.pos - i.nodeSize : n.pos;
          return (
            !!(i.isAtom || ((s = e.docView.descAt(a)) && !s.contentDOM)) &&
            (tZ.isSelectable(i)
              ? iP(
                  e,
                  new tZ(t < 0 ? e.state.doc.resolve(n.pos - i.nodeSize) : n),
                )
              : !!rx &&
                iP(e, new tW(e.state.doc.resolve(t < 0 ? a : a + i.nodeSize))))
          );
        }
      } else {
        if (r instanceof tZ && r.node.isInline)
          return iP(e, new tW(t > 0 ? r.$to : r.$from));
        let n = iL(e.state, t);
        return !!n && iP(e, n);
      }
    }
    function iF(e) {
      return 3 == e.nodeType ? e.nodeValue.length : e.childNodes.length;
    }
    function i_(e, t) {
      let n = e.pmViewDesc;
      return n && 0 == n.size && (t < 0 || e.nextSibling || "BR" != e.nodeName);
    }
    function iO(e, t) {
      return t < 0 ? iB(e) : iV(e);
    }
    function iB(e) {
      let t = e.domSelectionRange(),
        n = t.focusNode,
        r = t.focusOffset;
      if (!n) return;
      let i,
        s,
        a = !1;
      for (
        rl &&
        1 == n.nodeType &&
        r < iF(n) &&
        i_(n.childNodes[r], -1) &&
        (a = !0);
        ;

      )
        if (r > 0)
          if (1 != n.nodeType) break;
          else {
            let e = n.childNodes[r - 1];
            if (i_(e, -1)) ((i = n), (s = --r));
            else if (3 == e.nodeType) r = (n = e).nodeValue.length;
            else break;
          }
        else if (iz(n)) break;
        else {
          let t = n.previousSibling;
          for (; t && i_(t, -1); )
            ((i = n.parentNode), (s = nq(t)), (t = t.previousSibling));
          if (t) r = iF((n = t));
          else {
            if ((n = n.parentNode) == e.dom) break;
            r = 0;
          }
        }
      a ? iU(e, n, r) : i && iU(e, i, s);
    }
    function iV(e) {
      let t,
        n,
        r = e.domSelectionRange(),
        i = r.focusNode,
        s = r.focusOffset;
      if (!i) return;
      let a = iF(i);
      for (;;)
        if (s < a) {
          if (1 != i.nodeType) break;
          if (i_(i.childNodes[s], 1)) ((t = i), (n = ++s));
          else break;
        } else if (iz(i)) break;
        else {
          let r = i.nextSibling;
          for (; r && i_(r, 1); )
            ((t = r.parentNode), (n = nq(r) + 1), (r = r.nextSibling));
          if (r) ((s = 0), (a = iF((i = r))));
          else {
            if ((i = i.parentNode) == e.dom) break;
            s = a = 0;
          }
        }
      t && iU(e, t, n);
    }
    function iz(e) {
      let t = e.pmViewDesc;
      return t && t.node && t.node.isBlock;
    }
    function iH(e, t) {
      for (; e && t == e.childNodes.length && !n4(e); )
        ((t = nq(e) + 1), (e = e.parentNode));
      for (; e && t < e.childNodes.length; ) {
        let n = e.childNodes[t];
        if (3 == n.nodeType) return n;
        if (1 == n.nodeType && "false" == n.contentEditable) break;
        ((e = n), (t = 0));
      }
    }
    function i$(e, t) {
      for (; e && !t && !n4(e); ) ((t = nq(e)), (e = e.parentNode));
      for (; e && t; ) {
        let n = e.childNodes[t - 1];
        if (3 == n.nodeType) return n;
        if (1 == n.nodeType && "false" == n.contentEditable) break;
        t = (e = n).childNodes.length;
      }
    }
    function iU(e, t, n) {
      if (3 != t.nodeType) {
        let e, r;
        (r = iH(t, n))
          ? ((t = r), (n = 0))
          : (e = i$(t, n)) && ((t = e), (n = e.nodeValue.length));
      }
      let r = e.domSelection();
      if (!r) return;
      if (n9(r)) {
        let e = document.createRange();
        (e.setEnd(t, n), e.setStart(t, n), r.removeAllRanges(), r.addRange(e));
      } else r.extend && r.extend(t, n);
      e.domObserver.setCurSelection();
      let { state: i } = e;
      setTimeout(() => {
        e.state == i && ib(e);
      }, 50);
    }
    function iG(e, t) {
      let n = e.state.doc.resolve(t);
      if (!(ru || rf) && n.parent.inlineContent) {
        let r = e.coordsAtPos(t);
        if (t > n.start()) {
          let n = e.coordsAtPos(t - 1),
            i = (n.top + n.bottom) / 2;
          if (i > r.top && i < r.bottom && Math.abs(n.left - r.left) > 1)
            return n.left < r.left ? "ltr" : "rtl";
        }
        if (t < n.end()) {
          let n = e.coordsAtPos(t + 1),
            i = (n.top + n.bottom) / 2;
          if (i > r.top && i < r.bottom && Math.abs(n.left - r.left) > 1)
            return n.left > r.left ? "ltr" : "rtl";
        }
      }
      return "rtl" == getComputedStyle(e.dom).direction ? "rtl" : "ltr";
    }
    function iW(e, t, n) {
      let r = e.state.selection;
      if (
        (r instanceof tW && !r.empty) ||
        n.indexOf("s") > -1 ||
        (rm && n.indexOf("m") > -1)
      )
        return !1;
      let { $from: i, $to: s } = r;
      if (!i.parent.inlineContent || e.endOfTextblock(t < 0 ? "up" : "down")) {
        let n = iL(e.state, t);
        if (n && n instanceof tZ) return iP(e, n);
      }
      if (!i.parent.inlineContent) {
        let n = t < 0 ? i : s,
          a = r instanceof tY ? tH.near(n, t) : tH.findFrom(n, t);
        return !!a && iP(e, a);
      }
      return !1;
    }
    function iq(e, t) {
      if (!(e.state.selection instanceof tW)) return !0;
      let { $head: n, $anchor: r, empty: i } = e.state.selection;
      if (!n.sameParent(r)) return !0;
      if (!i) return !1;
      if (e.endOfTextblock(t > 0 ? "forward" : "backward")) return !0;
      let s = !n.textOffset && (t < 0 ? n.nodeBefore : n.nodeAfter);
      if (s && !s.isText) {
        let r = e.state.tr;
        return (
          t < 0
            ? r.delete(n.pos - s.nodeSize, n.pos)
            : r.delete(n.pos, n.pos + s.nodeSize),
          e.dispatch(r),
          !0
        );
      }
      return !1;
    }
    function iZ(e, t, n) {
      (e.domObserver.stop(), (t.contentEditable = n), e.domObserver.start());
    }
    function iK(e) {
      if (!rh || e.state.selection.$head.parentOffset > 0) return !1;
      let { focusNode: t, focusOffset: n } = e.domSelectionRange();
      if (
        t &&
        1 == t.nodeType &&
        0 == n &&
        t.firstChild &&
        "false" == t.firstChild.contentEditable
      ) {
        let n = t.firstChild;
        (iZ(e, n, "true"), setTimeout(() => iZ(e, n, "false"), 20));
      }
      return !1;
    }
    function iY(e) {
      let t = "";
      return (
        e.ctrlKey && (t += "c"),
        e.metaKey && (t += "m"),
        e.altKey && (t += "a"),
        e.shiftKey && (t += "s"),
        t
      );
    }
    function iJ(e, t) {
      let n = t.keyCode,
        r = iY(t);
      if (8 == n || (rm && 72 == n && "c" == r)) return iq(e, -1) || iO(e, -1);
      if ((46 == n && !t.shiftKey) || (rm && 68 == n && "c" == r))
        return iq(e, 1) || iO(e, 1);
      if (13 == n || 27 == n) return !0;
      if (37 == n || (rm && 66 == n && "c" == r)) {
        let t =
          37 == n ? ("ltr" == iG(e, e.state.selection.from) ? -1 : 1) : -1;
        return iR(e, t, r) || iO(e, t);
      }
      if (39 == n || (rm && 70 == n && "c" == r)) {
        let t = 39 == n ? ("ltr" == iG(e, e.state.selection.from) ? 1 : -1) : 1;
        return iR(e, t, r) || iO(e, t);
      } else if (38 == n || (rm && 80 == n && "c" == r))
        return iW(e, -1, r) || iO(e, -1);
      else if (40 == n || (rm && 78 == n && "c" == r))
        return iK(e) || iW(e, 1, r) || iO(e, 1);
      else if (
        r == (rm ? "m" : "c") &&
        (66 == n || 73 == n || 89 == n || 90 == n)
      )
        return !0;
      return !1;
    }
    function iQ(e, t) {
      e.someProp("transformCopied", (n) => {
        t = n(t, e);
      });
      let n = [],
        { content: r, openStart: i, openEnd: s } = t;
      for (
        ;
        i > 1 && s > 1 && 1 == r.childCount && 1 == r.firstChild.childCount;

      ) {
        (i--, s--);
        let e = r.firstChild;
        (n.push(e.type.name, e.attrs != e.type.defaultAttrs ? e.attrs : null),
          (r = e.content));
      }
      let a =
          e.someProp("clipboardSerializer") || eM.fromSchema(e.state.schema),
        o = i8(),
        l = o.createElement("div");
      l.appendChild(a.serializeFragment(r, { document: o }));
      let c = l.firstChild,
        u,
        d = 0;
      for (; c && 1 == c.nodeType && (u = i7[c.nodeName.toLowerCase()]); ) {
        for (let e = u.length - 1; e >= 0; e--) {
          let t = o.createElement(u[e]);
          for (; l.firstChild; ) t.appendChild(l.firstChild);
          (l.appendChild(t), d++);
        }
        c = l.firstChild;
      }
      return (
        c &&
          1 == c.nodeType &&
          c.setAttribute(
            "data-pm-slice",
            `${i} ${s}${d ? ` -${d}` : ""} ${JSON.stringify(n)}`,
          ),
        {
          dom: l,
          text:
            e.someProp("clipboardTextSerializer", (n) => n(t, e)) ||
            t.content.textBetween(0, t.content.size, "\n\n"),
          slice: t,
        }
      );
    }
    function iX(e, t, n, r, i) {
      let s,
        a,
        o = i.parent.type.spec.code;
      if (!n && !t) return null;
      let l = t && (r || o || !n);
      if (l) {
        if (
          (e.someProp("transformPastedText", (n) => {
            t = n(t, o || r, e);
          }),
          o)
        )
          return t
            ? new C(
                x.from(e.state.schema.text(t.replace(/\r\n?/g, "\n"))),
                0,
                0,
              )
            : C.empty;
        let n = e.someProp("clipboardTextParser", (n) => n(t, i, r, e));
        if (n) a = n;
        else {
          let n = i.marks(),
            { schema: r } = e.state,
            a = eM.fromSchema(r);
          ((s = document.createElement("div")),
            t.split(/(?:\r\n?|\n)+/).forEach((e) => {
              let t = s.appendChild(document.createElement("p"));
              e && t.appendChild(a.serializeNode(r.text(e, n)));
            }));
        }
      } else
        (e.someProp("transformPastedHTML", (t) => {
          n = t(n, e);
        }),
          (s = sn(n)),
          rx && sr(s));
      let c = s && s.querySelector("[data-pm-slice]"),
        u =
          c &&
          /^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(
            c.getAttribute("data-pm-slice") || "",
          );
      if (u && u[3])
        for (let e = +u[3]; e > 0; e--) {
          let e = s.firstChild;
          for (; e && 1 != e.nodeType; ) e = e.nextSibling;
          if (!e) break;
          s = e;
        }
      if (
        (a ||
          (a = (
            e.someProp("clipboardParser") ||
            e.someProp("domParser") ||
            ex.fromSchema(e.state.schema)
          ).parseSlice(s, {
            preserveWhitespace: !!(l || u),
            context: i,
            ruleFromNode: (e) =>
              "BR" != e.nodeName ||
              e.nextSibling ||
              !e.parentNode ||
              i0.test(e.parentNode.nodeName)
                ? null
                : { ignore: !0 },
          })),
        u)
      )
        a = si(i9(a, +u[1], +u[2]), u[4]);
      else if ((a = C.maxOpen(i1(a.content, i), !0)).openStart || a.openEnd) {
        let e = 0,
          t = 0;
        for (
          let t = a.content.firstChild;
          e < a.openStart && !t.type.spec.isolating;
          e++, t = t.firstChild
        );
        for (
          let e = a.content.lastChild;
          t < a.openEnd && !e.type.spec.isolating;
          t++, e = e.lastChild
        );
        a = i9(a, e, t);
      }
      return (
        e.someProp("transformPasted", (t) => {
          a = t(a, e);
        }),
        a
      );
    }
    let i0 =
      /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;
    function i1(e, t) {
      if (e.childCount < 2) return e;
      for (let n = t.depth; n >= 0; n--) {
        let r = t.node(n).contentMatchAt(t.index(n)),
          i,
          s = [];
        if (
          (e.forEach((e) => {
            if (!s) return;
            let t = r.findWrapping(e.type),
              n;
            if (!t) return (s = null);
            if ((n = s.length && i.length && i5(t, i, e, s[s.length - 1], 0)))
              s[s.length - 1] = n;
            else {
              s.length && (s[s.length - 1] = i3(s[s.length - 1], i.length));
              let n = i2(e, t);
              (s.push(n), (r = r.matchType(n.type)), (i = t));
            }
          }),
          s)
        )
          return x.from(s);
      }
      return e;
    }
    function i2(e, t, n = 0) {
      for (let r = t.length - 1; r >= n; r--) e = t[r].create(null, x.from(e));
      return e;
    }
    function i5(e, t, n, r, i) {
      if (i < e.length && i < t.length && e[i] == t[i]) {
        let s = i5(e, t, n, r.lastChild, i + 1);
        if (s) return r.copy(r.content.replaceChild(r.childCount - 1, s));
        if (
          r
            .contentMatchAt(r.childCount)
            .matchType(i == e.length - 1 ? n.type : e[i + 1])
        )
          return r.copy(r.content.append(x.from(i2(n, e, i + 1))));
      }
    }
    function i3(e, t) {
      if (0 == t) return e;
      let n = e.content.replaceChild(e.childCount - 1, i3(e.lastChild, t - 1)),
        r = e.contentMatchAt(e.childCount).fillBefore(x.empty, !0);
      return e.copy(n.append(r));
    }
    function i4(e, t, n, r, i, s) {
      let a = t < 0 ? e.firstChild : e.lastChild,
        o = a.content;
      return (
        e.childCount > 1 && (s = 0),
        i < r - 1 && (o = i4(o, t, n, r, i + 1, s)),
        i >= n &&
          (o =
            t < 0
              ? a
                  .contentMatchAt(0)
                  .fillBefore(o, s <= i)
                  .append(o)
              : o.append(
                  a.contentMatchAt(a.childCount).fillBefore(x.empty, !0),
                )),
        e.replaceChild(t < 0 ? 0 : e.childCount - 1, a.copy(o))
      );
    }
    function i9(e, t, n) {
      return (
        t < e.openStart &&
          (e = new C(
            i4(e.content, -1, t, e.openStart, 0, e.openEnd),
            t,
            e.openEnd,
          )),
        n < e.openEnd &&
          (e = new C(i4(e.content, 1, n, e.openEnd, 0, 0), e.openStart, n)),
        e
      );
    }
    let i7 = {
        thead: ["table"],
        tbody: ["table"],
        tfoot: ["table"],
        caption: ["table"],
        colgroup: ["table"],
        col: ["table", "colgroup"],
        tr: ["table", "tbody"],
        td: ["table", "tbody", "tr"],
        th: ["table", "tbody", "tr"],
      },
      i6 = null;
    function i8() {
      return i6 || (i6 = document.implementation.createHTMLDocument("title"));
    }
    let se = null;
    function st(e) {
      let t = window.trustedTypes;
      return t
        ? (se ||
            (se =
              t.defaultPolicy ||
              t.createPolicy("ProseMirrorClipboard", { createHTML: (e) => e })),
          se.createHTML(e))
        : e;
    }
    function sn(e) {
      let t = /^(\s*<meta [^>]*>)*/.exec(e);
      t && (e = e.slice(t[0].length));
      let n = i8().createElement("div"),
        r = /<([a-z][^>\s]+)/i.exec(e),
        i;
      if (
        ((i = r && i7[r[1].toLowerCase()]) &&
          (e =
            i.map((e) => "<" + e + ">").join("") +
            e +
            i
              .map((e) => "</" + e + ">")
              .reverse()
              .join("")),
        (n.innerHTML = st(e)),
        i)
      )
        for (let e = 0; e < i.length; e++) n = n.querySelector(i[e]) || n;
      return n;
    }
    function sr(e) {
      let t = e.querySelectorAll(
        ru ? "span:not([class]):not([style])" : "span.Apple-converted-space",
      );
      for (let n = 0; n < t.length; n++) {
        let r = t[n];
        1 == r.childNodes.length &&
          "" == r.textContent &&
          r.parentNode &&
          r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "), r);
      }
    }
    function si(e, t) {
      if (!e.size) return e;
      let n = e.content.firstChild.type.schema,
        r;
      try {
        r = JSON.parse(t);
      } catch (t) {
        return e;
      }
      let { content: i, openStart: s, openEnd: a } = e;
      for (let e = r.length - 2; e >= 0; e -= 2) {
        let t = n.nodes[r[e]];
        if (!t || t.hasRequiredAttrs()) break;
        ((i = x.from(t.create(r[e + 1], i))), s++, a++);
      }
      return new C(i, s, a);
    }
    let ss = {},
      sa = {},
      so = { touchstart: !0, touchmove: !0 };
    class sl {
      constructor() {
        ((this.shiftKey = !1),
          (this.mouseDown = null),
          (this.lastKeyCode = null),
          (this.lastKeyCodeTime = 0),
          (this.lastClick = { time: 0, x: 0, y: 0, type: "", button: 0 }),
          (this.lastSelectionOrigin = null),
          (this.lastSelectionTime = 0),
          (this.lastIOSEnter = 0),
          (this.lastIOSEnterFallbackTimeout = -1),
          (this.lastFocus = 0),
          (this.lastTouch = 0),
          (this.lastChromeDelete = 0),
          (this.composing = !1),
          (this.compositionNode = null),
          (this.composingTimeout = -1),
          (this.compositionNodes = []),
          (this.compositionEndedAt = -2e8),
          (this.compositionID = 1),
          (this.compositionPendingChanges = 0),
          (this.domChangeCount = 0),
          (this.eventHandlers = Object.create(null)),
          (this.hideSelectionGuard = null));
      }
    }
    function sc(e) {
      for (let t in ss) {
        let n = ss[t];
        e.dom.addEventListener(
          t,
          (e.input.eventHandlers[t] = (t) => {
            !sm(e, t) || sp(e, t) || (!e.editable && t.type in sa) || n(e, t);
          }),
          so[t] ? { passive: !0 } : void 0,
        );
      }
      (rh && e.dom.addEventListener("input", () => null), sh(e));
    }
    function su(e, t) {
      ((e.input.lastSelectionOrigin = t),
        (e.input.lastSelectionTime = Date.now()));
    }
    function sd(e) {
      for (let t in (e.domObserver.stop(), e.input.eventHandlers))
        e.dom.removeEventListener(t, e.input.eventHandlers[t]);
      (clearTimeout(e.input.composingTimeout),
        clearTimeout(e.input.lastIOSEnterFallbackTimeout));
    }
    function sh(e) {
      e.someProp("handleDOMEvents", (t) => {
        for (let n in t)
          e.input.eventHandlers[n] ||
            e.dom.addEventListener(
              n,
              (e.input.eventHandlers[n] = (t) => sp(e, t)),
            );
      });
    }
    function sp(e, t) {
      return e.someProp("handleDOMEvents", (n) => {
        let r = n[t.type];
        return !!r && (r(e, t) || t.defaultPrevented);
      });
    }
    function sm(e, t) {
      if (!t.bubbles) return !0;
      if (t.defaultPrevented) return !1;
      for (let n = t.target; n != e.dom; n = n.parentNode)
        if (
          !n ||
          11 == n.nodeType ||
          (n.pmViewDesc && n.pmViewDesc.stopEvent(t))
        )
          return !1;
      return !0;
    }
    function sf(e, t) {
      sp(e, t) ||
        !ss[t.type] ||
        (!e.editable && t.type in sa) ||
        ss[t.type](e, t);
    }
    function sg(e) {
      return { left: e.clientX, top: e.clientY };
    }
    function sx(e, t) {
      let n = t.x - e.clientX,
        r = t.y - e.clientY;
      return n * n + r * r < 100;
    }
    function sv(e, t, n, r, i) {
      if (-1 == r) return !1;
      let s = e.state.doc.resolve(r);
      for (let r = s.depth + 1; r > 0; r--)
        if (
          e.someProp(t, (t) =>
            r > s.depth
              ? t(e, n, s.nodeAfter, s.before(r), i, !0)
              : t(e, n, s.node(r), s.before(r), i, !1),
          )
        )
          return !0;
      return !1;
    }
    function sy(e, t, n) {
      if ((e.focused || e.focus(), e.state.selection.eq(t))) return;
      let r = e.state.tr.setSelection(t);
      ("pointer" == n && r.setMeta("pointer", !0), e.dispatch(r));
    }
    function sb(e, t) {
      if (-1 == t) return !1;
      let n = e.state.doc.resolve(t),
        r = n.nodeAfter;
      return (
        !!(r && r.isAtom && tZ.isSelectable(r)) &&
        (sy(e, new tZ(n), "pointer"), !0)
      );
    }
    function sj(e, t) {
      if (-1 == t) return !1;
      let n = e.state.selection,
        r,
        i;
      n instanceof tZ && (r = n.node);
      let s = e.state.doc.resolve(t);
      for (let e = s.depth + 1; e > 0; e--) {
        let t = e > s.depth ? s.nodeAfter : s.node(e);
        if (tZ.isSelectable(t)) {
          i =
            r &&
            n.$from.depth > 0 &&
            e >= n.$from.depth &&
            s.before(n.$from.depth + 1) == n.$from.pos
              ? s.before(n.$from.depth)
              : s.before(e);
          break;
        }
      }
      return null != i && (sy(e, tZ.create(e.state.doc, i), "pointer"), !0);
    }
    function sw(e, t, n, r, i) {
      return (
        sv(e, "handleClickOn", t, n, r) ||
        e.someProp("handleClick", (n) => n(e, t, r)) ||
        (i ? sj(e, n) : sb(e, n))
      );
    }
    function sC(e, t, n, r) {
      return (
        sv(e, "handleDoubleClickOn", t, n, r) ||
        e.someProp("handleDoubleClick", (n) => n(e, t, r))
      );
    }
    function sk(e, t, n, r) {
      return (
        sv(e, "handleTripleClickOn", t, n, r) ||
        e.someProp("handleTripleClick", (n) => n(e, t, r)) ||
        sS(e, n, r)
      );
    }
    function sS(e, t, n) {
      if (0 != n.button) return !1;
      let r = e.state.doc;
      if (-1 == t)
        return (
          !!r.inlineContent &&
          (sy(e, tW.create(r, 0, r.content.size), "pointer"), !0)
        );
      let i = r.resolve(t);
      for (let t = i.depth + 1; t > 0; t--) {
        let n = t > i.depth ? i.nodeAfter : i.node(t),
          s = i.before(t);
        if (n.inlineContent)
          sy(e, tW.create(r, s + 1, s + 1 + n.content.size), "pointer");
        else {
          if (!tZ.isSelectable(n)) continue;
          sy(e, tZ.create(r, s), "pointer");
        }
        return !0;
      }
    }
    function sN(e) {
      return sR(e);
    }
    ((sa.keydown = (e, t) => {
      let n = t;
      if (
        ((e.input.shiftKey = 16 == n.keyCode || n.shiftKey), !sD(e, n)) &&
        ((e.input.lastKeyCode = n.keyCode),
        (e.input.lastKeyCodeTime = Date.now()),
        !rg || !ru || 13 != n.keyCode)
      )
        if (
          (229 != n.keyCode && e.domObserver.forceFlush(),
          !rp || 13 != n.keyCode || n.ctrlKey || n.altKey || n.metaKey)
        )
          e.someProp("handleKeyDown", (t) => t(e, n)) || iJ(e, n)
            ? n.preventDefault()
            : su(e, "key");
        else {
          let t = Date.now();
          ((e.input.lastIOSEnter = t),
            (e.input.lastIOSEnterFallbackTimeout = setTimeout(() => {
              e.input.lastIOSEnter == t &&
                (e.someProp("handleKeyDown", (t) => t(e, n7(13, "Enter"))),
                (e.input.lastIOSEnter = 0));
            }, 200)));
        }
    }),
      (sa.keyup = (e, t) => {
        16 == t.keyCode && (e.input.shiftKey = !1);
      }),
      (sa.keypress = (e, t) => {
        let n = t;
        if (
          sD(e, n) ||
          !n.charCode ||
          (n.ctrlKey && !n.altKey) ||
          (rm && n.metaKey)
        )
          return;
        if (e.someProp("handleKeyPress", (t) => t(e, n)))
          return void n.preventDefault();
        let r = e.state.selection;
        if (!(r instanceof tW) || !r.$from.sameParent(r.$to)) {
          let t = String.fromCharCode(n.charCode),
            i = () => e.state.tr.insertText(t).scrollIntoView();
          (/[\r\n]/.test(t) ||
            e.someProp("handleTextInput", (n) =>
              n(e, r.$from.pos, r.$to.pos, t, i),
            ) ||
            e.dispatch(i()),
            n.preventDefault());
        }
      }));
    let sE = rm ? "metaKey" : "ctrlKey";
    ss.mousedown = (e, t) => {
      let n = t;
      e.input.shiftKey = n.shiftKey;
      let r = sN(e),
        i = Date.now(),
        s = "singleClick";
      (i - e.input.lastClick.time < 500 &&
        sx(n, e.input.lastClick) &&
        !n[sE] &&
        e.input.lastClick.button == n.button &&
        ("singleClick" == e.input.lastClick.type
          ? (s = "doubleClick")
          : "doubleClick" == e.input.lastClick.type && (s = "tripleClick")),
        (e.input.lastClick = {
          time: i,
          x: n.clientX,
          y: n.clientY,
          type: s,
          button: n.button,
        }));
      let a = e.posAtCoords(sg(n));
      a &&
        ("singleClick" == s
          ? (e.input.mouseDown && e.input.mouseDown.done(),
            (e.input.mouseDown = new sA(e, a, n, !!r)))
          : ("doubleClick" == s ? sC : sk)(e, a.pos, a.inside, n)
            ? n.preventDefault()
            : su(e, "pointer"));
    };
    class sA {
      constructor(e, t, n, r) {
        let i, s;
        if (
          ((this.view = e),
          (this.pos = t),
          (this.event = n),
          (this.flushed = r),
          (this.delayedSelectionSync = !1),
          (this.mightDrag = null),
          (this.startDoc = e.state.doc),
          (this.selectNode = !!n[sE]),
          (this.allowDefault = n.shiftKey),
          t.inside > -1)
        )
          ((i = e.state.doc.nodeAt(t.inside)), (s = t.inside));
        else {
          let n = e.state.doc.resolve(t.pos);
          ((i = n.parent), (s = n.depth ? n.before() : 0));
        }
        const a = r ? null : n.target,
          o = a ? e.docView.nearestDesc(a, !0) : null;
        this.target = o && 1 == o.dom.nodeType ? o.dom : null;
        let { selection: l } = e.state;
        (((0 == n.button &&
          i.type.spec.draggable &&
          !1 !== i.type.spec.selectable) ||
          (l instanceof tZ && l.from <= s && l.to > s)) &&
          (this.mightDrag = {
            node: i,
            pos: s,
            addAttr: !!(this.target && !this.target.draggable),
            setUneditable: !!(
              this.target &&
              rl &&
              !this.target.hasAttribute("contentEditable")
            ),
          }),
          this.target &&
            this.mightDrag &&
            (this.mightDrag.addAttr || this.mightDrag.setUneditable) &&
            (this.view.domObserver.stop(),
            this.mightDrag.addAttr && (this.target.draggable = !0),
            this.mightDrag.setUneditable &&
              setTimeout(() => {
                this.view.input.mouseDown == this &&
                  this.target.setAttribute("contentEditable", "false");
              }, 20),
            this.view.domObserver.start()),
          e.root.addEventListener("mouseup", (this.up = this.up.bind(this))),
          e.root.addEventListener(
            "mousemove",
            (this.move = this.move.bind(this)),
          ),
          su(e, "pointer"));
      }
      done() {
        (this.view.root.removeEventListener("mouseup", this.up),
          this.view.root.removeEventListener("mousemove", this.move),
          this.mightDrag &&
            this.target &&
            (this.view.domObserver.stop(),
            this.mightDrag.addAttr && this.target.removeAttribute("draggable"),
            this.mightDrag.setUneditable &&
              this.target.removeAttribute("contentEditable"),
            this.view.domObserver.start()),
          this.delayedSelectionSync && setTimeout(() => ib(this.view)),
          (this.view.input.mouseDown = null));
      }
      up(e) {
        if ((this.done(), !this.view.dom.contains(e.target))) return;
        let t = this.pos;
        (this.view.state.doc != this.startDoc &&
          (t = this.view.posAtCoords(sg(e))),
          this.updateAllowDefault(e),
          this.allowDefault || !t
            ? su(this.view, "pointer")
            : sw(this.view, t.pos, t.inside, e, this.selectNode)
              ? e.preventDefault()
              : 0 == e.button &&
                  (this.flushed ||
                    (rh && this.mightDrag && !this.mightDrag.node.isAtom) ||
                    (ru &&
                      !this.view.state.selection.visible &&
                      2 >=
                        Math.min(
                          Math.abs(t.pos - this.view.state.selection.from),
                          Math.abs(t.pos - this.view.state.selection.to),
                        )))
                ? (sy(
                    this.view,
                    tH.near(this.view.state.doc.resolve(t.pos)),
                    "pointer",
                  ),
                  e.preventDefault())
                : su(this.view, "pointer"));
      }
      move(e) {
        (this.updateAllowDefault(e),
          su(this.view, "pointer"),
          0 == e.buttons && this.done());
      }
      updateAllowDefault(e) {
        !this.allowDefault &&
          (Math.abs(this.event.x - e.clientX) > 4 ||
            Math.abs(this.event.y - e.clientY) > 4) &&
          (this.allowDefault = !0);
      }
    }
    function sD(e, t) {
      return (
        !!e.composing ||
        (!!(rh && 500 > Math.abs(t.timeStamp - e.input.compositionEndedAt)) &&
          ((e.input.compositionEndedAt = -2e8), !0))
      );
    }
    ((ss.touchstart = (e) => {
      ((e.input.lastTouch = Date.now()), sN(e), su(e, "pointer"));
    }),
      (ss.touchmove = (e) => {
        ((e.input.lastTouch = Date.now()), su(e, "pointer"));
      }),
      (ss.contextmenu = (e) => sN(e)));
    let sI = rg ? 5e3 : -1;
    function sM(e, t) {
      (clearTimeout(e.input.composingTimeout),
        t > -1 && (e.input.composingTimeout = setTimeout(() => sR(e), t)));
    }
    function sT(e) {
      for (
        e.composing &&
        ((e.input.composing = !1), (e.input.compositionEndedAt = sP()));
        e.input.compositionNodes.length > 0;

      )
        e.input.compositionNodes.pop().markParentsDirty();
    }
    function sL(e) {
      let t = e.domSelectionRange();
      if (!t.focusNode) return null;
      let n = n2(t.focusNode, t.focusOffset),
        r = n5(t.focusNode, t.focusOffset);
      if (n && r && n != r) {
        let t = r.pmViewDesc,
          i = e.domObserver.lastChangedTextNode;
        if (n == i || r == i) return i;
        if (!t || !t.isText(r.nodeValue)) return r;
        if (e.input.compositionNode == r) {
          let e = n.pmViewDesc;
          if (!(!e || !e.isText(n.nodeValue))) return r;
        }
      }
      return n || r;
    }
    function sP() {
      let e = document.createEvent("Event");
      return (e.initEvent("event", !0, !0), e.timeStamp);
    }
    function sR(e, t = !1) {
      if (!rg || !(e.domObserver.flushingSoon >= 0)) {
        if (
          (e.domObserver.forceFlush(),
          sT(e),
          t || (e.docView && e.docView.dirty))
        ) {
          let n = iv(e),
            r = e.state.selection;
          return (
            n && !n.eq(r)
              ? e.dispatch(e.state.tr.setSelection(n))
              : (e.markCursor || t) &&
                  !r.$from.node(r.$from.sharedDepth(r.to)).inlineContent
                ? e.dispatch(e.state.tr.deleteSelection())
                : e.updateState(e.state),
            !0
          );
        }
        return !1;
      }
    }
    function sF(e, t) {
      if (!e.dom.parentNode) return;
      let n = e.dom.parentNode.appendChild(document.createElement("div"));
      (n.appendChild(t),
        (n.style.cssText = "position: fixed; left: -10000px; top: 10px"));
      let r = getSelection(),
        i = document.createRange();
      (i.selectNodeContents(t),
        e.dom.blur(),
        r.removeAllRanges(),
        r.addRange(i),
        setTimeout(() => {
          (n.parentNode && n.parentNode.removeChild(n), e.focus());
        }, 50));
    }
    ((sa.compositionstart = sa.compositionupdate =
      (e) => {
        if (!e.composing) {
          e.domObserver.flush();
          let { state: t } = e,
            n = t.selection.$to;
          if (
            t.selection instanceof tW &&
            (t.storedMarks ||
              (!n.textOffset &&
                n.parentOffset &&
                n.nodeBefore.marks.some((e) => !1 === e.type.spec.inclusive)))
          )
            ((e.markCursor = e.state.storedMarks || n.marks()),
              sR(e, !0),
              (e.markCursor = null));
          else if (
            (sR(e, !t.selection.empty),
            rl &&
              t.selection.empty &&
              n.parentOffset &&
              !n.textOffset &&
              n.nodeBefore.marks.length)
          ) {
            let t = e.domSelectionRange();
            for (
              let n = t.focusNode, r = t.focusOffset;
              n && 1 == n.nodeType && 0 != r;

            ) {
              let t = r < 0 ? n.lastChild : n.childNodes[r - 1];
              if (!t) break;
              if (3 == t.nodeType) {
                let n = e.domSelection();
                n && n.collapse(t, t.nodeValue.length);
                break;
              }
              ((n = t), (r = -1));
            }
          }
          e.input.composing = !0;
        }
        sM(e, sI);
      }),
      (sa.compositionend = (e, t) => {
        e.composing &&
          ((e.input.composing = !1),
          (e.input.compositionEndedAt = t.timeStamp),
          (e.input.compositionPendingChanges = e.domObserver.pendingRecords()
            .length
            ? e.input.compositionID
            : 0),
          (e.input.compositionNode = null),
          e.input.compositionPendingChanges &&
            Promise.resolve().then(() => e.domObserver.flush()),
          e.input.compositionID++,
          sM(e, 20));
      }));
    let s_ = (ra && ro < 15) || (rp && rv < 604);
    function sO(e) {
      return 0 == e.openStart && 0 == e.openEnd && 1 == e.content.childCount
        ? e.content.firstChild
        : null;
    }
    function sB(e, t) {
      if (!e.dom.parentNode) return;
      let n = e.input.shiftKey || e.state.selection.$from.parent.type.spec.code,
        r = e.dom.parentNode.appendChild(
          document.createElement(n ? "textarea" : "div"),
        );
      (n || (r.contentEditable = "true"),
        (r.style.cssText = "position: fixed; left: -10000px; top: 10px"),
        r.focus());
      let i = e.input.shiftKey && 45 != e.input.lastKeyCode;
      setTimeout(() => {
        (e.focus(),
          r.parentNode && r.parentNode.removeChild(r),
          n
            ? sV(e, r.value, null, i, t)
            : sV(e, r.textContent, r.innerHTML, i, t));
      }, 50);
    }
    function sV(e, t, n, r, i) {
      let s = iX(e, t, n, r, e.state.selection.$from);
      if (e.someProp("handlePaste", (t) => t(e, i, s || C.empty))) return !0;
      if (!s) return !1;
      let a = sO(s),
        o = a
          ? e.state.tr.replaceSelectionWith(a, r)
          : e.state.tr.replaceSelection(s);
      return (
        e.dispatch(
          o.scrollIntoView().setMeta("paste", !0).setMeta("uiEvent", "paste"),
        ),
        !0
      );
    }
    function sz(e) {
      let t = e.getData("text/plain") || e.getData("Text");
      if (t) return t;
      let n = e.getData("text/uri-list");
      return n ? n.replace(/\r?\n/g, " ") : "";
    }
    ((ss.copy = sa.cut =
      (e, t) => {
        let n = t,
          r = e.state.selection,
          i = "cut" == n.type;
        if (r.empty) return;
        let s = s_ ? null : n.clipboardData,
          { dom: a, text: o } = iQ(e, r.content());
        (s
          ? (n.preventDefault(),
            s.clearData(),
            s.setData("text/html", a.innerHTML),
            s.setData("text/plain", o))
          : sF(e, a),
          i &&
            e.dispatch(
              e.state.tr
                .deleteSelection()
                .scrollIntoView()
                .setMeta("uiEvent", "cut"),
            ));
      }),
      (sa.paste = (e, t) => {
        let n = t;
        if (e.composing && !rg) return;
        let r = s_ ? null : n.clipboardData,
          i = e.input.shiftKey && 45 != e.input.lastKeyCode;
        r && sV(e, sz(r), r.getData("text/html"), i, n)
          ? n.preventDefault()
          : sB(e, n);
      }));
    class sH {
      constructor(e, t, n) {
        ((this.slice = e), (this.move = t), (this.node = n));
      }
    }
    let s$ = rm ? "altKey" : "ctrlKey";
    function sU(e, t) {
      let n = e.someProp("dragCopies", (e) => !e(t));
      return null != n ? n : !t[s$];
    }
    for (let e in ((ss.dragstart = (e, t) => {
      let n,
        r = t,
        i = e.input.mouseDown;
      if ((i && i.done(), !r.dataTransfer)) return;
      let s = e.state.selection,
        a = s.empty ? null : e.posAtCoords(sg(r));
      if (a && a.pos >= s.from && a.pos <= (s instanceof tZ ? s.to - 1 : s.to));
      else if (i && i.mightDrag) n = tZ.create(e.state.doc, i.mightDrag.pos);
      else if (r.target && 1 == r.target.nodeType) {
        let t = e.docView.nearestDesc(r.target, !0);
        t &&
          t.node.type.spec.draggable &&
          t != e.docView &&
          (n = tZ.create(e.state.doc, t.posBefore));
      }
      let o = (n || e.state.selection).content(),
        { dom: l, text: c, slice: u } = iQ(e, o);
      ((r.dataTransfer.files.length && ru && !(rd > 120)) ||
        r.dataTransfer.clearData(),
        r.dataTransfer.setData(s_ ? "Text" : "text/html", l.innerHTML),
        (r.dataTransfer.effectAllowed = "copyMove"),
        s_ || r.dataTransfer.setData("text/plain", c),
        (e.dragging = new sH(u, sU(e, r), n)));
    }),
    (ss.dragend = (e) => {
      let t = e.dragging;
      window.setTimeout(() => {
        e.dragging == t && (e.dragging = null);
      }, 50);
    }),
    (sa.dragover = sa.dragenter = (e, t) => t.preventDefault()),
    (sa.drop = (e, t) => {
      let n = t,
        r = e.dragging;
      if (((e.dragging = null), !n.dataTransfer)) return;
      let i = e.posAtCoords(sg(n));
      if (!i) return;
      let s = e.state.doc.resolve(i.pos),
        a = r && r.slice;
      a
        ? e.someProp("transformPasted", (t) => {
            a = t(a, e);
          })
        : (a = iX(
            e,
            sz(n.dataTransfer),
            s_ ? null : n.dataTransfer.getData("text/html"),
            !1,
            s,
          ));
      let o = !!(r && sU(e, n));
      if (e.someProp("handleDrop", (t) => t(e, n, a || C.empty, o)))
        return void n.preventDefault();
      if (!a) return;
      n.preventDefault();
      let l = a ? tj(e.state.doc, s.pos, a) : s.pos;
      null == l && (l = s.pos);
      let c = e.state.tr;
      if (o) {
        let { node: e } = r;
        e ? e.replace(c) : c.deleteSelection();
      }
      let u = c.mapping.map(l),
        d = 0 == a.openStart && 0 == a.openEnd && 1 == a.content.childCount,
        h = c.doc;
      if (
        (d
          ? c.replaceRangeWith(u, u, a.content.firstChild)
          : c.replaceRange(u, u, a),
        c.doc.eq(h))
      )
        return;
      let p = c.doc.resolve(u);
      if (
        d &&
        tZ.isSelectable(a.content.firstChild) &&
        p.nodeAfter &&
        p.nodeAfter.sameMarkup(a.content.firstChild)
      )
        c.setSelection(new tZ(p));
      else {
        let t = c.mapping.map(l);
        (c.mapping.maps[c.mapping.maps.length - 1].forEach(
          (e, n, r, i) => (t = i),
        ),
          c.setSelection(iD(e, p, c.doc.resolve(t))));
      }
      (e.focus(), e.dispatch(c.setMeta("uiEvent", "drop")));
    }),
    (ss.focus = (e) => {
      ((e.input.lastFocus = Date.now()),
        e.focused ||
          (e.domObserver.stop(),
          e.dom.classList.add("ProseMirror-focused"),
          e.domObserver.start(),
          (e.focused = !0),
          setTimeout(() => {
            e.docView &&
              e.hasFocus() &&
              !e.domObserver.currentSelection.eq(e.domSelectionRange()) &&
              ib(e);
          }, 20)));
    }),
    (ss.blur = (e, t) => {
      let n = t;
      e.focused &&
        (e.domObserver.stop(),
        e.dom.classList.remove("ProseMirror-focused"),
        e.domObserver.start(),
        n.relatedTarget &&
          e.dom.contains(n.relatedTarget) &&
          e.domObserver.currentSelection.clear(),
        (e.focused = !1));
    }),
    (ss.beforeinput = (e, t) => {
      let n = t;
      if (ru && rg && "deleteContentBackward" == n.inputType) {
        e.domObserver.flushSoon();
        let { domChangeCount: t } = e.input;
        setTimeout(() => {
          if (
            e.input.domChangeCount != t ||
            (e.dom.blur(),
            e.focus(),
            e.someProp("handleKeyDown", (t) => t(e, n7(8, "Backspace"))))
          )
            return;
          let { $cursor: n } = e.state.selection;
          n &&
            n.pos > 0 &&
            e.dispatch(e.state.tr.delete(n.pos - 1, n.pos).scrollIntoView());
        }, 50);
      }
    }),
    sa))
      ss[e] = sa[e];
    function sG(e, t) {
      if (e == t) return !0;
      for (let n in e) if (e[n] !== t[n]) return !1;
      for (let n in t) if (!(n in e)) return !1;
      return !0;
    }
    class sW {
      constructor(e, t) {
        ((this.toDOM = e),
          (this.spec = t || sJ),
          (this.side = this.spec.side || 0));
      }
      map(e, t, n, r) {
        let { pos: i, deleted: s } = e.mapResult(
          t.from + r,
          this.side < 0 ? -1 : 1,
        );
        return s ? null : new sK(i - n, i - n, this);
      }
      valid() {
        return !0;
      }
      eq(e) {
        return (
          this == e ||
          (e instanceof sW &&
            ((this.spec.key && this.spec.key == e.spec.key) ||
              (this.toDOM == e.toDOM && sG(this.spec, e.spec))))
        );
      }
      destroy(e) {
        this.spec.destroy && this.spec.destroy(e);
      }
    }
    class sq {
      constructor(e, t) {
        ((this.attrs = e), (this.spec = t || sJ));
      }
      map(e, t, n, r) {
        let i = e.map(t.from + r, this.spec.inclusiveStart ? -1 : 1) - n,
          s = e.map(t.to + r, this.spec.inclusiveEnd ? 1 : -1) - n;
        return i >= s ? null : new sK(i, s, this);
      }
      valid(e, t) {
        return t.from < t.to;
      }
      eq(e) {
        return (
          this == e ||
          (e instanceof sq && sG(this.attrs, e.attrs) && sG(this.spec, e.spec))
        );
      }
      static is(e) {
        return e.type instanceof sq;
      }
      destroy() {}
    }
    class sZ {
      constructor(e, t) {
        ((this.attrs = e), (this.spec = t || sJ));
      }
      map(e, t, n, r) {
        let i = e.mapResult(t.from + r, 1);
        if (i.deleted) return null;
        let s = e.mapResult(t.to + r, -1);
        return s.deleted || s.pos <= i.pos
          ? null
          : new sK(i.pos - n, s.pos - n, this);
      }
      valid(e, t) {
        let { index: n, offset: r } = e.content.findIndex(t.from),
          i;
        return (
          r == t.from && !(i = e.child(n)).isText && r + i.nodeSize == t.to
        );
      }
      eq(e) {
        return (
          this == e ||
          (e instanceof sZ && sG(this.attrs, e.attrs) && sG(this.spec, e.spec))
        );
      }
      destroy() {}
    }
    class sK {
      constructor(e, t, n) {
        ((this.from = e), (this.to = t), (this.type = n));
      }
      copy(e, t) {
        return new sK(e, t, this.type);
      }
      eq(e, t = 0) {
        return (
          this.type.eq(e.type) && this.from + t == e.from && this.to + t == e.to
        );
      }
      map(e, t, n) {
        return this.type.map(e, this, t, n);
      }
      static widget(e, t, n) {
        return new sK(e, e, new sW(t, n));
      }
      static inline(e, t, n, r) {
        return new sK(e, t, new sq(n, r));
      }
      static node(e, t, n, r) {
        return new sK(e, t, new sZ(n, r));
      }
      get spec() {
        return this.type.spec;
      }
      get inline() {
        return this.type instanceof sq;
      }
      get widget() {
        return this.type instanceof sW;
      }
    }
    let sY = [],
      sJ = {};
    class sQ {
      constructor(e, t) {
        ((this.local = e.length ? e : sY), (this.children = t.length ? t : sY));
      }
      static create(e, t) {
        return t.length ? s9(t, e, 0, sJ) : sX;
      }
      find(e, t, n) {
        let r = [];
        return (
          this.findInner(null == e ? 0 : e, null == t ? 1e9 : t, r, 0, n),
          r
        );
      }
      findInner(e, t, n, r, i) {
        for (let s = 0; s < this.local.length; s++) {
          let a = this.local[s];
          a.from <= t &&
            a.to >= e &&
            (!i || i(a.spec)) &&
            n.push(a.copy(a.from + r, a.to + r));
        }
        for (let s = 0; s < this.children.length; s += 3)
          if (this.children[s] < t && this.children[s + 1] > e) {
            let a = this.children[s] + 1;
            this.children[s + 2].findInner(e - a, t - a, n, r + a, i);
          }
      }
      map(e, t, n) {
        return this == sX || 0 == e.maps.length
          ? this
          : this.mapInner(e, t, 0, 0, n || sJ);
      }
      mapInner(e, t, n, r, i) {
        let s;
        for (let a = 0; a < this.local.length; a++) {
          let o = this.local[a].map(e, n, r);
          o && o.type.valid(t, o)
            ? (s || (s = [])).push(o)
            : i.onRemove && i.onRemove(this.local[a].spec);
        }
        return this.children.length
          ? s1(this.children, s || [], e, t, n, r, i)
          : s
            ? new sQ(s.sort(s7), sY)
            : sX;
      }
      add(e, t) {
        return t.length
          ? this == sX
            ? sQ.create(e, t)
            : this.addInner(e, t, 0)
          : this;
      }
      addInner(e, t, n) {
        let r,
          i = 0;
        e.forEach((e, s) => {
          let a = s + n,
            o;
          if ((o = s3(t, e, a))) {
            for (r || (r = this.children.slice()); i < r.length && r[i] < s; )
              i += 3;
            (r[i] == s
              ? (r[i + 2] = r[i + 2].addInner(e, o, a + 1))
              : r.splice(i, 0, s, s + e.nodeSize, s9(o, e, a + 1, sJ)),
              (i += 3));
          }
        });
        let s = s2(i ? s4(t) : t, -n);
        for (let t = 0; t < s.length; t++)
          s[t].type.valid(e, s[t]) || s.splice(t--, 1);
        return new sQ(
          s.length ? this.local.concat(s).sort(s7) : this.local,
          r || this.children,
        );
      }
      remove(e) {
        return 0 == e.length || this == sX ? this : this.removeInner(e, 0);
      }
      removeInner(e, t) {
        let n = this.children,
          r = this.local;
        for (let r = 0; r < n.length; r += 3) {
          let i,
            s = n[r] + t,
            a = n[r + 1] + t;
          for (let t = 0, n; t < e.length; t++)
            (n = e[t]) &&
              n.from > s &&
              n.to < a &&
              ((e[t] = null), (i || (i = [])).push(n));
          if (!i) continue;
          n == this.children && (n = this.children.slice());
          let o = n[r + 2].removeInner(i, s + 1);
          o != sX ? (n[r + 2] = o) : (n.splice(r, 3), (r -= 3));
        }
        if (r.length) {
          for (let n = 0, i; n < e.length; n++)
            if ((i = e[n]))
              for (let e = 0; e < r.length; e++)
                r[e].eq(i, t) &&
                  (r == this.local && (r = this.local.slice()),
                  r.splice(e--, 1));
        }
        return n == this.children && r == this.local
          ? this
          : r.length || n.length
            ? new sQ(r, n)
            : sX;
      }
      forChild(e, t) {
        let n, r;
        if (this == sX) return this;
        if (t.isLeaf) return sQ.empty;
        for (let t = 0; t < this.children.length; t += 3)
          if (this.children[t] >= e) {
            this.children[t] == e && (n = this.children[t + 2]);
            break;
          }
        let i = e + 1,
          s = i + t.content.size;
        for (let e = 0; e < this.local.length; e++) {
          let t = this.local[e];
          if (t.from < s && t.to > i && t.type instanceof sq) {
            let e = Math.max(i, t.from) - i,
              n = Math.min(s, t.to) - i;
            e < n && (r || (r = [])).push(t.copy(e, n));
          }
        }
        if (r) {
          let e = new sQ(r.sort(s7), sY);
          return n ? new s0([e, n]) : e;
        }
        return n || sX;
      }
      eq(e) {
        if (this == e) return !0;
        if (
          !(e instanceof sQ) ||
          this.local.length != e.local.length ||
          this.children.length != e.children.length
        )
          return !1;
        for (let t = 0; t < this.local.length; t++)
          if (!this.local[t].eq(e.local[t])) return !1;
        for (let t = 0; t < this.children.length; t += 3)
          if (
            this.children[t] != e.children[t] ||
            this.children[t + 1] != e.children[t + 1] ||
            !this.children[t + 2].eq(e.children[t + 2])
          )
            return !1;
        return !0;
      }
      locals(e) {
        return s6(this.localsInner(e));
      }
      localsInner(e) {
        if (this == sX) return sY;
        if (e.inlineContent || !this.local.some(sq.is)) return this.local;
        let t = [];
        for (let e = 0; e < this.local.length; e++)
          this.local[e].type instanceof sq || t.push(this.local[e]);
        return t;
      }
      forEachSet(e) {
        e(this);
      }
    }
    ((sQ.empty = new sQ([], [])), (sQ.removeOverlap = s6));
    let sX = sQ.empty;
    class s0 {
      constructor(e) {
        this.members = e;
      }
      map(e, t) {
        let n = this.members.map((n) => n.map(e, t, sJ));
        return s0.from(n);
      }
      forChild(e, t) {
        if (t.isLeaf) return sQ.empty;
        let n = [];
        for (let r = 0; r < this.members.length; r++) {
          let i = this.members[r].forChild(e, t);
          i != sX && (i instanceof s0 ? (n = n.concat(i.members)) : n.push(i));
        }
        return s0.from(n);
      }
      eq(e) {
        if (!(e instanceof s0) || e.members.length != this.members.length)
          return !1;
        for (let t = 0; t < this.members.length; t++)
          if (!this.members[t].eq(e.members[t])) return !1;
        return !0;
      }
      locals(e) {
        let t,
          n = !0;
        for (let r = 0; r < this.members.length; r++) {
          let i = this.members[r].localsInner(e);
          if (i.length)
            if (t) {
              n && ((t = t.slice()), (n = !1));
              for (let e = 0; e < i.length; e++) t.push(i[e]);
            } else t = i;
        }
        return t ? s6(n ? t : t.sort(s7)) : sY;
      }
      static from(e) {
        switch (e.length) {
          case 0:
            return sX;
          case 1:
            return e[0];
          default:
            return new s0(
              e.every((e) => e instanceof sQ)
                ? e
                : e.reduce(
                    (e, t) => e.concat(t instanceof sQ ? t : t.members),
                    [],
                  ),
            );
        }
      }
      forEachSet(e) {
        for (let t = 0; t < this.members.length; t++)
          this.members[t].forEachSet(e);
      }
    }
    function s1(e, t, n, r, i, s, a) {
      let o = e.slice();
      for (let e = 0, t = s; e < n.maps.length; e++) {
        let r = 0;
        (n.maps[e].forEach((e, n, i, s) => {
          let a = s - i - (n - e);
          for (let i = 0; i < o.length; i += 3) {
            let s = o[i + 1];
            if (s < 0 || e > s + t - r) continue;
            let l = o[i] + t - r;
            n >= l
              ? (o[i + 1] = e <= l ? -2 : -1)
              : e >= t && a && ((o[i] += a), (o[i + 1] += a));
          }
          r += a;
        }),
          (t = n.maps[e].map(t, -1)));
      }
      let l = !1;
      for (let t = 0; t < o.length; t += 3)
        if (o[t + 1] < 0) {
          if (-2 == o[t + 1]) {
            ((l = !0), (o[t + 1] = -1));
            continue;
          }
          let c = n.map(e[t] + s),
            u = c - i;
          if (u < 0 || u >= r.content.size) {
            l = !0;
            continue;
          }
          let d = n.map(e[t + 1] + s, -1) - i,
            { index: h, offset: p } = r.content.findIndex(u),
            m = r.maybeChild(h);
          if (m && p == u && p + m.nodeSize == d) {
            let r = o[t + 2].mapInner(n, m, c + 1, e[t] + s + 1, a);
            r != sX
              ? ((o[t] = u), (o[t + 1] = d), (o[t + 2] = r))
              : ((o[t + 1] = -2), (l = !0));
          } else l = !0;
        }
      if (l) {
        let l = s9(s5(o, e, t, n, i, s, a), r, 0, a);
        t = l.local;
        for (let e = 0; e < o.length; e += 3)
          o[e + 1] < 0 && (o.splice(e, 3), (e -= 3));
        for (let e = 0, t = 0; e < l.children.length; e += 3) {
          let n = l.children[e];
          for (; t < o.length && o[t] < n; ) t += 3;
          o.splice(t, 0, l.children[e], l.children[e + 1], l.children[e + 2]);
        }
      }
      return new sQ(t.sort(s7), o);
    }
    function s2(e, t) {
      if (!t || !e.length) return e;
      let n = [];
      for (let r = 0; r < e.length; r++) {
        let i = e[r];
        n.push(new sK(i.from + t, i.to + t, i.type));
      }
      return n;
    }
    function s5(e, t, n, r, i, s, a) {
      function o(e, t) {
        for (let s = 0; s < e.local.length; s++) {
          let o = e.local[s].map(r, i, t);
          o ? n.push(o) : a.onRemove && a.onRemove(e.local[s].spec);
        }
        for (let n = 0; n < e.children.length; n += 3)
          o(e.children[n + 2], e.children[n] + t + 1);
      }
      for (let n = 0; n < e.length; n += 3)
        -1 == e[n + 1] && o(e[n + 2], t[n] + s + 1);
      return n;
    }
    function s3(e, t, n) {
      if (t.isLeaf) return null;
      let r = n + t.nodeSize,
        i = null;
      for (let t = 0, s; t < e.length; t++)
        (s = e[t]) &&
          s.from > n &&
          s.to < r &&
          ((i || (i = [])).push(s), (e[t] = null));
      return i;
    }
    function s4(e) {
      let t = [];
      for (let n = 0; n < e.length; n++) null != e[n] && t.push(e[n]);
      return t;
    }
    function s9(e, t, n, r) {
      let i = [],
        s = !1;
      t.forEach((t, a) => {
        let o = s3(e, t, a + n);
        if (o) {
          s = !0;
          let e = s9(o, t, n + a + 1, r);
          e != sX && i.push(a, a + t.nodeSize, e);
        }
      });
      let a = s2(s ? s4(e) : e, -n).sort(s7);
      for (let e = 0; e < a.length; e++)
        a[e].type.valid(t, a[e]) ||
          (r.onRemove && r.onRemove(a[e].spec), a.splice(e--, 1));
      return a.length || i.length ? new sQ(a, i) : sX;
    }
    function s7(e, t) {
      return e.from - t.from || e.to - t.to;
    }
    function s6(e) {
      let t = e;
      for (let n = 0; n < t.length - 1; n++) {
        let r = t[n];
        if (r.from != r.to)
          for (let i = n + 1; i < t.length; i++) {
            let s = t[i];
            if (s.from == r.from) {
              s.to != r.to &&
                (t == e && (t = e.slice()),
                (t[i] = s.copy(s.from, r.to)),
                s8(t, i + 1, s.copy(r.to, s.to)));
              continue;
            }
            s.from < r.to &&
              (t == e && (t = e.slice()),
              (t[n] = r.copy(r.from, s.from)),
              s8(t, i, r.copy(s.from, r.to)));
            break;
          }
      }
      return t;
    }
    function s8(e, t, n) {
      for (; t < e.length && s7(n, e[t]) > 0; ) t++;
      e.splice(t, 0, n);
    }
    function ae(e) {
      let t = [];
      return (
        e.someProp("decorations", (n) => {
          let r = n(e.state);
          r && r != sX && t.push(r);
        }),
        e.cursorWrapper &&
          t.push(sQ.create(e.state.doc, [e.cursorWrapper.deco])),
        s0.from(t)
      );
    }
    let at = {
        childList: !0,
        characterData: !0,
        characterDataOldValue: !0,
        attributes: !0,
        attributeOldValue: !0,
        subtree: !0,
      },
      an = ra && ro <= 11;
    class ar {
      constructor() {
        ((this.anchorNode = null),
          (this.anchorOffset = 0),
          (this.focusNode = null),
          (this.focusOffset = 0));
      }
      set(e) {
        ((this.anchorNode = e.anchorNode),
          (this.anchorOffset = e.anchorOffset),
          (this.focusNode = e.focusNode),
          (this.focusOffset = e.focusOffset));
      }
      clear() {
        this.anchorNode = this.focusNode = null;
      }
      eq(e) {
        return (
          e.anchorNode == this.anchorNode &&
          e.anchorOffset == this.anchorOffset &&
          e.focusNode == this.focusNode &&
          e.focusOffset == this.focusOffset
        );
      }
    }
    class ai {
      constructor(e, t) {
        ((this.view = e),
          (this.handleDOMChange = t),
          (this.queue = []),
          (this.flushingSoon = -1),
          (this.observer = null),
          (this.currentSelection = new ar()),
          (this.onCharData = null),
          (this.suppressingSelectionUpdates = !1),
          (this.lastChangedTextNode = null),
          (this.observer =
            window.MutationObserver &&
            new window.MutationObserver((e) => {
              for (let t = 0; t < e.length; t++) this.queue.push(e[t]);
              ra &&
              ro <= 11 &&
              e.some(
                (e) =>
                  ("childList" == e.type && e.removedNodes.length) ||
                  ("characterData" == e.type &&
                    e.oldValue.length > e.target.nodeValue.length),
              )
                ? this.flushSoon()
                : this.flush();
            })),
          an &&
            (this.onCharData = (e) => {
              (this.queue.push({
                target: e.target,
                type: "characterData",
                oldValue: e.prevValue,
              }),
                this.flushSoon());
            }),
          (this.onSelectionChange = this.onSelectionChange.bind(this)));
      }
      flushSoon() {
        this.flushingSoon < 0 &&
          (this.flushingSoon = window.setTimeout(() => {
            ((this.flushingSoon = -1), this.flush());
          }, 20));
      }
      forceFlush() {
        this.flushingSoon > -1 &&
          (window.clearTimeout(this.flushingSoon),
          (this.flushingSoon = -1),
          this.flush());
      }
      start() {
        (this.observer &&
          (this.observer.takeRecords(),
          this.observer.observe(this.view.dom, at)),
          this.onCharData &&
            this.view.dom.addEventListener(
              "DOMCharacterDataModified",
              this.onCharData,
            ),
          this.connectSelection());
      }
      stop() {
        if (this.observer) {
          let e = this.observer.takeRecords();
          if (e.length) {
            for (let t = 0; t < e.length; t++) this.queue.push(e[t]);
            window.setTimeout(() => this.flush(), 20);
          }
          this.observer.disconnect();
        }
        (this.onCharData &&
          this.view.dom.removeEventListener(
            "DOMCharacterDataModified",
            this.onCharData,
          ),
          this.disconnectSelection());
      }
      connectSelection() {
        this.view.dom.ownerDocument.addEventListener(
          "selectionchange",
          this.onSelectionChange,
        );
      }
      disconnectSelection() {
        this.view.dom.ownerDocument.removeEventListener(
          "selectionchange",
          this.onSelectionChange,
        );
      }
      suppressSelectionUpdates() {
        ((this.suppressingSelectionUpdates = !0),
          setTimeout(() => (this.suppressingSelectionUpdates = !1), 50));
      }
      onSelectionChange() {
        if (iI(this.view)) {
          if (this.suppressingSelectionUpdates) return ib(this.view);
          if (ra && ro <= 11 && !this.view.state.selection.empty) {
            let e = this.view.domSelectionRange();
            if (
              e.focusNode &&
              nQ(e.focusNode, e.focusOffset, e.anchorNode, e.anchorOffset)
            )
              return this.flushSoon();
          }
          this.flush();
        }
      }
      setCurSelection() {
        this.currentSelection.set(this.view.domSelectionRange());
      }
      ignoreSelectionChange(e) {
        if (!e.focusNode) return !0;
        let t = new Set(),
          n;
        for (let n = e.focusNode; n; n = nZ(n)) t.add(n);
        for (let r = e.anchorNode; r; r = nZ(r))
          if (t.has(r)) {
            n = r;
            break;
          }
        let r = n && this.view.docView.nearestDesc(n);
        if (
          r &&
          r.ignoreMutation({
            type: "selection",
            target: 3 == n.nodeType ? n.parentNode : n,
          })
        )
          return (this.setCurSelection(), !0);
      }
      pendingRecords() {
        if (this.observer)
          for (let e of this.observer.takeRecords()) this.queue.push(e);
        return this.queue;
      }
      flush() {
        let { view: e } = this;
        if (!e.docView || this.flushingSoon > -1) return;
        let t = this.pendingRecords();
        t.length && (this.queue = []);
        let n = e.domSelectionRange(),
          r =
            !this.suppressingSelectionUpdates &&
            !this.currentSelection.eq(n) &&
            iI(e) &&
            !this.ignoreSelectionChange(n),
          i = -1,
          s = -1,
          a = !1,
          o = [];
        if (e.editable)
          for (let e = 0; e < t.length; e++) {
            let n = this.registerMutation(t[e], o);
            n &&
              ((i = i < 0 ? n.from : Math.min(n.from, i)),
              (s = s < 0 ? n.to : Math.max(n.to, s)),
              n.typeOver && (a = !0));
          }
        if (rl && o.length) {
          let t = o.filter((e) => "BR" == e.nodeName);
          if (2 == t.length) {
            let [e, n] = t;
            e.parentNode && e.parentNode.parentNode == n.parentNode
              ? n.remove()
              : e.remove();
          } else {
            let { focusNode: n } = this.currentSelection;
            for (let r of t) {
              let t = r.parentNode;
              t && "LI" == t.nodeName && (!n || au(e, n) != t) && r.remove();
            }
          }
        }
        let l = null;
        i < 0 &&
        r &&
        e.input.lastFocus > Date.now() - 200 &&
        Math.max(e.input.lastTouch, e.input.lastClick.time) <
          Date.now() - 300 &&
        n9(n) &&
        (l = iv(e)) &&
        l.eq(tH.near(e.state.doc.resolve(0), 1))
          ? ((e.input.lastFocus = 0),
            ib(e),
            this.currentSelection.set(n),
            e.scrollToSelection())
          : (i > -1 || r) &&
            (i > -1 && (e.docView.markDirty(i, s), ao(e)),
            this.handleDOMChange(i, s, a, o),
            e.docView && e.docView.dirty
              ? e.updateState(e.state)
              : this.currentSelection.eq(n) || ib(e),
            this.currentSelection.set(n));
      }
      registerMutation(e, t) {
        if (t.indexOf(e.target) > -1) return null;
        let n = this.view.docView.nearestDesc(e.target);
        if (
          ("attributes" == e.type &&
            (n == this.view.docView ||
              "contenteditable" == e.attributeName ||
              ("style" == e.attributeName &&
                !e.oldValue &&
                !e.target.getAttribute("style")))) ||
          !n ||
          n.ignoreMutation(e)
        )
          return null;
        if ("childList" == e.type) {
          for (let n = 0; n < e.addedNodes.length; n++) {
            let r = e.addedNodes[n];
            (t.push(r), 3 == r.nodeType && (this.lastChangedTextNode = r));
          }
          if (
            n.contentDOM &&
            n.contentDOM != n.dom &&
            !n.contentDOM.contains(e.target)
          )
            return { from: n.posBefore, to: n.posAfter };
          let r = e.previousSibling,
            i = e.nextSibling;
          if (ra && ro <= 11 && e.addedNodes.length)
            for (let t = 0; t < e.addedNodes.length; t++) {
              let { previousSibling: n, nextSibling: s } = e.addedNodes[t];
              ((!n || 0 > Array.prototype.indexOf.call(e.addedNodes, n)) &&
                (r = n),
                (!s || 0 > Array.prototype.indexOf.call(e.addedNodes, s)) &&
                  (i = s));
            }
          let s = r && r.parentNode == e.target ? nq(r) + 1 : 0,
            a = n.localPosFromDOM(e.target, s, -1),
            o =
              i && i.parentNode == e.target
                ? nq(i)
                : e.target.childNodes.length;
          return { from: a, to: n.localPosFromDOM(e.target, o, 1) };
        }
        return "attributes" == e.type
          ? { from: n.posAtStart - n.border, to: n.posAtEnd + n.border }
          : ((this.lastChangedTextNode = e.target),
            {
              from: n.posAtStart,
              to: n.posAtEnd,
              typeOver: e.target.nodeValue == e.oldValue,
            });
      }
    }
    let as = new WeakMap(),
      aa = !1;
    function ao(e) {
      !as.has(e) &&
        (as.set(e, null),
        -1 !==
          ["normal", "nowrap", "pre-line"].indexOf(
            getComputedStyle(e.dom).whiteSpace,
          )) &&
        ((e.requiresGeckoHackNode = rl),
        aa ||
          (console.warn(
            "ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.",
          ),
          (aa = !0)));
    }
    function al(e, t) {
      let n = t.startContainer,
        r = t.startOffset,
        i = t.endContainer,
        s = t.endOffset,
        a = e.domAtPos(e.state.selection.anchor);
      return (
        nQ(a.node, a.offset, i, s) && ([n, r, i, s] = [i, s, n, r]),
        { anchorNode: n, anchorOffset: r, focusNode: i, focusOffset: s }
      );
    }
    function ac(e, t) {
      let n;
      if (t.getComposedRanges) {
        let n = t.getComposedRanges(e.root)[0];
        if (n) return al(e, n);
      }
      function r(e) {
        (e.preventDefault(),
          e.stopImmediatePropagation(),
          (n = e.getTargetRanges()[0]));
      }
      return (
        e.dom.addEventListener("beforeinput", r, !0),
        document.execCommand("indent"),
        e.dom.removeEventListener("beforeinput", r, !0),
        n ? al(e, n) : null
      );
    }
    function au(e, t) {
      for (let n = t.parentNode; n && n != e.dom; n = n.parentNode) {
        let t = e.docView.nearestDesc(n, !0);
        if (t && t.node.isBlock) return n;
      }
      return null;
    }
    function ad(e, t, n) {
      let r,
        {
          node: i,
          fromOffset: s,
          toOffset: a,
          from: o,
          to: l,
        } = e.docView.parseRange(t, n),
        c = e.domSelectionRange(),
        u = c.anchorNode;
      if (
        (u &&
          e.dom.contains(1 == u.nodeType ? u : u.parentNode) &&
          ((r = [{ node: u, offset: c.anchorOffset }]),
          n9(c) || r.push({ node: c.focusNode, offset: c.focusOffset })),
        ru && 8 === e.input.lastKeyCode)
      )
        for (let e = a; e > s; e--) {
          let t = i.childNodes[e - 1],
            n = t.pmViewDesc;
          if ("BR" == t.nodeName && !n) {
            a = e;
            break;
          }
          if (!n || n.size) break;
        }
      let d = e.state.doc,
        h = e.someProp("domParser") || ex.fromSchema(e.state.schema),
        p = d.resolve(o),
        m = null,
        f = h.parse(i, {
          topNode: p.parent,
          topMatch: p.parent.contentMatchAt(p.index()),
          topOpen: !0,
          from: s,
          to: a,
          preserveWhitespace: "pre" != p.parent.type.whitespace || "full",
          findPositions: r,
          ruleFromNode: ah,
          context: p,
        });
      if (r && null != r[0].pos) {
        let e = r[0].pos,
          t = r[1] && r[1].pos;
        (null == t && (t = e), (m = { anchor: e + o, head: t + o }));
      }
      return { doc: f, sel: m, from: o, to: l };
    }
    function ah(e) {
      let t = e.pmViewDesc;
      if (t) return t.parseRule();
      if ("BR" == e.nodeName && e.parentNode) {
        if (rh && /^(ul|ol)$/i.test(e.parentNode.nodeName)) {
          let e = document.createElement("div");
          return (e.appendChild(document.createElement("li")), { skip: e });
        } else if (
          e.parentNode.lastChild == e ||
          (rh && /^(tr|table)$/i.test(e.parentNode.nodeName))
        )
          return { ignore: !0 };
      } else if ("IMG" == e.nodeName && e.getAttribute("mark-placeholder"))
        return { ignore: !0 };
      return null;
    }
    let ap =
      /^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;
    function am(e, t, n, r, i) {
      let s,
        a,
        o,
        l,
        c =
          e.input.compositionPendingChanges ||
          (e.composing ? e.input.compositionID : 0);
      if (((e.input.compositionPendingChanges = 0), t < 0)) {
        let t =
            e.input.lastSelectionTime > Date.now() - 50
              ? e.input.lastSelectionOrigin
              : null,
          n = iv(e, t);
        if (n && !e.state.selection.eq(n)) {
          if (
            ru &&
            rg &&
            13 === e.input.lastKeyCode &&
            Date.now() - 100 < e.input.lastKeyCodeTime &&
            e.someProp("handleKeyDown", (t) => t(e, n7(13, "Enter")))
          )
            return;
          let r = e.state.tr.setSelection(n);
          ("pointer" == t
            ? r.setMeta("pointer", !0)
            : "key" == t && r.scrollIntoView(),
            c && r.setMeta("composition", c),
            e.dispatch(r));
        }
        return;
      }
      let u = e.state.doc.resolve(t),
        d = u.sharedDepth(n);
      ((t = u.before(d + 1)), (n = e.state.doc.resolve(n).after(d + 1)));
      let h = e.state.selection,
        p = ad(e, t, n),
        m = e.state.doc,
        f = m.slice(p.from, p.to);
      (8 === e.input.lastKeyCode && Date.now() - 100 < e.input.lastKeyCodeTime
        ? ((s = e.state.selection.to), (a = "end"))
        : ((s = e.state.selection.from), (a = "start")),
        (e.input.lastKeyCode = null));
      let g = ay(f.content, p.doc.content, p.from, s, a);
      if (
        (g && e.input.domChangeCount++,
        ((rp && e.input.lastIOSEnter > Date.now() - 225) || rg) &&
          i.some((e) => 1 == e.nodeType && !ap.test(e.nodeName)) &&
          (!g || g.endA >= g.endB) &&
          e.someProp("handleKeyDown", (t) => t(e, n7(13, "Enter"))))
      ) {
        e.input.lastIOSEnter = 0;
        return;
      }
      if (!g)
        if (
          r &&
          h instanceof tW &&
          !h.empty &&
          h.$head.sameParent(h.$anchor) &&
          !e.composing &&
          !(p.sel && p.sel.anchor != p.sel.head)
        )
          g = { start: h.from, endA: h.to, endB: h.to };
        else {
          if (p.sel) {
            let t = af(e, e.state.doc, p.sel);
            if (t && !t.eq(e.state.selection)) {
              let n = e.state.tr.setSelection(t);
              (c && n.setMeta("composition", c), e.dispatch(n));
            }
          }
          return;
        }
      (e.state.selection.from < e.state.selection.to &&
        g.start == g.endB &&
        e.state.selection instanceof tW &&
        (g.start > e.state.selection.from &&
        g.start <= e.state.selection.from + 2 &&
        e.state.selection.from >= p.from
          ? (g.start = e.state.selection.from)
          : g.endA < e.state.selection.to &&
            g.endA >= e.state.selection.to - 2 &&
            e.state.selection.to <= p.to &&
            ((g.endB += e.state.selection.to - g.endA),
            (g.endA = e.state.selection.to))),
        ra &&
          ro <= 11 &&
          g.endB == g.start + 1 &&
          g.endA == g.start &&
          g.start > p.from &&
          " " ==
            p.doc.textBetween(g.start - p.from - 1, g.start - p.from + 1) &&
          (g.start--, g.endA--, g.endB--));
      let x = p.doc.resolveNoCache(g.start - p.from),
        v = p.doc.resolveNoCache(g.endB - p.from),
        y = m.resolve(g.start),
        b = x.sameParent(v) && x.parent.inlineContent && y.end() >= g.endA;
      if (
        ((rp &&
          e.input.lastIOSEnter > Date.now() - 225 &&
          (!b || i.some((e) => "DIV" == e.nodeName || "P" == e.nodeName))) ||
          (!b &&
            x.pos < p.doc.content.size &&
            (!x.sameParent(v) || !x.parent.inlineContent) &&
            !/\S/.test(p.doc.textBetween(x.pos, v.pos, "", "")) &&
            (o = tH.findFrom(p.doc.resolve(x.pos + 1), 1, !0)) &&
            o.head > x.pos)) &&
        e.someProp("handleKeyDown", (t) => t(e, n7(13, "Enter")))
      ) {
        e.input.lastIOSEnter = 0;
        return;
      }
      if (
        e.state.selection.anchor > g.start &&
        ax(m, g.start, g.endA, x, v) &&
        e.someProp("handleKeyDown", (t) => t(e, n7(8, "Backspace")))
      ) {
        rg && ru && e.domObserver.suppressSelectionUpdates();
        return;
      }
      (ru && g.endB == g.start && (e.input.lastChromeDelete = Date.now()),
        rg &&
          !b &&
          x.start() != v.start() &&
          0 == v.parentOffset &&
          x.depth == v.depth &&
          p.sel &&
          p.sel.anchor == p.sel.head &&
          p.sel.head == g.endA &&
          ((g.endB -= 2),
          (v = p.doc.resolveNoCache(g.endB - p.from)),
          setTimeout(() => {
            e.someProp("handleKeyDown", function (t) {
              return t(e, n7(13, "Enter"));
            });
          }, 20)));
      let j = g.start,
        w = g.endA,
        C = (t) => {
          let n =
            t ||
            e.state.tr.replace(
              j,
              w,
              p.doc.slice(g.start - p.from, g.endB - p.from),
            );
          if (p.sel) {
            let t = af(e, n.doc, p.sel);
            t &&
              !(
                (ru &&
                  e.composing &&
                  t.empty &&
                  (g.start != g.endB ||
                    e.input.lastChromeDelete < Date.now() - 100) &&
                  (t.head == j || t.head == n.mapping.map(w) - 1)) ||
                (ra && t.empty && t.head == j)
              ) &&
              n.setSelection(t);
          }
          return (c && n.setMeta("composition", c), n.scrollIntoView());
        };
      if (b) {
        if (x.pos == v.pos) {
          ra &&
            ro <= 11 &&
            0 == x.parentOffset &&
            (e.domObserver.suppressSelectionUpdates(),
            setTimeout(() => ib(e), 20));
          let t = C(e.state.tr.delete(j, w)),
            n = m.resolve(g.start).marksAcross(m.resolve(g.endA));
          (n && t.ensureMarks(n), e.dispatch(t));
        } else if (
          g.endA == g.endB &&
          (l = ag(
            x.parent.content.cut(x.parentOffset, v.parentOffset),
            y.parent.content.cut(y.parentOffset, g.endA - y.start()),
          ))
        ) {
          let t = C(e.state.tr);
          ("add" == l.type
            ? t.addMark(j, w, l.mark)
            : t.removeMark(j, w, l.mark),
            e.dispatch(t));
        } else if (
          x.parent.child(x.index()).isText &&
          x.index() == v.index() - !v.textOffset
        ) {
          let t = x.parent.textBetween(x.parentOffset, v.parentOffset),
            n = () => C(e.state.tr.insertText(t, j, w));
          e.someProp("handleTextInput", (r) => r(e, j, w, t, n)) ||
            e.dispatch(n());
        }
      } else e.dispatch(C());
    }
    function af(e, t, n) {
      return Math.max(n.anchor, n.head) > t.content.size
        ? null
        : iD(e, t.resolve(n.anchor), t.resolve(n.head));
    }
    function ag(e, t) {
      let n = e.firstChild.marks,
        r = t.firstChild.marks,
        i = n,
        s = r,
        a,
        o,
        l;
      for (let e = 0; e < r.length; e++) i = r[e].removeFromSet(i);
      for (let e = 0; e < n.length; e++) s = n[e].removeFromSet(s);
      if (1 == i.length && 0 == s.length)
        ((o = i[0]), (a = "add"), (l = (e) => e.mark(o.addToSet(e.marks))));
      else {
        if (0 != i.length || 1 != s.length) return null;
        ((o = s[0]),
          (a = "remove"),
          (l = (e) => e.mark(o.removeFromSet(e.marks))));
      }
      let c = [];
      for (let e = 0; e < t.childCount; e++) c.push(l(t.child(e)));
      if (x.from(c).eq(e)) return { mark: o, type: a };
    }
    function ax(e, t, n, r, i) {
      if (n - t <= i.pos - r.pos || av(r, !0, !1) < i.pos) return !1;
      let s = e.resolve(t);
      if (!r.parent.isTextblock) {
        let e = s.nodeAfter;
        return null != e && n == t + e.nodeSize;
      }
      if (s.parentOffset < s.parent.content.size || !s.parent.isTextblock)
        return !1;
      let a = e.resolve(av(s, !0, !0));
      return (
        !(!a.parent.isTextblock || a.pos > n || av(a, !0, !1) < n) &&
        r.parent.content.cut(r.parentOffset).eq(a.parent.content)
      );
    }
    function av(e, t, n) {
      let r = e.depth,
        i = t ? e.end() : e.pos;
      for (; r > 0 && (t || e.indexAfter(r) == e.node(r).childCount); )
        (r--, i++, (t = !1));
      if (n) {
        let t = e.node(r).maybeChild(e.indexAfter(r));
        for (; t && !t.isLeaf; ) ((t = t.firstChild), i++);
      }
      return i;
    }
    function ay(e, t, n, r, i) {
      let s = e.findDiffStart(t, n);
      if (null == s) return null;
      let { a: a, b: o } = e.findDiffEnd(t, n + e.size, n + t.size);
      if ("end" == i) {
        let e = Math.max(0, s - Math.min(a, o));
        r -= a + e - s;
      }
      if (a < s && e.size < t.size) {
        let e = r <= s && r >= a ? s - r : 0;
        ((s -= e) &&
          s < t.size &&
          ab(t.textBetween(s - 1, s + 1)) &&
          (s += e ? 1 : -1),
          (o = s + (o - a)),
          (a = s));
      } else if (o < s) {
        let t = r <= s && r >= o ? s - r : 0;
        ((s -= t) &&
          s < e.size &&
          ab(e.textBetween(s - 1, s + 1)) &&
          (s += t ? 1 : -1),
          (a = s + (a - o)),
          (o = s));
      }
      return { start: s, endA: a, endB: o };
    }
    function ab(e) {
      if (2 != e.length) return !1;
      let t = e.charCodeAt(0),
        n = e.charCodeAt(1);
      return t >= 56320 && t <= 57343 && n >= 55296 && n <= 56319;
    }
    class aj {
      constructor(e, t) {
        ((this._root = null),
          (this.focused = !1),
          (this.trackWrites = null),
          (this.mounted = !1),
          (this.markCursor = null),
          (this.cursorWrapper = null),
          (this.lastSelectedViewDesc = void 0),
          (this.input = new sl()),
          (this.prevDirectPlugins = []),
          (this.pluginViews = []),
          (this.requiresGeckoHackNode = !1),
          (this.dragging = null),
          (this._props = t),
          (this.state = t.state),
          (this.directPlugins = t.plugins || []),
          this.directPlugins.forEach(aA),
          (this.dispatch = this.dispatch.bind(this)),
          (this.dom = (e && e.mount) || document.createElement("div")),
          e &&
            (e.appendChild
              ? e.appendChild(this.dom)
              : "function" == typeof e
                ? e(this.dom)
                : e.mount && (this.mounted = !0)),
          (this.editable = ak(this)),
          aC(this),
          (this.nodeViews = aN(this)),
          (this.docView = r9(
            this.state.doc,
            aw(this),
            ae(this),
            this.dom,
            this,
          )),
          (this.domObserver = new ai(this, (e, t, n, r) =>
            am(this, e, t, n, r),
          )),
          this.domObserver.start(),
          sc(this),
          this.updatePluginViews());
      }
      get composing() {
        return this.input.composing;
      }
      get props() {
        if (this._props.state != this.state) {
          let e = this._props;
          for (let t in ((this._props = {}), e)) this._props[t] = e[t];
          this._props.state = this.state;
        }
        return this._props;
      }
      update(e) {
        e.handleDOMEvents != this._props.handleDOMEvents && sh(this);
        let t = this._props;
        ((this._props = e),
          e.plugins &&
            (e.plugins.forEach(aA), (this.directPlugins = e.plugins)),
          this.updateStateInner(e.state, t));
      }
      setProps(e) {
        let t = {};
        for (let e in this._props) t[e] = this._props[e];
        for (let n in ((t.state = this.state), e)) t[n] = e[n];
        this.update(t);
      }
      updateState(e) {
        this.updateStateInner(e, this._props);
      }
      updateStateInner(e, t) {
        var n;
        let r = this.state,
          i = !1,
          s = !1;
        (e.storedMarks && this.composing && (sT(this), (s = !0)),
          (this.state = e));
        let a = r.plugins != e.plugins || this._props.plugins != t.plugins;
        if (
          a ||
          this._props.plugins != t.plugins ||
          this._props.nodeViews != t.nodeViews
        ) {
          let e = aN(this);
          aE(e, this.nodeViews) && ((this.nodeViews = e), (i = !0));
        }
        ((a || t.handleDOMEvents != this._props.handleDOMEvents) && sh(this),
          (this.editable = ak(this)),
          aC(this));
        let o = ae(this),
          l = aw(this),
          c =
            r.plugins == e.plugins || r.doc.eq(e.doc)
              ? e.scrollToSelection > r.scrollToSelection
                ? "to selection"
                : "preserve"
              : "reset",
          u = i || !this.docView.matchesNode(e.doc, l, o);
        (u || !e.selection.eq(r.selection)) && (s = !0);
        let d =
          "preserve" == c &&
          s &&
          null == this.dom.style.overflowAnchor &&
          rC(this);
        if (s) {
          this.domObserver.stop();
          let t =
            u &&
            (ra || ru) &&
            !this.composing &&
            !r.selection.empty &&
            !e.selection.empty &&
            aS(r.selection, e.selection);
          if (u) {
            let n = ru
              ? (this.trackWrites = this.domSelectionRange().focusNode)
              : null;
            (this.composing && (this.input.compositionNode = sL(this)),
              (i || !this.docView.update(e.doc, l, o, this)) &&
                (this.docView.updateOuterDeco(l),
                this.docView.destroy(),
                (this.docView = r9(e.doc, l, o, this.dom, this))),
              n && !this.trackWrites && (t = !0));
          }
          (t ||
          !(
            this.input.mouseDown &&
            this.domObserver.currentSelection.eq(this.domSelectionRange()) &&
            iT(this)
          )
            ? ib(this, t)
            : (iE(this, e.selection), this.domObserver.setCurSelection()),
            this.domObserver.start());
        }
        (this.updatePluginViews(r),
          (null == (n = this.dragging) ? void 0 : n.node) &&
            !r.doc.eq(e.doc) &&
            this.updateDraggedNode(this.dragging, r),
          "reset" == c
            ? (this.dom.scrollTop = 0)
            : "to selection" == c
              ? this.scrollToSelection()
              : d && rS(d));
      }
      scrollToSelection() {
        let e = this.domSelectionRange().focusNode;
        if (e && this.dom.contains(1 == e.nodeType ? e : e.parentNode))
          if (this.someProp("handleScrollToSelection", (e) => e(this)));
          else if (this.state.selection instanceof tZ) {
            let t = this.docView.domAfterPos(this.state.selection.from);
            1 == t.nodeType && rw(this, t.getBoundingClientRect(), e);
          } else rw(this, this.coordsAtPos(this.state.selection.head, 1), e);
      }
      destroyPluginViews() {
        let e;
        for (; (e = this.pluginViews.pop()); ) e.destroy && e.destroy();
      }
      updatePluginViews(e) {
        if (
          e &&
          e.plugins == this.state.plugins &&
          this.directPlugins == this.prevDirectPlugins
        )
          for (let t = 0; t < this.pluginViews.length; t++) {
            let n = this.pluginViews[t];
            n.update && n.update(this, e);
          }
        else {
          ((this.prevDirectPlugins = this.directPlugins),
            this.destroyPluginViews());
          for (let e = 0; e < this.directPlugins.length; e++) {
            let t = this.directPlugins[e];
            t.spec.view && this.pluginViews.push(t.spec.view(this));
          }
          for (let e = 0; e < this.state.plugins.length; e++) {
            let t = this.state.plugins[e];
            t.spec.view && this.pluginViews.push(t.spec.view(this));
          }
        }
      }
      updateDraggedNode(e, t) {
        let n = e.node,
          r = -1;
        if (this.state.doc.nodeAt(n.from) == n.node) r = n.from;
        else {
          let e = n.from + (this.state.doc.content.size - t.doc.content.size);
          (e > 0 && this.state.doc.nodeAt(e)) == n.node && (r = e);
        }
        this.dragging = new sH(
          e.slice,
          e.move,
          r < 0 ? void 0 : tZ.create(this.state.doc, r),
        );
      }
      someProp(e, t) {
        let n = this._props && this._props[e],
          r;
        if (null != n && (r = t ? t(n) : n)) return r;
        for (let n = 0; n < this.directPlugins.length; n++) {
          let i = this.directPlugins[n].props[e];
          if (null != i && (r = t ? t(i) : i)) return r;
        }
        let i = this.state.plugins;
        if (i)
          for (let n = 0; n < i.length; n++) {
            let s = i[n].props[e];
            if (null != s && (r = t ? t(s) : s)) return r;
          }
      }
      hasFocus() {
        if (ra) {
          let e = this.root.activeElement;
          if (e == this.dom) return !0;
          if (!e || !this.dom.contains(e)) return !1;
          for (; e && this.dom != e && this.dom.contains(e); ) {
            if ("false" == e.contentEditable) return !1;
            e = e.parentElement;
          }
          return !0;
        }
        return this.root.activeElement == this.dom;
      }
      focus() {
        (this.domObserver.stop(),
          this.editable && rA(this.dom),
          ib(this),
          this.domObserver.start());
      }
      get root() {
        let e = this._root;
        if (null == e) {
          for (let e = this.dom.parentNode; e; e = e.parentNode)
            if (9 == e.nodeType || (11 == e.nodeType && e.host))
              return (
                e.getSelection ||
                  (Object.getPrototypeOf(e).getSelection = () =>
                    e.ownerDocument.getSelection()),
                (this._root = e)
              );
        }
        return e || document;
      }
      updateRoot() {
        this._root = null;
      }
      posAtCoords(e) {
        return rF(this, e);
      }
      coordsAtPos(e, t = 1) {
        return rV(this, e, t);
      }
      domAtPos(e, t = 0) {
        return this.docView.domFromPos(e, t);
      }
      nodeDOM(e) {
        let t = this.docView.descAt(e);
        return t ? t.nodeDOM : null;
      }
      posAtDOM(e, t, n = -1) {
        let r = this.docView.posFromDOM(e, t, n);
        if (null == r) throw RangeError("DOM position not inside the editor");
        return r;
      }
      endOfTextblock(e, t) {
        return rY(this, t || this.state, e);
      }
      pasteHTML(e, t) {
        return sV(this, "", e, !1, t || new ClipboardEvent("paste"));
      }
      pasteText(e, t) {
        return sV(this, e, null, !0, t || new ClipboardEvent("paste"));
      }
      serializeForClipboard(e) {
        return iQ(this, e);
      }
      destroy() {
        this.docView &&
          (sd(this),
          this.destroyPluginViews(),
          this.mounted
            ? (this.docView.update(this.state.doc, [], ae(this), this),
              (this.dom.textContent = ""))
            : this.dom.parentNode && this.dom.parentNode.removeChild(this.dom),
          this.docView.destroy(),
          (this.docView = null),
          nJ());
      }
      get isDestroyed() {
        return null == this.docView;
      }
      dispatchEvent(e) {
        return sf(this, e);
      }
      domSelectionRange() {
        let e = this.domSelection();
        return e
          ? (rh &&
              11 === this.root.nodeType &&
              n6(this.dom.ownerDocument) == this.dom &&
              ac(this, e)) ||
              e
          : {
              focusNode: null,
              focusOffset: 0,
              anchorNode: null,
              anchorOffset: 0,
            };
      }
      domSelection() {
        return this.root.getSelection();
      }
    }
    function aw(e) {
      let t = Object.create(null);
      return (
        (t.class = "ProseMirror"),
        (t.contenteditable = String(e.editable)),
        e.someProp("attributes", (n) => {
          if (("function" == typeof n && (n = n(e.state)), n))
            for (let e in n)
              "class" == e
                ? (t.class += " " + n[e])
                : "style" == e
                  ? (t.style = (t.style ? t.style + ";" : "") + n[e])
                  : t[e] ||
                    "contenteditable" == e ||
                    "nodeName" == e ||
                    (t[e] = String(n[e]));
        }),
        t.translate || (t.translate = "no"),
        [sK.node(0, e.state.doc.content.size, t)]
      );
    }
    function aC(e) {
      if (e.markCursor) {
        let t = document.createElement("img");
        ((t.className = "ProseMirror-separator"),
          t.setAttribute("mark-placeholder", "true"),
          t.setAttribute("alt", ""),
          (e.cursorWrapper = {
            dom: t,
            deco: sK.widget(e.state.selection.from, t, {
              raw: !0,
              marks: e.markCursor,
            }),
          }));
      } else e.cursorWrapper = null;
    }
    function ak(e) {
      return !e.someProp("editable", (t) => !1 === t(e.state));
    }
    function aS(e, t) {
      let n = Math.min(
        e.$anchor.sharedDepth(e.head),
        t.$anchor.sharedDepth(t.head),
      );
      return e.$anchor.start(n) != t.$anchor.start(n);
    }
    function aN(e) {
      let t = Object.create(null);
      function n(e) {
        for (let n in e)
          Object.prototype.hasOwnProperty.call(t, n) || (t[n] = e[n]);
      }
      return (e.someProp("nodeViews", n), e.someProp("markViews", n), t);
    }
    function aE(e, t) {
      let n = 0,
        r = 0;
      for (let r in e) {
        if (e[r] != t[r]) return !0;
        n++;
      }
      for (let e in t) r++;
      return n != r;
    }
    function aA(e) {
      if (e.spec.state || e.spec.filterTransaction || e.spec.appendTransaction)
        throw RangeError(
          "Plugins passed directly to the view must not have a state component",
        );
    }
    ((aj.prototype.dispatch = function (e) {
      let t = this._props.dispatchTransaction;
      t ? t.call(this, e) : this.updateState(this.state.apply(e));
    }),
      e.s(
        [
          "Decoration",
          () => sK,
          "DecorationSet",
          () => sQ,
          "EditorView",
          () => aj,
        ],
        445231,
      ));
    for (
      var aD = {
          8: "Backspace",
          9: "Tab",
          10: "Enter",
          12: "NumLock",
          13: "Enter",
          16: "Shift",
          17: "Control",
          18: "Alt",
          20: "CapsLock",
          27: "Escape",
          32: " ",
          33: "PageUp",
          34: "PageDown",
          35: "End",
          36: "Home",
          37: "ArrowLeft",
          38: "ArrowUp",
          39: "ArrowRight",
          40: "ArrowDown",
          44: "PrintScreen",
          45: "Insert",
          46: "Delete",
          59: ";",
          61: "=",
          91: "Meta",
          92: "Meta",
          106: "*",
          107: "+",
          108: ",",
          109: "-",
          110: ".",
          111: "/",
          144: "NumLock",
          145: "ScrollLock",
          160: "Shift",
          161: "Shift",
          162: "Control",
          163: "Control",
          164: "Alt",
          165: "Alt",
          173: "-",
          186: ";",
          187: "=",
          188: ",",
          189: "-",
          190: ".",
          191: "/",
          192: "`",
          219: "[",
          220: "\\",
          221: "]",
          222: "'",
        },
        aI = {
          48: ")",
          49: "!",
          50: "@",
          51: "#",
          52: "$",
          53: "%",
          54: "^",
          55: "&",
          56: "*",
          57: "(",
          59: ":",
          61: "+",
          173: "_",
          186: ":",
          187: "+",
          188: "<",
          189: "_",
          190: ">",
          191: "?",
          192: "~",
          219: "{",
          220: "|",
          221: "}",
          222: '"',
        },
        aM = "undefined" != typeof navigator && /Mac/.test(navigator.platform),
        aT =
          "undefined" != typeof navigator &&
          /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(
            navigator.userAgent,
          ),
        aL = 0;
      aL < 10;
      aL++
    )
      aD[48 + aL] = aD[96 + aL] = String(aL);
    for (var aL = 1; aL <= 24; aL++) aD[aL + 111] = "F" + aL;
    for (var aL = 65; aL <= 90; aL++)
      ((aD[aL] = String.fromCharCode(aL + 32)),
        (aI[aL] = String.fromCharCode(aL)));
    for (var aP in aD) aI.hasOwnProperty(aP) || (aI[aP] = aD[aP]);
    function aR(e) {
      var t =
        (!(
          (aM && e.metaKey && e.shiftKey && !e.ctrlKey && !e.altKey) ||
          (aT && e.shiftKey && e.key && 1 == e.key.length) ||
          "Unidentified" == e.key
        ) &&
          e.key) ||
        (e.shiftKey ? aI : aD)[e.keyCode] ||
        e.key ||
        "Unidentified";
      return (
        "Esc" == t && (t = "Escape"),
        "Del" == t && (t = "Delete"),
        "Left" == t && (t = "ArrowLeft"),
        "Up" == t && (t = "ArrowUp"),
        "Right" == t && (t = "ArrowRight"),
        "Down" == t && (t = "ArrowDown"),
        t
      );
    }
    let aF =
      "undefined" != typeof navigator &&
      /Mac|iP(hone|[oa]d)/.test(navigator.platform);
    function a_(e) {
      let t,
        n,
        r,
        i,
        s = e.split(/-(?!$)/),
        a = s[s.length - 1];
      "Space" == a && (a = " ");
      for (let e = 0; e < s.length - 1; e++) {
        let a = s[e];
        if (/^(cmd|meta|m)$/i.test(a)) i = !0;
        else if (/^a(lt)?$/i.test(a)) t = !0;
        else if (/^(c|ctrl|control)$/i.test(a)) n = !0;
        else if (/^s(hift)?$/i.test(a)) r = !0;
        else if (/^mod$/i.test(a)) aF ? (i = !0) : (n = !0);
        else throw Error("Unrecognized modifier name: " + a);
      }
      return (
        t && (a = "Alt-" + a),
        n && (a = "Ctrl-" + a),
        i && (a = "Meta-" + a),
        r && (a = "Shift-" + a),
        a
      );
    }
    function aO(e) {
      let t = Object.create(null);
      for (let n in e) t[a_(n)] = e[n];
      return t;
    }
    function aB(e, t, n = !0) {
      return (
        t.altKey && (e = "Alt-" + e),
        t.ctrlKey && (e = "Ctrl-" + e),
        t.metaKey && (e = "Meta-" + e),
        n && t.shiftKey && (e = "Shift-" + e),
        e
      );
    }
    function aV(e) {
      return new ne({ props: { handleKeyDown: az(e) } });
    }
    function az(e) {
      let t = aO(e);
      return function (e, n) {
        let r = aR(n),
          i,
          s = t[aB(r, n)];
        if (s && s(e.state, e.dispatch, e)) return !0;
        if (1 == r.length && " " != r) {
          if (n.shiftKey) {
            let i = t[aB(r, n, !1)];
            if (i && i(e.state, e.dispatch, e)) return !0;
          }
          if (
            (n.shiftKey || n.altKey || n.metaKey || r.charCodeAt(0) > 127) &&
            (i = aD[n.keyCode]) &&
            i != r
          ) {
            let r = t[aB(i, n)];
            if (r && r(e.state, e.dispatch, e)) return !0;
          }
        }
        return !1;
      };
    }
    e.s(["keydownHandler", () => az, "keymap", () => aV], 124251);
    var aH = Object.defineProperty,
      a$ = (e, t) => {
        for (var n in t) aH(e, n, { get: t[n], enumerable: !0 });
      };
    function aU(e) {
      let { state: t, transaction: n } = e,
        { selection: r } = n,
        { doc: i } = n,
        { storedMarks: s } = n;
      return {
        ...t,
        apply: t.apply.bind(t),
        applyTransaction: t.applyTransaction.bind(t),
        plugins: t.plugins,
        schema: t.schema,
        reconfigure: t.reconfigure.bind(t),
        toJSON: t.toJSON.bind(t),
        get storedMarks() {
          return s;
        },
        get selection() {
          return r;
        },
        get doc() {
          return i;
        },
        get tr() {
          return ((r = n.selection), (i = n.doc), (s = n.storedMarks), n);
        },
      };
    }
    var aG = class {
        constructor(e) {
          ((this.editor = e.editor),
            (this.rawCommands = this.editor.extensionManager.commands),
            (this.customState = e.state));
        }
        get hasCustomState() {
          return !!this.customState;
        }
        get state() {
          return this.customState || this.editor.state;
        }
        get commands() {
          let { rawCommands: e, editor: t, state: n } = this,
            { view: r } = t,
            { tr: i } = n,
            s = this.buildProps(i);
          return Object.fromEntries(
            Object.entries(e).map(([e, t]) => [
              e,
              (...e) => {
                let n = t(...e)(s);
                return (
                  i.getMeta("preventDispatch") ||
                    this.hasCustomState ||
                    r.dispatch(i),
                  n
                );
              },
            ]),
          );
        }
        get chain() {
          return () => this.createChain();
        }
        get can() {
          return () => this.createCan();
        }
        createChain(e, t = !0) {
          let { rawCommands: n, editor: r, state: i } = this,
            { view: s } = r,
            a = [],
            o = !!e,
            l = e || i.tr,
            c = () => (
              o ||
                !t ||
                l.getMeta("preventDispatch") ||
                this.hasCustomState ||
                s.dispatch(l),
              a.every((e) => !0 === e)
            ),
            u = {
              ...Object.fromEntries(
                Object.entries(n).map(([e, n]) => [
                  e,
                  (...e) => {
                    let r = this.buildProps(l, t),
                      i = n(...e)(r);
                    return (a.push(i), u);
                  },
                ]),
              ),
              run: c,
            };
          return u;
        }
        createCan(e) {
          let { rawCommands: t, state: n } = this,
            r = !1,
            i = e || n.tr,
            s = this.buildProps(i, r);
          return {
            ...Object.fromEntries(
              Object.entries(t).map(([e, t]) => [
                e,
                (...e) => t(...e)({ ...s, dispatch: void 0 }),
              ]),
            ),
            chain: () => this.createChain(i, r),
          };
        }
        buildProps(e, t = !0) {
          let { rawCommands: n, editor: r, state: i } = this,
            { view: s } = r,
            a = {
              tr: e,
              editor: r,
              view: s,
              state: aU({ state: i, transaction: e }),
              dispatch: t ? () => void 0 : void 0,
              chain: () => this.createChain(e, t),
              can: () => this.createCan(e),
              get commands() {
                return Object.fromEntries(
                  Object.entries(n).map(([e, t]) => [e, (...e) => t(...e)(a)]),
                );
              },
            };
          return a;
        }
      },
      aW = {};
    a$(aW, {
      blur: () => aq,
      clearContent: () => aZ,
      clearNodes: () => aK,
      command: () => aY,
      createParagraphNear: () => aJ,
      cut: () => aQ,
      deleteCurrentNode: () => aX,
      deleteNode: () => a1,
      deleteRange: () => a2,
      deleteSelection: () => a5,
      enter: () => a3,
      exitCode: () => a4,
      extendMarkRange: () => on,
      first: () => or,
      focus: () => ou,
      forEach: () => od,
      insertContent: () => oh,
      insertContentAt: () => ov,
      joinBackward: () => oj,
      joinDown: () => ob,
      joinForward: () => ow,
      joinItemBackward: () => oC,
      joinItemForward: () => ok,
      joinTextblockBackward: () => oS,
      joinTextblockForward: () => oN,
      joinUp: () => oy,
      keyboardShortcut: () => oD,
      lift: () => oM,
      liftEmptyBlock: () => oT,
      liftListItem: () => oL,
      newlineInCode: () => oP,
      resetAttributes: () => o_,
      scrollIntoView: () => oO,
      selectAll: () => oB,
      selectNodeBackward: () => oV,
      selectNodeForward: () => oz,
      selectParentNode: () => oH,
      selectTextblockEnd: () => o$,
      selectTextblockStart: () => oU,
      setContent: () => oW,
      setMark: () => lA,
      setMeta: () => lD,
      setNode: () => lI,
      setNodeSelection: () => lM,
      setTextSelection: () => lT,
      sinkListItem: () => lL,
      splitBlock: () => lR,
      splitListItem: () => lF,
      toggleList: () => lB,
      toggleMark: () => lV,
      toggleNode: () => lz,
      toggleWrap: () => lH,
      undoInputRule: () => l$,
      unsetAllMarks: () => lU,
      unsetMark: () => lG,
      updateAttributes: () => lW,
      wrapIn: () => lq,
      wrapInList: () => lZ,
    });
    var aq =
        () =>
        ({ editor: e, view: t }) => (
          requestAnimationFrame(() => {
            var n;
            e.isDestroyed ||
              (t.dom.blur(),
              null == (n = null == window ? void 0 : window.getSelection()) ||
                n.removeAllRanges());
          }),
          !0
        ),
      aZ =
        (e = !0) =>
        ({ commands: t }) =>
          t.setContent("", { emitUpdate: e }),
      aK =
        () =>
        ({ state: e, tr: t, dispatch: n }) => {
          let { selection: r } = t,
            { ranges: i } = r;
          return (
            !n ||
            (i.forEach(({ $from: n, $to: r }) => {
              e.doc.nodesBetween(n.pos, r.pos, (e, n) => {
                if (e.type.isText) return;
                let { doc: r, mapping: i } = t,
                  s = r.resolve(i.map(n)),
                  a = r.resolve(i.map(n + e.nodeSize)),
                  o = s.blockRange(a);
                if (!o) return;
                let l = tt(o);
                if (e.type.isTextblock) {
                  let { defaultType: e } = s.parent.contentMatchAt(s.index());
                  t.setNodeMarkup(o.start, e);
                }
                (l || 0 === l) && t.lift(o, l);
              });
            }),
            !0)
          );
        },
      aY = (e) => (t) => e(t),
      aJ =
        () =>
        ({ state: e, dispatch: t }) =>
          nC(e, t),
      aQ =
        (e, t) =>
        ({ editor: n, tr: r }) => {
          let { state: i } = n,
            s = i.doc.slice(e.from, e.to);
          r.deleteRange(e.from, e.to);
          let a = r.mapping.map(t);
          return (
            r.insert(a, s.content),
            r.setSelection(new tW(r.doc.resolve(Math.max(a - 1, 0)))),
            !0
          );
        },
      aX =
        () =>
        ({ tr: e, dispatch: t }) => {
          let { selection: n } = e,
            r = n.$anchor.node();
          if (r.content.size > 0) return !1;
          let i = e.selection.$anchor;
          for (let n = i.depth; n > 0; n -= 1)
            if (i.node(n).type === r.type) {
              if (t) {
                let t = i.before(n),
                  r = i.after(n);
                e.delete(t, r).scrollIntoView();
              }
              return !0;
            }
          return !1;
        };
    function a0(e, t) {
      if ("string" == typeof e) {
        if (!t.nodes[e])
          throw Error(
            `There is no node type named '${e}'. Maybe you forgot to add the extension?`,
          );
        return t.nodes[e];
      }
      return e;
    }
    var a1 =
        (e) =>
        ({ tr: t, state: n, dispatch: r }) => {
          let i = a0(e, n.schema),
            s = t.selection.$anchor;
          for (let e = s.depth; e > 0; e -= 1)
            if (s.node(e).type === i) {
              if (r) {
                let n = s.before(e),
                  r = s.after(e);
                t.delete(n, r).scrollIntoView();
              }
              return !0;
            }
          return !1;
        },
      a2 =
        (e) =>
        ({ tr: t, dispatch: n }) => {
          let { from: r, to: i } = e;
          return (n && t.delete(r, i), !0);
        },
      a5 =
        () =>
        ({ state: e, dispatch: t }) =>
          ni(e, t),
      a3 =
        () =>
        ({ commands: e }) =>
          e.keyboardShortcut("Enter"),
      a4 =
        () =>
        ({ state: e, dispatch: t }) =>
          nw(e, t);
    function a9(e) {
      return "[object RegExp]" === Object.prototype.toString.call(e);
    }
    function a7(e, t, n = { strict: !0 }) {
      let r = Object.keys(t);
      return (
        !r.length ||
        r.every((r) =>
          n.strict ? t[r] === e[r] : a9(t[r]) ? t[r].test(e[r]) : t[r] === e[r],
        )
      );
    }
    function a6(e, t, n = {}) {
      return e.find(
        (e) =>
          e.type === t &&
          a7(Object.fromEntries(Object.keys(n).map((t) => [t, e.attrs[t]])), n),
      );
    }
    function a8(e, t, n = {}) {
      return !!a6(e, t, n);
    }
    function oe(e, t, n) {
      var r;
      if (!e || !t) return;
      let i = e.parent.childAfter(e.parentOffset);
      if (
        ((i.node && i.node.marks.some((e) => e.type === t)) ||
          (i = e.parent.childBefore(e.parentOffset)),
        !i.node ||
          !i.node.marks.some((e) => e.type === t) ||
          ((n = n || (null == (r = i.node.marks[0]) ? void 0 : r.attrs)),
          !a6([...i.node.marks], t, n)))
      )
        return;
      let s = i.index,
        a = e.start() + i.offset,
        o = s + 1,
        l = a + i.node.nodeSize;
      for (; s > 0 && a8([...e.parent.child(s - 1).marks], t, n); )
        ((s -= 1), (a -= e.parent.child(s).nodeSize));
      for (
        ;
        o < e.parent.childCount && a8([...e.parent.child(o).marks], t, n);

      )
        ((l += e.parent.child(o).nodeSize), (o += 1));
      return { from: a, to: l };
    }
    function ot(e, t) {
      if ("string" == typeof e) {
        if (!t.marks[e])
          throw Error(
            `There is no mark type named '${e}'. Maybe you forgot to add the extension?`,
          );
        return t.marks[e];
      }
      return e;
    }
    var on =
        (e, t = {}) =>
        ({ tr: n, state: r, dispatch: i }) => {
          let s = ot(e, r.schema),
            { doc: a, selection: o } = n,
            { $from: l, from: c, to: u } = o;
          if (i) {
            let e = oe(l, s, t);
            if (e && e.from <= c && e.to >= u) {
              let t = tW.create(a, e.from, e.to);
              n.setSelection(t);
            }
          }
          return !0;
        },
      or = (e) => (t) => {
        let n = "function" == typeof e ? e(t) : e;
        for (let e = 0; e < n.length; e += 1) if (n[e](t)) return !0;
        return !1;
      };
    function oi(e) {
      return e instanceof tW;
    }
    function oa(e = 0, t = 0, n = 0) {
      return Math.min(Math.max(e, t), n);
    }
    function oo(e, t = null) {
      if (!t) return null;
      let n = tH.atStart(e),
        r = tH.atEnd(e);
      if ("start" === t || !0 === t) return n;
      if ("end" === t) return r;
      let i = n.from,
        s = r.to;
      return "all" === t
        ? tW.create(e, oa(0, i, s), oa(e.content.size, i, s))
        : tW.create(e, oa(t, i, s), oa(t, i, s));
    }
    function ol() {
      return (
        "Android" === navigator.platform || /android/i.test(navigator.userAgent)
      );
    }
    function oc() {
      return (
        [
          "iPad Simulator",
          "iPhone Simulator",
          "iPod Simulator",
          "iPad",
          "iPhone",
          "iPod",
        ].includes(navigator.platform) ||
        (navigator.userAgent.includes("Mac") && "ontouchend" in document)
      );
    }
    var ou =
        (e = null, t = {}) =>
        ({ editor: n, view: r, tr: i, dispatch: s }) => {
          t = { scrollIntoView: !0, ...t };
          let a = () => {
            ((oc() || ol()) && r.dom.focus(),
              requestAnimationFrame(() => {
                !n.isDestroyed &&
                  (r.focus(),
                  (null == t ? void 0 : t.scrollIntoView) &&
                    n.commands.scrollIntoView());
              }));
          };
          if ((r.hasFocus() && null === e) || !1 === e) return !0;
          if (s && null === e && !oi(n.state.selection)) return (a(), !0);
          let o = oo(i.doc, e) || n.state.selection,
            l = n.state.selection.eq(o);
          return (
            s &&
              (l || i.setSelection(o),
              l && i.storedMarks && i.setStoredMarks(i.storedMarks),
              a()),
            !0
          );
        },
      od = (e, t) => (n) => e.every((e, r) => t(e, { ...n, index: r })),
      oh =
        (e, t) =>
        ({ tr: n, commands: r }) =>
          r.insertContentAt(
            { from: n.selection.from, to: n.selection.to },
            e,
            t,
          ),
      op = (e) => {
        let t = e.childNodes;
        for (let n = t.length - 1; n >= 0; n -= 1) {
          let r = t[n];
          3 === r.nodeType && r.nodeValue && /^(\n\s\s|\n)$/.test(r.nodeValue)
            ? e.removeChild(r)
            : 1 === r.nodeType && op(r);
        }
        return e;
      };
    function om(e) {
      if ("undefined" == typeof window)
        throw Error(
          "[tiptap error]: there is no window object available, so this function cannot be used",
        );
      let t = `<body>${e}</body>`;
      return op(new window.DOMParser().parseFromString(t, "text/html").body);
    }
    function of(e, t, n) {
      if (e instanceof H || e instanceof x) return e;
      n = { slice: !0, parseOptions: {}, ...n };
      let r = "object" == typeof e && null !== e,
        i = "string" == typeof e;
      if (r)
        try {
          if (Array.isArray(e) && e.length > 0)
            return x.fromArray(e.map((e) => t.nodeFromJSON(e)));
          let r = t.nodeFromJSON(e);
          return (n.errorOnInvalidContent && r.check(), r);
        } catch (r) {
          if (n.errorOnInvalidContent)
            throw Error("[tiptap error]: Invalid JSON content", { cause: r });
          return (
            console.warn(
              "[tiptap warn]: Invalid content.",
              "Passed value:",
              e,
              "Error:",
              r,
            ),
            of("", t, n)
          );
        }
      if (i) {
        if (n.errorOnInvalidContent) {
          let r = !1,
            i = "",
            s = new ep({
              topNode: t.spec.topNode,
              marks: t.spec.marks,
              nodes: t.spec.nodes.append({
                __tiptap__private__unknown__catch__all__node: {
                  content: "inline*",
                  group: "block",
                  parseDOM: [
                    {
                      tag: "*",
                      getAttrs: (e) => (
                        (r = !0),
                        (i = "string" == typeof e ? e : e.outerHTML),
                        null
                      ),
                    },
                  ],
                },
              }),
            });
          if (
            (n.slice
              ? ex.fromSchema(s).parseSlice(om(e), n.parseOptions)
              : ex.fromSchema(s).parse(om(e), n.parseOptions),
            n.errorOnInvalidContent && r)
          )
            throw Error("[tiptap error]: Invalid HTML content", {
              cause: Error(`Invalid element found: ${i}`),
            });
        }
        let r = ex.fromSchema(t);
        return n.slice
          ? r.parseSlice(om(e), n.parseOptions).content
          : r.parse(om(e), n.parseOptions);
      }
      return of("", t, n);
    }
    function og(e, t, n) {
      let r = e.steps.length - 1;
      if (r < t) return;
      let i = e.steps[r];
      if (!(i instanceof e3 || i instanceof e4)) return;
      let s = e.mapping.maps[r],
        a = 0;
      (s.forEach((e, t, n, r) => {
        0 === a && (a = r);
      }),
        e.setSelection(tH.near(e.doc.resolve(a), n)));
    }
    var ox = (e) => !("type" in e),
      ov =
        (e, t, n) =>
        ({ tr: r, dispatch: i, editor: s }) => {
          var a;
          if (i) {
            let i, o;
            n = {
              parseOptions: s.options.parseOptions,
              updateSelection: !0,
              applyInputRules: !1,
              applyPasteRules: !1,
              ...n,
            };
            let l = (e) => {
                s.emit("contentError", {
                  editor: s,
                  error: e,
                  disableCollaboration: () => {
                    "collaboration" in s.storage &&
                      "object" == typeof s.storage.collaboration &&
                      s.storage.collaboration &&
                      (s.storage.collaboration.isDisabled = !0);
                  },
                });
              },
              c = { preserveWhitespace: "full", ...n.parseOptions };
            if (
              !n.errorOnInvalidContent &&
              !s.options.enableContentCheck &&
              s.options.emitContentError
            )
              try {
                of(t, s.schema, { parseOptions: c, errorOnInvalidContent: !0 });
              } catch (e) {
                l(e);
              }
            try {
              i = of(t, s.schema, {
                parseOptions: c,
                errorOnInvalidContent:
                  null != (a = n.errorOnInvalidContent)
                    ? a
                    : s.options.enableContentCheck,
              });
            } catch (e) {
              return (l(e), !1);
            }
            let { from: u, to: d } =
                "number" == typeof e
                  ? { from: e, to: e }
                  : { from: e.from, to: e.to },
              h = !0,
              p = !0;
            if (
              ((ox(i) ? i : [i]).forEach((e) => {
                (e.check(),
                  (h = !!h && e.isText && 0 === e.marks.length),
                  (p = !!p && e.isBlock));
              }),
              u === d && p)
            ) {
              let { parent: e } = r.doc.resolve(u);
              !e.isTextblock ||
                e.type.spec.code ||
                e.childCount ||
                ((u -= 1), (d += 1));
            }
            if (h) {
              if (Array.isArray(t)) o = t.map((e) => e.text || "").join("");
              else if (t instanceof x) {
                let e = "";
                (t.forEach((t) => {
                  t.text && (e += t.text);
                }),
                  (o = e));
              } else o = "object" == typeof t && t && t.text ? t.text : t;
              r.insertText(o, u, d);
            } else {
              o = i;
              let e = r.doc.resolve(u),
                t = e.node(),
                n = 0 === e.parentOffset,
                s = t.isText || t.isTextblock,
                a = t.content.size > 0;
              (n && s && a && (u = Math.max(0, u - 1)), r.replaceWith(u, d, o));
            }
            (n.updateSelection && og(r, r.steps.length - 1, -1),
              n.applyInputRules &&
                r.setMeta("applyInputRules", { from: u, text: o }),
              n.applyPasteRules &&
                r.setMeta("applyPasteRules", { from: u, text: o }));
          }
          return !0;
        },
      oy =
        () =>
        ({ state: e, dispatch: t }) =>
          nx(e, t),
      ob =
        () =>
        ({ state: e, dispatch: t }) =>
          nv(e, t),
      oj =
        () =>
        ({ state: e, dispatch: t }) =>
          na(e, t),
      ow =
        () =>
        ({ state: e, dispatch: t }) =>
          nm(e, t),
      oC =
        () =>
        ({ state: e, dispatch: t, tr: n }) => {
          try {
            let r = tv(e.doc, e.selection.$from.pos, -1);
            if (null == r) return !1;
            return (n.join(r, 2), t && t(n), !0);
          } catch {
            return !1;
          }
        },
      ok =
        () =>
        ({ state: e, dispatch: t, tr: n }) => {
          try {
            let r = tv(e.doc, e.selection.$from.pos, 1);
            if (null == r) return !1;
            return (n.join(r, 2), t && t(n), !0);
          } catch {
            return !1;
          }
        },
      oS =
        () =>
        ({ state: e, dispatch: t }) =>
          no(e, t),
      oN =
        () =>
        ({ state: e, dispatch: t }) =>
          nl(e, t);
    function oE() {
      return "undefined" != typeof navigator && /Mac/.test(navigator.platform);
    }
    function oA(e) {
      let t,
        n,
        r,
        i,
        s = e.split(/-(?!$)/),
        a = s[s.length - 1];
      "Space" === a && (a = " ");
      for (let e = 0; e < s.length - 1; e += 1) {
        let a = s[e];
        if (/^(cmd|meta|m)$/i.test(a)) i = !0;
        else if (/^a(lt)?$/i.test(a)) t = !0;
        else if (/^(c|ctrl|control)$/i.test(a)) n = !0;
        else if (/^s(hift)?$/i.test(a)) r = !0;
        else if (/^mod$/i.test(a)) oc() || oE() ? (i = !0) : (n = !0);
        else throw Error(`Unrecognized modifier name: ${a}`);
      }
      return (
        t && (a = `Alt-${a}`),
        n && (a = `Ctrl-${a}`),
        i && (a = `Meta-${a}`),
        r && (a = `Shift-${a}`),
        a
      );
    }
    var oD =
      (e) =>
      ({ editor: t, view: n, tr: r, dispatch: i }) => {
        let s = oA(e).split(/-(?!$)/),
          a = s.find((e) => !["Alt", "Ctrl", "Meta", "Shift"].includes(e)),
          o = new KeyboardEvent("keydown", {
            key: "Space" === a ? " " : a,
            altKey: s.includes("Alt"),
            ctrlKey: s.includes("Ctrl"),
            metaKey: s.includes("Meta"),
            shiftKey: s.includes("Shift"),
            bubbles: !0,
            cancelable: !0,
          }),
          l = t.captureTransaction(() => {
            n.someProp("handleKeyDown", (e) => e(n, o));
          });
        return (
          null == l ||
            l.steps.forEach((e) => {
              let t = e.map(r.mapping);
              t && i && r.maybeStep(t);
            }),
          !0
        );
      };
    function oI(e, t, n = {}) {
      let { from: r, to: i, empty: s } = e.selection,
        a = t ? a0(t, e.schema) : null,
        o = [];
      e.doc.nodesBetween(r, i, (e, t) => {
        if (e.isText) return;
        let n = Math.max(r, t),
          s = Math.min(i, t + e.nodeSize);
        o.push({ node: e, from: n, to: s });
      });
      let l = i - r,
        c = o
          .filter((e) => !a || a.name === e.node.type.name)
          .filter((e) => a7(e.node.attrs, n, { strict: !1 }));
      return s ? !!c.length : c.reduce((e, t) => e + t.to - t.from, 0) >= l;
    }
    var oM =
        (e, t = {}) =>
        ({ state: n, dispatch: r }) => {
          let i = a0(e, n.schema);
          return !!oI(n, i, t) && ny(n, r);
        },
      oT =
        () =>
        ({ state: e, dispatch: t }) =>
          nk(e, t),
      oL =
        (e) =>
        ({ state: t, dispatch: n }) =>
          n$(a0(e, t.schema))(t, n),
      oP =
        () =>
        ({ state: e, dispatch: t }) =>
          nb(e, t);
    function oR(e, t) {
      return t.nodes[e] ? "node" : t.marks[e] ? "mark" : null;
    }
    function oF(e, t) {
      let n = "string" == typeof t ? [t] : t;
      return Object.keys(e).reduce(
        (t, r) => (n.includes(r) || (t[r] = e[r]), t),
        {},
      );
    }
    var o_ =
        (e, t) =>
        ({ tr: n, state: r, dispatch: i }) => {
          let s = null,
            a = null,
            o = oR("string" == typeof e ? e : e.name, r.schema);
          return (
            !!o &&
            ("node" === o && (s = a0(e, r.schema)),
            "mark" === o && (a = ot(e, r.schema)),
            i &&
              n.selection.ranges.forEach((e) => {
                r.doc.nodesBetween(e.$from.pos, e.$to.pos, (e, r) => {
                  (s &&
                    s === e.type &&
                    n.setNodeMarkup(r, void 0, oF(e.attrs, t)),
                    a &&
                      e.marks.length &&
                      e.marks.forEach((i) => {
                        a === i.type &&
                          n.addMark(
                            r,
                            r + e.nodeSize,
                            a.create(oF(i.attrs, t)),
                          );
                      }));
                });
              }),
            !0)
          );
        },
      oO =
        () =>
        ({ tr: e, dispatch: t }) => (t && e.scrollIntoView(), !0),
      oB =
        () =>
        ({ tr: e, dispatch: t }) => {
          if (t) {
            let t = new tY(e.doc);
            e.setSelection(t);
          }
          return !0;
        },
      oV =
        () =>
        ({ state: e, dispatch: t }) =>
          nd(e, t),
      oz =
        () =>
        ({ state: e, dispatch: t }) =>
          nf(e, t),
      oH =
        () =>
        ({ state: e, dispatch: t }) =>
          nN(e, t),
      o$ =
        () =>
        ({ state: e, dispatch: t }) =>
          nT(e, t),
      oU =
        () =>
        ({ state: e, dispatch: t }) =>
          nM(e, t);
    function oG(e, t, n = {}, r = {}) {
      return of(e, t, {
        slice: !1,
        parseOptions: n,
        errorOnInvalidContent: r.errorOnInvalidContent,
      });
    }
    var oW =
      (
        e,
        {
          errorOnInvalidContent: t,
          emitUpdate: n = !0,
          parseOptions: r = {},
        } = {},
      ) =>
      ({ editor: i, tr: s, dispatch: a, commands: o }) => {
        let { doc: l } = s;
        if ("full" !== r.preserveWhitespace) {
          let o = oG(e, i.schema, r, {
            errorOnInvalidContent: null != t ? t : i.options.enableContentCheck,
          });
          return (
            a &&
              s.replaceWith(0, l.content.size, o).setMeta("preventUpdate", !n),
            !0
          );
        }
        return (
          a && s.setMeta("preventUpdate", !n),
          o.insertContentAt({ from: 0, to: l.content.size }, e, {
            parseOptions: r,
            errorOnInvalidContent: null != t ? t : i.options.enableContentCheck,
          })
        );
      };
    function oq(e, t) {
      let n = ot(t, e.schema),
        { from: r, to: i, empty: s } = e.selection,
        a = [];
      s
        ? (e.storedMarks && a.push(...e.storedMarks),
          a.push(...e.selection.$head.marks()))
        : e.doc.nodesBetween(r, i, (e) => {
            a.push(...e.marks);
          });
      let o = a.find((e) => e.type.name === n.name);
      return o ? { ...o.attrs } : {};
    }
    function oZ(e, t) {
      let n = new tV(e);
      return (
        t.forEach((e) => {
          e.steps.forEach((e) => {
            n.step(e);
          });
        }),
        n
      );
    }
    function oK(e) {
      for (let t = 0; t < e.edgeCount; t += 1) {
        let { type: n } = e.edge(t);
        if (n.isTextblock && !n.hasRequiredAttrs()) return n;
      }
      return null;
    }
    function oY(e, t, n) {
      let r = [];
      return (
        e.nodesBetween(t.from, t.to, (e, t) => {
          n(e) && r.push({ node: e, pos: t });
        }),
        r
      );
    }
    function oJ(e, t) {
      for (let n = e.depth; n > 0; n -= 1) {
        let r = e.node(n);
        if (t(r))
          return {
            pos: n > 0 ? e.before(n) : 0,
            start: e.start(n),
            depth: n,
            node: r,
          };
      }
    }
    function oQ(e) {
      return (t) => oJ(t.$from, e);
    }
    function oX(e, t, n) {
      return void 0 === e.config[t] && e.parent
        ? oX(e.parent, t, n)
        : "function" == typeof e.config[t]
          ? e.config[t].bind({
              ...n,
              parent: e.parent ? oX(e.parent, t, n) : null,
            })
          : e.config[t];
    }
    function o0(e) {
      return e
        .map((e) => {
          let t = { name: e.name, options: e.options, storage: e.storage },
            n = oX(e, "addExtensions", t);
          return n ? [e, ...o0(n())] : e;
        })
        .flat(10);
    }
    function o1(e, t) {
      let n = eM.fromSchema(t).serializeFragment(e),
        r = document.implementation.createHTMLDocument().createElement("div");
      return (r.appendChild(n), r.innerHTML);
    }
    function o2(e) {
      return "function" == typeof e;
    }
    function o5(e, t, ...n) {
      return o2(e) ? (t ? e.bind(t)(...n) : e(...n)) : e;
    }
    function o3(e = {}) {
      return 0 === Object.keys(e).length && e.constructor === Object;
    }
    function o4(e) {
      let t = e.filter((e) => "extension" === e.type);
      return {
        baseExtensions: t,
        nodeExtensions: e.filter((e) => "node" === e.type),
        markExtensions: e.filter((e) => "mark" === e.type),
      };
    }
    function o9(e) {
      let t = [],
        { nodeExtensions: n, markExtensions: r } = o4(e),
        i = [...n, ...r],
        s = {
          default: null,
          validate: void 0,
          rendered: !0,
          renderHTML: null,
          parseHTML: null,
          keepOnSplit: !0,
          isRequired: !1,
        };
      return (
        e.forEach((e) => {
          let n = {
              name: e.name,
              options: e.options,
              storage: e.storage,
              extensions: i,
            },
            r = oX(e, "addGlobalAttributes", n);
          r &&
            r().forEach((e) => {
              e.types.forEach((n) => {
                Object.entries(e.attributes).forEach(([e, r]) => {
                  t.push({ type: n, name: e, attribute: { ...s, ...r } });
                });
              });
            });
        }),
        i.forEach((e) => {
          let n = { name: e.name, options: e.options, storage: e.storage },
            r = oX(e, "addAttributes", n);
          r &&
            Object.entries(r()).forEach(([n, r]) => {
              let i = { ...s, ...r };
              ("function" == typeof (null == i ? void 0 : i.default) &&
                (i.default = i.default()),
                (null == i ? void 0 : i.isRequired) &&
                  (null == i ? void 0 : i.default) === void 0 &&
                  delete i.default,
                t.push({ type: e.name, name: n, attribute: i }));
            });
        }),
        t
      );
    }
    function o7(...e) {
      return e
        .filter((e) => !!e)
        .reduce((e, t) => {
          let n = { ...e };
          return (
            Object.entries(t).forEach(([e, t]) => {
              if (!n[e]) {
                n[e] = t;
                return;
              }
              if ("class" === e) {
                let r = t ? String(t).split(" ") : [],
                  i = n[e] ? n[e].split(" ") : [],
                  s = r.filter((e) => !i.includes(e));
                n[e] = [...i, ...s].join(" ");
              } else if ("style" === e) {
                let r = t
                    ? t
                        .split(";")
                        .map((e) => e.trim())
                        .filter(Boolean)
                    : [],
                  i = n[e]
                    ? n[e]
                        .split(";")
                        .map((e) => e.trim())
                        .filter(Boolean)
                    : [],
                  s = new Map();
                (i.forEach((e) => {
                  let [t, n] = e.split(":").map((e) => e.trim());
                  s.set(t, n);
                }),
                  r.forEach((e) => {
                    let [t, n] = e.split(":").map((e) => e.trim());
                    s.set(t, n);
                  }),
                  (n[e] = Array.from(s.entries())
                    .map(([e, t]) => `${e}: ${t}`)
                    .join("; ")));
              } else n[e] = t;
            }),
            n
          );
        }, {});
    }
    function o6(e, t) {
      return t
        .filter((t) => t.type === e.type.name)
        .filter((e) => e.attribute.rendered)
        .map((t) =>
          t.attribute.renderHTML
            ? t.attribute.renderHTML(e.attrs) || {}
            : { [t.name]: e.attrs[t.name] },
        )
        .reduce((e, t) => o7(e, t), {});
    }
    function o8(e) {
      return "string" != typeof e
        ? e
        : e.match(/^[+-]?(?:\d*\.)?\d+$/)
          ? Number(e)
          : "true" === e || ("false" !== e && e);
    }
    function le(e, t) {
      return "style" in e
        ? e
        : {
            ...e,
            getAttrs: (n) => {
              let r = e.getAttrs ? e.getAttrs(n) : e.attrs;
              if (!1 === r) return !1;
              let i = t.reduce((e, t) => {
                let r = t.attribute.parseHTML
                  ? t.attribute.parseHTML(n)
                  : o8(n.getAttribute(t.name));
                return null == r ? e : { ...e, [t.name]: r };
              }, {});
              return { ...r, ...i };
            },
          };
    }
    function lt(e) {
      return Object.fromEntries(
        Object.entries(e).filter(
          ([e, t]) => !("attrs" === e && o3(t)) && null != t,
        ),
      );
    }
    function ln(e, t) {
      var n;
      let r = o9(e),
        { nodeExtensions: i, markExtensions: s } = o4(e),
        a = null == (n = i.find((e) => oX(e, "topNode"))) ? void 0 : n.name;
      return new ep({
        topNode: a,
        nodes: Object.fromEntries(
          i.map((n) => {
            let i = r.filter((e) => e.type === n.name),
              s = {
                name: n.name,
                options: n.options,
                storage: n.storage,
                editor: t,
              },
              a = lt({
                ...e.reduce((e, t) => {
                  let r = oX(t, "extendNodeSchema", s);
                  return { ...e, ...(r ? r(n) : {}) };
                }, {}),
                content: o5(oX(n, "content", s)),
                marks: o5(oX(n, "marks", s)),
                group: o5(oX(n, "group", s)),
                inline: o5(oX(n, "inline", s)),
                atom: o5(oX(n, "atom", s)),
                selectable: o5(oX(n, "selectable", s)),
                draggable: o5(oX(n, "draggable", s)),
                code: o5(oX(n, "code", s)),
                whitespace: o5(oX(n, "whitespace", s)),
                linebreakReplacement: o5(oX(n, "linebreakReplacement", s)),
                defining: o5(oX(n, "defining", s)),
                isolating: o5(oX(n, "isolating", s)),
                attrs: Object.fromEntries(
                  i.map((e) => {
                    var t, n;
                    return [
                      e.name,
                      {
                        default:
                          null == (t = null == e ? void 0 : e.attribute)
                            ? void 0
                            : t.default,
                        validate:
                          null == (n = null == e ? void 0 : e.attribute)
                            ? void 0
                            : n.validate,
                      },
                    ];
                  }),
                ),
              }),
              o = o5(oX(n, "parseHTML", s));
            o && (a.parseDOM = o.map((e) => le(e, i)));
            let l = oX(n, "renderHTML", s);
            l && (a.toDOM = (e) => l({ node: e, HTMLAttributes: o6(e, i) }));
            let c = oX(n, "renderText", s);
            return (c && (a.toText = c), [n.name, a]);
          }),
        ),
        marks: Object.fromEntries(
          s.map((n) => {
            let i = r.filter((e) => e.type === n.name),
              s = {
                name: n.name,
                options: n.options,
                storage: n.storage,
                editor: t,
              },
              a = lt({
                ...e.reduce((e, t) => {
                  let r = oX(t, "extendMarkSchema", s);
                  return { ...e, ...(r ? r(n) : {}) };
                }, {}),
                inclusive: o5(oX(n, "inclusive", s)),
                excludes: o5(oX(n, "excludes", s)),
                group: o5(oX(n, "group", s)),
                spanning: o5(oX(n, "spanning", s)),
                code: o5(oX(n, "code", s)),
                attrs: Object.fromEntries(
                  i.map((e) => {
                    var t, n;
                    return [
                      e.name,
                      {
                        default:
                          null == (t = null == e ? void 0 : e.attribute)
                            ? void 0
                            : t.default,
                        validate:
                          null == (n = null == e ? void 0 : e.attribute)
                            ? void 0
                            : n.validate,
                      },
                    ];
                  }),
                ),
              }),
              o = o5(oX(n, "parseHTML", s));
            o && (a.parseDOM = o.map((e) => le(e, i)));
            let l = oX(n, "renderHTML", s);
            return (
              l && (a.toDOM = (e) => l({ mark: e, HTMLAttributes: o6(e, i) })),
              [n.name, a]
            );
          }),
        ),
      });
    }
    function lr(e) {
      return Array.from(new Set(e.filter((t, n) => e.indexOf(t) !== n)));
    }
    function li(e) {
      let t = 100;
      return e.sort((e, n) => {
        let r = oX(e, "priority") || t,
          i = oX(n, "priority") || t;
        return r > i ? -1 : +(r < i);
      });
    }
    function ls(e) {
      let t = li(o0(e)),
        n = lr(t.map((e) => e.name));
      return (
        n.length &&
          console.warn(
            `[tiptap warn]: Duplicate extension names found: [${n.map((e) => `'${e}'`).join(", ")}]. This can lead to issues.`,
          ),
        t
      );
    }
    function la(e, t, n) {
      let { from: r, to: i } = t,
        { blockSeparator: s = "\n\n", textSerializers: a = {} } = n || {},
        o = "";
      return (
        e.nodesBetween(r, i, (e, n, l, c) => {
          var u;
          e.isBlock && n > r && (o += s);
          let d = null == a ? void 0 : a[e.type.name];
          if (d)
            return (
              l && (o += d({ node: e, pos: n, parent: l, index: c, range: t })),
              !1
            );
          e.isText &&
            (o +=
              null == (u = null == e ? void 0 : e.text)
                ? void 0
                : u.slice(Math.max(r, n) - n, i - n));
        }),
        o
      );
    }
    function lo(e, t) {
      let n = { from: 0, to: e.content.size };
      return la(e, n, t);
    }
    function ll(e) {
      return Object.fromEntries(
        Object.entries(e.nodes)
          .filter(([, e]) => e.spec.toText)
          .map(([e, t]) => [e, t.spec.toText]),
      );
    }
    function lc(e, t) {
      let n = a0(t, e.schema),
        { from: r, to: i } = e.selection,
        s = [];
      e.doc.nodesBetween(r, i, (e) => {
        s.push(e);
      });
      let a = s.reverse().find((e) => e.type.name === n.name);
      return a ? { ...a.attrs } : {};
    }
    function lu(e, t) {
      let n = oR("string" == typeof t ? t : t.name, e.schema);
      return "node" === n ? lc(e, t) : "mark" === n ? oq(e, t) : {};
    }
    function ld(e, t = JSON.stringify) {
      let n = {};
      return e.filter((e) => {
        let r = t(e);
        return !Object.prototype.hasOwnProperty.call(n, r) && (n[r] = !0);
      });
    }
    function lh(e) {
      let t = ld(e);
      return 1 === t.length
        ? t
        : t.filter(
            (e, n) =>
              !t
                .filter((e, t) => t !== n)
                .some(
                  (t) =>
                    e.oldRange.from >= t.oldRange.from &&
                    e.oldRange.to <= t.oldRange.to &&
                    e.newRange.from >= t.newRange.from &&
                    e.newRange.to <= t.newRange.to,
                ),
          );
    }
    function lp(e) {
      let { mapping: t, steps: n } = e,
        r = [];
      return (
        t.maps.forEach((e, i) => {
          let s = [];
          if (e.ranges.length)
            e.forEach((e, t) => {
              s.push({ from: e, to: t });
            });
          else {
            let { from: e, to: t } = n[i];
            if (void 0 === e || void 0 === t) return;
            s.push({ from: e, to: t });
          }
          s.forEach(({ from: e, to: n }) => {
            let s = t.slice(i).map(e, -1),
              a = t.slice(i).map(n),
              o = t.invert().map(s, -1),
              l = t.invert().map(a);
            r.push({
              oldRange: { from: o, to: l },
              newRange: { from: s, to: a },
            });
          });
        }),
        lh(r)
      );
    }
    function lm(e, t, n) {
      let r = [];
      return (
        e === t
          ? n
              .resolve(e)
              .marks()
              .forEach((t) => {
                let i = oe(n.resolve(e), t.type);
                i && r.push({ mark: t, ...i });
              })
          : n.nodesBetween(e, t, (e, t) => {
              e &&
                (null == e ? void 0 : e.nodeSize) !== void 0 &&
                r.push(
                  ...e.marks.map((n) => ({
                    from: t,
                    to: t + e.nodeSize,
                    mark: n,
                  })),
                );
            }),
        r
      );
    }
    var lf = (e, t, n, r = 20) => {
      let i = e.doc.resolve(n),
        s = r,
        a = null;
      for (; s > 0 && null === a; ) {
        let e = i.node(s);
        (null == e ? void 0 : e.type.name) === t ? (a = e) : (s -= 1);
      }
      return [a, s];
    };
    function lg(e, t) {
      return t.nodes[e] || t.marks[e] || null;
    }
    function lx(e, t, n) {
      return Object.fromEntries(
        Object.entries(n).filter(([n]) => {
          let r = e.find((e) => e.type === t && e.name === n);
          return !!r && r.attribute.keepOnSplit;
        }),
      );
    }
    var lv = (e, t = 500) => {
      let n = "",
        r = e.parentOffset;
      return (
        e.parent.nodesBetween(Math.max(0, r - t), r, (e, t, i, s) => {
          var a, o;
          let l =
            (null == (o = (a = e.type.spec).toText)
              ? void 0
              : o.call(a, { node: e, pos: t, parent: i, index: s })) ||
            e.textContent ||
            "%leaf%";
          n += e.isAtom && !e.isText ? l : l.slice(0, Math.max(0, r - t));
        }),
        n
      );
    };
    function ly(e, t, n = {}) {
      let { empty: r, ranges: i } = e.selection,
        s = t ? ot(t, e.schema) : null;
      if (r)
        return !!(e.storedMarks || e.selection.$from.marks())
          .filter((e) => !s || s.name === e.type.name)
          .find((e) => a7(e.attrs, n, { strict: !1 }));
      let a = 0,
        o = [];
      if (
        (i.forEach(({ $from: t, $to: n }) => {
          let r = t.pos,
            i = n.pos;
          e.doc.nodesBetween(r, i, (e, t) => {
            if (!e.isText && !e.marks.length) return;
            let n = Math.max(r, t),
              s = Math.min(i, t + e.nodeSize);
            ((a += s - n),
              o.push(...e.marks.map((e) => ({ mark: e, from: n, to: s }))));
          });
        }),
        0 === a)
      )
        return !1;
      let l = o
          .filter((e) => !s || s.name === e.mark.type.name)
          .filter((e) => a7(e.mark.attrs, n, { strict: !1 }))
          .reduce((e, t) => e + t.to - t.from, 0),
        c = o
          .filter((e) => !s || (e.mark.type !== s && e.mark.type.excludes(s)))
          .reduce((e, t) => e + t.to - t.from, 0);
      return (l > 0 ? l + c : l) >= a;
    }
    function lb(e, t, n = {}) {
      if (!t) return oI(e, null, n) || ly(e, null, n);
      let r = oR(t, e.schema);
      return "node" === r ? oI(e, t, n) : "mark" === r && ly(e, t, n);
    }
    var lj = (e, t) => {
        let { $from: n, $to: r, $anchor: i } = e.selection;
        if (t) {
          let n = oQ((e) => e.type.name === t)(e.selection);
          if (!n) return !1;
          let r = e.doc.resolve(n.pos + 1);
          return i.pos + 1 === r.end();
        }
        return !(r.parentOffset < r.parent.nodeSize - 2) && n.pos === r.pos;
      },
      lw = (e) => {
        let { $from: t, $to: n } = e.selection;
        return !(t.parentOffset > 0) && t.pos === n.pos;
      };
    function lC(e, t) {
      return Array.isArray(t)
        ? t.some((t) => ("string" == typeof t ? t : t.name) === e.name)
        : t;
    }
    function lk(e, t) {
      let { nodeExtensions: n } = o4(t),
        r = n.find((t) => t.name === e);
      if (!r) return !1;
      let i = { name: r.name, options: r.options, storage: r.storage },
        s = o5(oX(r, "group", i));
      return "string" == typeof s && s.split(" ").includes("list");
    }
    function lS(e, { checkChildren: t = !0, ignoreWhitespace: n = !1 } = {}) {
      var r;
      if (n) {
        if ("hardBreak" === e.type.name) return !0;
        if (e.isText) return /^\s*$/m.test(null != (r = e.text) ? r : "");
      }
      if (e.isText) return !e.text;
      if (e.isAtom || e.isLeaf) return !1;
      if (0 === e.content.childCount) return !0;
      if (t) {
        let r = !0;
        return (
          e.content.forEach((e) => {
            !1 !== r &&
              (lS(e, { ignoreWhitespace: n, checkChildren: t }) || (r = !1));
          }),
          r
        );
      }
      return !1;
    }
    function lN(e) {
      return e instanceof tZ;
    }
    function lE(e, t, n) {
      var r;
      let { selection: i } = t,
        s = null;
      if ((oi(i) && (s = i.$cursor), s)) {
        let t = null != (r = e.storedMarks) ? r : s.marks();
        return (
          s.parent.type.allowsMarkType(n) &&
          (!!n.isInSet(t) || !t.some((e) => e.type.excludes(n)))
        );
      }
      let { ranges: a } = i;
      return a.some(({ $from: t, $to: r }) => {
        let i =
          0 === t.depth && e.doc.inlineContent && e.doc.type.allowsMarkType(n);
        return (
          e.doc.nodesBetween(t.pos, r.pos, (e, t, r) => {
            if (i) return !1;
            if (e.isInline) {
              let t = !r || r.type.allowsMarkType(n),
                s =
                  !!n.isInSet(e.marks) ||
                  !e.marks.some((e) => e.type.excludes(n));
              i = t && s;
            }
            return !i;
          }),
          i
        );
      });
    }
    var lA =
        (e, t = {}) =>
        ({ tr: n, state: r, dispatch: i }) => {
          let { selection: s } = n,
            { empty: a, ranges: o } = s,
            l = ot(e, r.schema);
          if (i)
            if (a) {
              let e = oq(r, l);
              n.addStoredMark(l.create({ ...e, ...t }));
            } else
              o.forEach((e) => {
                let i = e.$from.pos,
                  s = e.$to.pos;
                r.doc.nodesBetween(i, s, (e, r) => {
                  let a = Math.max(r, i),
                    o = Math.min(r + e.nodeSize, s);
                  e.marks.find((e) => e.type === l)
                    ? e.marks.forEach((e) => {
                        l === e.type &&
                          n.addMark(a, o, l.create({ ...e.attrs, ...t }));
                      })
                    : n.addMark(a, o, l.create(t));
                });
              });
          return lE(r, n, l);
        },
      lD =
        (e, t) =>
        ({ tr: n }) => (n.setMeta(e, t), !0),
      lI =
        (e, t = {}) =>
        ({ state: n, dispatch: r, chain: i }) => {
          let s,
            a = a0(e, n.schema);
          return (n.selection.$anchor.sameParent(n.selection.$head) &&
            (s = n.selection.$anchor.parent.attrs),
          a.isTextblock)
            ? i()
                .command(
                  ({ commands: e }) =>
                    !!nP(a, { ...s, ...t })(n) || e.clearNodes(),
                )
                .command(({ state: e }) => nP(a, { ...s, ...t })(e, r))
                .run()
            : (console.warn(
                '[tiptap warn]: Currently "setNode()" only supports text block nodes.',
              ),
              !1);
        },
      lM =
        (e) =>
        ({ tr: t, dispatch: n }) => {
          if (n) {
            let { doc: n } = t,
              r = oa(e, 0, n.content.size),
              i = tZ.create(n, r);
            t.setSelection(i);
          }
          return !0;
        },
      lT =
        (e) =>
        ({ tr: t, dispatch: n }) => {
          if (n) {
            let { doc: n } = t,
              { from: r, to: i } =
                "number" == typeof e ? { from: e, to: e } : e,
              s = tW.atStart(n).from,
              a = tW.atEnd(n).to,
              o = oa(r, s, a),
              l = oa(i, s, a),
              c = tW.create(n, o, l);
            t.setSelection(c);
          }
          return !0;
        },
      lL =
        (e) =>
        ({ state: t, dispatch: n }) =>
          nW(a0(e, t.schema))(t, n);
    function lP(e, t) {
      let n =
        e.storedMarks ||
        (e.selection.$to.parentOffset && e.selection.$from.marks());
      if (n) {
        let r = n.filter((e) => (null == t ? void 0 : t.includes(e.type.name)));
        e.tr.ensureMarks(r);
      }
    }
    var lR =
        ({ keepMarks: e = !0 } = {}) =>
        ({ tr: t, state: n, dispatch: r, editor: i }) => {
          let { selection: s, doc: a } = t,
            { $from: o, $to: l } = s,
            c = lx(
              i.extensionManager.attributes,
              o.node().type.name,
              o.node().attrs,
            );
          if (s instanceof tZ && s.node.isBlock)
            return (
              !!o.parentOffset &&
              !!tp(a, o.pos) &&
              (r &&
                (e && lP(n, i.extensionManager.splittableMarks),
                t.split(o.pos).scrollIntoView()),
              !0)
            );
          if (!o.parent.isBlock) return !1;
          let u = l.parentOffset === l.parent.content.size,
            d =
              0 === o.depth
                ? void 0
                : oK(o.node(-1).contentMatchAt(o.indexAfter(-1))),
            h = u && d ? [{ type: d, attrs: c }] : void 0,
            p = tp(t.doc, t.mapping.map(o.pos), 1, h);
          if (
            (!h &&
              !p &&
              tp(t.doc, t.mapping.map(o.pos), 1, d ? [{ type: d }] : void 0) &&
              ((p = !0), (h = d ? [{ type: d, attrs: c }] : void 0)),
            r)
          ) {
            if (
              p &&
              (s instanceof tW && t.deleteSelection(),
              t.split(t.mapping.map(o.pos), 1, h),
              d && !u && !o.parentOffset && o.parent.type !== d)
            ) {
              let e = t.mapping.map(o.before()),
                n = t.doc.resolve(e);
              o.node(-1).canReplaceWith(n.index(), n.index() + 1, d) &&
                t.setNodeMarkup(t.mapping.map(o.before()), d);
            }
            (e && lP(n, i.extensionManager.splittableMarks),
              t.scrollIntoView());
          }
          return p;
        },
      lF =
        (e, t = {}) =>
        ({ tr: n, state: r, dispatch: i, editor: s }) => {
          var a;
          let o = a0(e, r.schema),
            { $from: l, $to: c } = r.selection,
            u = r.selection.node;
          if ((u && u.isBlock) || l.depth < 2 || !l.sameParent(c)) return !1;
          let d = l.node(-1);
          if (d.type !== o) return !1;
          let h = s.extensionManager.attributes;
          if (
            0 === l.parent.content.size &&
            l.node(-1).childCount === l.indexAfter(-1)
          ) {
            if (
              2 === l.depth ||
              l.node(-3).type !== o ||
              l.index(-2) !== l.node(-2).childCount - 1
            )
              return !1;
            if (i) {
              let e = x.empty,
                r = l.index(-1) ? 1 : l.index(-2) ? 2 : 3;
              for (let t = l.depth - r; t >= l.depth - 3; t -= 1)
                e = x.from(l.node(t).copy(e));
              let i =
                  l.indexAfter(-1) < l.node(-2).childCount
                    ? 1
                    : l.indexAfter(-2) < l.node(-3).childCount
                      ? 2
                      : 3,
                s = { ...lx(h, l.node().type.name, l.node().attrs), ...t },
                c =
                  (null == (a = o.contentMatch.defaultType)
                    ? void 0
                    : a.createAndFill(s)) || void 0;
              e = e.append(x.from(o.createAndFill(null, c) || void 0));
              let u = l.before(l.depth - (r - 1));
              n.replace(u, l.after(-i), new C(e, 4 - r, 0));
              let d = -1;
              (n.doc.nodesBetween(u, n.doc.content.size, (e, t) => {
                if (d > -1) return !1;
                e.isTextblock && 0 === e.content.size && (d = t + 1);
              }),
                d > -1 && n.setSelection(tW.near(n.doc.resolve(d))),
                n.scrollIntoView());
            }
            return !0;
          }
          let p = c.pos === l.end() ? d.contentMatchAt(0).defaultType : null,
            m = { ...lx(h, d.type.name, d.attrs), ...t },
            f = { ...lx(h, l.node().type.name, l.node().attrs), ...t };
          n.delete(l.pos, c.pos);
          let g = p
            ? [
                { type: o, attrs: m },
                { type: p, attrs: f },
              ]
            : [{ type: o, attrs: m }];
          if (!tp(n.doc, l.pos, 2)) return !1;
          if (i) {
            let { selection: e, storedMarks: t } = r,
              { splittableMarks: a } = s.extensionManager,
              o = t || (e.$to.parentOffset && e.$from.marks());
            if ((n.split(l.pos, 2, g).scrollIntoView(), !o || !i)) return !0;
            let c = o.filter((e) => a.includes(e.type.name));
            n.ensureMarks(c);
          }
          return !0;
        },
      l_ = (e, t) => {
        let n = oQ((e) => e.type === t)(e.selection);
        if (!n) return !0;
        let r = e.doc.resolve(Math.max(0, n.pos - 1)).before(n.depth);
        if (void 0 === r) return !0;
        let i = e.doc.nodeAt(r);
        return (
          !(
            n.node.type === (null == i ? void 0 : i.type) && tf(e.doc, n.pos)
          ) || (e.join(n.pos), !0)
        );
      },
      lO = (e, t) => {
        let n = oQ((e) => e.type === t)(e.selection);
        if (!n) return !0;
        let r = e.doc.resolve(n.start).after(n.depth);
        if (void 0 === r) return !0;
        let i = e.doc.nodeAt(r);
        return (
          !(n.node.type === (null == i ? void 0 : i.type) && tf(e.doc, r)) ||
          (e.join(r), !0)
        );
      },
      lB =
        (e, t, n, r = {}) =>
        ({
          editor: i,
          tr: s,
          state: a,
          dispatch: o,
          chain: l,
          commands: c,
          can: u,
        }) => {
          let { extensions: d, splittableMarks: h } = i.extensionManager,
            p = a0(e, a.schema),
            m = a0(t, a.schema),
            { selection: f, storedMarks: g } = a,
            { $from: x, $to: v } = f,
            y = x.blockRange(v),
            b = g || (f.$to.parentOffset && f.$from.marks());
          if (!y) return !1;
          let j = oQ((e) => lk(e.type.name, d))(f);
          if (y.depth >= 1 && j && y.depth - j.depth <= 1) {
            if (j.node.type === p) return c.liftListItem(m);
            if (lk(j.node.type.name, d) && p.validContent(j.node.content) && o)
              return l()
                .command(() => (s.setNodeMarkup(j.pos, p), !0))
                .command(() => l_(s, p))
                .command(() => lO(s, p))
                .run();
          }
          return n && b && o
            ? l()
                .command(() => {
                  let e = u().wrapInList(p, r),
                    t = b.filter((e) => h.includes(e.type.name));
                  return (s.ensureMarks(t), !!e || c.clearNodes());
                })
                .wrapInList(p, r)
                .command(() => l_(s, p))
                .command(() => lO(s, p))
                .run()
            : l()
                .command(() => !!u().wrapInList(p, r) || c.clearNodes())
                .wrapInList(p, r)
                .command(() => l_(s, p))
                .command(() => lO(s, p))
                .run();
        },
      lV =
        (e, t = {}, n = {}) =>
        ({ state: r, commands: i }) => {
          let { extendEmptyMarkRange: s = !1 } = n,
            a = ot(e, r.schema);
          return ly(r, a, t)
            ? i.unsetMark(a, { extendEmptyMarkRange: s })
            : i.setMark(a, t);
        },
      lz =
        (e, t, n = {}) =>
        ({ state: r, commands: i }) => {
          let s,
            a = a0(e, r.schema),
            o = a0(t, r.schema),
            l = oI(r, a, n);
          return (r.selection.$anchor.sameParent(r.selection.$head) &&
            (s = r.selection.$anchor.parent.attrs),
          l)
            ? i.setNode(o, s)
            : i.setNode(a, { ...s, ...n });
        },
      lH =
        (e, t = {}) =>
        ({ state: n, commands: r }) => {
          let i = a0(e, n.schema);
          return oI(n, i, t) ? r.lift(i) : r.wrapIn(i, t);
        },
      l$ =
        () =>
        ({ state: e, dispatch: t }) => {
          let n = e.plugins;
          for (let r = 0; r < n.length; r += 1) {
            let i,
              s = n[r];
            if (s.spec.isInputRules && (i = s.getState(e))) {
              if (t) {
                let t = e.tr,
                  n = i.transform;
                for (let e = n.steps.length - 1; e >= 0; e -= 1)
                  t.step(n.steps[e].invert(n.docs[e]));
                if (i.text) {
                  let n = t.doc.resolve(i.from).marks();
                  t.replaceWith(i.from, i.to, e.schema.text(i.text, n));
                } else t.delete(i.from, i.to);
              }
              return !0;
            }
          }
          return !1;
        },
      lU =
        () =>
        ({ tr: e, dispatch: t }) => {
          let { selection: n } = e,
            { empty: r, ranges: i } = n;
          return (
            !!r ||
            (t &&
              i.forEach((t) => {
                e.removeMark(t.$from.pos, t.$to.pos);
              }),
            !0)
          );
        },
      lG =
        (e, t = {}) =>
        ({ tr: n, state: r, dispatch: i }) => {
          var s;
          let { extendEmptyMarkRange: a = !1 } = t,
            { selection: o } = n,
            l = ot(e, r.schema),
            { $from: c, empty: u, ranges: d } = o;
          if (!i) return !0;
          if (u && a) {
            let { from: e, to: t } = o,
              r =
                null == (s = c.marks().find((e) => e.type === l))
                  ? void 0
                  : s.attrs,
              i = oe(c, l, r);
            (i && ((e = i.from), (t = i.to)), n.removeMark(e, t, l));
          } else
            d.forEach((e) => {
              n.removeMark(e.$from.pos, e.$to.pos, l);
            });
          return (n.removeStoredMark(l), !0);
        },
      lW =
        (e, t = {}) =>
        ({ tr: n, state: r, dispatch: i }) => {
          let s = null,
            a = null,
            o = oR("string" == typeof e ? e : e.name, r.schema);
          return (
            !!o &&
            ("node" === o && (s = a0(e, r.schema)),
            "mark" === o && (a = ot(e, r.schema)),
            i &&
              n.selection.ranges.forEach((e) => {
                let i,
                  o,
                  l,
                  c,
                  u = e.$from.pos,
                  d = e.$to.pos;
                (n.selection.empty
                  ? r.doc.nodesBetween(u, d, (e, t) => {
                      s &&
                        s === e.type &&
                        ((l = Math.max(t, u)),
                        (c = Math.min(t + e.nodeSize, d)),
                        (i = t),
                        (o = e));
                    })
                  : r.doc.nodesBetween(u, d, (e, r) => {
                      (r < u &&
                        s &&
                        s === e.type &&
                        ((l = Math.max(r, u)),
                        (c = Math.min(r + e.nodeSize, d)),
                        (i = r),
                        (o = e)),
                        r >= u &&
                          r <= d &&
                          (s &&
                            s === e.type &&
                            n.setNodeMarkup(r, void 0, { ...e.attrs, ...t }),
                          a &&
                            e.marks.length &&
                            e.marks.forEach((i) => {
                              if (a === i.type) {
                                let s = Math.max(r, u),
                                  o = Math.min(r + e.nodeSize, d);
                                n.addMark(s, o, a.create({ ...i.attrs, ...t }));
                              }
                            })));
                    }),
                  o &&
                    (void 0 !== i &&
                      n.setNodeMarkup(i, void 0, { ...o.attrs, ...t }),
                    a &&
                      o.marks.length &&
                      o.marks.forEach((e) => {
                        a === e.type &&
                          n.addMark(l, c, a.create({ ...e.attrs, ...t }));
                      })));
              }),
            !0)
          );
        },
      lq =
        (e, t = {}) =>
        ({ state: n, dispatch: r }) =>
          nL(a0(e, n.schema), t)(n, r),
      lZ =
        (e, t = {}) =>
        ({ state: n, dispatch: r }) =>
          nV(a0(e, n.schema), t)(n, r),
      lK = class {
        constructor() {
          this.callbacks = {};
        }
        on(e, t) {
          return (
            this.callbacks[e] || (this.callbacks[e] = []),
            this.callbacks[e].push(t),
            this
          );
        }
        emit(e, ...t) {
          let n = this.callbacks[e];
          return (n && n.forEach((e) => e.apply(this, t)), this);
        }
        off(e, t) {
          let n = this.callbacks[e];
          return (
            n &&
              (t
                ? (this.callbacks[e] = n.filter((e) => e !== t))
                : delete this.callbacks[e]),
            this
          );
        }
        once(e, t) {
          let n = (...r) => {
            (this.off(e, n), t.apply(this, r));
          };
          return this.on(e, n);
        }
        removeAllListeners() {
          this.callbacks = {};
        }
      },
      lY = class {
        constructor(e) {
          var t;
          ((this.find = e.find),
            (this.handler = e.handler),
            (this.undoable = null == (t = e.undoable) || t));
        }
      },
      lJ = (e, t) => {
        if (a9(t)) return t.exec(e);
        let n = t(e);
        if (!n) return null;
        let r = [n.text];
        return (
          (r.index = n.index),
          (r.input = e),
          (r.data = n.data),
          n.replaceWith &&
            (n.text.includes(n.replaceWith) ||
              console.warn(
                '[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".',
              ),
            r.push(n.replaceWith)),
          r
        );
      };
    function lQ(e) {
      var t;
      let { editor: n, from: r, to: i, text: s, rules: a, plugin: o } = e,
        { view: l } = n;
      if (l.composing) return !1;
      let c = l.state.doc.resolve(r);
      if (
        c.parent.type.spec.code ||
        (null == (t = c.nodeBefore || c.nodeAfter)
          ? void 0
          : t.marks.find((e) => e.type.spec.code))
      )
        return !1;
      let u = !1,
        d = lv(c) + s;
      return (
        a.forEach((e) => {
          if (u) return;
          let t = lJ(d, e.find);
          if (!t) return;
          let a = l.state.tr,
            c = aU({ state: l.state, transaction: a }),
            h = { from: r - (t[0].length - s.length), to: i },
            { commands: p, chain: m, can: f } = new aG({ editor: n, state: c });
          null !==
            e.handler({
              state: c,
              range: h,
              match: t,
              commands: p,
              chain: m,
              can: f,
            }) &&
            a.steps.length &&
            (e.undoable &&
              a.setMeta(o, { transform: a, from: r, to: i, text: s }),
            l.dispatch(a),
            (u = !0));
        }),
        u
      );
    }
    function lX(e) {
      let { editor: t, rules: n } = e,
        r = new ne({
          state: {
            init: () => null,
            apply(e, i, s) {
              let a = e.getMeta(r);
              if (a) return a;
              let o = e.getMeta("applyInputRules");
              return (
                o &&
                  setTimeout(() => {
                    let { text: e } = o;
                    "string" == typeof e || (e = o1(x.from(e), s.schema));
                    let { from: i } = o,
                      a = i + e.length;
                    lQ({
                      editor: t,
                      from: i,
                      to: a,
                      text: e,
                      rules: n,
                      plugin: r,
                    });
                  }),
                e.selectionSet || e.docChanged ? null : i
              );
            },
          },
          props: {
            handleTextInput: (e, i, s, a) =>
              lQ({ editor: t, from: i, to: s, text: a, rules: n, plugin: r }),
            handleDOMEvents: {
              compositionend: (e) => (
                setTimeout(() => {
                  let { $cursor: i } = e.state.selection;
                  i &&
                    lQ({
                      editor: t,
                      from: i.pos,
                      to: i.pos,
                      text: "",
                      rules: n,
                      plugin: r,
                    });
                }),
                !1
              ),
            },
            handleKeyDown(e, i) {
              if ("Enter" !== i.key) return !1;
              let { $cursor: s } = e.state.selection;
              return (
                !!s &&
                lQ({
                  editor: t,
                  from: s.pos,
                  to: s.pos,
                  text: "\n",
                  rules: n,
                  plugin: r,
                })
              );
            },
          },
          isInputRules: !0,
        });
      return r;
    }
    function l0(e) {
      return Object.prototype.toString.call(e).slice(8, -1);
    }
    function l1(e) {
      return (
        "Object" === l0(e) &&
        e.constructor === Object &&
        Object.getPrototypeOf(e) === Object.prototype
      );
    }
    function l2(e, t) {
      let n = { ...e };
      return (
        l1(e) &&
          l1(t) &&
          Object.keys(t).forEach((r) => {
            l1(t[r]) && l1(e[r]) ? (n[r] = l2(e[r], t[r])) : (n[r] = t[r]);
          }),
        n
      );
    }
    var l5 = class {
        constructor(e = {}) {
          ((this.type = "extendable"),
            (this.parent = null),
            (this.child = null),
            (this.name = ""),
            (this.config = { name: this.name }),
            (this.config = { ...this.config, ...e }),
            (this.name = this.config.name));
        }
        get options() {
          return { ...(o5(oX(this, "addOptions", { name: this.name })) || {}) };
        }
        get storage() {
          return {
            ...(o5(
              oX(this, "addStorage", {
                name: this.name,
                options: this.options,
              }),
            ) || {}),
          };
        }
        configure(e = {}) {
          let t = this.extend({
            ...this.config,
            addOptions: () => l2(this.options, e),
          });
          return ((t.name = this.name), (t.parent = this.parent), t);
        }
        extend(e = {}) {
          let t = new this.constructor({ ...this.config, ...e });
          return (
            (t.parent = this),
            (this.child = t),
            (t.name = "name" in e ? e.name : t.parent.name),
            t
          );
        }
      },
      l3 = class e extends l5 {
        constructor() {
          (super(...arguments), (this.type = "mark"));
        }
        static create(t = {}) {
          return new e("function" == typeof t ? t() : t);
        }
        static handleExit({ editor: e, mark: t }) {
          let { tr: n } = e.state,
            r = e.state.selection.$from;
          if (r.pos === r.end()) {
            let i = r.marks();
            if (!i.find((e) => (null == e ? void 0 : e.type.name) === t.name))
              return !1;
            let s = i.find(
              (e) => (null == e ? void 0 : e.type.name) === t.name,
            );
            return (
              s && n.removeStoredMark(s),
              n.insertText(" ", r.pos),
              e.view.dispatch(n),
              !0
            );
          }
          return !1;
        }
        configure(e) {
          return super.configure(e);
        }
        extend(e) {
          let t = "function" == typeof e ? e() : e;
          return super.extend(t);
        }
      };
    function l4(e) {
      return "number" == typeof e;
    }
    var l9 = class {
        constructor(e) {
          ((this.find = e.find), (this.handler = e.handler));
        }
      },
      l7 = (e, t, n) => {
        if (a9(t)) return [...e.matchAll(t)];
        let r = t(e, n);
        return r
          ? r.map((t) => {
              let n = [t.text];
              return (
                (n.index = t.index),
                (n.input = e),
                (n.data = t.data),
                t.replaceWith &&
                  (t.text.includes(t.replaceWith) ||
                    console.warn(
                      '[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".',
                    ),
                  n.push(t.replaceWith)),
                n
              );
            })
          : [];
      };
    function l6(e) {
      let {
          editor: t,
          state: n,
          from: r,
          to: i,
          rule: s,
          pasteEvent: a,
          dropEvent: o,
        } = e,
        { commands: l, chain: c, can: u } = new aG({ editor: t, state: n }),
        d = [];
      return (
        n.doc.nodesBetween(r, i, (e, t) => {
          var h, p, m, f, g;
          if (
            (null == (p = null == (h = e.type) ? void 0 : h.spec)
              ? void 0
              : p.code) ||
            !(e.isText || e.isTextblock || e.isInline)
          )
            return;
          let x =
              null !=
              (g =
                null != (f = null == (m = e.content) ? void 0 : m.size)
                  ? f
                  : e.nodeSize)
                ? g
                : 0,
            v = Math.max(r, t),
            y = Math.min(i, t + x);
          v >= y ||
            l7(
              e.isText
                ? e.text || ""
                : e.textBetween(v - t, y - t, void 0, ""),
              s.find,
              a,
            ).forEach((e) => {
              if (void 0 === e.index) return;
              let t = v + e.index + 1,
                r = t + e[0].length,
                i = { from: n.tr.mapping.map(t), to: n.tr.mapping.map(r) },
                h = s.handler({
                  state: n,
                  range: i,
                  match: e,
                  commands: l,
                  chain: c,
                  can: u,
                  pasteEvent: a,
                  dropEvent: o,
                });
              d.push(h);
            });
        }),
        d.every((e) => null !== e)
      );
    }
    var l8 = null,
      ce = (e) => {
        var t;
        let n = new ClipboardEvent("paste", {
          clipboardData: new DataTransfer(),
        });
        return (null == (t = n.clipboardData) || t.setData("text/html", e), n);
      };
    function ct(e) {
      let t,
        { editor: n, rules: r } = e,
        i = null,
        s = !1,
        a = !1,
        o =
          "undefined" != typeof ClipboardEvent
            ? new ClipboardEvent("paste")
            : null;
      try {
        t = "undefined" != typeof DragEvent ? new DragEvent("drop") : null;
      } catch {
        t = null;
      }
      let l = ({ state: e, from: r, to: i, rule: s, pasteEvt: a }) => {
        let l = e.tr;
        if (
          l6({
            editor: n,
            state: aU({ state: e, transaction: l }),
            from: Math.max(r - 1, 0),
            to: i.b - 1,
            rule: s,
            pasteEvent: a,
            dropEvent: t,
          }) &&
          l.steps.length
        ) {
          try {
            t = "undefined" != typeof DragEvent ? new DragEvent("drop") : null;
          } catch {
            t = null;
          }
          return (
            (o =
              "undefined" != typeof ClipboardEvent
                ? new ClipboardEvent("paste")
                : null),
            l
          );
        }
      };
      return r.map(
        (e) =>
          new ne({
            view(e) {
              let t = (t) => {
                  var r;
                  (i = (
                    null == (r = e.dom.parentElement)
                      ? void 0
                      : r.contains(t.target)
                  )
                    ? e.dom.parentElement
                    : null) && (l8 = n);
                },
                r = () => {
                  l8 && (l8 = null);
                };
              return (
                window.addEventListener("dragstart", t),
                window.addEventListener("dragend", r),
                {
                  destroy() {
                    (window.removeEventListener("dragstart", t),
                      window.removeEventListener("dragend", r));
                  },
                }
              );
            },
            props: {
              handleDOMEvents: {
                drop: (e, n) => {
                  if (((a = i === e.dom.parentElement), (t = n), !a)) {
                    let e = l8;
                    (null == e ? void 0 : e.isEditable) &&
                      setTimeout(() => {
                        let t = e.state.selection;
                        t && e.commands.deleteRange({ from: t.from, to: t.to });
                      }, 10);
                  }
                  return !1;
                },
                paste: (e, t) => {
                  var n;
                  let r =
                    null == (n = t.clipboardData)
                      ? void 0
                      : n.getData("text/html");
                  return (
                    (o = t),
                    (s = !!(null == r ? void 0 : r.includes("data-pm-slice"))),
                    !1
                  );
                },
              },
            },
            appendTransaction: (t, n, r) => {
              let i = t[0],
                c = "paste" === i.getMeta("uiEvent") && !s,
                u = "drop" === i.getMeta("uiEvent") && !a,
                d = i.getMeta("applyPasteRules"),
                h = !!d;
              if (!c && !u && !h) return;
              if (h) {
                let { text: t } = d;
                "string" == typeof t || (t = o1(x.from(t), r.schema));
                let { from: n } = d,
                  i = n + t.length;
                return l({
                  rule: e,
                  state: r,
                  from: n,
                  to: { b: i },
                  pasteEvt: ce(t),
                });
              }
              let p = n.doc.content.findDiffStart(r.doc.content),
                m = n.doc.content.findDiffEnd(r.doc.content);
              if (l4(p) && m && p !== m.b)
                return l({ rule: e, state: r, from: p, to: m, pasteEvt: o });
            },
          }),
      );
    }
    var cn = class {
      constructor(e, t) {
        ((this.splittableMarks = []),
          (this.editor = t),
          (this.baseExtensions = e),
          (this.extensions = ls(e)),
          (this.schema = ln(this.extensions, t)),
          this.setupExtensions());
      }
      get commands() {
        return this.extensions.reduce((e, t) => {
          let n = {
              name: t.name,
              options: t.options,
              storage: this.editor.extensionStorage[t.name],
              editor: this.editor,
              type: lg(t.name, this.schema),
            },
            r = oX(t, "addCommands", n);
          return r ? { ...e, ...r() } : e;
        }, {});
      }
      get plugins() {
        let { editor: e } = this;
        return li([...this.extensions].reverse()).flatMap((t) => {
          let n = {
              name: t.name,
              options: t.options,
              storage: this.editor.extensionStorage[t.name],
              editor: e,
              type: lg(t.name, this.schema),
            },
            r = [],
            i = oX(t, "addKeyboardShortcuts", n),
            s = {};
          if (
            ("mark" === t.type &&
              oX(t, "exitable", n) &&
              (s.ArrowRight = () => l3.handleExit({ editor: e, mark: t })),
            i)
          ) {
            let t = Object.fromEntries(
              Object.entries(i()).map(([t, n]) => [t, () => n({ editor: e })]),
            );
            s = { ...s, ...t };
          }
          let a = aV(s);
          r.push(a);
          let o = oX(t, "addInputRules", n);
          if (lC(t, e.options.enableInputRules) && o) {
            let t = o();
            if (t && t.length) {
              let n = lX({ editor: e, rules: t }),
                i = Array.isArray(n) ? n : [n];
              r.push(...i);
            }
          }
          let l = oX(t, "addPasteRules", n);
          if (lC(t, e.options.enablePasteRules) && l) {
            let t = l();
            if (t && t.length) {
              let n = ct({ editor: e, rules: t });
              r.push(...n);
            }
          }
          let c = oX(t, "addProseMirrorPlugins", n);
          if (c) {
            let e = c();
            r.push(...e);
          }
          return r;
        });
      }
      get attributes() {
        return o9(this.extensions);
      }
      get nodeViews() {
        let { editor: e } = this,
          { nodeExtensions: t } = o4(this.extensions);
        return Object.fromEntries(
          t
            .filter((e) => !!oX(e, "addNodeView"))
            .map((t) => {
              let n = this.attributes.filter((e) => e.type === t.name),
                r = {
                  name: t.name,
                  options: t.options,
                  storage: this.editor.extensionStorage[t.name],
                  editor: e,
                  type: a0(t.name, this.schema),
                },
                i = oX(t, "addNodeView", r);
              if (!i) return [];
              let s = i();
              if (!s) return [];
              let a = (r, i, a, o, l) => {
                let c = o6(r, n);
                return s({
                  node: r,
                  view: i,
                  getPos: a,
                  decorations: o,
                  innerDecorations: l,
                  editor: e,
                  extension: t,
                  HTMLAttributes: c,
                });
              };
              return [t.name, a];
            }),
        );
      }
      get markViews() {
        let { editor: e } = this,
          { markExtensions: t } = o4(this.extensions);
        return Object.fromEntries(
          t
            .filter((e) => !!oX(e, "addMarkView"))
            .map((t) => {
              let n = this.attributes.filter((e) => e.type === t.name),
                r = {
                  name: t.name,
                  options: t.options,
                  storage: this.editor.extensionStorage[t.name],
                  editor: e,
                  type: ot(t.name, this.schema),
                },
                i = oX(t, "addMarkView", r);
              if (!i) return [];
              let s = (r, s, a) => {
                let o = o6(r, n);
                return i()({
                  mark: r,
                  view: s,
                  inline: a,
                  editor: e,
                  extension: t,
                  HTMLAttributes: o,
                  updateAttributes: (t) => {
                    cL(r, e, t);
                  },
                });
              };
              return [t.name, s];
            }),
        );
      }
      setupExtensions() {
        let e = this.extensions;
        ((this.editor.extensionStorage = Object.fromEntries(
          e.map((e) => [e.name, e.storage]),
        )),
          e.forEach((e) => {
            var t;
            let n = {
              name: e.name,
              options: e.options,
              storage: this.editor.extensionStorage[e.name],
              editor: this.editor,
              type: lg(e.name, this.schema),
            };
            "mark" === e.type &&
              (null == (t = o5(oX(e, "keepOnSplit", n))) || t) &&
              this.splittableMarks.push(e.name);
            let r = oX(e, "onBeforeCreate", n),
              i = oX(e, "onCreate", n),
              s = oX(e, "onUpdate", n),
              a = oX(e, "onSelectionUpdate", n),
              o = oX(e, "onTransaction", n),
              l = oX(e, "onFocus", n),
              c = oX(e, "onBlur", n),
              u = oX(e, "onDestroy", n);
            (r && this.editor.on("beforeCreate", r),
              i && this.editor.on("create", i),
              s && this.editor.on("update", s),
              a && this.editor.on("selectionUpdate", a),
              o && this.editor.on("transaction", o),
              l && this.editor.on("focus", l),
              c && this.editor.on("blur", c),
              u && this.editor.on("destroy", u));
          }));
      }
    };
    ((cn.resolve = ls),
      (cn.sort = li),
      (cn.flatten = o0),
      a$(
        {},
        {
          ClipboardTextSerializer: () => ci,
          Commands: () => cs,
          Delete: () => ca,
          Drop: () => co,
          Editable: () => cl,
          FocusEvents: () => cu,
          Keymap: () => cd,
          Paste: () => ch,
          Tabindex: () => cp,
          focusEventsPluginKey: () => cc,
        },
      ));
    var cr = class e extends l5 {
        constructor() {
          (super(...arguments), (this.type = "extension"));
        }
        static create(t = {}) {
          return new e("function" == typeof t ? t() : t);
        }
        configure(e) {
          return super.configure(e);
        }
        extend(e) {
          let t = "function" == typeof e ? e() : e;
          return super.extend(t);
        }
      },
      ci = cr.create({
        name: "clipboardTextSerializer",
        addOptions: () => ({ blockSeparator: void 0 }),
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("clipboardTextSerializer"),
              props: {
                clipboardTextSerializer: () => {
                  let { editor: e } = this,
                    { state: t, schema: n } = e,
                    { doc: r, selection: i } = t,
                    { ranges: s } = i,
                    a = Math.min(...s.map((e) => e.$from.pos)),
                    o = Math.max(...s.map((e) => e.$to.pos)),
                    l = ll(n);
                  return la(
                    r,
                    { from: a, to: o },
                    {
                      ...(void 0 !== this.options.blockSeparator
                        ? { blockSeparator: this.options.blockSeparator }
                        : {}),
                      textSerializers: l,
                    },
                  );
                },
              },
            }),
          ];
        },
      }),
      cs = cr.create({ name: "commands", addCommands: () => ({ ...aW }) }),
      ca = cr.create({
        name: "delete",
        onUpdate({ transaction: e, appendedTransactions: t }) {
          var n, r, i;
          let s = () => {
            var n, r, i, s;
            if (
              null !=
              (s =
                null ==
                (i =
                  null ==
                  (r =
                    null == (n = this.editor.options.coreExtensionOptions)
                      ? void 0
                      : n.delete)
                    ? void 0
                    : r.filterTransaction)
                  ? void 0
                  : i.call(r, e))
                ? s
                : e.getMeta("y-sync$")
            )
              return;
            let a = oZ(e.before, [e, ...t]);
            lp(a).forEach((t) => {
              a.mapping.mapResult(t.oldRange.from).deletedAfter &&
                a.mapping.mapResult(t.oldRange.to).deletedBefore &&
                a.before.nodesBetween(
                  t.oldRange.from,
                  t.oldRange.to,
                  (n, r) => {
                    let i = r + n.nodeSize - 2,
                      s = t.oldRange.from <= r && i <= t.oldRange.to;
                    this.editor.emit("delete", {
                      type: "node",
                      node: n,
                      from: r,
                      to: i,
                      newFrom: a.mapping.map(r),
                      newTo: a.mapping.map(i),
                      deletedRange: t.oldRange,
                      newRange: t.newRange,
                      partial: !s,
                      editor: this.editor,
                      transaction: e,
                      combinedTransform: a,
                    });
                  },
                );
            });
            let o = a.mapping;
            a.steps.forEach((t, n) => {
              var r, i;
              if (t instanceof e1) {
                let s = o.slice(n).map(t.from, -1),
                  l = o.slice(n).map(t.to),
                  c = o.invert().map(s, -1),
                  u = o.invert().map(l),
                  d =
                    null == (r = a.doc.nodeAt(s - 1))
                      ? void 0
                      : r.marks.some((e) => e.eq(t.mark)),
                  h =
                    null == (i = a.doc.nodeAt(l))
                      ? void 0
                      : i.marks.some((e) => e.eq(t.mark));
                this.editor.emit("delete", {
                  type: "mark",
                  mark: t.mark,
                  from: t.from,
                  to: t.to,
                  deletedRange: { from: c, to: u },
                  newRange: { from: s, to: l },
                  partial: !!(h || d),
                  editor: this.editor,
                  transaction: e,
                  combinedTransform: a,
                });
              }
            });
          };
          null ==
            (i =
              null ==
              (r =
                null == (n = this.editor.options.coreExtensionOptions)
                  ? void 0
                  : n.delete)
                ? void 0
                : r.async) || i
            ? setTimeout(s, 0)
            : s();
        },
      }),
      co = cr.create({
        name: "drop",
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("tiptapDrop"),
              props: {
                handleDrop: (e, t, n, r) => {
                  this.editor.emit("drop", {
                    editor: this.editor,
                    event: t,
                    slice: n,
                    moved: r,
                  });
                },
              },
            }),
          ];
        },
      }),
      cl = cr.create({
        name: "editable",
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("editable"),
              props: { editable: () => this.editor.options.editable },
            }),
          ];
        },
      }),
      cc = new nr("focusEvents"),
      cu = cr.create({
        name: "focusEvents",
        addProseMirrorPlugins() {
          let { editor: e } = this;
          return [
            new ne({
              key: cc,
              props: {
                handleDOMEvents: {
                  focus: (t, n) => {
                    e.isFocused = !0;
                    let r = e.state.tr
                      .setMeta("focus", { event: n })
                      .setMeta("addToHistory", !1);
                    return (t.dispatch(r), !1);
                  },
                  blur: (t, n) => {
                    e.isFocused = !1;
                    let r = e.state.tr
                      .setMeta("blur", { event: n })
                      .setMeta("addToHistory", !1);
                    return (t.dispatch(r), !1);
                  },
                },
              },
            }),
          ];
        },
      }),
      cd = cr.create({
        name: "keymap",
        addKeyboardShortcuts() {
          let e = () =>
              this.editor.commands.first(({ commands: e }) => [
                () => e.undoInputRule(),
                () =>
                  e.command(({ tr: t }) => {
                    let { selection: n, doc: r } = t,
                      { empty: i, $anchor: s } = n,
                      { pos: a, parent: o } = s,
                      l =
                        s.parent.isTextblock && a > 0
                          ? t.doc.resolve(a - 1)
                          : s,
                      c = l.parent.type.spec.isolating,
                      u = s.pos - s.parentOffset,
                      d =
                        c && 1 === l.parent.childCount
                          ? u === s.pos
                          : tH.atStart(r).from === a;
                    return (
                      !!i &&
                      !!o.type.isTextblock &&
                      !o.textContent.length &&
                      !!d &&
                      (!d || "paragraph" !== s.parent.type.name) &&
                      e.clearNodes()
                    );
                  }),
                () => e.deleteSelection(),
                () => e.joinBackward(),
                () => e.selectNodeBackward(),
              ]),
            t = () =>
              this.editor.commands.first(({ commands: e }) => [
                () => e.deleteSelection(),
                () => e.deleteCurrentNode(),
                () => e.joinForward(),
                () => e.selectNodeForward(),
              ]),
            n = {
              Enter: () =>
                this.editor.commands.first(({ commands: e }) => [
                  () => e.newlineInCode(),
                  () => e.createParagraphNear(),
                  () => e.liftEmptyBlock(),
                  () => e.splitBlock(),
                ]),
              "Mod-Enter": () => this.editor.commands.exitCode(),
              Backspace: e,
              "Mod-Backspace": e,
              "Shift-Backspace": e,
              Delete: t,
              "Mod-Delete": t,
              "Mod-a": () => this.editor.commands.selectAll(),
            },
            r = { ...n },
            i = {
              ...n,
              "Ctrl-h": e,
              "Alt-Backspace": e,
              "Ctrl-d": t,
              "Ctrl-Alt-Backspace": t,
              "Alt-Delete": t,
              "Alt-d": t,
              "Ctrl-a": () => this.editor.commands.selectTextblockStart(),
              "Ctrl-e": () => this.editor.commands.selectTextblockEnd(),
            };
          return oc() || oE() ? i : r;
        },
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("clearDocument"),
              appendTransaction: (e, t, n) => {
                if (e.some((e) => e.getMeta("composition"))) return;
                let r = e.some((e) => e.docChanged) && !t.doc.eq(n.doc),
                  i = e.some((e) => e.getMeta("preventClearDocument"));
                if (!r || i) return;
                let { empty: s, from: a, to: o } = t.selection,
                  l = tH.atStart(t.doc).from,
                  c = tH.atEnd(t.doc).to,
                  u = a === l && o === c;
                if (s || !u || !lS(n.doc)) return;
                let d = n.tr,
                  h = aU({ state: n, transaction: d }),
                  { commands: p } = new aG({ editor: this.editor, state: h });
                if ((p.clearNodes(), d.steps.length)) return d;
              },
            }),
          ];
        },
      }),
      ch = cr.create({
        name: "paste",
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("tiptapPaste"),
              props: {
                handlePaste: (e, t, n) => {
                  this.editor.emit("paste", {
                    editor: this.editor,
                    event: t,
                    slice: n,
                  });
                },
              },
            }),
          ];
        },
      }),
      cp = cr.create({
        name: "tabindex",
        addProseMirrorPlugins() {
          return [
            new ne({
              key: new nr("tabindex"),
              props: {
                attributes: () =>
                  this.editor.isEditable ? { tabindex: "0" } : {},
              },
            }),
          ];
        },
      }),
      cm = class e {
        constructor(e, t, n = !1, r = null) {
          ((this.currentNode = null),
            (this.actualDepth = null),
            (this.isBlock = n),
            (this.resolvedPos = e),
            (this.editor = t),
            (this.currentNode = r));
        }
        get name() {
          return this.node.type.name;
        }
        get node() {
          return this.currentNode || this.resolvedPos.node();
        }
        get element() {
          return this.editor.view.domAtPos(this.pos).node;
        }
        get depth() {
          var e;
          return null != (e = this.actualDepth) ? e : this.resolvedPos.depth;
        }
        get pos() {
          return this.resolvedPos.pos;
        }
        get content() {
          return this.node.content;
        }
        set content(e) {
          let t = this.from,
            n = this.to;
          if (this.isBlock) {
            if (0 === this.content.size)
              return void console.error(
                `You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`,
              );
            ((t = this.from + 1), (n = this.to - 1));
          }
          this.editor.commands.insertContentAt({ from: t, to: n }, e);
        }
        get attributes() {
          return this.node.attrs;
        }
        get textContent() {
          return this.node.textContent;
        }
        get size() {
          return this.node.nodeSize;
        }
        get from() {
          return this.isBlock
            ? this.pos
            : this.resolvedPos.start(this.resolvedPos.depth);
        }
        get range() {
          return { from: this.from, to: this.to };
        }
        get to() {
          return this.isBlock
            ? this.pos + this.size
            : this.resolvedPos.end(this.resolvedPos.depth) + +!this.node.isText;
        }
        get parent() {
          if (0 === this.depth) return null;
          let t = this.resolvedPos.start(this.resolvedPos.depth - 1);
          return new e(this.resolvedPos.doc.resolve(t), this.editor);
        }
        get before() {
          let t = this.resolvedPos.doc.resolve(
            this.from - (this.isBlock ? 1 : 2),
          );
          return (
            t.depth !== this.depth &&
              (t = this.resolvedPos.doc.resolve(this.from - 3)),
            new e(t, this.editor)
          );
        }
        get after() {
          let t = this.resolvedPos.doc.resolve(
            this.to + (this.isBlock ? 2 : 1),
          );
          return (
            t.depth !== this.depth &&
              (t = this.resolvedPos.doc.resolve(this.to + 3)),
            new e(t, this.editor)
          );
        }
        get children() {
          let t = [];
          return (
            this.node.content.forEach((n, r) => {
              let i = n.isBlock && !n.isTextblock,
                s = n.isAtom && !n.isText,
                a = this.pos + r + +!s;
              if (a < 0 || a > this.resolvedPos.doc.nodeSize - 2) return;
              let o = this.resolvedPos.doc.resolve(a);
              if (!i && o.depth <= this.depth) return;
              let l = new e(o, this.editor, i, i ? n : null);
              (i && (l.actualDepth = this.depth + 1),
                t.push(new e(o, this.editor, i, i ? n : null)));
            }),
            t
          );
        }
        get firstChild() {
          return this.children[0] || null;
        }
        get lastChild() {
          let e = this.children;
          return e[e.length - 1] || null;
        }
        closest(e, t = {}) {
          let n = null,
            r = this.parent;
          for (; r && !n; ) {
            if (r.node.type.name === e)
              if (Object.keys(t).length > 0) {
                let e = r.node.attrs,
                  n = Object.keys(t);
                for (let r = 0; r < n.length; r += 1) {
                  let i = n[r];
                  if (e[i] !== t[i]) break;
                }
              } else n = r;
            r = r.parent;
          }
          return n;
        }
        querySelector(e, t = {}) {
          return this.querySelectorAll(e, t, !0)[0] || null;
        }
        querySelectorAll(e, t = {}, n = !1) {
          let r = [];
          if (!this.children || 0 === this.children.length) return r;
          let i = Object.keys(t);
          return (
            this.children.forEach((s) => {
              (n && r.length > 0) ||
                (s.node.type.name === e &&
                  i.every((e) => t[e] === s.node.attrs[e]) &&
                  r.push(s),
                (n && r.length > 0) ||
                  (r = r.concat(s.querySelectorAll(e, t, n))));
            }),
            r
          );
        }
        setAttribute(e) {
          let { tr: t } = this.editor.state;
          (t.setNodeMarkup(this.from, void 0, { ...this.node.attrs, ...e }),
            this.editor.view.dispatch(t));
        }
      },
      cf = `.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;
    function cg(e, t, n) {
      let r = document.querySelector(
        `style[data-tiptap-style${n ? `-${n}` : ""}]`,
      );
      if (null !== r) return r;
      let i = document.createElement("style");
      return (
        t && i.setAttribute("nonce", t),
        i.setAttribute(`data-tiptap-style${n ? `-${n}` : ""}`, ""),
        (i.innerHTML = e),
        document.getElementsByTagName("head")[0].appendChild(i),
        i
      );
    }
    var cx = class extends lK {
      constructor(e = {}) {
        (super(),
          (this.css = null),
          (this.className = "tiptap"),
          (this.editorView = null),
          (this.isFocused = !1),
          (this.isInitialized = !1),
          (this.extensionStorage = {}),
          (this.instanceId = Math.random().toString(36).slice(2, 9)),
          (this.options = {
            element:
              "undefined" != typeof document
                ? document.createElement("div")
                : null,
            content: "",
            injectCSS: !0,
            injectNonce: void 0,
            extensions: [],
            autofocus: !1,
            editable: !0,
            editorProps: {},
            parseOptions: {},
            coreExtensionOptions: {},
            enableInputRules: !0,
            enablePasteRules: !0,
            enableCoreExtensions: !0,
            enableContentCheck: !1,
            emitContentError: !1,
            onBeforeCreate: () => null,
            onCreate: () => null,
            onMount: () => null,
            onUnmount: () => null,
            onUpdate: () => null,
            onSelectionUpdate: () => null,
            onTransaction: () => null,
            onFocus: () => null,
            onBlur: () => null,
            onDestroy: () => null,
            onContentError: ({ error: e }) => {
              throw e;
            },
            onPaste: () => null,
            onDrop: () => null,
            onDelete: () => null,
          }),
          (this.isCapturingTransaction = !1),
          (this.capturedTransaction = null),
          this.setOptions(e),
          this.createExtensionManager(),
          this.createCommandManager(),
          this.createSchema(),
          this.on("beforeCreate", this.options.onBeforeCreate),
          this.emit("beforeCreate", { editor: this }),
          this.on("mount", this.options.onMount),
          this.on("unmount", this.options.onUnmount),
          this.on("contentError", this.options.onContentError),
          this.on("create", this.options.onCreate),
          this.on("update", this.options.onUpdate),
          this.on("selectionUpdate", this.options.onSelectionUpdate),
          this.on("transaction", this.options.onTransaction),
          this.on("focus", this.options.onFocus),
          this.on("blur", this.options.onBlur),
          this.on("destroy", this.options.onDestroy),
          this.on("drop", ({ event: e, slice: t, moved: n }) =>
            this.options.onDrop(e, t, n),
          ),
          this.on("paste", ({ event: e, slice: t }) =>
            this.options.onPaste(e, t),
          ),
          this.on("delete", this.options.onDelete));
        const t = this.createDoc(),
          n = oo(t, this.options.autofocus);
        ((this.editorState = t6.create({
          doc: t,
          schema: this.schema,
          selection: n || void 0,
        })),
          this.options.element && this.mount(this.options.element));
      }
      mount(e) {
        if ("undefined" == typeof document)
          throw Error(
            "[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.",
          );
        (this.createView(e),
          this.emit("mount", { editor: this }),
          this.css &&
            !document.head.contains(this.css) &&
            document.head.appendChild(this.css),
          window.setTimeout(() => {
            this.isDestroyed ||
              (this.commands.focus(this.options.autofocus),
              this.emit("create", { editor: this }),
              (this.isInitialized = !0));
          }, 0));
      }
      unmount() {
        if (this.editorView) {
          let e = this.editorView.dom;
          ((null == e ? void 0 : e.editor) && delete e.editor,
            this.editorView.destroy());
        }
        if (
          ((this.editorView = null),
          (this.isInitialized = !1),
          this.css && !document.querySelectorAll(`.${this.className}`).length)
        )
          try {
            "function" == typeof this.css.remove
              ? this.css.remove()
              : this.css.parentNode &&
                this.css.parentNode.removeChild(this.css);
          } catch (e) {
            console.warn("Failed to remove CSS element:", e);
          }
        ((this.css = null), this.emit("unmount", { editor: this }));
      }
      get storage() {
        return this.extensionStorage;
      }
      get commands() {
        return this.commandManager.commands;
      }
      chain() {
        return this.commandManager.chain();
      }
      can() {
        return this.commandManager.can();
      }
      injectCSS() {
        this.options.injectCSS &&
          "undefined" != typeof document &&
          (this.css = cg(cf, this.options.injectNonce));
      }
      setOptions(e = {}) {
        ((this.options = { ...this.options, ...e }),
          this.editorView &&
            this.state &&
            !this.isDestroyed &&
            (this.options.editorProps &&
              this.view.setProps(this.options.editorProps),
            this.view.updateState(this.state)));
      }
      setEditable(e, t = !0) {
        (this.setOptions({ editable: e }),
          t &&
            this.emit("update", {
              editor: this,
              transaction: this.state.tr,
              appendedTransactions: [],
            }));
      }
      get isEditable() {
        return this.options.editable && this.view && this.view.editable;
      }
      get view() {
        return this.editorView
          ? this.editorView
          : new Proxy(
              {
                state: this.editorState,
                updateState: (e) => {
                  this.editorState = e;
                },
                dispatch: (e) => {
                  this.dispatchTransaction(e);
                },
                composing: !1,
                dragging: null,
                editable: !0,
                isDestroyed: !1,
              },
              {
                get: (e, t) => {
                  if (this.editorView) return this.editorView[t];
                  if ("state" === t) return this.editorState;
                  if (t in e) return Reflect.get(e, t);
                  throw Error(
                    `[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`,
                  );
                },
              },
            );
      }
      get state() {
        return (
          this.editorView && (this.editorState = this.view.state),
          this.editorState
        );
      }
      registerPlugin(e, t) {
        let n = o2(t)
            ? t(e, [...this.state.plugins])
            : [...this.state.plugins, e],
          r = this.state.reconfigure({ plugins: n });
        return (this.view.updateState(r), r);
      }
      unregisterPlugin(e) {
        if (this.isDestroyed) return;
        let t = this.state.plugins,
          n = t;
        if (
          ([].concat(e).forEach((e) => {
            let t = "string" == typeof e ? `${e}$` : e.key;
            n = n.filter((e) => !e.key.startsWith(t));
          }),
          t.length === n.length)
        )
          return;
        let r = this.state.reconfigure({ plugins: n });
        return (this.view.updateState(r), r);
      }
      createExtensionManager() {
        var e, t;
        let n = [
          ...(this.options.enableCoreExtensions
            ? [
                cl,
                ci.configure({
                  blockSeparator:
                    null ==
                    (t =
                      null == (e = this.options.coreExtensionOptions)
                        ? void 0
                        : e.clipboardTextSerializer)
                      ? void 0
                      : t.blockSeparator,
                }),
                cs,
                cu,
                cd,
                cp,
                co,
                ch,
                ca,
              ].filter(
                (e) =>
                  "object" != typeof this.options.enableCoreExtensions ||
                  !1 !== this.options.enableCoreExtensions[e.name],
              )
            : []),
          ...this.options.extensions,
        ].filter((e) =>
          ["extension", "node", "mark"].includes(null == e ? void 0 : e.type),
        );
        this.extensionManager = new cn(n, this);
      }
      createCommandManager() {
        this.commandManager = new aG({ editor: this });
      }
      createSchema() {
        this.schema = this.extensionManager.schema;
      }
      createDoc() {
        let e;
        try {
          e = oG(this.options.content, this.schema, this.options.parseOptions, {
            errorOnInvalidContent: this.options.enableContentCheck,
          });
        } catch (t) {
          if (
            !(t instanceof Error) ||
            ![
              "[tiptap error]: Invalid JSON content",
              "[tiptap error]: Invalid HTML content",
            ].includes(t.message)
          )
            throw t;
          (this.emit("contentError", {
            editor: this,
            error: t,
            disableCollaboration: () => {
              ("collaboration" in this.storage &&
                "object" == typeof this.storage.collaboration &&
                this.storage.collaboration &&
                (this.storage.collaboration.isDisabled = !0),
                (this.options.extensions = this.options.extensions.filter(
                  (e) => "collaboration" !== e.name,
                )),
                this.createExtensionManager());
            },
          }),
            (e = oG(
              this.options.content,
              this.schema,
              this.options.parseOptions,
              { errorOnInvalidContent: !1 },
            )));
        }
        return e;
      }
      createView(e) {
        var t;
        this.editorView = new aj(e, {
          ...this.options.editorProps,
          attributes: {
            role: "textbox",
            ...(null == (t = this.options.editorProps) ? void 0 : t.attributes),
          },
          dispatchTransaction: this.dispatchTransaction.bind(this),
          state: this.editorState,
          markViews: this.extensionManager.markViews,
          nodeViews: this.extensionManager.nodeViews,
        });
        let n = this.state.reconfigure({
          plugins: this.extensionManager.plugins,
        });
        (this.view.updateState(n),
          this.prependClass(),
          this.injectCSS(),
          (this.view.dom.editor = this));
      }
      createNodeViews() {
        this.view.isDestroyed ||
          this.view.setProps({
            markViews: this.extensionManager.markViews,
            nodeViews: this.extensionManager.nodeViews,
          });
      }
      prependClass() {
        this.view.dom.className = `${this.className} ${this.view.dom.className}`;
      }
      captureTransaction(e) {
        ((this.isCapturingTransaction = !0),
          e(),
          (this.isCapturingTransaction = !1));
        let t = this.capturedTransaction;
        return ((this.capturedTransaction = null), t);
      }
      dispatchTransaction(e) {
        if (this.view.isDestroyed) return;
        if (this.isCapturingTransaction) {
          if (!this.capturedTransaction) {
            this.capturedTransaction = e;
            return;
          }
          e.steps.forEach((e) => {
            var t;
            return null == (t = this.capturedTransaction) ? void 0 : t.step(e);
          });
          return;
        }
        let { state: t, transactions: n } = this.state.applyTransaction(e),
          r = !this.state.selection.eq(t.selection),
          i = n.includes(e),
          s = this.state;
        if (
          (this.emit("beforeTransaction", {
            editor: this,
            transaction: e,
            nextState: t,
          }),
          !i)
        )
          return;
        (this.view.updateState(t),
          this.emit("transaction", {
            editor: this,
            transaction: e,
            appendedTransactions: n.slice(1),
          }),
          r && this.emit("selectionUpdate", { editor: this, transaction: e }));
        let a = n.findLast((e) => e.getMeta("focus") || e.getMeta("blur")),
          o = null == a ? void 0 : a.getMeta("focus"),
          l = null == a ? void 0 : a.getMeta("blur");
        (o &&
          this.emit("focus", { editor: this, event: o.event, transaction: a }),
          l &&
            this.emit("blur", { editor: this, event: l.event, transaction: a }),
          e.getMeta("preventUpdate") ||
            !n.some((e) => e.docChanged) ||
            s.doc.eq(t.doc) ||
            this.emit("update", {
              editor: this,
              transaction: e,
              appendedTransactions: n.slice(1),
            }));
      }
      getAttributes(e) {
        return lu(this.state, e);
      }
      isActive(e, t) {
        let n = "string" == typeof e ? e : null,
          r = "string" == typeof e ? t : e;
        return lb(this.state, n, r);
      }
      getJSON() {
        return this.state.doc.toJSON();
      }
      getHTML() {
        return o1(this.state.doc.content, this.schema);
      }
      getText(e) {
        let { blockSeparator: t = "\n\n", textSerializers: n = {} } = e || {};
        return lo(this.state.doc, {
          blockSeparator: t,
          textSerializers: { ...ll(this.schema), ...n },
        });
      }
      get isEmpty() {
        return lS(this.state.doc);
      }
      destroy() {
        (this.emit("destroy"), this.unmount(), this.removeAllListeners());
      }
      get isDestroyed() {
        var e, t;
        return (
          null ==
            (t = null == (e = this.editorView) ? void 0 : e.isDestroyed) || t
        );
      }
      $node(e, t) {
        var n;
        return (
          (null == (n = this.$doc) ? void 0 : n.querySelector(e, t)) || null
        );
      }
      $nodes(e, t) {
        var n;
        return (
          (null == (n = this.$doc) ? void 0 : n.querySelectorAll(e, t)) || null
        );
      }
      $pos(e) {
        return new cm(this.state.doc.resolve(e), this);
      }
      get $doc() {
        return this.$pos(0);
      }
    };
    function cv(e) {
      return new lY({
        find: e.find,
        handler: ({ state: t, range: n, match: r }) => {
          let i = o5(e.getAttributes, void 0, r);
          if (!1 === i || null === i) return null;
          let { tr: s } = t,
            a = r[r.length - 1],
            o = r[0];
          if (a) {
            let r = o.search(/\S/),
              l = n.from + o.indexOf(a),
              c = l + a.length;
            if (
              lm(n.from, n.to, t.doc)
                .filter((t) =>
                  t.mark.type.excluded.find(
                    (n) => n === e.type && n !== t.mark.type,
                  ),
                )
                .filter((e) => e.to > l).length
            )
              return null;
            (c < n.to && s.delete(c, n.to),
              l > n.from && s.delete(n.from + r, l));
            let u = n.from + r + a.length;
            (s.addMark(n.from + r, u, e.type.create(i || {})),
              s.removeStoredMark(e.type));
          }
        },
        undoable: e.undoable,
      });
    }
    function cy(e) {
      return new lY({
        find: e.find,
        handler: ({ state: t, range: n, match: r }) => {
          let i = o5(e.getAttributes, void 0, r) || {},
            { tr: s } = t,
            a = n.from,
            o = n.to,
            l = e.type.create(i);
          if (r[1]) {
            let e = a + r[0].lastIndexOf(r[1]);
            e > o ? (e = o) : (o = e + r[1].length);
            let t = r[0][r[0].length - 1];
            (s.insertText(t, a + r[0].length - 1), s.replaceWith(e, o, l));
          } else if (r[0]) {
            let t = e.type.isInline ? a : a - 1;
            s.insert(t, e.type.create(i)).delete(
              s.mapping.map(a),
              s.mapping.map(o),
            );
          }
          s.scrollIntoView();
        },
        undoable: e.undoable,
      });
    }
    function cb(e) {
      return new lY({
        find: e.find,
        handler: ({ state: t, range: n, match: r }) => {
          let i = t.doc.resolve(n.from),
            s = o5(e.getAttributes, void 0, r) || {};
          if (!i.node(-1).canReplaceWith(i.index(-1), i.indexAfter(-1), e.type))
            return null;
          t.tr.delete(n.from, n.to).setBlockType(n.from, n.from, e.type, s);
        },
        undoable: e.undoable,
      });
    }
    function cj(e) {
      return new lY({
        find: e.find,
        handler: ({ state: t, range: n, match: r, chain: i }) => {
          let s = o5(e.getAttributes, void 0, r) || {},
            a = t.tr.delete(n.from, n.to),
            o = a.doc.resolve(n.from).blockRange(),
            l = o && tr(o, e.type, s);
          if (!l) return null;
          if ((a.wrap(o, l), e.keepMarks && e.editor)) {
            let { selection: n, storedMarks: r } = t,
              { splittableMarks: i } = e.editor.extensionManager,
              s = r || (n.$to.parentOffset && n.$from.marks());
            if (s) {
              let e = s.filter((e) => i.includes(e.type.name));
              a.ensureMarks(e);
            }
          }
          if (e.keepAttributes) {
            let t =
              "bulletList" === e.type.name || "orderedList" === e.type.name
                ? "listItem"
                : "taskList";
            i().updateAttributes(t, s).run();
          }
          let c = a.doc.resolve(n.from - 1).nodeBefore;
          c &&
            c.type === e.type &&
            tf(a.doc, n.from - 1) &&
            (!e.joinPredicate || e.joinPredicate(r, c)) &&
            a.join(n.from - 1);
        },
        undoable: e.undoable,
      });
    }
    function cw(e, t) {
      let { selection: n } = e,
        { $from: r } = n;
      if (n instanceof tZ) {
        let e = r.index();
        return r.parent.canReplaceWith(e, e + 1, t);
      }
      let i = r.depth;
      for (; i >= 0; ) {
        let e = r.index(i);
        if (r.node(i).contentMatchAt(e).matchType(t)) return !0;
        i -= 1;
      }
      return !1;
    }
    function cC(e) {
      return e.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&");
    }
    function ck(e) {
      if (!(null == e ? void 0 : e.trim())) return {};
      let t = {},
        n = [],
        r = e.replace(
          /["']([^"']*)["']/g,
          (e) => (n.push(e), `__QUOTED_${n.length - 1}__`),
        ),
        i = r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);
      i && (t.class = i.map((e) => e.trim().slice(1)).join(" "));
      let s = r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);
      s && (t.id = s[1]);
      let a = /([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;
      Array.from(r.matchAll(a)).forEach(([, e, r]) => {
        var i;
        let s =
          n[
            parseInt(
              (null == (i = r.match(/__QUOTED_(\d+)__/)) ? void 0 : i[1]) ||
                "0",
              10,
            )
          ];
        s && (t[e] = s.slice(1, -1));
      });
      let o = r
        .replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g, "")
        .replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g, "")
        .replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g, "")
        .trim();
      return (
        o &&
          o
            .split(/\s+/)
            .filter(Boolean)
            .forEach((e) => {
              e.match(/^[a-zA-Z][\w-]*$/) && (t[e] = !0);
            }),
        t
      );
    }
    function cS(e) {
      if (!e || 0 === Object.keys(e).length) return "";
      let t = [];
      return (
        e.class &&
          String(e.class)
            .split(/\s+/)
            .filter(Boolean)
            .forEach((e) => t.push(`.${e}`)),
        e.id && t.push(`#${e.id}`),
        Object.entries(e).forEach(([e, n]) => {
          "class" !== e &&
            "id" !== e &&
            (!0 === n
              ? t.push(e)
              : !1 !== n && null != n && t.push(`${e}="${String(n)}"`));
        }),
        t.join(" ")
      );
    }
    function cN(e) {
      let {
          nodeName: t,
          name: n,
          parseAttributes: r = ck,
          serializeAttributes: i = cS,
          defaultAttributes: s = {},
          requiredAttributes: a = [],
          allowedAttributes: o,
        } = e,
        l = n || t,
        c = (e) => {
          if (!o) return e;
          let t = {};
          return (
            o.forEach((n) => {
              n in e && (t[n] = e[n]);
            }),
            t
          );
        };
      return {
        parseMarkdown: (e, n) => {
          let r = { ...s, ...e.attributes };
          return n.createNode(t, r, []);
        },
        markdownTokenizer: {
          name: t,
          level: "block",
          start(e) {
            var t;
            let n = RegExp(`^:::${l}(?:\\s|$)`, "m"),
              r = null == (t = e.match(n)) ? void 0 : t.index;
            return void 0 !== r ? r : -1;
          },
          tokenize(e, n, i) {
            let s = RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),
              o = e.match(s);
            if (!o) return;
            let c = r(o[1] || "");
            if (!a.find((e) => !(e in c)))
              return { type: t, raw: o[0], attributes: c };
          },
        },
        renderMarkdown: (e) => {
          let t = i(c(e.attrs || {})),
            n = t ? ` {${t}}` : "";
          return `:::${l}${n} :::`;
        },
      };
    }
    function cE(e) {
      let {
          nodeName: t,
          name: n,
          getContent: r,
          parseAttributes: i = ck,
          serializeAttributes: s = cS,
          defaultAttributes: a = {},
          content: o = "block",
          allowedAttributes: l,
        } = e,
        c = n || t,
        u = (e) => {
          if (!l) return e;
          let t = {};
          return (
            l.forEach((n) => {
              n in e && (t[n] = e[n]);
            }),
            t
          );
        };
      return {
        parseMarkdown: (e, n) => {
          let i;
          if (r) {
            let t = r(e);
            i = "string" == typeof t ? [{ type: "text", text: t }] : t;
          } else
            i =
              "block" === o
                ? n.parseChildren(e.tokens || [])
                : n.parseInline(e.tokens || []);
          let s = { ...a, ...e.attributes };
          return n.createNode(t, s, i);
        },
        markdownTokenizer: {
          name: t,
          level: "block",
          start(e) {
            var t;
            let n = RegExp(`^:::${c}`, "m"),
              r = null == (t = e.match(n)) ? void 0 : t.index;
            return void 0 !== r ? r : -1;
          },
          tokenize(e, n, r) {
            var s;
            let a = RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),
              l = e.match(a);
            if (!l) return;
            let [u, d = ""] = l,
              h = i(d),
              p = 1,
              m = u.length,
              f = "",
              g = /^:::([\w-]*)(\s.*)?/gm,
              x = e.slice(m);
            for (g.lastIndex = 0; ; ) {
              let n = g.exec(x);
              if (null === n) break;
              let i = n.index,
                a = n[1];
              if (null == (s = n[2]) || !s.endsWith(":::")) {
                if (a) p += 1;
                else if (0 == (p -= 1)) {
                  let s = x.slice(0, i);
                  f = s.trim();
                  let a = e.slice(0, m + i + n[0].length),
                    l = [];
                  if (f)
                    if ("block" === o)
                      for (
                        (l = r.blockTokens(s)).forEach((e) => {
                          e.text &&
                            (!e.tokens || 0 === e.tokens.length) &&
                            (e.tokens = r.inlineTokens(e.text));
                        });
                        l.length > 0;

                      ) {
                        let e = l[l.length - 1];
                        if (
                          "paragraph" !== e.type ||
                          (e.text && "" !== e.text.trim())
                        )
                          break;
                        l.pop();
                      }
                    else l = r.inlineTokens(f);
                  return {
                    type: t,
                    raw: a,
                    attributes: h,
                    content: f,
                    tokens: l,
                  };
                }
              }
            }
          },
        },
        renderMarkdown: (e, t) => {
          let n = s(u(e.attrs || {})),
            r = n ? ` {${n}}` : "",
            i = t.renderChildren(e.content || [], "\n\n");
          return `:::${c}${r}

${i}

:::`;
        },
      };
    }
    function cA(e) {
      if (!e.trim()) return {};
      let t = {},
        n = /(\w+)=(?:"([^"]*)"|'([^']*)')/g,
        r = n.exec(e);
      for (; null !== r; ) {
        let [, i, s, a] = r;
        ((t[i] = s || a), (r = n.exec(e)));
      }
      return t;
    }
    function cD(e) {
      return Object.entries(e)
        .filter(([, e]) => null != e)
        .map(([e, t]) => `${e}="${t}"`)
        .join(" ");
    }
    function cI(e) {
      let {
          nodeName: t,
          name: n,
          getContent: r,
          parseAttributes: i = cA,
          serializeAttributes: s = cD,
          defaultAttributes: a = {},
          selfClosing: o = !1,
          allowedAttributes: l,
        } = e,
        c = n || t,
        u = (e) => {
          if (!l) return e;
          let t = {};
          return (
            l.forEach((n) => {
              n in e && (t[n] = e[n]);
            }),
            t
          );
        },
        d = c.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      return {
        parseMarkdown: (e, n) => {
          let i = { ...a, ...e.attributes };
          if (o) return n.createNode(t, i);
          let s = r ? r(e) : e.content || "";
          return s
            ? n.createNode(t, i, [n.createTextNode(s)])
            : n.createNode(t, i, []);
        },
        markdownTokenizer: {
          name: t,
          level: "inline",
          start(e) {
            let t = o
                ? RegExp(`\\[${d}\\s*[^\\]]*\\]`)
                : RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),
              n = e.match(t),
              r = null == n ? void 0 : n.index;
            return void 0 !== r ? r : -1;
          },
          tokenize(e, n, r) {
            let s = o
                ? RegExp(`^\\[${d}\\s*([^\\]]*)\\]`)
                : RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),
              a = e.match(s);
            if (!a) return;
            let l = "",
              c = "";
            if (o) {
              let [, e] = a;
              c = e;
            } else {
              let [, e, t] = a;
              ((c = e), (l = t || ""));
            }
            let u = i(c.trim());
            return { type: t, raw: a[0], content: l.trim(), attributes: u };
          },
        },
        renderMarkdown: (e) => {
          let t = "";
          r
            ? (t = r(e))
            : e.content &&
              e.content.length > 0 &&
              (t = e.content
                .filter((e) => "text" === e.type)
                .map((e) => e.text)
                .join(""));
          let n = s(u(e.attrs || {})),
            i = n ? ` ${n}` : "";
          return o ? `[${c}${i}]` : `[${c}${i}]${t}[/${c}]`;
        },
      };
    }
    function cM(e, t, n) {
      var r, i, s, a;
      let o = e.split("\n"),
        l = [],
        c = "",
        u = 0,
        d = t.baseIndentSize || 2;
      for (; u < o.length; ) {
        let e,
          h = o[u],
          p = h.match(t.itemPattern);
        if (!p)
          if (l.length > 0) break;
          else {
            if ("" !== h.trim()) return;
            u += 1;
            continue;
          }
        let m = t.extractItemData(p),
          { indentLevel: f, mainContent: g } = m;
        c = `${c}${h}
`;
        let x = [g];
        for (u += 1; u < o.length; ) {
          let e = o[u];
          if ("" === e.trim()) {
            let t = o.slice(u + 1).findIndex((e) => "" !== e.trim());
            if (-1 === t) break;
            if (
              ((null ==
              (i = null == (r = o[u + 1 + t].match(/^(\s*)/)) ? void 0 : r[1])
                ? void 0
                : i.length) || 0) > f
            ) {
              (x.push(e),
                (c = `${c}${e}
`),
                (u += 1));
              continue;
            }
            break;
          }
          if (
            ((null == (a = null == (s = e.match(/^(\s*)/)) ? void 0 : s[1])
              ? void 0
              : a.length) || 0) > f
          )
            (x.push(e),
              (c = `${c}${e}
`),
              (u += 1));
          else break;
        }
        let v = x.slice(1);
        if (v.length > 0) {
          let r = v.map((e) => e.slice(f + d)).join("\n");
          r.trim() &&
            (e = t.customNestedParser
              ? t.customNestedParser(r)
              : n.blockTokens(r));
        }
        let y = t.createToken(m, e);
        l.push(y);
      }
      if (0 !== l.length) return { items: l, raw: c.trim() };
    }
    function cT(e, t, n, r) {
      if (!e || !Array.isArray(e.content)) return "";
      let i = "function" == typeof n ? n(r) : n,
        [s, ...a] = e.content,
        o = t.renderChildren([s]),
        l = [`${i}${o}`];
      return (
        a &&
          a.length > 0 &&
          a.forEach((e) => {
            let n = t.renderChildren([e]);
            if (n) {
              let e = n
                .split("\n")
                .map((e) => (e ? t.indent(e) : ""))
                .join("\n");
              l.push(e);
            }
          }),
        l.join("\n")
      );
    }
    function cL(e, t, n = {}) {
      let { state: r } = t,
        { doc: i, tr: s } = r,
        a = e;
      (i.descendants((t, r) => {
        let i = s.mapping.map(r),
          o = s.mapping.map(r) + t.nodeSize,
          l = null;
        if (
          (t.marks.forEach((e) => {
            if (e !== a) return !1;
            l = e;
          }),
          !l)
        )
          return;
        let c = !1;
        if (
          (Object.keys(n).forEach((e) => {
            n[e] !== l.attrs[e] && (c = !0);
          }),
          c)
        ) {
          let t = e.type.create({ ...e.attrs, ...n });
          (s.removeMark(i, o, e.type), s.addMark(i, o, t));
        }
      }),
        s.docChanged && t.view.dispatch(s));
    }
    a$(
      {},
      {
        createAtomBlockMarkdownSpec: () => cN,
        createBlockMarkdownSpec: () => cE,
        createInlineMarkdownSpec: () => cI,
        parseAttributes: () => ck,
        parseIndentedBlocks: () => cM,
        renderNestedMarkdownContent: () => cT,
        serializeAttributes: () => cS,
      },
    );
    var cP = class {
        constructor(e, t, n) {
          ((this.component = e),
            (this.editor = t.editor),
            (this.options = { ...n }),
            (this.mark = t.mark),
            (this.HTMLAttributes = t.HTMLAttributes));
        }
        get dom() {
          return this.editor.view.dom;
        }
        get contentDOM() {
          return null;
        }
        updateAttributes(e, t) {
          cL(t || this.mark, this.editor, e);
        }
        ignoreMutation(e) {
          return (
            !this.dom ||
            !this.contentDOM ||
            ("function" == typeof this.options.ignoreMutation
              ? this.options.ignoreMutation({ mutation: e })
              : !(
                  "selection" === e.type ||
                  (this.dom.contains(e.target) &&
                    "childList" === e.type &&
                    (oc() || ol()) &&
                    this.editor.isFocused &&
                    [
                      ...Array.from(e.addedNodes),
                      ...Array.from(e.removedNodes),
                    ].every((e) => e.isContentEditable))
                ) &&
                ((this.contentDOM === e.target && "attributes" === e.type) ||
                  !this.contentDOM.contains(e.target)))
          );
        }
      },
      cR = class e extends l5 {
        constructor() {
          (super(...arguments), (this.type = "node"));
        }
        static create(t = {}) {
          return new e("function" == typeof t ? t() : t);
        }
        configure(e) {
          return super.configure(e);
        }
        extend(e) {
          let t = "function" == typeof e ? e() : e;
          return super.extend(t);
        }
      },
      cF = class {
        constructor(e, t, n) {
          ((this.isDragging = !1),
            (this.component = e),
            (this.editor = t.editor),
            (this.options = { stopEvent: null, ignoreMutation: null, ...n }),
            (this.extension = t.extension),
            (this.node = t.node),
            (this.decorations = t.decorations),
            (this.innerDecorations = t.innerDecorations),
            (this.view = t.view),
            (this.HTMLAttributes = t.HTMLAttributes),
            (this.getPos = t.getPos),
            this.mount());
        }
        mount() {}
        get dom() {
          return this.editor.view.dom;
        }
        get contentDOM() {
          return null;
        }
        onDragStart(e) {
          var t, n, r, i, s, a, o;
          let { view: l } = this.editor,
            c = e.target,
            u =
              3 === c.nodeType
                ? null == (t = c.parentElement)
                  ? void 0
                  : t.closest("[data-drag-handle]")
                : c.closest("[data-drag-handle]");
          if (
            !this.dom ||
            (null == (n = this.contentDOM) ? void 0 : n.contains(c)) ||
            !u
          )
            return;
          let d = 0,
            h = 0;
          if (this.dom !== u) {
            let t = this.dom.getBoundingClientRect(),
              n = u.getBoundingClientRect(),
              o =
                null != (i = e.offsetX)
                  ? i
                  : null == (r = e.nativeEvent)
                    ? void 0
                    : r.offsetX,
              l =
                null != (a = e.offsetY)
                  ? a
                  : null == (s = e.nativeEvent)
                    ? void 0
                    : s.offsetY;
            ((d = n.x - t.x + o), (h = n.y - t.y + l));
          }
          let p = this.dom.cloneNode(!0);
          try {
            let e = this.dom.getBoundingClientRect();
            ((p.style.width = `${Math.round(e.width)}px`),
              (p.style.height = `${Math.round(e.height)}px`),
              (p.style.boxSizing = "border-box"),
              (p.style.pointerEvents = "none"));
          } catch {}
          let m = null;
          try {
            (((m = document.createElement("div")).style.position = "absolute"),
              (m.style.top = "-9999px"),
              (m.style.left = "-9999px"),
              (m.style.pointerEvents = "none"),
              m.appendChild(p),
              document.body.appendChild(m),
              null == (o = e.dataTransfer) || o.setDragImage(p, d, h));
          } finally {
            m &&
              setTimeout(() => {
                try {
                  null == m || m.remove();
                } catch {}
              }, 0);
          }
          let f = this.getPos();
          if ("number" != typeof f) return;
          let g = tZ.create(l.state.doc, f),
            x = l.state.tr.setSelection(g);
          l.dispatch(x);
        }
        stopEvent(e) {
          var t;
          if (!this.dom) return !1;
          if ("function" == typeof this.options.stopEvent)
            return this.options.stopEvent({ event: e });
          let n = e.target;
          if (
            !(
              this.dom.contains(n) &&
              !(null == (t = this.contentDOM) ? void 0 : t.contains(n))
            )
          )
            return !1;
          let r = e.type.startsWith("drag"),
            i = "drop" === e.type;
          if (
            (["INPUT", "BUTTON", "SELECT", "TEXTAREA"].includes(n.tagName) ||
              n.isContentEditable) &&
            !i &&
            !r
          )
            return !0;
          let { isEditable: s } = this.editor,
            { isDragging: a } = this,
            o = !!this.node.type.spec.draggable,
            l = tZ.isSelectable(this.node),
            c = "copy" === e.type,
            u = "paste" === e.type,
            d = "cut" === e.type,
            h = "mousedown" === e.type;
          if (
            (!o && l && r && e.target === this.dom && e.preventDefault(),
            o && r && !a && e.target === this.dom)
          )
            return (e.preventDefault(), !1);
          if (o && s && !a && h) {
            let e = n.closest("[data-drag-handle]");
            e &&
              (this.dom === e || this.dom.contains(e)) &&
              ((this.isDragging = !0),
              document.addEventListener(
                "dragend",
                () => {
                  this.isDragging = !1;
                },
                { once: !0 },
              ),
              document.addEventListener(
                "drop",
                () => {
                  this.isDragging = !1;
                },
                { once: !0 },
              ),
              document.addEventListener(
                "mouseup",
                () => {
                  this.isDragging = !1;
                },
                { once: !0 },
              ));
          }
          return !a && !i && !c && !u && !d && (!h || !l);
        }
        ignoreMutation(e) {
          return (
            !this.dom ||
            !this.contentDOM ||
            ("function" == typeof this.options.ignoreMutation
              ? this.options.ignoreMutation({ mutation: e })
              : !!this.node.isLeaf ||
                !!this.node.isAtom ||
                (!(
                  "selection" === e.type ||
                  (this.dom.contains(e.target) &&
                    "childList" === e.type &&
                    (oc() || ol()) &&
                    this.editor.isFocused &&
                    [
                      ...Array.from(e.addedNodes),
                      ...Array.from(e.removedNodes),
                    ].every((e) => e.isContentEditable))
                ) &&
                  ((this.contentDOM === e.target && "attributes" === e.type) ||
                    !this.contentDOM.contains(e.target))))
          );
        }
        updateAttributes(e) {
          this.editor.commands.command(({ tr: t }) => {
            let n = this.getPos();
            return (
              "number" == typeof n &&
              (t.setNodeMarkup(n, void 0, { ...this.node.attrs, ...e }), !0)
            );
          });
        }
        deleteNode() {
          let e = this.getPos();
          if ("number" != typeof e) return;
          let t = e + this.node.nodeSize;
          this.editor.commands.deleteRange({ from: e, to: t });
        }
      };
    function c_(e) {
      return new l9({
        find: e.find,
        handler: ({ state: t, range: n, match: r, pasteEvent: i }) => {
          let s = o5(e.getAttributes, void 0, r, i);
          if (!1 === s || null === s) return null;
          let { tr: a } = t,
            o = r[r.length - 1],
            l = r[0],
            c = n.to;
          if (o) {
            let r = l.search(/\S/),
              i = n.from + l.indexOf(o),
              u = i + o.length;
            if (
              lm(n.from, n.to, t.doc)
                .filter((t) =>
                  t.mark.type.excluded.find(
                    (n) => n === e.type && n !== t.mark.type,
                  ),
                )
                .filter((e) => e.to > i).length
            )
              return null;
            (u < n.to && a.delete(u, n.to),
              i > n.from && a.delete(n.from + r, i),
              (c = n.from + r + o.length),
              a.addMark(n.from + r, c, e.type.create(s || {})),
              a.removeStoredMark(e.type));
          }
        },
      });
    }
    function cO(e) {
      var t;
      let {
          char: n,
          allowSpaces: r,
          allowToIncludeChar: i,
          allowedPrefixes: s,
          startOfLine: a,
          $position: o,
        } = e,
        l = r && !i,
        c = cC(n),
        u = RegExp(`\\s${c}$`),
        d = a ? "^" : "",
        h = i ? "" : c,
        p = l
          ? RegExp(`${d}${c}.*?(?=\\s${h}|$)`, "gm")
          : RegExp(`${d}(?:^)?${c}[^\\s${h}]*`, "gm"),
        m =
          (null == (t = o.nodeBefore) ? void 0 : t.isText) && o.nodeBefore.text;
      if (!m) return null;
      let f = o.pos - m.length,
        g = Array.from(m.matchAll(p)).pop();
      if (!g || void 0 === g.input || void 0 === g.index) return null;
      let x = g.input.slice(Math.max(0, g.index - 1), g.index),
        v = RegExp(`^[${null == s ? void 0 : s.join("")}\0]?$`).test(x);
      if (null !== s && !v) return null;
      let y = f + g.index,
        b = y + g[0].length;
      return (l && u.test(m.slice(b - 1, b + 1)) && ((g[0] += " "), (b += 1)),
      y < o.pos && b >= o.pos)
        ? { range: { from: y, to: b }, query: g[0].slice(n.length), text: g[0] }
        : null;
    }
    e.s(
      [
        "Editor",
        () => cx,
        "Extension",
        () => cr,
        "Mark",
        () => l3,
        "MarkView",
        () => cP,
        "Node",
        () => cR,
        "NodeView",
        () => cF,
        "callOrReturn",
        () => o5,
        "canInsertNode",
        () => cw,
        "combineTransactionSteps",
        () => oZ,
        "escapeForRegEx",
        () => cC,
        "findChildrenInRange",
        () => oY,
        "getAttributes",
        () => lu,
        "getChangedRanges",
        () => lp,
        "getExtensionField",
        () => oX,
        "getMarksBetween",
        () => lm,
        "getNodeAtPosition",
        () => lf,
        "getNodeType",
        () => a0,
        "getRenderedAttributes",
        () => o6,
        "isAtEndOfNode",
        () => lj,
        "isAtStartOfNode",
        () => lw,
        "isNodeActive",
        () => oI,
        "isNodeEmpty",
        () => lS,
        "isNodeSelection",
        () => lN,
        "markInputRule",
        () => cv,
        "markPasteRule",
        () => c_,
        "mergeAttributes",
        () => o7,
        "nodeInputRule",
        () => cy,
        "parseIndentedBlocks",
        () => cM,
        "renderNestedMarkdownContent",
        () => cT,
        "textblockTypeInputRule",
        () => cb,
        "wrappingInputRule",
        () => cj,
      ],
      548731,
    );
    var cB = new nr("suggestion");
    function cV({
      pluginKey: e = cB,
      editor: t,
      char: n = "@",
      allowSpaces: r = !1,
      allowToIncludeChar: i = !1,
      allowedPrefixes: s = [" "],
      startOfLine: a = !1,
      decorationTag: o = "span",
      decorationClass: l = "suggestion",
      decorationContent: c = "",
      decorationEmptyClass: u = "is-empty",
      command: d = () => null,
      items: h = () => [],
      render: p = () => ({}),
      allow: m = () => !0,
      findSuggestionMatch: f = cO,
    }) {
      let g,
        x = null == p ? void 0 : p(),
        v = () => {
          let e = t.state.selection.$anchor.pos,
            { top: n, right: r, bottom: i, left: s } = t.view.coordsAtPos(e);
          try {
            return new DOMRect(s, n, r - s, i - n);
          } catch {
            return null;
          }
        },
        y = (n, r) =>
          r
            ? () => {
                let r = e.getState(t.state),
                  i = null == r ? void 0 : r.decorationId,
                  s = n.dom.querySelector(`[data-decoration-id="${i}"]`);
                return (null == s ? void 0 : s.getBoundingClientRect()) || null;
              }
            : v;
      function b(n, r) {
        var i;
        try {
          let r = e.getState(n.state),
            s = (null == r ? void 0 : r.decorationId)
              ? n.dom.querySelector(`[data-decoration-id="${r.decorationId}"]`)
              : null,
            a = {
              editor: t,
              range: (null == r ? void 0 : r.range) || { from: 0, to: 0 },
              query: (null == r ? void 0 : r.query) || null,
              text: (null == r ? void 0 : r.text) || null,
              items: [],
              command: (e) =>
                d({
                  editor: t,
                  range: (null == r ? void 0 : r.range) || { from: 0, to: 0 },
                  props: e,
                }),
              decorationNode: s,
              clientRect: y(n, s),
            };
          null == (i = null == x ? void 0 : x.onExit) || i.call(x, a);
        } catch {}
        let s = n.state.tr.setMeta(r, { exit: !0 });
        n.dispatch(s);
      }
      let j = new ne({
        key: e,
        view() {
          return {
            update: async (e, n) => {
              var r, i, s, a, o, l, c;
              let u = null == (r = this.key) ? void 0 : r.getState(n),
                p = null == (i = this.key) ? void 0 : i.getState(e.state),
                m = u.active && p.active && u.range.from !== p.range.from,
                f = !u.active && p.active,
                v = u.active && !p.active,
                b = !f && !v && u.query !== p.query,
                j = f || (m && b),
                w = b || m,
                C = v || (m && b);
              if (!j && !w && !C) return;
              let k = C && !j ? u : p,
                S = e.dom.querySelector(
                  `[data-decoration-id="${k.decorationId}"]`,
                );
              ((g = {
                editor: t,
                range: k.range,
                query: k.query,
                text: k.text,
                items: [],
                command: (e) => d({ editor: t, range: k.range, props: e }),
                decorationNode: S,
                clientRect: y(e, S),
              }),
                j &&
                  (null == (s = null == x ? void 0 : x.onBeforeStart) ||
                    s.call(x, g)),
                w &&
                  (null == (a = null == x ? void 0 : x.onBeforeUpdate) ||
                    a.call(x, g)),
                (w || j) && (g.items = await h({ editor: t, query: k.query })),
                C &&
                  (null == (o = null == x ? void 0 : x.onExit) || o.call(x, g)),
                w &&
                  (null == (l = null == x ? void 0 : x.onUpdate) ||
                    l.call(x, g)),
                j &&
                  (null == (c = null == x ? void 0 : x.onStart) ||
                    c.call(x, g)));
            },
            destroy: () => {
              var e;
              g &&
                (null == (e = null == x ? void 0 : x.onExit) || e.call(x, g));
            },
          };
        },
        state: {
          init: () => ({
            active: !1,
            range: { from: 0, to: 0 },
            query: null,
            text: null,
            composing: !1,
          }),
          apply(o, l, c, u) {
            let { isEditable: d } = t,
              { composing: h } = t.view,
              { selection: p } = o,
              { empty: g, from: x } = p,
              v = { ...l },
              y = o.getMeta(e);
            if (y && y.exit)
              return (
                (v.active = !1),
                (v.decorationId = null),
                (v.range = { from: 0, to: 0 }),
                (v.query = null),
                (v.text = null),
                v
              );
            if (((v.composing = h), d && (g || t.view.composing))) {
              (x < l.range.from || x > l.range.to) &&
                !h &&
                !l.composing &&
                (v.active = !1);
              let e = f({
                  char: n,
                  allowSpaces: r,
                  allowToIncludeChar: i,
                  allowedPrefixes: s,
                  startOfLine: a,
                  $position: p.$from,
                }),
                o = `id_${Math.floor(0xffffffff * Math.random())}`;
              e &&
              m({ editor: t, state: u, range: e.range, isActive: l.active })
                ? ((v.active = !0),
                  (v.decorationId = l.decorationId ? l.decorationId : o),
                  (v.range = e.range),
                  (v.query = e.query),
                  (v.text = e.text))
                : (v.active = !1);
            } else v.active = !1;
            return (
              v.active ||
                ((v.decorationId = null),
                (v.range = { from: 0, to: 0 }),
                (v.query = null),
                (v.text = null)),
              v
            );
          },
        },
        props: {
          handleKeyDown(n, r) {
            var i, s, a, o;
            let { active: l, range: c } = j.getState(n.state);
            if (!l) return !1;
            if ("Escape" === r.key || "Esc" === r.key) {
              let o = j.getState(n.state),
                l =
                  null != (i = null == g ? void 0 : g.decorationNode)
                    ? i
                    : null,
                c =
                  null != l
                    ? l
                    : (null == o ? void 0 : o.decorationId)
                      ? n.dom.querySelector(
                          `[data-decoration-id="${o.decorationId}"]`,
                        )
                      : null;
              if (
                null == (s = null == x ? void 0 : x.onKeyDown)
                  ? void 0
                  : s.call(x, { view: n, event: r, range: o.range })
              )
                return !0;
              let u = {
                editor: t,
                range: o.range,
                query: o.query,
                text: o.text,
                items: [],
                command: (e) => d({ editor: t, range: o.range, props: e }),
                decorationNode: c,
                clientRect: c ? () => c.getBoundingClientRect() || null : null,
              };
              return (
                null == (a = null == x ? void 0 : x.onExit) || a.call(x, u),
                b(n, e),
                !0
              );
            }
            return (
              (null == (o = null == x ? void 0 : x.onKeyDown)
                ? void 0
                : o.call(x, { view: n, event: r, range: c })) || !1
            );
          },
          decorations(e) {
            let {
              active: t,
              range: n,
              decorationId: r,
              query: i,
            } = j.getState(e);
            if (!t) return null;
            let s = !(null == i ? void 0 : i.length),
              a = [l];
            return (
              s && a.push(u),
              sQ.create(e.doc, [
                sK.inline(n.from, n.to, {
                  nodeName: o,
                  class: a.join(" "),
                  "data-decoration-id": r,
                  "data-decoration-content": c,
                }),
              ])
            );
          },
        },
      });
      return j;
    }
    var cz = e.i(576191),
      cH = e.i(405193),
      c$ = e.i(904921),
      cU = e.i(940393),
      cG = e.i(304649),
      cW = a,
      cq = r;
    let cZ = cW.z.object({
      data: cW.z.object({
        id: cW.z.string(),
        title: cW.z.string(),
        value: cW.z.string(),
      }),
    });
    function cK({
      fuseResults: e,
      command: t,
      editor: n,
      range: r,
      keyboardHandler: i,
      selectedIndex: s,
      emptyMessage: a = "No results found.",
      renderFuseResult: o,
    }) {
      let l = (0, cz.useRef)(null),
        c = (0, cz.useCallback)(
          (n) => {
            let r = e[n];
            r && t(r);
          },
          [t, e],
        );
      return (
        (0, cz.useEffect)(() => {
          let e = () => {
            let e = l.current;
            if (!e || !r || !n.view) return;
            let { from: t } = r,
              i = n.view.coordsAtPos(t),
              s = e.offsetHeight,
              a = `${i.left}px`,
              o = `${i.top - s - 8}px`;
            ((e.style.left = a), (e.style.top = o));
          };
          return (
            window.addEventListener("scroll", e, !0),
            window.addEventListener("resize", e),
            requestAnimationFrame(e),
            () => {
              (window.removeEventListener("scroll", e, !0),
                window.removeEventListener("resize", e));
            }
          );
        }, [n, r]),
        (0, cz.useEffect)(() => {
          let e = ["ArrowUp", "ArrowDown", "Enter"],
            t = (t) => {
              if (e.includes(t.key))
                return (t.preventDefault(), t.stopPropagation(), i(t), !0);
            };
          return (
            document.addEventListener("keydown", t, !0),
            () => document.removeEventListener("keydown", t, !0)
          );
        }, [i]),
        (0, cH.createPortal)(
          (0, h.jsx)("div", {
            ref: l,
            className: "fixed z-50 w-72",
            style: { top: 0, left: 0 },
            children: (0, h.jsx)(cU.Command, {
              className: (0, cG.cn)(
                "material-menu animate-in fade-in-0 zoom-in-95 border border-v0-gray-200",
                0 === e.length && "hidden",
              ),
              children: (0, h.jsxs)(cU.CommandList, {
                className: "max-h-min",
                children: [
                  (0, h.jsx)(cU.CommandEmpty, { children: a }),
                  (0, h.jsx)(cU.CommandGroup, {
                    children: e.map((t, n) =>
                      (0, h.jsx)(
                        cU.CommandItem,
                        {
                          value: t.item.data.title,
                          onSelect: () => c(n),
                          tabIndex: 0,
                          className: (0, cG.cn)(
                            n === s ? "bg-v0-gray-100" : "",
                            "my-1 h-8 px-2",
                            0 === n ? "mt-0" : "",
                            n === e.length - 1 ? "mb-0" : "",
                          ),
                          children: o({ fuseResult: t, isSelected: n === s }),
                        },
                        t.item.data.id,
                      ),
                    ),
                  }),
                ],
              }),
            }),
          }),
          document.body,
        )
      );
    }
    function cY({
      char: e,
      pluginKey: t,
      options: n,
      getFuseResults: r,
      onCommand: i,
      renderFuseResult: s,
    }) {
      return cr.create({
        name: `${e}MenuExtension`,
        addOptions: () => n || {},
        addProseMirrorPlugins() {
          return [
            cV({
              editor: this.editor,
              char: e,
              pluginKey: t,
              items: ({ query: e }) => {
                let t = cq.store.get(r);
                return t ? t.call(this, e) : [];
              },
              render: () => {
                let e,
                  t = 0,
                  n = [],
                  r = (e) => {
                    ((t = e), c());
                  },
                  a = (s) => {
                    if ("ArrowUp" === s.event.key)
                      return (r((t - 1 + n.length) % n.length), !0);
                    if ("ArrowDown" === s.event.key)
                      return (r((t + 1) % n.length), !0);
                    if ("Enter" === s.event.key) {
                      let r = n[t];
                      return (r && i(this.editor, r, e), !0);
                    }
                    if ("Tab" === s.event.key) {
                      s.event.preventDefault();
                      let e = s.event.shiftKey ? -1 : 1;
                      return (r((t + e + n.length) % n.length), !0);
                    }
                    return "Escape" === s.event.key && (u(), !0);
                  },
                  o = null,
                  l = null,
                  c = () => {
                    l &&
                      l.render(
                        (0, h.jsx)(cK, {
                          fuseResults: n,
                          command: (t) => i(this.editor, t, e),
                          editor: this.editor,
                          range: e,
                          renderFuseResult: s,
                          keyboardHandler: (t) =>
                            a({ event: t, view: this.editor.view, range: e }),
                          selectedIndex: t,
                        }),
                      );
                  },
                  u = () => {
                    (l && (l.unmount(), (l = null)),
                      o && (o.remove(), (o = null)));
                  };
                return {
                  onStart: (r) => {
                    ((e = r.range),
                      (t = 0),
                      (n = r.items),
                      (o = document.createElement("div")),
                      document.body.appendChild(o),
                      (l = (0, c$.createRoot)(o)),
                      c());
                  },
                  onUpdate: (t) => {
                    ((n = t.items), (e = t.range), c());
                  },
                  onKeyDown: a,
                  onExit: u,
                };
              },
              command: () => {},
            }),
          ];
        },
      });
    }
    function cJ(e, t = [], n) {
      if (!t.length) return e;
      let r = t.find((e) => e.key === n);
      if (!r?.indices) return e;
      let i = [...r.indices].sort((e, t) => e[0] - t[0]),
        s = [],
        a = 0;
      return (
        i.forEach(([t, n], r) => {
          n - t + 1 <= 2 ||
            (t > a && s.push(e.slice(a, t)),
            s.push(
              (0, h.jsx)(
                "span",
                {
                  className: "rounded-sm bg-v0-teal-100 dark:bg-[#13776C]",
                  children: e.slice(t, n + 1),
                },
                r,
              ),
            ),
            (a = n + 1));
        }),
        a < e.length && s.push(e.slice(a)),
        s
      );
    }
    e.s(
      [
        "MenuItemBaseSchema",
        0,
        cZ,
        "createMenuExtension",
        () => cY,
        "highlightFuseMatches",
        () => cJ,
      ],
      632814,
    );
    var cQ = a;
    let cX = cQ.z.discriminatedUnion("type", [
        cZ.extend({ type: cQ.z.literal("search-web") }),
      ]),
      c0 = "actionMenuItem";
    function c1({ type: e, data: t }) {
      return (0, u.jsx)(d.Globe, {});
    }
    e.s(
      [
        "ACTION_MENU_ITEM_TYPE",
        0,
        c0,
        "ActionMenuItemSchema",
        0,
        cX,
        "getActionMenuItemIcon",
        () => c1,
      ],
      770496,
    );
    var c2 = s,
      c5 = e.i(847396),
      c3 = e.i(100401),
      c4 = e.i(175865),
      c9 = d,
      c7 = e.i(6644),
      c6 = a;
    let c8 = c6.z.discriminatedUnion("type", [
        cZ.extend({ type: c6.z.literal("file") }),
        cZ.extend({ type: c6.z.literal("prediction") }),
        cZ.extend({ type: c6.z.literal("url") }),
        cZ.extend({ type: c6.z.literal("directory") }),
        cZ.extend({
          type: c6.z.literal("mcp-server"),
          data: c6.z.object({
            id: c6.z.string(),
            title: c6.z.string(),
            value: c6.z.string(),
            preset: c6.z.any().optional(),
          }),
        }),
      ]),
      ue = "mentionMenuItem";
    function ut({ type: e, data: t }) {
      if (!t.value) return { icon: null };
      switch (e) {
        case "file":
          if (t.value.endsWith(".tsx"))
            return {
              icon: (0, c2.jsx)(c5.LogoReact, {}),
              className: "text-current",
            };
          return { icon: (0, c2.jsx)(c4.File, {}) };
        case "directory":
          return { icon: (0, c2.jsx)(c3.FolderOpen, {}) };
        case "url":
          return { icon: (0, c2.jsx)(c9.Globe, {}) };
        case "prediction":
          return { icon: null };
        case "mcp-server":
          return { icon: (0, c2.jsx)(c7.SecureConnection, {}) };
        default:
          return { icon: e };
      }
    }
    (e.s(
      [
        "MENTION_MENU_ITEM_TYPE",
        0,
        ue,
        "MentionMenuItemSchema",
        0,
        c8,
        "getMentionIcon",
        () => ut,
      ],
      73687,
    ),
      e.i(761002));
    var un = e.i(917675);
    let ur = c.z.object({
        id: c.z.string(),
        name: c.z.string(),
        url: c.z.string(),
        content: c.z.string().or(c.z.instanceof(ArrayBuffer)).optional(),
        status: c.z.enum(["uploading", "done", "compressing"]).optional(),
        size: c.z.number(),
        isImage: c.z.boolean(),
        isSavedDraft: c.z.boolean().optional(),
        v0Type: un.v0AttachmentTypeSchema,
        tokens: c.z.number().optional(),
        contentType: c.z.string().optional(),
      }),
      ui = c.z.object({
        file: c.z.string(),
        componentName: c.z.string().optional(),
        line: c.z.number(),
        column: c.z.number(),
        sourceContext: c.z.string(),
      }),
      us = c.z.union([
        c.z.discriminatedUnion("type", [
          c.z.object({
            type: c.z.literal("local-file"),
            data: c.z.lazy(() => ur),
          }),
          c.z.object({
            type: c.z.literal("quote"),
            data: c.z.object({ quote: c.z.string() }),
          }),
          c.z.object({
            type: c.z.literal("refinement-element"),
            data: c.z.object({
              file: c.z.string(),
              line: c.z.number(),
              column: c.z.number(),
              sourceContext: c.z.string(),
              componentName: c.z.string().optional(),
            }),
          }),
        ]),
        cX,
        c8,
      ]);
    function ua(e) {
      return e
        .filter((e) => "local-file" === e.type && "done" === e.data.status)
        .map((e) => ({
          url: e.data.url,
          name: e.data.name,
          size: e.data.size,
          content: "string" == typeof e.data.content ? e.data.content : void 0,
          v0Type: e.data.v0Type,
          contentType: e.data.contentType,
        }));
    }
    let uo = "v0-local-drafts",
      ul = "_new-chat_",
      uc = a.z.object({
        json: a.z.string().nullable(),
        html: a.z.string().nullable(),
        context: a.z.array(us).default([]),
        updatedAt: a.z.number().default(() => Date.now()),
        refinementElementSelected: ui.nullable().catch(() => null),
      }),
      uu = uc.extend({ id: a.z.string() }),
      ud = uc.extend({
        localFileInfos: a.z.array(a.z.any()).optional(),
        fileMap: a.z.record(a.z.string(), a.z.any()).default({}),
        promptQueue: a.z.array(uu).default([]),
      }),
      uh = a.z.record(a.z.string(), ud),
      up = {
        json: null,
        html: null,
        refinementElementSelected: null,
        context: [],
        localFileInfos: [],
        fileMap: {},
        updatedAt: Date.now(),
        promptQueue: [],
      };
    function um(e) {
      try {
        let t = JSON.parse(e);
        return ug(t);
      } catch {
        return !1;
      }
    }
    function uf(e) {
      return "" === e.replace(/<[^>]*>/g, "").trim();
    }
    function ug(e) {
      if (!e || !e.content) return !0;
      for (let t of e.content)
        if (
          ("text" === t.type && t.text && "" !== t.text.trim()) ||
          (t.content && !ug(t))
        )
          return !1;
      return !0;
    }
    function ux() {
      try {
        let e = localStorage.getItem(uo);
        if (!e) return {};
        let t = JSON.parse(e),
          n = uh.safeParse(t);
        if (n.success) return n.data;
        let r = {};
        for (let [e, n] of Object.entries(t)) {
          let t = ud.safeParse(n);
          if (t.success) {
            r[e] = t.data;
            continue;
          }
          if (
            n &&
            "object" == typeof n &&
            "context" in n &&
            Array.isArray(n.context)
          ) {
            let t = n.context.filter((e) => us.safeParse(e).success),
              i = ud.safeParse({ ...n, context: t });
            if (i.success) {
              r[e] = i.data;
              continue;
            }
          }
          console.debug("Dropping invalid draft from localStorage:", e);
        }
        return r;
      } catch (e) {
        return (
          console.debug("Error parsing drafts from localStorage:", e),
          {}
        );
      }
    }
    function uv(e) {
      try {
        localStorage.setItem(uo, JSON.stringify(e));
      } catch (e) {
        console.debug("Error saving drafts to localStorage:", e);
      }
    }
    function uy(e, t) {
      let n = t ? ul : e;
      return {
        getLocalDraft: function () {
          try {
            let t = ux();
            if (!(n in t)) return up;
            let r = t[n];
            if (!r) return up;
            let i = null;
            if (r.json)
              try {
                i = JSON.parse(r.json);
              } catch (t) {
                (console.warn("Failed to parse draft json for chat", e, t),
                  (0, o.track)("PromptDraftSaveError", {
                    chatId: e,
                    errorMsg: t.message,
                  }));
              }
            let s = r.context ?? [];
            return (
              (!s || 0 === s.length) &&
                Array.isArray(r.localFileInfos) &&
                (s = r.localFileInfos.map((e) => ({
                  type: "local-file",
                  data: e,
                }))),
              {
                ...r,
                json: i,
                context: s,
                fileMap: r.fileMap,
                promptQueue: r.promptQueue || r.messageQueue || [],
              }
            );
          } catch (t) {
            return (console.debug("Draft not found for chat:", e), up);
          }
        },
        updateLocalDraft: function ({
          json: t,
          html: r,
          context: i,
          fileMap: s,
          promptQueue: a,
          refinementElementSelected: c,
        }) {
          try {
            let e = ux(),
              o = e[n] ?? up,
              u =
                void 0 === t
                  ? o.json
                  : "object" == typeof t
                    ? JSON.stringify((0, l.default)(t))
                    : t,
              d = void 0 === r ? o.html : r,
              h =
                void 0 === i
                  ? (o.context ??
                    (o.localFileInfos
                      ? o.localFileInfos.map((e) => ({
                          type: "local-file",
                          data: e,
                        }))
                      : []))
                  : i,
              p = void 0 === s ? o.fileMap : s,
              m = void 0 === a ? o.promptQueue : a,
              f =
                !u ||
                "null" === u ||
                '{"type":"doc","content":[{"type":"paragraph"}]}' === u ||
                um(u),
              g = !d || "<p></p>" === d || uf(d),
              x = h.length > 0,
              v = m.length > 0;
            if (f && g && !x && !v) {
              (delete e[n], uv(e));
              return;
            }
            let y = void 0 === c ? o.refinementElementSelected : c;
            ((e[n] = {
              json: u,
              html: d,
              refinementElementSelected: y,
              context: h,
              fileMap: p,
              updatedAt: Date.now(),
              promptQueue: m,
            }),
              uv(e));
          } catch (t) {
            (console.debug("Ignored localStorage error:", t),
              (0, o.track)("PromptDraftSaveError", {
                chatId: e,
                errorMsg: t.message,
              }));
          }
        },
        deleteLocalDraft: function () {
          let e = ux();
          (delete e[n], uv(e));
        },
      };
    }
    function ub(e) {
      return {
        content: e.json ? JSON.parse(e.json) : { version: 1, parts: [] },
        attachments: ua(e.context),
      };
    }
    function uj(e, t = "file") {
      return e.map((e, n) => ({
        id: `${t}-${Date.now()}-${n}-${Math.random().toString(36).substring(2, 11)}`,
        name: e.name || "attachment",
        url: e.url,
        content: e.content,
        status: "done",
        size: e.size,
        isImage: e.contentType?.startsWith("image/") ?? !1,
        v0Type: e.v0Type || "screenshot",
        contentType: e.contentType,
      }));
    }
    e.s(
      [
        "NEW_CHAT_ID",
        0,
        ul,
        "convertAttachmentsToLocalFiles",
        () => uj,
        "convertQueuedMessageToSubmitPayload",
        () => ub,
        "localDraftController",
        () => uy,
      ],
      654225,
    );
    var uw = e.i(254211),
      uC = e.i(40455);
    function uk(e, t) {
      if (!e) return;
      let n = e;
      if (Array.isArray(n)) for (let e of n) uk(e, t);
      else if (Array.isArray(n.content)) for (let e of n.content) uk(e, t);
      else if ("text" === n.type)
        t.push({ type: "mdx", content: n.text || "" });
      else if ("hardBreak" === n.type) t.push({ type: "mdx", content: "\n" });
      else if (n.type === ue) {
        let e = n.attrs;
        switch (e.type) {
          case "file":
            t.push({ type: "mention-file", filePath: e.data.value });
            break;
          case "url":
            t.push({ type: "mention-url", url: e.data.value });
            break;
          case "directory":
            t.push({ type: "mention-directory", directoryPath: e.data.value });
            break;
          case "prediction":
            t.push({ type: "prompt-prediction", prediction: e.data.value });
            break;
          case "mcp-server":
            t.push({
              type: "mention-mcp-server",
              serverId: e.data.value,
              serverName: e.data.title,
            });
            break;
          default:
            return e.type;
        }
      }
    }
    function uS(e) {
      let t = [];
      for (let n of e) {
        let e = n.type;
        switch (e) {
          case "hidden-context":
          case "refinement-element":
          case "confirmed-steps":
          case "confirmed-permissions":
          case "parse-error":
            break;
          case "mdx":
            t.push({ type: "text", text: n.content || "" });
            break;
          case "mention-url":
            t.push({
              type: "mentionMenuItem",
              attrs: {
                data: {
                  id: `mention-url-${n.url}`,
                  value: n.url,
                  title: n.url,
                },
                type: "url",
              },
            });
            break;
          case "mention-file":
            t.push({
              type: "mentionMenuItem",
              attrs: {
                data: {
                  id: `mention-file-${n.filePath}`,
                  value: n.filePath,
                  title: n.filePath,
                },
                type: "file",
              },
            });
            break;
          case "mention-directory":
            t.push({
              type: "mentionMenuItem",
              attrs: {
                data: {
                  id: `mention-directory-${n.directoryPath}`,
                  value: n.directoryPath,
                  title: n.directoryPath,
                },
                type: "directory",
              },
            });
            break;
          case "prompt-prediction":
            t.push({
              type: "mentionMenuItem",
              attrs: {
                data: {
                  id: `prediction-${n.prediction}`,
                  value: n.prediction,
                  title: n.prediction,
                },
                type: "prediction",
              },
            });
            break;
          case "mention-mcp-server":
            t.push({
              type: "mentionMenuItem",
              attrs: {
                data: {
                  id: `mention-mcp-${n.serverId}`,
                  value: n.serverId,
                  title: n.serverName,
                },
                type: "mcp-server",
              },
            });
            break;
          default:
            return e;
        }
      }
      return { content: [{ content: t, type: "paragraph" }], type: "doc" };
    }
    function uN(e, t, n) {
      if (!t) return;
      let r = t;
      if ((r?.type === e && n.push(r.attrs), Array.isArray(r)))
        for (let t of r) uN(e, t, n);
      else if (Array.isArray(r?.content)) for (let t of r.content) uN(e, t, n);
    }
    (e.s(
      [
        "getContentJsonFromMessageContentParts",
        () => uS,
        "getMessageContentPartsFromContentJson",
        () => uk,
        "getNodesFromContentJson",
        () => uN,
      ],
      605667,
    ),
      e.i(168204));
    var uE = e.i(225695),
      uA = e.i(92479),
      uD = e.i(314907);
    let uI = 10,
      uM = new Map(),
      uT = (0, n.cacheResultById)(uM, () => ({
        saveToNewChatDraft: (0, t.atom)(!1),
        editor: (0, t.atom)(null),
        contentHtml: (0, t.atom)(null),
        contentJson: (0, t.atom)(null),
        contentText: (0, t.atom)(null),
        isMessageModeSwitcherOpen: (0, t.atom)(!1),
        isModelSwitcherOpen: (0, t.atom)(!1),
        isToolsDropdownOpen: (0, t.atom)(!1),
        addContextMenu: (0, t.atom)("home"),
        editingMessage: (0, t.atom)(null),
        editingQueuedPrompt: (0, t.atom)(null),
        lastEditableMessage: (0, t.atom)(null),
        context: (0, t.atom)([]),
        isDraggingFile: (0, t.atom)(!1),
        bannerState: (0, t.atom)({ type: "none" }),
        transientBannerState: (0, t.atom)(null),
        refinementElementSelected: (0, t.atom)(null),
        isTodosWithQueueOpen: (0, t.atom)(!1),
        derivedTodoList: (0, t.atom)({ list: [], updatedAt: 0 }),
        isEnhancing: (0, t.atom)(!1),
        doNotEnhanceList: (0, t.atom)([]),
        originalPromptBeforeEnhancement: (0, t.atom)(""),
        promptQueue: (0, t.atom)([]),
        voiceState: (0, t.atom)({
          status: "idle",
          loadingMessage: "",
          progressItems: [],
          isProcessing: !1,
          chunks: [],
          transcribedText: "",
          isSupported: !1,
          waitingForReady: !1,
          initialTextLength: 0,
        }),
      })),
      uL = new Map(),
      uP = (0, n.cacheResultById)(uL, (e) => {
        let n = (0, uw.getDurableRootAtoms)("root"),
          i = uT(e),
          s = (0, t.atom)((e) => {
            let t = e(i.transientBannerState);
            return t && "none" !== t.type ? t : e(i.bannerState);
          }),
          a = (0, t.atom)((e) => {
            let t = e(i.derivedTodoList)
              .list.slice()
              .sort((e, t) => {
                let n = { done: 0, "in-progress": 1, todo: 2 };
                return n[e.status] - n[t.status];
              });
            return {
              list: t,
              completedList: t.filter((e) => "done" === e.status),
              notCompletedList: t.filter((e) => "done" !== e.status),
              totalCount: t.length,
              totalDone: t.filter((e) => "done" === e.status).length,
              totalInProgress: t.filter((e) => "in-progress" === e.status)
                .length,
              isEmpty: 0 === t.length,
              isListComplete:
                t.every((e) => "done" === e.status) && t.length > 0,
            };
          }),
          o = (0, t.atom)((e) => {
            let t = e(i.voiceState);
            return "loading" === t.status
              ? { type: "voice-model-loading" }
              : "recording" === t.status
                ? { type: "voice-recording" }
                : !e(a).isEmpty || e(i.promptQueue).length > 0
                  ? { type: "todos-with-queue" }
                  : { type: "none" };
          });
        (0, uD.selectAtom)(
          (0, t.atom)((e) => {
            let t = e(i.contentJson),
              n = [];
            return (
              uN("mentionMenuItem", t?.content || null, n),
              [...new Map(n.map((e) => [e.data.id, e])).values()].filter(
                (e) => "prediction" !== e.type,
              )
            );
          }),
          (e) => e,
          (e, t) => {
            if (e.length !== t.length) return !1;
            for (let n = 0; n < e.length; n++)
              if (e[n].data.id !== t[n].data.id) return !1;
            return !0;
          },
        );
        let l = (0, uD.selectAtom)(
            (0, t.atom)((e) => {
              let t = e(i.contentJson),
                n = [];
              return (
                uN("mentionMenuItem", t?.content || null, n),
                [...new Map(n.map((e) => [e.data.id, e])).values()]
                  .filter((e) => "prediction" === e.type)
                  .map((e) => e.data.value)
              );
            }),
            (e) => e,
            (e, t) => {
              if (e.length !== t.length) return !1;
              for (let n = 0; n < e.length; n++) if (e[n] !== t[n]) return !1;
              return !0;
            },
          ),
          c = (0, t.atom)(!1);
        c.onMount = (e) => {
          let t,
            n = (n) => {
              if ((t?.(), !n)) {
                (e(!1), (t = void 0));
                return;
              }
              let { editor: r } = n,
                i = () => e(!0),
                s = () => e(!1);
              (r.on("focus", i),
                r.on("blur", s),
                (t = () => {
                  (r.off("focus", i), r.off("blur", s));
                }));
              try {
                e(r.isFocused);
              } catch {
                e(!1);
              }
            },
            s = r.store.sub(i.editor, () => {
              n(r.store.get(i.editor));
            });
          return (
            n(r.store.get(i.editor)),
            () => {
              (t?.(), s());
            }
          );
        };
        let u = (0, t.atom)((e) => e(c));
        return {
          ...i,
          areEditorsReady: (0, t.atom)((e) => {
            let t = e(i.editor);
            return !!t?.isEditorReady;
          }),
          isPromptEmpty: (0, t.atom)((e) => {
            let t = e(i.contentText);
            return !t || "" === t.trim();
          }),
          shouldSaveDraft: (0, t.atom)(
            (e) => !e(i.editingMessage) && !e(i.editingQueuedPrompt),
          ),
          messageMode: n.messageMode,
          modelConfiguration: n.modelConfiguration,
          toolConfiguration: n.toolConfiguration,
          isThinking: (0, t.atom)((e) => !!e(n.modelConfiguration).thinking),
          isImageGenerations: (0, t.atom)(
            (e) =>
              !!(
                e(n.modelConfiguration).imageGenerations ||
                e(n.toolConfiguration).generateImages
              ),
          ),
          contextLimitReached: (0, t.atom)((e) => e(i.context).length >= uI),
          contextLength: (0, t.atom)((e) => e(i.context).length),
          uploadingContext: (0, t.atom)((e) =>
            e(i.context).some(
              (e) => "local-file" === e.type && u_(e.data.status),
            ),
          ),
          isDraggingFile: i.isDraggingFile,
          fullContext: (0, t.atom)((e) => {
            let t = e(i.refinementElementSelected);
            return [
              ...(t ? [{ type: "refinement-element", data: t }] : []),
              ...e(i.context).sort((e, t) =>
                "local-file" === e.type && "local-file" === t.type
                  ? e.data.id.localeCompare(t.data.id)
                  : 0,
              ),
            ];
          }),
          attachments: (0, t.atom)((e) => ua(e(i.context))),
          banner: s,
          isBannerVisible: (0, t.atom)((e) => "none" !== e(s).type),
          todoList: a,
          eyebrow: o,
          isEyebrowVisible: (0, t.atom)((e) => {
            let t = e(o),
              n = e(a);
            if (
              "voice-recording" === t.type ||
              "voice-model-loading" === t.type
            )
              return !0;
            let r = !n.isEmpty && !n.isListComplete,
              s = e(i.promptQueue).length > 0;
            return "todos-with-queue" === t.type && (r || s);
          }),
          isEnhancing: i.isEnhancing,
          doNotEnhanceList: i.doNotEnhanceList,
          originalPromptBeforeEnhancement: i.originalPromptBeforeEnhancement,
          queueLength: (0, t.atom)((e) => e(i.promptQueue).length),
          isQueueFull: (0, t.atom)((e) => e(i.promptQueue).length >= 10),
          uniquePredictions: l,
          isPromptFocused: u,
        };
      });
    function uR(e) {
      let t = uT(e),
        n = uP(e),
        s = (0, uw.getDurableRootAtoms)("root"),
        a = () => {
          let e = r.store.get(t.editor);
          e && e.editor.commands.clearContent();
        },
        o = () => {
          requestAnimationFrame(() => {
            let e = r.store.get(t.editor);
            !e || (e.editor.view && e.editor.commands.focus());
          });
        },
        l = () => {
          if (
            !r.store.get(n.shouldSaveDraft) ||
            r.store.get(t.editingQueuedPrompt)
          )
            return;
          let i = r.store.get(t.context),
            s = r.store.get(t.refinementElementSelected);
          uy(e, r.store.get(t.saveToNewChatDraft)).updateLocalDraft({
            context: i,
            refinementElementSelected: s,
          });
        },
        c = (n) => {
          let {
              initialValue: i = "",
              save: s = !0,
              force: a = !1,
              onInputChange: o,
            } = n || {},
            l = r.store.get(t.editor);
          if (!l) {
            let n = "string" == typeof i ? i : "",
              a = () => (n ? `<p>${n.replace(/\n/g, "</p><p>")}</p>` : ""),
              l = () => ({
                type: "doc",
                content: n
                  ? n
                      .split("\n")
                      .map((e) => ({
                        type: "paragraph",
                        content: e ? [{ type: "text", text: e }] : [],
                      }))
                  : [],
              }),
              c = () => n;
            (r.store.set(t.contentHtml, a()),
              r.store.set(t.contentJson, l()),
              r.store.set(t.contentText, c()),
              o?.(n));
            let { updateLocalDraft: u } = uy(
                e,
                r.store.get(t.saveToNewChatDraft),
              ),
              d = !!r.store.get(t.editingMessage),
              h = !!r.store.get(t.editingQueuedPrompt);
            !s || d || h || u({ json: JSON.stringify(l()), html: a() });
            return;
          }
          let c = a ? i : l.editor.getText() || i;
          (l.editor.commands.setContent(c), o?.(c));
          let { updateLocalDraft: u } = uy(
              e,
              r.store.get(t.saveToNewChatDraft),
            ),
            d = !!r.store.get(t.editingMessage),
            h = !!r.store.get(t.editingQueuedPrompt);
          !s ||
            d ||
            h ||
            u({
              json: JSON.stringify(l.editor.getJSON()),
              html: l.editor.getHTML(),
            });
        },
        u = (e) => {
          (r.store.set(t.editingMessage, e),
            c({
              initialValue: uS(
                e.content.parts.filter((e) =>
                  (0, uE.isUserMessageContentPart)(e),
                ),
              ),
              force: !0,
            }),
            e.attachments?.length && f(uj(e.attachments, "edit")));
          let n = e.content.parts.find((e) => "refinement-element" === e.type);
          (n && y(n), o());
        },
        d = (e) => {
          if ((r.store.set(t.editingQueuedPrompt, e), e.json))
            try {
              let t = JSON.parse(e.json);
              c({ initialValue: t, force: !0, save: !1 });
            } catch (e) {
              console.error("Failed to restore queued prompt content:", e);
            }
          (r.store.set(t.context, e.context),
            r.store.set(
              t.refinementElementSelected,
              e.refinementElementSelected,
            ),
            o());
        },
        h = (e) => {
          let n = r.store.get(t.context);
          n.some((t) => "local-file" === t.type && t.data.id === e.id) ||
            (r.store.set(t.context, [...n, { type: "local-file", data: e }]),
            l());
        },
        p = (e) => {
          let n = r.store.get(t.context),
            i = n.findIndex(
              (t) => "local-file" === t.type && t.data.id === e.id,
            );
          if (-1 === i) return void h(e);
          let s = [...n];
          ((s[i] = { type: "local-file", data: e }),
            r.store.set(t.context, s),
            l());
        },
        m = (e) => {
          let n = r.store.get(t.context),
            i = n.findIndex((t) => (0, uC.default)(t, e));
          if (-1 === i) return;
          let s = [...n];
          (s.splice(i, 1), r.store.set(t.context, s), o(), l());
        },
        f = (e) => {
          (r.store.set(
            t.context,
            e.slice(0, uI).map((e) => ({ type: "local-file", data: e })),
          ),
            l());
        },
        g = () => {
          (r.store.set(
            t.context,
            r.store.get(t.context).filter((e) => "local-file" !== e.type),
          ),
            l());
        },
        x = (n) => {
          let i = uy(e, n || r.store.get(t.saveToNewChatDraft)).getLocalDraft(),
            s = i.context.filter(
              (e) => "local-file" !== e.type || !u_(e.data.status),
            );
          (r.store.set(t.context, s),
            r.store.set(
              t.refinementElementSelected,
              i.refinementElementSelected,
            ));
        },
        v = (n) => {
          let i = uy(e, n || r.store.get(t.saveToNewChatDraft)).getLocalDraft(),
            s = r.store.get(t.editor);
          if (!s) return;
          let a = i.json;
          a
            ? s.editor.commands.setContent(a)
            : i.html
              ? s.editor.commands.setContent(i.html)
              : s.editor.commands.clearContent();
        },
        y = (e) => {
          (r.store.set(t.refinementElementSelected, e), l());
        },
        b = () => {
          (r.store.set(t.refinementElementSelected, null), l());
        };
      function j() {
        if (r.store.get(t.editingQueuedPrompt)) return;
        let n = r.store.get(t.promptQueue);
        uy(e, r.store.get(t.saveToNewChatDraft)).updateLocalDraft({
          promptQueue: n,
        });
      }
      function w() {
        let e = `queue-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`,
          n = r.store.get(t.contentJson),
          s = r.store.get(t.contentHtml),
          l = r.store.get(t.contentText),
          c = r.store.get(t.context),
          u = c.some((e) => "local-file" === e.type),
          d = r.store.get(t.refinementElementSelected),
          h = {
            id: e,
            json: n ? JSON.stringify(n) : null,
            html: s,
            refinementElementSelected: d,
            context: c,
            updatedAt: Date.now(),
          },
          p = r.store.get(t.promptQueue);
        (r.store.set(t.promptQueue, [...p, h]),
          j(),
          (0, i.track)("AddPromptToQueue", {
            queuedPromptId: e,
            queueLength: p.length + 1,
            promptLength: l?.length || 0,
            hasAttachments: u,
          }),
          a(),
          g(),
          b(),
          o());
      }
      let C = (e) => {
          let n = r.store.get(t.voiceState);
          r.store.set(t.voiceState, { ...n, ...e });
        },
        k = (e) => {
          C({ status: e });
        },
        S = (e) => {
          C({ isProcessing: e });
        },
        N = (e) => {
          C({ chunks: [...r.store.get(t.voiceState).chunks, e] });
        },
        E = () => {
          C({ chunks: [] });
        },
        A = (e) => {
          C({ transcribedText: e });
        },
        D = (e) => {
          C({ isSupported: e });
        },
        I = (e) => {
          C({ waitingForReady: e });
        };
      return {
        clearEditorContent: a,
        registerEditor: (e) => r.store.set(t.editor, e),
        unregisterEditor: (e) => {
          let n = r.store.get(t.editor);
          n?.reactId === e && r.store.set(t.editor, null);
        },
        updateContentStates: (e, n) => {
          if (e) {
            (r.store.set(t.contentHtml, e.getHTML()),
              r.store.set(t.contentJson, e.getJSON()),
              r.store.set(t.contentText, e.getText()));
            let i = r.store.get(t.editor);
            i && i.reactId !== n && i.editor.commands.setContent(e.getHTML());
          }
        },
        focusPrompt: o,
        handleInputChange: c,
        setIsMessageModeSwitcherOpen: (e) => {
          r.store.set(t.isMessageModeSwitcherOpen, e);
        },
        setMessageMode: (e) => {
          r.store.set(s.messageMode, e);
        },
        setIsModelSwitcherOpen: (e) => {
          r.store.set(t.isModelSwitcherOpen, e);
        },
        setModelId: (e) => {
          r.store.set(s.modelConfiguration, {
            ...r.store.get(s.modelConfiguration),
            modelId: e,
          });
        },
        setThinking: (e) => {
          r.store.set(s.modelConfiguration, {
            ...r.store.get(s.modelConfiguration),
            thinking: e,
          });
        },
        setImageGenerations: (e) => {
          r.store.set(s.modelConfiguration, {
            ...r.store.get(s.modelConfiguration),
            imageGenerations: e,
          });
        },
        setWebSearch: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            webSearch: e,
          });
        },
        setGenerateImages: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            generateImages: e,
          });
        },
        setDesignSystemId: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            designSystemId: e,
          });
        },
        setVercelProjectId: (e, t) => {
          let n = r.store.get(s.toolConfiguration);
          r.store.set(s.toolConfiguration, {
            ...n,
            vercelProjectId: e,
            vercelProjectName: void 0 !== t ? t : n.vercelProjectName,
          });
        },
        setProjectId: (e, t) => {
          let n = r.store.get(s.toolConfiguration);
          r.store.set(s.toolConfiguration, {
            ...n,
            projectId: e,
            workspaceName: void 0 !== t ? t : n.workspaceName,
          });
        },
        setCustomInstructionIds: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            customInstructionIds: e,
          });
        },
        toggleCustomInstructionId: (e) => {
          let t = r.store.get(s.toolConfiguration),
            n = t.customInstructionIds,
            i = n.includes(e) ? n.filter((t) => t !== e) : [...n, e];
          r.store.set(s.toolConfiguration, { ...t, customInstructionIds: i });
        },
        setMcpServerIds: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            mcpServerIds: e,
          });
        },
        toggleMcpServerId: (e) => {
          let t = r.store.get(s.toolConfiguration),
            n = t.mcpServerIds,
            i = n.includes(e) ? n.filter((t) => t !== e) : [...n, e];
          r.store.set(s.toolConfiguration, { ...t, mcpServerIds: i });
        },
        setMarketplaceMcpIds: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            marketplaceMcpIds: e,
          });
        },
        toggleMarketplaceMcpId: (e) => {
          let t = r.store.get(s.toolConfiguration),
            n = t.marketplaceMcpIds,
            i = n.includes(e) ? n.filter((t) => t !== e) : [...n, e];
          r.store.set(s.toolConfiguration, { ...t, marketplaceMcpIds: i });
        },
        cleanupInvalidMcpIds: (e, t) => {
          let n = r.store.get(s.toolConfiguration),
            i = n.marketplaceMcpIds.filter((t) => e.has(t)),
            a = n.mcpServerIds.filter((e) => t.has(e));
          (i.length !== n.marketplaceMcpIds.length ||
            a.length !== n.mcpServerIds.length) &&
            r.store.set(s.toolConfiguration, {
              ...n,
              marketplaceMcpIds: i,
              mcpServerIds: a,
            });
        },
        setAutoAllowMcpTools: (e) => {
          r.store.set(s.toolConfiguration, {
            ...r.store.get(s.toolConfiguration),
            autoAllowMcpTools: e,
          });
        },
        startEditingMessage: u,
        cancelEditingMessage: () => {
          (r.store.set(t.editingMessage, null), x(), v());
        },
        clearEditingMessage: () => {
          r.store.set(t.editingMessage, null);
        },
        setLastEditableMessage: (e) => {
          r.store.set(t.lastEditableMessage, e);
        },
        startEditingQueuedPrompt: d,
        cancelEditingQueuedPrompt: () => {
          (r.store.set(t.editingQueuedPrompt, null), x(), v());
        },
        clearEditingQueuedPrompt: () => {
          r.store.set(t.editingQueuedPrompt, null);
        },
        updateQueuedPromptInPlace: (e, n) => {
          let s = r.store
            .get(t.promptQueue)
            .map((t) => (t.id === e ? { ...t, ...n } : t));
          (r.store.set(t.promptQueue, s),
            j(),
            (0, i.track)("AddPromptToQueue", {
              queuedPromptId: e,
              queueLength: s.length,
              promptLength: 0,
              hasAttachments: !1,
            }));
        },
        addLocalFileToContext: h,
        updateLocalFileInContext: p,
        renameLocalFileInContext: (e, n) => {
          let i = r.store.get(t.context),
            s = i.findIndex((t) => "local-file" === t.type && t.data.id === e);
          if (-1 === s) return;
          let a = [...i],
            o = a[s];
          ((a[s] = { ...o, data: { ...o.data, name: n } }),
            r.store.set(t.context, a),
            l());
        },
        removeLocalFileFromContext: (e) => {
          (r.store.set(
            t.context,
            r.store
              .get(t.context)
              .filter((t) => "local-file" !== t.type || t.data.id !== e.id),
          ),
            l());
        },
        removeItemFromContext: m,
        removeMentionFromEditor: (e) => {
          let n = r.store.get(t.editor);
          if (!n) return;
          let { editor: i } = n;
          i.view &&
            (i
              .chain()
              .focus()
              .command(({ tr: t, state: n }) => {
                let r = [];
                return (
                  n.doc.descendants((t, i) => {
                    if (t.type.name === ue && t.attrs.data?.id === e.id) {
                      let e = i,
                        s = i + t.nodeSize;
                      (" " === n.doc.textBetween(s, s + 1, void 0, "\0") &&
                        (s += 1),
                        r.push({ from: e, to: s }));
                    }
                    return !0;
                  }),
                  !!r.length &&
                    (r
                      .sort((e, t) => t.from - e.from)
                      .forEach((e) => t.delete(e.from, e.to)),
                    !0)
                );
              })
              .run(),
            l());
        },
        setContextFromLocalFiles: f,
        clearContext: () => {
          (r.store.set(t.context, []), b(), l());
        },
        clearAttachments: g,
        addQuoteToContext: (e) => {
          let n = r.store.get(t.context).filter((e) => "quote" !== e.type);
          (r.store.set(t.context, [
            { type: "quote", data: { quote: e } },
            ...n,
          ]),
            l());
        },
        removeQuoteFromContext: () => {
          let e = r.store.get(t.context).filter((e) => "quote" !== e.type);
          r.store.set(t.context, e);
        },
        setSaveToNewChatDraft: (e) => {
          r.store.set(t.saveToNewChatDraft, e);
        },
        restoreDraft: (e) => {
          (x(e), v(e));
        },
        restorePromptContext: x,
        restorePromptContent: v,
        restorePromptQueue: () => {
          let n = uy(e, !1).getLocalDraft();
          r.store.set(t.promptQueue, n.promptQueue);
        },
        setBannerState: (e) => {
          r.store.set(t.bannerState, e);
        },
        setTransientBannerState: (e) => {
          r.store.set(t.transientBannerState, e);
        },
        dismissTransientBannerState: function () {
          r.store.set(t.transientBannerState, null);
        },
        setRefinementElementSelected: y,
        clearRefinementElementSelected: b,
        setIsTodosWithQueueOpen: (e) => {
          r.store.set(t.isTodosWithQueueOpen, e);
        },
        setTodoList: (e) => {
          r.store.set(t.derivedTodoList, e);
        },
        clearTodoList: () => {
          r.store.set(t.derivedTodoList, { list: [], updatedAt: 0 });
        },
        setIsToolsDropdownOpen: (e) => {
          r.store.set(t.isToolsDropdownOpen, e);
        },
        setAddContextMenu: (e) => {
          r.store.set(t.addContextMenu, e);
        },
        getIndexOfQueuedPrompt: function (e) {
          return r.store.get(t.promptQueue).findIndex((t) => t.id === e);
        },
        restoreQueuedPromptToQueue: function (e, n) {
          let i,
            s = r.store.get(t.promptQueue);
          s.some((t) => t.id === e.id)
            ? console.warn(
                `Queued prompt with id ${e.id} already exists in the queue`,
              )
            : ((i =
                "number" == typeof n && n >= 0 && n <= s.length
                  ? [...s.slice(0, n), e, ...s.slice(n)]
                  : [...s, e]),
              r.store.set(t.promptQueue, i),
              j());
        },
        addPromptToQueue: w,
        removePromptFromQueue: function (e) {
          let n = r.store.get(t.promptQueue).filter((t) => t.id !== e);
          (r.store.set(t.promptQueue, n),
            j(),
            (0, i.track)("RemovePromptFromQueue", {
              queuedPromptId: e,
              queueLength: n.length,
            }));
        },
        clearPromptQueue: function () {
          (r.store.set(t.promptQueue, []),
            uy(e, r.store.get(t.saveToNewChatDraft)).updateLocalDraft({
              promptQueue: [],
            }));
        },
        reorderPromptQueue: function (e, n) {
          let i = r.store.get(t.promptQueue),
            s = i.findIndex((t) => t.id === e),
            a = i.findIndex((e) => e.id === n);
          if (-1 === s || -1 === a) return;
          let o = [...i],
            [l] = o.splice(s, 1);
          (o.splice(a, 0, l), r.store.set(t.promptQueue, o), j());
        },
        updateVoiceState: C,
        setVoiceStatus: k,
        setVoiceProcessing: S,
        addVoiceChunk: N,
        clearVoiceChunks: E,
        setVoiceTranscribedText: A,
        setVoiceSupported: D,
        setVoiceWaitingForReady: I,
        resetVoiceState: () => {
          r.store.set(t.voiceState, {
            status: r.store.get(t.voiceState).isSupported ? "ready" : "idle",
            loadingMessage: "",
            progressItems: [],
            isProcessing: !1,
            chunks: [],
            transcribedText: "",
            isSupported: r.store.get(t.voiceState).isSupported,
            waitingForReady: !1,
            initialTextLength: 0,
          });
        },
      };
    }
    function uF() {
      let e = (0, uA.assertChatId)((0, uA.useChatId)().chatId);
      return { atoms: uP(e), actions: uR(e), chatId: e };
    }
    let u_ = (e) => "uploading" === e || "compressing" === e;
    function uO(e) {
      if (!e.json) return "";
      try {
        let t = JSON.parse(e.json);
        return uB(t);
      } catch {
        return "";
      }
    }
    function uB(e) {
      return "text" === e.type && e.text
        ? e.text
        : e.content && Array.isArray(e.content)
          ? e.content.map((e) => uB(e)).join("")
          : "";
    }
    e.s(
      [
        "getPlainTextFromQueuedMessage",
        () => uO,
        "getPromptActions",
        () => uR,
        "getPromptAtoms",
        0,
        uP,
        "getWritablePromptAtoms",
        0,
        uT,
        "isUploading",
        0,
        u_,
        "useCurrentChatPrompt",
        () => uF,
      ],
      418929,
    );
  },
  209819,
  (e) => {
    "use strict";
    var t = e.i(92479),
      n = e.i(576191),
      r = e.i(887968),
      i = e.i(418929),
      s = e.i(393799),
      a = e.i(418625);
    function o(e) {
      let { chatId: i } = (0, t.useChatId)(),
        {
          data: s,
          mutate: o,
          isLoading: l,
          isValidating: c,
        } = (0, a.default)(["chat:meta", e ?? i]),
        u = (0, n.useRef)(s ?? r.CHAT_METADATA_FALLBACK);
      return {
        setMetadata: (0, n.useCallback)(
          (e) => o((t) => ({ ...(t ?? u.current), ...e })),
          [o],
        ),
        ...(s ?? r.CHAT_METADATA_FALLBACK),
        isLoading: l,
        isValidating: c,
        chatId: e ?? i,
      };
    }
    function l() {
      let { atoms: e, actions: t } = (0, i.useCurrentChatPrompt)(),
        r = (0, s.useAtomValue)(e.context);
      return {
        quote: r.find((e) => "quote" === e.type)?.data.quote ?? null,
        setQuote: (0, n.useCallback)(
          (e) => {
            e ? t.addQuoteToContext(e) : t.removeQuoteFromContext();
          },
          [t],
        ),
      };
    }
    function c() {
      let { chatId: e } = (0, t.useChatId)(),
        { data: n, mutate: r } = (0, a.default)(["chat:privacy", e]);
      return { chatPrivacy: n, setChatPrivacy: r };
    }
    e.s([
      "useChatMetadata",
      () => o,
      "useChatPrivacy",
      () => c,
      "useChatQuote",
      () => l,
    ]);
  },
  250557,
  (e) => {
    "use strict";
    e.s(["useLegacyAppliedScripts", () => a], 250557);
    var t = e.i(818273),
      n = e.i(92479),
      r = e.i(576191),
      i = e.i(908431);
    function s(e) {
      let t = new Set();
      try {
        let n = e?.[0]?.[1],
          r = i.z.object({
            steps: i.z.array(
              i.z.object({ type: i.z.string(), stepName: i.z.string() }),
            ),
          });
        for (let e of n) {
          if ("StepsCard" !== e[0]) continue;
          let n = r.safeParse(e[1]);
          if (n.success)
            for (let e of n.data.steps)
              "run-script" === e.type && t.add(e.stepName);
        }
        return t;
      } catch (e) {
        return t;
      }
    }
    function a() {
      let { messages: e, activeForkKey: i } = (0, n.useChatMessages)(),
        a = (0, r.useMemo)(() => {
          let t = new Set(i || []);
          return e.filter((e) => t.has(e.id));
        }, [e, i]);
      return {
        legacyScriptIdentifiers: (0, r.useMemo)(() => {
          let e = [];
          for (let n of a) {
            if ("assistant" !== n.role) continue;
            let r = (0, t.getBlocksFromState)(n.content, n.id).findLast(
              (e) => "code-project" === e.type,
            );
            if (!r) continue;
            let i = s(n.content.value);
            if (i.size) for (let t of i) e.push(`${r.id}:${t}`);
          }
          return e;
        }, [a]),
      };
    }
  },
  636282,
  (e) => {
    "use strict";
    var t = e.i(753533),
      n = e.i(92479),
      r = e.i(142219),
      i = e.i(9654);
    let s = new Map(),
      a = (0, t.cacheResultById)(s, () => ({
        isOpenIntent: (0, i.atom)({ type: "not-set" }),
        latestUpdateArgs: (0, i.atom)(null),
        displayIndexIntent: (0, i.atom)(0),
        environmentVariables: (0, i.atom)({}),
      })),
      o = new Map(),
      l = (0, t.cacheResultById)(o, (e) => {
        let t = a(e);
        return { ...t, isOpenDerived: (0, i.atom)((e) => e(t.isOpenIntent)) };
      });
    function c(e) {
      let t = a(e),
        n = l(e),
        i = () => {
          r.store.set(t.environmentVariables, {});
        };
      return {
        setIsOpenIntent: (e) => {
          (r.store.set(t.isOpenIntent, { type: "set", value: e }), e || i());
        },
        setEnvironmentVariableValue: (e, i) => {
          r.store.set(t.environmentVariables, {
            ...r.store.get(n.environmentVariables),
            [e]: i,
          });
        },
        resetEnvironmentVariables: i,
        focusWizardDialog: () => {
          let e = document.getElementById("wizard-dialog-container"),
            t = e?.querySelector(
              'input, button, select, textarea, a[href], [tabindex]:not([tabindex="-1"])',
            );
          t?.focus();
        },
        goToDisplay: (e) => {
          let n = "next" === e ? 1 : -1,
            i = r.store.get(t.displayIndexIntent);
          r.store.set(t.displayIndexIntent, i + n);
        },
        setLatestUpdateArgs: (e) => {
          r.store.set(t.latestUpdateArgs, e);
        },
      };
    }
    function u() {
      let e = (0, n.assertChatId)((0, n.useChatId)().chatId);
      return { atoms: l(e), actions: c(e), chatId: e };
    }
    e.s(["useWizardAtoms", () => u]);
  },
  204575,
  74356,
  487581,
  (e) => {
    "use strict";
    function t(e) {
      return !0 === e || ("object" == typeof e && "warning" in e);
    }
    (e.i(324834),
      e.i(644471),
      e.i(796104),
      e.i(479602),
      e.i(845210),
      e.s(["canShowPreview", () => t], 74356));
    var n = e.i(142219),
      r = e.i(9654);
    let i = (0, r.atom)([]),
      s = (0, r.atom)(null),
      a = (0, r.atom)(null),
      o = (0, r.atom)(null);
    function l(e) {
      return `v0-preview-${e}`;
    }
    async function c(e, t, r) {
      let i = l(e);
      for (let e = 0; e < 10; e++) {
        let e = document.getElementById(i);
        if (e) {
          (n.store.set(s, t),
            n.store.set(o, { callback: r }),
            e.contentWindow?.postMessage(
              { type: "preload_client", id: t, __v0_remote__: !0 },
              "*",
            ));
          break;
        }
        await new Promise((e) => setTimeout(e, 200));
      }
    }
    (e.s(
      [
        "previewBlockCollectedErrorsVersion",
        0,
        s,
        "previewBlockDisplayedErrorsVersion",
        0,
        a,
        "previewBlockErrorsAtom",
        0,
        i,
        "previewBlockPreloadingSuccessCallback",
        0,
        o,
      ],
      487581,
    ),
      e.s(
        ["getBlockIframeId", () => l, "preloadIframeForBlock", () => c],
        204575,
      ));
  },
  577247,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(159028);
    let r = new Set(),
      i = new Set();
    function s() {
      for (let e of (i.clear(),
      i.add(window.location.origin),
      document.querySelectorAll("iframe"))) {
        let t = e.getAttribute("src");
        if (t && !t.startsWith("/"))
          try {
            let e = new URL(t);
            i.add(e.origin);
          } catch (e) {
            console.warn(`Invalid iframe src: ${t}`, e);
          }
      }
      for (let e of document.querySelectorAll("script[src]")) {
        let t = e.getAttribute("src");
        if (t && !t.startsWith("/"))
          try {
            let e = new URL(t);
            i.add(e.origin);
          } catch (e) {
            console.warn(`Invalid script src: ${t}`, e);
          }
      }
    }
    function a(e, a) {
      ((0, t.useEffect)(
        () => (
          r.add(e),
          () => {
            r.delete(e);
          }
        ),
        a || [e],
      ),
        (0, n.default)("global-messages", () => {
          s();
          let e = (e) => {
            if (!e.defaultPrevented) {
              if (!i.has(e.origin) && (s(), !i.has(e.origin)))
                return void console.warn(
                  `Received message from untrusted origin: ${e.origin}.`,
                );
              for (let t of r) t(e);
            }
          };
          return (
            window.addEventListener("message", e),
            () => {
              window.removeEventListener("message", e);
            }
          );
        }));
    }
    e.s(["useMessage", () => a]);
  },
  914483,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(393799);
    let r = (function () {
      let e = new Map();
      return function (n, r) {
        return (e.has(n) || e.set(n, (0, t.atom)(r)), e.get(n));
      };
    })();
    function i(e, t) {
      return (0, n.useAtomValue)(r(e, t));
    }
    function s(e, t) {
      return (0, n.useSetAtom)(r(e, t));
    }
    function a(e, t) {
      return (0, n.useAtom)(r(e, t));
    }
    e.s(["useGet", () => i, "useGetSet", () => a, "useSet", () => s]);
  },
  385671,
  775320,
  923510,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(254211),
      i = e.i(142219),
      s = e.i(569543),
      a = t,
      o = i;
    let l = 0,
      c = 0.2;
    function u(e) {
      return Math.round(1e4 * e) / 1e4;
    }
    function d(e) {
      let t = e.filter((e) => e.visible);
      if (0 === t.length) return e;
      if (1 === t.length)
        return e.map((e) => (e.visible ? { ...e, ratio: 1 } : e));
      let n = t.reduce((e, t) => e + t.ratio, 0);
      if (0.001 >= Math.abs(n - 1)) return e;
      let r = 1 / n;
      return e.map((e) => (e.visible ? { ...e, ratio: u(e.ratio * r) } : e));
    }
    function h(e, t, n = !1) {
      let r = e.panelsLayout.findIndex((e) => e.id === t);
      if (-1 === r || !e.panelsLayout[r]?.visible) return e;
      let i = e.panelsLayout.filter((e) => e.visible);
      if (i.length <= 1)
        return {
          panelsLayout: e.panelsLayout.map((e) =>
            e.id === t
              ? {
                  ...e,
                  visible: !1,
                  savedRatio: e.ratio,
                  ratio: 0,
                  savedVisibility: n ? e.visible : e.savedVisibility,
                }
              : e,
          ),
          mobilePanel: e.mobilePanel,
        };
      let s = i.filter((e) => e.id !== t).reduce((e, t) => e + t.ratio, 0),
        a = s > 0 ? 1 / s : 0,
        o = e.panelsLayout.map((e) =>
          e.id === t
            ? {
                ...e,
                visible: !1,
                savedRatio: e.ratio,
                ratio: 0,
                savedVisibility: n ? e.visible : e.savedVisibility,
              }
            : e.visible
              ? { ...e, ratio: u(e.ratio * a) }
              : e,
        ),
        l = e.mobilePanel;
      if (e.mobilePanel === t) {
        let e = o.find((e) => e.visible);
        e && (l = e.id);
      }
      return { panelsLayout: d(o), mobilePanel: l };
    }
    function p(e, t) {
      let n = e.panelsLayout.findIndex((e) => e.id === t);
      if (-1 === n || e.panelsLayout[n]?.visible) return e;
      let r = e.panelsLayout[n];
      if (!r) return e;
      let i = e.panelsLayout.filter((e) => e.visible);
      if (0 === i.length)
        return {
          panelsLayout: e.panelsLayout.map((e) =>
            e.id === t ? { ...e, visible: !0, ratio: 1 } : e,
          ),
          mobilePanel: e.mobilePanel,
        };
      let s = c + 0.05,
        a = Math.max(s, r.savedRatio || s),
        o = i.reduce((e, t) => e + t.ratio, 0),
        l = Math.min(a, 0.8),
        h = u(1 - l) / o;
      return {
        panelsLayout: d(
          e.panelsLayout.map((e) =>
            e.id === t
              ? { ...e, visible: !0, ratio: l }
              : e.visible
                ? { ...e, ratio: u(e.ratio * h) }
                : e,
          ),
        ),
        mobilePanel: e.mobilePanel,
      };
    }
    function m(e, t) {
      return -1 === e.panelsLayout.findIndex((e) => e.id === t)
        ? e
        : {
            panelsLayout: e.panelsLayout.map((e) => ({
              ...e,
              savedRatio: e.visible ? e.ratio : e.savedRatio,
              savedVisibility: e.visible,
              visible: e.id === t,
              ratio: +(e.id === t),
            })),
            mobilePanel: t,
          };
    }
    function f(e, t, n, r, i, s) {
      let a = e.panelsLayout.findIndex((e) => e.id === t),
        o = e.panelsLayout.findIndex((e) => e.id === n);
      if (
        -1 === a ||
        -1 === o ||
        !e.panelsLayout[a]?.visible ||
        !e.panelsLayout[o]?.visible
      )
        return e;
      let l = e.panelsLayout[a],
        h = e.panelsLayout[o];
      if (!l || !h) return e;
      let p = u(l.ratio + r),
        m = u(h.ratio - r),
        f = i?.[t] ?? c,
        g = i?.[n] ?? c,
        x = s?.[t] ?? 1,
        v = s?.[n] ?? 1;
      if (p < f || p > x || m < g || m > v) return e;
      let y = e.panelsLayout.map((e) =>
        e.id === t ? { ...e, ratio: p } : e.id === n ? { ...e, ratio: m } : e,
      );
      return { ...e, panelsLayout: d(y) };
    }
    function g(e, t) {
      let n = [];
      return (
        e.panelsLayout.forEach((r, i) => {
          (n.push(r.visible ? `${r.ratio}fr` : "0fr"),
            i < e.panelsLayout.length - 1 && n.push(`${t}px`));
        }),
        n.join(" ")
      );
    }
    function x(e) {
      let t = [];
      return (
        e.panelsLayout.forEach((n, r) => {
          (t.push(n.id),
            r < e.panelsLayout.length - 1 && t.push(`resize-${r}`));
        }),
        `"${t.join(" ")}"`
      );
    }
    function v(e) {
      return {
        desktopGridTemplateAreas: x(e),
        desktopGridTemplateColumns: g(e, l),
        desktopGridTemplateColumnsUsingCqw: g(e, l),
      };
    }
    function y(e) {
      return 1 !== e.panelsLayout.filter((e) => e.visible).length
        ? e
        : {
            panelsLayout: d(
              e.panelsLayout.map((e) =>
                !0 === e.savedVisibility
                  ? { ...e, visible: !0, ratio: e.savedRatio || c }
                  : e,
              ),
            ),
            mobilePanel: e.mobilePanel,
          };
    }
    e.s(
      [
        "MIN_PANEL_RATIO",
        0,
        c,
        "RESIZE_HANDLE_WIDTH",
        0,
        l,
        "collapsePanel",
        () => h,
        "computeGridProperties",
        () => v,
        "expandPanel",
        () => p,
        "fullscreenPanel",
        () => m,
        "resizePanel",
        () => f,
        "restoreSavedVisibility",
        () => y,
      ],
      775320,
    );
    var b = n,
      j = e.i(314907);
    let w = new Map(),
      C = (0, b.cacheResultById)(w, () => ({
        resizingId: (0, a.atom)(null),
        isReordering: (0, a.atom)(!1),
        disableLayoutAnimations: (0, a.atom)(!1),
        autoCollapsiblePanels: (0, a.atom)(new Set()),
        panelMinRatios: (0, a.atom)(new Map()),
        panelMaxRatios: (0, a.atom)(new Map()),
        panelMinPixelsSizes: (0, a.atom)(new Map()),
        cursorState: (0, a.atom)("normal"),
      }));
    function k(e) {
      return Object.freeze(e.map((e) => e.id));
    }
    function S(e) {
      return Object.freeze(e.filter((e) => e.visible).map((e) => e.id));
    }
    function N(e, t) {
      return e.length === t.length && e.every((e, n) => e === t[n]);
    }
    let E = new Map(),
      A = (0, b.cacheResultById)(E, (e, t) => {
        let n = C(e),
          { panelsLayoutAtom: r, mobilePanelAtom: i } = t,
          s = (0, j.selectAtom)(
            (0, a.atom)((e) => k(e(r))),
            (e) => e,
            N,
          ),
          o = (0, j.selectAtom)(
            (0, a.atom)((e) => S(e(r))),
            (e) => e,
            N,
          ),
          l = (0, a.atom)((e) => v({ panelsLayout: e(r), mobilePanel: e(i) })),
          c = (0, a.atom)(() => !0);
        return {
          ...n,
          panelsLayout: r,
          mobilePanel: i,
          gridProperties: l,
          isResizing: (0, a.atom)((e) => null !== e(n.resizingId)),
          panelOrder: s,
          visiblePanels: o,
          visiblePanelsLength: (0, a.atom)((e) => e(o).length),
          controlsEnabled: c,
          isEmptyStateVisible: (0, a.atom)((e) => 0 === e(o).length),
        };
      }),
      D = (e, t) => {
        let n = C(e),
          { panelsLayoutAtom: r, mobilePanelAtom: i } = t,
          s = (e) => {
            let t = p(
              { panelsLayout: o.store.get(r), mobilePanel: o.store.get(i) },
              e,
            );
            (o.store.set(r, t.panelsLayout), o.store.set(i, t.mobilePanel));
          },
          a = (e, t = !1) => {
            let n = h(
              { panelsLayout: o.store.get(r), mobilePanel: o.store.get(i) },
              e,
              t,
            );
            (o.store.set(r, n.panelsLayout), o.store.set(i, n.mobilePanel));
          };
        return {
          setIsResizing: (e) => {
            o.store.set(n.resizingId, e);
          },
          resizePanel: (e) => {
            let { index: t, delta: s, containerWidth: a } = e,
              l = o.store.get(r),
              u = o.store.get(i),
              d = l[t];
            if (!d) return !1;
            let h = l.slice(t + 1).find((e) => e.visible);
            if (!d || !h || !d.visible) return !1;
            let p = { panelsLayout: l, mobilePanel: u },
              m = o.store.get(n.panelMinRatios),
              g = o.store.get(n.panelMaxRatios),
              x = o.store.get(n.panelMinPixelsSizes),
              v = Object.fromEntries(m),
              y = Object.fromEntries(g);
            if (a && a > 0)
              for (let [e, t] of x.entries()) {
                let n = t / a,
                  r = v[e] ?? c;
                v[e] = Math.max(r, n);
              }
            let b = f(p, d.id, h.id, s, v, y);
            return (
              b !== p &&
              (o.store.set(r, b.panelsLayout),
              o.store.set(i, b.mobilePanel),
              !0)
            );
          },
          movePanel: (e) => {
            let { id: t, direction: i } = e,
              s = o.store.get(r),
              a = s.findIndex((e) => e.id === t),
              l = a + ("left" === i ? -1 : 1);
            if (-1 === a || l < 0 || l >= s.length) return;
            o.store.set(n.isReordering, !0);
            let c = [...s],
              u = c[a],
              d = c[l];
            u &&
              d &&
              ((c[a] = d),
              (c[l] = u),
              o.store.set(r, c),
              requestAnimationFrame(() => {
                o.store.set(n.isReordering, !1);
              }));
          },
          togglePanel: (e) => {
            let t = o.store.get(r),
              n = o.store.get(i),
              l = t.find((t) => t.id === e);
            if (l)
              if (l.visible) {
                a(e);
                let n = t.find((t) => t.id !== e && t.visible);
                n && o.store.set(i, n.id);
              } else (s(e), n !== e && o.store.set(i, e));
          },
          openPanel: s,
          closePanel: a,
          fullscreenPanel: (e) => {
            let t = m(
              { panelsLayout: o.store.get(r), mobilePanel: o.store.get(i) },
              e,
            );
            (o.store.set(r, t.panelsLayout), o.store.set(i, t.mobilePanel));
          },
          restoreSavedVisibility: () => {
            let e = y({
              panelsLayout: o.store.get(r),
              mobilePanel: o.store.get(i),
            });
            (o.store.set(r, e.panelsLayout), o.store.set(i, e.mobilePanel));
          },
          setMobilePanel: (e) => {
            o.store.set(i, e);
          },
          setPanelsLayout: (e) => {
            o.store.set(r, e);
          },
          isPanelFullscreen: (e) => {
            let t = o.store.get(r);
            return (
              t.some((t) => t.id === e && t.visible) &&
              t.every((t) => t.id === e || !t.visible)
            );
          },
          registerAutoCollapsiblePanel: (e) => {
            let t = new Set(o.store.get(n.autoCollapsiblePanels));
            (t.add(e), o.store.set(n.autoCollapsiblePanels, t));
          },
          unregisterAutoCollapsiblePanel: (e) => {
            let t = new Set(o.store.get(n.autoCollapsiblePanels));
            (t.delete(e), o.store.set(n.autoCollapsiblePanels, t));
          },
          isAutoCollapsible: (e) => o.store.get(n.autoCollapsiblePanels).has(e),
          setPanelMinRatio: (e, t) => {
            let r = new Map(o.store.get(n.panelMinRatios));
            (r.set(e, t), o.store.set(n.panelMinRatios, r));
          },
          setPanelMaxRatio: (e, t) => {
            let r = new Map(o.store.get(n.panelMaxRatios));
            (r.set(e, t), o.store.set(n.panelMaxRatios, r));
          },
          removePanelRatios: (e) => {
            let t = o.store.get(n.panelMinRatios),
              r = o.store.get(n.panelMaxRatios),
              i = new Map(t),
              s = new Map(r);
            (i.delete(e),
              s.delete(e),
              o.store.set(n.panelMinRatios, i),
              o.store.set(n.panelMaxRatios, s));
          },
          getPanelMinRatio: (e) => o.store.get(n.panelMinRatios).get(e) ?? c,
          getPanelMaxRatio: (e) => o.store.get(n.panelMaxRatios).get(e) ?? 1,
          setPanelMinPixelsSize: (e, t) => {
            let r = new Map(o.store.get(n.panelMinPixelsSizes));
            (r.set(e, t), o.store.set(n.panelMinPixelsSizes, r));
          },
          removePanelMinPixelsSize: (e) => {
            let t = new Map(o.store.get(n.panelMinPixelsSizes));
            (t.delete(e), o.store.set(n.panelMinPixelsSizes, t));
          },
          getPanelMinPixelsSize: (e) =>
            o.store.get(n.panelMinPixelsSizes).get(e) ?? 0,
          setCursorState: (e) => {
            o.store.set(n.cursorState, e);
          },
        };
      };
    e.s(["getPanelLayoutActions", 0, D, "getPanelLayoutAtoms", 0, A], 923510);
    let I = null,
      M = (0, n.cacheResult)(I, () => {
        let e = (0, r.getDurableRootAtoms)("root");
        return {
          panelsLayoutAtom: e.chatPanelLayout,
          mobilePanelAtom: e.chatMobilePanel,
        };
      }),
      T = null,
      L = (0, n.cacheResult)(T, () => ({
        activeTabIntent: (0, t.atom)("preview"),
        previewSize: (0, t.atom)("desktop"),
        mobilePanel: (0, t.atom)(s.CHAT_OUTPUT_PANEL_ID),
      })),
      P = null,
      R = (0, n.cacheResult)(P, () => {
        let e = L(),
          n = A("chat", M());
        return {
          ...e,
          isChatOnRight: (0, t.atom)((e) => {
            let t = e(n.panelsLayout);
            return t[1]?.id === s.CHAT_INPUT_PANEL_ID;
          }),
          isInputPanelOpen: (0, t.atom)((e) =>
            e(n.panelsLayout).some(
              (e) => e.id === s.CHAT_INPUT_PANEL_ID && e.visible,
            ),
          ),
          isResizing: (0, t.atom)((e) => e(n.isResizing)),
          mobilePanel: (0, t.atom)((e) => e(n.mobilePanel)),
          deviceStyles: (0, t.atom)((t) => {
            let n = t(e.previewSize),
              r = { width: "100%", height: "100%" };
            switch (n) {
              case "phone":
                return {
                  width: "max(40cqh, 300px)",
                  height: "max(90%, 600px)",
                };
              case "tablet":
                return {
                  width: "max(70cqh, 700px)",
                  height: "max(55%, 550px)",
                };
              default:
                return r;
            }
          }),
          isDesktopPreviewSize: (0, t.atom)(
            (t) => "desktop" === t(e.previewSize),
          ),
        };
      }),
      F = null,
      _ = (0, n.cacheResult)(F, () => {
        let e = A("chat", M()),
          t = D("chat", M()),
          n = L(),
          r = (e) => {
            t.movePanel({
              id: s.CHAT_INPUT_PANEL_ID,
              direction: e ? "right" : "left",
            });
          };
        return {
          setChatOnRight: r,
          toggleInputPanel: () => {
            t.togglePanel(s.CHAT_INPUT_PANEL_ID);
          },
          setActiveTabIntent: (e) => {
            i.store.set(n.activeTabIntent, e);
          },
          toggleChatPosition: () => {
            let t = i.store.get(e.panelsLayout);
            r(t[1]?.id !== s.CHAT_INPUT_PANEL_ID);
          },
          isChatOnRight: () => {
            let t = i.store.get(e.panelsLayout);
            return t[1]?.id === s.CHAT_INPUT_PANEL_ID;
          },
          setMobilePanel: (e) => {
            t.setMobilePanel(e);
          },
          setPreviewSize: (e) => {
            i.store.set(n.previewSize, e);
          },
        };
      });
    function O() {
      return { atoms: R(), actions: _() };
    }
    e.s(
      [
        "getChatLayoutActions",
        0,
        _,
        "getChatLayoutAtoms",
        0,
        R,
        "getWritableChatPanelLayoutAtoms",
        0,
        M,
        "useChatLayout",
        () => O,
      ],
      385671,
    );
  },
  270793,
  (e, t, n) => {
    "use strict";
    var r = (function () {
      function e(e, t) {
        for (var n = 0; n < t.length; n++) {
          var r = t[n];
          ((r.enumerable = r.enumerable || !1),
            (r.configurable = !0),
            "value" in r && (r.writable = !0),
            Object.defineProperty(e, r.key, r));
        }
      }
      return function (t, n, r) {
        return (n && e(t.prototype, n), r && e(t, r), t);
      };
    })();
    function i(e, t) {
      if (!(e instanceof t))
        throw TypeError("Cannot call a class as a function");
    }
    var s = [
      [
        { color: "0, 0, 0", class: "ansi-black" },
        { color: "187, 0, 0", class: "ansi-red" },
        { color: "0, 187, 0", class: "ansi-green" },
        { color: "187, 187, 0", class: "ansi-yellow" },
        { color: "0, 0, 187", class: "ansi-blue" },
        { color: "187, 0, 187", class: "ansi-magenta" },
        { color: "0, 187, 187", class: "ansi-cyan" },
        { color: "255,255,255", class: "ansi-white" },
      ],
      [
        { color: "85, 85, 85", class: "ansi-bright-black" },
        { color: "255, 85, 85", class: "ansi-bright-red" },
        { color: "0, 255, 0", class: "ansi-bright-green" },
        { color: "255, 255, 85", class: "ansi-bright-yellow" },
        { color: "85, 85, 255", class: "ansi-bright-blue" },
        { color: "255, 85, 255", class: "ansi-bright-magenta" },
        { color: "85, 255, 255", class: "ansi-bright-cyan" },
        { color: "255, 255, 255", class: "ansi-bright-white" },
      ],
    ];
    t.exports = (function () {
      function e() {
        (i(this, e),
          (this.fg = this.bg = this.fg_truecolor = this.bg_truecolor = null),
          (this.bright = 0));
      }
      return (
        r(e, null, [
          {
            key: "escapeForHtml",
            value: function (t) {
              return new e().escapeForHtml(t);
            },
          },
          {
            key: "linkify",
            value: function (t) {
              return new e().linkify(t);
            },
          },
          {
            key: "ansiToHtml",
            value: function (t, n) {
              return new e().ansiToHtml(t, n);
            },
          },
          {
            key: "ansiToJson",
            value: function (t, n) {
              return new e().ansiToJson(t, n);
            },
          },
          {
            key: "ansiToText",
            value: function (t) {
              return new e().ansiToText(t);
            },
          },
        ]),
        r(e, [
          {
            key: "setupPalette",
            value: function () {
              this.PALETTE_COLORS = [];
              for (var e = 0; e < 2; ++e)
                for (var t = 0; t < 8; ++t)
                  this.PALETTE_COLORS.push(s[e][t].color);
              for (
                var n = [0, 95, 135, 175, 215, 255],
                  r = function (e, t, r) {
                    return n[e] + ", " + n[t] + ", " + n[r];
                  },
                  i = 0;
                i < 6;
                ++i
              )
                for (var a = 0; a < 6; ++a)
                  for (var o = 0; o < 6; ++o)
                    this.PALETTE_COLORS.push(r(i, a, o));
              for (var l = 8, c = 0; c < 24; ++c, l += 10)
                this.PALETTE_COLORS.push(r(l, l, l));
            },
          },
          {
            key: "escapeForHtml",
            value: function (e) {
              return e.replace(/[&<>]/gm, function (e) {
                return "&" == e
                  ? "&amp;"
                  : "<" == e
                    ? "&lt;"
                    : ">" == e
                      ? "&gt;"
                      : "";
              });
            },
          },
          {
            key: "linkify",
            value: function (e) {
              return e.replace(/(https?:\/\/[^\s]+)/gm, function (e) {
                return '<a href="' + e + '">' + e + "</a>";
              });
            },
          },
          {
            key: "ansiToHtml",
            value: function (e, t) {
              return this.process(e, t, !0);
            },
          },
          {
            key: "ansiToJson",
            value: function (e, t) {
              return (
                ((t = t || {}).json = !0),
                (t.clearLine = !1),
                this.process(e, t, !0)
              );
            },
          },
          {
            key: "ansiToText",
            value: function (e) {
              return this.process(e, {}, !1);
            },
          },
          {
            key: "process",
            value: function (e, t, n) {
              var r = this,
                i = this,
                s = e.split(/\033\[/),
                a = s.shift();
              (null == t && (t = {}), (t.clearLine = /\r/.test(e)));
              var o = s.map(function (e) {
                return r.processChunk(e, t, n);
              });
              if (t && t.json) {
                var l = i.processChunkJson("");
                return (
                  (l.content = a),
                  (l.clearLine = t.clearLine),
                  o.unshift(l),
                  t.remove_empty &&
                    (o = o.filter(function (e) {
                      return !e.isEmpty();
                    })),
                  o
                );
              }
              return (o.unshift(a), o.join(""));
            },
          },
          {
            key: "processChunkJson",
            value: function (e, t, n) {
              var r = ((t = void 0 === t ? {} : t).use_classes =
                  void 0 !== t.use_classes && t.use_classes),
                i = (t.key = r ? "class" : "color"),
                a = {
                  content: e,
                  fg: null,
                  bg: null,
                  fg_truecolor: null,
                  bg_truecolor: null,
                  clearLine: t.clearLine,
                  decoration: null,
                  was_processed: !1,
                  isEmpty: function () {
                    return !a.content;
                  },
                },
                o = e.match(
                  /^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m,
                );
              if (!o) return a;
              a.content = o[4];
              var l = o[2].split(";");
              if ("" !== o[1] || "m" !== o[3] || !n) return a;
              var c = this;
              for (c.decoration = null; l.length > 0; ) {
                var u = parseInt(l.shift());
                if (isNaN(u) || 0 === u) c.fg = c.bg = c.decoration = null;
                else if (1 === u) c.decoration = "bold";
                else if (2 === u) c.decoration = "dim";
                else if (3 == u) c.decoration = "italic";
                else if (4 == u) c.decoration = "underline";
                else if (5 == u) c.decoration = "blink";
                else if (7 === u) c.decoration = "reverse";
                else if (8 === u) c.decoration = "hidden";
                else if (9 === u) c.decoration = "strikethrough";
                else if (39 == u) c.fg = null;
                else if (49 == u) c.bg = null;
                else if (u >= 30 && u < 38) c.fg = s[0][u % 10][i];
                else if (u >= 90 && u < 98) c.fg = s[1][u % 10][i];
                else if (u >= 40 && u < 48) c.bg = s[0][u % 10][i];
                else if (u >= 100 && u < 108) c.bg = s[1][u % 10][i];
                else if (38 === u || 48 === u) {
                  var d = 38 === u;
                  if (l.length >= 1) {
                    var h = l.shift();
                    if ("5" === h && l.length >= 1) {
                      var p = parseInt(l.shift());
                      if (p >= 0 && p <= 255)
                        if (r) {
                          var m =
                            p >= 16
                              ? "ansi-palette-" + p
                              : s[+(p > 7)][p % 8].class;
                          d ? (c.fg = m) : (c.bg = m);
                        } else
                          (this.PALETTE_COLORS || c.setupPalette(),
                            d
                              ? (c.fg = this.PALETTE_COLORS[p])
                              : (c.bg = this.PALETTE_COLORS[p]));
                    } else if ("2" === h && l.length >= 3) {
                      var f = parseInt(l.shift()),
                        g = parseInt(l.shift()),
                        x = parseInt(l.shift());
                      if (
                        f >= 0 &&
                        f <= 255 &&
                        g >= 0 &&
                        g <= 255 &&
                        x >= 0 &&
                        x <= 255
                      ) {
                        var v = f + ", " + g + ", " + x;
                        r
                          ? d
                            ? ((c.fg = "ansi-truecolor"), (c.fg_truecolor = v))
                            : ((c.bg = "ansi-truecolor"), (c.bg_truecolor = v))
                          : d
                            ? (c.fg = v)
                            : (c.bg = v);
                      }
                    }
                  }
                }
              }
              return (
                (null === c.fg && null === c.bg && null === c.decoration) ||
                  ((a.fg = c.fg),
                  (a.bg = c.bg),
                  (a.fg_truecolor = c.fg_truecolor),
                  (a.bg_truecolor = c.bg_truecolor),
                  (a.decoration = c.decoration),
                  (a.was_processed = !0)),
                a
              );
            },
          },
          {
            key: "processChunk",
            value: function (e, t, n) {
              var r = this;
              t = t || {};
              var i = this.processChunkJson(e, t, n);
              if (t.json) return i;
              if (i.isEmpty()) return "";
              if (!i.was_processed) return i.content;
              var s = t.use_classes,
                a = [],
                o = [],
                l = {},
                c = function (e) {
                  var t = [],
                    n = void 0;
                  for (n in e)
                    e.hasOwnProperty(n) &&
                      t.push("data-" + n + '="' + r.escapeForHtml(e[n]) + '"');
                  return t.length > 0 ? " " + t.join(" ") : "";
                };
              return (i.fg &&
                (s
                  ? (o.push(i.fg + "-fg"),
                    null !== i.fg_truecolor &&
                      ((l["ansi-truecolor-fg"] = i.fg_truecolor),
                      (i.fg_truecolor = null)))
                  : a.push("color:rgb(" + i.fg + ")")),
              i.bg &&
                (s
                  ? (o.push(i.bg + "-bg"),
                    null !== i.bg_truecolor &&
                      ((l["ansi-truecolor-bg"] = i.bg_truecolor),
                      (i.bg_truecolor = null)))
                  : a.push("background-color:rgb(" + i.bg + ")")),
              i.decoration &&
                (s
                  ? o.push("ansi-" + i.decoration)
                  : "bold" === i.decoration
                    ? a.push("font-weight:bold")
                    : "dim" === i.decoration
                      ? a.push("opacity:0.5")
                      : "italic" === i.decoration
                        ? a.push("font-style:italic")
                        : "reverse" === i.decoration
                          ? a.push("filter:invert(100%)")
                          : "hidden" === i.decoration
                            ? a.push("visibility:hidden")
                            : "strikethrough" === i.decoration
                              ? a.push("text-decoration:line-through")
                              : a.push("text-decoration:" + i.decoration)),
              s)
                ? '<span class="' +
                    o.join(" ") +
                    '"' +
                    c(l) +
                    ">" +
                    i.content +
                    "</span>"
                : '<span style="' +
                    a.join(";") +
                    '"' +
                    c(l) +
                    ">" +
                    i.content +
                    "</span>";
            },
          },
        ]),
        e
      );
    })();
  },
  864812,
  (e, t, n) => {
    function r(e) {
      if (!e) return "";
      if (!/\r/.test(e)) return e;
      for (e = e.replace(/\r+\n/gm, "\n"); /\r./.test(e); )
        e = e.replace(/^([^\r\n]*)\r+([^\r\n]+)/gm, function (e, t, n) {
          return n + t.slice(n.length);
        });
      return e;
    }
    function i(e) {
      for (var t = 0, n = 0; n < e.length; n++)
        e[t].length <= e[n].length && (t = n);
      return t;
    }
    function s(e) {
      if (!/\r/.test(e)) return e;
      for (var t = e.split("\r"), n = []; t.length > 0; ) {
        var r = i(t);
        (n.push(t[r]), (t = t.slice(r + 1)));
      }
      return n.join("\r");
    }
    function a(e) {
      if (!e) return "";
      if (!/\r/.test(e)) return e;
      if (!/\n/.test(e)) return s(e);
      var t = (e = e.replace(/\r+\n/gm, "\n")).lastIndexOf("\n");
      return r(e.slice(0, t)) + "\n" + s(e.slice(t + 1));
    }
    ((t.exports = r),
      (t.exports.escapeCarriageReturn = r),
      (t.exports.escapeCarriageReturnSafe = a));
  },
  181761,
  (e, t, n) => {
    "use strict";
    var r =
        (e.e && e.e.__importDefault) ||
        function (e) {
          return e && e.__esModule ? e : { default: e };
        },
      i =
        (e.e && e.e.__importStar) ||
        function (e) {
          if (e && e.__esModule) return e;
          var t = {};
          if (null != e)
            for (var n in e) Object.hasOwnProperty.call(e, n) && (t[n] = e[n]);
          return ((t.default = e), t);
        };
    Object.defineProperty(n, "__esModule", { value: !0 });
    let s = r(e.r(270793)),
      a = e.r(864812),
      o = i(e.r(576191));
    function l(e, t = !1) {
      return (
        (e = a.escapeCarriageReturn(h(e))),
        s.default.ansiToJson(e, { json: !0, remove_empty: !0, use_classes: t })
      );
    }
    function c(e) {
      let t = "";
      return (e.bg && (t += `${e.bg}-bg `),
      e.fg && (t += `${e.fg}-fg `),
      e.decoration && (t += `ansi-${e.decoration} `),
      "" === t)
        ? null
        : (t = t.substring(0, t.length - 1));
    }
    function u(e) {
      let t = {};
      return (
        e.bg && (t.backgroundColor = `rgb(${e.bg})`),
        e.fg && (t.color = `rgb(${e.fg})`),
        t
      );
    }
    function d(e, t, n, r) {
      let i,
        s = t ? null : u(n),
        a = t ? c(n) : null;
      if (!e)
        return o.createElement(
          "span",
          { style: s, key: r, className: a },
          n.content,
        );
      let l = [],
        d =
          /(\s|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,
        h = 0;
      for (; null !== (i = d.exec(n.content)); ) {
        let [, e, t] = i,
          r = i.index + e.length;
        r > h && l.push(n.content.substring(h, r));
        let s = t.startsWith("www.") ? `http://${t}` : t;
        (l.push(
          o.createElement("a", { key: h, href: s, target: "_blank" }, `${t}`),
        ),
          (h = d.lastIndex));
      }
      return (
        h < n.content.length && l.push(n.content.substring(h)),
        o.createElement("span", { style: s, key: r, className: a }, l)
      );
    }
    function h(e) {
      let t = e;
      do t = (e = t).replace(/[^\n]\x08/gm, "");
      while (t.length < e.length);
      return e;
    }
    n.default = function (e) {
      let { className: t, useClasses: n, children: r, linkify: i } = e;
      return o.createElement(
        "code",
        { className: t },
        l(null != r ? r : "", null != n && n).map(
          d.bind(null, null != i && i, null != n && n),
        ),
      );
    };
  },
  110909,
  (__turbopack_context__) => {
    "use strict";
    var _path$8,
      _path$7,
      _path$6,
      _path2$5,
      _path$5,
      _path2$4,
      _path$4,
      _path2$3,
      _path$3,
      _path2$2,
      _path$2,
      _path2$1,
      _path$1,
      _path,
      _path2,
      __TURBOPACK__imported__module__324834__ = __turbopack_context__.i(324834),
      __TURBOPACK__imported__module__576191__ = __turbopack_context__.i(576191),
      __TURBOPACK__imported__module__324834__1 =
        __TURBOPACK__imported__module__324834__,
      __TURBOPACK__imported__module__576191__1 =
        __TURBOPACK__imported__module__576191__;
    function isObject(e) {
      return "[object Object]" === Object.prototype.toString.call(e);
    }
    function objectSize(e) {
      return Array.isArray(e)
        ? e.length
        : isObject(e)
          ? Object.keys(e).length
          : 0;
    }
    function stringifyForCopying(e, t) {
      if ("string" == typeof e) return e;
      try {
        return JSON.stringify(
          e,
          (e, t) => {
            switch (typeof t) {
              case "bigint":
                return String(t) + "n";
              case "number":
              case "boolean":
              case "object":
              case "string":
                return t;
              default:
                return String(t);
            }
          },
          t,
        );
      } catch (e) {
        return `${e.name}: ${e.message}` || "JSON.stringify failed";
      }
    }
    function isCollapsed(e, t, n, r, i, s) {
      if (s && void 0 !== s.collapsed) return !!s.collapsed;
      if ("boolean" == typeof r) return r;
      if ("number" == typeof r && t > r) return !0;
      let a = objectSize(e);
      if ("function" == typeof r) {
        let i = safeCall(r, [{ node: e, depth: t, indexOrName: n, size: a }]);
        if ("boolean" == typeof i) return i;
      }
      return !!((Array.isArray(e) && a > i) || (isObject(e) && a > i));
    }
    function isCollapsed_largeArray(e, t, n, r, i, s) {
      if (s && void 0 !== s.collapsed) return !!s.collapsed;
      if ("boolean" == typeof r) return r;
      if ("number" == typeof r && t > r) return !0;
      let a = Math.ceil(e.length / 100);
      if ("function" == typeof r) {
        let i = safeCall(r, [{ node: e, depth: t, indexOrName: n, size: a }]);
        if ("boolean" == typeof i) return i;
      }
      return !!((Array.isArray(e) && a > i) || (isObject(e) && a > i));
    }
    function ifDisplay(e, t, n) {
      return "boolean" == typeof e
        ? e
        : ("number" == typeof e && !!(t > e)) ||
            ("collapsed" === e && !!n) ||
            ("expanded" === e && !n);
    }
    function safeCall(e, t) {
      try {
        return e(...t);
      } catch (e) {
        reportError(e);
      }
    }
    function editableAdd(e) {
      if (!0 === e || (isObject(e) && !0 === e.add)) return !0;
    }
    function editableEdit(e) {
      if (!0 === e || (isObject(e) && !0 === e.edit)) return !0;
    }
    function editableDelete(e) {
      if (!0 === e || (isObject(e) && !0 === e.delete)) return !0;
    }
    function isReactComponent(e) {
      return "function" == typeof e;
    }
    function customAdd(e) {
      return !e || void 0 === e.add || !!e.add;
    }
    function customEdit(e) {
      return !e || void 0 === e.edit || !!e.edit;
    }
    function customDelete(e) {
      return !e || void 0 === e.delete || !!e.delete;
    }
    function customCopy(e) {
      return !e || void 0 === e.enableClipboard || !!e.enableClipboard;
    }
    function customMatchesURL(e) {
      return !e || void 0 === e.matchesURL || !!e.matchesURL;
    }
    function resolveEvalFailedNewValue(e, t) {
      return "string" === e ? t.trim().replace(/^\"([\s\S]+?)\"$/, "$1") : t;
    }
    function _extends$8() {
      return (_extends$8 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgAngleDown = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$8(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 16,
            height: 16,
            fill: "none",
            viewBox: "0 0 16 16",
          },
          e,
        ),
        _path$8 ||
          (_path$8 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z",
            },
          )),
      );
    };
    function _extends$7() {
      return (_extends$7 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgCopy = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$7(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$7 ||
          (_path$7 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z",
            },
          )),
      );
    };
    function _extends$6() {
      return (_extends$6 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgCopied = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$6(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$6 ||
          (_path$6 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z",
            },
          )),
        _path2$5 ||
          (_path2$5 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "#14C786",
              d: "M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z",
            },
          )),
      );
    };
    function CopyButton({ node: e }) {
      let { customizeCopy: t } = (0,
        __TURBOPACK__imported__module__576191__1.useContext)(JsonViewContext),
        [n, r] = (0, __TURBOPACK__imported__module__576191__1.useState)(!1);
      return n
        ? (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgCopied, {
            className: "json-view--copy",
            style: { display: "inline-block" },
          })
        : (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgCopy, {
            onClick: (n) => {
              n.stopPropagation();
              let i = t(e);
              ("string" == typeof i && i && navigator.clipboard.writeText(i),
                r(!0),
                setTimeout(() => r(!1), 3e3));
            },
            className: "json-view--copy",
          });
    }
    function NameValue({
      indexOrName: e,
      value: t,
      depth: n,
      parent: r,
      deleteHandle: i,
      editHandle: s,
    }) {
      return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
        "div",
        Object.assign(
          { className: "json-view--pair" },
          {
            children: [
              (0, __TURBOPACK__imported__module__324834__1.jsx)(
                "span",
                Object.assign(
                  {
                    className:
                      "number" == typeof e
                        ? "json-view--index"
                        : "json-view--property",
                  },
                  { children: e },
                ),
              ),
              ":",
              " ",
              (0, __TURBOPACK__imported__module__324834__1.jsx)(JsonNode, {
                node: t,
                depth: n + 1,
                deleteHandle: i,
                editHandle: s,
                parent: r,
                indexOrName: e,
              }),
            ],
          },
        ),
      );
    }
    function _extends$5() {
      return (_extends$5 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgTrash = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$5(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$5 ||
          (_path$5 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z",
            },
          )),
        _path2$4 ||
          (_path2$4 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "#DA0000",
              d: "M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z",
            },
          )),
      );
    };
    function _extends$4() {
      return (_extends$4 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgAddSquare = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$4(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$4 ||
          (_path$4 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z",
            },
          )),
        _path2$3 ||
          (_path2$3 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "#14C786",
              d: "M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z",
            },
          )),
      );
    };
    function _extends$3() {
      return (_extends$3 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgDone = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$3(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$3 ||
          (_path$3 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z",
            },
          )),
        _path2$2 ||
          (_path2$2 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "#14C786",
              d: "m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z",
            },
          )),
      );
    };
    function _extends$2() {
      return (_extends$2 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgCancel = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$2(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$2 ||
          (_path$2 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "#DA0000",
              d: "M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z",
            },
          )),
        _path2$1 ||
          (_path2$1 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z",
            },
          )),
      );
    };
    function LargeArrayNode({
      originNode: e,
      node: t,
      depth: n,
      index: r,
      deleteHandle: i,
      customOptions: s,
      startIndex: a,
    }) {
      let {
          enableClipboard: o,
          src: l,
          onEdit: c,
          onChange: u,
          forceUpdate: d,
          displaySize: h,
        } = (0, __TURBOPACK__imported__module__576191__1.useContext)(
          JsonViewContext,
        ),
        [p, m] = (0, __TURBOPACK__imported__module__576191__1.useState)(!0),
        f = (0, __TURBOPACK__imported__module__576191__1.useCallback)(
          (t, r, i) => {
            ((e[t] = r),
              c &&
                c({
                  newValue: r,
                  oldValue: i,
                  depth: n,
                  src: l,
                  indexOrName: t,
                  parentType: "array",
                }),
              u &&
                u({
                  type: "edit",
                  depth: n,
                  src: l,
                  indexOrName: t,
                  parentType: "array",
                }),
              d());
          },
          [t, c, u, d],
        ),
        g = (t) => {
          (e.splice(t, 1), d());
        },
        x = (0, __TURBOPACK__imported__module__324834__1.jsxs)(
          __TURBOPACK__imported__module__324834__1.Fragment,
          {
            children: [
              !p &&
                (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                  "span",
                  Object.assign(
                    { onClick: () => m(!0), className: "jv-size-chevron" },
                    {
                      children: [
                        ifDisplay(h, n, p) &&
                          (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                            "span",
                            Object.assign(
                              { className: "jv-size" },
                              { children: [objectSize(t), " Items"] },
                            ),
                          ),
                        (0, __TURBOPACK__imported__module__324834__1.jsx)(
                          SvgAngleDown,
                          { className: "jv-chevron" },
                        ),
                      ],
                    },
                  ),
                ),
              !p &&
                o &&
                customCopy(s) &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(CopyButton, {
                  node: t,
                }),
            ],
          },
        );
      return (0, __TURBOPACK__imported__module__324834__1.jsxs)("div", {
        children: [
          (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
            children: "[",
          }),
          x,
          p
            ? (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                "button",
                Object.assign(
                  { onClick: () => m(!1), className: "jv-button" },
                  { children: [a, " ... ", a + t.length - 1] },
                ),
              )
            : (0, __TURBOPACK__imported__module__324834__1.jsx)(
                "div",
                Object.assign(
                  { className: "jv-indent" },
                  {
                    children: t.map((e, i) =>
                      (0, __TURBOPACK__imported__module__324834__1.jsx)(
                        NameValue,
                        {
                          indexOrName: i + a,
                          value: e,
                          depth: n,
                          parent: t,
                          deleteHandle: g,
                          editHandle: f,
                        },
                        String(r) + String(i),
                      ),
                    ),
                  },
                ),
              ),
          (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
            children: "]",
          }),
        ],
      });
    }
    function LargeArray({
      node: e,
      depth: t,
      deleteHandle: n,
      indexOrName: r,
      customOptions: i,
    }) {
      let s = [];
      for (let t = 0; t < e.length; t += 100) s.push(e.slice(t, t + 100));
      let {
          collapsed: a,
          enableClipboard: o,
          collapseObjectsAfterLength: l,
          editable: c,
          onDelete: u,
          src: d,
          onAdd: h,
          onEdit: p,
          onChange: m,
          forceUpdate: f,
          displaySize: g,
        } = (0, __TURBOPACK__imported__module__576191__1.useContext)(
          JsonViewContext,
        ),
        [x, v] = (0, __TURBOPACK__imported__module__576191__1.useState)(
          isCollapsed_largeArray(e, t, r, a, l, i),
        );
      (0, __TURBOPACK__imported__module__576191__1.useEffect)(() => {
        v(isCollapsed_largeArray(e, t, r, a, l, i));
      }, [a, l]);
      let [y, b] = (0, __TURBOPACK__imported__module__576191__1.useState)(!1),
        j = () => {
          (b(!1),
            n && n(r),
            u &&
              u({
                value: e,
                depth: t,
                src: d,
                indexOrName: r,
                parentType: "array",
              }),
            m &&
              m({
                type: "delete",
                depth: t,
                src: d,
                indexOrName: r,
                parentType: "array",
              }));
        },
        [w, C] = (0, __TURBOPACK__imported__module__576191__1.useState)(!1),
        k = () => {
          let n = e;
          (n.push(null),
            h &&
              h({
                indexOrName: n.length - 1,
                depth: t,
                src: d,
                parentType: "array",
              }),
            m &&
              m({
                type: "add",
                indexOrName: n.length - 1,
                depth: t,
                src: d,
                parentType: "array",
              }),
            f());
        },
        S = y || w,
        N = () => {
          (b(!1), C(!1));
        },
        E = (0, __TURBOPACK__imported__module__324834__1.jsxs)(
          __TURBOPACK__imported__module__324834__1.Fragment,
          {
            children: [
              !x &&
                !S &&
                (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                  "span",
                  Object.assign(
                    { onClick: () => v(!0), className: "jv-size-chevron" },
                    {
                      children: [
                        ifDisplay(g, t, x) &&
                          (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                            "span",
                            Object.assign(
                              { className: "jv-size" },
                              { children: [e.length, " Items"] },
                            ),
                          ),
                        (0, __TURBOPACK__imported__module__324834__1.jsx)(
                          SvgAngleDown,
                          { className: "jv-chevron" },
                        ),
                      ],
                    },
                  ),
                ),
              S &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgDone, {
                  className: "json-view--edit",
                  style: { display: "inline-block" },
                  onClick: w ? k : j,
                }),
              S &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgCancel, {
                  className: "json-view--edit",
                  style: { display: "inline-block" },
                  onClick: N,
                }),
              !x &&
                !S &&
                o &&
                customCopy(i) &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(CopyButton, {
                  node: e,
                }),
              !x &&
                !S &&
                editableAdd(c) &&
                customAdd(i) &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(
                  SvgAddSquare,
                  {
                    className: "json-view--edit",
                    onClick: () => {
                      k();
                    },
                  },
                ),
              !x &&
                !S &&
                editableDelete(c) &&
                customDelete(i) &&
                n &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgTrash, {
                  className: "json-view--edit",
                  onClick: () => b(!0),
                }),
            ],
          },
        );
      return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
        __TURBOPACK__imported__module__324834__1.Fragment,
        {
          children: [
            (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
              children: "[",
            }),
            E,
            x
              ? (0, __TURBOPACK__imported__module__324834__1.jsx)(
                  "button",
                  Object.assign(
                    { onClick: () => v(!1), className: "jv-button" },
                    { children: "..." },
                  ),
                )
              : (0, __TURBOPACK__imported__module__324834__1.jsx)(
                  "div",
                  Object.assign(
                    { className: "jv-indent" },
                    {
                      children: s.map((n, i) =>
                        (0, __TURBOPACK__imported__module__324834__1.jsx)(
                          LargeArrayNode,
                          {
                            originNode: e,
                            node: n,
                            depth: t,
                            index: i,
                            startIndex: 100 * i,
                          },
                          String(r) + String(i),
                        ),
                      ),
                    },
                  ),
                ),
            (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
              children: "]",
            }),
            x &&
              ifDisplay(g, t, x) &&
              (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                "span",
                Object.assign(
                  { onClick: () => v(!1), className: "jv-size" },
                  { children: [e.length, " Items"] },
                ),
              ),
          ],
        },
      );
    }
    function ObjectNode({
      node: e,
      depth: t,
      indexOrName: n,
      deleteHandle: r,
      customOptions: i,
    }) {
      let {
        collapsed: s,
        enableClipboard: a,
        ignoreLargeArray: o,
        collapseObjectsAfterLength: l,
        editable: c,
        onDelete: u,
        src: d,
        onAdd: h,
        onEdit: p,
        onChange: m,
        forceUpdate: f,
        displaySize: g,
      } = (0, __TURBOPACK__imported__module__576191__1.useContext)(
        JsonViewContext,
      );
      if (!o && Array.isArray(e) && e.length > 100)
        return (0, __TURBOPACK__imported__module__324834__1.jsx)(LargeArray, {
          node: e,
          depth: t,
          indexOrName: n,
          deleteHandle: r,
          customOptions: i,
        });
      let x = isObject(e),
        [v, y] = (0, __TURBOPACK__imported__module__576191__1.useState)(
          isCollapsed(e, t, n, s, l, i),
        );
      (0, __TURBOPACK__imported__module__576191__1.useEffect)(() => {
        y(isCollapsed(e, t, n, s, l, i));
      }, [s, l]);
      let b = (0, __TURBOPACK__imported__module__576191__1.useCallback)(
          (n, r, i) => {
            (Array.isArray(e) ? (e[+n] = r) : e && (e[n] = r),
              p &&
                p({
                  newValue: r,
                  oldValue: i,
                  depth: t,
                  src: d,
                  indexOrName: n,
                  parentType: x ? "object" : "array",
                }),
              m &&
                m({
                  type: "edit",
                  depth: t,
                  src: d,
                  indexOrName: n,
                  parentType: x ? "object" : "array",
                }),
              f());
          },
          [e, p, m, f],
        ),
        j = (t) => {
          (Array.isArray(e) ? e.splice(+t, 1) : e && delete e[t], f());
        },
        [w, C] = (0, __TURBOPACK__imported__module__576191__1.useState)(!1),
        k = () => {
          (C(!1),
            r && r(n),
            u &&
              u({
                value: e,
                depth: t,
                src: d,
                indexOrName: n,
                parentType: x ? "object" : "array",
              }),
            m &&
              m({
                type: "delete",
                depth: t,
                src: d,
                indexOrName: n,
                parentType: x ? "object" : "array",
              }));
        },
        [S, N] = (0, __TURBOPACK__imported__module__576191__1.useState)(!1),
        E = (0, __TURBOPACK__imported__module__576191__1.useRef)(null),
        A = () => {
          var n;
          if (x) {
            let r = null == (n = E.current) ? void 0 : n.value;
            r &&
              ((e[r] = null),
              E.current && (E.current.value = ""),
              N(!1),
              h &&
                h({ indexOrName: r, depth: t, src: d, parentType: "object" }),
              m &&
                m({
                  type: "add",
                  indexOrName: r,
                  depth: t,
                  src: d,
                  parentType: "object",
                }));
          } else if (Array.isArray(e)) {
            let n = e;
            (n.push(null),
              h &&
                h({
                  indexOrName: n.length - 1,
                  depth: t,
                  src: d,
                  parentType: "array",
                }),
              m &&
                m({
                  type: "add",
                  indexOrName: n.length - 1,
                  depth: t,
                  src: d,
                  parentType: "array",
                }));
          }
          f();
        },
        D = (e) => {
          "Enter" === e.key
            ? (e.preventDefault(), A())
            : "Escape" === e.key && M();
        },
        I = w || S,
        M = () => {
          (C(!1), N(!1));
        },
        T = (0, __TURBOPACK__imported__module__324834__1.jsxs)(
          __TURBOPACK__imported__module__324834__1.Fragment,
          {
            children: [
              !v &&
                !I &&
                (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                  "span",
                  Object.assign(
                    { onClick: () => y(!0), className: "jv-size-chevron" },
                    {
                      children: [
                        ifDisplay(g, t, v) &&
                          (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                            "span",
                            Object.assign(
                              { className: "jv-size" },
                              { children: [objectSize(e), " Items"] },
                            ),
                          ),
                        (0, __TURBOPACK__imported__module__324834__1.jsx)(
                          SvgAngleDown,
                          { className: "jv-chevron" },
                        ),
                      ],
                    },
                  ),
                ),
              S &&
                x &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)("input", {
                  className: "json-view--input",
                  placeholder: "property",
                  ref: E,
                  onKeyDown: D,
                }),
              I &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgDone, {
                  className: "json-view--edit",
                  style: { display: "inline-block" },
                  onClick: S ? A : k,
                }),
              I &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgCancel, {
                  className: "json-view--edit",
                  style: { display: "inline-block" },
                  onClick: M,
                }),
              !v &&
                !I &&
                a &&
                customCopy(i) &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(CopyButton, {
                  node: e,
                }),
              !v &&
                !I &&
                editableAdd(c) &&
                customAdd(i) &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(
                  SvgAddSquare,
                  {
                    className: "json-view--edit",
                    onClick: () => {
                      x
                        ? (N(!0),
                          setTimeout(() => {
                            var e;
                            return null == (e = E.current) ? void 0 : e.focus();
                          }))
                        : A();
                    },
                  },
                ),
              !v &&
                !I &&
                editableDelete(c) &&
                customDelete(i) &&
                r &&
                (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgTrash, {
                  className: "json-view--edit",
                  onClick: () => C(!0),
                }),
            ],
          },
        );
      return Array.isArray(e)
        ? (0, __TURBOPACK__imported__module__324834__1.jsxs)(
            __TURBOPACK__imported__module__324834__1.Fragment,
            {
              children: [
                (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
                  children: "[",
                }),
                T,
                v
                  ? (0, __TURBOPACK__imported__module__324834__1.jsx)(
                      "button",
                      Object.assign(
                        { onClick: () => y(!1), className: "jv-button" },
                        { children: "..." },
                      ),
                    )
                  : (0, __TURBOPACK__imported__module__324834__1.jsx)(
                      "div",
                      Object.assign(
                        { className: "jv-indent" },
                        {
                          children: e.map((r, i) =>
                            (0, __TURBOPACK__imported__module__324834__1.jsx)(
                              NameValue,
                              {
                                indexOrName: i,
                                value: r,
                                depth: t,
                                parent: e,
                                deleteHandle: j,
                                editHandle: b,
                              },
                              String(n) + String(i),
                            ),
                          ),
                        },
                      ),
                    ),
                (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
                  children: "]",
                }),
                v &&
                  ifDisplay(g, t, v) &&
                  (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                    "span",
                    Object.assign(
                      { onClick: () => y(!1), className: "jv-size" },
                      { children: [objectSize(e), " Items"] },
                    ),
                  ),
              ],
            },
          )
        : x
          ? (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              __TURBOPACK__imported__module__324834__1.Fragment,
              {
                children: [
                  (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
                    children: "{",
                  }),
                  T,
                  v
                    ? (0, __TURBOPACK__imported__module__324834__1.jsx)(
                        "button",
                        Object.assign(
                          { onClick: () => y(!1), className: "jv-button" },
                          { children: "..." },
                        ),
                      )
                    : (0, __TURBOPACK__imported__module__324834__1.jsx)(
                        "div",
                        Object.assign(
                          { className: "jv-indent" },
                          {
                            children: Object.entries(e).map(([r, i]) =>
                              (0, __TURBOPACK__imported__module__324834__1.jsx)(
                                NameValue,
                                {
                                  indexOrName: r,
                                  value: i,
                                  depth: t,
                                  parent: e,
                                  deleteHandle: j,
                                  editHandle: b,
                                },
                                String(n) + String(r),
                              ),
                            ),
                          },
                        ),
                      ),
                  (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
                    children: "}",
                  }),
                  v &&
                    ifDisplay(g, t, v) &&
                    (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                      "span",
                      Object.assign(
                        { onClick: () => y(!1), className: "jv-size" },
                        { children: [objectSize(e), " Items"] },
                      ),
                    ),
                ],
              },
            )
          : null;
    }
    let LongString =
      __TURBOPACK__imported__module__576191__1.default.forwardRef(
        ({ str: e, className: t, ctrlClick: n }, r) => {
          let {
              collapseStringMode: i,
              collapseStringsAfterLength: s,
              customizeCollapseStringUI: a,
            } = (0, __TURBOPACK__imported__module__576191__1.useContext)(
              JsonViewContext,
            ),
            [o, l] = (0, __TURBOPACK__imported__module__576191__1.useState)(!0),
            c = (0, __TURBOPACK__imported__module__576191__1.useRef)(null);
          s = s > 0 ? s : 0;
          let u = e.replace(/\s+/g, " "),
            d =
              "function" == typeof a
                ? a(u, o)
                : "string" == typeof a
                  ? a
                  : "...",
            h = (e) => {
              var t;
              if ((e.ctrlKey || e.metaKey) && n) n(e);
              else {
                let e = window.getSelection();
                if (
                  e &&
                  e.anchorOffset !== e.focusOffset &&
                  (null == (t = e.anchorNode) ? void 0 : t.parentElement) ===
                    c.current
                )
                  return;
                l(!o);
              }
            };
          if (e.length <= s)
            return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              "span",
              Object.assign(
                { ref: c, className: t, onClick: n },
                { children: ['"', e, '"'] },
              ),
            );
          if ("address" === i)
            return e.length <= 10
              ? (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                  "span",
                  Object.assign(
                    { ref: c, className: t, onClick: n },
                    { children: ['"', e, '"'] },
                  ),
                )
              : (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                  "span",
                  Object.assign(
                    { ref: c, onClick: h, className: t + " cursor-pointer" },
                    {
                      children: [
                        '"',
                        o ? [u.slice(0, 6), d, u.slice(-4)] : e,
                        '"',
                      ],
                    },
                  ),
                );
          if ("directly" === i)
            return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              "span",
              Object.assign(
                { ref: c, onClick: h, className: t + " cursor-pointer" },
                { children: ['"', o ? [u.slice(0, s), d] : e, '"'] },
              ),
            );
          if ("word" === i) {
            let n = s,
              r = s + 1,
              i = u,
              a = 1;
            for (;;) {
              if (/\W/.test(e[n])) {
                i = e.slice(0, n);
                break;
              }
              if (/\W/.test(e[r])) {
                i = e.slice(0, r);
                break;
              }
              if (6 === a) {
                i = e.slice(0, s);
                break;
              }
              (a++, n--, r++);
            }
            return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              "span",
              Object.assign(
                { ref: c, onClick: h, className: t + " cursor-pointer" },
                { children: ['"', o ? [i, d] : e, '"'] },
              ),
            );
          }
          return (0, __TURBOPACK__imported__module__324834__1.jsxs)(
            "span",
            Object.assign(
              { ref: c, className: t },
              { children: ['"', e, '"'] },
            ),
          );
        },
      );
    function _extends$1() {
      return (_extends$1 = Object.assign.bind()).apply(this, arguments);
    }
    var SvgEdit = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends$1(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path$1 ||
          (_path$1 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z",
            },
          )),
      );
    };
    function _extends() {
      return (_extends = Object.assign.bind()).apply(this, arguments);
    }
    var SvgLink = function (e) {
      return __TURBOPACK__imported__module__576191__1.createElement(
        "svg",
        _extends(
          {
            xmlns: "http://www.w3.org/2000/svg",
            width: 24,
            height: 24,
            fill: "none",
            viewBox: "0 0 24 24",
          },
          e,
        ),
        _path ||
          (_path = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M6.75 3h5.5v1.5h-5.5C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25v-5.5H21v5.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3Z",
            },
          )),
        _path2 ||
          (_path2 = __TURBOPACK__imported__module__576191__1.createElement(
            "path",
            {
              fill: "currentColor",
              d: "M20.013 3h-3.946a.987.987 0 0 0 0 1.973h1.564l-6.342 6.342a1.004 1.004 0 0 0 0 1.396 1.004 1.004 0 0 0 1.396 0l6.342-6.342v1.564a.987.987 0 0 0 1.973 0V3.987A.987.987 0 0 0 20.013 3Z",
            },
          )),
      );
    };
    function JsonNode({
      node,
      depth,
      deleteHandle: _deleteHandle,
      indexOrName,
      parent,
      editHandle,
    }) {
      let customReturn,
        {
          collapseStringsAfterLength,
          enableClipboard,
          editable,
          src,
          onDelete,
          onChange,
          customizeNode,
          matchesURL,
          urlRegExp,
        } = (0, __TURBOPACK__imported__module__576191__1.useContext)(
          JsonViewContext,
        );
      if (
        ("function" == typeof customizeNode &&
          (customReturn = safeCall(customizeNode, [
            { node, depth, indexOrName },
          ])),
        customReturn)
      ) {
        if (
          (0, __TURBOPACK__imported__module__576191__1.isValidElement)(
            customReturn,
          )
        )
          return customReturn;
        else if (isReactComponent(customReturn)) {
          let CustomComponent = customReturn;
          return (0, __TURBOPACK__imported__module__324834__1.jsx)(
            CustomComponent,
            { node: node, depth: depth, indexOrName: indexOrName },
          );
        }
      }
      if (Array.isArray(node) || isObject(node))
        return (0, __TURBOPACK__imported__module__324834__1.jsx)(ObjectNode, {
          node: node,
          depth: depth,
          indexOrName: indexOrName,
          deleteHandle: _deleteHandle,
          customOptions:
            "object" == typeof customReturn ? customReturn : void 0,
        });
      {
        let type = typeof node,
          [editing, setEditing] = (0,
          __TURBOPACK__imported__module__576191__1.useState)(!1),
          [deleting, setDeleting] = (0,
          __TURBOPACK__imported__module__576191__1.useState)(!1),
          valueRef = (0, __TURBOPACK__imported__module__576191__1.useRef)(null),
          edit = () => {
            (setEditing(!0),
              setTimeout(() => {
                var e, t;
                (null == (e = window.getSelection()) ||
                  e.selectAllChildren(valueRef.current),
                  null == (t = valueRef.current) || t.focus());
              }));
          },
          done = (0,
          __TURBOPACK__imported__module__576191__1.useCallback)(() => {
            let newValue = valueRef.current.innerText;
            try {
              ("{}" === newValue || "[]" === newValue) &&
                (newValue = `(${newValue})`);
              let evalValue = eval(newValue);
              editHandle && editHandle(indexOrName, evalValue, node);
            } catch (e) {
              let trimmedStringValue = resolveEvalFailedNewValue(
                type,
                newValue,
              );
              editHandle && editHandle(indexOrName, trimmedStringValue, node);
            }
            setEditing(!1);
          }, [editHandle]),
          cancel = () => {
            (setEditing(!1), setDeleting(!1));
          },
          deleteHandle = () => {
            (setDeleting(!1),
              _deleteHandle && _deleteHandle(indexOrName),
              onDelete &&
                onDelete({
                  value: node,
                  depth,
                  src,
                  indexOrName: indexOrName,
                  parentType: Array.isArray(parent) ? "array" : "object",
                }),
              onChange &&
                onChange({
                  depth,
                  src,
                  indexOrName: indexOrName,
                  parentType: Array.isArray(parent) ? "array" : "object",
                  type: "delete",
                }));
          },
          handleKeyDown = (0,
          __TURBOPACK__imported__module__576191__1.useCallback)(
            (e) => {
              "Enter" === e.key
                ? (e.preventDefault(), done())
                : "Escape" === e.key && cancel();
            },
            [done],
          ),
          isEditing = editing || deleting,
          ctrlClick =
            !isEditing &&
            editableEdit(editable) &&
            customEdit(customReturn) &&
            editHandle
              ? (e) => {
                  (e.ctrlKey || e.metaKey) && edit();
                }
              : void 0,
          Icons = (0, __TURBOPACK__imported__module__324834__1.jsxs)(
            __TURBOPACK__imported__module__324834__1.Fragment,
            {
              children: [
                isEditing &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgDone, {
                    className: "json-view--edit",
                    style: { display: "inline-block" },
                    onClick: deleting ? deleteHandle : done,
                  }),
                isEditing &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgCancel, {
                    className: "json-view--edit",
                    style: { display: "inline-block" },
                    onClick: cancel,
                  }),
                !isEditing &&
                  enableClipboard &&
                  customCopy(customReturn) &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(
                    CopyButton,
                    { node: node },
                  ),
                !isEditing &&
                  matchesURL &&
                  "string" === type &&
                  urlRegExp.test(node) &&
                  customMatchesURL(customReturn) &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(
                    "a",
                    Object.assign(
                      {
                        href: node,
                        target: "_blank",
                        className: "json-view--link",
                      },
                      {
                        children: (0,
                        __TURBOPACK__imported__module__324834__1.jsx)(
                          SvgLink,
                          {},
                        ),
                      },
                    ),
                  ),
                !isEditing &&
                  editableEdit(editable) &&
                  customEdit(customReturn) &&
                  editHandle &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgEdit, {
                    className: "json-view--edit",
                    onClick: edit,
                  }),
                !isEditing &&
                  editableDelete(editable) &&
                  customDelete(customReturn) &&
                  _deleteHandle &&
                  (0, __TURBOPACK__imported__module__324834__1.jsx)(SvgTrash, {
                    className: "json-view--edit",
                    onClick: () => setDeleting(!0),
                  }),
              ],
            },
          ),
          className = "json-view--string";
        switch (
          ("string" ==
            typeof (null == customReturn ? void 0 : customReturn.className) &&
            (className += " " + customReturn.className),
          type)
        ) {
          case "number":
          case "bigint":
            className = "json-view--number";
            break;
          case "boolean":
            className = "json-view--boolean";
            break;
          case "object":
            className = "json-view--null";
        }
        deleting && (className += " json-view--deleting");
        let displayValue = String(node);
        "bigint" === type && (displayValue += "n");
        let EditingElement = (0,
        __TURBOPACK__imported__module__576191__1.useMemo)(
          () =>
            (0, __TURBOPACK__imported__module__324834__1.jsx)("span", {
              contentEditable: !0,
              className: className,
              dangerouslySetInnerHTML: {
                __html: "string" === type ? `"${displayValue}"` : displayValue,
              },
              ref: valueRef,
              onKeyDown: handleKeyDown,
            }),
          [displayValue, type, handleKeyDown],
        );
        return "string" === type
          ? (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              __TURBOPACK__imported__module__324834__1.Fragment,
              {
                children: [
                  editing
                    ? EditingElement
                    : node.length > collapseStringsAfterLength
                      ? (0, __TURBOPACK__imported__module__324834__1.jsx)(
                          LongString,
                          {
                            str: node,
                            ref: valueRef,
                            className: className,
                            ctrlClick: ctrlClick,
                          },
                        )
                      : (0, __TURBOPACK__imported__module__324834__1.jsxs)(
                          "span",
                          Object.assign(
                            { className: className, onClick: ctrlClick },
                            { children: ['"', displayValue, '"'] },
                          ),
                        ),
                  Icons,
                ],
              },
            )
          : (0, __TURBOPACK__imported__module__324834__1.jsxs)(
              __TURBOPACK__imported__module__324834__1.Fragment,
              {
                children: [
                  editing
                    ? EditingElement
                    : (0, __TURBOPACK__imported__module__324834__1.jsx)(
                        "span",
                        Object.assign(
                          { className: className, onClick: ctrlClick },
                          { children: displayValue },
                        ),
                      ),
                  Icons,
                ],
              },
            );
      }
    }
    let defaultURLRegExp =
        /^(((ht|f)tps?):\/\/)?([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/,
      JsonViewContext = (0,
      __TURBOPACK__imported__module__576191__1.createContext)({
        src: void 0,
        collapseStringsAfterLength: 99,
        collapseStringMode: "directly",
        customizeCollapseStringUI: void 0,
        collapseObjectsAfterLength: 20,
        collapsed: !1,
        enableClipboard: !0,
        editable: !1,
        onEdit: void 0,
        onDelete: void 0,
        onAdd: void 0,
        onChange: void 0,
        forceUpdate: () => {},
        customizeNode: void 0,
        customizeCopy: () => {},
        displaySize: void 0,
        matchesURL: !1,
        urlRegExp: defaultURLRegExp,
        ignoreLargeArray: !1,
      });
    function JsonView({
      src: e,
      collapseStringsAfterLength: t = 99,
      collapseStringMode: n = "directly",
      customizeCollapseStringUI: r,
      collapseObjectsAfterLength: i = 99,
      collapsed: s,
      enableClipboard: a = !0,
      editable: o = !1,
      onEdit: l,
      onDelete: c,
      onAdd: u,
      onChange: d,
      dark: h = !1,
      theme: p = "default",
      customizeNode: m,
      customizeCopy: f = stringifyForCopying,
      displaySize: g,
      style: x,
      className: v,
      matchesURL: y = !1,
      urlRegExp: b = defaultURLRegExp,
      ignoreLargeArray: j = !1,
    }) {
      let [w, C] = (0, __TURBOPACK__imported__module__576191__1.useState)(0),
        k = (0, __TURBOPACK__imported__module__576191__1.useCallback)(
          () => C((e) => ++e),
          [],
        ),
        [S, N] = (0, __TURBOPACK__imported__module__576191__1.useState)(e);
      return (
        (0, __TURBOPACK__imported__module__576191__1.useEffect)(
          () => N(e),
          [e],
        ),
        (0, __TURBOPACK__imported__module__324834__1.jsx)(
          JsonViewContext.Provider,
          Object.assign(
            {
              value: {
                src: S,
                collapseStringsAfterLength: t,
                collapseStringMode: n,
                customizeCollapseStringUI: r,
                collapseObjectsAfterLength: i,
                collapsed: s,
                enableClipboard: a,
                editable: o,
                onEdit: l,
                onDelete: c,
                onAdd: u,
                onChange: d,
                forceUpdate: k,
                customizeNode: m,
                customizeCopy: f,
                displaySize: g,
                matchesURL: y,
                urlRegExp: b,
                ignoreLargeArray: j,
              },
            },
            {
              children: (0, __TURBOPACK__imported__module__324834__1.jsx)(
                "code",
                Object.assign(
                  {
                    className:
                      "json-view" +
                      (h ? " dark" : "") +
                      (p && "default" !== p ? " json-view_" + p : "") +
                      (v ? " " + v : ""),
                    style: x,
                  },
                  {
                    children: (0, __TURBOPACK__imported__module__324834__1.jsx)(
                      JsonNode,
                      {
                        node: S,
                        depth: 1,
                        editHandle: (e, t, n) => {
                          (N(t),
                            l &&
                              l({
                                newValue: t,
                                oldValue: n,
                                depth: 1,
                                src: S,
                                indexOrName: e,
                                parentType: null,
                              }),
                            d &&
                              d({
                                type: "edit",
                                depth: 1,
                                src: S,
                                indexOrName: e,
                                parentType: null,
                              }));
                        },
                        deleteHandle: () => {
                          (N(void 0),
                            c &&
                              c({
                                value: S,
                                depth: 1,
                                src: S,
                                indexOrName: "",
                                parentType: null,
                              }),
                            d &&
                              d({
                                depth: 1,
                                src: S,
                                indexOrName: "",
                                parentType: null,
                                type: "delete",
                              }));
                        },
                      },
                    ),
                  },
                ),
              ),
            },
          ),
        )
      );
    }
    var __TURBOPACK__imported__module__181761__ =
        __turbopack_context__.i(181761),
      __TURBOPACK__imported__module__304649__ = __turbopack_context__.i(304649),
      __TURBOPACK__imported__module__602544__ = __turbopack_context__.i(602544),
      __TURBOPACK__imported__module__442221__ = __turbopack_context__.i(442221),
      __TURBOPACK__imported__module__605177__ = __turbopack_context__.i(605177),
      __TURBOPACK__imported__module__538096__ = __turbopack_context__.i(538096),
      __TURBOPACK__imported__module__681816__ = __turbopack_context__.i(681816),
      __TURBOPACK__imported__module__633577__ = __turbopack_context__.i(633577),
      __TURBOPACK__imported__module__242759__ = __turbopack_context__.i(242759);
    function getEventStyle(e) {
      switch (e) {
        case "error":
          return "text-v0-red-900! bg-v0-red-200 hover:bg-v0-red-300";
        case "warn":
          return "text-v0-amber-900 bg-v0-amber-300 hover:bg-v0-amber-400";
        default:
          return "text-gray-700 hover:bg-gray-100";
      }
    }
    function CodeOutputAttachmentView({ value: e }) {
      return Array.isArray(e)
        ? (0, __TURBOPACK__imported__module__324834__.jsx)("div", {
            className:
              "flex flex-col gap-2 font-mono text-[13px] leading-4 text-v0-gray-1000",
            children: [...e].map(([e, t], n) =>
              e.startsWith("image/")
                ? (0, __TURBOPACK__imported__module__324834__.jsx)(
                    "img",
                    { alt: `Attachment ${n}`, src: `data:${e};base64,${t}` },
                    n,
                  )
                : e.startsWith("text/") || e.startsWith("application/")
                  ? (0, __TURBOPACK__imported__module__324834__.jsx)(
                      "div",
                      { className: "whitespace-pre-wrap", children: t },
                      n,
                    )
                  : null,
            ),
          })
        : null;
    }
    let JsonRowView = (0, __TURBOPACK__imported__module__576191__.memo)(
      ({ src: e, className: t, style: n }) =>
        "string" == typeof e
          ? (0, __TURBOPACK__imported__module__324834__.jsx)("span", {
              className: (0, __TURBOPACK__imported__module__304649__.cn)(
                "whitespace-break-spaces break-all leading-[1.12] text-v0-gray-1000",
                t,
              ),
              children: (0, __TURBOPACK__imported__module__324834__.jsx)(
                __TURBOPACK__imported__module__181761__.default,
                { children: e },
              ),
            })
          : (0, __TURBOPACK__imported__module__324834__.jsx)(JsonView, {
              className: (0, __TURBOPACK__imported__module__304649__.cn)(
                "leading-4 text-v0-gray-1000 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",
                t,
              ),
              collapsed: 1,
              editable: !1,
              enableClipboard: !1,
              src: e,
              theme: "default",
              style: n,
            }),
    );
    JsonRowView.displayName = "JsonRowView";
    let CodeOutput = (0, __TURBOPACK__imported__module__576191__.memo)(
      ({ value: e, className: t, inline: n }) =>
        (0, __TURBOPACK__imported__module__324834__.jsx)("output", {
          "aria-label": "Code execution output",
          className: (0, __TURBOPACK__imported__module__304649__.cn)(
            "codeblock not-prose relative flex w-full flex-col overflow-y-auto font-mono text-[13px]",
            t,
          ),
          children: e
            ? "error" in e
              ? (0, __TURBOPACK__imported__module__324834__.jsx)("div", {
                  className: "flex h-full items-center justify-center",
                  children: (0, __TURBOPACK__imported__module__324834__.jsx)(
                    __TURBOPACK__imported__module__681816__.ErrorComponent,
                    {
                      error: Error(e.error, { cause: "code-execution-error" }),
                    },
                  ),
                })
              : (0, __TURBOPACK__imported__module__324834__.jsxs)(
                  __TURBOPACK__imported__module__324834__.Fragment,
                  {
                    children: [
                      e.stdout.length
                        ? e.stdout.map((e, t) =>
                            (0, __TURBOPACK__imported__module__324834__.jsx)(
                              CodeOutputMessage,
                              {
                                inline: n,
                                children: e.map((e, n) =>
                                  (0,
                                  __TURBOPACK__imported__module__324834__.jsx)(
                                    JsonRowView,
                                    { src: e, className: "leading-normal" },
                                    `${t}-${n}-stdout`,
                                  ),
                                ),
                              },
                              `${t}-stdout`,
                            ),
                          )
                        : null,
                      e.stderr.length
                        ? e.stderr.map((e, t) =>
                            (0, __TURBOPACK__imported__module__324834__.jsx)(
                              CodeOutputMessage,
                              {
                                className: n ? getEventStyle("error") : void 0,
                                inline: n,
                                children: e.map((e, r) =>
                                  (0,
                                  __TURBOPACK__imported__module__324834__.jsx)(
                                    JsonRowView,
                                    {
                                      className: (0,
                                      __TURBOPACK__imported__module__304649__.cn)(
                                        "leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",
                                        n && "text-v0-red-800",
                                      ),
                                      src: e,
                                      style: { color: "rgb(192,27,93)" },
                                    },
                                    `${t}-${r}-stderr`,
                                  ),
                                ),
                              },
                              `${t}-stderr`,
                            ),
                          )
                        : null,
                      e.returned
                        ? (0, __TURBOPACK__imported__module__324834__.jsx)(
                            CodeOutputMessage,
                            {
                              inline: n,
                              children:
                                "$$attachments" in e.returned
                                  ? e.returned.$$attachments.length > 0
                                    ? (0,
                                      __TURBOPACK__imported__module__324834__.jsx)(
                                        CodeOutputAttachmentView,
                                        { value: e.returned.$$attachments },
                                      )
                                    : null
                                  : (0,
                                    __TURBOPACK__imported__module__324834__.jsx)(
                                      JsonRowView,
                                      {
                                        className:
                                          "leading-normal [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",
                                        src: e.returned,
                                      },
                                    ),
                            },
                          )
                        : null,
                    ],
                  },
                )
            : null,
        }),
    );
    function CodeOutputMessage({
      children: e,
      fileName: t,
      isCopied: n,
      handleCopy: r,
      handleDownload: i,
      handleFileOpen: s,
      inline: a,
      className: o,
    }) {
      let { scp: l } = (0, __TURBOPACK__imported__module__242759__.useFlags)();
      return null === e
        ? null
        : (0, __TURBOPACK__imported__module__324834__.jsxs)("div", {
            className: (0, __TURBOPACK__imported__module__304649__.cn)(
              "border-v0-alpha-400 group/code-output-message flex w-full flex-col gap-2 border-b p-2 text-[13px] last:border-b-0",
              !a && "pl-2.5",
              o,
            ),
            children: [
              (0, __TURBOPACK__imported__module__324834__.jsxs)("div", {
                className: "relative flex w-full items-baseline gap-3",
                children: [
                  !a &&
                    (0, __TURBOPACK__imported__module__324834__.jsx)("div", {
                      "aria-hidden": !0,
                      className:
                        "select-none text-v0-pink-700 dark:text-v0-pink-500",
                      children: (0,
                      __TURBOPACK__imported__module__324834__.jsx)(
                        __TURBOPACK__imported__module__442221__.ChevronRight,
                        { size: 8 },
                      ),
                    }),
                  t
                    ? (0, __TURBOPACK__imported__module__324834__.jsx)(
                        "button",
                        {
                          className:
                            "codeblock not-prose line-clamp-1 font-mono text-v0-blue-700 underline",
                          onClick: s,
                          children: t,
                        },
                      )
                    : e,
                  l &&
                    !a &&
                    (0, __TURBOPACK__imported__module__324834__.jsx)("div", {
                      className:
                        "pointer-events-none absolute inset-y-0 right-0 z-10",
                      children: (0,
                      __TURBOPACK__imported__module__324834__.jsxs)(
                        __TURBOPACK__imported__module__633577__.ActionGroup,
                        {
                          className:
                            "pointer-events-auto sticky top-3 flex -translate-y-1.5 opacity-0 group-hover:opacity-100 has-data-[state='delayed-open']:opacity-100 has-data-[state='instant-open']:opacity-100 has-data-[state=open]:opacity-100 md:top-5 in-data-[touch-active=true]:opacity-100",
                          children: [
                            (0, __TURBOPACK__imported__module__324834__.jsx)(
                              __TURBOPACK__imported__module__633577__.Action,
                              {
                                "aria-label": "Copy",
                                onClick: r,
                                tooltip: "Copy",
                                children: (0,
                                __TURBOPACK__imported__module__324834__.jsx)(
                                  "span",
                                  {
                                    "aria-hidden": !0,
                                    children: n
                                      ? (0,
                                        __TURBOPACK__imported__module__324834__.jsx)(
                                          __TURBOPACK__imported__module__602544__.Check,
                                          {},
                                        )
                                      : (0,
                                        __TURBOPACK__imported__module__324834__.jsx)(
                                          __TURBOPACK__imported__module__605177__.Copy,
                                          { className: "pointer-events-none" },
                                        ),
                                  },
                                ),
                              },
                            ),
                            (0, __TURBOPACK__imported__module__324834__.jsx)(
                              __TURBOPACK__imported__module__633577__.ActionSeparator,
                              { className: "author-action" },
                            ),
                            (0, __TURBOPACK__imported__module__324834__.jsx)(
                              __TURBOPACK__imported__module__633577__.Action,
                              {
                                "aria-label": "Download",
                                onClick: i,
                                tooltip: "Download",
                                children: (0,
                                __TURBOPACK__imported__module__324834__.jsx)(
                                  "span",
                                  {
                                    "aria-hidden": !0,
                                    children: (0,
                                    __TURBOPACK__imported__module__324834__.jsx)(
                                      __TURBOPACK__imported__module__538096__.Download,
                                      { className: "pointer-events-none" },
                                    ),
                                  },
                                ),
                              },
                            ),
                          ],
                        },
                      ),
                    }),
                ],
              }),
              t &&
                (0, __TURBOPACK__imported__module__324834__.jsx)("div", {
                  className: "pl-5",
                  children: e,
                }),
            ],
          });
    }
    ((CodeOutput.displayName = "CodeOutput"),
      __turbopack_context__.s(
        [
          "CodeOutput",
          () => CodeOutput,
          "CodeOutputMessage",
          () => CodeOutputMessage,
          "JsonRowView",
          () => JsonRowView,
          "getEventStyle",
          () => getEventStyle,
        ],
        110909,
      ));
  },
  483962,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(162061),
      i = e.i(657736),
      s = e.i(304649),
      a = e.i(610726);
    function o({
      show: e,
      axis: n,
      side: r,
      resizing: i,
      dotsHandle: a,
      onMouseDown: o,
      onFocus: l,
      onBlur: c,
      ref: u,
    }) {
      let d = {
        "aria-orientation": "x" === n ? "vertical" : "horizontal",
        onBlur: c,
        onFocus: l,
        onMouseDown: o,
        ref: u,
        role: "separator",
        tabIndex: 0,
      };
      return a
        ? (0, t.jsx)("div", {
            className: (0, s.cn)(
              "group absolute flex items-center justify-center focus:outline-hidden",
              "x" === n
                ? (0, s.cn)(
                    "inset-y-0 w-5 cursor-col-resize flex-col",
                    "start" === r ? "left-[-19px]" : "right-[-19px]",
                  )
                : (0, s.cn)(
                    "inset-x-0 h-5 cursor-row-resize flex-row",
                    "start" === r ? "top-[-19px]" : "bottom-[-19px]",
                  ),
            ),
            ...d,
            children: (0, t.jsxs)("div", {
              className: "flex gap-0.5",
              children: [
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-0.5",
                  children: [
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-0.5",
                  children: [
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                    (0, t.jsx)("div", {
                      className:
                        "size-[2.5px] rounded-full bg-v0-gray-500 transition-colors duration-300 group-hover:bg-v0-black group-focus:bg-v0-black",
                    }),
                  ],
                }),
              ],
            }),
          })
        : e
          ? (0, t.jsx)("div", {
              className: (0, s.cn)(
                "group absolute z-10 focus:outline-hidden",
                "x" === n &&
                  (0, s.cn)(
                    "inset-y-0 w-3 cursor-col-resize",
                    "start" === r ? "-left-1.5" : "-right-1.5",
                  ),
                "y" === n &&
                  (0, s.cn)(
                    "inset-x-0 h-3 cursor-row-resize",
                    "start" === r ? "-top-1.5" : "-bottom-1.5",
                  ),
              ),
              ...d,
              children: (0, t.jsx)("div", {
                className: (0, s.cn)(
                  "absolute inset-0 transition-all duration-200 group-hover:bg-v0-gray-300 group-focus:bg-v0-gray-500",
                  "x" === n &&
                    (0, s.cn)(
                      "mx-auto group-hover:w-[3px] group-focus:w-[3px]",
                      i ? "w-1" : "w-0",
                    ),
                  "y" === n &&
                    (0, s.cn)(
                      "my-auto group-hover:h-[3px] group-focus:h-[3px]",
                      i ? "h-1" : "h-0",
                    ),
                ),
              }),
            })
          : null;
    }
    let l = (0, n.memo)(
      ({
        show: e,
        innerClassName: l,
        dotsHandle: c = !1,
        onTrack: u,
        className: d,
        initialSize: h,
        animated: p = !0,
        minSizePx: m,
        minNegativeSpace: f,
        axis: g,
        side: x,
        children: v,
        cookieName: y,
        snapTo: b,
        forceInitialSize: j,
        onResize: w,
        ref: C,
      }) => {
        let k = (0, n.useRef)(null),
          S = (0, n.useRef)(null),
          N = (0, n.useRef)(null),
          [E, A] = (0, n.useState)(!1),
          [D, I] = (0, n.useState)(!1),
          [M, T] = (0, n.useState)(0),
          [L, P] = (0, n.useState)(0),
          [R, F] = (0, n.useState)(!1),
          _ = (0, n.useState)(() => {
            if ("undefined" == typeof document) return null;
            let e = r.default.get(y);
            if (null === e) return null;
            let t = Number(e);
            return isNaN(t) ? null : t;
          })[0],
          O = (0, n.useRef)(j ? h : (_ ?? h));
        (0, n.useEffect)(() => {
          C &&
            (C.current = {
              setSize: (e) => {
                ((O.current = e),
                  k.current &&
                    ("x" === g
                      ? (k.current.style.width = `${e}%`)
                      : (k.current.style.height = `${e}%`)),
                  w?.(e));
              },
              getSize: () => O.current,
              getContainer: () => k.current,
            });
        }, [C, g, w]);
        let B = (0, n.useCallback)(
            (e) => {
              (e.stopPropagation(),
                e.preventDefault(),
                S.current?.focus(),
                I(!0),
                A(!0),
                T("x" === g ? e.clientX : e.clientY),
                (N.current = O.current),
                P(
                  ("x" === g
                    ? k.current?.clientWidth
                    : k.current?.clientHeight) ?? 0,
                ),
                F(!0));
            },
            [g],
          ),
          V = (0, n.useCallback)(
            (e) => {
              if (!E || !D) return;
              let t = k.current?.parentElement,
                n = ("x" === g ? t?.clientWidth : t?.clientHeight) ?? 0,
                r =
                  L +
                  (M - ("x" === g ? e.clientX : e.clientY)) *
                    ("start" === x ? 1 : -1);
              b && "y" === g && r < b.threshold && (r = b.size);
              let i = (r / n) * 100;
              if (void 0 !== f) {
                let e = ((n - f) / n) * 100;
                i > e && (i = e);
              }
              ("x" === g
                ? (k.current.style.width = `${i}%`)
                : (k.current.style.height = `${i}%`),
                (O.current = i),
                w?.(i));
            },
            [g, D, E, x, M, L, b, f, w],
          ),
          z = (0, n.useCallback)(() => {
            E &&
              (A(!1),
              I(!1),
              S.current?.blur(),
              r.default.set(y, String(O.current), { expires: 7 }),
              u?.(N.current, O.current));
          }, [y, u, E]);
        ((0, a.useEventListener)("mousemove", V),
          (0, a.useEventListener)("mouseup", z),
          (0, a.useEventListener)(
            "keydown",
            (e) => {
              if (!E || ("ArrowLeft" !== e.key && "ArrowRight" !== e.key))
                return;
              let t =
                  (e.shiftKey ? 12 : 4) *
                  ("ArrowLeft" === e.key ? 1 : -1) *
                  ("start" === x ? 1 : -1),
                n = k.current?.parentElement,
                r = ("x" === g ? n?.clientWidth : n?.clientHeight) ?? 0,
                i =
                  ((("x" === g
                    ? k.current?.clientWidth
                    : k.current?.clientHeight) ?? 0) /
                    r) *
                    100 +
                  t;
              if (
                (b &&
                  "y" === g &&
                  (i / 100) * r < b.threshold &&
                  (i = (b.size / r) * 100),
                void 0 !== f)
              ) {
                let e = ((r - f) / r) * 100;
                i > e && (i = e);
              }
              ("x" === g
                ? (k.current.style.width = `${i}%`)
                : (k.current.style.height = `${i}%`),
                (O.current = i));
            },
            S,
          ));
        let H = (0, n.useCallback)(() => {
          if (void 0 === f) return;
          let e = k.current?.parentElement,
            t = "x" === g ? e?.clientWidth : e?.clientHeight;
          if (t) return ((t - f) / t) * 100;
        }, [g, f]);
        return (0, t.jsxs)(t.Fragment, {
          children: [
            (0, t.jsx)("div", {
              className: (0, s.cn)(
                "fixed inset-0 z-50",
                E
                  ? "x" === g
                    ? "cursor-col-resize"
                    : "cursor-row-resize"
                  : "pointer-events-none",
              ),
            }),
            (0, t.jsxs)(i.motion.div, {
              animate:
                "x" === g
                  ? {
                      width: e ? `${O.current ?? h}%` : "0%",
                      height: "100%",
                      minWidth: e ? `${m}px` : 0,
                      maxWidth: e && f ? `${H()}%` : void 0,
                      opacity: +!!e,
                    }
                  : {
                      height: e ? `${O.current ?? h}%` : "0%",
                      width: "100%",
                      minHeight: e ? `${m}px` : 0,
                      maxHeight: e && f ? `${H()}%` : void 0,
                      opacity: +!!e,
                    },
              "aria-hidden": !e,
              className: (0, s.cn)("relative", d),
              inert: !e,
              initial: !1,
              layout: "size",
              onAnimationComplete: () => {
                R && F(!1);
              },
              ref: k,
              transition:
                R || !p
                  ? { type: !1 }
                  : { type: "spring", damping: 25, stiffness: 180, mass: 1 },
              children: [
                (0, t.jsx)(o, {
                  axis: g,
                  dotsHandle: c,
                  onBlur: z,
                  onFocus: () => {
                    (A(!0), F(!0));
                  },
                  onMouseDown: B,
                  ref: S,
                  resizing: E,
                  show: e,
                  side: x,
                }),
                (0, t.jsx)("div", {
                  className: (0, s.cn)("absolute inset-0", l),
                  children: v,
                }),
              ],
            }),
          ],
        });
      },
    );
    ((l.displayName = "Resizable"), e.s(["Resizable", () => l]));
  },
  407211,
  (e) => {
    "use strict";
    e.s(["CodeExecutionRunButton", () => l]);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(707827),
      i = e.i(53223),
      s = e.i(77276),
      a = e.i(304649),
      o = e.i(625500);
    function l({
      buttonText: e = "Run Code",
      variant: l = "default",
      codeExecutionBlockProps: c,
      editedValue: u,
      disabled: d,
    }) {
      let { isExecuting: h, handleExecuteScript: p } = (0,
      o.useExecuteScripts)();
      return (0, t.jsxs)(
        n.Button,
        {
          className:
            "ghost" === l ? "h-6 text-v0-gray-900 has-[>svg]:px-1" : "",
          "data-testid": "run-code-button",
          disabled: h || d,
          onClick: async () => {
            ((0, i.track)("ClickRunCode", { code: u || c.source }),
              await p({
                type: "source",
                source: u || "",
                fileName: c.meta.file || "script.js",
                meta: { transaction: c.meta.transaction },
              }));
          },
          size: "sm",
          variant: "ghost" === l ? "ghost" : "secondary",
          children: [
            h
              ? (0, t.jsx)(r.Spinner, {
                  size: 16,
                  wrapperClassName: "text-gray-500",
                })
              : (0, t.jsx)(s.PlayCircle, {
                  className: (0, a.cn)(
                    "translate-y-[-0.5px] [&_circle]:[vector-effect:non-scaling-stroke]",
                    "ghost" === l
                      ? "text-v0-gray-900 [&_path]:fill-gray-500"
                      : "text-v0-gray-1000 [&_path]:fill-gray-900",
                  ),
                }),
            e,
          ],
        },
        "execute",
      );
    }
  },
  638200,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649);
    function r({ size: e = 16, className: r }) {
      return (0, t.jsxs)("svg", {
        className: (0, n.cn)("trash-icon overflow-visible", r),
        fill: "currentColor",
        height: e,
        viewBox: "0 0 16 16",
        width: e,
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, t.jsx)("style", {
            children: `
        .trash-icon .trash-lid {
            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);
            transform-origin: center;
        }

        button:has(.trash-icon):hover .trash-lid, button:has(.trash-icon):focus-visible .trash-lid {
          transform: translate(-0px, -2px) rotate(-10deg);
        }
            
       `,
          }),
          (0, t.jsx)("path", {
            className: "trash-lid",
            clipRule: "evenodd",
            d: "M6.75 2.75C6.75 2.0596 7.3096 1.5 8 1.5 8.6904 1.5 9.25 2.0596 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.2312 6.4812 0 8 0 9.5188 0 10.75 1.2312 10.75 2.75V3H12.9201 13 15V4.5H14.25 13.8846 1.75 1V3H1.75 3.0799 5.25Z",
            fill: "currentColor",
            fillRule: "evenodd",
          }),
          (0, t.jsx)("path", {
            clipRule: "evenodd",
            d: "M2.1154 4.5H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.3151C4.0087 16 2.9226 14.9942 2.8224 13.6917L2.1154 4.5ZM4.318 13.5767 3.6198 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.3151C4.7925 14.5 4.3581 14.0977 4.318 13.5767Z",
            fill: "currentColor",
            fillRule: "evenodd",
          }),
        ],
      });
    }
    e.s(["AnimatedTrash", () => r]);
  },
  494266,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.74999 3.93933L7.28032 4.46966L10.1035 7.29288C10.4941 7.68341 10.4941 8.31657 10.1035 8.7071L7.28032 11.5303L6.74999 12.0607L5.68933 11L6.21966 10.4697L8.68933 7.99999L6.21966 5.53032L5.68933 4.99999L6.74999 3.93933Z" fill="currentColor"/>',
    );
    e.s(["ChevronRightSmall", 0, t]);
  },
  956562,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path d="M6.0952 9.4643V5.5238H7.6190V10.5476C7.6190 11.1394 7.1394 11.6190 6.5476 11.6190C6.2651 11.6190 5.9862 11.5101 5.7857 11.3096L0 5.5238H2.1548L6.0952 9.4643Z M16 10.0952H14.4762V6.6071L10.9881 10.0952H14.4762V11.6190H10.5238C9.3403 11.6190 8.3810 10.6597 8.3810 9.4762V5.5238H9.9048V9.0238L13.4047 5.5238H9.9048V4H13.8571C15.0407 4 16 4.9594 16 6.1429V10.0952Z" fill="currentColor"/>',
    );
    e.s(["LogoV0", 0, t]);
  },
  443219,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6 1V1.75V5C6 5.55229 5.55228 6 5 6H1.75H1V4.5H1.75H4.5V1.75V1H6ZM14.25 6H15V4.5H14.25H11.5V1.75V1H10V1.75V5C10 5.55228 10.4477 6 11 6H14.25ZM10 14.25V15H11.5V14.25V11.5H14.29H15.04V10H14.29H11C10.4477 10 10 10.4477 10 11V14.25ZM1.75 10H1V11.5H1.75H4.5V14.25V15H6V14.25V11C6 10.4477 5.55229 10 5 10H1.75Z" fill="currentColor"/>',
    );
    e.s(["FullscreenClose", 0, t]);
  },
  1740,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 1.25C5.33749 1.25 3.02334 2.73677 1.84047 4.92183L1.48342 5.58138L2.80253 6.29548L3.15958 5.63592C4.09084 3.91566 5.90986 2.75 8.00002 2.75C10.4897 2.75 12.5941 4.40488 13.2713 6.67462H11.8243H11.0743V8.17462H11.8243H15.2489C15.6631 8.17462 15.9989 7.83883 15.9989 7.42462V4V3.25H14.4989V4V5.64468C13.4653 3.06882 10.9456 1.25 8.00002 1.25ZM1.50122 10.8555V12.5V13.25H0.0012207V12.5V9.07538C0.0012207 8.66117 0.337007 8.32538 0.751221 8.32538H4.17584H4.92584V9.82538H4.17584H2.72876C3.40596 12.0951 5.51032 13.75 8.00002 13.75C10.0799 13.75 11.8912 12.5958 12.8266 10.8895L13.1871 10.2318L14.5025 10.9529L14.142 11.6105C12.9539 13.7779 10.6494 15.25 8.00002 15.25C5.05453 15.25 2.53485 13.4313 1.50122 10.8555Z" fill="currentColor"/>',
    );
    e.s(["RefreshClockwise", 0, t]);
  },
  566274,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(418625);
    function r() {
      let { data: e, mutate: r } = (0, n.default)("result:full-screen"),
        { mutate: i } = (0, n.default)("state:select"),
        s = (0, t.useCallback)(
          (e, t) => {
            r((n) => {
              if (!n && !e) return;
              let r = new URL(window.location.href),
                s = r.searchParams,
                a = s.get("b"),
                o = t ?? a;
              return (
                o &&
                  (e ? s.set("f", "1") : s.delete("f"),
                  s.set("b", o),
                  (r.search = s.toString()),
                  window.history.replaceState({}, "", r.toString())),
                i(!1),
                { value: e }
              );
            });
          },
          [r, i],
        );
      return {
        fullScreenResult: e?.value ?? !1,
        setFullscreenResult: s,
        source: e?.source,
      };
    }
    e.s(["useFullscreenResult", () => r]);
  },
  780752,
  658252,
  (e) => {
    "use strict";
    e.s(["RefreshPreview", () => c], 780752);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(899488),
      i = e.i(1740),
      s = e.i(297239),
      a = e.i(204575),
      o = e.i(768619);
    let l = (e) => {
      if (!e) return;
      let t = document.getElementById((0, a.getBlockIframeId)(e));
      if (t instanceof HTMLIFrameElement)
        if (t.contentDocument) t.contentDocument.location.reload();
        else if (t.srcdoc) {
          let e = t.srcdoc;
          ((t.srcdoc = ""),
            setTimeout(() => {
              t.srcdoc = e;
            }, 10));
        } else t.src = (0, o.getIframeSrc)(t);
    };
    function c({ blockId: e }) {
      let a = (0, s.useT)(),
        o = (0, n.useCallback)(() => {
          e && l(e);
        }, [e]);
      return (0, t.jsx)(r.CodeBlockButton, {
        "aria-label": a("previewBlock.refresh"),
        onClick: () => o(),
        tooltip: { side: "bottom", content: a("previewBlock.refresh") },
        children: (0, t.jsx)("span", {
          children: (0, t.jsx)(i.RefreshClockwise, {}),
        }),
      });
    }
    var u = t,
      d = e.i(566274),
      h = r,
      p = e.i(270692),
      m = s;
    function f() {
      let { setFullscreenResult: e } = (0, d.useFullscreenResult)(),
        t = (0, m.useT)();
      return (0, u.jsx)(h.CodeBlockButton, {
        "aria-label": t("previewBlock.fullscreen"),
        className: "flex",
        onClick: () => e(!0),
        tooltip: { side: "bottom", content: t("previewBlock.fullscreen") },
        children: (0, u.jsx)(p.Fullscreen, {}),
      });
    }
    e.s(["FullscreenButton", () => f], 658252);
  },
  481556,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(566274),
      r = e.i(405193),
      i = e.i(304649),
      s = e.i(127169);
    function a({ children: e }) {
      let {
          fullScreenResult: a,
          setFullscreenResult: o,
          source: l,
        } = (0, n.useFullscreenResult)(),
        c = a;
      (0, s.useShortcut)((e) => {
        "Escape" === e.key && o(!1);
      });
      let u = (0, t.jsx)("div", {
        "data-testid": "fullscreen-overlay",
        className: (0, i.cn)(
          "overflow-clip! bg-background-100",
          c ? "fixed inset-0 z-40" : "size-full",
          c && "ssr" !== l && "animate-in zoom-in-90",
        ),
        style: { pointerEvents: "all" },
        children: e,
      });
      return c
        ? "undefined" == typeof document
          ? u
          : (0, r.createPortal)(u, document.body)
        : e;
    }
    e.s(["FullscreenContainer", () => a]);
  },
  816220,
  (e) => {
    "use strict";
    function t(e, t) {
      let n = t || {};
      return ("" === e[e.length - 1] ? [...e, ""] : e)
        .join((n.padRight ? " " : "") + "," + (!1 === n.padLeft ? "" : " "))
        .trim();
    }
    e.s(["stringify", () => t]);
  },
  158206,
  (e) => {
    "use strict";
    let t = /[ \t\n\f\r]/g;
    function n(e) {
      return "object" == typeof e ? "text" === e.type && r(e.value) : r(e);
    }
    function r(e) {
      return "" === e.replace(t, "");
    }
    e.s(["whitespace", () => n]);
  },
  722365,
  (e) => {
    "use strict";
    function t(e) {
      return e.join(" ").trim();
    }
    e.s(["stringify", () => t]);
  },
  6809,
  (e, t, n) => {
    var r = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,
      i = /\n/g,
      s = /^\s*/,
      a = /^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,
      o = /^:\s*/,
      l = /^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,
      c = /^[;\s]*/,
      u = /^\s+|\s+$/g,
      d = "\n",
      h = "/",
      p = "*",
      m = "",
      f = "comment",
      g = "declaration";
    function x(e) {
      return e ? e.replace(u, m) : m;
    }
    t.exports = function (e, t) {
      if ("string" != typeof e)
        throw TypeError("First argument must be a string");
      if (!e) return [];
      t = t || {};
      var n = 1,
        u = 1;
      function v(e) {
        var t = e.match(i);
        t && (n += t.length);
        var r = e.lastIndexOf(d);
        u = ~r ? e.length - r : u + e.length;
      }
      function y() {
        var e = { line: n, column: u };
        return function (t) {
          return ((t.position = new b(e)), k(), t);
        };
      }
      function b(e) {
        ((this.start = e),
          (this.end = { line: n, column: u }),
          (this.source = t.source));
      }
      b.prototype.content = e;
      var j = [];
      function w(r) {
        var i = Error(t.source + ":" + n + ":" + u + ": " + r);
        if (
          ((i.reason = r),
          (i.filename = t.source),
          (i.line = n),
          (i.column = u),
          (i.source = e),
          t.silent)
        )
          j.push(i);
        else throw i;
      }
      function C(t) {
        var n = t.exec(e);
        if (n) {
          var r = n[0];
          return (v(r), (e = e.slice(r.length)), n);
        }
      }
      function k() {
        C(s);
      }
      function S(e) {
        var t;
        for (e = e || []; (t = N()); ) !1 !== t && e.push(t);
        return e;
      }
      function N() {
        var t = y();
        if (h == e.charAt(0) && p == e.charAt(1)) {
          for (
            var n = 2;
            m != e.charAt(n) && (p != e.charAt(n) || h != e.charAt(n + 1));

          )
            ++n;
          if (((n += 2), m === e.charAt(n - 1)))
            return w("End of comment missing");
          var r = e.slice(2, n - 2);
          return (
            (u += 2),
            v(r),
            (e = e.slice(n)),
            (u += 2),
            t({ type: f, comment: r })
          );
        }
      }
      function E() {
        var e = y(),
          t = C(a);
        if (t) {
          if ((N(), !C(o))) return w("property missing ':'");
          var n = C(l),
            i = e({
              type: g,
              property: x(t[0].replace(r, m)),
              value: n ? x(n[0].replace(r, m)) : m,
            });
          return (C(c), i);
        }
      }
      function A() {
        var e,
          t = [];
        for (S(t); (e = E()); ) !1 !== e && (t.push(e), S(t));
        return t;
      }
      return (k(), A());
    };
  },
  518043,
  (e, t, n) => {
    "use strict";
    var r =
      (e.e && e.e.__importDefault) ||
      function (e) {
        return e && e.__esModule ? e : { default: e };
      };
    Object.defineProperty(n, "__esModule", { value: !0 });
    var i = r(e.r(6809));
    n.default = function (e, t) {
      var n = null;
      if (!e || "string" != typeof e) return n;
      var r = (0, i.default)(e),
        s = "function" == typeof t;
      return (
        r.forEach(function (e) {
          if ("declaration" === e.type) {
            var r = e.property,
              i = e.value;
            s ? t(r, i, e) : i && ((n = n || {})[r] = i);
          }
        }),
        n
      );
    };
  },
  975609,
  (e, t, n) => {
    "use strict";
    var r = Object.prototype.hasOwnProperty,
      i = Object.prototype.toString,
      s = Object.defineProperty,
      a = Object.getOwnPropertyDescriptor,
      o = function (e) {
        return "function" == typeof Array.isArray
          ? Array.isArray(e)
          : "[object Array]" === i.call(e);
      },
      l = function (e) {
        if (!e || "[object Object]" !== i.call(e)) return !1;
        var t,
          n = r.call(e, "constructor"),
          s =
            e.constructor &&
            e.constructor.prototype &&
            r.call(e.constructor.prototype, "isPrototypeOf");
        if (e.constructor && !n && !s) return !1;
        for (t in e);
        return void 0 === t || r.call(e, t);
      },
      c = function (e, t) {
        s && "__proto__" === t.name
          ? s(e, t.name, {
              enumerable: !0,
              configurable: !0,
              value: t.newValue,
              writable: !0,
            })
          : (e[t.name] = t.newValue);
      },
      u = function (e, t) {
        if ("__proto__" === t) {
          if (!r.call(e, t)) return;
          else if (a) return a(e, t).value;
        }
        return e[t];
      };
    t.exports = function e() {
      var t,
        n,
        r,
        i,
        s,
        a,
        d = arguments[0],
        h = 1,
        p = arguments.length,
        m = !1;
      for (
        "boolean" == typeof d && ((m = d), (d = arguments[1] || {}), (h = 2)),
          (null == d || ("object" != typeof d && "function" != typeof d)) &&
            (d = {});
        h < p;
        ++h
      )
        if (((t = arguments[h]), null != t))
          for (n in t)
            ((r = u(d, n)),
              d !== (i = u(t, n)) &&
                (m && i && (l(i) || (s = o(i)))
                  ? (s
                      ? ((s = !1), (a = r && o(r) ? r : []))
                      : (a = r && l(r) ? r : {}),
                    c(d, { name: n, newValue: e(m, a, i) }))
                  : void 0 !== i && c(d, { name: n, newValue: i })));
      return d;
    };
  },
  219732,
  (e, t, n) => {
    "use strict";
    var r =
        (e.e && e.e.__assign) ||
        function () {
          return (r = Object.assign).apply(this, arguments);
        },
      i =
        (e.e && e.e.__rest) ||
        function (e, t) {
          var n = {};
          for (var r in e)
            Object.prototype.hasOwnProperty.call(e, r) &&
              0 > t.indexOf(r) &&
              (n[r] = e[r]);
          if (null != e && "function" == typeof Object.getOwnPropertySymbols)
            for (
              var i = 0, r = Object.getOwnPropertySymbols(e);
              i < r.length;
              i++
            )
              0 > t.indexOf(r[i]) &&
                Object.prototype.propertyIsEnumerable.call(e, r[i]) &&
                (n[r[i]] = e[r[i]]);
          return n;
        };
    (Object.defineProperty(n, "__esModule", { value: !0 }), (n.default = o));
    var s = e.r(324834),
      a = e.r(576191);
    function o(e) {
      return function (t) {
        var n = t.defaultOrigin,
          o = void 0 === n ? "" : n,
          l = t.allowedLinkPrefixes,
          c = void 0 === l ? [] : l,
          u = t.allowedImagePrefixes,
          d = void 0 === u ? [] : u,
          h = t.components,
          p = i(t, [
            "defaultOrigin",
            "allowedLinkPrefixes",
            "allowedImagePrefixes",
            "components",
          ]),
          m =
            c.length &&
            !c.every(function (e) {
              return "*" === e;
            }),
          f =
            d.length &&
            !d.every(function (e) {
              return "*" === e;
            });
        if (!o && (m || f))
          throw Error(
            "defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided",
          );
        var g = function (e) {
            if ("string" != typeof e) return null;
            try {
              var t = new URL(e);
              return t;
            } catch (n) {
              if (o)
                try {
                  var t = new URL(e, o);
                  return t;
                } catch (e) {}
              return null;
            }
          },
          x = function (e) {
            return "string" == typeof e && e.startsWith("/");
          },
          v = function (e, t) {
            if (!e || !g(e)) return null;
            if (t.includes("*")) {
              var n = x(e),
                r = g(e);
              return r ? (n ? r.pathname + r.search + r.hash : r.href) : null;
            }
            var i = x(e),
              s = g(e);
            return s &&
              t.some(function (e) {
                var t = g(e);
                return (
                  !!t && t.origin === s.origin && s.href.startsWith(t.href)
                );
              })
              ? i
                ? s.pathname + s.search + s.hash
                : s.href
              : null;
          },
          y = {
            a: function (e) {
              var t = e.href,
                n = e.children,
                o = e.node,
                l = i(e, ["href", "children", "node"]),
                u = v(t, c);
              return null !== u
                ? (null == h ? void 0 : h.a)
                  ? (0, a.createElement)(
                      h.a,
                      r(
                        {
                          href: u,
                          children: n,
                          node: o,
                          target: "_blank",
                          rel: "noopener noreferrer",
                        },
                        l,
                      ),
                    )
                  : (0, s.jsx)(
                      "a",
                      r({ href: u }, l, {
                        target: "_blank",
                        rel: "noopener noreferrer",
                        children: n,
                      }),
                    )
                : (0, s.jsxs)("span", {
                    className: "text-gray-500",
                    title: "Blocked URL: ".concat(t),
                    children: [n, " [blocked]"],
                  });
            },
            img: function (e) {
              var t = e.src,
                n = e.alt,
                o = e.node,
                l = i(e, ["src", "alt", "node"]),
                c = v(t, d);
              return null !== c
                ? (null == h ? void 0 : h.img)
                  ? (0, a.createElement)(
                      h.img,
                      r({ src: c, alt: n, node: o }, l),
                    )
                  : (0, s.jsx)("img", r({ src: c, alt: n }, l))
                : (0, s.jsxs)("span", {
                    className:
                      "inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",
                    children: ["[Image blocked: ", n || "No description", "]"],
                  });
            },
          },
          b = r(r({}, h), y),
          j = r(r({}, p), { components: b });
        return (0, a.createElement)(e, j);
      };
    }
  },
  396735,
  897802,
  12105,
  212470,
  872238,
  346863,
  540795,
  434036,
  759239,
  941392,
  820667,
  983691,
  249548,
  939049,
  446207,
  694686,
  430957,
  85830,
  393978,
  661535,
  (e) => {
    "use strict";
    function t() {}
    function n() {}
    e.s(["ok", () => t, "unreachable", () => n], 897802);
    var r = e.i(816220);
    let i = /^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,
      s = /^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,
      a = {};
    function o(e, t) {
      return ((t || a).jsx ? s : i).test(e);
    }
    var l = e.i(158206);
    function c(e) {
      return e.toLowerCase();
    }
    class u {
      constructor(e, t) {
        ((this.property = e), (this.attribute = t));
      }
    }
    ((u.prototype.space = null),
      (u.prototype.boolean = !1),
      (u.prototype.booleanish = !1),
      (u.prototype.overloadedBoolean = !1),
      (u.prototype.number = !1),
      (u.prototype.commaSeparated = !1),
      (u.prototype.spaceSeparated = !1),
      (u.prototype.commaOrSpaceSeparated = !1),
      (u.prototype.mustUseProperty = !1),
      (u.prototype.defined = !1));
    let d = 0,
      h = y(),
      p = y(),
      m = y(),
      f = y(),
      g = y(),
      x = y(),
      v = y();
    function y() {
      return 2 ** ++d;
    }
    e.s(
      [
        "boolean",
        0,
        h,
        "booleanish",
        0,
        p,
        "commaOrSpaceSeparated",
        0,
        v,
        "commaSeparated",
        0,
        x,
        "number",
        0,
        f,
        "overloadedBoolean",
        0,
        m,
        "spaceSeparated",
        0,
        g,
      ],
      360827,
    );
    var b = e.i(360827);
    let j = Object.keys(b);
    class w extends u {
      constructor(e, t, n, r) {
        let i = -1;
        if ((super(e, t), C(this, "space", r), "number" == typeof n))
          for (; ++i < j.length; ) {
            const e = j[i];
            C(this, j[i], (n & b[e]) === b[e]);
          }
      }
    }
    function C(e, t, n) {
      n && (e[t] = n);
    }
    w.prototype.defined = !0;
    let k = /^data[-\w.:]+$/i,
      S = /-[a-z]/g,
      N = /[A-Z]/g;
    function E(e, t) {
      let n = c(t),
        r = t,
        i = u;
      if (n in e.normal) return e.property[e.normal[n]];
      if (n.length > 4 && "data" === n.slice(0, 4) && k.test(t)) {
        if ("-" === t.charAt(4)) {
          let e = t.slice(5).replace(S, D);
          r = "data" + e.charAt(0).toUpperCase() + e.slice(1);
        } else {
          let e = t.slice(4);
          if (!S.test(e)) {
            let n = e.replace(N, A);
            ("-" !== n.charAt(0) && (n = "-" + n), (t = "data" + n));
          }
        }
        i = w;
      }
      return new i(r, t);
    }
    function A(e) {
      return "-" + e.toLowerCase();
    }
    function D(e) {
      return e.charAt(1).toUpperCase();
    }
    let I = {
      classId: "classID",
      dataType: "datatype",
      itemId: "itemID",
      strokeDashArray: "strokeDasharray",
      strokeDashOffset: "strokeDashoffset",
      strokeLineCap: "strokeLinecap",
      strokeLineJoin: "strokeLinejoin",
      strokeMiterLimit: "strokeMiterlimit",
      typeOf: "typeof",
      xLinkActuate: "xlinkActuate",
      xLinkArcRole: "xlinkArcrole",
      xLinkHref: "xlinkHref",
      xLinkRole: "xlinkRole",
      xLinkShow: "xlinkShow",
      xLinkTitle: "xlinkTitle",
      xLinkType: "xlinkType",
      xmlnsXLink: "xmlnsXlink",
    };
    class M {
      constructor(e, t, n) {
        ((this.property = e), (this.normal = t), n && (this.space = n));
      }
    }
    function T(e, t) {
      let n = {},
        r = {},
        i = -1;
      for (; ++i < e.length; )
        (Object.assign(n, e[i].property), Object.assign(r, e[i].normal));
      return new M(n, r, t);
    }
    ((M.prototype.property = {}),
      (M.prototype.normal = {}),
      (M.prototype.space = null));
    let L = {}.hasOwnProperty;
    function P(e) {
      let t,
        n = {},
        r = {};
      for (t in e.properties)
        if (L.call(e.properties, t)) {
          let i = e.properties[t],
            s = new w(t, e.transform(e.attributes || {}, t), i, e.space);
          (e.mustUseProperty &&
            e.mustUseProperty.includes(t) &&
            (s.mustUseProperty = !0),
            (n[t] = s),
            (r[c(t)] = t),
            (r[c(s.attribute)] = t));
        }
      return new M(n, r, e.space);
    }
    let R = P({
        space: "xlink",
        transform: (e, t) => "xlink:" + t.slice(5).toLowerCase(),
        properties: {
          xLinkActuate: null,
          xLinkArcRole: null,
          xLinkHref: null,
          xLinkRole: null,
          xLinkShow: null,
          xLinkTitle: null,
          xLinkType: null,
        },
      }),
      F = P({
        space: "xml",
        transform: (e, t) => "xml:" + t.slice(3).toLowerCase(),
        properties: { xmlLang: null, xmlBase: null, xmlSpace: null },
      });
    function _(e, t) {
      return t in e ? e[t] : t;
    }
    function O(e, t) {
      return _(e, t.toLowerCase());
    }
    let B = P({
        space: "xmlns",
        attributes: { xmlnsxlink: "xmlns:xlink" },
        transform: O,
        properties: { xmlns: null, xmlnsXLink: null },
      }),
      V = P({
        transform: (e, t) =>
          "role" === t ? t : "aria-" + t.slice(4).toLowerCase(),
        properties: {
          ariaActiveDescendant: null,
          ariaAtomic: p,
          ariaAutoComplete: null,
          ariaBusy: p,
          ariaChecked: p,
          ariaColCount: f,
          ariaColIndex: f,
          ariaColSpan: f,
          ariaControls: g,
          ariaCurrent: null,
          ariaDescribedBy: g,
          ariaDetails: null,
          ariaDisabled: p,
          ariaDropEffect: g,
          ariaErrorMessage: null,
          ariaExpanded: p,
          ariaFlowTo: g,
          ariaGrabbed: p,
          ariaHasPopup: null,
          ariaHidden: p,
          ariaInvalid: null,
          ariaKeyShortcuts: null,
          ariaLabel: null,
          ariaLabelledBy: g,
          ariaLevel: f,
          ariaLive: null,
          ariaModal: p,
          ariaMultiLine: p,
          ariaMultiSelectable: p,
          ariaOrientation: null,
          ariaOwns: g,
          ariaPlaceholder: null,
          ariaPosInSet: f,
          ariaPressed: p,
          ariaReadOnly: p,
          ariaRelevant: null,
          ariaRequired: p,
          ariaRoleDescription: g,
          ariaRowCount: f,
          ariaRowIndex: f,
          ariaRowSpan: f,
          ariaSelected: p,
          ariaSetSize: f,
          ariaSort: null,
          ariaValueMax: f,
          ariaValueMin: f,
          ariaValueNow: f,
          ariaValueText: null,
          role: null,
        },
      }),
      z = P({
        space: "html",
        attributes: {
          acceptcharset: "accept-charset",
          classname: "class",
          htmlfor: "for",
          httpequiv: "http-equiv",
        },
        transform: O,
        mustUseProperty: ["checked", "multiple", "muted", "selected"],
        properties: {
          abbr: null,
          accept: x,
          acceptCharset: g,
          accessKey: g,
          action: null,
          allow: null,
          allowFullScreen: h,
          allowPaymentRequest: h,
          allowUserMedia: h,
          alt: null,
          as: null,
          async: h,
          autoCapitalize: null,
          autoComplete: g,
          autoFocus: h,
          autoPlay: h,
          capture: h,
          charSet: null,
          checked: h,
          cite: null,
          className: g,
          cols: f,
          colSpan: null,
          content: null,
          contentEditable: p,
          controls: h,
          controlsList: g,
          coords: f | x,
          crossOrigin: null,
          data: null,
          dateTime: null,
          decoding: null,
          default: h,
          defer: h,
          dir: null,
          dirName: null,
          disabled: h,
          download: m,
          draggable: p,
          encType: null,
          enterKeyHint: null,
          form: null,
          formAction: null,
          formEncType: null,
          formMethod: null,
          formNoValidate: h,
          formTarget: null,
          headers: g,
          height: f,
          hidden: h,
          high: f,
          href: null,
          hrefLang: null,
          htmlFor: g,
          httpEquiv: g,
          id: null,
          imageSizes: null,
          imageSrcSet: null,
          inputMode: null,
          integrity: null,
          is: null,
          isMap: h,
          itemId: null,
          itemProp: g,
          itemRef: g,
          itemScope: h,
          itemType: g,
          kind: null,
          label: null,
          lang: null,
          language: null,
          list: null,
          loading: null,
          loop: h,
          low: f,
          manifest: null,
          max: null,
          maxLength: f,
          media: null,
          method: null,
          min: null,
          minLength: f,
          multiple: h,
          muted: h,
          name: null,
          nonce: null,
          noModule: h,
          noValidate: h,
          onAbort: null,
          onAfterPrint: null,
          onAuxClick: null,
          onBeforeMatch: null,
          onBeforePrint: null,
          onBeforeUnload: null,
          onBlur: null,
          onCancel: null,
          onCanPlay: null,
          onCanPlayThrough: null,
          onChange: null,
          onClick: null,
          onClose: null,
          onContextLost: null,
          onContextMenu: null,
          onContextRestored: null,
          onCopy: null,
          onCueChange: null,
          onCut: null,
          onDblClick: null,
          onDrag: null,
          onDragEnd: null,
          onDragEnter: null,
          onDragExit: null,
          onDragLeave: null,
          onDragOver: null,
          onDragStart: null,
          onDrop: null,
          onDurationChange: null,
          onEmptied: null,
          onEnded: null,
          onError: null,
          onFocus: null,
          onFormData: null,
          onHashChange: null,
          onInput: null,
          onInvalid: null,
          onKeyDown: null,
          onKeyPress: null,
          onKeyUp: null,
          onLanguageChange: null,
          onLoad: null,
          onLoadedData: null,
          onLoadedMetadata: null,
          onLoadEnd: null,
          onLoadStart: null,
          onMessage: null,
          onMessageError: null,
          onMouseDown: null,
          onMouseEnter: null,
          onMouseLeave: null,
          onMouseMove: null,
          onMouseOut: null,
          onMouseOver: null,
          onMouseUp: null,
          onOffline: null,
          onOnline: null,
          onPageHide: null,
          onPageShow: null,
          onPaste: null,
          onPause: null,
          onPlay: null,
          onPlaying: null,
          onPopState: null,
          onProgress: null,
          onRateChange: null,
          onRejectionHandled: null,
          onReset: null,
          onResize: null,
          onScroll: null,
          onScrollEnd: null,
          onSecurityPolicyViolation: null,
          onSeeked: null,
          onSeeking: null,
          onSelect: null,
          onSlotChange: null,
          onStalled: null,
          onStorage: null,
          onSubmit: null,
          onSuspend: null,
          onTimeUpdate: null,
          onToggle: null,
          onUnhandledRejection: null,
          onUnload: null,
          onVolumeChange: null,
          onWaiting: null,
          onWheel: null,
          open: h,
          optimum: f,
          pattern: null,
          ping: g,
          placeholder: null,
          playsInline: h,
          poster: null,
          preload: null,
          readOnly: h,
          referrerPolicy: null,
          rel: g,
          required: h,
          reversed: h,
          rows: f,
          rowSpan: f,
          sandbox: g,
          scope: null,
          scoped: h,
          seamless: h,
          selected: h,
          shape: null,
          size: f,
          sizes: null,
          slot: null,
          span: f,
          spellCheck: p,
          src: null,
          srcDoc: null,
          srcLang: null,
          srcSet: null,
          start: f,
          step: null,
          style: null,
          tabIndex: f,
          target: null,
          title: null,
          translate: null,
          type: null,
          typeMustMatch: h,
          useMap: null,
          value: p,
          width: f,
          wrap: null,
          align: null,
          aLink: null,
          archive: g,
          axis: null,
          background: null,
          bgColor: null,
          border: f,
          borderColor: null,
          bottomMargin: f,
          cellPadding: null,
          cellSpacing: null,
          char: null,
          charOff: null,
          classId: null,
          clear: null,
          code: null,
          codeBase: null,
          codeType: null,
          color: null,
          compact: h,
          declare: h,
          event: null,
          face: null,
          frame: null,
          frameBorder: null,
          hSpace: f,
          leftMargin: f,
          link: null,
          longDesc: null,
          lowSrc: null,
          marginHeight: f,
          marginWidth: f,
          noResize: h,
          noHref: h,
          noShade: h,
          noWrap: h,
          object: null,
          profile: null,
          prompt: null,
          rev: null,
          rightMargin: f,
          rules: null,
          scheme: null,
          scrolling: p,
          standby: null,
          summary: null,
          text: null,
          topMargin: f,
          valueType: null,
          version: null,
          vAlign: null,
          vLink: null,
          vSpace: f,
          allowTransparency: null,
          autoCorrect: null,
          autoSave: null,
          disablePictureInPicture: h,
          disableRemotePlayback: h,
          prefix: null,
          property: null,
          results: f,
          security: null,
          unselectable: null,
        },
      }),
      H = P({
        space: "svg",
        attributes: {
          accentHeight: "accent-height",
          alignmentBaseline: "alignment-baseline",
          arabicForm: "arabic-form",
          baselineShift: "baseline-shift",
          capHeight: "cap-height",
          className: "class",
          clipPath: "clip-path",
          clipRule: "clip-rule",
          colorInterpolation: "color-interpolation",
          colorInterpolationFilters: "color-interpolation-filters",
          colorProfile: "color-profile",
          colorRendering: "color-rendering",
          crossOrigin: "crossorigin",
          dataType: "datatype",
          dominantBaseline: "dominant-baseline",
          enableBackground: "enable-background",
          fillOpacity: "fill-opacity",
          fillRule: "fill-rule",
          floodColor: "flood-color",
          floodOpacity: "flood-opacity",
          fontFamily: "font-family",
          fontSize: "font-size",
          fontSizeAdjust: "font-size-adjust",
          fontStretch: "font-stretch",
          fontStyle: "font-style",
          fontVariant: "font-variant",
          fontWeight: "font-weight",
          glyphName: "glyph-name",
          glyphOrientationHorizontal: "glyph-orientation-horizontal",
          glyphOrientationVertical: "glyph-orientation-vertical",
          hrefLang: "hreflang",
          horizAdvX: "horiz-adv-x",
          horizOriginX: "horiz-origin-x",
          horizOriginY: "horiz-origin-y",
          imageRendering: "image-rendering",
          letterSpacing: "letter-spacing",
          lightingColor: "lighting-color",
          markerEnd: "marker-end",
          markerMid: "marker-mid",
          markerStart: "marker-start",
          navDown: "nav-down",
          navDownLeft: "nav-down-left",
          navDownRight: "nav-down-right",
          navLeft: "nav-left",
          navNext: "nav-next",
          navPrev: "nav-prev",
          navRight: "nav-right",
          navUp: "nav-up",
          navUpLeft: "nav-up-left",
          navUpRight: "nav-up-right",
          onAbort: "onabort",
          onActivate: "onactivate",
          onAfterPrint: "onafterprint",
          onBeforePrint: "onbeforeprint",
          onBegin: "onbegin",
          onCancel: "oncancel",
          onCanPlay: "oncanplay",
          onCanPlayThrough: "oncanplaythrough",
          onChange: "onchange",
          onClick: "onclick",
          onClose: "onclose",
          onCopy: "oncopy",
          onCueChange: "oncuechange",
          onCut: "oncut",
          onDblClick: "ondblclick",
          onDrag: "ondrag",
          onDragEnd: "ondragend",
          onDragEnter: "ondragenter",
          onDragExit: "ondragexit",
          onDragLeave: "ondragleave",
          onDragOver: "ondragover",
          onDragStart: "ondragstart",
          onDrop: "ondrop",
          onDurationChange: "ondurationchange",
          onEmptied: "onemptied",
          onEnd: "onend",
          onEnded: "onended",
          onError: "onerror",
          onFocus: "onfocus",
          onFocusIn: "onfocusin",
          onFocusOut: "onfocusout",
          onHashChange: "onhashchange",
          onInput: "oninput",
          onInvalid: "oninvalid",
          onKeyDown: "onkeydown",
          onKeyPress: "onkeypress",
          onKeyUp: "onkeyup",
          onLoad: "onload",
          onLoadedData: "onloadeddata",
          onLoadedMetadata: "onloadedmetadata",
          onLoadStart: "onloadstart",
          onMessage: "onmessage",
          onMouseDown: "onmousedown",
          onMouseEnter: "onmouseenter",
          onMouseLeave: "onmouseleave",
          onMouseMove: "onmousemove",
          onMouseOut: "onmouseout",
          onMouseOver: "onmouseover",
          onMouseUp: "onmouseup",
          onMouseWheel: "onmousewheel",
          onOffline: "onoffline",
          onOnline: "ononline",
          onPageHide: "onpagehide",
          onPageShow: "onpageshow",
          onPaste: "onpaste",
          onPause: "onpause",
          onPlay: "onplay",
          onPlaying: "onplaying",
          onPopState: "onpopstate",
          onProgress: "onprogress",
          onRateChange: "onratechange",
          onRepeat: "onrepeat",
          onReset: "onreset",
          onResize: "onresize",
          onScroll: "onscroll",
          onSeeked: "onseeked",
          onSeeking: "onseeking",
          onSelect: "onselect",
          onShow: "onshow",
          onStalled: "onstalled",
          onStorage: "onstorage",
          onSubmit: "onsubmit",
          onSuspend: "onsuspend",
          onTimeUpdate: "ontimeupdate",
          onToggle: "ontoggle",
          onUnload: "onunload",
          onVolumeChange: "onvolumechange",
          onWaiting: "onwaiting",
          onZoom: "onzoom",
          overlinePosition: "overline-position",
          overlineThickness: "overline-thickness",
          paintOrder: "paint-order",
          panose1: "panose-1",
          pointerEvents: "pointer-events",
          referrerPolicy: "referrerpolicy",
          renderingIntent: "rendering-intent",
          shapeRendering: "shape-rendering",
          stopColor: "stop-color",
          stopOpacity: "stop-opacity",
          strikethroughPosition: "strikethrough-position",
          strikethroughThickness: "strikethrough-thickness",
          strokeDashArray: "stroke-dasharray",
          strokeDashOffset: "stroke-dashoffset",
          strokeLineCap: "stroke-linecap",
          strokeLineJoin: "stroke-linejoin",
          strokeMiterLimit: "stroke-miterlimit",
          strokeOpacity: "stroke-opacity",
          strokeWidth: "stroke-width",
          tabIndex: "tabindex",
          textAnchor: "text-anchor",
          textDecoration: "text-decoration",
          textRendering: "text-rendering",
          typeOf: "typeof",
          underlinePosition: "underline-position",
          underlineThickness: "underline-thickness",
          unicodeBidi: "unicode-bidi",
          unicodeRange: "unicode-range",
          unitsPerEm: "units-per-em",
          vAlphabetic: "v-alphabetic",
          vHanging: "v-hanging",
          vIdeographic: "v-ideographic",
          vMathematical: "v-mathematical",
          vectorEffect: "vector-effect",
          vertAdvY: "vert-adv-y",
          vertOriginX: "vert-origin-x",
          vertOriginY: "vert-origin-y",
          wordSpacing: "word-spacing",
          writingMode: "writing-mode",
          xHeight: "x-height",
          playbackOrder: "playbackorder",
          timelineBegin: "timelinebegin",
        },
        transform: _,
        properties: {
          about: v,
          accentHeight: f,
          accumulate: null,
          additive: null,
          alignmentBaseline: null,
          alphabetic: f,
          amplitude: f,
          arabicForm: null,
          ascent: f,
          attributeName: null,
          attributeType: null,
          azimuth: f,
          bandwidth: null,
          baselineShift: null,
          baseFrequency: null,
          baseProfile: null,
          bbox: null,
          begin: null,
          bias: f,
          by: null,
          calcMode: null,
          capHeight: f,
          className: g,
          clip: null,
          clipPath: null,
          clipPathUnits: null,
          clipRule: null,
          color: null,
          colorInterpolation: null,
          colorInterpolationFilters: null,
          colorProfile: null,
          colorRendering: null,
          content: null,
          contentScriptType: null,
          contentStyleType: null,
          crossOrigin: null,
          cursor: null,
          cx: null,
          cy: null,
          d: null,
          dataType: null,
          defaultAction: null,
          descent: f,
          diffuseConstant: f,
          direction: null,
          display: null,
          dur: null,
          divisor: f,
          dominantBaseline: null,
          download: h,
          dx: null,
          dy: null,
          edgeMode: null,
          editable: null,
          elevation: f,
          enableBackground: null,
          end: null,
          event: null,
          exponent: f,
          externalResourcesRequired: null,
          fill: null,
          fillOpacity: f,
          fillRule: null,
          filter: null,
          filterRes: null,
          filterUnits: null,
          floodColor: null,
          floodOpacity: null,
          focusable: null,
          focusHighlight: null,
          fontFamily: null,
          fontSize: null,
          fontSizeAdjust: null,
          fontStretch: null,
          fontStyle: null,
          fontVariant: null,
          fontWeight: null,
          format: null,
          fr: null,
          from: null,
          fx: null,
          fy: null,
          g1: x,
          g2: x,
          glyphName: x,
          glyphOrientationHorizontal: null,
          glyphOrientationVertical: null,
          glyphRef: null,
          gradientTransform: null,
          gradientUnits: null,
          handler: null,
          hanging: f,
          hatchContentUnits: null,
          hatchUnits: null,
          height: null,
          href: null,
          hrefLang: null,
          horizAdvX: f,
          horizOriginX: f,
          horizOriginY: f,
          id: null,
          ideographic: f,
          imageRendering: null,
          initialVisibility: null,
          in: null,
          in2: null,
          intercept: f,
          k: f,
          k1: f,
          k2: f,
          k3: f,
          k4: f,
          kernelMatrix: v,
          kernelUnitLength: null,
          keyPoints: null,
          keySplines: null,
          keyTimes: null,
          kerning: null,
          lang: null,
          lengthAdjust: null,
          letterSpacing: null,
          lightingColor: null,
          limitingConeAngle: f,
          local: null,
          markerEnd: null,
          markerMid: null,
          markerStart: null,
          markerHeight: null,
          markerUnits: null,
          markerWidth: null,
          mask: null,
          maskContentUnits: null,
          maskUnits: null,
          mathematical: null,
          max: null,
          media: null,
          mediaCharacterEncoding: null,
          mediaContentEncodings: null,
          mediaSize: f,
          mediaTime: null,
          method: null,
          min: null,
          mode: null,
          name: null,
          navDown: null,
          navDownLeft: null,
          navDownRight: null,
          navLeft: null,
          navNext: null,
          navPrev: null,
          navRight: null,
          navUp: null,
          navUpLeft: null,
          navUpRight: null,
          numOctaves: null,
          observer: null,
          offset: null,
          onAbort: null,
          onActivate: null,
          onAfterPrint: null,
          onBeforePrint: null,
          onBegin: null,
          onCancel: null,
          onCanPlay: null,
          onCanPlayThrough: null,
          onChange: null,
          onClick: null,
          onClose: null,
          onCopy: null,
          onCueChange: null,
          onCut: null,
          onDblClick: null,
          onDrag: null,
          onDragEnd: null,
          onDragEnter: null,
          onDragExit: null,
          onDragLeave: null,
          onDragOver: null,
          onDragStart: null,
          onDrop: null,
          onDurationChange: null,
          onEmptied: null,
          onEnd: null,
          onEnded: null,
          onError: null,
          onFocus: null,
          onFocusIn: null,
          onFocusOut: null,
          onHashChange: null,
          onInput: null,
          onInvalid: null,
          onKeyDown: null,
          onKeyPress: null,
          onKeyUp: null,
          onLoad: null,
          onLoadedData: null,
          onLoadedMetadata: null,
          onLoadStart: null,
          onMessage: null,
          onMouseDown: null,
          onMouseEnter: null,
          onMouseLeave: null,
          onMouseMove: null,
          onMouseOut: null,
          onMouseOver: null,
          onMouseUp: null,
          onMouseWheel: null,
          onOffline: null,
          onOnline: null,
          onPageHide: null,
          onPageShow: null,
          onPaste: null,
          onPause: null,
          onPlay: null,
          onPlaying: null,
          onPopState: null,
          onProgress: null,
          onRateChange: null,
          onRepeat: null,
          onReset: null,
          onResize: null,
          onScroll: null,
          onSeeked: null,
          onSeeking: null,
          onSelect: null,
          onShow: null,
          onStalled: null,
          onStorage: null,
          onSubmit: null,
          onSuspend: null,
          onTimeUpdate: null,
          onToggle: null,
          onUnload: null,
          onVolumeChange: null,
          onWaiting: null,
          onZoom: null,
          opacity: null,
          operator: null,
          order: null,
          orient: null,
          orientation: null,
          origin: null,
          overflow: null,
          overlay: null,
          overlinePosition: f,
          overlineThickness: f,
          paintOrder: null,
          panose1: null,
          path: null,
          pathLength: f,
          patternContentUnits: null,
          patternTransform: null,
          patternUnits: null,
          phase: null,
          ping: g,
          pitch: null,
          playbackOrder: null,
          pointerEvents: null,
          points: null,
          pointsAtX: f,
          pointsAtY: f,
          pointsAtZ: f,
          preserveAlpha: null,
          preserveAspectRatio: null,
          primitiveUnits: null,
          propagate: null,
          property: v,
          r: null,
          radius: null,
          referrerPolicy: null,
          refX: null,
          refY: null,
          rel: v,
          rev: v,
          renderingIntent: null,
          repeatCount: null,
          repeatDur: null,
          requiredExtensions: v,
          requiredFeatures: v,
          requiredFonts: v,
          requiredFormats: v,
          resource: null,
          restart: null,
          result: null,
          rotate: null,
          rx: null,
          ry: null,
          scale: null,
          seed: null,
          shapeRendering: null,
          side: null,
          slope: null,
          snapshotTime: null,
          specularConstant: f,
          specularExponent: f,
          spreadMethod: null,
          spacing: null,
          startOffset: null,
          stdDeviation: null,
          stemh: null,
          stemv: null,
          stitchTiles: null,
          stopColor: null,
          stopOpacity: null,
          strikethroughPosition: f,
          strikethroughThickness: f,
          string: null,
          stroke: null,
          strokeDashArray: v,
          strokeDashOffset: null,
          strokeLineCap: null,
          strokeLineJoin: null,
          strokeMiterLimit: f,
          strokeOpacity: f,
          strokeWidth: null,
          style: null,
          surfaceScale: f,
          syncBehavior: null,
          syncBehaviorDefault: null,
          syncMaster: null,
          syncTolerance: null,
          syncToleranceDefault: null,
          systemLanguage: v,
          tabIndex: f,
          tableValues: null,
          target: null,
          targetX: f,
          targetY: f,
          textAnchor: null,
          textDecoration: null,
          textRendering: null,
          textLength: null,
          timelineBegin: null,
          title: null,
          transformBehavior: null,
          type: null,
          typeOf: v,
          to: null,
          transform: null,
          u1: null,
          u2: null,
          underlinePosition: f,
          underlineThickness: f,
          unicode: null,
          unicodeBidi: null,
          unicodeRange: null,
          unitsPerEm: f,
          values: null,
          vAlphabetic: f,
          vMathematical: f,
          vectorEffect: null,
          vHanging: f,
          vIdeographic: f,
          version: null,
          vertAdvY: f,
          vertOriginX: f,
          vertOriginY: f,
          viewBox: null,
          viewTarget: null,
          visibility: null,
          width: null,
          widths: null,
          wordSpacing: null,
          writingMode: null,
          x: null,
          x1: null,
          x2: null,
          xChannelSelector: null,
          xHeight: f,
          y: null,
          y1: null,
          y2: null,
          yChannelSelector: null,
          z: null,
          zoomAndPan: null,
        },
      }),
      $ = T([F, R, B, V, z], "html"),
      U = T([F, R, B, V, H], "svg");
    var G = e.i(722365),
      W = e.i(518043);
    let q = W.default.default || W.default,
      Z = Y("end"),
      K = Y("start");
    function Y(e) {
      return t;
      function t(t) {
        let n = (t && t.position && t.position[e]) || {};
        if (
          "number" == typeof n.line &&
          n.line > 0 &&
          "number" == typeof n.column &&
          n.column > 0
        )
          return {
            line: n.line,
            column: n.column,
            offset:
              "number" == typeof n.offset && n.offset > -1 ? n.offset : void 0,
          };
      }
    }
    function J(e) {
      let t = K(e),
        n = Z(e);
      if (t && n) return { start: t, end: n };
    }
    function Q(e) {
      return e && "object" == typeof e
        ? "position" in e || "type" in e
          ? ee(e.position)
          : "start" in e || "end" in e
            ? ee(e)
            : "line" in e || "column" in e
              ? X(e)
              : ""
        : "";
    }
    function X(e) {
      return et(e && e.line) + ":" + et(e && e.column);
    }
    function ee(e) {
      return X(e && e.start) + "-" + X(e && e.end);
    }
    function et(e) {
      return e && "number" == typeof e ? e : 1;
    }
    class en extends Error {
      constructor(e, t, n) {
        (super(), "string" == typeof t && ((n = t), (t = void 0)));
        let r = "",
          i = {},
          s = !1;
        if (
          (t &&
            (i =
              ("line" in t && "column" in t) || ("start" in t && "end" in t)
                ? { place: t }
                : "type" in t
                  ? { ancestors: [t], place: t.position }
                  : { ...t }),
          "string" == typeof e
            ? (r = e)
            : !i.cause && e && ((s = !0), (r = e.message), (i.cause = e)),
          !i.ruleId && !i.source && "string" == typeof n)
        ) {
          const e = n.indexOf(":");
          -1 === e
            ? (i.ruleId = n)
            : ((i.source = n.slice(0, e)), (i.ruleId = n.slice(e + 1)));
        }
        if (!i.place && i.ancestors && i.ancestors) {
          const e = i.ancestors[i.ancestors.length - 1];
          e && (i.place = e.position);
        }
        const a = i.place && "start" in i.place ? i.place.start : i.place;
        ((this.ancestors = i.ancestors || void 0),
          (this.cause = i.cause || void 0),
          (this.column = a ? a.column : void 0),
          (this.fatal = void 0),
          this.file,
          (this.message = r),
          (this.line = a ? a.line : void 0),
          (this.name = Q(i.place) || "1:1"),
          (this.place = i.place || void 0),
          (this.reason = this.message),
          (this.ruleId = i.ruleId || void 0),
          (this.source = i.source || void 0),
          (this.stack =
            s && i.cause && "string" == typeof i.cause.stack
              ? i.cause.stack
              : ""),
          this.actual,
          this.expected,
          this.note,
          this.url);
      }
    }
    ((en.prototype.file = ""),
      (en.prototype.name = ""),
      (en.prototype.reason = ""),
      (en.prototype.message = ""),
      (en.prototype.stack = ""),
      (en.prototype.column = void 0),
      (en.prototype.line = void 0),
      (en.prototype.ancestors = void 0),
      (en.prototype.cause = void 0),
      (en.prototype.fatal = void 0),
      (en.prototype.place = void 0),
      (en.prototype.ruleId = void 0),
      (en.prototype.source = void 0));
    let er = {}.hasOwnProperty,
      ei = new Map(),
      es = /[A-Z]/g,
      ea = /-([a-z])/g,
      eo = new Set(["table", "tbody", "thead", "tfoot", "tr"]),
      el = new Set(["td", "th"]),
      ec = "https://github.com/syntax-tree/hast-util-to-jsx-runtime";
    function eu(e, t) {
      let n;
      if (!t || void 0 === t.Fragment)
        throw TypeError("Expected `Fragment` in options");
      let r = t.filePath || void 0;
      if (t.development) {
        if ("function" != typeof t.jsxDEV)
          throw TypeError(
            "Expected `jsxDEV` in options when `development: true`",
          );
        n = ej(r, t.jsxDEV);
      } else {
        if ("function" != typeof t.jsx)
          throw TypeError("Expected `jsx` in production options");
        if ("function" != typeof t.jsxs)
          throw TypeError("Expected `jsxs` in production options");
        n = eb(r, t.jsx, t.jsxs);
      }
      let i = {
          Fragment: t.Fragment,
          ancestors: [],
          components: t.components || {},
          create: n,
          elementAttributeNameCase: t.elementAttributeNameCase || "react",
          evaluater: t.createEvaluater ? t.createEvaluater() : void 0,
          filePath: r,
          ignoreInvalidStyle: t.ignoreInvalidStyle || !1,
          passKeys: !1 !== t.passKeys,
          passNode: t.passNode || !1,
          schema: "svg" === t.space ? U : $,
          stylePropertyNameCase: t.stylePropertyNameCase || "dom",
          tableCellAlignToStyle: !1 !== t.tableCellAlignToStyle,
        },
        s = ed(i, e, void 0);
      return s && "string" != typeof s
        ? s
        : i.create(e, i.Fragment, { children: s || void 0 }, void 0);
    }
    function ed(e, t, n) {
      return "element" === t.type
        ? eh(e, t, n)
        : "mdxFlowExpression" === t.type || "mdxTextExpression" === t.type
          ? ep(e, t)
          : "mdxJsxFlowElement" === t.type || "mdxJsxTextElement" === t.type
            ? ef(e, t, n)
            : "mdxjsEsm" === t.type
              ? em(e, t)
              : "root" === t.type
                ? eg(e, t, n)
                : "text" === t.type
                  ? ex(e, t)
                  : void 0;
    }
    function eh(e, t, n) {
      let r = e.schema;
      ("svg" === t.tagName.toLowerCase() &&
        "html" === r.space &&
        (e.schema = U),
        e.ancestors.push(t));
      let i = eE(e, t.tagName, !1),
        s = ew(e, t),
        a = ek(e, t);
      return (
        eo.has(t.tagName) &&
          (a = a.filter(function (e) {
            return "string" != typeof e || !(0, l.whitespace)(e);
          })),
        ev(e, s, i, t),
        ey(s, a),
        e.ancestors.pop(),
        (e.schema = r),
        e.create(t, i, s, n)
      );
    }
    function ep(e, n) {
      if (n.data && n.data.estree && e.evaluater) {
        let r = n.data.estree.body[0];
        return (
          t("ExpressionStatement" === r.type),
          e.evaluater.evaluateExpression(r.expression)
        );
      }
      eA(e, n.position);
    }
    function em(e, t) {
      if (t.data && t.data.estree && e.evaluater)
        return e.evaluater.evaluateProgram(t.data.estree);
      eA(e, t.position);
    }
    function ef(e, t, n) {
      let r = e.schema;
      ("svg" === t.name && "html" === r.space && (e.schema = U),
        e.ancestors.push(t));
      let i = null === t.name ? e.Fragment : eE(e, t.name, !0),
        s = eC(e, t),
        a = ek(e, t);
      return (
        ev(e, s, i, t),
        ey(s, a),
        e.ancestors.pop(),
        (e.schema = r),
        e.create(t, i, s, n)
      );
    }
    function eg(e, t, n) {
      let r = {};
      return (ey(r, ek(e, t)), e.create(t, e.Fragment, r, n));
    }
    function ex(e, t) {
      return t.value;
    }
    function ev(e, t, n, r) {
      "string" != typeof n && n !== e.Fragment && e.passNode && (t.node = r);
    }
    function ey(e, t) {
      if (t.length > 0) {
        let n = t.length > 1 ? t : t[0];
        n && (e.children = n);
      }
    }
    function eb(e, t, n) {
      return r;
      function r(e, r, i, s) {
        let a = Array.isArray(i.children) ? n : t;
        return s ? a(r, i, s) : a(r, i);
      }
    }
    function ej(e, t) {
      return n;
      function n(n, r, i, s) {
        let a = Array.isArray(i.children),
          o = K(n);
        return t(
          r,
          i,
          s,
          a,
          {
            columnNumber: o ? o.column - 1 : void 0,
            fileName: e,
            lineNumber: o ? o.line : void 0,
          },
          void 0,
        );
      }
    }
    function ew(e, t) {
      let n,
        r,
        i = {};
      for (r in t.properties)
        if ("children" !== r && er.call(t.properties, r)) {
          let s = eS(e, r, t.properties[r]);
          if (s) {
            let [r, a] = s;
            e.tableCellAlignToStyle &&
            "align" === r &&
            "string" == typeof a &&
            el.has(t.tagName)
              ? (n = a)
              : (i[r] = a);
          }
        }
      return (
        n &&
          ((i.style || (i.style = {}))[
            "css" === e.stylePropertyNameCase ? "text-align" : "textAlign"
          ] = n),
        i
      );
    }
    function eC(e, n) {
      let r = {};
      for (let i of n.attributes)
        if ("mdxJsxExpressionAttribute" === i.type)
          if (i.data && i.data.estree && e.evaluater) {
            let n = i.data.estree.body[0];
            t("ExpressionStatement" === n.type);
            let s = n.expression;
            t("ObjectExpression" === s.type);
            let a = s.properties[0];
            (t("SpreadElement" === a.type),
              Object.assign(r, e.evaluater.evaluateExpression(a.argument)));
          } else eA(e, n.position);
        else {
          let s,
            a = i.name;
          if (i.value && "object" == typeof i.value)
            if (i.value.data && i.value.data.estree && e.evaluater) {
              let n = i.value.data.estree.body[0];
              (t("ExpressionStatement" === n.type),
                (s = e.evaluater.evaluateExpression(n.expression)));
            } else eA(e, n.position);
          else s = null === i.value || i.value;
          r[a] = s;
        }
      return r;
    }
    function ek(e, t) {
      let n = [],
        r = -1,
        i = e.passKeys ? new Map() : ei;
      for (; ++r < t.children.length; ) {
        let s,
          a = t.children[r];
        if (e.passKeys) {
          let e =
            "element" === a.type
              ? a.tagName
              : "mdxJsxFlowElement" === a.type || "mdxJsxTextElement" === a.type
                ? a.name
                : void 0;
          if (e) {
            let t = i.get(e) || 0;
            ((s = e + "-" + t), i.set(e, t + 1));
          }
        }
        let o = ed(e, a, s);
        void 0 !== o && n.push(o);
      }
      return n;
    }
    function eS(e, t, n) {
      let i = E(e.schema, t);
      if (!(null == n || ("number" == typeof n && Number.isNaN(n)))) {
        if (
          (Array.isArray(n) &&
            (n = i.commaSeparated ? (0, r.stringify)(n) : (0, G.stringify)(n)),
          "style" === i.property)
        ) {
          let t = "object" == typeof n ? n : eN(e, String(n));
          return (
            "css" === e.stylePropertyNameCase && (t = eD(t)),
            ["style", t]
          );
        }
        return [
          "react" === e.elementAttributeNameCase && i.space
            ? I[i.property] || i.property
            : i.attribute,
          n,
        ];
      }
    }
    function eN(e, t) {
      let n = {};
      try {
        q(t, r);
      } catch (t) {
        if (!e.ignoreInvalidStyle) {
          let n = t,
            r = new en("Cannot parse `style` attribute", {
              ancestors: e.ancestors,
              cause: n,
              ruleId: "style",
              source: "hast-util-to-jsx-runtime",
            });
          throw (
            (r.file = e.filePath || void 0),
            (r.url = ec + "#cannot-parse-style-attribute"),
            r
          );
        }
      }
      return n;
      function r(e, t) {
        let r = e;
        ("--" !== r.slice(0, 2) &&
          ("-ms-" === r.slice(0, 4) && (r = "ms-" + r.slice(4)),
          (r = r.replace(ea, eM))),
          (n[r] = t));
      }
    }
    function eE(e, n, r) {
      let i;
      if (r)
        if (n.includes(".")) {
          let e,
            r = n.split("."),
            s = -1;
          for (; ++s < r.length; ) {
            let t = o(r[s])
              ? { type: "Identifier", name: r[s] }
              : { type: "Literal", value: r[s] };
            e = e
              ? {
                  type: "MemberExpression",
                  object: e,
                  property: t,
                  computed: !!(s && "Literal" === t.type),
                  optional: !1,
                }
              : t;
          }
          (t(e, "always a result"), (i = e));
        } else
          i =
            o(n) && !/^[a-z]/.test(n)
              ? { type: "Identifier", name: n }
              : { type: "Literal", value: n };
      else i = { type: "Literal", value: n };
      if ("Literal" === i.type) {
        let t = i.value;
        return er.call(e.components, t) ? e.components[t] : t;
      }
      if (e.evaluater) return e.evaluater.evaluateExpression(i);
      eA(e);
    }
    function eA(e, t) {
      let n = new en("Cannot handle MDX estrees without `createEvaluater`", {
        ancestors: e.ancestors,
        place: t,
        ruleId: "mdx-estree",
        source: "hast-util-to-jsx-runtime",
      });
      throw (
        (n.file = e.filePath || void 0),
        (n.url = ec + "#cannot-handle-mdx-estrees-without-createevaluater"),
        n
      );
    }
    function eD(e) {
      let t,
        n = {};
      for (t in e) er.call(e, t) && (n[eI(t)] = e[t]);
      return n;
    }
    function eI(e) {
      let t = e.replace(es, eT);
      return ("ms-" === t.slice(0, 3) && (t = "-" + t), t);
    }
    function eM(e, t) {
      return t.toUpperCase();
    }
    function eT(e) {
      return "-" + e.toLowerCase();
    }
    let eL = {
      action: ["form"],
      cite: ["blockquote", "del", "ins", "q"],
      data: ["object"],
      formAction: ["button", "input"],
      href: ["a", "area", "base", "link"],
      icon: ["menuitem"],
      itemId: null,
      manifest: ["html"],
      ping: ["a", "area"],
      poster: ["video"],
      src: [
        "audio",
        "embed",
        "iframe",
        "img",
        "input",
        "script",
        "source",
        "track",
        "video",
      ],
    };
    var eP = e.i(324834);
    let eR = {};
    function eF(e, t) {
      let n = t || eR;
      return e_(
        e,
        "boolean" != typeof n.includeImageAlt || n.includeImageAlt,
        "boolean" != typeof n.includeHtml || n.includeHtml,
      );
    }
    function e_(e, t, n) {
      if (eB(e)) {
        if ("value" in e) return "html" !== e.type || n ? e.value : "";
        if (t && "alt" in e && e.alt) return e.alt;
        if ("children" in e) return eO(e.children, t, n);
      }
      return Array.isArray(e) ? eO(e, t, n) : "";
    }
    function eO(e, t, n) {
      let r = [],
        i = -1;
      for (; ++i < e.length; ) r[i] = e_(e[i], t, n);
      return r.join("");
    }
    function eB(e) {
      return !!(e && "object" == typeof e);
    }
    function eV(e, t, n, r) {
      let i,
        s = e.length,
        a = 0;
      if (
        ((t = t < 0 ? (-t > s ? 0 : s + t) : t > s ? s : t),
        (n = n > 0 ? n : 0),
        r.length < 1e4)
      )
        ((i = Array.from(r)).unshift(t, n), e.splice(...i));
      else
        for (n && e.splice(t, n); a < r.length; )
          ((i = r.slice(a, a + 1e4)).unshift(t, 0),
            e.splice(...i),
            (a += 1e4),
            (t += 1e4));
    }
    function ez(e, t) {
      return e.length > 0 ? (eV(e, e.length, 0, t), e) : t;
    }
    (e.s(["toString", () => eF], 12105),
      e.s(["push", () => ez, "splice", () => eV], 212470));
    let eH = {}.hasOwnProperty;
    function e$(e) {
      let t = {},
        n = -1;
      for (; ++n < e.length; ) eU(t, e[n]);
      return t;
    }
    function eU(e, t) {
      let n;
      for (n in t) {
        let r,
          i = (eH.call(e, n) ? e[n] : void 0) || (e[n] = {}),
          s = t[n];
        if (s)
          for (r in s) {
            eH.call(i, r) || (i[r] = []);
            let e = s[r];
            eG(i[r], Array.isArray(e) ? e : e ? [e] : []);
          }
      }
    }
    function eG(e, t) {
      let n = -1,
        r = [];
      for (; ++n < t.length; ) ("after" === t[n].add ? e : r).push(t[n]);
      eV(e, 0, 0, r);
    }
    function eW(e) {
      let t = {},
        n = -1;
      for (; ++n < e.length; ) eq(t, e[n]);
      return t;
    }
    function eq(e, t) {
      let n;
      for (n in t) {
        let r,
          i = (eH.call(e, n) ? e[n] : void 0) || (e[n] = {}),
          s = t[n];
        if (s) for (r in s) i[r] = s[r];
      }
    }
    e.s(
      ["combineExtensions", () => e$, "combineHtmlExtensions", () => eW],
      872238,
    );
    let eZ = e9(/[A-Za-z]/),
      eK = e9(/[\dA-Za-z]/),
      eY = e9(/[#-'*+\--9=?A-Z^-~]/);
    function eJ(e) {
      return null !== e && (e < 32 || 127 === e);
    }
    let eQ = e9(/\d/),
      eX = e9(/[\dA-Fa-f]/),
      e0 = e9(/[!-/:-@[-`{-~]/);
    function e1(e) {
      return null !== e && e < -2;
    }
    function e2(e) {
      return null !== e && (e < 0 || 32 === e);
    }
    function e5(e) {
      return -2 === e || -1 === e || 32 === e;
    }
    let e3 = e9(/\p{P}|\p{S}/u),
      e4 = e9(/\s/);
    function e9(e) {
      return t;
      function t(t) {
        return null !== t && t > -1 && e.test(String.fromCharCode(t));
      }
    }
    function e7(e, t, n, r) {
      let i = r ? r - 1 : 1 / 0,
        s = 0;
      return a;
      function a(r) {
        return e5(r) ? (e.enter(n), o(r)) : t(r);
      }
      function o(r) {
        return e5(r) && s++ < i ? (e.consume(r), o) : (e.exit(n), t(r));
      }
    }
    (e.s(
      [
        "asciiAlpha",
        0,
        eZ,
        "asciiAlphanumeric",
        0,
        eK,
        "asciiAtext",
        0,
        eY,
        "asciiControl",
        () => eJ,
        "asciiDigit",
        0,
        eQ,
        "asciiHexDigit",
        0,
        eX,
        "asciiPunctuation",
        0,
        e0,
        "markdownLineEnding",
        () => e1,
        "markdownLineEndingOrSpace",
        () => e2,
        "markdownSpace",
        () => e5,
        "unicodePunctuation",
        0,
        e3,
        "unicodeWhitespace",
        0,
        e4,
      ],
      346863,
    ),
      e.s(["factorySpace", () => e7], 540795));
    let e6 = { tokenize: e8 };
    function e8(e) {
      let t,
        n = e.attempt(this.parser.constructs.contentInitial, r, i);
      return n;
      function r(t) {
        return null === t
          ? void e.consume(t)
          : (e.enter("lineEnding"),
            e.consume(t),
            e.exit("lineEnding"),
            e7(e, n, "linePrefix"));
      }
      function i(t) {
        return (e.enter("paragraph"), s(t));
      }
      function s(n) {
        let r = e.enter("chunkText", { contentType: "text", previous: t });
        return (t && (t.next = r), (t = r), a(n));
      }
      function a(t) {
        if (null === t) {
          (e.exit("chunkText"), e.exit("paragraph"), e.consume(t));
          return;
        }
        return e1(t)
          ? (e.consume(t), e.exit("chunkText"), s)
          : (e.consume(t), a);
      }
    }
    let te = { tokenize: tn },
      tt = { tokenize: tr };
    function tn(e) {
      let t,
        n,
        r,
        i = this,
        s = [],
        a = 0;
      return o;
      function o(t) {
        if (a < s.length) {
          let n = s[a];
          return (
            (i.containerState = n[1]),
            e.attempt(n[0].continuation, l, c)(t)
          );
        }
        return c(t);
      }
      function l(e) {
        if ((a++, i.containerState._closeFlow)) {
          let n;
          ((i.containerState._closeFlow = void 0), t && v());
          let r = i.events.length,
            s = r;
          for (; s--; )
            if (
              "exit" === i.events[s][0] &&
              "chunkFlow" === i.events[s][1].type
            ) {
              n = i.events[s][1].end;
              break;
            }
          x(a);
          let o = r;
          for (; o < i.events.length; )
            ((i.events[o][1].end = Object.assign({}, n)), o++);
          return (
            eV(i.events, s + 1, 0, i.events.slice(r)),
            (i.events.length = o),
            c(e)
          );
        }
        return o(e);
      }
      function c(n) {
        if (a === s.length) {
          if (!t) return h(n);
          if (t.currentConstruct && t.currentConstruct.concrete) return m(n);
          i.interrupt = !!(
            t.currentConstruct && !t._gfmTableDynamicInterruptHack
          );
        }
        return ((i.containerState = {}), e.check(tt, u, d)(n));
      }
      function u(e) {
        return (t && v(), x(a), h(e));
      }
      function d(e) {
        return (
          (i.parser.lazy[i.now().line] = a !== s.length),
          (r = i.now().offset),
          m(e)
        );
      }
      function h(t) {
        return ((i.containerState = {}), e.attempt(tt, p, m)(t));
      }
      function p(e) {
        return (a++, s.push([i.currentConstruct, i.containerState]), h(e));
      }
      function m(r) {
        if (null === r) {
          (t && v(), x(0), e.consume(r));
          return;
        }
        return (
          (t = t || i.parser.flow(i.now())),
          e.enter("chunkFlow", {
            contentType: "flow",
            previous: n,
            _tokenizer: t,
          }),
          f(r)
        );
      }
      function f(t) {
        if (null === t) {
          (g(e.exit("chunkFlow"), !0), x(0), e.consume(t));
          return;
        }
        return e1(t)
          ? (e.consume(t),
            g(e.exit("chunkFlow")),
            (a = 0),
            (i.interrupt = void 0),
            o)
          : (e.consume(t), f);
      }
      function g(e, s) {
        let o = i.sliceStream(e);
        if (
          (s && o.push(null),
          (e.previous = n),
          n && (n.next = e),
          (n = e),
          t.defineSkip(e.start),
          t.write(o),
          i.parser.lazy[e.start.line])
        ) {
          let e,
            n,
            s = t.events.length;
          for (; s--; )
            if (
              t.events[s][1].start.offset < r &&
              (!t.events[s][1].end || t.events[s][1].end.offset > r)
            )
              return;
          let o = i.events.length,
            l = o;
          for (; l--; )
            if (
              "exit" === i.events[l][0] &&
              "chunkFlow" === i.events[l][1].type
            ) {
              if (e) {
                n = i.events[l][1].end;
                break;
              }
              e = !0;
            }
          for (x(a), s = o; s < i.events.length; )
            ((i.events[s][1].end = Object.assign({}, n)), s++);
          (eV(i.events, l + 1, 0, i.events.slice(o)), (i.events.length = s));
        }
      }
      function x(t) {
        let n = s.length;
        for (; n-- > t; ) {
          let t = s[n];
          ((i.containerState = t[1]), t[0].exit.call(i, e));
        }
        s.length = t;
      }
      function v() {
        (t.write([null]),
          (n = void 0),
          (t = void 0),
          (i.containerState._closeFlow = void 0));
      }
    }
    function tr(e, t, n) {
      return e7(
        e,
        e.attempt(this.parser.constructs.document, t, n),
        "linePrefix",
        this.parser.constructs.disable.null.includes("codeIndented")
          ? void 0
          : 4,
      );
    }
    let ti = { tokenize: ts, partial: !0 };
    function ts(e, t, n) {
      return r;
      function r(t) {
        return e5(t) ? e7(e, i, "linePrefix")(t) : i(t);
      }
      function i(e) {
        return null === e || e1(e) ? t(e) : n(e);
      }
    }
    e.s(["blankLine", 0, ti], 434036);
    class ta {
      constructor(e) {
        ((this.left = e ? [...e] : []), (this.right = []));
      }
      get(e) {
        if (e < 0 || e >= this.left.length + this.right.length)
          throw RangeError(
            "Cannot access index `" +
              e +
              "` in a splice buffer of size `" +
              (this.left.length + this.right.length) +
              "`",
          );
        return e < this.left.length
          ? this.left[e]
          : this.right[this.right.length - e + this.left.length - 1];
      }
      get length() {
        return this.left.length + this.right.length;
      }
      shift() {
        return (this.setCursor(0), this.right.pop());
      }
      slice(e, t) {
        let n = null == t ? 1 / 0 : t;
        return n < this.left.length
          ? this.left.slice(e, n)
          : e > this.left.length
            ? this.right
                .slice(
                  this.right.length - n + this.left.length,
                  this.right.length - e + this.left.length,
                )
                .reverse()
            : this.left
                .slice(e)
                .concat(
                  this.right
                    .slice(this.right.length - n + this.left.length)
                    .reverse(),
                );
      }
      splice(e, t, n) {
        let r = t || 0;
        this.setCursor(Math.trunc(e));
        let i = this.right.splice(this.right.length - r, 1 / 0);
        return (n && to(this.left, n), i.reverse());
      }
      pop() {
        return (this.setCursor(1 / 0), this.left.pop());
      }
      push(e) {
        (this.setCursor(1 / 0), this.left.push(e));
      }
      pushMany(e) {
        (this.setCursor(1 / 0), to(this.left, e));
      }
      unshift(e) {
        (this.setCursor(0), this.right.push(e));
      }
      unshiftMany(e) {
        (this.setCursor(0), to(this.right, e.reverse()));
      }
      setCursor(e) {
        if (
          e !== this.left.length &&
          (!(e > this.left.length) || 0 !== this.right.length) &&
          (!(e < 0) || 0 !== this.left.length)
        )
          if (e < this.left.length) {
            let t = this.left.splice(e, 1 / 0);
            to(this.right, t.reverse());
          } else {
            let t = this.right.splice(
              this.left.length + this.right.length - e,
              1 / 0,
            );
            to(this.left, t.reverse());
          }
      }
    }
    function to(e, t) {
      let n = 0;
      if (t.length < 1e4) e.push(...t);
      else for (; n < t.length; ) (e.push(...t.slice(n, n + 1e4)), (n += 1e4));
    }
    function tl(e) {
      let t,
        n,
        r,
        i,
        s,
        a,
        o,
        l = {},
        c = -1,
        u = new ta(e);
      for (; ++c < u.length; ) {
        for (; c in l; ) c = l[c];
        if (
          ((t = u.get(c)),
          c &&
            "chunkFlow" === t[1].type &&
            "listItemPrefix" === u.get(c - 1)[1].type &&
            ((r = 0) < (a = t[1]._tokenizer.events).length &&
              "lineEndingBlank" === a[r][1].type &&
              (r += 2),
            r < a.length && "content" === a[r][1].type))
        )
          for (; ++r < a.length && "content" !== a[r][1].type; )
            "chunkText" === a[r][1].type &&
              ((a[r][1]._isInFirstContentOfListItem = !0), r++);
        if ("enter" === t[0])
          t[1].contentType &&
            (Object.assign(l, tc(u, c)), (c = l[c]), (o = !0));
        else if (t[1]._container) {
          for (r = c, n = void 0; r--; )
            if (
              "lineEnding" === (i = u.get(r))[1].type ||
              "lineEndingBlank" === i[1].type
            )
              "enter" === i[0] &&
                (n && (u.get(n)[1].type = "lineEndingBlank"),
                (i[1].type = "lineEnding"),
                (n = r));
            else break;
          n &&
            ((t[1].end = Object.assign({}, u.get(n)[1].start)),
            (s = u.slice(n, c)).unshift(t),
            u.splice(n, c - n + 1, s));
        }
      }
      return (eV(e, 0, 1 / 0, u.slice(0)), !o);
    }
    function tc(e, t) {
      let n,
        r,
        i = e.get(t)[1],
        s = e.get(t)[2],
        a = t - 1,
        o = [],
        l = i._tokenizer || s.parser[i.contentType](i.start),
        c = l.events,
        u = [],
        d = {},
        h = -1,
        p = i,
        m = 0,
        f = 0,
        g = [0];
      for (; p; ) {
        for (; e.get(++a)[1] !== p; );
        (o.push(a),
          !p._tokenizer &&
            ((n = s.sliceStream(p)),
            p.next || n.push(null),
            r && l.defineSkip(p.start),
            p._isInFirstContentOfListItem &&
              (l._gfmTasklistFirstContentOfListItem = !0),
            l.write(n),
            p._isInFirstContentOfListItem &&
              (l._gfmTasklistFirstContentOfListItem = void 0)),
          (r = p),
          (p = p.next));
      }
      for (p = i; ++h < c.length; )
        "exit" === c[h][0] &&
          "enter" === c[h - 1][0] &&
          c[h][1].type === c[h - 1][1].type &&
          c[h][1].start.line !== c[h][1].end.line &&
          ((f = h + 1),
          g.push(f),
          (p._tokenizer = void 0),
          (p.previous = void 0),
          (p = p.next));
      for (
        l.events = [],
          p ? ((p._tokenizer = void 0), (p.previous = void 0)) : g.pop(),
          h = g.length;
        h--;

      ) {
        let t = c.slice(g[h], g[h + 1]),
          n = o.pop();
        (u.push([n, n + t.length - 1]), e.splice(n, 2, t));
      }
      for (u.reverse(), h = -1; ++h < u.length; )
        ((d[m + u[h][0]] = m + u[h][1]), (m += u[h][1] - u[h][0] - 1));
      return d;
    }
    let tu = { tokenize: tp, resolve: th },
      td = { tokenize: tm, partial: !0 };
    function th(e) {
      return (tl(e), e);
    }
    function tp(e, t) {
      let n;
      return r;
      function r(t) {
        return (
          e.enter("content"),
          (n = e.enter("chunkContent", { contentType: "content" })),
          i(t)
        );
      }
      function i(t) {
        return null === t
          ? s(t)
          : e1(t)
            ? e.check(td, a, s)(t)
            : (e.consume(t), i);
      }
      function s(n) {
        return (e.exit("chunkContent"), e.exit("content"), t(n));
      }
      function a(t) {
        return (
          e.consume(t),
          e.exit("chunkContent"),
          (n.next = e.enter("chunkContent", {
            contentType: "content",
            previous: n,
          })),
          (n = n.next),
          i
        );
      }
    }
    function tm(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return (
          e.exit("chunkContent"),
          e.enter("lineEnding"),
          e.consume(t),
          e.exit("lineEnding"),
          e7(e, s, "linePrefix")
        );
      }
      function s(i) {
        if (null === i || e1(i)) return n(i);
        let s = r.events[r.events.length - 1];
        return !r.parser.constructs.disable.null.includes("codeIndented") &&
          s &&
          "linePrefix" === s[1].type &&
          s[2].sliceSerialize(s[1], !0).length >= 4
          ? t(i)
          : e.interrupt(r.parser.constructs.flow, n, t)(i);
      }
    }
    let tf = { tokenize: tg };
    function tg(e) {
      let t = this,
        n = e.attempt(
          ti,
          r,
          e.attempt(
            this.parser.constructs.flowInitial,
            i,
            e7(
              e,
              e.attempt(this.parser.constructs.flow, i, e.attempt(tu, i)),
              "linePrefix",
            ),
          ),
        );
      return n;
      function r(r) {
        return null === r
          ? void e.consume(r)
          : (e.enter("lineEndingBlank"),
            e.consume(r),
            e.exit("lineEndingBlank"),
            (t.currentConstruct = void 0),
            n);
      }
      function i(r) {
        return null === r
          ? void e.consume(r)
          : (e.enter("lineEnding"),
            e.consume(r),
            e.exit("lineEnding"),
            (t.currentConstruct = void 0),
            n);
      }
    }
    let tx = { resolveAll: tj() },
      tv = tb("string"),
      ty = tb("text");
    function tb(e) {
      return { tokenize: t, resolveAll: tj("text" === e ? tw : void 0) };
      function t(t) {
        let n = this,
          r = this.parser.constructs[e],
          i = t.attempt(r, s, a);
        return s;
        function s(e) {
          return l(e) ? i(e) : a(e);
        }
        function a(e) {
          return null === e
            ? void t.consume(e)
            : (t.enter("data"), t.consume(e), o);
        }
        function o(e) {
          return l(e) ? (t.exit("data"), i(e)) : (t.consume(e), o);
        }
        function l(e) {
          if (null === e) return !0;
          let t = r[e],
            i = -1;
          if (t)
            for (; ++i < t.length; ) {
              let e = t[i];
              if (!e.previous || e.previous.call(n, n.previous)) return !0;
            }
          return !1;
        }
      }
    }
    function tj(e) {
      return t;
      function t(t, n) {
        let r,
          i = -1;
        for (; ++i <= t.length; )
          void 0 === r
            ? t[i] && "data" === t[i][1].type && ((r = i), i++)
            : (t[i] && "data" === t[i][1].type) ||
              (i !== r + 2 &&
                ((t[r][1].end = t[i - 1][1].end),
                t.splice(r + 2, i - r - 2),
                (i = r + 2)),
              (r = void 0));
        return e ? e(t, n) : t;
      }
    }
    function tw(e, t) {
      let n = 0;
      for (; ++n <= e.length; )
        if (
          (n === e.length || "lineEnding" === e[n][1].type) &&
          "data" === e[n - 1][1].type
        ) {
          let r,
            i = e[n - 1][1],
            s = t.sliceStream(i),
            a = s.length,
            o = -1,
            l = 0;
          for (; a--; ) {
            let e = s[a];
            if ("string" == typeof e) {
              for (o = e.length; 32 === e.charCodeAt(o - 1); ) (l++, o--);
              if (o) break;
              o = -1;
            } else if (-2 === e) ((r = !0), l++);
            else if (-1 === e);
            else {
              a++;
              break;
            }
          }
          if (l) {
            let s = {
              type:
                n === e.length || r || l < 2
                  ? "lineSuffix"
                  : "hardBreakTrailing",
              start: {
                line: i.end.line,
                column: i.end.column - l,
                offset: i.end.offset - l,
                _index: i.start._index + a,
                _bufferIndex: a ? o : i.start._bufferIndex + o,
              },
              end: Object.assign({}, i.end),
            };
            ((i.end = Object.assign({}, s.start)),
              i.start.offset === i.end.offset
                ? Object.assign(i, s)
                : (e.splice(n, 0, ["enter", s, t], ["exit", s, t]), (n += 2)));
          }
          n++;
        }
      return e;
    }
    function tC(e, t, n) {
      let r = [],
        i = -1;
      for (; ++i < e.length; ) {
        let s = e[i].resolveAll;
        s && !r.includes(s) && ((t = s(t, n)), r.push(s));
      }
      return t;
    }
    function tk(e, t, n) {
      let r = Object.assign(
          n ? Object.assign({}, n) : { line: 1, column: 1, offset: 0 },
          { _index: 0, _bufferIndex: -1 },
        ),
        i = {},
        s = [],
        a = [],
        o = [],
        l = {
          consume: v,
          enter: y,
          exit: b,
          attempt: C(j),
          check: C(w),
          interrupt: C(w, { interrupt: !0 }),
        },
        c = {
          previous: null,
          code: null,
          containerState: {},
          events: [],
          parser: e,
          sliceStream: p,
          sliceSerialize: h,
          now: m,
          defineSkip: f,
          write: d,
        },
        u = t.tokenize.call(c, l);
      return (t.resolveAll && s.push(t), c);
      function d(e) {
        return ((a = ez(a, e)), g(), null !== a[a.length - 1])
          ? []
          : (k(t, 0), (c.events = tC(s, c.events, c)), c.events);
      }
      function h(e, t) {
        return tN(p(e), t);
      }
      function p(e) {
        return tS(a, e);
      }
      function m() {
        let { line: e, column: t, offset: n, _index: i, _bufferIndex: s } = r;
        return { line: e, column: t, offset: n, _index: i, _bufferIndex: s };
      }
      function f(e) {
        ((i[e.line] = e.column), N());
      }
      function g() {
        let e;
        for (; r._index < a.length; ) {
          let t = a[r._index];
          if ("string" == typeof t)
            for (
              e = r._index, r._bufferIndex < 0 && (r._bufferIndex = 0);
              r._index === e && r._bufferIndex < t.length;

            )
              x(t.charCodeAt(r._bufferIndex));
          else x(t);
        }
      }
      function x(e) {
        u = u(e);
      }
      function v(e) {
        (e1(e)
          ? (r.line++, (r.column = 1), (r.offset += -3 === e ? 2 : 1), N())
          : -1 !== e && (r.column++, r.offset++),
          r._bufferIndex < 0
            ? r._index++
            : (r._bufferIndex++,
              r._bufferIndex === a[r._index].length &&
                ((r._bufferIndex = -1), r._index++)),
          (c.previous = e));
      }
      function y(e, t) {
        let n = t || {};
        return (
          (n.type = e),
          (n.start = m()),
          c.events.push(["enter", n, c]),
          o.push(n),
          n
        );
      }
      function b(e) {
        let t = o.pop();
        return ((t.end = m()), c.events.push(["exit", t, c]), t);
      }
      function j(e, t) {
        k(e, t.from);
      }
      function w(e, t) {
        t.restore();
      }
      function C(e, t) {
        return n;
        function n(n, r, i) {
          let s, a, o, u;
          return Array.isArray(n) ? h(n) : "tokenize" in n ? h([n]) : d(n);
          function d(e) {
            return t;
            function t(t) {
              let n = null !== t && e[t],
                r = null !== t && e.null;
              return h([
                ...(Array.isArray(n) ? n : n ? [n] : []),
                ...(Array.isArray(r) ? r : r ? [r] : []),
              ])(t);
            }
          }
          function h(e) {
            return ((s = e), (a = 0), 0 === e.length) ? i : p(e[a]);
          }
          function p(e) {
            return n;
            function n(n) {
              return ((u = S()),
              (o = e),
              e.partial || (c.currentConstruct = e),
              e.name && c.parser.constructs.disable.null.includes(e.name))
                ? f(n)
                : e.tokenize.call(
                    t ? Object.assign(Object.create(c), t) : c,
                    l,
                    m,
                    f,
                  )(n);
            }
          }
          function m(t) {
            return (e(o, u), r);
          }
          function f(e) {
            return (u.restore(), ++a < s.length) ? p(s[a]) : i;
          }
        }
      }
      function k(e, t) {
        (e.resolveAll && !s.includes(e) && s.push(e),
          e.resolve &&
            eV(
              c.events,
              t,
              c.events.length - t,
              e.resolve(c.events.slice(t), c),
            ),
          e.resolveTo && (c.events = e.resolveTo(c.events, c)));
      }
      function S() {
        let e = m(),
          t = c.previous,
          n = c.currentConstruct,
          i = c.events.length,
          s = Array.from(o);
        return { restore: a, from: i };
        function a() {
          ((r = e),
            (c.previous = t),
            (c.currentConstruct = n),
            (c.events.length = i),
            (o = s),
            N());
        }
      }
      function N() {
        r.line in i &&
          r.column < 2 &&
          ((r.column = i[r.line]), (r.offset += i[r.line] - 1));
      }
    }
    function tS(e, t) {
      let n,
        r = t.start._index,
        i = t.start._bufferIndex,
        s = t.end._index,
        a = t.end._bufferIndex;
      if (r === s) n = [e[r].slice(i, a)];
      else {
        if (((n = e.slice(r, s)), i > -1)) {
          let e = n[0];
          "string" == typeof e ? (n[0] = e.slice(i)) : n.shift();
        }
        a > 0 && n.push(e[s].slice(0, a));
      }
      return n;
    }
    function tN(e, t) {
      let n,
        r = -1,
        i = [];
      for (; ++r < e.length; ) {
        let s,
          a = e[r];
        if ("string" == typeof a) s = a;
        else
          switch (a) {
            case -5:
              s = "\r";
              break;
            case -4:
              s = "\n";
              break;
            case -3:
              s = "\r\n";
              break;
            case -2:
              s = t ? " " : "	";
              break;
            case -1:
              if (!t && n) continue;
              s = " ";
              break;
            default:
              s = String.fromCharCode(a);
          }
        ((n = -2 === a), i.push(s));
      }
      return i.join("");
    }
    function tE(e) {
      return null === e || e2(e) || e4(e) ? 1 : e3(e) ? 2 : void 0;
    }
    (e.s(["resolveAll", () => tC], 759239),
      e.s(["classifyCharacter", () => tE], 941392));
    let tA = { name: "attention", tokenize: tI, resolveAll: tD };
    function tD(e, t) {
      let n,
        r,
        i,
        s,
        a,
        o,
        l,
        c,
        u = -1;
      for (; ++u < e.length; )
        if (
          "enter" === e[u][0] &&
          "attentionSequence" === e[u][1].type &&
          e[u][1]._close
        ) {
          for (n = u; n--; )
            if (
              "exit" === e[n][0] &&
              "attentionSequence" === e[n][1].type &&
              e[n][1]._open &&
              t.sliceSerialize(e[n][1]).charCodeAt(0) ===
                t.sliceSerialize(e[u][1]).charCodeAt(0)
            ) {
              if (
                (e[n][1]._close || e[u][1]._open) &&
                (e[u][1].end.offset - e[u][1].start.offset) % 3 &&
                !(
                  (e[n][1].end.offset -
                    e[n][1].start.offset +
                    e[u][1].end.offset -
                    e[u][1].start.offset) %
                  3
                )
              )
                continue;
              o =
                e[n][1].end.offset - e[n][1].start.offset > 1 &&
                e[u][1].end.offset - e[u][1].start.offset > 1
                  ? 2
                  : 1;
              let d = Object.assign({}, e[n][1].end),
                h = Object.assign({}, e[u][1].start);
              (tM(d, -o),
                tM(h, o),
                (s = {
                  type: o > 1 ? "strongSequence" : "emphasisSequence",
                  start: d,
                  end: Object.assign({}, e[n][1].end),
                }),
                (a = {
                  type: o > 1 ? "strongSequence" : "emphasisSequence",
                  start: Object.assign({}, e[u][1].start),
                  end: h,
                }),
                (i = {
                  type: o > 1 ? "strongText" : "emphasisText",
                  start: Object.assign({}, e[n][1].end),
                  end: Object.assign({}, e[u][1].start),
                }),
                (r = {
                  type: o > 1 ? "strong" : "emphasis",
                  start: Object.assign({}, s.start),
                  end: Object.assign({}, a.end),
                }),
                (e[n][1].end = Object.assign({}, s.start)),
                (e[u][1].start = Object.assign({}, a.end)),
                (l = []),
                e[n][1].end.offset - e[n][1].start.offset &&
                  (l = ez(l, [
                    ["enter", e[n][1], t],
                    ["exit", e[n][1], t],
                  ])),
                (l = ez(l, [
                  ["enter", r, t],
                  ["enter", s, t],
                  ["exit", s, t],
                  ["enter", i, t],
                ])),
                (l = ez(
                  l,
                  tC(t.parser.constructs.insideSpan.null, e.slice(n + 1, u), t),
                )),
                (l = ez(l, [
                  ["exit", i, t],
                  ["enter", a, t],
                  ["exit", a, t],
                  ["exit", r, t],
                ])),
                e[u][1].end.offset - e[u][1].start.offset
                  ? ((c = 2),
                    (l = ez(l, [
                      ["enter", e[u][1], t],
                      ["exit", e[u][1], t],
                    ])))
                  : (c = 0),
                eV(e, n - 1, u - n + 3, l),
                (u = n + l.length - c - 2));
              break;
            }
        }
      for (u = -1; ++u < e.length; )
        "attentionSequence" === e[u][1].type && (e[u][1].type = "data");
      return e;
    }
    function tI(e, t) {
      let n,
        r = this.parser.constructs.attentionMarkers.null,
        i = this.previous,
        s = tE(i);
      return a;
      function a(t) {
        return ((n = t), e.enter("attentionSequence"), o(t));
      }
      function o(a) {
        if (a === n) return (e.consume(a), o);
        let l = e.exit("attentionSequence"),
          c = tE(a),
          u = !c || (2 === c && s) || r.includes(a),
          d = !s || (2 === s && c) || r.includes(i);
        return (
          (l._open = !!(42 === n ? u : u && (s || !d))),
          (l._close = !!(42 === n ? d : d && (c || !u))),
          t(a)
        );
      }
    }
    function tM(e, t) {
      ((e.column += t), (e.offset += t), (e._bufferIndex += t));
    }
    let tT = { name: "autolink", tokenize: tL };
    function tL(e, t, n) {
      let r = 0;
      return i;
      function i(t) {
        return (
          e.enter("autolink"),
          e.enter("autolinkMarker"),
          e.consume(t),
          e.exit("autolinkMarker"),
          e.enter("autolinkProtocol"),
          s
        );
      }
      function s(t) {
        return eZ(t) ? (e.consume(t), a) : 64 === t ? n(t) : c(t);
      }
      function a(e) {
        return 43 === e || 45 === e || 46 === e || eK(e)
          ? ((r = 1), o(e))
          : c(e);
      }
      function o(t) {
        return 58 === t
          ? (e.consume(t), (r = 0), l)
          : (43 === t || 45 === t || 46 === t || eK(t)) && r++ < 32
            ? (e.consume(t), o)
            : ((r = 0), c(t));
      }
      function l(r) {
        return 62 === r
          ? (e.exit("autolinkProtocol"),
            e.enter("autolinkMarker"),
            e.consume(r),
            e.exit("autolinkMarker"),
            e.exit("autolink"),
            t)
          : null === r || 32 === r || 60 === r || eJ(r)
            ? n(r)
            : (e.consume(r), l);
      }
      function c(t) {
        return 64 === t ? (e.consume(t), u) : eY(t) ? (e.consume(t), c) : n(t);
      }
      function u(e) {
        return eK(e) ? d(e) : n(e);
      }
      function d(n) {
        return 46 === n
          ? (e.consume(n), (r = 0), u)
          : 62 === n
            ? ((e.exit("autolinkProtocol").type = "autolinkEmail"),
              e.enter("autolinkMarker"),
              e.consume(n),
              e.exit("autolinkMarker"),
              e.exit("autolink"),
              t)
            : h(n);
      }
      function h(t) {
        if ((45 === t || eK(t)) && r++ < 63) {
          let n = 45 === t ? h : d;
          return (e.consume(t), n);
        }
        return n(t);
      }
    }
    let tP = {
      name: "blockQuote",
      tokenize: tR,
      continuation: { tokenize: tF },
      exit: t_,
    };
    function tR(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        if (62 === t) {
          let n = r.containerState;
          return (
            n.open ||
              (e.enter("blockQuote", { _container: !0 }), (n.open = !0)),
            e.enter("blockQuotePrefix"),
            e.enter("blockQuoteMarker"),
            e.consume(t),
            e.exit("blockQuoteMarker"),
            s
          );
        }
        return n(t);
      }
      function s(n) {
        return e5(n)
          ? (e.enter("blockQuotePrefixWhitespace"),
            e.consume(n),
            e.exit("blockQuotePrefixWhitespace"),
            e.exit("blockQuotePrefix"),
            t)
          : (e.exit("blockQuotePrefix"), t(n));
      }
    }
    function tF(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return e5(t)
          ? e7(
              e,
              s,
              "linePrefix",
              r.parser.constructs.disable.null.includes("codeIndented")
                ? void 0
                : 4,
            )(t)
          : s(t);
      }
      function s(r) {
        return e.attempt(tP, t, n)(r);
      }
    }
    function t_(e) {
      e.exit("blockQuote");
    }
    let tO = { name: "characterEscape", tokenize: tB };
    function tB(e, t, n) {
      return r;
      function r(t) {
        return (
          e.enter("characterEscape"),
          e.enter("escapeMarker"),
          e.consume(t),
          e.exit("escapeMarker"),
          i
        );
      }
      function i(r) {
        return e0(r)
          ? (e.enter("characterEscapeValue"),
            e.consume(r),
            e.exit("characterEscapeValue"),
            e.exit("characterEscape"),
            t)
          : n(r);
      }
    }
    let tV = document.createElement("i");
    function tz(e) {
      let t = "&" + e + ";";
      tV.innerHTML = t;
      let n = tV.textContent;
      return (
        (59 !== n.charCodeAt(n.length - 1) || "semi" === e) && n !== t && n
      );
    }
    let tH = { name: "characterReference", tokenize: t$ };
    function t$(e, t, n) {
      let r,
        i,
        s = this,
        a = 0;
      return o;
      function o(t) {
        return (
          e.enter("characterReference"),
          e.enter("characterReferenceMarker"),
          e.consume(t),
          e.exit("characterReferenceMarker"),
          l
        );
      }
      function l(t) {
        return 35 === t
          ? (e.enter("characterReferenceMarkerNumeric"),
            e.consume(t),
            e.exit("characterReferenceMarkerNumeric"),
            c)
          : (e.enter("characterReferenceValue"), (r = 31), (i = eK), u(t));
      }
      function c(t) {
        return 88 === t || 120 === t
          ? (e.enter("characterReferenceMarkerHexadecimal"),
            e.consume(t),
            e.exit("characterReferenceMarkerHexadecimal"),
            e.enter("characterReferenceValue"),
            (r = 6),
            (i = eX),
            u)
          : (e.enter("characterReferenceValue"), (r = 7), (i = eQ), u(t));
      }
      function u(o) {
        if (59 === o && a) {
          let r = e.exit("characterReferenceValue");
          return i !== eK || tz(s.sliceSerialize(r))
            ? (e.enter("characterReferenceMarker"),
              e.consume(o),
              e.exit("characterReferenceMarker"),
              e.exit("characterReference"),
              t)
            : n(o);
        }
        return i(o) && a++ < r ? (e.consume(o), u) : n(o);
      }
    }
    let tU = { tokenize: tq, partial: !0 },
      tG = { name: "codeFenced", tokenize: tW, concrete: !0 };
    function tW(e, t, n) {
      let r,
        i = this,
        s = { tokenize: j, partial: !0 },
        a = 0,
        o = 0;
      return l;
      function l(e) {
        return c(e);
      }
      function c(t) {
        let n = i.events[i.events.length - 1];
        return (
          (a =
            n && "linePrefix" === n[1].type
              ? n[2].sliceSerialize(n[1], !0).length
              : 0),
          (r = t),
          e.enter("codeFenced"),
          e.enter("codeFencedFence"),
          e.enter("codeFencedFenceSequence"),
          u(t)
        );
      }
      function u(t) {
        return t === r
          ? (o++, e.consume(t), u)
          : o < 3
            ? n(t)
            : (e.exit("codeFencedFenceSequence"),
              e5(t) ? e7(e, d, "whitespace")(t) : d(t));
      }
      function d(n) {
        return null === n || e1(n)
          ? (e.exit("codeFencedFence"),
            i.interrupt ? t(n) : e.check(tU, f, b)(n))
          : (e.enter("codeFencedFenceInfo"),
            e.enter("chunkString", { contentType: "string" }),
            h(n));
      }
      function h(t) {
        return null === t || e1(t)
          ? (e.exit("chunkString"), e.exit("codeFencedFenceInfo"), d(t))
          : e5(t)
            ? (e.exit("chunkString"),
              e.exit("codeFencedFenceInfo"),
              e7(e, p, "whitespace")(t))
            : 96 === t && t === r
              ? n(t)
              : (e.consume(t), h);
      }
      function p(t) {
        return null === t || e1(t)
          ? d(t)
          : (e.enter("codeFencedFenceMeta"),
            e.enter("chunkString", { contentType: "string" }),
            m(t));
      }
      function m(t) {
        return null === t || e1(t)
          ? (e.exit("chunkString"), e.exit("codeFencedFenceMeta"), d(t))
          : 96 === t && t === r
            ? n(t)
            : (e.consume(t), m);
      }
      function f(t) {
        return e.attempt(s, b, g)(t);
      }
      function g(t) {
        return (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), x);
      }
      function x(t) {
        return a > 0 && e5(t) ? e7(e, v, "linePrefix", a + 1)(t) : v(t);
      }
      function v(t) {
        return null === t || e1(t)
          ? e.check(tU, f, b)(t)
          : (e.enter("codeFlowValue"), y(t));
      }
      function y(t) {
        return null === t || e1(t)
          ? (e.exit("codeFlowValue"), v(t))
          : (e.consume(t), y);
      }
      function b(n) {
        return (e.exit("codeFenced"), t(n));
      }
      function j(e, t, n) {
        let s = 0;
        return a;
        function a(t) {
          return (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), l);
        }
        function l(t) {
          return (
            e.enter("codeFencedFence"),
            e5(t)
              ? e7(
                  e,
                  c,
                  "linePrefix",
                  i.parser.constructs.disable.null.includes("codeIndented")
                    ? void 0
                    : 4,
                )(t)
              : c(t)
          );
        }
        function c(t) {
          return t === r ? (e.enter("codeFencedFenceSequence"), u(t)) : n(t);
        }
        function u(t) {
          return t === r
            ? (s++, e.consume(t), u)
            : s >= o
              ? (e.exit("codeFencedFenceSequence"),
                e5(t) ? e7(e, d, "whitespace")(t) : d(t))
              : n(t);
        }
        function d(r) {
          return null === r || e1(r) ? (e.exit("codeFencedFence"), t(r)) : n(r);
        }
      }
    }
    function tq(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return null === t
          ? n(t)
          : (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), s);
      }
      function s(e) {
        return r.parser.lazy[r.now().line] ? n(e) : t(e);
      }
    }
    let tZ = { name: "codeIndented", tokenize: tY },
      tK = { tokenize: tJ, partial: !0 };
    function tY(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return (e.enter("codeIndented"), e7(e, s, "linePrefix", 5)(t));
      }
      function s(e) {
        let t = r.events[r.events.length - 1];
        return t &&
          "linePrefix" === t[1].type &&
          t[2].sliceSerialize(t[1], !0).length >= 4
          ? a(e)
          : n(e);
      }
      function a(t) {
        return null === t
          ? l(t)
          : e1(t)
            ? e.attempt(tK, a, l)(t)
            : (e.enter("codeFlowValue"), o(t));
      }
      function o(t) {
        return null === t || e1(t)
          ? (e.exit("codeFlowValue"), a(t))
          : (e.consume(t), o);
      }
      function l(n) {
        return (e.exit("codeIndented"), t(n));
      }
    }
    function tJ(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return r.parser.lazy[r.now().line]
          ? n(t)
          : e1(t)
            ? (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), i)
            : e7(e, s, "linePrefix", 5)(t);
      }
      function s(e) {
        let s = r.events[r.events.length - 1];
        return s &&
          "linePrefix" === s[1].type &&
          s[2].sliceSerialize(s[1], !0).length >= 4
          ? t(e)
          : e1(e)
            ? i(e)
            : n(e);
      }
    }
    let tQ = { name: "codeText", tokenize: t1, resolve: tX, previous: t0 };
    function tX(e) {
      let t,
        n,
        r = e.length - 4,
        i = 3;
      if (
        ("lineEnding" === e[3][1].type || "space" === e[i][1].type) &&
        ("lineEnding" === e[r][1].type || "space" === e[r][1].type)
      ) {
        for (t = i; ++t < r; )
          if ("codeTextData" === e[t][1].type) {
            ((e[i][1].type = "codeTextPadding"),
              (e[r][1].type = "codeTextPadding"),
              (i += 2),
              (r -= 2));
            break;
          }
      }
      for (t = i - 1, r++; ++t <= r; )
        void 0 === n
          ? t !== r && "lineEnding" !== e[t][1].type && (n = t)
          : (t === r || "lineEnding" === e[t][1].type) &&
            ((e[n][1].type = "codeTextData"),
            t !== n + 2 &&
              ((e[n][1].end = e[t - 1][1].end),
              e.splice(n + 2, t - n - 2),
              (r -= t - n - 2),
              (t = n + 2)),
            (n = void 0));
      return e;
    }
    function t0(e) {
      return (
        96 !== e ||
        "characterEscape" === this.events[this.events.length - 1][1].type
      );
    }
    function t1(e, t, n) {
      let r,
        i,
        s = 0;
      return a;
      function a(t) {
        return (e.enter("codeText"), e.enter("codeTextSequence"), o(t));
      }
      function o(t) {
        return 96 === t
          ? (e.consume(t), s++, o)
          : (e.exit("codeTextSequence"), l(t));
      }
      function l(t) {
        return null === t
          ? n(t)
          : 32 === t
            ? (e.enter("space"), e.consume(t), e.exit("space"), l)
            : 96 === t
              ? ((i = e.enter("codeTextSequence")), (r = 0), u(t))
              : e1(t)
                ? (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), l)
                : (e.enter("codeTextData"), c(t));
      }
      function c(t) {
        return null === t || 32 === t || 96 === t || e1(t)
          ? (e.exit("codeTextData"), l(t))
          : (e.consume(t), c);
      }
      function u(n) {
        return 96 === n
          ? (e.consume(n), r++, u)
          : r === s
            ? (e.exit("codeTextSequence"), e.exit("codeText"), t(n))
            : ((i.type = "codeTextData"), c(n));
      }
    }
    function t2(e, t, n, r, i, s, a, o, l) {
      let c = l || 1 / 0,
        u = 0;
      return d;
      function d(t) {
        return 60 === t
          ? (e.enter(r), e.enter(i), e.enter(s), e.consume(t), e.exit(s), h)
          : null === t || 32 === t || 41 === t || eJ(t)
            ? n(t)
            : (e.enter(r),
              e.enter(a),
              e.enter(o),
              e.enter("chunkString", { contentType: "string" }),
              f(t));
      }
      function h(n) {
        return 62 === n
          ? (e.enter(s), e.consume(n), e.exit(s), e.exit(i), e.exit(r), t)
          : (e.enter(o),
            e.enter("chunkString", { contentType: "string" }),
            p(n));
      }
      function p(t) {
        return 62 === t
          ? (e.exit("chunkString"), e.exit(o), h(t))
          : null === t || 60 === t || e1(t)
            ? n(t)
            : (e.consume(t), 92 === t ? m : p);
      }
      function m(t) {
        return 60 === t || 62 === t || 92 === t ? (e.consume(t), p) : p(t);
      }
      function f(i) {
        return !u && (null === i || 41 === i || e2(i))
          ? (e.exit("chunkString"), e.exit(o), e.exit(a), e.exit(r), t(i))
          : u < c && 40 === i
            ? (e.consume(i), u++, f)
            : 41 === i
              ? (e.consume(i), u--, f)
              : null === i || 32 === i || 40 === i || eJ(i)
                ? n(i)
                : (e.consume(i), 92 === i ? g : f);
      }
      function g(t) {
        return 40 === t || 41 === t || 92 === t ? (e.consume(t), f) : f(t);
      }
    }
    function t5(e, t, n, r, i, s) {
      let a,
        o = this,
        l = 0;
      return c;
      function c(t) {
        return (e.enter(r), e.enter(i), e.consume(t), e.exit(i), e.enter(s), u);
      }
      function u(c) {
        return l > 999 ||
          null === c ||
          91 === c ||
          (93 === c && !a) ||
          (94 === c && !l && "_hiddenFootnoteSupport" in o.parser.constructs)
          ? n(c)
          : 93 === c
            ? (e.exit(s), e.enter(i), e.consume(c), e.exit(i), e.exit(r), t)
            : e1(c)
              ? (e.enter("lineEnding"), e.consume(c), e.exit("lineEnding"), u)
              : (e.enter("chunkString", { contentType: "string" }), d(c));
      }
      function d(t) {
        return null === t || 91 === t || 93 === t || e1(t) || l++ > 999
          ? (e.exit("chunkString"), u(t))
          : (e.consume(t), a || (a = !e5(t)), 92 === t ? h : d);
      }
      function h(t) {
        return 91 === t || 92 === t || 93 === t ? (e.consume(t), l++, d) : d(t);
      }
    }
    function t3(e, t, n, r, i, s) {
      let a;
      return o;
      function o(t) {
        return 34 === t || 39 === t || 40 === t
          ? (e.enter(r),
            e.enter(i),
            e.consume(t),
            e.exit(i),
            (a = 40 === t ? 41 : t),
            l)
          : n(t);
      }
      function l(n) {
        return n === a
          ? (e.enter(i), e.consume(n), e.exit(i), e.exit(r), t)
          : (e.enter(s), c(n));
      }
      function c(t) {
        return t === a
          ? (e.exit(s), l(a))
          : null === t
            ? n(t)
            : e1(t)
              ? (e.enter("lineEnding"),
                e.consume(t),
                e.exit("lineEnding"),
                e7(e, c, "linePrefix"))
              : (e.enter("chunkString", { contentType: "string" }), u(t));
      }
      function u(t) {
        return t === a || null === t || e1(t)
          ? (e.exit("chunkString"), c(t))
          : (e.consume(t), 92 === t ? d : u);
      }
      function d(t) {
        return t === a || 92 === t ? (e.consume(t), u) : u(t);
      }
    }
    function t4(e, t) {
      let n;
      return r;
      function r(i) {
        return e1(i)
          ? (e.enter("lineEnding"),
            e.consume(i),
            e.exit("lineEnding"),
            (n = !0),
            r)
          : e5(i)
            ? e7(e, r, n ? "linePrefix" : "lineSuffix")(i)
            : t(i);
      }
    }
    function t9(e) {
      return e
        .replace(/[\t\n\r ]+/g, " ")
        .replace(/^ | $/g, "")
        .toLowerCase()
        .toUpperCase();
    }
    e.s(["normalizeIdentifier", () => t9], 820667);
    let t7 = { name: "definition", tokenize: t8 },
      t6 = { tokenize: ne, partial: !0 };
    function t8(e, t, n) {
      let r,
        i = this;
      return s;
      function s(t) {
        return (e.enter("definition"), a(t));
      }
      function a(t) {
        return t5.call(
          i,
          e,
          o,
          n,
          "definitionLabel",
          "definitionLabelMarker",
          "definitionLabelString",
        )(t);
      }
      function o(t) {
        return ((r = t9(
          i.sliceSerialize(i.events[i.events.length - 1][1]).slice(1, -1),
        )),
        58 === t)
          ? (e.enter("definitionMarker"),
            e.consume(t),
            e.exit("definitionMarker"),
            l)
          : n(t);
      }
      function l(t) {
        return e2(t) ? t4(e, c)(t) : c(t);
      }
      function c(t) {
        return t2(
          e,
          u,
          n,
          "definitionDestination",
          "definitionDestinationLiteral",
          "definitionDestinationLiteralMarker",
          "definitionDestinationRaw",
          "definitionDestinationString",
        )(t);
      }
      function u(t) {
        return e.attempt(t6, d, d)(t);
      }
      function d(t) {
        return e5(t) ? e7(e, h, "whitespace")(t) : h(t);
      }
      function h(s) {
        return null === s || e1(s)
          ? (e.exit("definition"), i.parser.defined.push(r), t(s))
          : n(s);
      }
    }
    function ne(e, t, n) {
      return r;
      function r(t) {
        return e2(t) ? t4(e, i)(t) : n(t);
      }
      function i(t) {
        return t3(
          e,
          s,
          n,
          "definitionTitle",
          "definitionTitleMarker",
          "definitionTitleString",
        )(t);
      }
      function s(t) {
        return e5(t) ? e7(e, a, "whitespace")(t) : a(t);
      }
      function a(e) {
        return null === e || e1(e) ? t(e) : n(e);
      }
    }
    let nt = { name: "hardBreakEscape", tokenize: nn };
    function nn(e, t, n) {
      return r;
      function r(t) {
        return (e.enter("hardBreakEscape"), e.consume(t), i);
      }
      function i(r) {
        return e1(r) ? (e.exit("hardBreakEscape"), t(r)) : n(r);
      }
    }
    let nr = { name: "headingAtx", tokenize: ns, resolve: ni };
    function ni(e, t) {
      let n,
        r,
        i = e.length - 2,
        s = 3;
      return (
        "whitespace" === e[3][1].type && (s += 2),
        i - 2 > s && "whitespace" === e[i][1].type && (i -= 2),
        "atxHeadingSequence" === e[i][1].type &&
          (s === i - 1 || (i - 4 > s && "whitespace" === e[i - 2][1].type)) &&
          (i -= s + 1 === i ? 2 : 4),
        i > s &&
          ((n = {
            type: "atxHeadingText",
            start: e[s][1].start,
            end: e[i][1].end,
          }),
          (r = {
            type: "chunkText",
            start: e[s][1].start,
            end: e[i][1].end,
            contentType: "text",
          }),
          eV(e, s, i - s + 1, [
            ["enter", n, t],
            ["enter", r, t],
            ["exit", r, t],
            ["exit", n, t],
          ])),
        e
      );
    }
    function ns(e, t, n) {
      let r = 0;
      return i;
      function i(t) {
        return (e.enter("atxHeading"), s(t));
      }
      function s(t) {
        return (e.enter("atxHeadingSequence"), a(t));
      }
      function a(t) {
        return 35 === t && r++ < 6
          ? (e.consume(t), a)
          : null === t || e2(t)
            ? (e.exit("atxHeadingSequence"), o(t))
            : n(t);
      }
      function o(n) {
        return 35 === n
          ? (e.enter("atxHeadingSequence"), l(n))
          : null === n || e1(n)
            ? (e.exit("atxHeading"), t(n))
            : e5(n)
              ? e7(e, o, "whitespace")(n)
              : (e.enter("atxHeadingText"), c(n));
      }
      function l(t) {
        return 35 === t
          ? (e.consume(t), l)
          : (e.exit("atxHeadingSequence"), o(t));
      }
      function c(t) {
        return null === t || 35 === t || e2(t)
          ? (e.exit("atxHeadingText"), o(t))
          : (e.consume(t), c);
      }
    }
    let na = [
        "address",
        "article",
        "aside",
        "base",
        "basefont",
        "blockquote",
        "body",
        "caption",
        "center",
        "col",
        "colgroup",
        "dd",
        "details",
        "dialog",
        "dir",
        "div",
        "dl",
        "dt",
        "fieldset",
        "figcaption",
        "figure",
        "footer",
        "form",
        "frame",
        "frameset",
        "h1",
        "h2",
        "h3",
        "h4",
        "h5",
        "h6",
        "head",
        "header",
        "hr",
        "html",
        "iframe",
        "legend",
        "li",
        "link",
        "main",
        "menu",
        "menuitem",
        "nav",
        "noframes",
        "ol",
        "optgroup",
        "option",
        "p",
        "param",
        "search",
        "section",
        "summary",
        "table",
        "tbody",
        "td",
        "tfoot",
        "th",
        "thead",
        "title",
        "tr",
        "track",
        "ul",
      ],
      no = ["pre", "script", "style", "textarea"],
      nl = { name: "htmlFlow", tokenize: nh, resolveTo: nd, concrete: !0 },
      nc = { tokenize: nm, partial: !0 },
      nu = { tokenize: np, partial: !0 };
    function nd(e) {
      let t = e.length;
      for (; t-- && ("enter" !== e[t][0] || "htmlFlow" !== e[t][1].type); );
      return (
        t > 1 &&
          "linePrefix" === e[t - 2][1].type &&
          ((e[t][1].start = e[t - 2][1].start),
          (e[t + 1][1].start = e[t - 2][1].start),
          e.splice(t - 2, 2)),
        e
      );
    }
    function nh(e, t, n) {
      let r,
        i,
        s,
        a,
        o,
        l = this;
      return c;
      function c(e) {
        return u(e);
      }
      function u(t) {
        return (e.enter("htmlFlow"), e.enter("htmlFlowData"), e.consume(t), d);
      }
      function d(a) {
        return 33 === a
          ? (e.consume(a), h)
          : 47 === a
            ? (e.consume(a), (i = !0), f)
            : 63 === a
              ? (e.consume(a), (r = 3), l.interrupt ? t : F)
              : eZ(a)
                ? (e.consume(a), (s = String.fromCharCode(a)), g)
                : n(a);
      }
      function h(i) {
        return 45 === i
          ? (e.consume(i), (r = 2), p)
          : 91 === i
            ? (e.consume(i), (r = 5), (a = 0), m)
            : eZ(i)
              ? (e.consume(i), (r = 4), l.interrupt ? t : F)
              : n(i);
      }
      function p(r) {
        return 45 === r ? (e.consume(r), l.interrupt ? t : F) : n(r);
      }
      function m(r) {
        let i = "CDATA[";
        return r === i.charCodeAt(a++)
          ? (e.consume(r), a === i.length)
            ? l.interrupt
              ? t
              : A
            : m
          : n(r);
      }
      function f(t) {
        return eZ(t) ? (e.consume(t), (s = String.fromCharCode(t)), g) : n(t);
      }
      function g(a) {
        if (null === a || 47 === a || 62 === a || e2(a)) {
          let o = 47 === a,
            c = s.toLowerCase();
          return !o && !i && no.includes(c)
            ? ((r = 1), l.interrupt ? t(a) : A(a))
            : na.includes(s.toLowerCase())
              ? ((r = 6), o)
                ? (e.consume(a), x)
                : l.interrupt
                  ? t(a)
                  : A(a)
              : ((r = 7),
                l.interrupt && !l.parser.lazy[l.now().line]
                  ? n(a)
                  : i
                    ? v(a)
                    : y(a));
        }
        return 45 === a || eK(a)
          ? (e.consume(a), (s += String.fromCharCode(a)), g)
          : n(a);
      }
      function x(r) {
        return 62 === r ? (e.consume(r), l.interrupt ? t : A) : n(r);
      }
      function v(t) {
        return e5(t) ? (e.consume(t), v) : N(t);
      }
      function y(t) {
        return 47 === t
          ? (e.consume(t), N)
          : 58 === t || 95 === t || eZ(t)
            ? (e.consume(t), b)
            : e5(t)
              ? (e.consume(t), y)
              : N(t);
      }
      function b(t) {
        return 45 === t || 46 === t || 58 === t || 95 === t || eK(t)
          ? (e.consume(t), b)
          : j(t);
      }
      function j(t) {
        return 61 === t ? (e.consume(t), w) : e5(t) ? (e.consume(t), j) : y(t);
      }
      function w(t) {
        return null === t || 60 === t || 61 === t || 62 === t || 96 === t
          ? n(t)
          : 34 === t || 39 === t
            ? (e.consume(t), (o = t), C)
            : e5(t)
              ? (e.consume(t), w)
              : k(t);
      }
      function C(t) {
        return t === o
          ? (e.consume(t), (o = null), S)
          : null === t || e1(t)
            ? n(t)
            : (e.consume(t), C);
      }
      function k(t) {
        return null === t ||
          34 === t ||
          39 === t ||
          47 === t ||
          60 === t ||
          61 === t ||
          62 === t ||
          96 === t ||
          e2(t)
          ? j(t)
          : (e.consume(t), k);
      }
      function S(e) {
        return 47 === e || 62 === e || e5(e) ? y(e) : n(e);
      }
      function N(t) {
        return 62 === t ? (e.consume(t), E) : n(t);
      }
      function E(t) {
        return null === t || e1(t) ? A(t) : e5(t) ? (e.consume(t), E) : n(t);
      }
      function A(t) {
        return 45 === t && 2 === r
          ? (e.consume(t), T)
          : 60 === t && 1 === r
            ? (e.consume(t), L)
            : 62 === t && 4 === r
              ? (e.consume(t), _)
              : 63 === t && 3 === r
                ? (e.consume(t), F)
                : 93 === t && 5 === r
                  ? (e.consume(t), R)
                  : e1(t) && (6 === r || 7 === r)
                    ? (e.exit("htmlFlowData"), e.check(nc, O, D)(t))
                    : null === t || e1(t)
                      ? (e.exit("htmlFlowData"), D(t))
                      : (e.consume(t), A);
      }
      function D(t) {
        return e.check(nu, I, O)(t);
      }
      function I(t) {
        return (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), M);
      }
      function M(t) {
        return null === t || e1(t) ? D(t) : (e.enter("htmlFlowData"), A(t));
      }
      function T(t) {
        return 45 === t ? (e.consume(t), F) : A(t);
      }
      function L(t) {
        return 47 === t ? (e.consume(t), (s = ""), P) : A(t);
      }
      function P(t) {
        if (62 === t) {
          let n = s.toLowerCase();
          return no.includes(n) ? (e.consume(t), _) : A(t);
        }
        return eZ(t) && s.length < 8
          ? (e.consume(t), (s += String.fromCharCode(t)), P)
          : A(t);
      }
      function R(t) {
        return 93 === t ? (e.consume(t), F) : A(t);
      }
      function F(t) {
        return 62 === t
          ? (e.consume(t), _)
          : 45 === t && 2 === r
            ? (e.consume(t), F)
            : A(t);
      }
      function _(t) {
        return null === t || e1(t)
          ? (e.exit("htmlFlowData"), O(t))
          : (e.consume(t), _);
      }
      function O(n) {
        return (e.exit("htmlFlow"), t(n));
      }
    }
    function np(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return e1(t)
          ? (e.enter("lineEnding"), e.consume(t), e.exit("lineEnding"), s)
          : n(t);
      }
      function s(e) {
        return r.parser.lazy[r.now().line] ? n(e) : t(e);
      }
    }
    function nm(e, t, n) {
      return r;
      function r(r) {
        return (
          e.enter("lineEnding"),
          e.consume(r),
          e.exit("lineEnding"),
          e.attempt(ti, t, n)
        );
      }
    }
    let nf = { name: "htmlText", tokenize: ng };
    function ng(e, t, n) {
      let r,
        i,
        s,
        a = this;
      return o;
      function o(t) {
        return (e.enter("htmlText"), e.enter("htmlTextData"), e.consume(t), l);
      }
      function l(t) {
        return 33 === t
          ? (e.consume(t), c)
          : 47 === t
            ? (e.consume(t), j)
            : 63 === t
              ? (e.consume(t), y)
              : eZ(t)
                ? (e.consume(t), k)
                : n(t);
      }
      function c(t) {
        return 45 === t
          ? (e.consume(t), u)
          : 91 === t
            ? (e.consume(t), (i = 0), m)
            : eZ(t)
              ? (e.consume(t), v)
              : n(t);
      }
      function u(t) {
        return 45 === t ? (e.consume(t), p) : n(t);
      }
      function d(t) {
        return null === t
          ? n(t)
          : 45 === t
            ? (e.consume(t), h)
            : e1(t)
              ? ((s = d), L(t))
              : (e.consume(t), d);
      }
      function h(t) {
        return 45 === t ? (e.consume(t), p) : d(t);
      }
      function p(e) {
        return 62 === e ? T(e) : 45 === e ? h(e) : d(e);
      }
      function m(t) {
        let r = "CDATA[";
        return t === r.charCodeAt(i++)
          ? (e.consume(t), i === r.length ? f : m)
          : n(t);
      }
      function f(t) {
        return null === t
          ? n(t)
          : 93 === t
            ? (e.consume(t), g)
            : e1(t)
              ? ((s = f), L(t))
              : (e.consume(t), f);
      }
      function g(t) {
        return 93 === t ? (e.consume(t), x) : f(t);
      }
      function x(t) {
        return 62 === t ? T(t) : 93 === t ? (e.consume(t), x) : f(t);
      }
      function v(t) {
        return null === t || 62 === t
          ? T(t)
          : e1(t)
            ? ((s = v), L(t))
            : (e.consume(t), v);
      }
      function y(t) {
        return null === t
          ? n(t)
          : 63 === t
            ? (e.consume(t), b)
            : e1(t)
              ? ((s = y), L(t))
              : (e.consume(t), y);
      }
      function b(e) {
        return 62 === e ? T(e) : y(e);
      }
      function j(t) {
        return eZ(t) ? (e.consume(t), w) : n(t);
      }
      function w(t) {
        return 45 === t || eK(t) ? (e.consume(t), w) : C(t);
      }
      function C(t) {
        return e1(t) ? ((s = C), L(t)) : e5(t) ? (e.consume(t), C) : T(t);
      }
      function k(t) {
        return 45 === t || eK(t)
          ? (e.consume(t), k)
          : 47 === t || 62 === t || e2(t)
            ? S(t)
            : n(t);
      }
      function S(t) {
        return 47 === t
          ? (e.consume(t), T)
          : 58 === t || 95 === t || eZ(t)
            ? (e.consume(t), N)
            : e1(t)
              ? ((s = S), L(t))
              : e5(t)
                ? (e.consume(t), S)
                : T(t);
      }
      function N(t) {
        return 45 === t || 46 === t || 58 === t || 95 === t || eK(t)
          ? (e.consume(t), N)
          : E(t);
      }
      function E(t) {
        return 61 === t
          ? (e.consume(t), A)
          : e1(t)
            ? ((s = E), L(t))
            : e5(t)
              ? (e.consume(t), E)
              : S(t);
      }
      function A(t) {
        return null === t || 60 === t || 61 === t || 62 === t || 96 === t
          ? n(t)
          : 34 === t || 39 === t
            ? (e.consume(t), (r = t), D)
            : e1(t)
              ? ((s = A), L(t))
              : e5(t)
                ? (e.consume(t), A)
                : (e.consume(t), I);
      }
      function D(t) {
        return t === r
          ? (e.consume(t), (r = void 0), M)
          : null === t
            ? n(t)
            : e1(t)
              ? ((s = D), L(t))
              : (e.consume(t), D);
      }
      function I(t) {
        return null === t ||
          34 === t ||
          39 === t ||
          60 === t ||
          61 === t ||
          96 === t
          ? n(t)
          : 47 === t || 62 === t || e2(t)
            ? S(t)
            : (e.consume(t), I);
      }
      function M(e) {
        return 47 === e || 62 === e || e2(e) ? S(e) : n(e);
      }
      function T(r) {
        return 62 === r
          ? (e.consume(r), e.exit("htmlTextData"), e.exit("htmlText"), t)
          : n(r);
      }
      function L(t) {
        return (
          e.exit("htmlTextData"),
          e.enter("lineEnding"),
          e.consume(t),
          e.exit("lineEnding"),
          P
        );
      }
      function P(t) {
        return e5(t)
          ? e7(
              e,
              R,
              "linePrefix",
              a.parser.constructs.disable.null.includes("codeIndented")
                ? void 0
                : 4,
            )(t)
          : R(t);
      }
      function R(t) {
        return (e.enter("htmlTextData"), s(t));
      }
    }
    let nx = { name: "labelEnd", tokenize: nC, resolveTo: nw, resolveAll: nj },
      nv = { tokenize: nk },
      ny = { tokenize: nS },
      nb = { tokenize: nN };
    function nj(e) {
      let t = -1;
      for (; ++t < e.length; ) {
        let n = e[t][1];
        ("labelImage" === n.type ||
          "labelLink" === n.type ||
          "labelEnd" === n.type) &&
          (e.splice(t + 1, "labelImage" === n.type ? 4 : 2),
          (n.type = "data"),
          t++);
      }
      return e;
    }
    function nw(e, t) {
      let n,
        r,
        i,
        s,
        a = e.length,
        o = 0;
      for (; a--; )
        if (((n = e[a][1]), r)) {
          if ("link" === n.type || ("labelLink" === n.type && n._inactive))
            break;
          "enter" === e[a][0] && "labelLink" === n.type && (n._inactive = !0);
        } else if (i) {
          if (
            "enter" === e[a][0] &&
            ("labelImage" === n.type || "labelLink" === n.type) &&
            !n._balanced &&
            ((r = a), "labelLink" !== n.type)
          ) {
            o = 2;
            break;
          }
        } else "labelEnd" === n.type && (i = a);
      let l = {
          type: "labelLink" === e[r][1].type ? "link" : "image",
          start: Object.assign({}, e[r][1].start),
          end: Object.assign({}, e[e.length - 1][1].end),
        },
        c = {
          type: "label",
          start: Object.assign({}, e[r][1].start),
          end: Object.assign({}, e[i][1].end),
        },
        u = {
          type: "labelText",
          start: Object.assign({}, e[r + o + 2][1].end),
          end: Object.assign({}, e[i - 2][1].start),
        };
      return (
        (s = ez(
          (s = [
            ["enter", l, t],
            ["enter", c, t],
          ]),
          e.slice(r + 1, r + o + 3),
        )),
        (s = ez(s, [["enter", u, t]])),
        (s = ez(
          s,
          tC(t.parser.constructs.insideSpan.null, e.slice(r + o + 4, i - 3), t),
        )),
        (s = ez(s, [["exit", u, t], e[i - 2], e[i - 1], ["exit", c, t]])),
        (s = ez(s, e.slice(i + 1))),
        (s = ez(s, [["exit", l, t]])),
        eV(e, r, e.length, s),
        e
      );
    }
    function nC(e, t, n) {
      let r,
        i,
        s = this,
        a = s.events.length;
      for (; a--; )
        if (
          ("labelImage" === s.events[a][1].type ||
            "labelLink" === s.events[a][1].type) &&
          !s.events[a][1]._balanced
        ) {
          r = s.events[a][1];
          break;
        }
      return o;
      function o(t) {
        return r
          ? r._inactive
            ? d(t)
            : ((i = s.parser.defined.includes(
                t9(s.sliceSerialize({ start: r.end, end: s.now() })),
              )),
              e.enter("labelEnd"),
              e.enter("labelMarker"),
              e.consume(t),
              e.exit("labelMarker"),
              e.exit("labelEnd"),
              l)
          : n(t);
      }
      function l(t) {
        return 40 === t
          ? e.attempt(nv, u, i ? u : d)(t)
          : 91 === t
            ? e.attempt(ny, u, i ? c : d)(t)
            : i
              ? u(t)
              : d(t);
      }
      function c(t) {
        return e.attempt(nb, u, d)(t);
      }
      function u(e) {
        return t(e);
      }
      function d(e) {
        return ((r._balanced = !0), n(e));
      }
    }
    function nk(e, t, n) {
      return r;
      function r(t) {
        return (
          e.enter("resource"),
          e.enter("resourceMarker"),
          e.consume(t),
          e.exit("resourceMarker"),
          i
        );
      }
      function i(t) {
        return e2(t) ? t4(e, s)(t) : s(t);
      }
      function s(t) {
        return 41 === t
          ? u(t)
          : t2(
              e,
              a,
              o,
              "resourceDestination",
              "resourceDestinationLiteral",
              "resourceDestinationLiteralMarker",
              "resourceDestinationRaw",
              "resourceDestinationString",
              32,
            )(t);
      }
      function a(t) {
        return e2(t) ? t4(e, l)(t) : u(t);
      }
      function o(e) {
        return n(e);
      }
      function l(t) {
        return 34 === t || 39 === t || 40 === t
          ? t3(
              e,
              c,
              n,
              "resourceTitle",
              "resourceTitleMarker",
              "resourceTitleString",
            )(t)
          : u(t);
      }
      function c(t) {
        return e2(t) ? t4(e, u)(t) : u(t);
      }
      function u(r) {
        return 41 === r
          ? (e.enter("resourceMarker"),
            e.consume(r),
            e.exit("resourceMarker"),
            e.exit("resource"),
            t)
          : n(r);
      }
    }
    function nS(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return t5.call(
          r,
          e,
          s,
          a,
          "reference",
          "referenceMarker",
          "referenceString",
        )(t);
      }
      function s(e) {
        return r.parser.defined.includes(
          t9(r.sliceSerialize(r.events[r.events.length - 1][1]).slice(1, -1)),
        )
          ? t(e)
          : n(e);
      }
      function a(e) {
        return n(e);
      }
    }
    function nN(e, t, n) {
      return r;
      function r(t) {
        return (
          e.enter("reference"),
          e.enter("referenceMarker"),
          e.consume(t),
          e.exit("referenceMarker"),
          i
        );
      }
      function i(r) {
        return 93 === r
          ? (e.enter("referenceMarker"),
            e.consume(r),
            e.exit("referenceMarker"),
            e.exit("reference"),
            t)
          : n(r);
      }
    }
    let nE = {
      name: "labelStartImage",
      tokenize: nA,
      resolveAll: nx.resolveAll,
    };
    function nA(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return (
          e.enter("labelImage"),
          e.enter("labelImageMarker"),
          e.consume(t),
          e.exit("labelImageMarker"),
          s
        );
      }
      function s(t) {
        return 91 === t
          ? (e.enter("labelMarker"),
            e.consume(t),
            e.exit("labelMarker"),
            e.exit("labelImage"),
            a)
          : n(t);
      }
      function a(e) {
        return 94 === e && "_hiddenFootnoteSupport" in r.parser.constructs
          ? n(e)
          : t(e);
      }
    }
    let nD = {
      name: "labelStartLink",
      tokenize: nI,
      resolveAll: nx.resolveAll,
    };
    function nI(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return (
          e.enter("labelLink"),
          e.enter("labelMarker"),
          e.consume(t),
          e.exit("labelMarker"),
          e.exit("labelLink"),
          s
        );
      }
      function s(e) {
        return 94 === e && "_hiddenFootnoteSupport" in r.parser.constructs
          ? n(e)
          : t(e);
      }
    }
    let nM = { name: "lineEnding", tokenize: nT };
    function nT(e, t) {
      return n;
      function n(n) {
        return (
          e.enter("lineEnding"),
          e.consume(n),
          e.exit("lineEnding"),
          e7(e, t, "linePrefix")
        );
      }
    }
    let nL = { name: "thematicBreak", tokenize: nP };
    function nP(e, t, n) {
      let r,
        i = 0;
      return s;
      function s(t) {
        return (e.enter("thematicBreak"), a(t));
      }
      function a(e) {
        return ((r = e), o(e));
      }
      function o(s) {
        return s === r
          ? (e.enter("thematicBreakSequence"), l(s))
          : i >= 3 && (null === s || e1(s))
            ? (e.exit("thematicBreak"), t(s))
            : n(s);
      }
      function l(t) {
        return t === r
          ? (e.consume(t), i++, l)
          : (e.exit("thematicBreakSequence"),
            e5(t) ? e7(e, o, "whitespace")(t) : o(t));
      }
    }
    let nR = {
        name: "list",
        tokenize: nO,
        continuation: { tokenize: nB },
        exit: nz,
      },
      nF = { tokenize: nH, partial: !0 },
      n_ = { tokenize: nV, partial: !0 };
    function nO(e, t, n) {
      let r = this,
        i = r.events[r.events.length - 1],
        s =
          i && "linePrefix" === i[1].type
            ? i[2].sliceSerialize(i[1], !0).length
            : 0,
        a = 0;
      return o;
      function o(t) {
        let i =
          r.containerState.type ||
          (42 === t || 43 === t || 45 === t ? "listUnordered" : "listOrdered");
        if (
          "listUnordered" === i
            ? !r.containerState.marker || t === r.containerState.marker
            : eQ(t)
        ) {
          if (
            (r.containerState.type ||
              ((r.containerState.type = i), e.enter(i, { _container: !0 })),
            "listUnordered" === i)
          )
            return (
              e.enter("listItemPrefix"),
              42 === t || 45 === t ? e.check(nL, n, c)(t) : c(t)
            );
          if (!r.interrupt || 49 === t)
            return (e.enter("listItemPrefix"), e.enter("listItemValue"), l(t));
        }
        return n(t);
      }
      function l(t) {
        return eQ(t) && ++a < 10
          ? (e.consume(t), l)
          : (!r.interrupt || a < 2) &&
              (r.containerState.marker
                ? t === r.containerState.marker
                : 41 === t || 46 === t)
            ? (e.exit("listItemValue"), c(t))
            : n(t);
      }
      function c(t) {
        return (
          e.enter("listItemMarker"),
          e.consume(t),
          e.exit("listItemMarker"),
          (r.containerState.marker = r.containerState.marker || t),
          e.check(ti, r.interrupt ? n : u, e.attempt(nF, h, d))
        );
      }
      function u(e) {
        return ((r.containerState.initialBlankLine = !0), s++, h(e));
      }
      function d(t) {
        return e5(t)
          ? (e.enter("listItemPrefixWhitespace"),
            e.consume(t),
            e.exit("listItemPrefixWhitespace"),
            h)
          : n(t);
      }
      function h(n) {
        return (
          (r.containerState.size =
            s + r.sliceSerialize(e.exit("listItemPrefix"), !0).length),
          t(n)
        );
      }
    }
    function nB(e, t, n) {
      let r = this;
      return ((r.containerState._closeFlow = void 0), e.check(ti, i, s));
      function i(n) {
        return (
          (r.containerState.furtherBlankLines =
            r.containerState.furtherBlankLines ||
            r.containerState.initialBlankLine),
          e7(e, t, "listItemIndent", r.containerState.size + 1)(n)
        );
      }
      function s(n) {
        return r.containerState.furtherBlankLines || !e5(n)
          ? ((r.containerState.furtherBlankLines = void 0),
            (r.containerState.initialBlankLine = void 0),
            a(n))
          : ((r.containerState.furtherBlankLines = void 0),
            (r.containerState.initialBlankLine = void 0),
            e.attempt(n_, t, a)(n));
      }
      function a(i) {
        return (
          (r.containerState._closeFlow = !0),
          (r.interrupt = void 0),
          e7(
            e,
            e.attempt(nR, t, n),
            "linePrefix",
            r.parser.constructs.disable.null.includes("codeIndented")
              ? void 0
              : 4,
          )(i)
        );
      }
    }
    function nV(e, t, n) {
      let r = this;
      return e7(e, i, "listItemIndent", r.containerState.size + 1);
      function i(e) {
        let i = r.events[r.events.length - 1];
        return i &&
          "listItemIndent" === i[1].type &&
          i[2].sliceSerialize(i[1], !0).length === r.containerState.size
          ? t(e)
          : n(e);
      }
    }
    function nz(e) {
      e.exit(this.containerState.type);
    }
    function nH(e, t, n) {
      let r = this;
      return e7(
        e,
        i,
        "listItemPrefixWhitespace",
        r.parser.constructs.disable.null.includes("codeIndented") ? void 0 : 5,
      );
      function i(e) {
        let i = r.events[r.events.length - 1];
        return !e5(e) && i && "listItemPrefixWhitespace" === i[1].type
          ? t(e)
          : n(e);
      }
    }
    let n$ = { name: "setextUnderline", tokenize: nG, resolveTo: nU };
    function nU(e, t) {
      let n,
        r,
        i,
        s = e.length;
      for (; s--; )
        if ("enter" === e[s][0]) {
          if ("content" === e[s][1].type) {
            n = s;
            break;
          }
          "paragraph" === e[s][1].type && (r = s);
        } else
          ("content" === e[s][1].type && e.splice(s, 1),
            i || "definition" !== e[s][1].type || (i = s));
      let a = {
        type: "setextHeading",
        start: Object.assign({}, e[r][1].start),
        end: Object.assign({}, e[e.length - 1][1].end),
      };
      return (
        (e[r][1].type = "setextHeadingText"),
        i
          ? (e.splice(r, 0, ["enter", a, t]),
            e.splice(i + 1, 0, ["exit", e[n][1], t]),
            (e[n][1].end = Object.assign({}, e[i][1].end)))
          : (e[n][1] = a),
        e.push(["exit", a, t]),
        e
      );
    }
    function nG(e, t, n) {
      let r,
        i = this;
      return s;
      function s(t) {
        let s,
          o = i.events.length;
        for (; o--; )
          if (
            "lineEnding" !== i.events[o][1].type &&
            "linePrefix" !== i.events[o][1].type &&
            "content" !== i.events[o][1].type
          ) {
            s = "paragraph" === i.events[o][1].type;
            break;
          }
        return !i.parser.lazy[i.now().line] && (i.interrupt || s)
          ? (e.enter("setextHeadingLine"), (r = t), a(t))
          : n(t);
      }
      function a(t) {
        return (e.enter("setextHeadingLineSequence"), o(t));
      }
      function o(t) {
        return t === r
          ? (e.consume(t), o)
          : (e.exit("setextHeadingLineSequence"),
            e5(t) ? e7(e, l, "lineSuffix")(t) : l(t));
      }
      function l(r) {
        return null === r || e1(r) ? (e.exit("setextHeadingLine"), t(r)) : n(r);
      }
    }
    let nW = {
        42: nR,
        43: nR,
        45: nR,
        48: nR,
        49: nR,
        50: nR,
        51: nR,
        52: nR,
        53: nR,
        54: nR,
        55: nR,
        56: nR,
        57: nR,
        62: tP,
      },
      nq = { 91: t7 },
      nZ = { [-2]: tZ, [-1]: tZ, 32: tZ },
      nK = {
        35: nr,
        42: nL,
        45: [n$, nL],
        60: nl,
        61: n$,
        95: nL,
        96: tG,
        126: tG,
      },
      nY = { 38: tH, 92: tO },
      nJ = {
        [-5]: nM,
        [-4]: nM,
        [-3]: nM,
        33: nE,
        38: tH,
        42: tA,
        60: [tT, nf],
        91: nD,
        92: [nt, tO],
        93: nx,
        95: tA,
        96: tQ,
      },
      nQ = { null: [tA, tx] },
      nX = { null: [42, 95] },
      n0 = { null: [] };
    e.s(
      [
        "attentionMarkers",
        0,
        nX,
        "contentInitial",
        0,
        nq,
        "disable",
        0,
        n0,
        "document",
        0,
        nW,
        "flow",
        0,
        nK,
        "flowInitial",
        0,
        nZ,
        "insideSpan",
        0,
        nQ,
        "string",
        0,
        nY,
        "text",
        0,
        nJ,
      ],
      945011,
    );
    var n1 = e.i(945011);
    function n2(e) {
      let t = {
        defined: [],
        lazy: {},
        constructs: e$([n1, ...((e || {}).extensions || [])]),
        content: n(e6),
        document: n(te),
        flow: n(tf),
        string: n(tv),
        text: n(ty),
      };
      return t;
      function n(e) {
        return n;
        function n(n) {
          return tk(t, e, n);
        }
      }
    }
    function n5(e) {
      for (; !tl(e); );
      return e;
    }
    let n3 = /[\0\t\n\r]/g;
    function n4() {
      let e,
        t = 1,
        n = "",
        r = !0;
      return i;
      function i(i, s, a) {
        let o,
          l,
          c,
          u,
          d,
          h = [];
        for (
          i =
            n +
            ("string" == typeof i
              ? i.toString()
              : new TextDecoder(s || void 0).decode(i)),
            c = 0,
            n = "",
            r && (65279 === i.charCodeAt(0) && c++, (r = void 0));
          c < i.length;

        ) {
          if (
            ((n3.lastIndex = c),
            (u = (o = n3.exec(i)) && void 0 !== o.index ? o.index : i.length),
            (d = i.charCodeAt(u)),
            !o)
          ) {
            n = i.slice(c);
            break;
          }
          if (10 === d && c === u && e) (h.push(-3), (e = void 0));
          else
            switch (
              (e && (h.push(-5), (e = void 0)),
              c < u && (h.push(i.slice(c, u)), (t += u - c)),
              d)
            ) {
              case 0:
                (h.push(65533), t++);
                break;
              case 9:
                for (l = 4 * Math.ceil(t / 4), h.push(-2); t++ < l; )
                  h.push(-1);
                break;
              case 10:
                (h.push(-4), (t = 1));
                break;
              default:
                ((e = !0), (t = 1));
            }
          c = u + 1;
        }
        return (a && (e && h.push(-5), n && h.push(n), h.push(null)), h);
      }
    }
    function n9(e, t) {
      let n = Number.parseInt(e, t);
      return n < 9 ||
        11 === n ||
        (n > 13 && n < 32) ||
        (n > 126 && n < 160) ||
        (n > 55295 && n < 57344) ||
        (n > 64975 && n < 65008) ||
        (65535 & n) == 65535 ||
        (65535 & n) == 65534 ||
        n > 1114111
        ? ""
        : String.fromCodePoint(n);
    }
    let n7 =
      /\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;
    function n6(e) {
      return e.replace(n7, n8);
    }
    function n8(e, t, n) {
      if (t) return t;
      if (35 === n.charCodeAt(0)) {
        let e = n.charCodeAt(1),
          t = 120 === e || 88 === e;
        return n9(n.slice(t ? 2 : 1), t ? 16 : 10);
      }
      return tz(n) || e;
    }
    let re = {}.hasOwnProperty;
    function rt(e, t, n) {
      return (
        "string" != typeof t && ((n = t), (t = void 0)),
        rn(n)(
          n5(
            n2(n)
              .document()
              .write(n4()(e, t, !0)),
          ),
        )
      );
    }
    function rn(e) {
      let t = {
        transforms: [],
        canContainEols: [
          "emphasis",
          "fragment",
          "heading",
          "paragraph",
          "strong",
        ],
        enter: {
          autolink: s(en),
          autolinkProtocol: S,
          autolinkEmail: S,
          atxHeading: s(J),
          blockQuote: s(W),
          characterEscape: S,
          characterReference: S,
          codeFenced: s(q),
          codeFencedFenceInfo: a,
          codeFencedFenceMeta: a,
          codeIndented: s(q, a),
          codeText: s(Z, a),
          codeTextData: S,
          data: S,
          codeFlowValue: S,
          definition: s(K),
          definitionDestinationString: a,
          definitionLabelString: a,
          definitionTitleString: a,
          emphasis: s(Y),
          hardBreakEscape: s(X),
          hardBreakTrailing: s(X),
          htmlFlow: s(ee, a),
          htmlFlowData: S,
          htmlText: s(ee, a),
          htmlTextData: S,
          image: s(et),
          label: a,
          link: s(en),
          listItem: s(ei),
          listItemValue: h,
          listOrdered: s(er, d),
          listUnordered: s(er),
          paragraph: s(es),
          reference: B,
          referenceString: a,
          resourceDestinationString: a,
          resourceTitleString: a,
          setextHeading: s(J),
          strong: s(ea),
          thematicBreak: s(el),
        },
        exit: {
          atxHeading: l(),
          atxHeadingSequence: j,
          autolink: l(),
          autolinkEmail: G,
          autolinkProtocol: U,
          blockQuote: l(),
          characterEscapeValue: N,
          characterReferenceMarkerHexadecimal: z,
          characterReferenceMarkerNumeric: z,
          characterReferenceValue: H,
          characterReference: $,
          codeFenced: l(g),
          codeFencedFence: f,
          codeFencedFenceInfo: p,
          codeFencedFenceMeta: m,
          codeFlowValue: N,
          codeIndented: l(x),
          codeText: l(M),
          codeTextData: N,
          data: N,
          definition: l(),
          definitionDestinationString: b,
          definitionLabelString: v,
          definitionTitleString: y,
          emphasis: l(),
          hardBreakEscape: l(A),
          hardBreakTrailing: l(A),
          htmlFlow: l(D),
          htmlFlowData: N,
          htmlText: l(I),
          htmlTextData: N,
          image: l(L),
          label: R,
          labelText: P,
          lineEnding: E,
          link: l(T),
          listItem: l(),
          listOrdered: l(),
          listUnordered: l(),
          paragraph: l(),
          referenceString: V,
          resourceDestinationString: F,
          resourceTitleString: _,
          resource: O,
          setextHeading: l(k),
          setextHeadingLineSequence: C,
          setextHeadingText: w,
          strong: l(),
          thematicBreak: l(),
        },
      };
      ri(t, (e || {}).mdastExtensions || []);
      let n = {};
      return r;
      function r(e) {
        let r = { type: "root", children: [] },
          s = {
            stack: [r],
            tokenStack: [],
            config: t,
            enter: o,
            exit: c,
            buffer: a,
            resume: u,
            data: n,
          },
          l = [],
          d = -1;
        for (; ++d < e.length; )
          ("listOrdered" === e[d][1].type ||
            "listUnordered" === e[d][1].type) &&
            ("enter" === e[d][0] ? l.push(d) : (d = i(e, l.pop(), d)));
        for (d = -1; ++d < e.length; ) {
          let n = t[e[d][0]];
          re.call(n, e[d][1].type) &&
            n[e[d][1].type].call(
              Object.assign({ sliceSerialize: e[d][2].sliceSerialize }, s),
              e[d][1],
            );
        }
        if (s.tokenStack.length > 0) {
          let e = s.tokenStack[s.tokenStack.length - 1];
          (e[1] || ra).call(s, void 0, e[0]);
        }
        for (
          r.position = {
            start: rr(
              e.length > 0 ? e[0][1].start : { line: 1, column: 1, offset: 0 },
            ),
            end: rr(
              e.length > 0
                ? e[e.length - 2][1].end
                : { line: 1, column: 1, offset: 0 },
            ),
          },
            d = -1;
          ++d < t.transforms.length;

        )
          r = t.transforms[d](r) || r;
        return r;
      }
      function i(e, t, n) {
        let r,
          i,
          s,
          a,
          o = t - 1,
          l = -1,
          c = !1;
        for (; ++o <= n; ) {
          let t = e[o];
          switch (t[1].type) {
            case "listUnordered":
            case "listOrdered":
            case "blockQuote":
              ("enter" === t[0] ? l++ : l--, (a = void 0));
              break;
            case "lineEndingBlank":
              "enter" === t[0] && (!r || a || l || s || (s = o), (a = void 0));
              break;
            case "linePrefix":
            case "listItemValue":
            case "listItemMarker":
            case "listItemPrefix":
            case "listItemPrefixWhitespace":
              break;
            default:
              a = void 0;
          }
          if (
            (!l && "enter" === t[0] && "listItemPrefix" === t[1].type) ||
            (-1 === l &&
              "exit" === t[0] &&
              ("listUnordered" === t[1].type || "listOrdered" === t[1].type))
          ) {
            if (r) {
              let a = o;
              for (i = void 0; a--; ) {
                let t = e[a];
                if (
                  "lineEnding" === t[1].type ||
                  "lineEndingBlank" === t[1].type
                ) {
                  if ("exit" === t[0]) continue;
                  (i && ((e[i][1].type = "lineEndingBlank"), (c = !0)),
                    (t[1].type = "lineEnding"),
                    (i = a));
                } else if (
                  "linePrefix" === t[1].type ||
                  "blockQuotePrefix" === t[1].type ||
                  "blockQuotePrefixWhitespace" === t[1].type ||
                  "blockQuoteMarker" === t[1].type ||
                  "listItemIndent" === t[1].type
                );
                else break;
              }
              (s && (!i || s < i) && (r._spread = !0),
                (r.end = Object.assign({}, i ? e[i][1].start : t[1].end)),
                e.splice(i || o, 0, ["exit", r, t[2]]),
                o++,
                n++);
            }
            if ("listItemPrefix" === t[1].type) {
              let i = {
                type: "listItem",
                _spread: !1,
                start: Object.assign({}, t[1].start),
                end: void 0,
              };
              ((r = i),
                e.splice(o, 0, ["enter", i, t[2]]),
                o++,
                n++,
                (s = void 0),
                (a = !0));
            }
          }
        }
        return ((e[t][1]._spread = c), n);
      }
      function s(e, t) {
        return n;
        function n(n) {
          (o.call(this, e(n), n), t && t.call(this, n));
        }
      }
      function a() {
        this.stack.push({ type: "fragment", children: [] });
      }
      function o(e, t, n) {
        (this.stack[this.stack.length - 1].children.push(e),
          this.stack.push(e),
          this.tokenStack.push([t, n || void 0]),
          (e.position = { start: rr(t.start), end: void 0 }));
      }
      function l(e) {
        return t;
        function t(t) {
          (e && e.call(this, t), c.call(this, t));
        }
      }
      function c(e, t) {
        let n = this.stack.pop(),
          r = this.tokenStack.pop();
        if (r)
          r[0].type !== e.type &&
            (t ? t.call(this, e, r[0]) : (r[1] || ra).call(this, e, r[0]));
        else
          throw Error(
            "Cannot close `" +
              e.type +
              "` (" +
              Q({ start: e.start, end: e.end }) +
              "): its not open",
          );
        n.position.end = rr(e.end);
      }
      function u() {
        return eF(this.stack.pop());
      }
      function d() {
        this.data.expectingFirstListItemValue = !0;
      }
      function h(e) {
        this.data.expectingFirstListItemValue &&
          ((this.stack[this.stack.length - 2].start = Number.parseInt(
            this.sliceSerialize(e),
            10,
          )),
          (this.data.expectingFirstListItemValue = void 0));
      }
      function p() {
        let e = this.resume();
        this.stack[this.stack.length - 1].lang = e;
      }
      function m() {
        let e = this.resume();
        this.stack[this.stack.length - 1].meta = e;
      }
      function f() {
        this.data.flowCodeInside ||
          (this.buffer(), (this.data.flowCodeInside = !0));
      }
      function g() {
        let e = this.resume();
        ((this.stack[this.stack.length - 1].value = e.replace(
          /^(\r?\n|\r)|(\r?\n|\r)$/g,
          "",
        )),
          (this.data.flowCodeInside = void 0));
      }
      function x() {
        let e = this.resume();
        this.stack[this.stack.length - 1].value = e.replace(/(\r?\n|\r)$/g, "");
      }
      function v(e) {
        let t = this.resume(),
          n = this.stack[this.stack.length - 1];
        ((n.label = t),
          (n.identifier = t9(this.sliceSerialize(e)).toLowerCase()));
      }
      function y() {
        let e = this.resume();
        this.stack[this.stack.length - 1].title = e;
      }
      function b() {
        let e = this.resume();
        this.stack[this.stack.length - 1].url = e;
      }
      function j(e) {
        let t = this.stack[this.stack.length - 1];
        t.depth || (t.depth = this.sliceSerialize(e).length);
      }
      function w() {
        this.data.setextHeadingSlurpLineEnding = !0;
      }
      function C(e) {
        this.stack[this.stack.length - 1].depth =
          61 === this.sliceSerialize(e).codePointAt(0) ? 1 : 2;
      }
      function k() {
        this.data.setextHeadingSlurpLineEnding = void 0;
      }
      function S(e) {
        let t = this.stack[this.stack.length - 1].children,
          n = t[t.length - 1];
        ((n && "text" === n.type) ||
          (((n = eo()).position = { start: rr(e.start), end: void 0 }),
          t.push(n)),
          this.stack.push(n));
      }
      function N(e) {
        let t = this.stack.pop();
        ((t.value += this.sliceSerialize(e)), (t.position.end = rr(e.end)));
      }
      function E(e) {
        let n = this.stack[this.stack.length - 1];
        if (this.data.atHardBreak) {
          ((n.children[n.children.length - 1].position.end = rr(e.end)),
            (this.data.atHardBreak = void 0));
          return;
        }
        !this.data.setextHeadingSlurpLineEnding &&
          t.canContainEols.includes(n.type) &&
          (S.call(this, e), N.call(this, e));
      }
      function A() {
        this.data.atHardBreak = !0;
      }
      function D() {
        let e = this.resume();
        this.stack[this.stack.length - 1].value = e;
      }
      function I() {
        let e = this.resume();
        this.stack[this.stack.length - 1].value = e;
      }
      function M() {
        let e = this.resume();
        this.stack[this.stack.length - 1].value = e;
      }
      function T() {
        let e = this.stack[this.stack.length - 1];
        if (this.data.inReference) {
          let t = this.data.referenceType || "shortcut";
          ((e.type += "Reference"),
            (e.referenceType = t),
            delete e.url,
            delete e.title);
        } else (delete e.identifier, delete e.label);
        this.data.referenceType = void 0;
      }
      function L() {
        let e = this.stack[this.stack.length - 1];
        if (this.data.inReference) {
          let t = this.data.referenceType || "shortcut";
          ((e.type += "Reference"),
            (e.referenceType = t),
            delete e.url,
            delete e.title);
        } else (delete e.identifier, delete e.label);
        this.data.referenceType = void 0;
      }
      function P(e) {
        let t = this.sliceSerialize(e),
          n = this.stack[this.stack.length - 2];
        ((n.label = n6(t)), (n.identifier = t9(t).toLowerCase()));
      }
      function R() {
        let e = this.stack[this.stack.length - 1],
          t = this.resume(),
          n = this.stack[this.stack.length - 1];
        ((this.data.inReference = !0),
          "link" === n.type ? (n.children = e.children) : (n.alt = t));
      }
      function F() {
        let e = this.resume();
        this.stack[this.stack.length - 1].url = e;
      }
      function _() {
        let e = this.resume();
        this.stack[this.stack.length - 1].title = e;
      }
      function O() {
        this.data.inReference = void 0;
      }
      function B() {
        this.data.referenceType = "collapsed";
      }
      function V(e) {
        let t = this.resume(),
          n = this.stack[this.stack.length - 1];
        ((n.label = t),
          (n.identifier = t9(this.sliceSerialize(e)).toLowerCase()),
          (this.data.referenceType = "full"));
      }
      function z(e) {
        this.data.characterReferenceType = e.type;
      }
      function H(e) {
        let t,
          n = this.sliceSerialize(e),
          r = this.data.characterReferenceType;
        r
          ? ((t = n9(n, "characterReferenceMarkerNumeric" === r ? 10 : 16)),
            (this.data.characterReferenceType = void 0))
          : (t = tz(n));
        let i = this.stack[this.stack.length - 1];
        i.value += t;
      }
      function $(e) {
        this.stack.pop().position.end = rr(e.end);
      }
      function U(e) {
        (N.call(this, e),
          (this.stack[this.stack.length - 1].url = this.sliceSerialize(e)));
      }
      function G(e) {
        (N.call(this, e),
          (this.stack[this.stack.length - 1].url =
            "mailto:" + this.sliceSerialize(e)));
      }
      function W() {
        return { type: "blockquote", children: [] };
      }
      function q() {
        return { type: "code", lang: null, meta: null, value: "" };
      }
      function Z() {
        return { type: "inlineCode", value: "" };
      }
      function K() {
        return {
          type: "definition",
          identifier: "",
          label: null,
          title: null,
          url: "",
        };
      }
      function Y() {
        return { type: "emphasis", children: [] };
      }
      function J() {
        return { type: "heading", depth: 0, children: [] };
      }
      function X() {
        return { type: "break" };
      }
      function ee() {
        return { type: "html", value: "" };
      }
      function et() {
        return { type: "image", title: null, url: "", alt: null };
      }
      function en() {
        return { type: "link", title: null, url: "", children: [] };
      }
      function er(e) {
        return {
          type: "list",
          ordered: "listOrdered" === e.type,
          start: null,
          spread: e._spread,
          children: [],
        };
      }
      function ei(e) {
        return {
          type: "listItem",
          spread: e._spread,
          checked: null,
          children: [],
        };
      }
      function es() {
        return { type: "paragraph", children: [] };
      }
      function ea() {
        return { type: "strong", children: [] };
      }
      function eo() {
        return { type: "text", value: "" };
      }
      function el() {
        return { type: "thematicBreak" };
      }
    }
    function rr(e) {
      return { line: e.line, column: e.column, offset: e.offset };
    }
    function ri(e, t) {
      let n = -1;
      for (; ++n < t.length; ) {
        let r = t[n];
        Array.isArray(r) ? ri(e, r) : rs(e, r);
      }
    }
    function rs(e, t) {
      let n;
      for (n in t)
        if (re.call(t, n))
          switch (n) {
            case "canContainEols": {
              let r = t[n];
              r && e[n].push(...r);
              break;
            }
            case "transforms": {
              let r = t[n];
              r && e[n].push(...r);
              break;
            }
            case "enter":
            case "exit": {
              let r = t[n];
              r && Object.assign(e[n], r);
            }
          }
    }
    function ra(e, t) {
      if (e)
        throw Error(
          "Cannot close `" +
            e.type +
            "` (" +
            Q({ start: e.start, end: e.end }) +
            "): a different token (`" +
            t.type +
            "`, " +
            Q({ start: t.start, end: t.end }) +
            ") is open",
        );
      throw Error(
        "Cannot close document, a token (`" +
          t.type +
          "`, " +
          Q({ start: t.start, end: t.end }) +
          ") is still open",
      );
    }
    function ro(e) {
      let t = this;
      function n(n) {
        return rt(n, {
          ...t.data("settings"),
          ...e,
          extensions: t.data("micromarkExtensions") || [],
          mdastExtensions: t.data("fromMarkdownExtensions") || [],
        });
      }
      t.parser = n;
    }
    let rl = -1,
      rc = 0,
      ru = 1,
      rd = 2,
      rh = 3,
      rp = 4,
      rm = 5,
      rf = 6,
      rg = 7,
      rx = 8,
      rv = "object" == typeof self ? self : globalThis,
      ry = (e, t) => {
        let n = (t, n) => (e.set(n, t), t),
          r = (i) => {
            if (e.has(i)) return e.get(i);
            let [s, a] = t[i];
            switch (s) {
              case rc:
              case rl:
                return n(a, i);
              case ru: {
                let e = n([], i);
                for (let t of a) e.push(r(t));
                return e;
              }
              case rd: {
                let e = n({}, i);
                for (let [t, n] of a) e[r(t)] = r(n);
                return e;
              }
              case rh:
                return n(new Date(a), i);
              case rp: {
                let { source: e, flags: t } = a;
                return n(new RegExp(e, t), i);
              }
              case rm: {
                let e = n(new Map(), i);
                for (let [t, n] of a) e.set(r(t), r(n));
                return e;
              }
              case rf: {
                let e = n(new Set(), i);
                for (let t of a) e.add(r(t));
                return e;
              }
              case rg: {
                let { name: e, message: t } = a;
                return n(new rv[e](t), i);
              }
              case rx:
                return n(BigInt(a), i);
              case "BigInt":
                return n(Object(BigInt(a)), i);
              case "ArrayBuffer":
                return n(new Uint8Array(a).buffer, a);
              case "DataView": {
                let { buffer: e } = new Uint8Array(a);
                return n(new DataView(e), a);
              }
            }
            return n(new rv[s](a), i);
          };
        return r;
      },
      rb = (e) => ry(new Map(), e)(0),
      rj = "",
      { toString: rw } = {},
      { keys: rC } = Object,
      rk = (e) => {
        let t = typeof e;
        if ("object" !== t || !e) return [rc, t];
        let n = rw.call(e).slice(8, -1);
        switch (n) {
          case "Array":
            return [ru, rj];
          case "Object":
            return [rd, rj];
          case "Date":
            return [rh, rj];
          case "RegExp":
            return [rp, rj];
          case "Map":
            return [rm, rj];
          case "Set":
            return [rf, rj];
          case "DataView":
            return [ru, n];
        }
        return n.includes("Array")
          ? [ru, n]
          : n.includes("Error")
            ? [rg, n]
            : [rd, n];
      },
      rS = ([e, t]) => e === rc && ("function" === t || "symbol" === t),
      rN = (e, t, n, r) => {
        let i = (e, t) => {
            let i = r.push(e) - 1;
            return (n.set(t, i), i);
          },
          s = (r) => {
            if (n.has(r)) return n.get(r);
            let [a, o] = rk(r);
            switch (a) {
              case rc: {
                let t = r;
                switch (o) {
                  case "bigint":
                    ((a = rx), (t = r.toString()));
                    break;
                  case "function":
                  case "symbol":
                    if (e) throw TypeError("unable to serialize " + o);
                    t = null;
                    break;
                  case "undefined":
                    return i([rl], r);
                }
                return i([a, t], r);
              }
              case ru: {
                if (o) {
                  let e = r;
                  return (
                    "DataView" === o
                      ? (e = new Uint8Array(r.buffer))
                      : "ArrayBuffer" === o && (e = new Uint8Array(r)),
                    i([o, [...e]], r)
                  );
                }
                let e = [],
                  t = i([a, e], r);
                for (let t of r) e.push(s(t));
                return t;
              }
              case rd: {
                if (o)
                  switch (o) {
                    case "BigInt":
                      return i([o, r.toString()], r);
                    case "Boolean":
                    case "Number":
                    case "String":
                      return i([o, r.valueOf()], r);
                  }
                if (t && "toJSON" in r) return s(r.toJSON());
                let n = [],
                  l = i([a, n], r);
                for (let t of rC(r))
                  (e || !rS(rk(r[t]))) && n.push([s(t), s(r[t])]);
                return l;
              }
              case rh:
                return i([a, r.toISOString()], r);
              case rp: {
                let { source: e, flags: t } = r;
                return i([a, { source: e, flags: t }], r);
              }
              case rm: {
                let t = [],
                  n = i([a, t], r);
                for (let [n, i] of r)
                  (e || !(rS(rk(n)) || rS(rk(i)))) && t.push([s(n), s(i)]);
                return n;
              }
              case rf: {
                let t = [],
                  n = i([a, t], r);
                for (let n of r) (e || !rS(rk(n))) && t.push(s(n));
                return n;
              }
            }
            let { message: l } = r;
            return i([a, { name: o, message: l }], r);
          };
        return s;
      },
      rE = (e, { json: t, lossy: n } = {}) => {
        let r = [];
        return (rN(!(t || n), !!t, new Map(), r)(e), r);
      },
      rA =
        "function" == typeof structuredClone
          ? (e, t) =>
              t && ("json" in t || "lossy" in t)
                ? rb(rE(e, t))
                : structuredClone(e)
          : (e, t) => rb(rE(e, t)),
      rD = { '"': "quot", "&": "amp", "<": "lt", ">": "gt" };
    function rI(e) {
      return e.replace(/["&<>]/g, t);
      function t(e) {
        return "&" + rD[e] + ";";
      }
    }
    function rM(e, t) {
      let n = rI(rT(e || ""));
      if (!t) return n;
      let r = n.indexOf(":"),
        i = n.indexOf("?"),
        s = n.indexOf("#"),
        a = n.indexOf("/");
      return r < 0 ||
        (a > -1 && r > a) ||
        (i > -1 && r > i) ||
        (s > -1 && r > s) ||
        t.test(n.slice(0, r))
        ? n
        : "";
    }
    function rT(e) {
      let t = [],
        n = -1,
        r = 0,
        i = 0;
      for (; ++n < e.length; ) {
        let s = e.charCodeAt(n),
          a = "";
        if (37 === s && eK(e.charCodeAt(n + 1)) && eK(e.charCodeAt(n + 2)))
          i = 2;
        else if (s < 128)
          /[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s)) ||
            (a = String.fromCharCode(s));
        else if (s > 55295 && s < 57344) {
          let t = e.charCodeAt(n + 1);
          s < 56320 && t > 56319 && t < 57344
            ? ((a = String.fromCharCode(s, t)), (i = 1))
            : (a = "");
        } else a = String.fromCharCode(s);
        (a &&
          (t.push(e.slice(r, n), encodeURIComponent(a)),
          (r = n + i + 1),
          (a = "")),
          i && ((n += i), (i = 0)));
      }
      return t.join("") + e.slice(r);
    }
    function rL(e, t) {
      let n = [{ type: "text", value: "" }];
      return (
        t > 1 &&
          n.push({
            type: "element",
            tagName: "sup",
            properties: {},
            children: [{ type: "text", value: String(t) }],
          }),
        n
      );
    }
    function rP(e, t) {
      return "Back to reference " + (e + 1) + (t > 1 ? "-" + t : "");
    }
    function rR(e) {
      let t =
          "string" == typeof e.options.clobberPrefix
            ? e.options.clobberPrefix
            : "user-content-",
        n = e.options.footnoteBackContent || rL,
        r = e.options.footnoteBackLabel || rP,
        i = e.options.footnoteLabel || "Footnotes",
        s = e.options.footnoteLabelTagName || "h2",
        a = e.options.footnoteLabelProperties || { className: ["sr-only"] },
        o = [],
        l = -1;
      for (; ++l < e.footnoteOrder.length; ) {
        let i = e.footnoteById.get(e.footnoteOrder[l]);
        if (!i) continue;
        let s = e.all(i),
          a = String(i.identifier).toUpperCase(),
          c = rT(a.toLowerCase()),
          u = 0,
          d = [],
          h = e.footnoteCounts.get(a);
        for (; void 0 !== h && ++u <= h; ) {
          d.length > 0 && d.push({ type: "text", value: " " });
          let e = "string" == typeof n ? n : n(l, u);
          ("string" == typeof e && (e = { type: "text", value: e }),
            d.push({
              type: "element",
              tagName: "a",
              properties: {
                href: "#" + t + "fnref-" + c + (u > 1 ? "-" + u : ""),
                dataFootnoteBackref: "",
                ariaLabel: "string" == typeof r ? r : r(l, u),
                className: ["data-footnote-backref"],
              },
              children: Array.isArray(e) ? e : [e],
            }));
        }
        let p = s[s.length - 1];
        if (p && "element" === p.type && "p" === p.tagName) {
          let e = p.children[p.children.length - 1];
          (e && "text" === e.type
            ? (e.value += " ")
            : p.children.push({ type: "text", value: " " }),
            p.children.push(...d));
        } else s.push(...d);
        let m = {
          type: "element",
          tagName: "li",
          properties: { id: t + "fn-" + c },
          children: e.wrap(s, !0),
        };
        (e.patch(i, m), o.push(m));
      }
      if (0 !== o.length)
        return {
          type: "element",
          tagName: "section",
          properties: { dataFootnotes: !0, className: ["footnotes"] },
          children: [
            {
              type: "element",
              tagName: s,
              properties: { ...rA(a), id: "footnote-label" },
              children: [{ type: "text", value: i }],
            },
            { type: "text", value: "\n" },
            {
              type: "element",
              tagName: "ol",
              properties: {},
              children: e.wrap(o, !0),
            },
            { type: "text", value: "\n" },
          ],
        };
    }
    e.s(["normalizeUri", () => rT, "sanitizeUri", () => rM], 983691);
    let rF = function (e) {
      if (null == e) return rz;
      if ("function" == typeof e) return rV(e);
      if ("object" == typeof e) return Array.isArray(e) ? r_(e) : rO(e);
      if ("string" == typeof e) return rB(e);
      throw Error("Expected function, string, or object as test");
    };
    function r_(e) {
      let t = [],
        n = -1;
      for (; ++n < e.length; ) t[n] = rF(e[n]);
      return rV(r);
      function r(...e) {
        let n = -1;
        for (; ++n < t.length; ) if (t[n].apply(this, e)) return !0;
        return !1;
      }
    }
    function rO(e) {
      let t = e;
      return rV(n);
      function n(n) {
        let r,
          i = n;
        for (r in e) if (i[r] !== t[r]) return !1;
        return !0;
      }
    }
    function rB(e) {
      return rV(t);
      function t(t) {
        return t && t.type === e;
      }
    }
    function rV(e) {
      return t;
      function t(t, n, r) {
        return !!(
          rH(t) &&
          e.call(this, t, "number" == typeof n ? n : void 0, r || void 0)
        );
      }
    }
    function rz() {
      return !0;
    }
    function rH(e) {
      return null !== e && "object" == typeof e && "type" in e;
    }
    function r$(e) {
      return e;
    }
    e.s(["convert", 0, rF], 249548);
    let rU = [],
      rG = !0,
      rW = !1,
      rq = "skip";
    function rZ(e, t, n, r) {
      let i;
      "function" == typeof t && "function" != typeof n
        ? ((r = n), (n = t))
        : (i = t);
      let s = rF(i),
        a = r ? -1 : 1;
      function o(e, i, l) {
        let c = e && "object" == typeof e ? e : {};
        if ("string" == typeof c.type) {
          let t =
            "string" == typeof c.tagName
              ? c.tagName
              : "string" == typeof c.name
                ? c.name
                : void 0;
          Object.defineProperty(u, "name", {
            value: "node (" + r$(e.type + (t ? "<" + t + ">" : "")) + ")",
          });
        }
        return u;
        function u() {
          let c,
            u,
            d,
            h = rU;
          if (
            (!t || s(e, i, l[l.length - 1] || void 0)) &&
            (h = rK(n(e, l)))[0] === rW
          )
            return h;
          if ("children" in e && e.children) {
            let t = e;
            if (t.children && h[0] !== rq)
              for (
                u = (r ? t.children.length : -1) + a, d = l.concat(t);
                u > -1 && u < t.children.length;

              ) {
                if ((c = o(t.children[u], u, d)())[0] === rW) return c;
                u = "number" == typeof c[1] ? c[1] : u + a;
              }
          }
          return h;
        }
      }
      o(e, void 0, [])();
    }
    function rK(e) {
      return Array.isArray(e)
        ? e
        : "number" == typeof e
          ? [rG, e]
          : null == e
            ? rU
            : [e];
    }
    function rY(e, t, n, r) {
      let i, s, a;
      function o(e, t) {
        let n = t[t.length - 1],
          r = n ? n.children.indexOf(e) : void 0;
        return a(e, r, n);
      }
      ("function" == typeof t && "function" != typeof n
        ? ((s = void 0), (a = t), (i = n))
        : ((s = t), (a = n), (i = r)),
        rZ(e, s, o, i));
    }
    function rJ(e, t) {
      let n = t.referenceType,
        r = "]";
      if (
        ("collapsed" === n
          ? (r += "[]")
          : "full" === n && (r += "[" + (t.label || t.identifier) + "]"),
        "imageReference" === t.type)
      )
        return [{ type: "text", value: "![" + t.alt + r }];
      let i = e.all(t),
        s = i[0];
      s && "text" === s.type
        ? (s.value = "[" + s.value)
        : i.unshift({ type: "text", value: "[" });
      let a = i[i.length - 1];
      return (
        a && "text" === a.type
          ? (a.value += r)
          : i.push({ type: "text", value: r }),
        i
      );
    }
    function rQ(e) {
      let t = !1;
      if ("list" === e.type) {
        t = e.spread || !1;
        let n = e.children,
          r = -1;
        for (; !t && ++r < n.length; ) t = rX(n[r]);
      }
      return t;
    }
    function rX(e) {
      let t = e.spread;
      return null == t ? e.children.length > 1 : t;
    }
    (e.s(["EXIT", 0, rW, "visitParents", () => rZ], 939049),
      e.s(["visit", () => rY], 446207));
    let r0 = 9,
      r1 = 32;
    function r2(e) {
      let t = String(e),
        n = /\r?\n|\r/g,
        r = n.exec(t),
        i = 0,
        s = [];
      for (; r; )
        (s.push(r5(t.slice(i, r.index), i > 0, !0), r[0]),
          (i = r.index + r[0].length),
          (r = n.exec(t)));
      return (s.push(r5(t.slice(i), i > 0, !1)), s.join(""));
    }
    function r5(e, t, n) {
      let r = 0,
        i = e.length;
      if (t) {
        let t = e.codePointAt(r);
        for (; t === r0 || t === r1; ) (r++, (t = e.codePointAt(r)));
      }
      if (n) {
        let t = e.codePointAt(i - 1);
        for (; t === r0 || t === r1; ) (i--, (t = e.codePointAt(i - 1)));
      }
      return i > r ? e.slice(r, i) : "";
    }
    let r3 = {
      blockquote: function (e, t) {
        let n = {
          type: "element",
          tagName: "blockquote",
          properties: {},
          children: e.wrap(e.all(t), !0),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      break: function (e, t) {
        let n = {
          type: "element",
          tagName: "br",
          properties: {},
          children: [],
        };
        return (
          e.patch(t, n),
          [e.applyData(t, n), { type: "text", value: "\n" }]
        );
      },
      code: function (e, t) {
        let n = t.value ? t.value + "\n" : "",
          r = {};
        t.lang && (r.className = ["language-" + t.lang]);
        let i = {
          type: "element",
          tagName: "code",
          properties: r,
          children: [{ type: "text", value: n }],
        };
        return (
          t.meta && (i.data = { meta: t.meta }),
          e.patch(t, i),
          (i = {
            type: "element",
            tagName: "pre",
            properties: {},
            children: [(i = e.applyData(t, i))],
          }),
          e.patch(t, i),
          i
        );
      },
      delete: function (e, t) {
        let n = {
          type: "element",
          tagName: "del",
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      emphasis: function (e, t) {
        let n = {
          type: "element",
          tagName: "em",
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      footnoteReference: function (e, t) {
        let n,
          r =
            "string" == typeof e.options.clobberPrefix
              ? e.options.clobberPrefix
              : "user-content-",
          i = String(t.identifier).toUpperCase(),
          s = rT(i.toLowerCase()),
          a = e.footnoteOrder.indexOf(i),
          o = e.footnoteCounts.get(i);
        (void 0 === o
          ? ((o = 0), e.footnoteOrder.push(i), (n = e.footnoteOrder.length))
          : (n = a + 1),
          (o += 1),
          e.footnoteCounts.set(i, o));
        let l = {
          type: "element",
          tagName: "a",
          properties: {
            href: "#" + r + "fn-" + s,
            id: r + "fnref-" + s + (o > 1 ? "-" + o : ""),
            dataFootnoteRef: !0,
            ariaDescribedBy: ["footnote-label"],
          },
          children: [{ type: "text", value: String(n) }],
        };
        e.patch(t, l);
        let c = {
          type: "element",
          tagName: "sup",
          properties: {},
          children: [l],
        };
        return (e.patch(t, c), e.applyData(t, c));
      },
      heading: function (e, t) {
        let n = {
          type: "element",
          tagName: "h" + t.depth,
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      html: function (e, t) {
        if (e.options.allowDangerousHtml) {
          let n = { type: "raw", value: t.value };
          return (e.patch(t, n), e.applyData(t, n));
        }
      },
      imageReference: function (e, t) {
        let n = String(t.identifier).toUpperCase(),
          r = e.definitionById.get(n);
        if (!r) return rJ(e, t);
        let i = { src: rT(r.url || ""), alt: t.alt };
        null !== r.title && void 0 !== r.title && (i.title = r.title);
        let s = {
          type: "element",
          tagName: "img",
          properties: i,
          children: [],
        };
        return (e.patch(t, s), e.applyData(t, s));
      },
      image: function (e, t) {
        let n = { src: rT(t.url) };
        (null !== t.alt && void 0 !== t.alt && (n.alt = t.alt),
          null !== t.title && void 0 !== t.title && (n.title = t.title));
        let r = {
          type: "element",
          tagName: "img",
          properties: n,
          children: [],
        };
        return (e.patch(t, r), e.applyData(t, r));
      },
      inlineCode: function (e, t) {
        let n = { type: "text", value: t.value.replace(/\r?\n|\r/g, " ") };
        e.patch(t, n);
        let r = {
          type: "element",
          tagName: "code",
          properties: {},
          children: [n],
        };
        return (e.patch(t, r), e.applyData(t, r));
      },
      linkReference: function (e, t) {
        let n = String(t.identifier).toUpperCase(),
          r = e.definitionById.get(n);
        if (!r) return rJ(e, t);
        let i = { href: rT(r.url || "") };
        null !== r.title && void 0 !== r.title && (i.title = r.title);
        let s = {
          type: "element",
          tagName: "a",
          properties: i,
          children: e.all(t),
        };
        return (e.patch(t, s), e.applyData(t, s));
      },
      link: function (e, t) {
        let n = { href: rT(t.url) };
        null !== t.title && void 0 !== t.title && (n.title = t.title);
        let r = {
          type: "element",
          tagName: "a",
          properties: n,
          children: e.all(t),
        };
        return (e.patch(t, r), e.applyData(t, r));
      },
      listItem: function (e, t, n) {
        let r = e.all(t),
          i = n ? rQ(n) : rX(t),
          s = {},
          a = [];
        if ("boolean" == typeof t.checked) {
          let e,
            n = r[0];
          (n && "element" === n.type && "p" === n.tagName
            ? (e = n)
            : ((e = {
                type: "element",
                tagName: "p",
                properties: {},
                children: [],
              }),
              r.unshift(e)),
            e.children.length > 0 &&
              e.children.unshift({ type: "text", value: " " }),
            e.children.unshift({
              type: "element",
              tagName: "input",
              properties: {
                type: "checkbox",
                checked: t.checked,
                disabled: !0,
              },
              children: [],
            }),
            (s.className = ["task-list-item"]));
        }
        let o = -1;
        for (; ++o < r.length; ) {
          let e = r[o];
          ((i || 0 !== o || "element" !== e.type || "p" !== e.tagName) &&
            a.push({ type: "text", value: "\n" }),
            "element" !== e.type || "p" !== e.tagName || i
              ? a.push(e)
              : a.push(...e.children));
        }
        let l = r[r.length - 1];
        l &&
          (i || "element" !== l.type || "p" !== l.tagName) &&
          a.push({ type: "text", value: "\n" });
        let c = { type: "element", tagName: "li", properties: s, children: a };
        return (e.patch(t, c), e.applyData(t, c));
      },
      list: function (e, t) {
        let n = {},
          r = e.all(t),
          i = -1;
        for (
          "number" == typeof t.start && 1 !== t.start && (n.start = t.start);
          ++i < r.length;

        ) {
          let e = r[i];
          if (
            "element" === e.type &&
            "li" === e.tagName &&
            e.properties &&
            Array.isArray(e.properties.className) &&
            e.properties.className.includes("task-list-item")
          ) {
            n.className = ["contains-task-list"];
            break;
          }
        }
        let s = {
          type: "element",
          tagName: t.ordered ? "ol" : "ul",
          properties: n,
          children: e.wrap(r, !0),
        };
        return (e.patch(t, s), e.applyData(t, s));
      },
      paragraph: function (e, t) {
        let n = {
          type: "element",
          tagName: "p",
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      root: function (e, t) {
        let n = { type: "root", children: e.wrap(e.all(t)) };
        return (e.patch(t, n), e.applyData(t, n));
      },
      strong: function (e, t) {
        let n = {
          type: "element",
          tagName: "strong",
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      table: function (e, t) {
        let n = e.all(t),
          r = n.shift(),
          i = [];
        if (r) {
          let n = {
            type: "element",
            tagName: "thead",
            properties: {},
            children: e.wrap([r], !0),
          };
          (e.patch(t.children[0], n), i.push(n));
        }
        if (n.length > 0) {
          let r = {
              type: "element",
              tagName: "tbody",
              properties: {},
              children: e.wrap(n, !0),
            },
            s = K(t.children[1]),
            a = Z(t.children[t.children.length - 1]);
          (s && a && (r.position = { start: s, end: a }), i.push(r));
        }
        let s = {
          type: "element",
          tagName: "table",
          properties: {},
          children: e.wrap(i, !0),
        };
        return (e.patch(t, s), e.applyData(t, s));
      },
      tableCell: function (e, t) {
        let n = {
          type: "element",
          tagName: "td",
          properties: {},
          children: e.all(t),
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      tableRow: function (e, t, n) {
        let r = n ? n.children : void 0,
          i = 0 === (r ? r.indexOf(t) : 1) ? "th" : "td",
          s = n && "table" === n.type ? n.align : void 0,
          a = s ? s.length : t.children.length,
          o = -1,
          l = [];
        for (; ++o < a; ) {
          let n = t.children[o],
            r = {},
            a = s ? s[o] : void 0;
          a && (r.align = a);
          let c = { type: "element", tagName: i, properties: r, children: [] };
          (n &&
            ((c.children = e.all(n)), e.patch(n, c), (c = e.applyData(n, c))),
            l.push(c));
        }
        let c = {
          type: "element",
          tagName: "tr",
          properties: {},
          children: e.wrap(l, !0),
        };
        return (e.patch(t, c), e.applyData(t, c));
      },
      text: function (e, t) {
        let n = { type: "text", value: r2(String(t.value)) };
        return (e.patch(t, n), e.applyData(t, n));
      },
      thematicBreak: function (e, t) {
        let n = {
          type: "element",
          tagName: "hr",
          properties: {},
          children: [],
        };
        return (e.patch(t, n), e.applyData(t, n));
      },
      toml: r4,
      yaml: r4,
      definition: r4,
      footnoteDefinition: r4,
    };
    function r4() {}
    let r9 = {}.hasOwnProperty,
      r7 = {};
    function r6(e, t) {
      let n = t || r7,
        r = new Map(),
        i = new Map(),
        s = {
          all: o,
          applyData: ie,
          definitionById: r,
          footnoteById: i,
          footnoteCounts: new Map(),
          footnoteOrder: [],
          handlers: { ...r3, ...n.handlers },
          one: a,
          options: n,
          patch: r8,
          wrap: ir,
        };
      return (
        rY(e, function (e) {
          if ("definition" === e.type || "footnoteDefinition" === e.type) {
            let t = "definition" === e.type ? r : i,
              n = String(e.identifier).toUpperCase();
            t.has(n) || t.set(n, e);
          }
        }),
        s
      );
      function a(e, t) {
        let n = e.type,
          r = s.handlers[n];
        if (r9.call(s.handlers, n) && r) return r(s, e, t);
        if (s.options.passThrough && s.options.passThrough.includes(n)) {
          if ("children" in e) {
            let { children: t, ...n } = e,
              r = rA(n);
            return ((r.children = s.all(e)), r);
          }
          return rA(e);
        }
        return (s.options.unknownHandler || it)(s, e, t);
      }
      function o(e) {
        let t = [];
        if ("children" in e) {
          let n = e.children,
            r = -1;
          for (; ++r < n.length; ) {
            let i = s.one(n[r], e);
            if (i) {
              if (
                r &&
                "break" === n[r - 1].type &&
                (Array.isArray(i) ||
                  "text" !== i.type ||
                  (i.value = ii(i.value)),
                !Array.isArray(i) && "element" === i.type)
              ) {
                let e = i.children[0];
                e && "text" === e.type && (e.value = ii(e.value));
              }
              Array.isArray(i) ? t.push(...i) : t.push(i);
            }
          }
        }
        return t;
      }
    }
    function r8(e, t) {
      e.position && (t.position = J(e));
    }
    function ie(e, t) {
      let n = t;
      if (e && e.data) {
        let t = e.data.hName,
          r = e.data.hChildren,
          i = e.data.hProperties;
        ("string" == typeof t &&
          ("element" === n.type
            ? (n.tagName = t)
            : (n = {
                type: "element",
                tagName: t,
                properties: {},
                children: "children" in n ? n.children : [n],
              })),
          "element" === n.type && i && Object.assign(n.properties, rA(i)),
          "children" in n && n.children && null != r && (n.children = r));
      }
      return n;
    }
    function it(e, t) {
      let n = t.data || {},
        r =
          "value" in t &&
          !(r9.call(n, "hProperties") || r9.call(n, "hChildren"))
            ? { type: "text", value: t.value }
            : {
                type: "element",
                tagName: "div",
                properties: {},
                children: e.all(t),
              };
      return (e.patch(t, r), e.applyData(t, r));
    }
    function ir(e, t) {
      let n = [],
        r = -1;
      for (t && n.push({ type: "text", value: "\n" }); ++r < e.length; )
        (r && n.push({ type: "text", value: "\n" }), n.push(e[r]));
      return (t && e.length > 0 && n.push({ type: "text", value: "\n" }), n);
    }
    function ii(e) {
      let t = 0,
        n = e.charCodeAt(t);
      for (; 9 === n || 32 === n; ) (t++, (n = e.charCodeAt(t)));
      return e.slice(t);
    }
    function is(e, n) {
      let r = r6(e, n),
        i = r.one(e, void 0),
        s = rR(r),
        a = Array.isArray(i)
          ? { type: "root", children: i }
          : i || { type: "root", children: [] };
      return (
        s &&
          (t("children" in a),
          a.children.push({ type: "text", value: "\n" }, s)),
        a
      );
    }
    function ia(e, t) {
      return e && "run" in e
        ? async function (n, r) {
            let i = is(n, { file: r, ...t });
            await e.run(i, r);
          }
        : function (n, r) {
            return is(n, { file: r, ...(t || e) });
          };
    }
    function io(e) {
      if (e) throw e;
    }
    var il = e.i(975609);
    function ic(e) {
      if ("object" != typeof e || null === e) return !1;
      let t = Object.getPrototypeOf(e);
      return (
        (null === t ||
          t === Object.prototype ||
          null === Object.getPrototypeOf(t)) &&
        !(Symbol.toStringTag in e) &&
        !(Symbol.iterator in e)
      );
    }
    function iu() {
      let e = [],
        t = { run: n, use: r };
      return t;
      function n(...t) {
        let r = -1,
          i = t.pop();
        if ("function" != typeof i)
          throw TypeError("Expected function as last argument, not " + i);
        function s(n, ...a) {
          let o = e[++r],
            l = -1;
          if (n) return void i(n);
          for (; ++l < t.length; )
            (null === a[l] || void 0 === a[l]) && (a[l] = t[l]);
          ((t = a), o ? id(o, s)(...a) : i(null, ...a));
        }
        s(null, ...t);
      }
      function r(n) {
        if ("function" != typeof n)
          throw TypeError("Expected `middelware` to be a function, not " + n);
        return (e.push(n), t);
      }
    }
    function id(e, t) {
      let n;
      return r;
      function r(...t) {
        let a,
          o = e.length > t.length;
        o && t.push(i);
        try {
          a = e.apply(this, t);
        } catch (t) {
          let e = t;
          if (o && n) throw e;
          return i(e);
        }
        o ||
          (a instanceof Promise
            ? a.then(s, i)
            : a instanceof Error
              ? i(a)
              : s(a));
      }
      function i(e, ...r) {
        n || ((n = !0), t(e, ...r));
      }
      function s(e) {
        i(null, e);
      }
    }
    let ih = iv,
      ip = iy,
      im = ib,
      ig = ij,
      ix = "/";
    function iv(e, t) {
      let n;
      if (void 0 !== t && "string" != typeof t)
        throw TypeError('"ext" argument must be a string');
      ik(e);
      let r = 0,
        i = -1,
        s = e.length;
      if (void 0 === t || 0 === t.length || t.length > e.length) {
        for (; s--; )
          if (47 === e.codePointAt(s)) {
            if (n) {
              r = s + 1;
              break;
            }
          } else i < 0 && ((n = !0), (i = s + 1));
        return i < 0 ? "" : e.slice(r, i);
      }
      if (t === e) return "";
      let a = -1,
        o = t.length - 1;
      for (; s--; )
        if (47 === e.codePointAt(s)) {
          if (n) {
            r = s + 1;
            break;
          }
        } else
          (a < 0 && ((n = !0), (a = s + 1)),
            o > -1 &&
              (e.codePointAt(s) === t.codePointAt(o--)
                ? o < 0 && (i = s)
                : ((o = -1), (i = a))));
      return (r === i ? (i = a) : i < 0 && (i = e.length), e.slice(r, i));
    }
    function iy(e) {
      let t;
      if ((ik(e), 0 === e.length)) return ".";
      let n = -1,
        r = e.length;
      for (; --r; )
        if (47 === e.codePointAt(r)) {
          if (t) {
            n = r;
            break;
          }
        } else t || (t = !0);
      return n < 0
        ? 47 === e.codePointAt(0)
          ? "/"
          : "."
        : 1 === n && 47 === e.codePointAt(0)
          ? "//"
          : e.slice(0, n);
    }
    function ib(e) {
      let t;
      ik(e);
      let n = e.length,
        r = -1,
        i = 0,
        s = -1,
        a = 0;
      for (; n--; ) {
        let o = e.codePointAt(n);
        if (47 === o) {
          if (t) {
            i = n + 1;
            break;
          }
          continue;
        }
        (r < 0 && ((t = !0), (r = n + 1)),
          46 === o
            ? s < 0
              ? (s = n)
              : 1 !== a && (a = 1)
            : s > -1 && (a = -1));
      }
      return s < 0 ||
        r < 0 ||
        0 === a ||
        (1 === a && s === r - 1 && s === i + 1)
        ? ""
        : e.slice(s, r);
    }
    function ij(...e) {
      let t,
        n = -1;
      for (; ++n < e.length; )
        (ik(e[n]), e[n] && (t = void 0 === t ? e[n] : t + "/" + e[n]));
      return void 0 === t ? "." : iw(t);
    }
    function iw(e) {
      ik(e);
      let t = 47 === e.codePointAt(0),
        n = iC(e, !t);
      return (
        0 !== n.length || t || (n = "."),
        n.length > 0 && 47 === e.codePointAt(e.length - 1) && (n += "/"),
        t ? "/" + n : n
      );
    }
    function iC(e, t) {
      let n,
        r,
        i = "",
        s = 0,
        a = -1,
        o = 0,
        l = -1;
      for (; ++l <= e.length; ) {
        if (l < e.length) n = e.codePointAt(l);
        else if (47 === n) break;
        else n = 47;
        if (47 === n) {
          if (a === l - 1 || 1 === o);
          else if (a !== l - 1 && 2 === o) {
            if (
              i.length < 2 ||
              2 !== s ||
              46 !== i.codePointAt(i.length - 1) ||
              46 !== i.codePointAt(i.length - 2)
            ) {
              if (i.length > 2) {
                if ((r = i.lastIndexOf("/")) !== i.length - 1) {
                  (r < 0
                    ? ((i = ""), (s = 0))
                    : (s = (i = i.slice(0, r)).length - 1 - i.lastIndexOf("/")),
                    (a = l),
                    (o = 0));
                  continue;
                }
              } else if (i.length > 0) {
                ((i = ""), (s = 0), (a = l), (o = 0));
                continue;
              }
            }
            t && ((i = i.length > 0 ? i + "/.." : ".."), (s = 2));
          } else
            (i.length > 0
              ? (i += "/" + e.slice(a + 1, l))
              : (i = e.slice(a + 1, l)),
              (s = l - a - 1));
          ((a = l), (o = 0));
        } else 46 === n && o > -1 ? o++ : (o = -1);
      }
      return i;
    }
    function ik(e) {
      if ("string" != typeof e)
        throw TypeError("Path must be a string. Received " + JSON.stringify(e));
    }
    let iS = iN;
    function iN() {
      return "/";
    }
    function iE(e) {
      return !!(
        null !== e &&
        "object" == typeof e &&
        "href" in e &&
        e.href &&
        "protocol" in e &&
        e.protocol &&
        void 0 === e.auth
      );
    }
    function iA(e) {
      if ("string" == typeof e) e = new URL(e);
      else if (!iE(e)) {
        let t = TypeError(
          'The "path" argument must be of type string or an instance of URL. Received `' +
            e +
            "`",
        );
        throw ((t.code = "ERR_INVALID_ARG_TYPE"), t);
      }
      if ("file:" !== e.protocol) {
        let e = TypeError("The URL must be of scheme file");
        throw ((e.code = "ERR_INVALID_URL_SCHEME"), e);
      }
      return iD(e);
    }
    function iD(e) {
      if ("" !== e.hostname) {
        let e = TypeError(
          'File URL host must be "localhost" or empty on darwin',
        );
        throw ((e.code = "ERR_INVALID_FILE_URL_HOST"), e);
      }
      let t = e.pathname,
        n = -1;
      for (; ++n < t.length; )
        if (37 === t.codePointAt(n) && 50 === t.codePointAt(n + 1)) {
          let e = t.codePointAt(n + 2);
          if (70 === e || 102 === e) {
            let e = TypeError(
              "File URL path must not include encoded / characters",
            );
            throw ((e.code = "ERR_INVALID_FILE_URL_PATH"), e);
          }
        }
      return decodeURIComponent(t);
    }
    let iI = ["history", "path", "basename", "stem", "extname", "dirname"];
    class iM {
      constructor(e) {
        let t, n;
        ((t = e
          ? iE(e)
            ? { path: e }
            : "string" == typeof e || iR(e)
              ? { value: e }
              : e
          : {}),
          (this.cwd = "cwd" in t ? "" : iS()),
          (this.data = {}),
          (this.history = []),
          (this.messages = []),
          this.value,
          this.map,
          this.result,
          this.stored);
        let r = -1;
        for (; ++r < iI.length; ) {
          const e = iI[r];
          e in t &&
            void 0 !== t[e] &&
            null !== t[e] &&
            (this[e] = "history" === e ? [...t[e]] : t[e]);
        }
        for (n in t) iI.includes(n) || (this[n] = t[n]);
      }
      get basename() {
        return "string" == typeof this.path ? ih(this.path) : void 0;
      }
      set basename(e) {
        (iL(e, "basename"),
          iT(e, "basename"),
          (this.path = ig(this.dirname || "", e)));
      }
      get dirname() {
        return "string" == typeof this.path ? ip(this.path) : void 0;
      }
      set dirname(e) {
        (iP(this.basename, "dirname"),
          (this.path = ig(e || "", this.basename)));
      }
      get extname() {
        return "string" == typeof this.path ? im(this.path) : void 0;
      }
      set extname(e) {
        if ((iT(e, "extname"), iP(this.dirname, "extname"), e)) {
          if (46 !== e.codePointAt(0))
            throw Error("`extname` must start with `.`");
          if (e.includes(".", 1))
            throw Error("`extname` cannot contain multiple dots");
        }
        this.path = ig(this.dirname, this.stem + (e || ""));
      }
      get path() {
        return this.history[this.history.length - 1];
      }
      set path(e) {
        (iE(e) && (e = iA(e)),
          iL(e, "path"),
          this.path !== e && this.history.push(e));
      }
      get stem() {
        return "string" == typeof this.path
          ? ih(this.path, this.extname)
          : void 0;
      }
      set stem(e) {
        (iL(e, "stem"),
          iT(e, "stem"),
          (this.path = ig(this.dirname || "", e + (this.extname || ""))));
      }
      fail(e, t, n) {
        let r = this.message(e, t, n);
        throw ((r.fatal = !0), r);
      }
      info(e, t, n) {
        let r = this.message(e, t, n);
        return ((r.fatal = void 0), r);
      }
      message(e, t, n) {
        let r = new en(e, t, n);
        return (
          this.path &&
            ((r.name = this.path + ":" + r.name), (r.file = this.path)),
          (r.fatal = !1),
          this.messages.push(r),
          r
        );
      }
      toString(e) {
        return void 0 === this.value
          ? ""
          : "string" == typeof this.value
            ? this.value
            : new TextDecoder(e || void 0).decode(this.value);
      }
    }
    function iT(e, t) {
      if (e && e.includes(ix))
        throw Error(
          "`" + t + "` cannot be a path: did not expect `" + ix + "`",
        );
    }
    function iL(e, t) {
      if (!e) throw Error("`" + t + "` cannot be empty");
    }
    function iP(e, t) {
      if (!e) throw Error("Setting `" + t + "` requires `path` to be set too");
    }
    function iR(e) {
      return !!(
        e &&
        "object" == typeof e &&
        "byteLength" in e &&
        "byteOffset" in e
      );
    }
    let iF = function (e) {
        let t = this,
          n = t.constructor.prototype,
          r = n[e],
          i = function () {
            return r.apply(i, arguments);
          };
        return (Object.setPrototypeOf(i, n), i);
      },
      i_ = {}.hasOwnProperty;
    class iO extends iF {
      constructor() {
        (super("copy"),
          (this.Compiler = void 0),
          (this.Parser = void 0),
          (this.attachers = []),
          (this.compiler = void 0),
          (this.freezeIndex = -1),
          (this.frozen = void 0),
          (this.namespace = {}),
          (this.parser = void 0),
          (this.transformers = iu()));
      }
      copy() {
        let e = new iO(),
          t = -1;
        for (; ++t < this.attachers.length; ) {
          let n = this.attachers[t];
          e.use(...n);
        }
        return (e.data((0, il.default)(!0, {}, this.namespace)), e);
      }
      data(e, t) {
        return "string" == typeof e
          ? 2 == arguments.length
            ? (iH("data", this.frozen), (this.namespace[e] = t), this)
            : (i_.call(this.namespace, e) && this.namespace[e]) || void 0
          : e
            ? (iH("data", this.frozen), (this.namespace = e), this)
            : this.namespace;
      }
      freeze() {
        if (this.frozen) return this;
        let e = this;
        for (; ++this.freezeIndex < this.attachers.length; ) {
          let [t, ...n] = this.attachers[this.freezeIndex];
          if (!1 === n[0]) continue;
          !0 === n[0] && (n[0] = void 0);
          let r = t.call(e, ...n);
          "function" == typeof r && this.transformers.use(r);
        }
        return ((this.frozen = !0), (this.freezeIndex = 1 / 0), this);
      }
      parse(e) {
        this.freeze();
        let t = iG(e),
          n = this.parser || this.Parser;
        return (iV("parse", n), n(String(t), t));
      }
      process(e, n) {
        let r = this;
        return (
          this.freeze(),
          iV("process", this.parser || this.Parser),
          iz("process", this.compiler || this.Compiler),
          n ? i(void 0, n) : new Promise(i)
        );
        function i(i, s) {
          let a = iG(e),
            o = r.parse(a);
          function l(e, r) {
            e || !r
              ? s(e)
              : i
                ? i(r)
                : (t(n, "`done` is defined if `resolve` is not"), n(void 0, r));
          }
          r.run(o, a, function (e, t, n) {
            if (e || !t || !n) return l(e);
            let i = t,
              s = r.stringify(i, n);
            (iq(s) ? (n.value = s) : (n.result = s), l(e, n));
          });
        }
      }
      processSync(e) {
        let n,
          r = !1;
        return (
          this.freeze(),
          iV("processSync", this.parser || this.Parser),
          iz("processSync", this.compiler || this.Compiler),
          this.process(e, i),
          iU("processSync", "process", r),
          t(n, "we either bailed on an error or have a tree"),
          n
        );
        function i(e, t) {
          ((r = !0), io(e), (n = t));
        }
      }
      run(e, n, r) {
        (i$(e), this.freeze());
        let i = this.transformers;
        return (
          r || "function" != typeof n || ((r = n), (n = void 0)),
          r ? s(void 0, r) : new Promise(s)
        );
        function s(s, a) {
          t(
            "function" != typeof n,
            "`file` cant be a `done` anymore, we checked",
          );
          let o = iG(n);
          function l(n, i, o) {
            let l = i || e;
            n
              ? a(n)
              : s
                ? s(l)
                : (t(r, "`done` is defined if `resolve` is not"),
                  r(void 0, l, o));
          }
          i.run(e, o, l);
        }
      }
      runSync(e, n) {
        let r,
          i = !1;
        return (
          this.run(e, n, s),
          iU("runSync", "run", i),
          t(r, "we either bailed on an error or have a tree"),
          r
        );
        function s(e, t) {
          (io(e), (r = t), (i = !0));
        }
      }
      stringify(e, t) {
        this.freeze();
        let n = iG(t),
          r = this.compiler || this.Compiler;
        return (iz("stringify", r), i$(e), r(e, n));
      }
      use(e, ...t) {
        let n = this.attachers,
          r = this.namespace;
        if ((iH("use", this.frozen), null == e));
        else if ("function" == typeof e) o(e, t);
        else if ("object" == typeof e) Array.isArray(e) ? a(e) : s(e);
        else throw TypeError("Expected usable value, not `" + e + "`");
        return this;
        function i(e) {
          if ("function" == typeof e) o(e, []);
          else if ("object" == typeof e)
            if (Array.isArray(e)) {
              let [t, ...n] = e;
              o(t, n);
            } else s(e);
          else throw TypeError("Expected usable value, not `" + e + "`");
        }
        function s(e) {
          if (!("plugins" in e) && !("settings" in e))
            throw Error(
              "Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither",
            );
          (a(e.plugins),
            e.settings &&
              (r.settings = (0, il.default)(!0, r.settings, e.settings)));
        }
        function a(e) {
          let t = -1;
          if (null == e);
          else if (Array.isArray(e)) for (; ++t < e.length; ) i(e[t]);
          else throw TypeError("Expected a list of plugins, not `" + e + "`");
        }
        function o(e, t) {
          let r = -1,
            i = -1;
          for (; ++r < n.length; )
            if (n[r][0] === e) {
              i = r;
              break;
            }
          if (-1 === i) n.push([e, ...t]);
          else if (t.length > 0) {
            let [r, ...s] = t,
              a = n[i][1];
            (ic(a) && ic(r) && (r = (0, il.default)(!0, a, r)),
              (n[i] = [e, r, ...s]));
          }
        }
      }
    }
    let iB = new iO().freeze();
    function iV(e, t) {
      if ("function" != typeof t)
        throw TypeError("Cannot `" + e + "` without `parser`");
    }
    function iz(e, t) {
      if ("function" != typeof t)
        throw TypeError("Cannot `" + e + "` without `compiler`");
    }
    function iH(e, t) {
      if (t)
        throw Error(
          "Cannot call `" +
            e +
            "` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.",
        );
    }
    function i$(e) {
      if (!ic(e) || "string" != typeof e.type)
        throw TypeError("Expected node, got `" + e + "`");
    }
    function iU(e, t, n) {
      if (!n)
        throw Error("`" + e + "` finished async. Use `" + t + "` instead");
    }
    function iG(e) {
      return iW(e) ? e : new iM(e);
    }
    function iW(e) {
      return !!(e && "object" == typeof e && "message" in e && "messages" in e);
    }
    function iq(e) {
      return "string" == typeof e || iZ(e);
    }
    function iZ(e) {
      return !!(
        e &&
        "object" == typeof e &&
        "byteLength" in e &&
        "byteOffset" in e
      );
    }
    let iK = i0,
      iY = i1,
      iJ = i2,
      iQ = i5,
      iX = "/";
    function i0(e, t) {
      let n;
      if (void 0 !== t && "string" != typeof t)
        throw TypeError('"ext" argument must be a string');
      i9(e);
      let r = 0,
        i = -1,
        s = e.length;
      if (void 0 === t || 0 === t.length || t.length > e.length) {
        for (; s--; )
          if (47 === e.codePointAt(s)) {
            if (n) {
              r = s + 1;
              break;
            }
          } else i < 0 && ((n = !0), (i = s + 1));
        return i < 0 ? "" : e.slice(r, i);
      }
      if (t === e) return "";
      let a = -1,
        o = t.length - 1;
      for (; s--; )
        if (47 === e.codePointAt(s)) {
          if (n) {
            r = s + 1;
            break;
          }
        } else
          (a < 0 && ((n = !0), (a = s + 1)),
            o > -1 &&
              (e.codePointAt(s) === t.codePointAt(o--)
                ? o < 0 && (i = s)
                : ((o = -1), (i = a))));
      return (r === i ? (i = a) : i < 0 && (i = e.length), e.slice(r, i));
    }
    function i1(e) {
      let t;
      if ((i9(e), 0 === e.length)) return ".";
      let n = -1,
        r = e.length;
      for (; --r; )
        if (47 === e.codePointAt(r)) {
          if (t) {
            n = r;
            break;
          }
        } else t || (t = !0);
      return n < 0
        ? 47 === e.codePointAt(0)
          ? "/"
          : "."
        : 1 === n && 47 === e.codePointAt(0)
          ? "//"
          : e.slice(0, n);
    }
    function i2(e) {
      let t;
      i9(e);
      let n = e.length,
        r = -1,
        i = 0,
        s = -1,
        a = 0;
      for (; n--; ) {
        let o = e.codePointAt(n);
        if (47 === o) {
          if (t) {
            i = n + 1;
            break;
          }
          continue;
        }
        (r < 0 && ((t = !0), (r = n + 1)),
          46 === o
            ? s < 0
              ? (s = n)
              : 1 !== a && (a = 1)
            : s > -1 && (a = -1));
      }
      return s < 0 ||
        r < 0 ||
        0 === a ||
        (1 === a && s === r - 1 && s === i + 1)
        ? ""
        : e.slice(s, r);
    }
    function i5(...e) {
      let t,
        n = -1;
      for (; ++n < e.length; )
        (i9(e[n]), e[n] && (t = void 0 === t ? e[n] : t + "/" + e[n]));
      return void 0 === t ? "." : i3(t);
    }
    function i3(e) {
      i9(e);
      let t = 47 === e.codePointAt(0),
        n = i4(e, !t);
      return (
        0 !== n.length || t || (n = "."),
        n.length > 0 && 47 === e.codePointAt(e.length - 1) && (n += "/"),
        t ? "/" + n : n
      );
    }
    function i4(e, t) {
      let n,
        r,
        i = "",
        s = 0,
        a = -1,
        o = 0,
        l = -1;
      for (; ++l <= e.length; ) {
        if (l < e.length) n = e.codePointAt(l);
        else if (47 === n) break;
        else n = 47;
        if (47 === n) {
          if (a === l - 1 || 1 === o);
          else if (a !== l - 1 && 2 === o) {
            if (
              i.length < 2 ||
              2 !== s ||
              46 !== i.codePointAt(i.length - 1) ||
              46 !== i.codePointAt(i.length - 2)
            ) {
              if (i.length > 2) {
                if ((r = i.lastIndexOf("/")) !== i.length - 1) {
                  (r < 0
                    ? ((i = ""), (s = 0))
                    : (s = (i = i.slice(0, r)).length - 1 - i.lastIndexOf("/")),
                    (a = l),
                    (o = 0));
                  continue;
                }
              } else if (i.length > 0) {
                ((i = ""), (s = 0), (a = l), (o = 0));
                continue;
              }
            }
            t && ((i = i.length > 0 ? i + "/.." : ".."), (s = 2));
          } else
            (i.length > 0
              ? (i += "/" + e.slice(a + 1, l))
              : (i = e.slice(a + 1, l)),
              (s = l - a - 1));
          ((a = l), (o = 0));
        } else 46 === n && o > -1 ? o++ : (o = -1);
      }
      return i;
    }
    function i9(e) {
      if ("string" != typeof e)
        throw TypeError("Path must be a string. Received " + JSON.stringify(e));
    }
    let i7 = i6;
    function i6() {
      return "/";
    }
    function i8(e) {
      return !!(
        null !== e &&
        "object" == typeof e &&
        "href" in e &&
        e.href &&
        "protocol" in e &&
        e.protocol &&
        void 0 === e.auth
      );
    }
    function se(e) {
      if ("string" == typeof e) e = new URL(e);
      else if (!i8(e)) {
        let t = TypeError(
          'The "path" argument must be of type string or an instance of URL. Received `' +
            e +
            "`",
        );
        throw ((t.code = "ERR_INVALID_ARG_TYPE"), t);
      }
      if ("file:" !== e.protocol) {
        let e = TypeError("The URL must be of scheme file");
        throw ((e.code = "ERR_INVALID_URL_SCHEME"), e);
      }
      return st(e);
    }
    function st(e) {
      if ("" !== e.hostname) {
        let e = TypeError(
          'File URL host must be "localhost" or empty on darwin',
        );
        throw ((e.code = "ERR_INVALID_FILE_URL_HOST"), e);
      }
      let t = e.pathname,
        n = -1;
      for (; ++n < t.length; )
        if (37 === t.codePointAt(n) && 50 === t.codePointAt(n + 1)) {
          let e = t.codePointAt(n + 2);
          if (70 === e || 102 === e) {
            let e = TypeError(
              "File URL path must not include encoded / characters",
            );
            throw ((e.code = "ERR_INVALID_FILE_URL_PATH"), e);
          }
        }
      return decodeURIComponent(t);
    }
    let sn = ["history", "path", "basename", "stem", "extname", "dirname"];
    class sr {
      constructor(e) {
        let t, n;
        ((t = e
          ? i8(e)
            ? { path: e }
            : "string" == typeof e || so(e)
              ? { value: e }
              : e
          : {}),
          (this.cwd = i7()),
          (this.data = {}),
          (this.history = []),
          (this.messages = []),
          this.value,
          this.map,
          this.result,
          this.stored);
        let r = -1;
        for (; ++r < sn.length; ) {
          const e = sn[r];
          e in t &&
            void 0 !== t[e] &&
            null !== t[e] &&
            (this[e] = "history" === e ? [...t[e]] : t[e]);
        }
        for (n in t) sn.includes(n) || (this[n] = t[n]);
      }
      get basename() {
        return "string" == typeof this.path ? iK(this.path) : void 0;
      }
      set basename(e) {
        (ss(e, "basename"),
          si(e, "basename"),
          (this.path = iQ(this.dirname || "", e)));
      }
      get dirname() {
        return "string" == typeof this.path ? iY(this.path) : void 0;
      }
      set dirname(e) {
        (sa(this.basename, "dirname"),
          (this.path = iQ(e || "", this.basename)));
      }
      get extname() {
        return "string" == typeof this.path ? iJ(this.path) : void 0;
      }
      set extname(e) {
        if ((si(e, "extname"), sa(this.dirname, "extname"), e)) {
          if (46 !== e.codePointAt(0))
            throw Error("`extname` must start with `.`");
          if (e.includes(".", 1))
            throw Error("`extname` cannot contain multiple dots");
        }
        this.path = iQ(this.dirname, this.stem + (e || ""));
      }
      get path() {
        return this.history[this.history.length - 1];
      }
      set path(e) {
        (i8(e) && (e = se(e)),
          ss(e, "path"),
          this.path !== e && this.history.push(e));
      }
      get stem() {
        return "string" == typeof this.path
          ? iK(this.path, this.extname)
          : void 0;
      }
      set stem(e) {
        (ss(e, "stem"),
          si(e, "stem"),
          (this.path = iQ(this.dirname || "", e + (this.extname || ""))));
      }
      fail(e, t, n) {
        let r = this.message(e, t, n);
        throw ((r.fatal = !0), r);
      }
      info(e, t, n) {
        let r = this.message(e, t, n);
        return ((r.fatal = void 0), r);
      }
      message(e, t, n) {
        let r = new en(e, t, n);
        return (
          this.path &&
            ((r.name = this.path + ":" + r.name), (r.file = this.path)),
          (r.fatal = !1),
          this.messages.push(r),
          r
        );
      }
      toString(e) {
        return void 0 === this.value
          ? ""
          : "string" == typeof this.value
            ? this.value
            : new TextDecoder(e || void 0).decode(this.value);
      }
    }
    function si(e, t) {
      if (e && e.includes(iX))
        throw Error(
          "`" + t + "` cannot be a path: did not expect `" + iX + "`",
        );
    }
    function ss(e, t) {
      if (!e) throw Error("`" + t + "` cannot be empty");
    }
    function sa(e, t) {
      if (!e) throw Error("Setting `" + t + "` requires `path` to be set too");
    }
    function so(e) {
      return !!(
        e &&
        "object" == typeof e &&
        "byteLength" in e &&
        "byteOffset" in e
      );
    }
    let sl =
        "https://github.com/remarkjs/react-markdown/blob/main/changelog.md",
      sc = [],
      su = { allowDangerousHtml: !0 },
      sd = /^(https?|ircs?|mailto|xmpp)$/i,
      sh = [
        { from: "astPlugins", id: "remove-buggy-html-in-markdown-parser" },
        {
          from: "allowDangerousHtml",
          id: "remove-buggy-html-in-markdown-parser",
        },
        {
          from: "allowNode",
          id: "replace-allownode-allowedtypes-and-disallowedtypes",
          to: "allowElement",
        },
        {
          from: "allowedTypes",
          id: "replace-allownode-allowedtypes-and-disallowedtypes",
          to: "allowedElements",
        },
        {
          from: "disallowedTypes",
          id: "replace-allownode-allowedtypes-and-disallowedtypes",
          to: "disallowedElements",
        },
        { from: "escapeHtml", id: "remove-buggy-html-in-markdown-parser" },
        { from: "includeElementIndex", id: "#remove-includeelementindex" },
        {
          from: "includeNodeIndex",
          id: "change-includenodeindex-to-includeelementindex",
        },
        { from: "linkTarget", id: "remove-linktarget" },
        {
          from: "plugins",
          id: "change-plugins-to-remarkplugins",
          to: "remarkPlugins",
        },
        { from: "rawSourcePos", id: "#remove-rawsourcepos" },
        {
          from: "renderers",
          id: "change-renderers-to-components",
          to: "components",
        },
        { from: "source", id: "change-source-to-children", to: "children" },
        { from: "sourcePos", id: "#remove-sourcepos" },
        {
          from: "transformImageUri",
          id: "#add-urltransform",
          to: "urlTransform",
        },
        {
          from: "transformLinkUri",
          id: "#add-urltransform",
          to: "urlTransform",
        },
      ];
    function sp(e) {
      let t = e.allowedElements,
        r = e.allowElement,
        i = e.children || "",
        s = e.className,
        a = e.components,
        o = e.disallowedElements,
        l = e.rehypePlugins || sc,
        c = e.remarkPlugins || sc,
        u = e.remarkRehypeOptions ? { ...e.remarkRehypeOptions, ...su } : su,
        d = e.skipHtml,
        h = e.unwrapDisallowed,
        p = e.urlTransform || sm,
        m = iB().use(ro).use(c).use(ia, u).use(l),
        f = new sr();
      for (let r of ("string" == typeof i
        ? (f.value = i)
        : n(
            "Unexpected value `" +
              i +
              "` for `children` prop, expected `string`",
          ),
      t &&
        o &&
        n(
          "Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other",
        ),
      sh))
        Object.hasOwn(e, r.from) &&
          n(
            "Unexpected `" +
              r.from +
              "` prop, " +
              (r.to ? "use `" + r.to + "` instead" : "remove it") +
              " (see <" +
              sl +
              "#" +
              r.id +
              "> for more info)",
          );
      let g = m.parse(f),
        x = m.runSync(g, f);
      return (
        s &&
          (x = {
            type: "element",
            tagName: "div",
            properties: { className: s },
            children: "root" === x.type ? x.children : [x],
          }),
        rY(x, v),
        eu(x, {
          Fragment: eP.Fragment,
          components: a,
          ignoreInvalidStyle: !0,
          jsx: eP.jsx,
          jsxs: eP.jsxs,
          passKeys: !0,
          passNode: !0,
        })
      );
      function v(e, n, i) {
        if ("raw" === e.type && i && "number" == typeof n)
          return (
            d
              ? i.children.splice(n, 1)
              : (i.children[n] = { type: "text", value: e.value }),
            n
          );
        if ("element" === e.type) {
          let t;
          for (t in eL)
            if (Object.hasOwn(eL, t) && Object.hasOwn(e.properties, t)) {
              let n = e.properties[t],
                r = eL[t];
              (null === r || r.includes(e.tagName)) &&
                (e.properties[t] = p(String(n || ""), t, e));
            }
        }
        if ("element" === e.type) {
          let s = t ? !t.includes(e.tagName) : !!o && o.includes(e.tagName);
          if (
            (!s && r && "number" == typeof n && (s = !r(e, n, i)),
            s && i && "number" == typeof n)
          )
            return (
              h && e.children
                ? i.children.splice(n, 1, ...e.children)
                : i.children.splice(n, 1),
              n
            );
        }
      }
    }
    function sm(e) {
      let t = e.indexOf(":"),
        n = e.indexOf("?"),
        r = e.indexOf("#"),
        i = e.indexOf("/");
      return t < 0 ||
        (i > -1 && t > i) ||
        (n > -1 && t > n) ||
        (r > -1 && t > r) ||
        sd.test(e.slice(0, t))
        ? e
        : "";
    }
    (e.s(["default", () => sp], 396735), e.i(439235));
    let sf = ["*"],
      sg = ["https://hebbkx1anhila5yf.public.blob.vercel-storage.com/"],
      sx = "https://v0.app/";
    e.s(
      [
        "allowedImagePrefixes",
        0,
        sg,
        "allowedLinkPrefixes",
        0,
        sf,
        "defaultOrigin",
        0,
        sx,
      ],
      694686,
    );
    var sv = eP,
      sy = e.i(304649);
    function sb({ className: e, ...t }) {
      return (0, sv.jsx)("div", {
        className: (0, sy.cn)(
          "prose prose-sm prose-gray min-w-0 break-words",
          e,
        ),
        ...t,
      });
    }
    (e.s(["Prose", () => sb], 430957), e.i(168204));
    var sj = e.i(225695);
    function sw(e) {
      if ("parts" === e.content.type && "user" === e.role)
        return (
          !e.content.parts.length &&
          (!e.attachments || 0 === e.attachments.length)
        );
      if ("parts" === e.content.type) return 0 === e.content.parts.length;
      let t = e.content.value;
      if (!t || 0 === t.length) return !0;
      let n = 1 === t.length && t[0]?.[0] === 1,
        r = t.length > 0 && t[0]?.[0] === 0 && t[0]?.[1].length === 0;
      return n || r;
    }
    function sC(e) {
      return (
        "user" === e.role &&
        e.content.parts.length &&
        (0, sj.stringifyMessageContent)(e.content).startsWith(
          "<v0_local_project_task>",
        )
      );
    }
    function sk(e) {
      return (
        "user" === e.role &&
        e.content.parts.length &&
        (0, sj.stringifyMessageContent)(e.content).startsWith("<user_action ")
      );
    }
    e.s(
      [
        "isMessageEmpty",
        () => sw,
        "isRemoteLocalChangeMessage",
        () => sk,
        "isRemoteSessionHandshakeMessage",
        () => sC,
      ],
      85830,
    );
    var sS = eP;
    function sN(e) {
      if ("string" != typeof e) throw TypeError("Expected a string");
      return e.replace(/[|\\{}()[\]^$+*?.]/g, "\\$&").replace(/-/g, "\\x2d");
    }
    function sE(e, t, n) {
      let r = rF((n || {}).ignore || []),
        i = sA(t),
        s = -1;
      for (; ++s < i.length; ) rZ(e, "text", a);
      function a(e, t) {
        let n,
          i = -1;
        for (; ++i < t.length; ) {
          let e = t[i],
            s = n ? n.children : void 0;
          if (r(e, s ? s.indexOf(e) : void 0, n)) return;
          n = e;
        }
        if (n) return o(e, t);
      }
      function o(e, t) {
        let n = t[t.length - 1],
          r = i[s][0],
          a = i[s][1],
          o = 0,
          l = n.children.indexOf(e),
          c = !1,
          u = [];
        r.lastIndex = 0;
        let d = r.exec(e.value);
        for (; d; ) {
          let n = d.index,
            i = { index: d.index, input: d.input, stack: [...t, e] },
            s = a(...d, i);
          if (
            ("string" == typeof s &&
              (s = s.length > 0 ? { type: "text", value: s } : void 0),
            !1 === s
              ? (r.lastIndex = n + 1)
              : (o !== n &&
                  u.push({ type: "text", value: e.value.slice(o, n) }),
                Array.isArray(s) ? u.push(...s) : s && u.push(s),
                (o = n + d[0].length),
                (c = !0)),
            !r.global)
          )
            break;
          d = r.exec(e.value);
        }
        return (
          c
            ? (o < e.value.length &&
                u.push({ type: "text", value: e.value.slice(o) }),
              n.children.splice(l, 1, ...u))
            : (u = [e]),
          l + u.length
        );
      }
    }
    function sA(e) {
      let t = [];
      if (!Array.isArray(e))
        throw TypeError("Expected find and replace tuple or list of tuples");
      let n = !e[0] || Array.isArray(e[0]) ? e : [e],
        r = -1;
      for (; ++r < n.length; ) {
        let e = n[r];
        t.push([sD(e[0]), sI(e[1])]);
      }
      return t;
    }
    function sD(e) {
      return "string" == typeof e ? RegExp(sN(e), "g") : e;
    }
    function sI(e) {
      return "function" == typeof e
        ? e
        : function () {
            return e;
          };
    }
    e.s(["findAndReplace", () => sE], 393978);
    let sM = /^#([0-9a-f]{6}|[0-9a-f]{8})$/i;
    function sT(e) {
      return sM.test(e);
    }
    function sL({ value: e, ...t }) {
      return (0, sS.jsxs)("code", {
        ...t,
        className:
          "font-mono font-normal before:hidden rounded-[0.375rem] border bg-v0-gray-100 px-[0.15rem] h-5 after:hidden inline-flex items-center gap-0.5 align-middle",
        children: [
          (0, sS.jsx)("span", {
            className: "inline-block size-3 rounded-[0.2rem] border",
            style: { backgroundColor: e },
          }),
          e,
        ],
      });
    }
    function sP() {
      function e(e) {
        if (-1 === e.indexOf("#") || !sM.test(e)) return e;
        let t = [];
        for (;;) {
          let n = sM.exec(e);
          if (!n) break;
          let r = n[0],
            i = n.index;
          (i > 0 && t.push({ type: "text", value: e.substring(0, i) }),
            t.push({ type: "inlineCode", value: r }),
            (e = e.substring(i + r.length)));
        }
        return (e.length > 0 && t.push({ type: "text", value: e }), t);
      }
      return (t) => {
        sE(t, [[/#([0-9a-f]{6}|[0-9a-f]{8})\b/gi, e]], {
          ignore: [
            "html",
            "link",
            "linkReference",
            "image",
            "imageReference",
            "code",
            "inlineCode",
          ],
        });
      };
    }
    e.s(
      ["ColorCode", () => sL, "isColorCode", () => sT, "remarkColor", () => sP],
      661535,
    );
  },
  120945,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(686832),
      r = e.i(393799),
      i = e.i(37737),
      s = e.i(576191);
    function a({
      type: e,
      children: a,
      forceOpen: o,
      onOpenChange: l,
      onOpenAutoFocus: c,
      ...u
    }) {
      let d = (0, i.getDialogsAtoms)(),
        h = (0, r.useAtomValue)(d.visibleDialogType),
        p = (0, r.useAtomValue)(d.dialogOpen),
        m = (0, s.useId)(),
        f = (0, s.useCallback)(
          (e) => {
            (l && l(e),
              e && p ? (0, i.openDialog)(p) : o || (0, i.closeDialog)());
          },
          [p, o, l],
        ),
        g = (0, s.useMemo)(() => h === e || o, [e, h, o]),
        x = (0, s.useCallback)(
          (e) => {
            if (c) c(e);
            else {
              e.preventDefault();
              let t = document.getElementById(m);
              t && t.focus();
            }
          },
          [c, m],
        );
      return (0, t.jsx)(n.Modal, {
        "aria-description": "Dialog",
        id: m,
        open: g,
        onOpenChange: f,
        onOpenAutoFocus: x,
        tabIndex: -1,
        ...u,
        children: a,
      });
    }
    e.s(["AtomicDialog", () => a]);
  },
  261825,
  (e) => {
    "use strict";
    e.s(["TeamCreateDialog", () => a]);
    var t = e.i(324834),
      n = e.i(686832),
      r = e.i(176248),
      i = e.i(120945);
    e.i(904347);
    var s = e.i(37737);
    function a() {
      return (0, t.jsxs)(i.AtomicDialog, {
        type: "createTeam",
        children: [
          (0, t.jsxs)(n.ModalHeader, {
            children: [
              (0, t.jsx)(n.ModalTitle, { children: "Create a Team on Vercel" }),
              (0, t.jsxs)(n.ModalDescription, {
                children: [
                  "You will be redirected to",
                  " ",
                  (0, t.jsx)("span", {
                    className: "font-medium",
                    children: "vercel.com",
                  }),
                  " to create a new Vercel team. If you create a Vercel Pro team, you will be charged for the Vercel Pro subscription in addition to the v0 Team plan.",
                ],
              }),
            ],
          }),
          (0, t.jsxs)(n.ModalFooter, {
            children: [
              (0, t.jsx)(r.Button, {
                size: "sm",
                variant: "secondary",
                onClick: s.closeDialog,
                children: "Cancel",
              }),
              (0, t.jsx)(r.Button, {
                size: "sm",
                asChild: !0,
                variant: "default",
                children: (0, t.jsx)("a", {
                  href: "https://vercel.com/dashboard?createTeam=v0-checkout-page",
                  target: "_blank",
                  children: "Continue to Vercel",
                }),
              }),
            ],
          }),
        ],
      });
    }
  },
  768167,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(577483);
    function r(e = !1) {
      let { data: n, mutate: i } = (0, t.default)("showOnboardingModal", null, {
        fallbackData: e,
      });
      return { showOnboardingModal: n, setShowOnboardingModal: i };
    }
    function i(e) {
      return (0, n.mutate)("showOnboardingModal", e);
    }
    e.s(["mutateOnboardingModal", () => i, "useOnboardingModal", () => r]);
  },
  120485,
  (e) => {
    "use strict";
    e.s(["handleChatError", () => l, "openOutOfCreditsDialog", () => o]);
    var t = e.i(768167),
      n = e.i(323194),
      r = e.i(470259);
    e.i(563948);
    var i = e.i(407562),
      s = e.i(691175);
    e.i(904347);
    var a = e.i(37737);
    function o(e, t) {
      "v0-level0" === e
        ? (0, a.openDialog)({ type: "upgradePlan" })
        : (0, a.openDialog)({
            type: "buyMoreCredits",
            data: {
              onSuccess: () => {
                t?.refresh();
              },
            },
          });
    }
    function l(e, l, c, u) {
      if (!e || ("string" != typeof e && !(e instanceof Error))) return !1;
      switch (e instanceof Error ? e.message : e) {
        case r.AGREEMENT_NOT_ACCEPTED:
          return (
            i.toast.error("Please accept v0 terms and try again."),
            (0, t.mutateOnboardingModal)(!0),
            !0
          );
        case r.BLOCKED_USER:
          return (
            i.toast.error("You are blocked from sending messages."),
            l?.push("/"),
            !0
          );
        case r.CODE_EXECUTION_ERROR:
          return !0;
        case r.DAILY_MESSAGE_LIMIT_REACHED:
        case r.EXPERIMENTAL_MONTHLY_LIMIT_REACHED:
          return ((0, a.openDialog)({ type: "upgradePlan" }), !0);
        case r.EMPTY_MESSAGE_ERROR:
          return (i.toast.error("Message cannot be empty."), !0);
        case r.PROJECT_ACCESS_DENIED:
          return (i.toast.error("You do not have access to this project."), !0);
        case r.FAILED_TO_READ_ROW:
          return !0;
        case r.INVALID_ATTACHMENT_TYPE:
          return (i.toast.error("Invalid attachment type."), !0);
        case r.INVALID_REQUEST_BODY:
          return (
            i.toast.error(
              "Unable to process request. Please edit your message and try again.",
            ),
            !0
          );
        case r.LLM_CALL_ERROR:
          return (
            i.toast.error(
              "An error occurred while processing your message. Start a new chat, retry, or edit your message.",
            ),
            !0
          );
        case r.MISSING_USER_MESSAGE_ID:
        case r.INVALID_PARENT_ID:
        case r.FAILED_TO_DELETE_CONTINUE_MESSAGE:
        case r.MISSING_ASSISTANT_MESSAGE_ID:
          return (
            i.toast.error(
              "Invalid message ID. Start a new chat or edit and retry your last message.",
            ),
            !0
          );
        case r.NOT_FOUND:
          return (
            i.toast.error(
              "The resource you are looking for could not be found.",
            ),
            !0
          );
        case r.RATE_LIMITED:
          return (
            i.toast.error("Too many requests. Please try again later."),
            !0
          );
        case r.UNAUTHENTICATED:
          return (
            (0, n.mutateSignInDialog)({
              prompt: !1,
              customMessage: "Please sign in to continue.",
            }),
            !0
          );
        case r.UNAUTHORIZED:
          return (
            i.toast.error("You are not authorized to perform this action."),
            !0
          );
        case r.MISSING_FORK_KEY_FOR_EDIT:
        case r.INVALID_FORK_KEY_MISSING_MESSAGES:
        case r.FORK_KEY_MESSAGES_OUT_OF_ORDER:
        case r.MISSING_FORK_KEY_FOR_CONTINUE_RETRY:
          i.toast.error("Invalid fork key. Please start a new chat.");
        case r.V0_BLOCK_PREVIEW_ERROR:
          return !0;
        case r.BILLING_DETAILS_ERROR:
          return (
            i.toast.error("Unexpected error. Please try again later."),
            !0
          );
        case r.BILLING_SUBSCRIPTION_ERROR:
          return (
            i.toast.error(
              "Failed to start your v0 plan. Please try again later.",
            ),
            !0
          );
        case r.ANON_LIMIT_REACHED:
          return (
            (0, n.mutateSignInDialog)({
              prompt: !1,
              customMessage:
                "You're out of free messages. Sign in or sign up to continue.",
            }),
            !0
          );
        case r.OUT_OF_CREDITS:
          return (o(u?.userPlan, l), !0);
        case r.MISSING_SCOPE:
          if (l && u?.scopeSlug) {
            let e = (0, s.generatePathFromContext)(u);
            l.push(
              (0, s.getLoginUrlToMissingScopeClient)({
                slug: u.scopeSlug,
                path: e,
              }),
            );
          } else
            (i.toast.error("Please re-authentiate for full access."),
              l?.refresh());
          return !0;
        case r.MISSING_MFA_SCOPE:
          if (l && u?.scopeSlug) {
            let e = (0, s.generatePathFromContext)(u);
            l.push(
              (0, s.getTwoFactorRequiredUrlClient)({
                slug: u.scopeSlug,
                path: e,
              }),
            );
          } else
            (i.toast.error(
              "You must enable two-factor authentication to perform this action.",
            ),
              l?.refresh());
          return !0;
        case r.FORBIDDEN:
          return (
            i.toast.error("You are not authorized to perform this action."),
            !0
          );
        case r.UNEXPECTED_ERROR:
        default:
          return (i.toast.error(c || "An unexpected error occurred."), !0);
      }
      return !1;
    }
  },
  228520,
  (e) => {
    "use strict";
    e.s(["TeamRequestAccessDialog", () => d]);
    var t = e.i(324834),
      n = e.i(686832),
      r = e.i(176248),
      i = e.i(32170),
      s = e.i(576191);
    e.i(563948);
    var a = e.i(407562),
      o = e.i(837062),
      l = e.i(120945);
    e.i(904347);
    var c = e.i(37737),
      u = e.i(120485);
    function d({ slug: e, name: d }) {
      let { user: h } = (0, i.useUser)(),
        { refreshScopes: p } = (0, o.useScopes)(),
        [m, f] = (0, s.useTransition)(),
        g = (0, s.useCallback)(
          (e) => {
            m ||
              f(async () => {
                let t = await fetch(`/chat/api/team/request-access/${e}`, {
                  method: "POST",
                });
                if (!t.ok) {
                  try {
                    let e =
                      (await t.json()).error || "Failed to request access";
                    (0, u.handleChatError)(e) || a.toast.error(e);
                  } catch {
                    a.toast.error("Failed to request access");
                  }
                  return;
                }
                (a.toast.success("Access requested"),
                  (0, c.closeDialog)(),
                  p());
              });
          },
          [m, p],
        );
      return (0, t.jsxs)(l.AtomicDialog, {
        type: "requestAccess",
        children: [
          (0, t.jsxs)(n.ModalHeader, {
            children: [
              (0, t.jsx)(n.ModalTitle, { children: "Request Access" }),
              (0, t.jsxs)(n.ModalDescription, {
                children: [
                  "Your account",
                  " ",
                  (0, t.jsx)("b", {
                    className: "font-medium",
                    children: h?.name || h?.username,
                  }),
                  " does not have permission to use v0 in",
                  " ",
                  (0, t.jsx)("b", {
                    className: "font-medium",
                    children: d || e,
                  }),
                  " Team. Request access, or switch to a different Team.",
                ],
              }),
            ],
          }),
          (0, t.jsxs)(n.ModalFooter, {
            children: [
              (0, t.jsx)(r.Button, {
                size: "sm",
                variant: "secondary",
                onClick: c.closeDialog,
                children: "Cancel",
              }),
              (0, t.jsx)(r.Button, {
                disabled: m,
                onClick: () => g(e),
                size: "sm",
                children: "Request Access",
              }),
            ],
          }),
        ],
      });
    }
  },
  665979,
  (e) => {
    "use strict";
    var t = e.i(418625);
    let n = (e) => fetch(e).then((e) => e.json()),
      r = () => {
        let { data: e, isLoading: r } = (0, t.default)("/api/auth/info", n);
        return {
          user: e?.user,
          isLoggedIn: r ? void 0 : !!e?.user,
          agreementStatus: r ? void 0 : e?.agreementStatus,
        };
      };
    e.s(["useIsLoggedIn", 0, r]);
  },
  62124,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "000b7c4b6e5ac494318982999fea699f4f0230a90c",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "logoutAction",
      );
    e.s(["logoutAction", () => n]);
  },
  713990,
  (e) => {
    "use strict";
    let t = "v0_logged_out";
    function n(e) {
      let { broadcast: n = !0 } = e ?? {};
      n &&
        (localStorage.setItem(t, Date.now().toString()),
        localStorage.removeItem(t));
      try {
        (localStorage.removeItem("session_cache"),
          localStorage.removeItem("user_cache"));
      } catch (e) {
        console.warn("Failed to clear localStorage:", e);
      }
    }
    function r() {
      try {
        localStorage.setItem("last_logout_time", Date.now().toString());
      } catch (e) {
        console.warn("Failed to set last logout time:", e);
      }
    }
    e.s([
      "LOGGED_OUT_KEY",
      0,
      t,
      "removeClientSession",
      () => n,
      "setLastLogoutTime",
      () => r,
    ]);
  },
  206037,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(403055),
      r = e.i(665979),
      i = e.i(226368),
      s = e.i(576191),
      a = e.i(62124),
      o = e.i(713990),
      l = e.i(691175);
    function c() {
      let e = (0, i.useRouter)(),
        [t, n] = (0, s.useTransition)();
      return (0, s.useCallback)(
        (t = {}) => {
          let { next: r, redirectToLoginPage: i = !1, broadcast: s = !0 } = t;
          try {
            return (
              (0, o.setLastLogoutTime)(),
              (0, o.removeClientSession)({ broadcast: s }),
              n(async () => {
                (await (0, a.logoutAction)(),
                  i
                    ? (0, l.redirectToLogin)({
                        redirect: (t) => e.push(t),
                        next: r,
                      })
                    : r && e.push(r));
              }),
              { success: !0 }
            );
          } catch (e) {
            return (
              console.error("Logout failed:", e),
              {
                success: !1,
                error: e instanceof Error ? e : Error("Logout failed"),
              }
            );
          }
        },
        [e],
      );
    }
    function u(e, i, s = !1, a) {
      let { isLoggedIn: o } = (0, r.useIsLoggedIn)(),
        l = c(),
        {
          data: d,
          isLoading: h,
          mutate: p,
        } = (0, t.default)(
          () => {
            let t;
            if ((i?.startsWith("team_") && (t = i), e && o)) {
              let e = new URLSearchParams();
              return (
                t && e.set("teamId", t),
                s && e.set("paymentMethod", "true"),
                `/api/plan?${e.toString()}`
              );
            }
            return null;
          },
          n.fetcher,
          {
            revalidateOnFocus: !1,
            dedupingInterval: a,
            onError: (e) => {
              e?.status === 401 &&
                l({ redirectToLoginPage: !0, broadcast: !1 });
            },
          },
        );
      return {
        planInfo: d,
        planSlug: d?.currentPlanSlug,
        isLoading: h,
        update: p,
      };
    }
    e.s(["usePlanInfo", () => u], 206037);
  },
  775883,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(297239),
      r = e.i(304649),
      i = e.i(794593);
    function s() {
      let e = (0, n.useT)();
      return {
        "v0-level0": {
          color: "text-gray-500",
          badge: void 0,
          label: e("billingPlans.planName")("Free"),
        },
        "v0-level3": {
          color: "text-teal-700",
          badge: "teal",
          label: e("billingPlans.planName")("Premium"),
        },
        "v0-team": {
          color: "text-blue-700",
          badge: "blue",
          label: e("billingPlans.planName")("Team"),
        },
        "v0-business": {
          color: "text-blue-700",
          badge: "blue",
          label: e("billingPlans.planName")("Business"),
        },
        "v0-enterprise": {
          color: "text-purple-700",
          badge: "purple",
          label: e("billingPlans.planName")("Enterprise"),
        },
        "v0-ultra": {
          color: "text-orange-400",
          badge: "teal",
          label: e("billingPlans.planName")("Ultra"),
        },
      };
    }
    function a({ type: e }) {
      let n = s()[e];
      return (0, t.jsx)("span", {
        className: (0, r.cn)("text-[13px] font-medium leading-[16px]", n.color),
        children: n.label,
      });
    }
    function o({ type: e, className: n, includeSuffix: r = !0 }) {
      let a = s()[e];
      return (0, t.jsxs)(i.Badge, {
        variant: a.badge,
        className: n,
        children: [
          a.label,
          " ",
          r ? (0, t.jsx)("span", { children: "Plan" }) : null,
        ],
      });
    }
    e.s([
      "PlanBadge",
      () => o,
      "PlanLabel",
      () => a,
      "usePlanLabelMap",
      () => s,
    ]);
  },
  988388,
  (e, t, n) => {
    "use strict";
    let r = /[|\\{}()[\]^$+*?.-]/g;
    t.exports = (e) => {
      if ("string" != typeof e) throw TypeError("Expected a string");
      return e.replace(r, "\\$&");
    };
  },
  702739,
  (e, t, n) => {
    var r = 1 / 0,
      i = "[object Symbol]",
      s = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
      a = RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]", "g"),
      o = {
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "a",
        : "C",
        : "c",
        : "D",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "N",
        : "n",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "o",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "Y",
        : "y",
        : "y",
        : "Ae",
        : "ae",
        : "Th",
        : "th",
        : "ss",
        : "A",
        : "A",
        : "A",
        : "a",
        : "a",
        : "a",
        : "C",
        : "C",
        : "C",
        : "C",
        : "c",
        : "c",
        : "c",
        : "c",
        : "D",
        : "D",
        : "d",
        : "d",
        : "E",
        : "E",
        : "E",
        : "E",
        : "E",
        : "e",
        : "e",
        : "e",
        : "e",
        : "e",
        : "G",
        : "G",
        : "G",
        : "G",
        : "g",
        : "g",
        : "g",
        : "g",
        : "H",
        : "H",
        : "h",
        : "h",
        : "I",
        : "I",
        : "I",
        : "I",
        : "I",
        : "i",
        : "i",
        : "i",
        : "i",
        : "i",
        : "J",
        : "j",
        : "K",
        : "k",
        : "k",
        : "L",
        : "L",
        : "L",
        : "L",
        : "L",
        : "l",
        : "l",
        : "l",
        : "l",
        : "l",
        : "N",
        : "N",
        : "N",
        : "N",
        : "n",
        : "n",
        : "n",
        : "n",
        : "O",
        : "O",
        : "O",
        : "o",
        : "o",
        : "o",
        : "R",
        : "R",
        : "R",
        : "r",
        : "r",
        : "r",
        : "S",
        : "S",
        : "S",
        : "S",
        : "s",
        : "s",
        : "s",
        : "s",
        : "T",
        : "T",
        : "T",
        : "t",
        : "t",
        : "t",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "U",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "u",
        : "W",
        : "w",
        : "Y",
        : "y",
        : "Y",
        : "Z",
        : "Z",
        : "Z",
        : "z",
        : "z",
        : "z",
        : "IJ",
        : "ij",
        : "Oe",
        : "oe",
        : "'n",
        : "ss",
      },
      l = e.g && e.g.Object === Object && e.g,
      c = "object" == typeof self && self && self.Object === Object && self,
      u = l || c || Function("return this")(),
      d = (function (e) {
        return function (t) {
          return null == e ? void 0 : e[t];
        };
      })(o),
      h = Object.prototype.toString,
      p = u.Symbol,
      m = p ? p.prototype : void 0,
      f = m ? m.toString : void 0;
    function g(e) {
      if ("string" == typeof e) return e;
      if (v(e)) return f ? f.call(e) : "";
      var t = e + "";
      return "0" == t && 1 / e == -r ? "-0" : t;
    }
    function x(e) {
      return !!e && "object" == typeof e;
    }
    function v(e) {
      return "symbol" == typeof e || (x(e) && h.call(e) == i);
    }
    function y(e) {
      return null == e ? "" : g(e);
    }
    t.exports = function (e) {
      return (e = y(e)) && e.replace(s, d).replace(a, "");
    };
  },
  605634,
  (e, t, n) => {
    t.exports = [
      ["", "ss"],
      ["", "ae"],
      ["", "Ae"],
      ["", "oe"],
      ["", "Oe"],
      ["", "ue"],
      ["", "Ue"],
      ["", "A"],
      ["", "A"],
      ["", "A"],
      ["", "A"],
      ["", "Ae"],
      ["", "A"],
      ["", "AE"],
      ["", "C"],
      ["", "E"],
      ["", "E"],
      ["", "E"],
      ["", "E"],
      ["", "I"],
      ["", "I"],
      ["", "I"],
      ["", "I"],
      ["", "D"],
      ["", "N"],
      ["", "O"],
      ["", "O"],
      ["", "O"],
      ["", "O"],
      ["", "Oe"],
      ["", "O"],
      ["", "O"],
      ["", "U"],
      ["", "U"],
      ["", "U"],
      ["", "Ue"],
      ["", "U"],
      ["", "Y"],
      ["", "TH"],
      ["", "ss"],
      ["", "a"],
      ["", "a"],
      ["", "a"],
      ["", "a"],
      ["", "ae"],
      ["", "a"],
      ["", "ae"],
      ["", "c"],
      ["", "e"],
      ["", "e"],
      ["", "e"],
      ["", "e"],
      ["", "i"],
      ["", "i"],
      ["", "i"],
      ["", "i"],
      ["", "d"],
      ["", "n"],
      ["", "o"],
      ["", "o"],
      ["", "o"],
      ["", "o"],
      ["", "oe"],
      ["", "o"],
      ["", "o"],
      ["", "u"],
      ["", "u"],
      ["", "u"],
      ["", "ue"],
      ["", "u"],
      ["", "y"],
      ["", "th"],
      ["", "y"],
      ["", "SS"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "i"],
      ["", "I"],
      ["", "i"],
      ["", "I"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "y"],
      ["", "Y"],
      ["", "a"],
      ["", "A"],
      ["", "D"],
      ["", "d"],
      ["", "i"],
      ["", "I"],
      ["", "u"],
      ["", "U"],
      ["", "o"],
      ["", "O"],
      ["", "u"],
      ["", "U"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "a"],
      ["", "A"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "e"],
      ["", "E"],
      ["", "i"],
      ["", "I"],
      ["", "i"],
      ["", "I"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "o"],
      ["", "O"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "u"],
      ["", "U"],
      ["", "y"],
      ["", "Y"],
      ["", "y"],
      ["", "Y"],
      ["", "y"],
      ["", "Y"],
      ["", "y"],
      ["", "Y"],
      ["", "e"],
      ["", "a"],
      ["", "a"],
      ["", "w"],
      ["", "i"],
      ["", "y"],
      ["", "a"],
      ["", "b"],
      ["", "t"],
      ["", "t"],
      ["", "th"],
      ["", "j"],
      ["", "h"],
      ["", "kh"],
      ["", "d"],
      ["", "dh"],
      ["", "r"],
      ["", "z"],
      ["", "s"],
      ["", "sh"],
      ["", "s"],
      ["", "d"],
      ["", "t"],
      ["", "z"],
      ["", "e"],
      ["", "gh"],
      ["", "_"],
      ["", "f"],
      ["", "q"],
      ["", "k"],
      ["", "l"],
      ["", "m"],
      ["", "n"],
      ["", "h"],
      ["", "w"],
      ["", "a"],
      ["", "y"],
      ["", "a"],
      ["", "u"],
      ["", "i"],
      ["", "0"],
      ["", "1"],
      ["", "2"],
      ["", "3"],
      ["", "4"],
      ["", "5"],
      ["", "6"],
      ["", "7"],
      ["", "8"],
      ["", "9"],
      ["", "ch"],
      ["", "k"],
      ["", "g"],
      ["", "p"],
      ["", "zh"],
      ["", "y"],
      ["", "0"],
      ["", "1"],
      ["", "2"],
      ["", "3"],
      ["", "4"],
      ["", "5"],
      ["", "6"],
      ["", "7"],
      ["", "8"],
      ["", "9"],
      ["", "p"],
      ["", "z"],
      ["", "c"],
      ["", "d"],
      ["", "d"],
      ["", "r"],
      ["", "r"],
      ["", "z"],
      ["", "g"],
      ["", "x"],
      ["", "g"],
      ["", "n"],
      ["", "e"],
      ["", "e"],
      ["", "ai"],
      ["", "t"],
      ["", "d"],
      ["", "r"],
      ["", "n"],
      ["", "h"],
      ["", "h"],
      ["", "e"],
      ["", "A"],
      ["", "a"],
      ["", "B"],
      ["", "b"],
      ["", "V"],
      ["", "v"],
      ["", "G"],
      ["", "g"],
      ["", "D"],
      ["", "d"],
      ["", "E"],
      ["", "e"],
      ["", "Zh"],
      ["", "zh"],
      ["", "Z"],
      ["", "z"],
      ["", "I"],
      ["", "i"],
      ["", "J"],
      ["", "j"],
      ["", "K"],
      ["", "k"],
      ["", "L"],
      ["", "l"],
      ["", "M"],
      ["", "m"],
      ["", "N"],
      ["", "n"],
      ["", "O"],
      ["", "o"],
      ["", "P"],
      ["", "p"],
      ["", "R"],
      ["", "r"],
      ["", "S"],
      ["", "s"],
      ["", "T"],
      ["", "t"],
      ["", "U"],
      ["", "u"],
      ["", "F"],
      ["", "f"],
      ["", "H"],
      ["", "h"],
      ["", "Cz"],
      ["", "cz"],
      ["", "Ch"],
      ["", "ch"],
      ["", "Sh"],
      ["", "sh"],
      ["", "Shh"],
      ["", "shh"],
      ["", ""],
      ["", ""],
      ["", "Y"],
      ["", "y"],
      ["", ""],
      ["", ""],
      ["", "E"],
      ["", "e"],
      ["", "Yu"],
      ["", "yu"],
      ["", "Ya"],
      ["", "ya"],
      ["", "Yo"],
      ["", "yo"],
      ["", "a"],
      ["", "A"],
      ["", "s"],
      ["", "S"],
      ["", "t"],
      ["", "T"],
      ["", "t"],
      ["", "T"],
      ["", "s"],
      ["", "s"],
      ["", "c"],
      ["", "c"],
      ["", "g"],
      ["", "g"],
      ["", "i"],
      ["", "i"],
      ["", "a"],
      ["", "b"],
      ["", ""],
      ["", "d"],
      ["", "ye"],
      ["", "z"],
      ["", "e"],
      ["", "u"],
      ["", "t"],
      ["", "zh"],
      ["", "i"],
      ["", "l"],
      ["", "kh"],
      ["", "ts"],
      ["", "k"],
      ["", "h"],
      ["", "dz"],
      ["", "r"],
      ["", "j"],
      ["", "m"],
      ["", "j"],
      ["", "n"],
      ["", "sh"],
      ["", "vo"],
      ["", "ch"],
      ["", "p"],
      ["", "j"],
      ["", "r"],
      ["", "s"],
      ["", "v"],
      ["", "t"],
      ["", "re"],
      ["", "ts"],
      ["", "u"],
      ["", "v"],
      ["", "p"],
      ["", "q"],
      ["", "o"],
      ["", "f"],
      ["", "yev"],
      ["", "a"],
      ["", "b"],
      ["", "g"],
      ["", "d"],
      ["", "e"],
      ["", "v"],
      ["", "z"],
      ["", "t"],
      ["", "i"],
      ["", "k"],
      ["", "l"],
      ["", "m"],
      ["", "n"],
      ["", "o"],
      ["", "p"],
      ["", "zh"],
      ["", "r"],
      ["", "s"],
      ["", "t"],
      ["", "u"],
      ["", "ph"],
      ["", "q"],
      ["", "gh"],
      ["", "k"],
      ["", "sh"],
      ["", "ch"],
      ["", "ts"],
      ["", "dz"],
      ["", "ts"],
      ["", "tch"],
      ["", "kh"],
      ["", "j"],
      ["", "h"],
      ["", "c"],
      ["", "d"],
      ["", "e"],
      ["", "n"],
      ["", "r"],
      ["", "s"],
      ["", "t"],
      ["", "u"],
      ["", "z"],
      ["", "C"],
      ["", "D"],
      ["", "E"],
      ["", "N"],
      ["", "R"],
      ["", "S"],
      ["", "T"],
      ["", "U"],
      ["", "Z"],
      ["", "h"],
      ["", "sh"],
      ["", "n"],
      ["", "r"],
      ["", "b"],
      ["", "lh"],
      ["", "k"],
      ["", "a"],
      ["", "v"],
      ["", "m"],
      ["", "f"],
      ["", "dh"],
      ["", "th"],
      ["", "l"],
      ["", "g"],
      ["", "gn"],
      ["", "s"],
      ["", "d"],
      ["", "z"],
      ["", "t"],
      ["", "y"],
      ["", "p"],
      ["", "j"],
      ["", "ch"],
      ["", "tt"],
      ["", "hh"],
      ["", "kh"],
      ["", "th"],
      ["", "z"],
      ["", "sh"],
      ["", "s"],
      ["", "d"],
      ["", "t"],
      ["", "z"],
      ["", "a"],
      ["", "gh"],
      ["", "q"],
      ["", "w"],
      ["", "a"],
      ["", "aa"],
      ["", "i"],
      ["", "ee"],
      ["", "u"],
      ["", "oo"],
      ["", "e"],
      ["", "ey"],
      ["", "o"],
      ["", "oa"],
      ["", ""],
      ["", "a"],
      ["", "v"],
      ["", "g"],
      ["", "d"],
      ["", "e"],
      ["", "z"],
      ["", "i"],
      ["", "th"],
      ["", "i"],
      ["", "k"],
      ["", "l"],
      ["", "m"],
      ["", "n"],
      ["", "ks"],
      ["", "o"],
      ["", "p"],
      ["", "r"],
      ["", "s"],
      ["", "t"],
      ["", "y"],
      ["", "f"],
      ["", "x"],
      ["", "ps"],
      ["", "o"],
      ["", "a"],
      ["", "e"],
      ["", "i"],
      ["", "o"],
      ["", "y"],
      ["", "i"],
      ["", "o"],
      ["", "s"],
      ["", "i"],
      ["", "y"],
      ["", "y"],
      ["", "i"],
      ["", "A"],
      ["", "B"],
      ["", "G"],
      ["", "D"],
      ["", "E"],
      ["", "Z"],
      ["", "I"],
      ["", "TH"],
      ["", "I"],
      ["", "K"],
      ["", "L"],
      ["", "M"],
      ["", "N"],
      ["", "KS"],
      ["", "O"],
      ["", "P"],
      ["", "R"],
      ["", "S"],
      ["", "T"],
      ["", "Y"],
      ["", "F"],
      ["", "X"],
      ["", "PS"],
      ["", "O"],
      ["", "A"],
      ["", "E"],
      ["", "I"],
      ["", "O"],
      ["", "Y"],
      ["", "I"],
      ["", "O"],
      ["", "I"],
      ["", "Y"],
      ["", "a"],
      ["", "e"],
      ["", "g"],
      ["", "i"],
      ["", "k"],
      ["", "l"],
      ["", "n"],
      ["", "u"],
      ["", "A"],
      ["", "E"],
      ["", "G"],
      ["", "I"],
      ["", "k"],
      ["", "L"],
      ["", "N"],
      ["", "U"],
      ["", "c"],
      ["", "s"],
      ["", "z"],
      ["", "C"],
      ["", "S"],
      ["", "Z"],
      ["", "a"],
      ["", "c"],
      ["", "e"],
      ["", "e"],
      ["", "i"],
      ["", "s"],
      ["", "u"],
      ["", "u"],
      ["", "z"],
      ["", "A"],
      ["", "C"],
      ["", "E"],
      ["", "E"],
      ["", "I"],
      ["", "S"],
      ["", "U"],
      ["", "U"],
      ["", "Kj"],
      ["", "kj"],
      ["", "Lj"],
      ["", "lj"],
      ["", "Nj"],
      ["", "nj"],
      ["", "Ts"],
      ["", "ts"],
      ["", "a"],
      ["", "c"],
      ["", "e"],
      ["", "l"],
      ["", "n"],
      ["", "s"],
      ["", "z"],
      ["", "z"],
      ["", "A"],
      ["", "C"],
      ["", "E"],
      ["", "L"],
      ["", "N"],
      ["", "S"],
      ["", "Z"],
      ["", "Z"],
      ["", "Ye"],
      ["", "I"],
      ["", "Yi"],
      ["", "G"],
      ["", "ye"],
      ["", "i"],
      ["", "yi"],
      ["", "g"],
    ];
  },
  307232,
  (e, t, n) => {
    var r = e.r(702739),
      i = e.r(988388),
      s = e.r(605634);
    (Object.keys ||
      (Object.keys = function (e) {
        if (e !== Object(e))
          throw TypeError("Object.keys called on a non-object");
        var t,
          n = [];
        for (t in e) Object.prototype.hasOwnProperty.call(e, t) && n.push(t);
        return n;
      }),
      (t.exports = function (e, t) {
        if ("string" != typeof e)
          throw TypeError("Expected a string, got `" + typeof e + "`");
        var n = e,
          a = t || {};
        a = [{ customReplacements: [] }, a].reduce(function (e, t) {
          try {
            var n = e;
            return (
              Object.keys(t).forEach(function (e) {
                n[e] = t[e];
              }),
              n
            );
          } catch (t) {
            return e;
          }
        }, {});
        var o = [].concat(s).concat(a.customReplacements).filter(Boolean);
        return r(
          (n = (function (e, t) {
            return t.reduce(function (e, t) {
              var n = t[0],
                r = t[1];
              return "string" != typeof n ? e : e.replace(RegExp(i(n), "g"), r);
            }, e);
          })((n = n.normalize()), o)),
        );
      }));
  },
  858269,
  (e, t, n) => {
    var r = e.r(988388),
      i = e.r(307232);
    t.exports = function (e) {
      var t, n;
      if ("string" != typeof e)
        throw TypeError("Expected a string, got `" + typeof e + "`");
      return (
        (t = i(e, { customReplacements: [["&", " and "]] })
          .replace(/([A-Z]{2,})([a-z\d]+)/g, "$1 $2")
          .replace(/([a-z\d]+)([A-Z]{2,})/g, "$1 $2")
          .replace(/([a-z\d])([A-Z])/g, "$1 $2")
          .replace(/([A-Z]+)([A-Z][a-z\d]+)/g, "$1 $2")
          .toLowerCase()
          .replace(/[^a-z\d]+/g, "-")
          .replace(/\\/g, "")),
        (n = r("-")),
        t
          .replace(RegExp(n + "{2,}", "g"), "-")
          .replace(RegExp("^" + n + "|" + n + "$", "g"), "")
      );
    };
  },
  476171,
  (e) => {
    "use strict";
    var t = e.i(858269);
    function n(e, n) {
      return n ? `${(0, t.default)(n.slice(0, 50))}-${e}` : e;
    }
    e.s(["getSluggifiedId", () => n]);
  },
  3156,
  307778,
  589910,
  867751,
  604448,
  652461,
  550040,
  (e) => {
    "use strict";
    e.s(["TeamUpgradeDialog", () => g], 3156);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(176248),
      s = e.i(602544),
      a = e.i(900511),
      o = e.i(297239),
      l = e.i(206037),
      c = e.i(298515),
      u = e.i(654335),
      d = e.i(53223),
      h = e.i(120945);
    e.i(904347);
    var p = e.i(37737),
      m = e.i(644471),
      f = e.i(775883);
    function g({ id: e, name: g, slug: x }) {
      let v = (0, o.useT)(),
        { planInfo: y, isLoading: b } = (0, l.usePlanInfo)(!0, e),
        j = (0, f.usePlanLabelMap)(),
        w = (0, n.useMemo)(
          () =>
            y?.plans?.filter(
              (e) => "v0-team" === e.slug || "v0-business" === e.slug,
            ) ?? [],
          [y?.plans],
        ),
        [C, k] = (0, n.useState)(w[0]?.slug);
      (0, n.useEffect)(() => {
        !C && w.length > 0 && k(w[0]?.slug);
      }, [w, C]);
      let S = (0, n.useMemo)(() => w.find((e) => e.slug === C), [w, C]);
      return b || 0 === w.length || !S
        ? null
        : (0, t.jsxs)(h.AtomicDialog, {
            type: "upgradeTeam",
            children: [
              (0, t.jsxs)(r.ModalHeader, {
                className: "pb-4!",
                children: [
                  (0, t.jsx)(r.ModalTitle, {
                    children: v("teamUpgradeDialog.title"),
                  }),
                  (0, t.jsx)(r.ModalDescription, {
                    children: v("teamUpgradeDialog.description")(g || x),
                  }),
                ],
              }),
              (0, t.jsxs)(r.ModalContent, {
                className: "flex flex-col gap-4",
                children: [
                  (0, t.jsxs)(m.Tabs, {
                    className: "flex w-full flex-col gap-4",
                    onValueChange: k,
                    value: C,
                    children: [
                      (0, t.jsx)(m.TabsList, {
                        className: "grid h-fit",
                        style: {
                          gridTemplateColumns: `repeat(${w.length}, 1fr)`,
                        },
                        children: w.map((e) =>
                          (0, t.jsx)(
                            m.TabsTrigger,
                            { value: e.slug, children: j[e.slug].label },
                            e.slug,
                          ),
                        ),
                      }),
                      w.map((e) =>
                        (0, t.jsx)(
                          m.TabsContent,
                          {
                            value: e.slug,
                            children: (0, t.jsxs)("div", {
                              className:
                                "border-v0-alpha-400 bg-v0-background-200 m-0 space-y-3 rounded-sm border p-4!",
                              children: [
                                (0, t.jsxs)("div", {
                                  className: "flex flex-col gap-2",
                                  children: [
                                    (0, t.jsx)("p", {
                                      className: "font-semibold",
                                      children: v("teamUpgradeDialog.planName")(
                                        j[e.slug].label,
                                      ),
                                    }),
                                    (0, t.jsxs)("div", {
                                      className:
                                        "inline-flex items-center gap-0.5",
                                      children: [
                                        (0, t.jsx)("p", {
                                          className:
                                            "text-xl font-semibold leading-7",
                                          children: (0, c.formatPlanTotalPrice)(
                                            e,
                                          ),
                                        }),
                                        (0, t.jsx)("p", {
                                          className:
                                            "leading-5 text-v0-gray-900",
                                          children: v(
                                            "teamUpgradeDialog.userPerMonth",
                                          ),
                                        }),
                                      ],
                                    }),
                                  ],
                                }),
                                (0, t.jsx)("p", {
                                  className: "font-semibold",
                                  children:
                                    "v0-business" === e.slug
                                      ? "For privacy-conscious teams"
                                      : v(
                                          "teamUpgradeDialog.forFastMovingTeams",
                                        ),
                                }),
                                (0, t.jsxs)("ul", {
                                  className: "space-y-3 text-sm",
                                  children: [
                                    "v0-business" === e.slug
                                      ? (0, t.jsxs)("li", {
                                          className: "flex items-center gap-2",
                                          children: [
                                            (0, t.jsx)(s.Check, { size: 20 }),
                                            " ",
                                            "Training opt-out by default",
                                          ],
                                        })
                                      : null,
                                    (0, t.jsxs)("li", {
                                      className: "flex items-center gap-2",
                                      children: [
                                        (0, t.jsx)(s.Check, { size: 20 }),
                                        " ",
                                        v(
                                          "teamUpgradeDialog.everythingInPremium",
                                        ),
                                      ],
                                    }),
                                    "v0-business" !== e.slug
                                      ? (0, t.jsxs)("li", {
                                          className: "flex items-center gap-2",
                                          children: [
                                            (0, t.jsx)(s.Check, { size: 20 }),
                                            " ",
                                            v(
                                              "teamUpgradeDialog.evenHigherLimits",
                                            ),
                                          ],
                                        })
                                      : null,
                                    (0, t.jsxs)("li", {
                                      className: "flex items-center gap-2",
                                      children: [
                                        (0, t.jsx)(s.Check, { size: 20 }),
                                        " ",
                                        v(
                                          "teamUpgradeDialog.centralizedBilling",
                                        ),
                                      ],
                                    }),
                                  ],
                                }),
                              ],
                            }),
                          },
                          e.slug,
                        ),
                      ),
                    ],
                  }),
                  (0, t.jsxs)("p", {
                    className: "text-sm text-v0-gray-900",
                    children: [
                      v("teamUpgradeDialog.learnMore"),
                      " ",
                      (0, t.jsxs)(u.default, {
                        className: "inline-flex items-center text-v0-blue-700",
                        href: "/pricing",
                        children: [
                          v("teamUpgradeDialog.pricingPage"),
                          (0, t.jsx)(a.ExternalSmall, {}),
                        ],
                      }),
                      v("teamUpgradeDialog.afterLearnMore"),
                    ],
                  }),
                ],
              }),
              (0, t.jsxs)(r.ModalFooter, {
                children: [
                  (0, t.jsx)(i.Button, {
                    size: "sm",
                    variant: "secondary",
                    onClick: p.closeDialog,
                    children: v("teamUpgradeDialog.cancel"),
                  }),
                  (0, t.jsx)(i.Button, {
                    asChild: !0,
                    onClick: () => {
                      (C &&
                        (0, d.track)("ClickGoToUpgradeTeamPage", { teamId: e }),
                        (0, p.closeDialog)());
                    },
                    size: "sm",
                    children: (0, t.jsx)(u.default, {
                      href: `/chat/upgrade?teamId=${e}${C ? `&plan=${C}` : ""}`,
                      children: v("teamUpgradeDialog.startTeamPlan"),
                    }),
                  }),
                ],
              }),
            ],
          });
    }
    e.s(["SuspendingChatRenameDialog", () => q], 867751);
    var x = t,
      v = n,
      y = i,
      b = r,
      j = e.i(919012),
      w = (0, j.createServerReference)(
        "403440c8c9e346b61b179bbec0cc7a2e44ef80265a",
        j.callServer,
        void 0,
        j.findSourceMapURL,
        "updateChatTitle",
      ),
      C = e.i(226368);
    e.i(563948);
    var k = e.i(407562),
      S = e.i(763480),
      N = t,
      E = e.i(304649);
    function A({ className: e, ...t }) {
      return (0, N.jsx)("svg", {
        className: (0, E.cn)("h-4 w-4 animate-spin", e),
        fill: "currentColor",
        viewBox: "0 0 256 256",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
        children: (0, N.jsx)("path", {
          d: "M232 128a104 104 0 0 1-208 0c0-41 23.81-78.36 60.66-95.27a8 8 0 0 1 6.68 14.54C60.15 61.59 40 93.27 40 128a88 88 0 0 0 176 0c0-34.73-20.15-66.41-51.34-80.73a8 8 0 0 1 6.68-14.54C208.19 49.64 232 87 232 128Z",
        }),
      });
    }
    e.s(["IconSpinner", () => A], 307778);
    var D = e.i(246300),
      I = e.i(120485),
      M = e.i(470259),
      T = e.i(908431),
      L = t,
      P = E;
    function R({
      count: e,
      max: t,
      className: n,
      displayThreshold: r,
      alertThreshold: i,
      message: s,
      messageThreshold: a,
      ...o
    }) {
      return (
        (r = r ?? 0.75 * t),
        (a = a ?? 0.9 * t),
        (i = i ?? 0.95 * t),
        (0, L.jsxs)("div", {
          className: (0, P.cn)(
            "pointer-events-none items-center gap-2 rounded-md px-2 py-1 text-xs",
            e >= r ? "flex" : "hidden",
            e >= i ? "text-v0-red-700" : "text-v0-gray-900",
            n,
          ),
          ...o,
          children: [
            s && e >= a && (0, L.jsx)("span", { children: s }),
            (0, L.jsxs)("span", {
              className: "ml-auto tabular-nums",
              children: [e.toLocaleString(), "/", t.toLocaleString()],
            }),
          ],
        })
      );
    }
    e.s(["InputCounter", () => R], 589910);
    var F = o,
      _ = e.i(873013),
      O = e.i(70165),
      B = e.i(703699),
      V = e.i(476171),
      z = p,
      H = h;
    e.i(472428);
    var $ = e.i(296900),
      U = e.i(387040);
    let G = T.z.object({
        title: T.z
          .string()
          .min(1, "Title is required")
          .max(100, "Title must be less than 100 characters"),
      }),
      W = 100;
    function q({ chatId: e }) {
      let t = (0, C.useRouter)(),
        [n, r] = (0, v.useTransition)(),
        [i, s] = (0, v.useState)(""),
        a = (0, _.useRewrittenParams)(),
        { data: o, setData: l } = (0, D.useChatHistory)(),
        { data: c, setData: u } = (0, D.useChatFavorites)(),
        { data: d, revalidate: h } = (0, $.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: e },
          { stopFetch: !0 },
        ),
        { data: p, mutate: m } = (0, $.useServerQuerySWR)(
          ["scoped", "chats"],
          {},
          { suspense: !0 },
        ),
        [f, g] = (0, v.useState)(""),
        j = "string" == typeof a.id ? (0, B.extractChatIdFromSlug)(a.id) : null,
        N = v.default.useRef(null),
        E = (0, F.useT)(),
        T = (0, O.useIsMobile)();
      ((0, v.useEffect)(() => {
        let t = o?.find((t) => t.chatId === e),
          n = d?.ok ? d.value.title : "";
        (g(t?.title || n || ""), s(t?.title || n || ""));
      }, [o, e, d]),
        (0, v.useEffect)(() => {
          setTimeout(() => {
            (N.current?.focus(), T || N.current?.select());
          }, 0);
        }, [T]));
      let L = (0, v.useCallback)(() => {
          r(async () => {
            let n = i.trim() || "Untitled";
            try {
              let t = await m({
                  serverMutate: w({ chatId: e, title: n }),
                  optimisticData: (0, U.ok)({
                    favorites: p.ok
                      ? p.value.favorites.map((t) =>
                          t.chatId === e ? { ...t, title: n } : t,
                        )
                      : [],
                    shared: p.ok
                      ? p.value.shared.map((t) =>
                          t.chatId === e ? { ...t, title: n } : t,
                        )
                      : [],
                    history: p.ok
                      ? p.value.history.map((t) =>
                          t.chatId === e ? { ...t, title: n } : t,
                        )
                      : [],
                  }),
                }),
                r = c?.find((t) => t.chatId === e);
              if ("success" in t) {
                if (
                  (r &&
                    u((t) =>
                      t.map((t) => (t.chatId === e ? { ...t, title: n } : t)),
                    ),
                  o?.find((t) => t.chatId === e) &&
                    l((t) =>
                      t.map((t) => (t.chatId === e ? { ...t, title: n } : t)),
                    ),
                  j === e && h(),
                  k.toast.success(E("updateChatTitleDialog.successToast")),
                  RegExp(`/chat/.*${e}`).test(window.location.pathname))
                ) {
                  let t = (0, V.getSluggifiedId)(e, n);
                  window.history.replaceState(null, "", `/chat/${t}`);
                }
                (0, z.closeDialog)();
              } else throw Error(M.FAILED_TO_UPDATE_CHAT_TITLE);
            } catch (e) {
              ((0, I.handleChatError)(e, t) ||
                k.toast.error("Failed to update chat title. Please try again."),
                u(() => c || []),
                l(() => o || []));
            }
          });
        }, [i, m, e, p, c, o, j, E, u, l, h, t]),
        P = (0, v.useCallback)(
          (e) => {
            e.preventDefault();
            let t = G.safeParse({ title: i });
            if (!t.success) {
              let e = t.error.flatten().fieldErrors;
              k.toast.error(e.title?.[0] || "Invalid title");
              return;
            }
            L();
          },
          [L, i],
        );
      return (0, x.jsx)(H.AtomicDialog, {
        type: "updateChatTitle",
        children: (0, x.jsxs)("form", {
          onSubmit: P,
          children: [
            (0, x.jsxs)(b.ModalHeader, {
              children: [
                (0, x.jsx)(b.ModalTitle, {
                  children: E("updateChatTitleDialog.title"),
                }),
                (0, x.jsxs)(b.ModalDescription, {
                  children: [
                    (0, x.jsx)(S.Input, {
                      label: E("updateChatTitleDialog.newChatTitle"),
                      "aria-label": E("updateChatTitleDialog.newChatTitle"),
                      autoComplete: "off",
                      autoFocus: !0,
                      className: "w-full",
                      id: "newChatTitle",
                      maxLength: W,
                      onChange: (e) => s(e.target.value),
                      placeholder:
                        f || E("updateChatTitleDialog.enterNewTitle"),
                      ref: N,
                      value: i,
                    }),
                    (0, x.jsx)(R, {
                      className: "mt-2",
                      count: i.length,
                      max: W,
                      message: `Title must be less than ${W} characters`,
                    }),
                  ],
                }),
              ],
            }),
            (0, x.jsxs)(b.ModalFooter, {
              children: [
                (0, x.jsx)(y.Button, {
                  onClick: z.closeDialog,
                  size: "sm",
                  type: "button",
                  variant: "secondary",
                  children: E("updateChatTitleDialog.cancel"),
                }),
                (0, x.jsx)(y.Button, {
                  disabled: n,
                  size: "sm",
                  type: "submit",
                  children: n
                    ? (0, x.jsxs)(x.Fragment, {
                        children: [
                          (0, x.jsx)(A, {
                            "aria-hidden": "true",
                            className: "size-4",
                          }),
                          (0, x.jsx)("span", {
                            children: E("updateChatTitleDialog.saving"),
                          }),
                        ],
                      })
                    : E("updateChatTitleDialog.save"),
                }),
              ],
            }),
          ],
        }),
      });
    }
    e.s(["ChatDeleteDialog", () => ec], 652461);
    var Z = t,
      K = i,
      Y = k,
      J = r,
      Q = n,
      X = C,
      ee = D,
      et = d,
      en = j,
      er = (0, en.createServerReference)(
        "401fa270600fd26ebccb9e4b3e7f04624e088468c2",
        en.callServer,
        void 0,
        en.findSourceMapURL,
        "deleteChat",
      );
    e.s(["deleteChat", () => er], 604448);
    var ei = o,
      es = I,
      ea = h,
      eo = p,
      el = e.i(729602);
    function ec({ chatId: e }) {
      let t = (0, X.useRouter)(),
        n = (0, el.useChatId)(),
        [r, i] = (0, Q.useTransition)(),
        { setData: s } = (0, ee.useChatHistory)(),
        a = (0, ei.useT)(),
        o = () => {
          i(async () => {
            try {
              (0, et.track)("ClickDeleteChat", { targetChatId: e });
              let r = await er({ payload: { chatId: e } });
              if (r?.error) throw Error(r.error);
              (s((t) => t.filter((t) => t.chatId !== e)),
                (0, eo.closeDialog)(),
                Y.toast.success(a("deleteChatDialog.successToast")),
                n === e && t.push("/chat"));
            } catch (e) {
              (0, es.handleChatError)(e) ||
                Y.toast.error("Something went wrong. Please try again.");
            }
          });
        };
      return (0, Z.jsxs)(ea.AtomicDialog, {
        type: "deleteChat",
        children: [
          (0, Z.jsxs)(J.ModalHeader, {
            children: [
              (0, Z.jsx)(J.ModalTitle, {
                children: a("deleteChatDialog.title"),
              }),
              (0, Z.jsx)(J.ModalDescription, {
                children: a("deleteChatDialog.description"),
              }),
            ],
          }),
          (0, Z.jsxs)(J.ModalFooter, {
            children: [
              (0, Z.jsx)(K.Button, {
                size: "sm",
                variant: "secondary",
                onClick: eo.closeDialog,
                children: a("deleteChatDialog.cancel"),
              }),
              (0, Z.jsx)(K.Button, {
                disabled: r,
                onClick: o,
                size: "sm",
                variant: "destructive",
                children: r
                  ? (0, Z.jsxs)(Z.Fragment, {
                      children: [
                        (0, Z.jsx)(A, { className: "size-4" }),
                        a("deleteChatDialog.deleting"),
                      ],
                    })
                  : a("deleteChatDialog.delete"),
              }),
            ],
          }),
        ],
      });
    }
    var eu = j,
      ed = (0, eu.createServerReference)(
        "401617103e8a94a0d7b71c30e86e69e49caac12ae8",
        eu.callServer,
        void 0,
        eu.findSourceMapURL,
        "restoreBlock",
      );
    e.s(["restoreBlock", () => ed], 550040);
  },
  381434,
  (e) => {
    "use strict";
    function t(e, t) {
      if (!e || 0 === t.length) return !0;
      let n = t[t.length - 1];
      return n?.id === e;
    }
    function n(e) {
      return 0 !== e.length && !e[e.length - 1].closed;
    }
    function r(e) {
      return e[e.length - 1];
    }
    function i(e, r) {
      return t(e, r) && n(r);
    }
    e.s([
      "getLatestBlock",
      () => r,
      "isLatestBlock",
      () => t,
      "isLatestBlockInProgress",
      () => i,
      "isLatestVersionInProgress",
      () => n,
    ]);
  },
  370912,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(156029);
    function r() {
      let { getBlockCreatedAt: e, setBlockCreatedAt: r } = (0,
      n.useBlockMappings)();
      return {
        getBlockCreatedAt: (0, t.useCallback)(
          (t) => {
            let n = e(t);
            return n?.toISOString() ?? void 0;
          },
          [e],
        ),
        setBlockCreatedAt: (0, t.useCallback)(
          (e, t) => {
            r(e, new Date(t));
          },
          [r],
        ),
      };
    }
    e.s(["useBlockCreatedAt", () => r]);
  },
  848258,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(92479),
      r = e.i(226368),
      i = e.i(418625);
    function s({ parentRef: e } = {}) {
      let i = (0, t.useRef)(null),
        o = (0, t.useRef)(null),
        l = (0, t.useRef)(null),
        c = (0, t.useRef)(null),
        u = (0, t.useRef)(!0),
        [d, h] = (0, t.useState)(!1),
        [p, m] = (0, t.useState)(!0),
        { messages: f, activeForkKey: g } = (0, n.useChatMessages)(),
        { hashMessageId: x } = (0, n.useChatHashNavigation)(),
        v = (0, r.usePathname)(),
        y = (0, t.useCallback)((e, t, n, r) => {
          o.current &&
            o.current.scrollToIndex(e, {
              align: r ? "start" : "end",
              smooth: t,
            });
        }, []),
        b = (0, t.useCallback)(
          (e) => {
            y(1 / 0, e);
          },
          [y],
        ),
        j = (0, t.useCallback)(
          (e, t = 0, n, r) => {
            if (!n) {
              if (l.current === e) return;
              l.current = e;
            }
            let i = new Set(r ?? (g || [])),
              s = f
                .filter((e) => i.has(e.id) && !e.isContentLoading)
                .findIndex((t) => t.id === e);
            -1 !== s && setTimeout(() => y(s, !0, r?.length, !0), t);
          },
          [f, y, g],
        ),
        w = (0, t.useCallback)(() => {
          (c.current && clearTimeout(c.current),
            (c.current = setTimeout(() => {
              if (!i.current) return;
              c.current = null;
              let e = i.current.scrollTop,
                t = i.current.scrollHeight,
                n = e + i.current.clientHeight >= t - 100;
              ((u.current = n), m(n), h(e <= 100));
            }, 500)));
        }, []);
      (0, t.useEffect)(() => {
        let t = (e) => {
            e.preventDefault();
            let t = window.location.hash.slice(1);
            t && j(t);
          },
          n = (e) => {
            let t = e.target.closest("a");
            if (t && t.getAttribute("href")?.startsWith("#")) {
              (e.preventDefault(), e.stopPropagation());
              let n = t.getAttribute("href").slice(1);
              (window.history.pushState(null, "", `${v}#${n}`),
                window.scrollTo(0, 0),
                j(n));
            }
          },
          r = e?.current;
        return (
          window.addEventListener("hashchange", t),
          r?.addEventListener("click", n),
          () => {
            (window.removeEventListener("hashchange", t),
              r?.removeEventListener("click", n));
          }
        );
      }, [v, j, e]);
      let C = (0, t.useRef)(null);
      return (
        (0, t.useEffect)(() => {
          if (C.current === v) return;
          if (((C.current = v), (u.current = !0), window.location.hash))
            return void j(window.location.hash.slice(1), 0);
          if (x) return void j(x, 0);
          let e = requestAnimationFrame(() => b());
          return () => cancelAnimationFrame(e);
        }, [v, j, b, x]),
        a({ scrollToHash: j, scrollToBottom: b }),
        {
          isAtBottom: p,
          isAtTop: d,
          containerRef: i,
          vlistRef: o,
          scrollToBottom: b,
          scrollToHash: j,
          scrollToIndex: y,
          handleScroll: w,
        }
      );
    }
    function a(e) {
      let { data: n, mutate: r } = (0, i.default)("scroll-functions", null, {
        fallbackData: e
          ? { scrollToHash: e.scrollToHash, scrollToBottom: e.scrollToBottom }
          : void 0,
      });
      return (
        (0, t.useEffect)(() => {
          e &&
            r({
              scrollToHash: e.scrollToHash,
              scrollToBottom: e.scrollToBottom,
            });
        }, [e?.scrollToHash, e?.scrollToBottom, r, e]),
        n ?? { scrollToHash: () => {}, scrollToBottom: () => {} }
      );
    }
    e.s(["useChatScroll", () => s, "useScrollToMessage", () => a]);
  },
  862664,
  (e) => {
    "use strict";
    var t = e.i(156029);
    function n() {
      let { getBlockDeployed: e, setBlockDeployed: n } = (0,
      t.useBlockMappings)();
      return { getBlockDeployed: e, setBlockDeployed: n };
    }
    e.s(["useDeployedBlocks", () => n]);
  },
  314581,
  723487,
  (e) => {
    "use strict";
    function t(e) {
      return e.slice().reverse();
    }
    e.s(["toReversed", () => t], 314581);
    var n = e.i(9654),
      r = e.i(393799);
    let i = (0, n.atom)(!1);
    function s() {
      let [e, t] = (0, r.useAtom)(i);
      return [e, t];
    }
    e.s(["useHistoryPanel", () => s], 723487);
  },
  249897,
  (e) => {
    "use strict";
    let t = /^v_(\d+)_/;
    function n(e) {
      try {
        let n = e.match(t);
        if (!n)
          return (console.error(`Invalid source version format: ${e}`), null);
        return parseInt(n[1]);
      } catch (t) {
        return (console.error(`Error parsing source version: ${e}`, t), null);
      }
    }
    e.s(["parseSourceVersionToNumber", () => n]);
  },
  301331,
  91994,
  (e) => {
    "use strict";
    e.s(
      [
        "BlockHistorySelect",
        () => z,
        "useBlockData",
        () => _,
        "useBlockHistory",
        () => O,
        "useBlockSource",
        () => B,
        "usePulsePreview",
        () => H,
        "useSetPulsePreview",
        () => $,
      ],
      301331,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(381434),
      i = e.i(92479),
      s = e.i(818273),
      a = e.i(449381),
      o = e.i(418625),
      l = e.i(577483),
      c = e.i(15916),
      u = e.i(969372),
      d = e.i(350097),
      h = e.i(370912),
      p = e.i(592258),
      m = e.i(176248),
      f = e.i(66990),
      g = e.i(848258),
      x = e.i(767373),
      v = e.i(304649),
      y = e.i(862664),
      b = e.i(903500),
      j = e.i(794593),
      w = e.i(696871),
      C = e.i(227423),
      k = e.i(314581),
      S = e.i(723487),
      N = e.i(249897),
      E = n,
      A = i,
      D = e.i(296900),
      I = e.i(819969),
      M = e.i(156029),
      T = e.i(900693);
    function L() {
      let { chatId: e } = (0, I.useCurrentChat)(),
        { messages: t, activeForkKey: n } = (0, A.useChatMessages)(),
        r = (0, A.useSetChatState)(),
        [i, s] = (0, E.useState)(!1),
        { setMappings: a } = (0, M.useBlockMappings)(),
        o = (0, E.useMemo)(() => new Set(n || []), [n]),
        l = (0, E.useMemo)(() => {
          for (let e = t.length - 1; e >= 0; e--) {
            let n = t[e];
            if (n?.isContentLoading && o.has(n.id)) return n.id;
          }
          return null;
        }, [t, o]),
        c = !!l,
        u = (0, E.useCallback)(
          ({ data: e }) => {
            if (!e.ok) return;
            s(!0);
            let t = e.value.uiMessages,
              n = e.value.blockMappings,
              i = new Map(t.map((e) => [e.id, e]));
            (a((e) => {
              if (!e || !n) return e;
              let t = (e) =>
                  e instanceof Map ? e : new Map(Object.entries(e || {})),
                r = (e, n) => new Map([...t(e), ...t(n)]);
              return {
                sqlBlockExecutionStates: r(
                  e.sqlBlockExecutionStates,
                  n.sqlBlockExecutionStates,
                ),
                blockOutputs: r(e.blockOutputs, n.blockOutputs),
                blocksForkedFrom: r(e.blocksForkedFrom, n.blocksForkedFrom),
                blocksTemplateIds: r(e.blocksTemplateIds, n.blocksTemplateIds),
                blocksCreatedAt: r(e.blocksCreatedAt, n.blocksCreatedAt),
                blocksShared: r(e.blocksShared, n.blocksShared),
                blocksDeployed: r(e.blocksDeployed, n.blocksDeployed),
                blocksSubdomains: r(e.blocksSubdomains, n.blocksSubdomains),
                brandedBlocks: r(e.brandedBlocks, n.brandedBlocks),
                unlistedBlocks: r(e.unlistedBlocks, n.unlistedBlocks),
              };
            }),
              r((e) => ({
                messages: [
                  ...e.messages.map((e) =>
                    e.isContentLoading && i.has(e.id) ? i.get(e.id) : e,
                  ),
                  ...t.filter((t) => !e.messages.some((e) => e.id === t.id)),
                ],
              })),
              requestAnimationFrame(() => {
                s(!1);
              }));
          },
          [r, a],
        ),
        { isLoading: d, revalidate: h } = (0, D.useServerQuerySWR)(
          ["chat", "messages"],
          { chatId: e, limit: 20, cursor: l ?? "" },
          { suspense: !1, stopFetch: !0 },
        ),
        p = (0, E.useCallback)(async () => {
          let e = await h();
          return (e && u({ data: e }), e);
        }, [u, h]),
        m = (0, T.useDirectRouteCaller)("chat", "messagesRange"),
        f = async (e) => {
          let t = await m(e);
          return (u({ data: t }), t);
        },
        g = (0, E.useCallback)(
          (e) => {
            if (!e || d || !c) return;
            let t = new IntersectionObserver(
              (e) => {
                e[0]?.isIntersecting && p();
              },
              { threshold: 0.1 },
            );
            return (t.observe(e), () => t.disconnect());
          },
          [d, c, p],
        );
      return {
        loadMoreMessages: p,
        loadMoreObserver: g,
        isLoadingMore: d,
        isShifting: i,
        hasMoreMessages: !!l,
        lastMessageId: l,
        fetchMessagesForRange: f,
      };
    }
    e.s(["useCurrentChatMessagePagination", () => L], 91994);
    var P = e.i(729602),
      R = e.i(707827);
    function F({ messages: e, overrides: t, includeNonVersionedBlocks: n }) {
      let r = [];
      for (let i of e)
        if ("assistant" === i.role) {
          let e = (0, s.getBlocksFromState)(i.content, i.id, {
            includeNonVersionedBlocks: n,
          });
          for (let n of (i.isContentLoading &&
            i.loadingBlocks?.length &&
            r.push(
              ...i.loadingBlocks.map((e) => ({
                meta: { project: "", file: "" },
                id: e.blockId,
                messageId: i.id,
                isLoading: !0,
                type: e.type,
                source: "loading",
                remoteInfo: void 0,
                forkedFromBlockId: void 0,
                language: "typescript",
                closed: !0,
              })),
            ),
          e)) {
            let e = t?.[n.id],
              i = { ...n, ...e };
            w.INLINE_BLOCK_TYPES.includes(i.type) || r.push(i);
          }
        }
      return { blocks: r };
    }
    function _() {
      let { chatId: e } = (0, i.useChatMessages)(),
        { data: t, mutate: r } = (0, o.default)(["blocks:overrides", e]);
      return {
        blockOverrides: t,
        updateBlockData: (0, n.useCallback)(
          (e) => {
            let { blockId: t, data: n } = e;
            r((e) => ({ ...e, [t]: { ...e?.[t], ...n } }));
          },
          [r],
        ),
      };
    }
    let O = ({
      blockId: e,
      searchAll: t = !1,
      includeNonVersionedBlocks: r = !1,
    }) => {
      let { messages: s, activeForkKey: a } = (0, i.useChatMessages)(),
        { blockOverrides: o, updateBlockData: l } = _(),
        { blocks: c } = (0, n.useMemo)(
          () => F({ messages: s, overrides: o, includeNonVersionedBlocks: r }),
          [o, s, r],
        ),
        { allBlocks: u, thisBlock: d } = (0, n.useMemo)(() => {
          let n = c.find((t) => t.id === e);
          if (t) return { allBlocks: c, thisBlock: n };
          let r = new Set(a);
          return {
            allBlocks: c.filter((e) => !!e.messageId && r.has(e.messageId)),
            thisBlock: n,
          };
        }, [c, t, a, e]),
        {
          projectBlocks: h,
          activeProject: p,
          activeVersionIndex: m,
          activeBlockIndex: f,
          blockVersions: g,
        } = (0, n.useMemo)(() => {
          let t,
            n,
            r = {},
            i = -1;
          for (let s of u) {
            if (w.INLINE_BLOCK_TYPES.includes(s.type)) continue;
            let a =
              "code-project" === s.type ? "code-project" : s.meta.project || "";
            (r[a] || (r[a] = []),
              s.id === e && ((t = a), (n = s.meta.file), (i = r[a].length)),
              r[a].push(s));
          }
          let s = [],
            a = -1,
            o = r[t || ""];
          if (!o)
            return {
              blockVersions: s,
              projectBlocks: r,
              activeProject: t,
              activeBlockIndex: i,
              activeVersionIndex: a,
            };
          for (let t = 0; t < o.length; t++) {
            let r = o[t];
            r &&
              (r.id === e && (a = s.length),
              ("code-project" === r.type || r.meta.file === n) && s.push(r));
          }
          return {
            blockVersions: s,
            projectBlocks: r,
            activeProject: t,
            activeBlockIndex: i,
            activeVersionIndex: a,
          };
        }, [u, e]),
        x = (0, n.useCallback)(
          async ([e, t]) => {
            let n = u.find((e) => e.id === t) || o?.[t],
              r = m > 0 ? g[m - 1] : void 0;
            async function i() {
              if (n && !n.needsBlockSource) return n.source;
              let e = await V(t);
              return (
                l({ blockId: t, data: { source: e, needsBlockSource: !1 } }),
                e
              );
            }
            async function s() {
              if (!r?.needsBlockSource) return r?.source;
              let e = await V(r.id);
              l({ blockId: r.id, data: { source: e, needsBlockSource: !1 } });
            }
            let [a] = await Promise.all([i(), s()]);
            return a;
          },
          [m, u, g, l, o],
        ),
        { trigger: v, isMutating: y } = (0, C.default)(
          e ? ["block:source", e] : null,
          x,
          { optimisticData: d?.source },
        ),
        b = o?.[e || "never_match"]?.source || d?.source,
        j = (0, n.useMemo)(() => (u.length > 0 ? u[u.length - 1] : null), [u]);
      return {
        history: g,
        allBlocks: u,
        latestSource: b,
        projectBlocks: p && p in h ? h[p] : [],
        projectBlockIndex: f,
        project: p,
        currentBlockIndex: m,
        updateBlockData: l,
        ensureBlockSource: v,
        isLoadingBlockSource: y,
        latestBlock: j,
        thisBlock: d,
      };
    };
    function B() {
      let { mutate: e } = (0, c.useSWRConfig)();
      return {
        ensureBlockSource: (0, n.useCallback)(
          (t) => {
            e(["block:source", t]);
          },
          [e],
        ),
      };
    }
    async function V(e) {
      let t = await fetch(`/chat/api/blocks/source?blockId=${e}`, {
        headers: { "Content-Type": "application/json" },
      });
      if (!t.ok) throw Error("Failed to fetch block source");
      let { source: n } = await t.json();
      return n;
    }
    function z({ blockId: e, separator: s = !0 }) {
      let {
          history: o,
          currentBlockIndex: l,
          thisBlock: c,
        } = O({ blockId: e, searchAll: !0 }),
        { messages: w, activeForkKey: C } = (0, i.useChatMessages)(),
        E = (0, i.useSetChatState)(),
        A = (0, a.useSetActiveBlockState)(),
        { getBlockCreatedAt: D } = (0, h.useBlockCreatedAt)(),
        I = (0, a.useActiveBlockState)(),
        { setPulsePreview: M } = $(),
        { getBlockDeployed: T } = (0, y.useDeployedBlocks)(),
        F = (0, P.useChatId)(),
        { isStreaming: _ } = (0, i.useChatLoadingState)(),
        [, B] = (0, S.useHistoryPanel)(),
        [V, z] = (0, n.useState)(!1),
        [H, U] = (0, n.useState)(Date.now()),
        G = (0, n.useCallback)((e) => {
          (z(e), U(Date.now()));
        }, []),
        { scrollToHash: W } = (0, g.useScrollToMessage)(),
        { fetchMessagesForRange: q, lastMessageId: Z } = L(),
        [K, Y] = (0, n.useState)(!1),
        J = (0, r.getLatestBlock)(o),
        Q =
          (0, r.isLatestVersionInProgress)(o) ||
          (_ && void 0 !== J && J.id === I?.id && !J.closed),
        X = (0, n.useCallback)(
          async (e) => {
            let t,
              n = o.find((t) => t.id === e);
            if (!n || ((0, r.isLatestBlock)(n.id, o) && Q)) return;
            let i = C || [],
              s = Z;
            if (!i.includes(n.messageId)) {
              let e = w.map((e, t) => ({
                ...e,
                parentId: e.parentId || null,
                createdAt: new Date(t),
                messageId: e.id,
              }));
              (E({
                activeForkKey: (i =
                  (0, x.computeInitialForkKey)(e, n.messageId) || []),
              }),
                (s = i.at(-1) || Z),
                await new Promise((e) => setTimeout(e, 100)));
            }
            if (n.isLoading && F && s) {
              Y(!0);
              let e = await q({
                startMessageId: n.messageId,
                endMessageId: s,
                chatId: F,
                activeBlockId: n.id,
              });
              (Y(!1),
                e.ok && (t = e.value.activeBlock),
                await new Promise((e) => setTimeout(e, 100)));
            } else t = n;
            !t ||
              (A(t),
              M({ blockId: t.id }),
              W(n.messageId, 150, !0, i),
              o.findIndex((t) => t.id === e) < o.length - 1 && B(!0));
          },
          [C, o, W, B, q, Z, A, w, E, F, M, Q],
        ),
        ee =
          c?.sourceVersionKey &&
          (0, N.parseSourceVersionToNumber)(c.sourceVersionKey),
        et = ee && ee > 1,
        en = (0, n.useMemo)(() => (0, k.toReversed)(o), [o]);
      return o.length <= 1
        ? (0, t.jsx)("div", { className: "no-block-history hidden" })
        : (0, t.jsxs)(t.Fragment, {
            children: [
              s
                ? (0, t.jsx)(f.Separator, {
                    className: "mx-1.5 h-[22px]",
                    orientation: "vertical",
                  })
                : null,
              (0, t.jsx)("div", {
                className: "block-history flex gap-1",
                onMouseDown: (e) => e.stopPropagation(),
                onTouchStart: (e) => e.stopPropagation(),
                onPointerDown: (e) => e.stopPropagation(),
                children: (0, t.jsxs)(p.Select, {
                  open: V,
                  onOpenChange: G,
                  value: I?.id,
                  onValueChange: X,
                  children: [
                    (0, t.jsx)(m.Button, {
                      variant: "ghost",
                      size: "sm",
                      className: "h-7 rounded-md pl-2 pr-1 text-v0-gray-900",
                      asChild: !0,
                      disabled: K,
                      children: (0, t.jsx)(p.SelectTrigger, {
                        hideChevron: !0,
                        children: (0, t.jsxs)("div", {
                          className: "flex items-center gap-1",
                          children: [
                            (0, t.jsxs)("span", {
                              className: "flex items-center gap-1",
                              children: [
                                (0, t.jsx)("span", {
                                  children:
                                    l + 1 === o.length ? "Latest" : `v${l + 1}`,
                                }),
                                et &&
                                  (0, t.jsx)("span", { children: "(edited)" }),
                                K && (0, t.jsx)(R.Spinner, {}),
                              ],
                            }),
                            (0, t.jsx)(u.ChevronDownSmall, {}),
                          ],
                        }),
                      }),
                    }),
                    (0, t.jsx)(p.SelectContent, {
                      align: "end",
                      className: "max-h-64! min-w-60!",
                      children: en.map((e, n) => {
                        let r = 0 === n && Q;
                        return (0, t.jsx)(
                          p.SelectItem,
                          {
                            iconOnRight: !0,
                            value: e.id,
                            className: (0, v.cn)("px-2 py-1.5"),
                            disabled: r,
                            children: (0, t.jsxs)("div", {
                              className: "flex flex-col items-start",
                              children: [
                                (0, t.jsxs)("div", {
                                  className:
                                    "flex items-center gap-2 font-medium",
                                  children: [
                                    (0, t.jsxs)("div", {
                                      children: ["Version ", o.length - n],
                                    }),
                                    T(e.id)
                                      ? (0, t.jsx)(j.Badge, {
                                          prefix: (0, t.jsx)(b.Globe, {
                                            className: "!size-3",
                                          }),
                                          children: "Deployed",
                                        })
                                      : null,
                                    r
                                      ? (0, t.jsx)(j.Badge, {
                                          variant: "gray",
                                          children: "In Progress",
                                        })
                                      : null,
                                  ],
                                }),
                                (0, t.jsx)("div", {
                                  className: (0, v.cn)(
                                    "text-[13px] text-v0-gray-900",
                                  ),
                                  children: r
                                    ? "v0 is working on this version"
                                    : D(e.id)
                                      ? (0, d.timeAgo)(new Date(D(e.id)), !0, H)
                                      : "Just now",
                                }),
                              ],
                            }),
                          },
                          e.id,
                        );
                      }),
                    }),
                  ],
                }),
              }),
            ],
          });
    }
    function H({ blockId: e }) {
      let { data: t } = (0, o.default)(["pulse-preview", e], null, {
        fallbackData: !1,
      });
      return { pulsePreview: t ?? !1 };
    }
    function $() {
      return {
        setPulsePreview: (0, n.useCallback)(({ blockId: e }) => {
          ((0, l.mutate)(["pulse-preview", e], !0),
            setTimeout(() => (0, l.mutate)(["pulse-preview", e], !1), 2e3));
        }, []),
      };
    }
  },
  298431,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "4070493c925e7a3502adca8948210f57b8a5b5967e",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "undoBlockEdits",
      );
    e.s(["undoBlockEdits", () => n]);
  },
  343258,
  (e) => {
    "use strict";
    var t = e.i(418625);
    function n({ blockId: e }) {
      let { data: n, mutate: r } = (0, t.default)(["block:editValueMap", e], {
        fallbackData: {},
      });
      return { editValueMap: n || {}, setEditValueMap: r };
    }
    e.s(["useEditValueMap", () => n]);
  },
  368387,
  76866,
  (e) => {
    "use strict";
    e.s(["ChatUndoChangesDialog", () => w], 368387);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(686832),
      i = e.i(120945);
    e.i(904347);
    var s = e.i(37737);
    e.s(["useRestoreBlockVersion", () => y], 76866);
    var a = e.i(576191),
      o = e.i(226368);
    e.i(563948);
    var l = e.i(407562),
      c = e.i(92479),
      u = e.i(550040),
      d = e.i(301331),
      h = e.i(449381),
      p = e.i(848258),
      m = e.i(767373),
      f = e.i(120485),
      g = e.i(298431),
      x = e.i(583965),
      v = e.i(343258);
    function y(e) {
      let { activeForkKey: t, messages: n } = (0, c.useChatMessages)(),
        r = (0, c.useSetChatState)(),
        { chatId: i } = (0, c.useChatId)(),
        {
          history: s,
          currentBlockIndex: y,
          updateBlockData: b,
        } = (0, d.useBlockHistory)({ blockId: e, searchAll: !0 }),
        j = (0, o.useRouter)(),
        w = (0, h.useActiveBlockState)(),
        { refresh: C } = (0, x.useBrowserFrame)(),
        k = (0, h.useSetActiveBlockState)(),
        { scrollToHash: S } = (0, p.useScrollToMessage)(),
        [N, E] = (0, a.useState)(!1),
        [, A] = (0, a.useTransition)(),
        { setEditValueMap: D } = (0, v.useEditValueMap)({ blockId: e || "" }),
        I = (0, a.useCallback)(
          (e, n, a = {}) => {
            t && i
              ? s[n].meta.project
                ? (E(!0),
                  A(async () => {
                    try {
                      let { error: o, newAssistantMessageId: c } = await (0,
                      u.restoreBlock)({
                        blockId: e,
                        chatId: i,
                        initialVersion: n,
                        versionToCreate: s.length,
                        forkKey: t,
                      });
                      o || !c
                        ? ((0, f.handleChatError)(o) ||
                            l.toast.error(
                              "Something went wrong. Please try again.",
                            ),
                          a.onError?.(
                            o || "Something went wrong. Please try again.",
                          ))
                        : (l.toast.success("Version restored successfully"),
                          r(() => ({ isLoading: !0, isRestoring: !0 })),
                          j.push(`#${c}`),
                          a.onSuccess?.(c));
                    } catch (e) {
                      (l.toast.error("Failed to restore version"),
                        a.onError?.(e));
                    } finally {
                      (E(!1), a.onFinally?.());
                    }
                  }))
                : l.toast.error("Something went wrong.")
              : l.toast.error("Could not find the message in the chat");
          },
          [t, i, s, r, j],
        ),
        M = (0, a.useCallback)(
          (n = {}) => {
            if (!e) return void l.toast.error("Block not found");
            if (N) return;
            let r = t?.findIndex((e) => e === s[y].messageId);
            void 0 !== r && !(r < 0) && t && i
              ? I(e, y, n)
              : l.toast.error("Could not find the message in the chat");
          },
          [N, t, i, s, y, I, e],
        ),
        T = (0, a.useCallback)(
          (e) => {
            if (!e || 0 === s.length) return;
            let i = s[s.length - 1];
            if ((k(i), !i.messageId)) return;
            let a = n.map((e, t) => ({
                ...e,
                parentId: e.parentId || null,
                createdAt: new Date(t),
                messageId: e.id,
              })),
              o = (0, m.computeInitialForkKey)(a, i.messageId);
            (t && !t.includes(i.messageId) && r({ activeForkKey: o }),
              S(i.messageId, 150, !0, o));
          },
          [s, k, n, t, r, S],
        ),
        [L, P] = (0, a.useState)(!1);
      return {
        restoreVersion: I,
        restoreCurrentBlock: M,
        exitToLatest: T,
        isRestoring: N,
        undoBlockEdits: (0, a.useCallback)(
          async (e, { onSuccess: t, onError: n, onFinally: r }) => {
            if (!i)
              return void l.toast.error(
                "Could not find the message in the chat",
              );
            P(!0);
            try {
              let n = await (0, g.undoBlockEdits)({ blockId: e, chatId: i });
              if ("success" in n) {
                let { newSource: r, newSourceVersionKey: i } = n;
                (D({}),
                  w &&
                    w.id === e &&
                    k({
                      ...w,
                      hasSourceBeenEdited: !0,
                      source: r,
                      lastEditedAt: new Date().toISOString(),
                    }),
                  b({
                    blockId: e,
                    data: {
                      hasSourceBeenEdited: !0,
                      source: r,
                      lastEditedAt: new Date().toISOString(),
                      sourceVersionKey: i,
                    },
                  }),
                  C(),
                  l.toast.success("Block edits undone"),
                  t?.());
              } else l.toast.error("Failed to undo block edits");
            } catch (e) {
              (l.toast.error("Failed to undo block edits"), n?.(e));
            } finally {
              (P(!1), r?.());
            }
          },
          [w, i, C, k, D, b],
        ),
        isUndoing: L,
      };
    }
    var b = e.i(53223),
      j = e.i(211976);
    function w({ blockId: e }) {
      let { undoBlockEdits: a, isUndoing: o } = y(e),
        l = () => {
          a(e, {
            onSuccess: () => {
              ((0, s.closeDialog)(),
                (0, b.track)("UndoChanges", { blockId: e }));
            },
          });
        };
      return (0, t.jsxs)(i.AtomicDialog, {
        type: "undoChanges",
        children: [
          (0, t.jsxs)(r.ModalHeader, {
            children: [
              (0, t.jsx)(r.ModalTitle, { children: "Undo changes" }),
              (0, t.jsx)(r.ModalDescription, {
                children:
                  "Are you sure you want to undo changes? This action is not reversible and will restore the block to its original state.",
              }),
            ],
          }),
          (0, t.jsxs)(r.ModalFooter, {
            children: [
              (0, t.jsx)(n.Button, {
                size: "sm",
                variant: "secondary",
                onClick: s.closeDialog,
                children: "Cancel",
              }),
              (0, t.jsx)(j.SpinnerButton, {
                pending: o,
                onClick: l,
                size: "sm",
                disabled: o,
                children: "Undo",
              }),
            ],
          }),
        ],
      });
    }
  },
  540294,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.89531 13.7603C6.72984 13.8785 6.5 13.7602 6.5 13.5569V10.75C6.5 9.7835 5.7165 9 4.75 9H2.5V2.5H12.1884C12.762 2.5 13.262 2.89037 13.4011 3.44683L14.4011 7.44683C14.5984 8.23576 14.0017 9 13.1884 9H9.25H8.5V9.75V12.4854C8.5 12.5662 8.46101 12.6419 8.39531 12.6889L6.89531 13.7603ZM5 13.5569C5 14.9803 6.6089 15.8082 7.76717 14.9809L9.26717 13.9095C9.72706 13.581 10 13.0506 10 12.4854V10.5H13.1884C14.9775 10.5 16.2903 8.81868 15.8563 7.08303L14.8563 3.08303C14.5503 1.85882 13.4503 1 12.1884 1H1.75H1V1.75V9.75V10.5H1.75H4.75C4.88807 10.5 5 10.6119 5 10.75V13.5569Z" fill="currentColor"/>',
    );
    e.s(["ThumbDown", 0, t]);
  },
  51940,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(304649),
      i = e.i(610726);
    let s = 384,
      a = 42,
      o = (0, n.forwardRef)(
        (
          {
            maxHeight: e = s,
            minHeight: o = a,
            className: l,
            resizeFunctionRef: c,
            ...u
          },
          d,
        ) => {
          let h = (0, n.useRef)(null);
          (0, n.useImperativeHandle)(d, () => h.current);
          let p = (0, n.useCallback)(() => {
            let t = h.current;
            if (!t) return;
            t.style.height = `${o}px`;
            let n = t.scrollHeight;
            t.style.height = `${Math.max(o, Math.min(n, e))}px`;
          }, [e, o]);
          (0, n.useImperativeHandle)(c, () => p);
          let m = (0, n.useCallback)(
            (e) => {
              (p(), h.current && u.onChange?.(e));
            },
            [u, p],
          );
          return (
            (0, n.useEffect)(() => {
              let e = new MutationObserver(p);
              return (
                h.current &&
                  e.observe(h.current, { characterData: !0, subtree: !0 }),
                () => e.disconnect()
              );
            }, [m, p]),
            (0, i.useResizeObserver)({ ref: h, onResize: p }),
            (0, n.useEffect)(() => {
              p();
            }, [p]),
            (0, t.jsx)("textarea", {
              ...u,
              className: (0, r.cn)("resize-none overflow-auto", l),
              autoComplete: "off",
              onChange: m,
              "data-1p-ignore": !0,
              "data-dashlane-disabled-on-field": !0,
              ref: h,
              style: { ...u.style, minHeight: `${o}px`, maxHeight: `${e}px` },
            })
          );
        },
      );
    ((o.displayName = "ResizableTextArea"), e.s(["ResizableTextArea", 0, o]));
  },
  329046,
  889661,
  346867,
  19922,
  324042,
  (e) => {
    "use strict";
    e.s(
      ["ChatMessageDownvoteDialog", () => P, "DownvoteButton", () => R],
      329046,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(216445);
    e.i(563948);
    var s = e.i(407562),
      a = n,
      o = e.i(862570);
    function l(e) {
      return {
        formRef: (0, a.useRef)(null),
        onKeyDown: (0, a.useCallback)(
          (t) => {
            if (o.isMobile) return;
            let n = t.currentTarget.value.trim(),
              r = "" === n && e?.localFileInfos && e.localFileInfos.length > 0;
            if (
              "Enter" === t.key &&
              !t.shiftKey &&
              !t.nativeEvent.isComposing
            ) {
              if (o.isSafari && o.isDesktop && 229 === t.keyCode) return;
              (t.preventDefault(),
                r ? e.submitMessage() : n.length > 0 && e?.submitMessage());
            }
          },
          [e],
        ),
      };
    }
    e.s(["useEnterSubmit", () => l], 889661);
    var c = e.i(707974),
      u = e.i(341003),
      d = e.i(580643),
      h = e.i(919012),
      p = (0, h.createServerReference)(
        "40d0d3fcf7d8669d9e9b78713f4ce7aab5a5a9abbb",
        h.callServer,
        void 0,
        h.findSourceMapURL,
        "sendMessageFeedback",
      );
    e.s(["sendMessageFeedback", () => p], 346867);
    var m = e.i(53223),
      f = e.i(92479),
      g = e.i(304649),
      x = e.i(686832),
      v = t,
      y = e.i(127558),
      b = e.i(540294);
    function j() {
      return (0, v.jsx)(y.AnimatedIcon, {
        variants: { hover: { y: 2, x: -1, rotate: 12 } },
        children: (0, v.jsx)(b.ThumbDown, { "aria-hidden": !0 }),
      });
    }
    var w = e.i(297239),
      C = e.i(32170);
    function k() {
      let { user: e, expectUser: t } = (0, C.useUser)();
      if (t && !e) return { isLoading: !0 };
      let n = !1;
      return (t || e) && (e?.v0plan !== "v0-enterprise" || e.isVercelian)
        ? { canVote: !0, isLoading: n }
        : { canVote: !1, isLoading: n };
    }
    e.s(["useCanVoteOnMessage", () => k], 19922);
    var S = e.i(51940),
      N = e.i(120945);
    e.i(904347);
    var E = e.i(37737),
      A = C,
      D = n,
      I = f,
      M = e.i(767373);
    function T({ messageId: e }) {
      let {
          chatId: t,
          messages: n,
          activeForkKey: r,
        } = (0, I.useChatMessages)(),
        { user: i } = (0, A.useUser)(),
        { botText: s, userMessageId: a } = (0, D.useMemo)(() => {
          let t = { botText: void 0, userMessageId: void 0 };
          if (!e || !r) return t;
          let i = n.findIndex((t) => "id" in t && t.id === e);
          if (i < 0) return t;
          let s = n[i];
          return {
            botText: s?.content,
            userMessageId: (0, M.getPreviousMessageIdInForkKey)(r, e),
          };
        }, [n, e, r]),
        o = (0, D.useMemo)(() => (0, M.getLeafMessageIdFromForkKey)(r), [r]);
      return {
        chatId: t,
        messageText: s,
        promptMessageId: a,
        messageId: e,
        userId: i?.id,
        leafMessageId: o,
      };
    }
    function L({ children: e, value: n, reasons: r }) {
      return (0, t.jsx)(u.RadioButton, {
        className: "max-sm:text-xs",
        onClick: () => r.toggle(n),
        selected: r.has(n),
        children: e,
      });
    }
    function P({ messageId: e, quote: a, voteOptions: o }) {
      let { activeForkKey: u } = (0, f.useChatMessages)(),
        { formRef: h, onKeyDown: v } = l(),
        {
          chatId: y,
          messageText: b,
          promptMessageId: j,
          userId: C,
          leafMessageId: k,
        } = o,
        [A, D] = (0, n.useState)(""),
        I = (0, d.useMultiSelect)(),
        M = (0, w.useT)(),
        T = (0, n.useCallback)(() => {
          (D(""), I.clear(), (0, E.closeDialog)());
        }, [I]),
        P = (0, n.useCallback)(
          async (t) => {
            if ((t.preventDefault(), j && b && e && k))
              try {
                (s.toast.success(M("downvoteDialog.successToast")),
                  await Promise.all([
                    T(),
                    (0, m.track)("SubmitDownvote", {
                      messageId: e,
                      leafMessageId: k,
                      quote: a,
                      reasons: I.values,
                      freeformFeedback: A,
                    }),
                    p({
                      feedback: A,
                      quote: a,
                      reasons: I.values,
                      chatId: y,
                      leafMessageId: k,
                      promptMessageId: j,
                      messageId: e,
                      userId: C,
                      type: "downvote",
                    }),
                  ]));
              } catch (e) {
                (console.error(e),
                  s.toast.error(
                    "Failed to send feedback. Please try again later.",
                  ));
              }
          },
          [j, b, e, k, M, T, a, I.values, A, y, C],
        ),
        R = (0, n.useMemo)(
          () =>
            (0, t.jsxs)("form", {
              className: (0, g.cn)("flex flex-col", "gap-3 sm:gap-6"),
              onSubmit: P,
              ref: h,
              children: [
                a &&
                  (0, t.jsxs)("div", {
                    className: (0, g.cn)(
                      "bg-v0-background-200 flex items-center gap-2 text-ellipsis py-3 text-sm text-v0-gray-1000",
                      "-mx-3 px-3 sm:-mx-6 sm:px-6",
                    ),
                    children: [
                      (0, t.jsx)("div", {
                        className:
                          "w-1 shrink-0 self-stretch rounded-full bg-v0-gray-300",
                      }),
                      (0, t.jsx)("span", {
                        className: "line-clamp-2",
                        children: a,
                      }),
                    ],
                  }),
                (0, t.jsx)("div", {
                  className: "flex flex-col gap-2",
                  children: (0, t.jsxs)("div", {
                    className:
                      "grid w-full grid-cols-2 items-center justify-start gap-2",
                    children: [
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "inaccurate",
                        children: M(
                          "downvoteDialog.options.incorrectInformation",
                        ),
                      }),
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "off-topic",
                        children: M(
                          "downvoteDialog.options.instructionsIgnored",
                        ),
                      }),
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "lazy",
                        children: M("downvoteDialog.options.beingLazy"),
                      }),
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "style",
                        children: M("downvoteDialog.options.dontLikeStyle"),
                      }),
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "bad-recommendation",
                        children: M("downvoteDialog.options.badRecommendation"),
                      }),
                      (0, t.jsx)(L, {
                        reasons: I,
                        value: "other",
                        children: M("downvoteDialog.options.other"),
                      }),
                    ],
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-2",
                  children: [
                    (0, t.jsxs)(c.Label, {
                      className: "text-sm font-normal text-v0-gray-900",
                      htmlFor: "downvote-feedback",
                      children: [
                        M("downvoteDialog.howCanWeImprove"),
                        " ",
                        (0, t.jsx)("span", {
                          className: "text-v0-gray-500",
                          children: M("downvoteDialog.optional"),
                        }),
                      ],
                    }),
                    (0, t.jsx)(i.Textarea, {
                      asChild: !0,
                      children: (0, t.jsx)(S.ResizableTextArea, {
                        id: "downvote-feedback",
                        name: "feedback",
                        onChange: (e) => D(e.target.value),
                        onKeyDown: v,
                        placeholder: "Your feedback...",
                        minHeight: 80,
                        maxHeight: 192,
                        value: A,
                      }),
                    }),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-2",
                  children: [
                    (0, t.jsx)(r.Button, {
                      className: "w-full flex-1",
                      onClick: (e) => {
                        (e.preventDefault(), T());
                      },
                      size: "sm",
                      variant: "secondary",
                      children: M("downvoteDialog.cancel"),
                    }),
                    (0, t.jsx)(r.Button, {
                      className: "w-full flex-1",
                      size: "sm",
                      type: "submit",
                      children: M("downvoteDialog.submit"),
                    }),
                  ],
                }),
              ],
            }),
          [P, h, a, I, M, v, A, T],
        );
      return (0, t.jsx)(N.AtomicDialog, {
        type: "messageDownvote",
        children: (0, t.jsxs)("div", {
          className: "overflow-auto",
          children: [
            (0, t.jsxs)(x.ModalHeader, {
              children: [
                (0, t.jsx)(x.ModalTitle, {
                  children: M("downvoteDialog.title"),
                }),
                (0, t.jsx)(x.ModalDescription, {
                  children: M("downvoteDialog.description")(a),
                }),
              ],
            }),
            (0, t.jsx)(x.ModalContent, { children: R }),
          ],
        }),
      });
    }
    function R({ variant: e, messageId: n, quoteRef: i, tooltip: s, ...a }) {
      let { isLoading: o, canVote: l } = k(),
        c = T({ messageId: n });
      return o || !l
        ? null
        : "quote" === e
          ? (0, t.jsx)(r.Button, {
              "aria-label": "Downvote",
              className:
                "text-v0-gray-900 hover:text-v0-gray-1000 rounded-md p-0 text-sm",
              onClick: () => {
                ((0, m.track)("OpenDownvote", {
                  quote: i?.current(),
                  messageId: n,
                }),
                  (0, E.openDialog)({
                    type: "messageDownvote",
                    data: { messageId: n, quote: i?.current(), voteOptions: c },
                  }));
              },
              size: "xs",
              variant: "ghost",
              children: (0, t.jsx)(j, { "aria-hidden": !0 }),
            })
          : (0, t.jsx)(r.Button, {
              "aria-label": "Downvote Response",
              onClick: () => {
                ((0, m.track)("OpenDownvote", { messageId: n }),
                  (0, E.openDialog)({
                    type: "messageDownvote",
                    data: { messageId: n, voteOptions: c },
                  }));
              },
              size: "xs",
              tooltip: s,
              tooltipDirection: "bottom",
              variant: "ghost",
              ...a,
              children: (0, t.jsx)(j, {}),
            });
    }
    e.s(["useVoteOptions", () => T], 324042);
  },
  341003,
  580643,
  173390,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649),
      r = e.i(176248),
      i = e.i(602544);
    function s({
      children: e,
      Icon: s,
      selected: a,
      className: o,
      onClick: l,
    }) {
      return (0, t.jsxs)(r.Button, {
        className: (0, n.cn)(
          "focus:bg-v0-background-100 flex h-12 items-center justify-between gap-1 px-4 font-medium text-v0-gray-1000 shadow-none transition-colors hover:focus:bg-v0-gray-100",
          a &&
            "border border-v0-blue-700 bg-v0-blue-100 text-v0-blue-700 hover:border-v0-blue-700 hover:bg-v0-blue-100 hover:brightness-97 focus:border-v0-blue-700 focus:bg-v0-blue-100 hover:focus:bg-v0-blue-100 focus-visible:border-v0-blue-700",
          o,
        ),
        onClick: l,
        size: "sm",
        type: "button",
        variant: "secondary",
        children: [
          (0, t.jsxs)("div", {
            className: "shrink-1 flex items-center gap-2 overflow-hidden",
            children: [
              s && (0, t.jsx)(s, { className: "h-4 w-4 shrink-0" }),
              (0, t.jsx)("span", {
                className: "overflow-hidden text-ellipsis",
                children: e,
              }),
            ],
          }),
          (0, t.jsx)("div", {
            className: (0, n.cn)(
              "flex size-4 shrink-0 items-center justify-center rounded-sm border text-v0-white",
              a && "border-0 bg-v0-blue-700",
            ),
            children: a
              ? (0, t.jsx)(i.Check, { className: "stroke-background h-2 w-2" })
              : null,
          }),
        ],
      });
    }
    e.s(["RadioButton", () => s], 341003);
    var a = e.i(576191);
    function o(e = []) {
      let [t, n] = (0, a.useState)(new Set(e)),
        r = (e) => t.has(e);
      return {
        values: [...t],
        has: r,
        toggle: (e) => n((t) => new Set(t.delete(e) ? t : t.add(e))),
        clear: () => n(new Set()),
      };
    }
    e.s(["useMultiSelect", () => o], 580643);
    let l = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 2.38401C2.64568 2.28957 2.84672 2.17097 3.09632 2.0516C3.67556 1.77457 4.50202 1.5 5.5 1.5C6.36835 1.5 7.01666 1.91731 7.76416 2.47582C7.81395 2.51302 7.86487 2.55137 7.91678 2.59046C8.2325 2.82825 8.58515 3.09385 8.94862 3.30046C9.38732 3.54983 9.90016 3.75 10.5 3.75C11.4771 3.75 12.5081 3.46807 13.2589 3.20897C13.3421 3.18026 13.4226 3.15157 13.5 3.12321V8.81917C13.366 8.88807 13.1923 8.96944 12.9825 9.05151C12.4127 9.27435 11.5825 9.49998 10.5568 9.49998C9.65149 9.49998 9.11435 9.17173 8.42753 8.74001L8.40495 8.72582C7.70405 8.28516 6.85285 7.75 5.5 7.75C4.25466 7.75 3.22521 8.08445 2.5 8.42432V2.38401ZM2.5 10.134V15.25V16H1V15.25V2V1.65215L1.26554 1.42746L1.75 2C1.26554 1.42746 1.26576 1.42728 1.26599 1.42709L1.26646 1.42668L1.26752 1.42579L1.27005 1.42367L1.27679 1.41807L1.29689 1.4017C1.31321 1.38857 1.33537 1.37107 1.36321 1.34985C1.41885 1.30743 1.49735 1.24998 1.59739 1.18261C1.79715 1.04807 2.08466 0.872716 2.44914 0.698399C3.17671 0.350428 4.22526 0 5.5 0C6.90437 0 7.9038 0.707694 8.66198 1.27418C8.72015 1.31765 8.77638 1.3599 8.831 1.40094C9.15213 1.64223 9.41729 1.84147 9.68987 1.99641C9.99337 2.16892 10.2476 2.25 10.5 2.25C11.2275 2.25 12.0715 2.03193 12.7695 1.79103C13.1109 1.67321 13.4025 1.55523 13.6079 1.46707C13.7104 1.42308 13.7908 1.38677 13.8446 1.36197C13.8714 1.34957 13.8916 1.34007 13.9044 1.33395L13.9182 1.32736L13.9206 1.32621L13.9208 1.32612L13.9209 1.32608L13.9209 1.32605L13.9211 1.32597L15 0.798502V2V9.24998V9.6392L14.6817 9.86326L14.25 9.24998C14.6817 9.86326 14.6815 9.86342 14.6813 9.86359L14.6808 9.86394L14.6797 9.86471L14.6771 9.86653L14.6702 9.87124L14.6502 9.88477C14.6341 9.89556 14.6123 9.90981 14.5851 9.92701C14.5307 9.96141 14.4542 10.0077 14.3569 10.0618C14.1624 10.1699 13.8834 10.3098 13.5289 10.4485C12.8202 10.7256 11.8039 11 10.5568 11C9.20395 11 8.35275 10.4648 7.65185 10.0242L7.62928 10.01C6.94245 9.57826 6.40532 9.25 5.5 9.25C4.50202 9.25 3.67557 9.52457 3.09633 9.8016C2.84672 9.92098 2.64568 10.0396 2.5 10.134ZM2.23212 10.3245C2.23169 10.3249 2.23159 10.325 2.23184 10.3248L2.23212 10.3245Z" fill="currentColor"/>',
    );
    e.s(["Flag", 0, l], 173390);
  },
  5894,
  (e) => {
    "use strict";
    e.s(["ChatFlagBlockDialog", () => w, "FlagBlockButton", () => C], 5894);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(216445);
    e.i(563948);
    var s = e.i(407562),
      a = e.i(707974),
      o = e.i(341003),
      l = e.i(580643),
      c = e.i(92479),
      u = e.i(304649),
      d = e.i(686832),
      h = e.i(297239),
      p = e.i(32170),
      m = e.i(173390),
      f = e.i(556355),
      g = e.i(919012),
      x = (0, g.createServerReference)(
        "404d415272cccc3a210d31f08d202b8f59ce1533c3",
        g.callServer,
        void 0,
        g.findSourceMapURL,
        "sendFlag",
      ),
      v = e.i(51940),
      y = e.i(120945);
    e.i(904347);
    var b = e.i(37737);
    function j({ children: e, value: n, reasons: r }) {
      return (0, t.jsx)(o.RadioButton, {
        className: "max-sm:text-xs",
        onClick: () => r.toggle(n),
        selected: r.has(n),
        children: e,
      });
    }
    function w({ blockId: e }) {
      let { chatId: o } = (0, c.useChatId)(),
        { user: m } = (0, p.useUser)(),
        [f, g] = (0, n.useState)(""),
        w = (0, l.useMultiSelect)(),
        C = (0, h.useT)(),
        k = (0, n.useCallback)(() => {
          (g(""), w.clear(), (0, b.closeDialog)());
        }, [w]),
        S = (0, n.useCallback)(
          async (t) => {
            if ((t.preventDefault(), !o))
              return void s.toast.error(
                "Failed to submit flag. Please try again later.",
              );
            try {
              await Promise.all([
                k(),
                x({
                  feedback: f,
                  reasons: w.values,
                  chatId: o,
                  blockId: e,
                  userId: m?.id,
                }),
                s.toast.success("Successfully flagged Block"),
              ]);
            } catch (e) {
              (console.error(e),
                s.toast.error(
                  "Failed to submit flag. Please try again later.",
                ));
            }
          },
          [k, f, w.values, o, e, m?.id],
        ),
        N = (0, n.useMemo)(
          () =>
            (0, t.jsxs)("form", {
              className: (0, u.cn)("flex flex-col", "gap-3 sm:gap-6"),
              onSubmit: S,
              children: [
                (0, t.jsx)("div", {
                  className: "flex flex-col gap-2",
                  children: (0, t.jsxs)("div", {
                    className:
                      "grid w-full grid-cols-2 items-center justify-start gap-2",
                    children: [
                      (0, t.jsx)(j, {
                        reasons: w,
                        value: "inappropriate",
                        children: "Inappropriate Content",
                      }),
                      (0, t.jsx)(j, {
                        reasons: w,
                        value: "copyright",
                        children: "Copyright Violation",
                      }),
                      (0, t.jsx)(j, {
                        reasons: w,
                        value: "illegal",
                        children: "Illegal Content",
                      }),
                      (0, t.jsx)(j, {
                        reasons: w,
                        value: "other",
                        children: "Other",
                      }),
                    ],
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-2",
                  children: [
                    (0, t.jsx)(a.Label, {
                      className: "text-sm font-normal text-v0-gray-900",
                      htmlFor: "downvote-feedback",
                      children:
                        "Please provide your reasoning for flagging this generation.",
                    }),
                    (0, t.jsx)(i.Textarea, {
                      asChild: !0,
                      children: (0, t.jsx)(v.ResizableTextArea, {
                        id: "downvote-feedback",
                        name: "feedback",
                        onChange: (e) => g(e.target.value),
                        placeholder: "Additional information...",
                        minHeight: 80,
                        maxHeight: 192,
                        value: f,
                      }),
                    }),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className:
                    "flex-col-reverse sm:flex-row flex w-full items-center justify-end gap-2",
                  children: [
                    (0, t.jsx)(r.Button, {
                      className: "max-sm:w-full",
                      onClick: (e) => {
                        (e.preventDefault(), k());
                      },
                      size: "sm",
                      variant: "secondary",
                      children: C("downvoteDialog.cancel"),
                    }),
                    (0, t.jsx)(r.Button, {
                      className: "max-sm:w-full",
                      size: "sm",
                      type: "submit",
                      children: C("downvoteDialog.submit"),
                    }),
                  ],
                }),
              ],
            }),
          [S, w, C, f, k],
        );
      return (0, t.jsx)(y.AtomicDialog, {
        type: "flagBlock",
        children: (0, t.jsxs)("div", {
          className: "overflow-auto",
          children: [
            (0, t.jsxs)(d.ModalHeader, {
              children: [
                (0, t.jsx)(d.ModalTitle, { children: "Flag a generation" }),
                (0, t.jsx)(d.ModalDescription, {
                  children:
                    "Flag a generation for inappropriate, abusive, or illegal content.",
                }),
              ],
            }),
            (0, t.jsx)(d.ModalContent, { children: N }),
          ],
        }),
      });
    }
    function C({ blockId: e, isMenuItem: i = !1, closeMenu: s, ...a }) {
      let o = (0, n.useCallback)(() => {
        (s && s(),
          (0, b.openDialog)({ type: "flagBlock", data: { blockId: e } }));
      }, [s, e]);
      return i
        ? (0, t.jsxs)(f.DropdownMenuItem, {
            onClick: o,
            children: [
              (0, t.jsx)(m.Flag, {}),
              (0, t.jsx)("span", { children: "Flag" }),
            ],
          })
        : (0, t.jsx)(r.Button, {
            "aria-label": "Flag Generation",
            onClick: o,
            size: "sm",
            className: "size-7 rounded-md",
            tooltip: "Flag",
            variant: "ghost",
            ...a,
            children: (0, t.jsx)(m.Flag, {}),
          });
    }
  },
  838078,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(`<g clip-path="url(#clip0_872_3186)">
  <circle cx="8" cy="8" r="7.25" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 4.5L11.5 10.625H4.5L8 4.5Z" fill="var(--ds-gray-100)"/>
  </g>
  <defs>
  <clipPath id="clip0_872_3186">
  <rect width="16" height="16" fill="white"/>
  </clipPath>
  </defs>`);
    e.s(["LogoVercelCircle", 0, t]);
  },
  86617,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(403055),
      r = e.i(242759);
    function i(e) {
      let { gwe: i } = (0, r.useFlags)();
      return (0, t.default)(
        e && i
          ? `/api/git/connection?${new URLSearchParams({ chatId: e }).toString()}`
          : null,
        n.fetcher,
        { revalidateOnFocus: !1, revalidateOnReconnect: !1 },
      );
    }
    e.s(["useGitConnection", () => i]);
  },
  401237,
  391109,
  692581,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "40c6db7f8e4bcefc9b66ec064780cd47a46e8c5ac3",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "linkVercelProject",
      );
    e.s(["linkVercelProject", () => n], 401237);
    var r = t,
      i = (0, r.createServerReference)(
        "402c8f69197d3d2d9c9ab5431107c55ff87ba3fcfd",
        r.callServer,
        void 0,
        r.findSourceMapURL,
        "unlinkVercelProject",
      );
    e.s(["unlinkVercelProject", () => i], 391109);
    var s = e.i(403055),
      a = e.i(418625);
    function o() {
      let {
        data: e,
        isLoading: t,
        mutate: n,
      } = (0, a.default)("/chat/api/projects", s.fetcher);
      return { projects: e, isReady: !t && void 0 !== e, refetch: n };
    }
    e.s(["useVercelProjects", () => o], 692581);
  },
  908386,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "4040b5e471a136a45920896ed40499a65398febdd7",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "createNewVercelProject",
      );
    e.s(["createNewVercelProject", () => n]);
  },
  333095,
  (e) => {
    "use strict";
    e.s(["useVercelProjectApi", () => u]);
    var t = e.i(576191),
      n = e.i(643312),
      r = e.i(401237),
      i = e.i(391109);
    e.i(563948);
    var s = e.i(407562),
      a = e.i(297239),
      o = e.i(92479),
      l = e.i(692581),
      c = e.i(908386);
    function u() {
      let e = (0, a.useT)(),
        u = (0, n.useIntegrationsApi)(),
        [d, h] = (0, t.useTransition)(),
        { chatId: p } = (0, o.useChatId)(),
        m = (0, t.useMemo)(
          () => ("ready" !== u.status ? null : (u.vercelProject ?? null)),
          [u],
        ),
        { projects: f, isReady: g, refetch: x } = (0, l.useVercelProjects)(),
        v = (0, t.useCallback)(
          (t) => {
            p &&
              h(async () => {
                try {
                  let n = await (0, r.linkVercelProject)({
                    chatId: p,
                    vercelProjectId: t,
                  });
                  "error" in n || !n.success
                    ? s.toast.error(e("projectSettings.projectLinkError"))
                    : (s.toast.success(e("projectSettings.projectLinkSuccess")),
                      u.refetch(),
                      x());
                } catch (t) {
                  s.toast.error(e("projectSettings.projectLinkError"));
                }
              });
          },
          [p, e, u, x],
        ),
        y = (0, t.useCallback)(() => {
          p &&
            h(async () => {
              try {
                let t = await (0, i.unlinkVercelProject)({ chatId: p });
                "error" in t || !t.success
                  ? s.toast.error(e("projectSettings.projectUnlinkError"))
                  : (s.toast.success(e("projectSettings.projectUnlinkSuccess")),
                    u.refetch());
              } catch (t) {
                s.toast.error(e("projectSettings.projectUnlinkError"));
              }
            });
        }, [p, e, u]),
        b = (0, t.useCallback)(
          async (e) => {
            if (p)
              try {
                let t = await (0, c.createNewVercelProject)({
                  chatId: p,
                  name: e,
                });
                if (!t.ok)
                  return void s.toast.error("Failed to create project");
                return (
                  x(),
                  u.refetch(),
                  { id: t.value.id, name: t.value.name }
                );
              } catch (e) {
                s.toast.error("Failed to create project");
              }
          },
          [p, x, u],
        );
      return "loading" !== u.status && g
        ? {
            status: "ready",
            vercelProject: m,
            linkProject: v,
            unlinkProject: y,
            isPending: d,
            vercelProjects: f ?? [],
            createProject: b,
            isValidating: !!u.isValidating,
          }
        : {
            status: "loading",
            vercelProject: null,
            linkProject: null,
            unlinkProject: null,
            isPending: !1,
            vercelProjects: null,
            createProject: null,
            isValidating: !1,
          };
    }
  },
  20116,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "40792d0be0e30b98e2a481bec17b7b2585574d1029",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "duplicateChat",
      );
    e.s(["duplicateChat", () => n]);
  },
  885340,
  (e) => {
    "use strict";
    let t = /^(.+?)\s*\((\d+)\)$/,
      n = ["Duplicate of ", "Remix of ", "Fork of "];
    function r(e) {
      let t = e,
        r = 0,
        i = !0;
      for (; i; )
        for (let e of ((i = !1), n))
          t.startsWith(e) && ((t = t.slice(e.length)), r++, (i = !0));
      return { cleanName: t, count: r };
    }
    function i(e, s = 32) {
      let a, o;
      if (n.some((t) => e.startsWith(t))) {
        let { cleanName: t, count: n } = r(e),
          i = n + 2,
          a = ` (${i})`.length,
          o = t;
        return (
          t.length + a > s && (o = t.slice(0, Math.max(0, s - a))),
          `${o} (${i})`
        );
      }
      let l = e.match(t);
      l && l[1] && l[2]
        ? ((a = l[1]), (o = parseInt(l[2], 10) + 1))
        : ((a = e), (o = 2));
      let c = ` (${o})`.length;
      return (
        a.length + c > s && (a = a.slice(0, Math.max(0, s - c))),
        `${a} (${o})`
      );
    }
    function s(e) {
      let { cleanName: n } = r(e),
        i = n.match(t);
      return i && i[1] ? i[1] : n;
    }
    e.s(["incrementForkName", () => i, "stripForkSuffix", () => s]);
  },
  561200,
  (e) => {
    "use strict";
    e.s(["DuplicateChatDialog", () => S]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(763480),
      s = e.i(686832),
      a = e.i(120945),
      o = e.i(338157),
      l = e.i(707974),
      c = e.i(403055),
      u = e.i(838078),
      d = e.i(86617),
      h = e.i(886002),
      p = e.i(333095),
      m = e.i(20116),
      f = e.i(226368),
      g = e.i(885340),
      x = e.i(819969),
      v = e.i(393799),
      y = e.i(211976),
      b = e.i(37737);
    e.i(563948);
    var j = e.i(407562);
    function w({
      value: e,
      label: n,
      description: r,
      selected: i,
      onSelect: s,
    }) {
      return (0, t.jsxs)("div", {
        className: (0, c.cn)(
          "border-v0-alpha-400 text-label-14 hover:border-v0-alpha-600 relative flex cursor-pointer items-center gap-6 rounded-lg border p-3 transition-colors",
          i && "border-v0-gray-1000 bg-v0-gray-200",
        ),
        onClick: s,
        children: [
          (0, t.jsxs)("div", {
            className: "flex-1 ",
            children: [
              (0, t.jsx)("span", {
                className:
                  "text-v0-gray-1000 text-label-14 cursor-pointer font-medium",
                children: n,
              }),
              (0, t.jsx)("p", {
                className: "text-v0-gray-900 mt-1",
                children: r,
              }),
            ],
          }),
          (0, t.jsx)(o.RadioGroupItem, {
            value: e,
            id: e,
            className: "accent-v0-gray-1000",
          }),
        ],
      });
    }
    function C({ destination: e, onDestinationChange: n, projectName: r }) {
      return (0, t.jsxs)(o.RadioGroup, {
        value: e,
        onValueChange: (e) => n(e),
        className: "flex flex-col gap-4",
        children: [
          (0, t.jsx)(w, {
            value: "continue",
            label: (0, t.jsxs)("span", {
              className: "flex items-center gap-1",
              children: [
                "Continue chatting in",
                (0, t.jsxs)("span", {
                  className: "inline-flex items-center gap-1",
                  children: [
                    (0, t.jsx)(u.LogoVercelCircle, {
                      className: "size-4 [&_path]:fill-white",
                    }),
                    (0, t.jsx)("span", {
                      className: "font-medium",
                      children: r,
                    }),
                  ],
                }),
              ],
            }),
            description:
              "Keep the same Vercel project connection. Integrations, environment variables, and deployments will be carried over.",
            selected: "continue" === e,
            onSelect: () => n("continue"),
          }),
          (0, t.jsx)(w, {
            value: "new-project",
            label: "New Project",
            description:
              "Integrations, environment variables, and deployments will not be carried over.",
            selected: "new-project" === e,
            onSelect: () => n("new-project"),
          }),
        ],
      });
    }
    function k({ value: e, onChange: n, label: r = "New chat name" }) {
      return (0, t.jsxs)("div", {
        className: "space-y-2",
        children: [
          (0, t.jsx)(l.Label, {
            htmlFor: "chatName",
            className: "text-label-13 text-v0-gray-900",
            children: r,
          }),
          (0, t.jsx)(i.Input, {
            id: "chatName",
            value: e,
            onChange: (e) => n(e.target.value),
            placeholder: `Enter ${r.toLowerCase()}`,
            className: "w-full",
            maxLength: 100,
          }),
        ],
      });
    }
    function S({ chatId: e, blockId: i, actionType: o = "duplicate" }) {
      let l = (0, f.useRouter)(),
        { atoms: c } = (0, x.useCurrentChat)(),
        u = (0, v.useAtomValue)(c.title),
        w = (0, n.useMemo)(() => {
          let e = u || "Untitled Chat";
          return (0, g.incrementForkName)(e, 100);
        }, [u]),
        [S, N] = (0, n.useState)("continue"),
        [E, A] = (0, n.useState)(w),
        [D, I] = (0, n.useState)(!1),
        { data: M } = (0, d.useGitConnection)(e),
        T = (0, p.useVercelProjectApi)(),
        L = (0, n.useMemo)(() => !!(M?.ok && M.value.connected), [M]),
        P = (0, n.useMemo)(
          () => "ready" === T.status && !!T.vercelProject,
          [T.status, T.vercelProject],
        ),
        R = (0, n.useMemo)(
          () => (L ? "git-connected" : P ? "vercel-only" : "no-connections"),
          [L, P],
        ),
        F =
          ("ready" === T.status
            ? T.vercelProject?.dashboardProject?.name
            : void 0) || "this project",
        _ =
          "ready" === T.status ? T.vercelProject?.dashboardProject?.id : void 0,
        O =
          M?.ok && M.value.connected
            ? M.value.pullRequestMergedAt
              ? M.value.base
              : M.value.head
            : "main",
        B = M?.ok && M.value.connected ? `${M.value.org}/${M.value.repo}` : "",
        V = async () => {
          I(!0);
          try {
            let t = await (0, m.duplicateChat)({
              payload: {
                privacy: "private",
                chatId: e,
                blockId: i,
                destination: S,
                isGitConnected: L,
                vercelProjectId: _,
                actionType: o,
                chatName: E,
              },
            });
            if (t.ok) {
              let { newChatId: e } = t.value;
              (l.push(`/chat/${e}`), (0, b.closeDialog)());
            } else j.toast.error(t.error || "Failed to duplicate chat");
          } catch (e) {
            (j.toast.error(
              "An unexpected error occurred while duplicating the chat",
            ),
              console.error("Failed to duplicate chat:", e));
          } finally {
            I(!1);
          }
        },
        z = () => {
          switch (R) {
            case "git-connected":
            case "vercel-only":
              return "Select a destination to duplicate this chat into.";
            case "no-connections":
              return "Create a copy of this generation to edit in a new chat.";
          }
        },
        H = () => {
          switch (R) {
            case "git-connected":
              return (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsx)(C, {
                    destination: S,
                    onDestinationChange: N,
                    projectName: F,
                  }),
                  (0, t.jsx)("div", {
                    className: "min-h-[56px]",
                    children:
                      "continue" === S
                        ? (0, t.jsxs)(h.Note, {
                            variant: "info",
                            className: "bg-v0-gray-200 text-v0-gray-900",
                            children: [
                              "This will create a new branch in the",
                              " ",
                              (0, t.jsx)("span", {
                                className: "font-medium",
                                children: B,
                              }),
                              " repository, based off of ",
                              (0, t.jsx)("span", {
                                className: "font-medium",
                                children: O,
                              }),
                              ".",
                            ],
                          })
                        : (0, t.jsx)(k, { value: E, onChange: A }),
                  }),
                ],
              });
            case "vercel-only":
              return (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsx)(C, {
                    destination: S,
                    onDestinationChange: N,
                    projectName: F,
                  }),
                  (0, t.jsx)("div", {
                    className: "min-h-[74px]",
                    children:
                      "continue" === S
                        ? (0, t.jsxs)(h.Note, {
                            variant: "info",
                            className: "bg-v0-gray-200 text-v0-gray-900",
                            children: [
                              "This project is not connected to GitHub. Publishing changes will override the production deployment. Connect",
                              " ",
                              (0, t.jsx)("span", {
                                className: "font-medium",
                                children: F,
                              }),
                              " to GitHub to create branches with preview deployments.",
                            ],
                          })
                        : (0, t.jsx)(k, { value: E, onChange: A }),
                  }),
                ],
              });
            case "no-connections":
              return (0, t.jsx)(k, { value: E, onChange: A });
          }
        };
      return (0, t.jsxs)(a.AtomicDialog, {
        type: "duplicateChat",
        children: [
          (0, t.jsxs)(s.ModalHeader, {
            children: [
              (0, t.jsx)(s.ModalTitle, { children: "Duplicate Chat" }),
              (0, t.jsx)(s.ModalDescription, {
                className: "text-v0-gray-1000 text-label-14",
                children: z(),
              }),
            ],
          }),
          (0, t.jsx)(s.ModalContent, { className: "space-y-4", children: H() }),
          (0, t.jsxs)("div", {
            className:
              "bg-v0-background-200 border-v0-alpha-400 flex w-full items-center justify-end gap-2 border-t p-4",
            children: [
              (0, t.jsx)(s.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(r.Button, {
                  variant: "secondary",
                  size: "sm",
                  children: "Cancel",
                }),
              }),
              (0, t.jsx)(y.SpinnerButton, {
                onClick: V,
                pending: D,
                disabled:
                  ("no-connections" === R || "new-project" === S) && !E.trim(),
                children: "Duplicate",
              }),
            ],
          }),
        ],
      });
    }
  },
  244008,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M7.70059 1.73618L7.74488 1.5H8.2551L8.29938 1.73618C8.4406 2.48936 8.98357 3.04807 9.63284 3.27226C9.82296 3.33791 10.008 3.41476 10.1871 3.50207C10.805 3.80328 11.5845 3.7922 12.2172 3.35933L12.4158 3.22342L12.7766 3.5842L12.6407 3.78284C12.2078 4.41549 12.1967 5.19496 12.4979 5.81292C12.5852 5.99203 12.6621 6.17703 12.7277 6.36714C12.9519 7.01642 13.5106 7.55938 14.2638 7.7006L14.5 7.74489V8.25511L14.2638 8.2994C13.5106 8.44062 12.9519 8.98359 12.7277 9.63286C12.6621 9.82298 12.5852 10.008 12.4979 10.1871C12.1967 10.805 12.2078 11.5845 12.6407 12.2172L12.7766 12.4158L12.4158 12.7766L12.2172 12.6407C11.5845 12.2078 10.805 12.1967 10.1871 12.4979C10.008 12.5852 9.82296 12.6621 9.63284 12.7277C8.98357 12.9519 8.4406 13.5106 8.29938 14.2638L8.2551 14.5H7.74488L7.70059 14.2638C7.55937 13.5106 7.0164 12.9519 6.36713 12.7277C6.17702 12.6621 5.99202 12.5852 5.8129 12.4979C5.19495 12.1967 4.41548 12.2078 3.78283 12.6407L3.5842 12.7766L3.22342 12.4158L3.35932 12.2172C3.79219 11.5845 3.80326 10.8051 3.50206 10.1871C3.41475 10.008 3.3379 9.82298 3.27225 9.63285C3.04806 8.98358 2.48935 8.44061 1.73616 8.29939L1.5 8.25511V7.74489L1.73616 7.70061C2.48935 7.55939 3.04806 7.01642 3.27225 6.36715C3.3379 6.17703 3.41475 5.99203 3.50205 5.81291C3.80326 5.19496 3.79218 4.41549 3.35931 3.78283L3.2234 3.5842L3.58418 3.22342L3.78282 3.35932C4.41547 3.79219 5.19494 3.80327 5.8129 3.50207C5.99201 3.41476 6.17701 3.33791 6.36713 3.27226C7.0164 3.04807 7.55937 2.48936 7.70059 1.73618ZM6.49999 0H9.49999L9.77369 1.45974C9.80837 1.64472 9.94454 1.79299 10.1224 1.85441C10.3702 1.93996 10.6111 2.04007 10.8443 2.15371C11.0135 2.2362 11.2148 2.22768 11.3701 2.12137L12.5962 1.28249L14.7175 3.40381L13.8786 4.62987C13.7723 4.78525 13.7638 4.98647 13.8463 5.1557C13.9599 5.38885 14.06 5.62981 14.1456 5.87756C14.207 6.05545 14.3553 6.19161 14.5402 6.2263L16 6.5V9.5L14.5402 9.7737C14.3553 9.80839 14.207 9.94455 14.1456 10.1224C14.06 10.3702 13.9599 10.6112 13.8463 10.8443C13.7638 11.0135 13.7723 11.2148 13.8786 11.3701L14.7175 12.5962L12.5962 14.7175L11.3701 13.8786C11.2147 13.7723 11.0135 13.7638 10.8443 13.8463C10.6111 13.9599 10.3702 14.06 10.1224 14.1456C9.94454 14.207 9.80837 14.3553 9.77369 14.5403L9.49999 16H6.49999L6.22628 14.5403C6.1916 14.3553 6.05544 14.207 5.87755 14.1456C5.6298 14.06 5.38884 13.9599 5.15569 13.8463C4.98645 13.7638 4.78523 13.7723 4.62985 13.8786L3.40381 14.7175L1.28249 12.5962L2.12136 11.3702C2.22767 11.2148 2.23619 11.0136 2.1537 10.8443C2.04006 10.6112 1.93995 10.3702 1.8544 10.1224C1.79297 9.94455 1.6447 9.80838 1.45973 9.7737L0 9.5V6.5L1.45973 6.2263C1.6447 6.19162 1.79297 6.05545 1.8544 5.87756C1.93995 5.62981 2.04005 5.38885 2.1537 5.15569C2.23619 4.98646 2.22766 4.78524 2.12135 4.62986L1.28247 3.40381L3.40379 1.28249L4.62984 2.12136C4.78522 2.22767 4.98644 2.2362 5.15568 2.15371C5.38883 2.04007 5.6298 1.93996 5.87755 1.85441C6.05544 1.79299 6.1916 1.64472 6.22628 1.45975L6.49999 0ZM9.49998 8C9.49998 8.82843 8.82841 9.5 7.99998 9.5C7.17156 9.5 6.49998 8.82843 6.49998 8C6.49998 7.17157 7.17156 6.5 7.99998 6.5C8.82841 6.5 9.49998 7.17157 9.49998 8ZM11 8C11 9.65685 9.65684 11 7.99998 11C6.34313 11 4.99998 9.65685 4.99998 8C4.99998 6.34315 6.34313 5 7.99998 5C9.65684 5 11 6.34315 11 8Z" fill="currentColor"/>',
    );
    e.s(["SettingsGear", 0, t]);
  },
  484569,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "406a52b84306e7bd06bd5fe74a45954d4c0725fa50",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "uploadAssetAction",
      ),
      r = e.i(576191);
    e.i(563948);
    var i = e.i(407562);
    let s = "1 MB",
      a = 1,
      o = ["png", "jpg", "jpeg", "webp"],
      l = 1048576,
      c = ({ initialImages: e, disableDrag: t = !1, containerRef: c }) => {
        let d = r.useRef(null),
          [h, p] = r.useState(!1),
          [m, f] = r.useState(!1),
          [g, x] = r.useState(
            () =>
              e?.map((e) => ({
                id: crypto.randomUUID(),
                file: new File([], e.name),
                size: e.size,
                status: "success",
                url: e.url,
              })) ?? [],
          ),
          v = r.useCallback((e) => {
            x(
              e.map((e) => ({
                id: crypto.randomUUID(),
                file: new File([], e.name),
                size: e.size,
                status: "success",
                url: e.url,
              })),
            );
          }, []),
          y = r.useCallback(
            async (e) => {
              let t = 1 === g.length && e.length >= 1,
                r = t ? 0 : g.length;
              if (t && g[0]?.url)
                try {
                  URL.revokeObjectURL(g[0].url);
                } catch {}
              if (r + e.length > a)
                return (
                  e.forEach((e) => {
                    URL.revokeObjectURL(URL.createObjectURL(e));
                  }),
                  i.toast.error("File limit exceeded", {
                    description: `You can only upload up to ${a} images.`,
                  })
                );
              if (
                e.find((e) => {
                  let t = e.name.split(".").pop()?.toLowerCase();
                  return !t || !o.includes(t);
                })
              )
                return (
                  e.forEach((e) => {
                    URL.revokeObjectURL(URL.createObjectURL(e));
                  }),
                  i.toast.error("Invalid file type", {
                    description: `Allowed file types: ${o.join(", ")}`,
                  })
                );
              let c = e.find((e) => e.size > l);
              if (c)
                return (
                  e.forEach((e) => {
                    URL.revokeObjectURL(URL.createObjectURL(e));
                  }),
                  i.toast.error("File too large", {
                    description: `The file ${c.name} is larger than ${s}.`,
                  })
                );
              p(!0);
              let u = e.map((e) => ({
                id: crypto.randomUUID(),
                file: e,
                status: "pending",
                url: URL.createObjectURL(e),
                size: e.size,
              }));
              for (let e of (x((e) => (t ? [...u] : [...e, ...u])), u)) {
                x((t) =>
                  t.map((t) =>
                    t.id === e.id ? { ...t, status: "uploading" } : t,
                  ),
                );
                try {
                  let t = new FormData();
                  t.append("file", e.file, e.file.name);
                  let r = await n(t);
                  if (r.error) {
                    (x((t) =>
                      t.map((t) =>
                        t.id === e.id
                          ? { ...t, status: "error", error: r.error }
                          : t,
                      ),
                    ),
                      i.toast.error("Failed to upload file", {
                        description: r.error,
                      }));
                    continue;
                  }
                  let s = r.url;
                  x((t) =>
                    t.map((t) =>
                      t.id === e.id ? { ...t, status: "success", url: s } : t,
                    ),
                  );
                } catch (t) {
                  x((t) =>
                    t.map((t) =>
                      t.id === e.id
                        ? { ...t, status: "error", error: "Upload failed" }
                        : t,
                    ),
                  );
                }
              }
              p(!1);
            },
            [g.length],
          ),
          b = r.useCallback(
            async (e) => {
              if (
                (f(!1),
                h || (e.preventDefault(), e.stopPropagation(), !e.dataTransfer))
              )
                return;
              let { files: t } = e.dataTransfer;
              u(t) && (await y(Array.from(t)));
            },
            [y, h],
          );
        r.useEffect(() => {
          if (t) return;
          let e = () => f(!0),
            n = () => f(!1),
            r = (e) => {
              (e.preventDefault(), e.stopPropagation());
            },
            i = (e) => {
              b(e).catch(console.error);
            },
            s = c?.current || window;
          return (
            s.addEventListener("dragenter", e),
            document.documentElement.addEventListener("mouseleave", n),
            s.addEventListener("dragover", r),
            s.addEventListener("drop", i),
            () => {
              (s.removeEventListener("dragenter", e),
                document.documentElement.removeEventListener("mouseleave", n),
                s.removeEventListener("dragover", r),
                s.removeEventListener("drop", i));
            }
          );
        }, [t, b, y, c]);
        let j = async (e) => {
            u(e.target.files) &&
              e.target.files &&
              (await y(Array.from(e.target.files)));
          },
          w = r.useCallback((e) => {
            x((t) => {
              let n = t.find((t) => t.id === e);
              return (
                n?.url && URL.revokeObjectURL(n.url),
                t.filter((t) => t.id !== e)
              );
            });
          }, []);
        return {
          files: g,
          setFiles: x,
          setInitialFiles: v,
          uploading: h,
          isDraggingFile: m,
          inputFileRef: d,
          onInputChange: j,
          removeFile: w,
        };
      };
    function u(e) {
      if (!e?.length) return !1;
      if (e.length > a)
        return (
          i.toast.error("File limit exceeded", {
            description: `You can only upload up to ${a} images at a time.`,
          }),
          !1
        );
      for (let t of e)
        if (!t.type.startsWith("image/"))
          return (
            i.toast.error("Invalid file type", {
              description: "Please upload image files only",
            }),
            !1
          );
      return !0;
    }
    e.s(["useTemplateFileUpload", () => c], 484569);
  },
  714249,
  (e) => {
    "use strict";
    var t = e.i(32170),
      n = e.i(403055),
      r = e.i(418625);
    function i() {
      let { user: e } = (0, t.useUser)(),
        {
          data: i,
          mutate: s,
          isLoading: a,
        } = (0, r.default)(
          e?.teamId ? `/api/teams/${e.teamId}/settings` : null,
          n.fetcher,
        );
      return { settings: i, mutate: s, isLoading: a };
    }
    e.s(["useTeamSettings", () => i]);
  },
  319076,
  390215,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "7fc6ce1ac3b356d6721620be0b3ec5981a52e1dbef",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "saveTemplate",
      );
    e.s(["saveTemplate", () => n], 319076);
    var r = e.i(324834),
      i = e.i(794593),
      s = e.i(672001),
      a = e.i(576191);
    function o({ tags: e, setTags: t }) {
      let [n, o] = (0, a.useState)(""),
        l = (e) =>
          e
            .toLowerCase()
            .trim()
            .replace(/\s+/g, "-")
            .replace(/[^a-z0-9-]/g, "")
            .replace(/-+/g, "-")
            .replace(/^-|-$/g, ""),
        c = (n) => {
          let r = l(n);
          r && !e.includes(r) && t([...e, r]);
        },
        u = (n) => {
          t(e.filter((e) => e !== n));
        },
        d = (t) => {
          ("Enter" === t.key || "," === t.key || "Tab" === t.key) &&
            (t.preventDefault(), n && e.length < 10 && (c(n), o("")));
        };
      return (0, r.jsxs)("div", {
        className:
          "bg-v0-background-100 focus-within:border-v0-alpha-500 disabled:border-v0-alpha-400 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-v0-gray-100 disabled:text-v0-gray-500 h-auto min-h-8",
        children: [
          e.map((e) =>
            (0, r.jsx)(
              i.Badge,
              {
                prefix: (0, r.jsx)("button", {
                  className: "z-10 p-1 cursor-pointer relative",
                  onClick: () => u(e),
                  children: (0, r.jsx)(s.CrossSmall, {}),
                }),
                children: e,
              },
              e,
            ),
          ),
          (0, r.jsx)("input", {
            className:
              "text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-v0-gray-500 disabled:cursor-not-allowed disabled:text-v0-gray-500 flex-1 min-w-20 h-6 px-1.5",
            placeholder: 0 === e.length ? "Add up to 10 tags" : "",
            value: n,
            onChange: (e) => o(e.target.value),
            onKeyDown: d,
          }),
        ],
      });
    }
    e.s(["TagInput", () => o], 390215);
  },
  388769,
  912289,
  (e) => {
    "use strict";
    e.s(["TemplateEditButton", () => z, "TemplateEditDialog", () => $], 388769);
    var t = e.i(324834),
      n = e.i(654335),
      r = e.i(576191),
      i = e.i(244008),
      s = e.i(592885),
      a = e.i(602544),
      o = e.i(389140),
      l = e.i(40455),
      c = e.i(132440),
      u = e.i(431141),
      d = e.i(686832),
      h = e.i(120945),
      p = e.i(707974),
      m = e.i(763480),
      f = e.i(216445),
      g = e.i(592258),
      x = e.i(903500),
      v = e.i(339236),
      y = e.i(607391),
      b = e.i(176248),
      j = e.i(762585),
      w = e.i(707827);
    e.i(563948);
    var C = e.i(407562),
      k = e.i(484569),
      S = e.i(667660),
      N = e.i(714249),
      E = e.i(319076),
      A = e.i(37737),
      D = e.i(390215);
    e.i(904347);
    var I = e.i(952214),
      M = t,
      T = e.i(919012),
      L = (0, T.createServerReference)(
        "7fcac729e45eb97f6e1b303e7c9d228b2a380cda73",
        T.callServer,
        void 0,
        T.findSourceMapURL,
        "getTemplateTagSuggestionsAction",
      ),
      P = e.i(418625),
      R = e.i(794593),
      F = e.i(304649),
      _ = j;
    let O = ({ templateCanonId: e, onAddTag: t, tags: n }) => {
        let { data: r, isLoading: i } = (0, P.default)(
            `template:${e}:tag-suggestions`,
            () => L(e, 5),
          ),
          s = r?.filter((e) => !n.includes(e));
        return (0, M.jsxs)("div", {
          className: "flex flex-wrap gap-2 mt-1",
          children: [
            (0, M.jsx)("span", {
              className: "text-xs h-5 opacity-40 inline-flex items-center",
              children: "Suggestions:",
            }),
            i
              ? Array.from({ length: 4 }).map((e, t) => {
                  let n = ["w-12", "w-16", "w-14", "w-20"];
                  return (0, M.jsx)(
                    _.Skeleton,
                    { className: (0, F.cn)("rounded-full h-5", n[t]) },
                    `skeleton-${t}`,
                  );
                })
              : s && s.length > 0
                ? s.map((e) =>
                    (0, M.jsx)(
                      R.Badge,
                      {
                        onClick: () => t(e),
                        className: "pointer-events-auto cursor-pointer",
                        children: e,
                      },
                      e,
                    ),
                  )
                : (0, M.jsx)("span", {
                    className:
                      "text-xs inline-flex items-center opacity-40 italic",
                    children: "No suggestions available",
                  }),
          ],
        });
      },
      B = (e) => ({
        blockId: e.templateVersion.blockId,
        description: e.templateVersion.description,
        imageUrl: e.templateVersion.imageUrl,
        title:
          e.templateVersion.title ||
          e.templateVersion.block.chat.project?.project?.name ||
          e.templateVersion.block.chat.metadata?.title ||
          "",
        publishedToCommunity: e.templateVersion.publishedToCommunity,
        templateCanonId: e.templateVersion.templateCanonId,
        templateVersionId: e.templateVersion.templateVersionId,
        uses: e.uses,
        authorId: e.authorId,
        isTeamTemplate:
          e.authorId !== e.templateVersion.block.chat.project?.project?.ownerId,
        likeCount: e.likeCount,
        liked: "liked" in e ? e.liked : void 0,
        ownerId: e.templateVersion.block.chat.project?.project?.ownerId ?? null,
        createdAt: e.templateVersion.createdAt,
        category: e.category,
        tags: e.tags,
      });
    function V(e, t) {
      return (0, r.useMemo)(() => !(0, l.default)(e, t), [e, t]);
    }
    function z(e) {
      let n = () => {
        (0, A.openDialog)({ type: "templateEdit", data: e });
      };
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsx)(b.Button, {
            onClick: n,
            size: "sm",
            className: "size-7 rounded-md px-0 sm:hidden",
            tooltip: "Settings",
            variant: "secondary",
            children: (0, t.jsx)(i.SettingsGear, {}),
          }),
          (0, t.jsx)(b.Button, {
            onClick: n,
            size: "sm",
            className: "hidden sm:block",
            tooltip: "Settings",
            variant: "secondary",
            children: (0, t.jsx)(i.SettingsGear, {}),
          }),
        ],
      });
    }
    e.s(["mapTemplateVersionToClientTemplate", 0, B], 912289);
    let H = ({ children: e }) =>
      (0, t.jsx)("div", { className: "flex flex-col gap-2", children: e });
    function $({ templateData: e, mode: i = "edit" }) {
      let { activeScope: l } = (0, S.useActiveScope)(),
        [M, T] = (0, r.useState)(e),
        {
          handleAction: L,
          approveLoading: P,
          rejectLoading: R,
        } = (0, I.useReviewActions)({ onSettled: A.closeDialog }),
        F = (0, S.scopeIsTeam)(l) ? l.name : null,
        { settings: _ } = (0, N.useTeamSettings)(),
        z = (0, r.useMemo)(() => B(M), [M]),
        {
          files: $,
          uploading: U,
          inputFileRef: G,
          onInputChange: W,
        } = (0, k.useTemplateFileUpload)({
          initialImages: M.imageUrl
            ? [{ url: M.imageUrl, name: "Template Thumbnail" }]
            : [],
          disableDrag: !0,
        }),
        [q, Z] = (0, r.useState)(z.title || ""),
        [K, Y] = (0, r.useState)(z.category ?? null),
        [J, Q] = (0, r.useState)(M.visibility ?? (F ? "team" : "public")),
        [X, ee] = (0, r.useState)(z.description || ""),
        [et, en] = (0, r.useState)(z.tags || []);
      (0, r.useEffect)(() => {
        (Q(M.visibility),
          Z(z.title || ""),
          Y(z.category),
          ee(z.description || ""),
          en(z.tags || []));
      }, [z, M.visibility]);
      let [er, ei] = (0, r.useTransition)(),
        es = $.at(0)?.url ?? z.imageUrl ?? null,
        ea = V(
          {
            name: q,
            category: K,
            visibility: J,
            description: X,
            tags: et,
            imageUrl: es,
          },
          {
            name: z.title || "",
            category: z.category,
            visibility: M.visibility,
            description: z.description || "",
            tags: z.tags || [],
            imageUrl: z.imageUrl,
          },
        ),
        eo = () => {
          ei(async () => {
            if (!q.trim()) return void C.toast.error("Name is required");
            if (!K) return void C.toast.error("Category is required");
            if (!es) return void C.toast.error("Thumbnail required");
            if (!M.chatId)
              return void C.toast.error(
                "Template is not associated with a chat",
              );
            let e = {
              chatId: M.chatId,
              title: q.trim(),
              category: K,
              tags: et,
              description: X || "",
              imageUrl: es,
              visibility: J,
              existingCanonId: M.templateCanonId,
            };
            try {
              let t = await (0, E.saveTemplate)(e);
              (t.ok && t.value.template && T(t.value.template),
                C.toast.success("Template saved"),
                "edit" === i && (0, A.closeDialog)());
            } catch (e) {
              C.toast.error(e?.message || "Failed to save template");
            }
          });
        },
        el = () => {
          (0, A.openDialog)({
            type: "templateDelete",
            data: { blockId: M.templateVersion.blockId },
          });
        },
        ec = (0, t.jsxs)(
          r.Fragment,
          {
            children: [
              "edit" === i &&
                (0, t.jsx)(b.Button, {
                  className: "sm:mr-auto",
                  size: "sm",
                  variant: "destructive",
                  onClick: el,
                  children: "Delete Template",
                }),
              (0, t.jsx)(b.Button, {
                size: "sm",
                variant: "secondary",
                onClick: A.closeDialog,
                children: "Cancel",
              }),
              (0, t.jsx)(b.Button, {
                size: "sm",
                disabled: U || er,
                onClick: eo,
                children: (0, t.jsx)(y.ActionStatus, {
                  isLoading: U || er,
                  loading: U || er,
                  children: "Update Template",
                }),
              }),
            ],
          },
          "edit-footer",
        ),
        eu = ea
          ? ec
          : (0, t.jsxs)(
              r.Fragment,
              {
                children: [
                  (0, t.jsx)(b.Button, {
                    size: "sm",
                    variant: "secondary",
                    onClick: () => {
                      L("rejected", [M.templateVersionId]);
                    },
                    children: (0, t.jsxs)(y.ActionStatus, {
                      isLoading: R,
                      loading: "Rejecting",
                      children: [(0, t.jsx)(s.Cross, {}), "Reject"],
                    }),
                  }),
                  (0, t.jsx)(b.Button, {
                    size: "sm",
                    variant: "default",
                    onClick: () => {
                      L("approved", [M.templateVersionId]);
                    },
                    children: (0, t.jsxs)(y.ActionStatus, {
                      isLoading: P,
                      loading: "Approving",
                      children: [(0, t.jsx)(a.Check, {}), "Approve"],
                    }),
                  }),
                ],
              },
              "review-footer",
            );
      return (0, t.jsxs)(h.AtomicDialog, {
        type: "templateEdit",
        className: "flex flex-col md:max-h-[90vh]",
        children: [
          (0, t.jsx)(d.ModalHeader, {
            children: (0, t.jsxs)(d.ModalTitle, {
              className: "flex items-center justify-between gap-2",
              children: [
                (0, t.jsx)("span", { children: "Edit Details" }),
                "review" === i &&
                  (0, t.jsx)(b.Button, {
                    size: "sm",
                    variant: "secondary",
                    asChild: !0,
                    children: (0, t.jsxs)(n.default, {
                      href: `/templates/${M.templateCanonId}`,
                      target: "_blank",
                      children: [(0, t.jsx)(o.External, {}), "Go to Template"],
                    }),
                  }),
              ],
            }),
          }),
          (0, t.jsxs)(d.ModalContent, {
            className: "flex flex-col gap-4 overflow-y-auto",
            children: [
              (0, t.jsxs)(H, {
                children: [
                  (0, t.jsx)(p.Label, {
                    children: "Custom Thumbnail (1920x1080)",
                  }),
                  (0, t.jsxs)("div", {
                    className: "relative w-full",
                    children: [
                      (0, t.jsxs)("label", {
                        htmlFor: `thumbnail-upload-${M.templateCanonId}`,
                        className:
                          "group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",
                        children: [
                          es
                            ? (0, t.jsx)(u.default, {
                                src: es,
                                alt: "Template Thumbnail",
                                fill: !0,
                                className: "object-cover",
                              })
                            : (0, t.jsx)(j.Skeleton, {
                                className: "h-full w-full",
                              }),
                          (0, t.jsx)("div", {
                            className:
                              "pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100",
                          }),
                          (0, t.jsx)("span", {
                            className:
                              "absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",
                            children: (0, t.jsx)("div", {
                              className:
                                "rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",
                              children: U
                                ? (0, t.jsx)(w.Spinner, { size: 16 })
                                : "Change image",
                            }),
                          }),
                        ],
                      }),
                      (0, t.jsx)("input", {
                        id: `thumbnail-upload-${M.templateCanonId}`,
                        className: "sr-only",
                        accept: "image/*",
                        type: "file",
                        ref: G,
                        onChange: W,
                        disabled: U,
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsx)(H, {
                children: (0, t.jsx)(m.Input, {
                  label: "Name",
                  placeholder: "Modern Landing Page",
                  value: q,
                  onChange: (e) => Z(e.target.value),
                }),
              }),
              (0, t.jsxs)(H, {
                children: [
                  (0, t.jsx)(p.Label, { children: "Description" }),
                  (0, t.jsx)(f.Textarea, {
                    placeholder: "A modern landing page for a SaaS product",
                    className: "min-h-[100px]",
                    value: X,
                    onChange: (e) => ee(e.target.value),
                  }),
                ],
              }),
              (0, t.jsxs)(H, {
                children: [
                  (0, t.jsx)(p.Label, { children: "Category" }),
                  (0, t.jsxs)(g.Select, {
                    value: K ?? void 0,
                    onValueChange: Y,
                    children: [
                      (0, t.jsx)(g.SelectTrigger, {
                        children: (0, t.jsx)(g.SelectValue, {
                          placeholder: "Select a category",
                        }),
                      }),
                      (0, t.jsx)(g.SelectContent, {
                        children: [...c.templateCategories].map((e) =>
                          (0, t.jsx)(
                            g.SelectItem,
                            { value: e.value, children: e.text },
                            e.value,
                          ),
                        ),
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsxs)(H, {
                children: [
                  (0, t.jsx)(p.Label, { children: "Tags" }),
                  (0, t.jsx)(D.TagInput, { tags: et, setTags: en }),
                  "review" === i &&
                    (0, t.jsx)(O, {
                      templateCanonId: M.templateCanonId,
                      tags: et,
                      onAddTag: (e) => {
                        et.includes(e) || en([...et, e]);
                      },
                    }),
                ],
              }),
              "edit" === i &&
                (0, t.jsxs)(H, {
                  children: [
                    (0, t.jsx)(p.Label, { children: "Visibility" }),
                    (0, t.jsxs)(g.Select, {
                      value: J,
                      onValueChange: (e) => Q(e),
                      children: [
                        (0, t.jsx)(g.SelectTrigger, {
                          children: (0, t.jsx)(g.SelectValue, {
                            placeholder: "Select visibility",
                          }),
                        }),
                        (0, t.jsxs)(g.SelectContent, {
                          children: [
                            !_?.disablePublicSharing &&
                              (0, t.jsx)(g.SelectItem, {
                                value: "public",
                                children: (0, t.jsxs)("div", {
                                  className: "flex items-center gap-2",
                                  children: [
                                    (0, t.jsx)(x.Globe, {
                                      className: "w-4 aspect-square",
                                    }),
                                    " ",
                                    (0, t.jsx)("span", {
                                      children: "Everyone",
                                    }),
                                  ],
                                }),
                              }),
                            F &&
                              (0, t.jsx)(g.SelectItem, {
                                value: "team",
                                children: (0, t.jsxs)("div", {
                                  className: "flex items-center gap-2",
                                  children: [
                                    (0, t.jsx)(v.Users, {
                                      className: "w-4 aspect-square",
                                    }),
                                    " ",
                                    (0, t.jsxs)("span", {
                                      children: ["Everyone in ", F],
                                    }),
                                  ],
                                }),
                              }),
                          ],
                        }),
                      ],
                    }),
                  ],
                }),
            ],
          }),
          (0, t.jsxs)(d.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: ["edit" === i && ec, "review" === i && eu],
          }),
        ],
      });
    }
  },
  886058,
  (e) => {
    "use strict";
    e.s(["TemplateDeleteDialog", () => h], 886058);
    var t = e.i(324834),
      n = e.i(919012),
      r = (0, n.createServerReference)(
        "40e4dd58af2c524254d404077f71a1d07b6dca6f81",
        n.callServer,
        void 0,
        n.findSourceMapURL,
        "deleteTemplateAction",
      );
    e.i(563948);
    var i = e.i(407562),
      s = e.i(576191),
      a = e.i(307778),
      o = e.i(120945);
    e.i(904347);
    var l = e.i(37737),
      c = e.i(176248),
      u = e.i(297239),
      d = e.i(686832);
    function h({ blockId: e }) {
      let n = (0, u.useT)(),
        [h, p] = (0, s.useTransition)(),
        m = () => {
          p(async () => {
            try {
              let t = await r(e);
              if (t.error) return void i.toast.error(t.error);
              (i.toast.success("Deleted successfully"), (0, l.closeDialog)());
            } catch (e) {
              i.toast.error(e?.message || "Failed to delete template");
            }
          });
        };
      return (0, t.jsxs)(o.AtomicDialog, {
        type: "templateDelete",
        children: [
          (0, t.jsxs)(d.ModalHeader, {
            children: [
              (0, t.jsx)(d.ModalTitle, {
                children: n("deleteTemplateDialog.title"),
              }),
              (0, t.jsx)(d.ModalDescription, {
                children: n("deleteTemplateDialog.description"),
              }),
            ],
          }),
          (0, t.jsxs)(d.ModalFooter, {
            children: [
              (0, t.jsx)(c.Button, {
                size: "sm",
                variant: "secondary",
                onClick: l.closeDialog,
                children: n("deleteTemplateDialog.cancel"),
              }),
              (0, t.jsx)(c.Button, {
                disabled: h,
                onClick: m,
                size: "sm",
                variant: "destructive",
                children: h
                  ? (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(a.IconSpinner, { className: "size-4" }),
                        n("deleteTemplateDialog.deleting"),
                      ],
                    })
                  : n("deleteTemplateDialog.delete"),
              }),
            ],
          }),
        ],
      });
    }
  },
  373998,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(142219),
      i = e.i(819969),
      s = e.i(470259);
    let a = new Map(),
      o = (0, n.cacheResultById)(a, () => ({
        isOpen: (0, t.atom)(!1),
        openLocation: (0, t.atom)(null),
        selectedEnvironment: (0, t.atom)(null),
        protection: (0, t.atom)("public"),
        newBranchName: (0, t.atom)(null),
        newBranchNameError: (0, t.atom)(null),
        protectionPassword: (0, t.atom)(null),
        stageIntent: (0, t.atom)(null),
        newDomain: (0, t.atom)(null),
        passingState: (0, t.atom)(null),
        deployWarning: (0, t.atom)(null),
        hasUnclaimedStripeSandbox: (0, t.atom)(!1),
        hasDeployableChanges: (0, t.atom)(!1),
        domainError: (0, t.atom)(null),
        domainErrorRedirect: (0, t.atom)(null),
        asyncActionLoading: (0, t.atom)(null),
        activeBlockVersionNumber: (0, t.atom)(null),
        deployButtonClickedAtTimestamp: (0, t.atom)(null),
        deployCreationStartTimestamp: (0, t.atom)(null),
        deployCreationEndTimestamp: (0, t.atom)(null),
        selectedTemplate: (0, t.atom)(null),
        templateAction: (0, t.atom)(null),
        templateEntryChoice: (0, t.atom)(null),
      })),
      l = new Map(),
      c = (0, n.cacheResultById)(l, (e) => {
        let n = o(e),
          r = (0, i.getChatAtoms)(e),
          a = (0, t.atom)(
            (e) =>
              [
                "not-deployed",
                "deployed",
                "git-pushed-no-deploy",
                "failed",
              ].includes(e(r.deploymentState)) && !e(r.isStreaming),
          ),
          l = (0, t.atom)((e) => e(a) && "deploy" !== e(n.asyncActionLoading)),
          c = (0, t.atom)((e) =>
            "preview" === e(n.selectedEnvironment)
              ? e(a) && !!e(n.newBranchName)
              : e(a) && "pushing" !== e(n.asyncActionLoading),
          );
        return {
          ...n,
          externalMeta: r.externalMeta,
          deploymentState: r.deploymentState,
          isAbleToDeploy: l,
          isAbleToPushChanges: c,
          stage: (0, t.atom)((e) => {
            let t = e(r.externalMeta);
            if (!t.ok) {
              if (t.error.error === s.MISSING_MFA_SCOPE)
                return "two-factor-error";
              if (t.error.errorCode !== s.NOT_FOUND) return "error";
            }
            if (e(n.deployWarning)) return "deploy-warning";
            if (e(n.hasUnclaimedStripeSandbox)) return "stripe-claim-warning";
            let i = e(n.stageIntent);
            return (
              i || (t.ok && t.value.deployment?.id ? "deployment" : "create")
            );
          }),
          statusDotVariant: (0, t.atom)((e) => {
            if (e(n.passingState)) return null;
            if (e(n.hasDeployableChanges))
              switch (e(r.deploymentState)) {
                case "not-deployed":
                case "deployed":
                  return "success";
                case "failed":
                  return "error";
              }
            return null;
          }),
          buttonVariant: (0, t.atom)((e) => {
            let t = e(n.passingState);
            if (t)
              switch (t) {
                case "passing-deployed":
                  return "secondary";
                case "passing-error":
                  return "red";
              }
            let i = e(r.deploymentState);
            if (e(n.hasDeployableChanges) && "failed" === i) return "primary";
            if (!e(n.hasDeployableChanges) && "failed" === i) return "red";
            if ("error" === i) return "secondary";
            switch (i) {
              case "deployed":
              case "not-deployed":
                return "primary";
              default:
                return "secondary";
            }
          }),
          isNewDomainValid: (0, t.atom)((e) => {
            let t = e(n.newDomain);
            return !!t && /^[a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?$/.test(t);
          }),
          asyncActionLoadingLabel: (0, t.atom)((e) => {
            let t = e(n.asyncActionLoading),
              r = {
                deploy: "Deploying",
                "assigning-domain": "",
                pushing: "Pushing",
                "auto-fixing-errors": "Auto-fixing Errors",
                "auto-fixing-warning": "Auto-fixing Warning",
              };
            return t ? r[t] : null;
          }),
        };
      });
    function u(e) {
      let t = o(e);
      return {
        setIsOpenForLocation: (e, n) => {
          e
            ? (r.store.set(t.openLocation, n), r.store.set(t.isOpen, !0))
            : (r.store.set(t.isOpen, !1), r.store.set(t.openLocation, null));
        },
        setStageIntent: (e) => r.store.set(t.stageIntent, e),
        setAsyncActionLoading: (e) => r.store.set(t.asyncActionLoading, e),
        updateNewBranchName: (e) => {
          let n = e?.replace(/\s+/g, "-");
          (r.store.set(t.newBranchName, n ?? null),
            r.store.set(t.newBranchNameError, null));
        },
        setActiveBlockVersionNumber: (e) => {
          r.store.set(t.activeBlockVersionNumber, e);
        },
        setDeployButtonClickedAtTimestamp: (e) => {
          r.store.set(t.deployButtonClickedAtTimestamp, e);
        },
        setDeployCreationStartTimestamp: (e) => {
          r.store.set(t.deployCreationStartTimestamp, e);
        },
        setDeployCreationEndTimestamp: (e) => {
          r.store.set(t.deployCreationEndTimestamp, e);
        },
        setSelectedEnvironment: (e) => r.store.set(t.selectedEnvironment, e),
        setProtection: (e) => r.store.set(t.protection, e),
        setProtectionPassword: (e) => r.store.set(t.protectionPassword, e),
        setNewBranchNameError: (e) => r.store.set(t.newBranchNameError, e),
        clearBranchNameError: () => r.store.set(t.newBranchNameError, null),
        triggerPassingState: (e, n = 2e3) => (
          r.store.set(t.passingState, e),
          setTimeout(() => {
            r.store.set(t.passingState, null);
          }, n)
        ),
        setDeployWarning: (e) => r.store.set(t.deployWarning, e),
        setHasUnclaimedStripeSandbox: (e) =>
          r.store.set(t.hasUnclaimedStripeSandbox, e),
        setHasDeployableChanges: (e) => r.store.set(t.hasDeployableChanges, e),
        setNewDomain: (e) => r.store.set(t.newDomain, e),
        setDomainError: (e) => r.store.set(t.domainError, e),
        setDomainErrorRedirect: (e) => r.store.set(t.domainErrorRedirect, e),
        setSelectedTemplate: (e) => r.store.set(t.selectedTemplate, e),
        setTemplateAction: (e) => r.store.set(t.templateAction, e),
        setTemplateEntryChoice: (e) => r.store.set(t.templateEntryChoice, e),
      };
    }
    e.s(["getChatDeploymentActions", () => u, "getChatDeploymentAtoms", 0, c]);
  },
  246185,
  (e) => {
    e.v({ choiceBoxItem: "choice-box-module__9Hhm3a__choiceBoxItem" });
  },
  386688,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(338157),
      r = e.i(304649),
      i = e.i(246185);
    let s = ({
      label: e,
      direction: i = "column",
      value: s,
      onChange: a,
      className: o,
      children: l,
      ...c
    }) =>
      (0, t.jsxs)("div", {
        className: (0, r.cn)("space-y-2", o),
        children: [
          e &&
            (0, t.jsx)("div", {
              className: "text-sm font-medium",
              children: e,
            }),
          (0, t.jsx)(n.RadioGroup, {
            value: s ?? void 0,
            onValueChange: a,
            className: (0, r.cn)(
              "gap-2",
              "row" === i ? "flex" : "flex flex-col",
            ),
            ...c,
            children: l,
          }),
        ],
      });
    ((s.Item = function ({
      title: e,
      description: s,
      value: a,
      Icon: o,
      disabled: l,
    }) {
      return (0, t.jsxs)("label", {
        htmlFor: a,
        className: (0, r.cn)(
          "flex w-full cursor-pointer items-center justify-between rounded-md border border-v0-gray-200 p-3 text-v0-gray-1000 transition-colors",
          !l && "hover:bg-v0-background-200",
          i.default.choiceBoxItem,
        ),
        children: [
          (0, t.jsxs)("div", {
            className: "flex items-center gap-4",
            children: [
              o &&
                (0, t.jsx)("div", {
                  "data-icon": !0,
                  className: "text-v0-gray-900",
                  children: o,
                }),
              (0, t.jsxs)("div", {
                className: "text-label-14 flex flex-col gap-1 font-medium",
                children: [
                  (0, t.jsx)("span", { "data-title": !0, children: e }),
                  (0, t.jsx)("span", {
                    className: "font-normal text-v0-gray-900",
                    "data-description": !0,
                    children: s,
                  }),
                ],
              }),
            ],
          }),
          (0, t.jsx)(n.RadioGroupItem, { value: a, id: a, disabled: l }),
        ],
      });
    }),
      e.s(["ChoiceBoxGroup", () => s]));
  },
  15962,
  142398,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(373998),
      i = e.i(386688),
      s = e.i(393799),
      a = e.i(686832);
    e.i(472428);
    var o = e.i(296900);
    function l({ chatId: e, goTo: l, close: c }) {
      let { setTemplateAction: u, setTemplateEntryChoice: d } = (0,
        r.getChatDeploymentActions)(e),
        h = (0, r.getChatDeploymentAtoms)(e),
        p = (0, s.useAtomValue)(h.templateEntryChoice),
        { data: m, isLoading: f } = (0, o.useServerQuerySWR)(
          ["scoped", "editableTemplates"],
          {},
        );
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(a.ModalHeader, {
            children: [
              (0, t.jsx)(a.ModalTitle, { children: "Publish as Template" }),
              (0, t.jsx)(a.ModalDescription, {
                children:
                  "Create a new template, or update an existing template",
              }),
            ],
          }),
          (0, t.jsx)(a.ModalContent, {
            children: (0, t.jsxs)(i.ChoiceBoxGroup, {
              value: p,
              className: "flex flex-col gap-2",
              onChange: (e) => d(e),
              children: [
                (0, t.jsx)(i.ChoiceBoxGroup.Item, {
                  value: "create",
                  title: "New Template",
                  description: "Create a brand new template.",
                }),
                (0, t.jsx)(i.ChoiceBoxGroup.Item, {
                  value: "update",
                  title: "Update an Existing Template",
                  description: "Push updates to an existing template.",
                  disabled: f || (m?.ok && 0 === m.value.length),
                }),
              ],
            }),
          }),
          (0, t.jsxs)(a.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: [
              (0, t.jsx)(n.Button, {
                size: "sm",
                variant: "secondary",
                onClick: c,
                children: "Cancel",
              }),
              (0, t.jsx)(n.Button, {
                size: "sm",
                disabled: null === p,
                onClick: () => {
                  "create" === p
                    ? (u("created"), l("submit-as-template"))
                    : "update" === p && (u("updated"), l("template-picker"));
                },
                children: "Continue",
              }),
            ],
          }),
        ],
      });
    }
    e.s(["TemplateEntryStage", () => l], 15962);
    var c = e.i(590681);
    e.s(["GitBranchIcon", () => c.default], 142398);
  },
  81538,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Sparkles", [
      [
        "path",
        {
          d: "M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",
          key: "4pj2yx",
        },
      ],
      ["path", { d: "M20 3v4", key: "1olli1" }],
      ["path", { d: "M22 5h-4", key: "1gvqau" }],
      ["path", { d: "M4 17v2", key: "vumght" }],
      ["path", { d: "M5 18H3", key: "zchphs" }],
    ]);
    e.s(["default", () => t]);
  },
  737499,
  (e) => {
    "use strict";
    var t = e.i(81538);
    e.s(["Sparkles", () => t.default]);
  },
  548866,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(89440),
      r = e.i(304649);
    function i({
      title: e,
      children: n,
      icon: i,
      variant: a = "default",
      className: o,
    }) {
      return (0, t.jsxs)("div", {
        className: (0, r.cn)(
          "border-v0-alpha-400 bg-v0-background-200 flex min-h-[200px] flex-col items-center justify-center gap-4 text-balance rounded-md border px-6 py-8 text-center",
          o,
        ),
        children: [
          i
            ? (0, t.jsx)("div", { className: s({ variant: a }), children: i })
            : null,
          (0, t.jsxs)("div", {
            className: "flex flex-col gap-1.5",
            children: [
              (0, t.jsx)("span", {
                className: "text-label-16 font-medium text-v0-gray-1000",
                children: e,
              }),
              (0, t.jsx)("span", {
                className: "text-label-14 text-v0-gray-900",
                children: n,
              }),
            ],
          }),
        ],
      });
    }
    let s = (0, n.cva)(
      "bg-v0-background-100 border-v0-alpha-400 flex size-8 items-center justify-center rounded-[6px] border",
      {
        variants: {
          variant: {
            default: "text-v0-gray-1000",
            warning: "text-v0-amber-700",
            error: "text-v0-red-700",
            success: "text-v0-green-700",
          },
        },
        defaultVariants: { variant: "default" },
      },
    );
    e.s(["EmptyState", () => i]);
  },
  313758,
  244603,
  778407,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(373998),
      r = e.i(176248),
      i = e.i(762585);
    e.i(472428);
    var s = e.i(296900),
      a = e.i(576191),
      o = e.i(431141),
      l = e.i(142398),
      c = e.i(737499),
      u = e.i(548866),
      d = e.i(686832);
    function h({ chatId: e, goTo: i, close: o }) {
      let { setSelectedTemplate: l } = (0, n.getChatDeploymentActions)(e),
        { data: h, isLoading: f } = (0, s.useServerQuerySWR)(
          ["scoped", "editableTemplates"],
          {},
        ),
        g = h && (h.ok ? h.value : []),
        [x, v] = (0, a.useState)(null);
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(d.ModalHeader, {
            children: [
              (0, t.jsx)(d.ModalTitle, { children: "Select a Template" }),
              (0, t.jsx)(d.ModalDescription, {
                children: "Select which template you want to update",
              }),
            ],
          }),
          (0, t.jsxs)(d.ModalContent, {
            className: "gap-4",
            children: [
              (0, t.jsx)("div", {
                className:
                  "grid grid-cols-2 gap-x-4 gap-y-2 max-h-[300px] overflow-y-auto p-1",
                children:
                  f && g?.length === 0
                    ? Array.from({ length: 4 }).map((e, n) =>
                        (0, t.jsx)(m, {}, n),
                      )
                    : g?.map((e) =>
                        (0, t.jsx)(
                          p,
                          {
                            imageUrl: e.imageUrl ?? void 0,
                            title:
                              e.title || e.templateVersion.title || "Untitled",
                            forks: e.uses || 0,
                            selected: x === e.templateCanonId,
                            onClick: () => v(e.templateCanonId),
                          },
                          e.templateCanonId,
                        ),
                      ),
              }),
              !f &&
                (!g || 0 === g.length) &&
                (0, t.jsx)(u.EmptyState, {
                  title: "No editable templates",
                  icon: (0, t.jsx)(c.Sparkles, {}),
                }),
            ],
          }),
          (0, t.jsxs)(d.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: [
              (0, t.jsx)(r.Button, {
                size: "sm",
                variant: "secondary",
                onClick: () => i("template-entry"),
                children: "Back",
              }),
              (0, t.jsx)(r.Button, {
                size: "sm",
                variant: "secondary",
                disabled: !x,
                onClick: () => {
                  x &&
                    g &&
                    (l(g.find((e) => e.templateCanonId === x) || null),
                    i("submit-as-template"));
                },
                children: "Continue",
              }),
            ],
          }),
        ],
      });
    }
    let p = ({
        imageUrl: e,
        title: n,
        forks: r,
        selected: i = !1,
        onClick: s,
      }) =>
        (0, t.jsxs)("button", {
          type: "button",
          onClick: s,
          className: "flex flex-col w-full",
          style: { outline: "none" },
          children: [
            (0, t.jsx)("div", {
              className: `relative w-full h-[110px] rounded-md mb-1 overflow-hidden ${i ? "ring-2 ring-blue-500" : "ring-2 ring-gray-200"}`,
              children: e
                ? (0, t.jsx)(o.default, {
                    src: e,
                    alt: n,
                    fill: !0,
                    className: "object-cover",
                    style: { borderRadius: 6 },
                  })
                : null,
            }),
            (0, t.jsx)("span", {
              className: "text-label-14 font-medium text-left mt-0.5",
              children: n,
            }),
            (0, t.jsx)("div", {
              className:
                "flex items-center gap-2 text-label-12 text-v0-gray-900 -mt-0.5",
              children: (0, t.jsxs)("span", {
                className: "flex items-center gap-1",
                children: [
                  (0, t.jsx)(l.GitBranchIcon, {
                    className: "w-3 aspect-square",
                  }),
                  r,
                  " Forks",
                ],
              }),
            }),
          ],
        }),
      m = () =>
        (0, t.jsxs)("div", {
          className: "flex flex-col w-full gap-1",
          children: [
            (0, t.jsx)(i.Skeleton, {
              className: "h-[110px] w-full rounded-md",
            }),
            (0, t.jsx)(i.Skeleton, { className: "h-4 w-3/4" }),
            (0, t.jsx)(i.Skeleton, { className: "h-3 w-1/2" }),
          ],
        });
    e.s(["TemplatePickerStage", () => h], 313758);
    var f = e.i(919012),
      g = (0, f.createServerReference)(
        "7fdbc427f29fadc6ed5da6a18c74ef8db6346d34e4",
        f.callServer,
        void 0,
        f.findSourceMapURL,
        "createTemplateForChat",
      );
    e.s(["createTemplateForChat", () => g], 244603);
    var x = f,
      v = (0, x.createServerReference)(
        "7f5148ff6dafb1d8f67b389d0828a294fa452625f0",
        x.callServer,
        void 0,
        x.findSourceMapURL,
        "reassignTemplateChat",
      );
    e.s(["reassignTemplateChat", () => v], 778407);
  },
  461034,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Users", [
      [
        "path",
        { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" },
      ],
      ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
      ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
      ["path", { d: "M16 3.13a4 4 0 0 1 0 7.75", key: "1da9ce" }],
    ]);
    e.s(["default", () => t]);
  },
  557391,
  (e) => {
    "use strict";
    e.s(["SubmitAsTemplateStage", () => M], 557391);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(607391),
      i = e.i(373998),
      s = e.i(707974),
      a = e.i(763480),
      o = e.i(592258),
      l = e.i(216445),
      c = e.i(393799),
      u = e.i(762585),
      d = e.i(431141),
      h = e.i(707827),
      p = e.i(484569),
      m = e.i(576191);
    e.i(472428);
    var f = e.i(296900),
      g = e.i(132440),
      x = e.i(319076),
      v = e.i(244603),
      y = e.i(778407);
    e.i(563948);
    var b = e.i(407562),
      j = e.i(686832),
      w = e.i(95020),
      C = e.i(461034),
      C = C,
      k = e.i(667660),
      S = e.i(714249),
      N = e.i(663963),
      E = e.i(390215),
      A = e.i(449381),
      D = e.i(387040),
      I = e.i(209819);
    function M({ chatId: e, goTo: N, close: D }) {
      let M = (0, i.getChatDeploymentAtoms)(e),
        P = (0, c.useAtomValue)(M.externalMeta),
        R = P.ok ? P.value.deployment : void 0,
        { activeScope: F } = (0, k.useActiveScope)(),
        _ = (0, k.scopeIsTeam)(F) ? F.name : null,
        { settings: O } = (0, S.useTeamSettings)(),
        B = (0, A.useActiveBlockState)(),
        { project: V, title: z } = (0, I.useChatMetadata)(),
        H = (0, c.useAtomValue)(M.selectedTemplate),
        { data: $, mutate: U } = (0, f.useServerQuerySWR)(
          ["chat", "template"],
          { chatId: e },
        ),
        G = (0, c.useAtomValue)(M.templateEntryChoice),
        W = H ?? ($?.ok ? $.value : void 0) ?? null,
        {
          files: q,
          uploading: Z,
          inputFileRef: K,
          onInputChange: Y,
        } = (0, p.useTemplateFileUpload)({
          initialImages: W?.imageUrl
            ? [{ url: W.imageUrl, name: "Template Thumbnail" }]
            : R?.screenshotUrl
              ? [{ url: R.screenshotUrl, name: "Deployment Screenshot" }]
              : [],
          disableDrag: !0,
        }),
        [J, Q] = (0, m.useState)(W?.title ?? z),
        [X, ee] = (0, m.useState)(W?.category ?? null),
        [et, en] = (0, m.useState)(W?.visibility ?? (_ ? "team" : "public")),
        [er, ei] = (0, m.useState)(W?.description ?? ""),
        [es, ea] = (0, m.useState)(W?.tags ?? []),
        [eo, el] = (0, m.useState)(!1),
        ec = q.at(0)?.url ?? W?.imageUrl ?? R?.screenshotUrl ?? null,
        eu = async () => {
          let t;
          if ((el(!0), J.trim()))
            if (X)
              if (ec) {
                if (!V?.projectId) {
                  (b.toast.error("Template must be in a project"), el(!1));
                  return;
                }
              } else {
                (b.toast.error("Thumbnail required"), el(!1));
                return;
              }
            else {
              (b.toast.error("Category is required"), el(!1));
              return;
            }
          else {
            (b.toast.error("Name is required"), el(!1));
            return;
          }
          let n = {
              chatId: e,
              title: J.trim(),
              category: X,
              tags: es,
              description: er || "",
              imageUrl: ec,
              visibility: et,
              blockId: B?.id,
              existingCanonId: W?.templateCanonId,
            },
            r = L(n);
          if ("create" === G) {
            let { existingCanonId: e, ...i } = n;
            t = await U({
              serverMutate: (0, v.createTemplateForChat)(i),
              optimisticData: r,
            });
          } else if (W && W.chatId === e)
            t = await U({
              serverMutate: (0, x.saveTemplate)(n),
              optimisticData: r,
            });
          else if (W)
            ((t = await (0, y.reassignTemplateChat)({
              templateCanonId: W.templateCanonId,
              newChatId: e,
            })),
              await U({
                serverMutate: (0, x.saveTemplate)(n),
                optimisticData: r,
              }));
          else {
            (b.toast.error("An error occurred while saving the template."),
              el(!1));
            return;
          }
          (el(!1), t.ok)
            ? (b.toast.success("Template saved"),
              N("template-submission-success"))
            : b.toast.error(t.error.error);
        };
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(j.ModalHeader, {
            children: [
              (0, t.jsxs)(j.ModalTitle, {
                children: [
                  W
                    ? (0, t.jsx)("span", { children: "Update" })
                    : (0, t.jsx)("span", { children: "Submit" }),
                  " ",
                  (0, t.jsx)("span", { children: "a Template" }),
                ],
              }),
              (0, t.jsx)(j.ModalDescription, {
                children: W
                  ? "Update the details of this template"
                  : "Submit this chat as a new template",
              }),
            ],
          }),
          (0, t.jsxs)(j.ModalContent, {
            className: "flex flex-col gap-4",
            children: [
              (0, t.jsxs)(T, {
                children: [
                  (0, t.jsx)(s.Label, {
                    children: "Custom Thumbnail (1920x1080)",
                  }),
                  (0, t.jsxs)("div", {
                    className: "relative w-full",
                    children: [
                      (0, t.jsxs)("label", {
                        htmlFor: `thumbnail-upload-${e}`,
                        className:
                          "group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-1/2 cursor-pointer items-center justify-center overflow-hidden rounded-md border",
                        children: [
                          ec
                            ? (0, t.jsx)(d.default, {
                                src: ec,
                                alt: "Template Thumbnail",
                                fill: !0,
                                className: "object-cover",
                              })
                            : (0, t.jsx)(u.Skeleton, {
                                className: "h-full w-full",
                              }),
                          (0, t.jsx)("div", {
                            className:
                              "pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100",
                          }),
                          (0, t.jsx)("span", {
                            className:
                              "absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",
                            children: (0, t.jsx)("div", {
                              className:
                                "rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100 pointer-events-auto",
                              children: Z
                                ? (0, t.jsx)(h.Spinner, { size: 16 })
                                : "Change image",
                            }),
                          }),
                        ],
                      }),
                      (0, t.jsx)("input", {
                        id: `thumbnail-upload-${e}`,
                        className: "sr-only",
                        accept: "image/*",
                        type: "file",
                        ref: K,
                        onChange: Y,
                        disabled: Z,
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsx)(T, {
                children: (0, t.jsx)(a.Input, {
                  label: "Template Name",
                  placeholder: "Modern Landing Page",
                  value: J,
                  onChange: (e) => Q(e.target.value),
                }),
              }),
              (0, t.jsxs)(T, {
                children: [
                  (0, t.jsx)(s.Label, { children: "Description" }),
                  (0, t.jsx)(l.Textarea, {
                    placeholder: "A modern landing page for a SaaS product",
                    className: "min-h-[100px]",
                    value: er,
                    onChange: (e) => ei(e.target.value),
                  }),
                ],
              }),
              (0, t.jsxs)(T, {
                children: [
                  (0, t.jsx)(s.Label, { children: "Category" }),
                  (0, t.jsxs)(o.Select, {
                    value: X ?? void 0,
                    onValueChange: ee,
                    children: [
                      (0, t.jsx)(o.SelectTrigger, {
                        children: (0, t.jsx)(o.SelectValue, {
                          placeholder: "Select a category",
                        }),
                      }),
                      (0, t.jsx)(o.SelectContent, {
                        children: [...g.templateCategories].map((e) =>
                          (0, t.jsx)(
                            o.SelectItem,
                            { value: e.value, children: e.text },
                            e.value,
                          ),
                        ),
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsxs)(T, {
                children: [
                  (0, t.jsx)(s.Label, { children: "Tags" }),
                  (0, t.jsx)(E.TagInput, { tags: es, setTags: ea }),
                ],
              }),
              (0, t.jsxs)(T, {
                children: [
                  (0, t.jsx)(s.Label, { children: "Visibility" }),
                  (0, t.jsxs)(o.Select, {
                    value: et,
                    onValueChange: (e) => en(e),
                    children: [
                      (0, t.jsx)(o.SelectTrigger, {
                        children: (0, t.jsx)(o.SelectValue, {
                          placeholder: "Select visibility",
                        }),
                      }),
                      (0, t.jsxs)(o.SelectContent, {
                        children: [
                          !O?.disablePublicSharing &&
                            (0, t.jsx)(o.SelectItem, {
                              value: "public",
                              children: (0, t.jsxs)("div", {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, t.jsx)(w.Globe, {
                                    className: "w-4 aspect-square",
                                  }),
                                  " ",
                                  (0, t.jsx)("span", {
                                    children: "Everyone on v0",
                                  }),
                                ],
                              }),
                            }),
                          _ &&
                            (0, t.jsx)(o.SelectItem, {
                              value: "team",
                              children: (0, t.jsxs)("div", {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, t.jsx)(C.default, {
                                    className: "w-4 aspect-square",
                                  }),
                                  " ",
                                  (0, t.jsxs)("span", {
                                    children: ["Everyone in ", _],
                                  }),
                                ],
                              }),
                            }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
            ],
          }),
          (0, t.jsxs)(j.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: [
              (0, t.jsx)(n.Button, {
                size: "sm",
                variant: "secondary",
                onClick: D,
                children: "Cancel",
              }),
              (0, t.jsx)(n.Button, {
                size: "sm",
                disabled: Z || eo,
                onClick: eu,
                variant: "default",
                children: (0, t.jsx)(r.ActionStatus, {
                  isLoading: Z || eo,
                  loading: Z || eo,
                  children: W ? "Update Template" : "Publish Template",
                }),
              }),
            ],
          }),
        ],
      });
    }
    let T = ({ children: e }) =>
        (0, t.jsx)("div", { className: "flex flex-col gap-2", children: e }),
      L = (e) =>
        (0, D.ok)({
          ...e,
          createdAt: new Date(),
          updatedAt: new Date(),
          deletedAt: null,
          templateCanonId: (0, N.generateTemplateId)(),
          templateVersionId: (0, N.generateTemplateId)(),
          authorId: "optimisticData",
          uses: 0,
          trendingScore: 0,
          trendingScoreOffset: 0,
          order: 0,
          projectId: "optimisticData",
          teamId: "optimisticData",
          visibility: e.visibility ?? "public",
          keywords: null,
          templateVersion: {
            block: { latestDeploymentInfo: { deploymentId: "optimisticData" } },
          },
        });
  },
  455690,
  (e) => {
    "use strict";
    function t(e) {
      return "v0[bot]" === e.meta.githubCommitAuthorLogin;
    }
    e.s(["isGithubCommitByV0Bot", () => t]);
  },
  741888,
  (e) => {
    "use strict";
    e.s(["TemplateWizardDialog", () => P], 741888);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(120945),
      i = e.i(37737),
      s = e.i(15962),
      a = e.i(313758),
      o = e.i(557391),
      l = t,
      c = e.i(176248),
      u = e.i(373998),
      d = e.i(393799),
      h = e.i(686832),
      p = e.i(431141);
    e.i(472428);
    var m = e.i(296900),
      f = e.i(230766),
      g = e.i(828753),
      x = e.i(455690);
    function v({
      imageSrc: e,
      onClick: t,
      label: n = "View Template Details",
    }) {
      return (0, l.jsxs)("button", {
        type: "button",
        onClick: t,
        className:
          "group border-v0-alpha-400 bg-v0-background-200 relative flex aspect-video w-full cursor-pointer items-center justify-center overflow-hidden rounded-md border",
        children: [
          (0, l.jsx)(p.default, {
            src: e,
            alt: "Template Thumbnail",
            fill: !0,
            className: "object-cover",
          }),
          (0, l.jsx)("div", {
            className:
              "pointer-events-none absolute inset-0 bg-linear-to-t from-[#00000066] to-transparent opacity-0 transition-opacity group-hover:opacity-100",
          }),
          (0, l.jsx)("span", {
            className:
              "absolute inset-0 items-center justify-center pointer-events-none z-10 flex gap-2",
            children: (0, l.jsx)("div", {
              className:
                "rounded-md bg-v0-background-100 px-2 py-1 text-label-14 font-medium opacity-0 transition-opacity group-hover:opacity-100",
              children: n,
            }),
          }),
        ],
      });
    }
    function y({ title: e, forks: t = 0, avatarUserId: n, deployment: r }) {
      return (0, l.jsxs)("div", {
        className: "w-full flex flex-row justify-start items-center gap-x-3",
        children: [
          (0, l.jsx)("div", {
            className: "w-8 h-8 rounded-full bg-v0-background-200",
            children:
              n && r && !(0, x.isGithubCommitByV0Bot)(r)
                ? (0, l.jsx)(f.AvatarUser, {
                    userId: n,
                    rounded: !0,
                    size: "md",
                  })
                : null,
          }),
          (0, l.jsxs)("div", {
            className: "flex flex-col justify-center items-start text-label-14",
            children: [
              (0, l.jsx)("span", {
                className: "font-medium",
                children: e ?? "Untitled",
              }),
              (0, l.jsxs)("div", {
                className: "flex flex-row justify-start items-center gap-x-1.5",
                children: [
                  (0, l.jsx)(g.GitBranch, {
                    className: "w-4 aspect-square text-v0-gray-900",
                  }),
                  (0, l.jsxs)("div", { children: [t, " forks"] }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function b({ chatId: e, goTo: t, close: n }) {
      let r = (0, u.getChatDeploymentAtoms)(e),
        i = (0, d.useAtomValue)(r.templateAction),
        s = (0, d.useAtomValue)(r.externalMeta),
        a = s.ok ? s.value.deployment : void 0,
        { data: o } = (0, m.useServerQuerySWR)(["chat", "template"], {
          chatId: e,
        }),
        p = "updated" === i ? "Template updated!" : "Template submitted!",
        f =
          "updated" === i
            ? "Your template changes have been saved."
            : o?.ok && o.value?.visibility === "public"
              ? "Your template has been queued for review and will appear in the community shortly."
              : "Your template is now available for use by your team.";
      return (0, l.jsxs)(l.Fragment, {
        children: [
          (0, l.jsxs)(h.ModalHeader, {
            children: [
              (0, l.jsx)(h.ModalTitle, { children: p }),
              (0, l.jsx)(h.ModalDescription, { children: f }),
            ],
          }),
          (0, l.jsx)(h.ModalContent, {
            children: (0, l.jsxs)("div", {
              className: "flex flex-col justify-start items-start gap-y-4",
              children: [
                (0, l.jsx)(v, {
                  imageSrc:
                    (o?.ok ? o.value?.imageUrl : void 0) ??
                    a?.screenshotUrl ??
                    "",
                  onClick: () => t("submit-as-template"),
                }),
                (0, l.jsx)(y, {
                  title: o?.ok ? o.value?.title : void 0,
                  forks: o?.ok ? o.value?.uses : void 0,
                  avatarUserId: a?.creator?.uid ?? null,
                  deployment: a,
                }),
              ],
            }),
          }),
          (0, l.jsxs)(h.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: [
              (0, l.jsx)(c.Button, {
                size: "sm",
                variant: "secondary",
                onClick: n,
                children: "Dismiss",
              }),
              (0, l.jsx)(c.Button, {
                size: "sm",
                onClick: () => {
                  o?.ok &&
                    o.value &&
                    window.open(
                      `/templates/${o.value.templateCanonId}`,
                      "_blank",
                    );
                },
                children: "View Template",
              }),
            ],
          }),
        ],
      });
    }
    var j = u,
      w = t,
      C = c,
      k = u,
      S = d,
      N = h,
      E = m,
      A = e.i(919012),
      D = (0, A.createServerReference)(
        "7ff0792b58f7994f7e5b6a755e12d61496af95a370",
        A.callServer,
        void 0,
        A.findSourceMapURL,
        "publishTemplate",
      );
    e.i(563948);
    var I = e.i(407562),
      M = n,
      T = e.i(607391);
    function L({ chatId: e, goTo: t, close: n }) {
      let r = (0, k.getChatDeploymentAtoms)(e),
        i = (0, S.useAtomValue)(r.externalMeta),
        s = i.ok ? i.value.deployment : void 0,
        { data: a, mutate: o } = (0, E.useServerQuerySWR)(
          ["chat", "template"],
          { chatId: e },
        ),
        [l, c] = (0, M.useState)(!1);
      if (!a?.ok || !a.value) return null;
      let u = async () => {
        if (!a.value) return;
        c(!0);
        let n = await D({
          templateCanonId: a.value.templateCanonId,
          chatId: e,
        });
        (c(!1),
          n.ok || I.toast.error(n.error.error),
          await o({ serverMutate: Promise.resolve(!0), optimisticData: null }),
          I.toast.success("Changes published"),
          t("template-submission-success"));
      };
      return (0, w.jsxs)(w.Fragment, {
        children: [
          (0, w.jsxs)(N.ModalHeader, {
            children: [
              (0, w.jsx)(N.ModalTitle, {
                children: "Publish Changes to This Template",
              }),
              (0, w.jsx)(N.ModalDescription, {
                children: `Publish your changes to ${a.value.title}. Once published, your
          template will be updated with the new changes from this chat.`,
              }),
            ],
          }),
          (0, w.jsx)(N.ModalContent, {
            children: (0, w.jsxs)("div", {
              className: "flex flex-col justify-start items-start gap-y-4",
              children: [
                (0, w.jsx)(v, {
                  imageSrc: a.value.imageUrl ?? s?.screenshotUrl ?? "",
                  onClick: () => t("submit-as-template"),
                }),
                (0, w.jsx)(y, {
                  title: a.value.title,
                  forks: a.value.uses,
                  avatarUserId: s?.creator?.uid ?? null,
                  deployment: s,
                }),
              ],
            }),
          }),
          (0, w.jsxs)(N.ModalFooter, {
            className: "border-t bg-alpha-400/10",
            children: [
              (0, w.jsx)(C.Button, {
                size: "sm",
                variant: "secondary",
                onClick: n,
                children: "Cancel",
              }),
              (0, w.jsx)(C.Button, {
                size: "sm",
                disabled: l,
                onClick: u,
                children: (0, w.jsx)(T.ActionStatus, {
                  isLoading: l,
                  loading: l,
                  children: "Publish Changes",
                }),
              }),
            ],
          }),
        ],
      });
    }
    function P({ chatId: e, initialStage: l = "template-entry" }) {
      let [c, u] = (0, n.useState)(l),
        { setSelectedTemplate: d } = (0, j.getChatDeploymentActions)(e),
        h = (0, n.useCallback)((e) => {
          u(e);
        }, []),
        p = (0, n.useCallback)(() => {
          (d(null), (0, i.closeDialog)());
        }, [d]),
        m = () => {
          let n = { chatId: e, goTo: h, close: p };
          switch (c) {
            case "template-entry":
              return (0, t.jsx)(s.TemplateEntryStage, { ...n });
            case "template-picker":
              return (0, t.jsx)(a.TemplatePickerStage, { ...n });
            case "submit-as-template":
              return (0, t.jsx)(o.SubmitAsTemplateStage, { ...n });
            case "publish-template-changes":
              return (0, t.jsx)(L, { ...n });
            case "template-submission-success":
              return (0, t.jsx)(b, { ...n });
            default:
              return null;
          }
        };
      return (0, t.jsx)(r.AtomicDialog, {
        type: "templateWizard",
        children: m(),
      });
    }
  },
  377977,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Frown", [
      ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
      ["path", { d: "M16 16s-1.5-2-4-2-4 2-4 2", key: "epbg0q" }],
      ["line", { x1: "9", x2: "9.01", y1: "9", y2: "9", key: "yxxnd0" }],
      ["line", { x1: "15", x2: "15.01", y1: "9", y2: "9", key: "1p4y9e" }],
    ]);
    e.s(["default", () => t]);
  },
  857658,
  (e) => {
    "use strict";
    var t = e.i(377977);
    e.s(["Frown", () => t.default]);
  },
  925857,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Meh", [
      ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
      ["line", { x1: "8", x2: "16", y1: "15", y2: "15", key: "1xb1d9" }],
      ["line", { x1: "9", x2: "9.01", y1: "9", y2: "9", key: "yxxnd0" }],
      ["line", { x1: "15", x2: "15.01", y1: "9", y2: "9", key: "1p4y9e" }],
    ]);
    e.s(["default", () => t]);
  },
  391730,
  (e) => {
    "use strict";
    var t = e.i(925857);
    e.s(["Meh", () => t.default]);
  },
  167952,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Smile", [
      ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
      ["path", { d: "M8 14s1.5 2 4 2 4-2 4-2", key: "1y1vjs" }],
      ["line", { x1: "9", x2: "9.01", y1: "9", y2: "9", key: "yxxnd0" }],
      ["line", { x1: "15", x2: "15.01", y1: "9", y2: "9", key: "1p4y9e" }],
    ]);
    e.s(["default", () => t]);
  },
  145392,
  801565,
  (e) => {
    "use strict";
    var t = e.i(167952);
    e.s(["Smile", () => t.default], 145392);
    var n = e.i(919012),
      r = (0, n.createServerReference)(
        "40c71cba95dccffa8e02d34fb83ce5ba99546df881",
        n.callServer,
        void 0,
        n.findSourceMapURL,
        "sendGeneralFeedback",
      );
    e.s(["sendGeneralFeedback", () => r], 801565);
  },
  608499,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM9 11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55229 10 9 10.4477 9 11ZM7.09584 5.82182C7.25716 5.48223 7.6022 5.25 7.99999 5.25C8.55227 5.25 8.99999 5.69772 8.99999 6.25C8.99999 6.75329 8.62748 7.17086 8.14337 7.23989C7.70367 7.3026 7.24999 7.67511 7.24999 8.25V8.5V9.25H8.74999V8.63535C9.76443 8.31661 10.5 7.36971 10.5 6.25C10.5 4.86929 9.3807 3.75 7.99999 3.75C7.00158 3.75 6.14136 4.3353 5.74095 5.17818L5.41913 5.85563L6.77402 6.49926L7.09584 5.82182Z" fill="currentColor"/>',
    );
    e.s(["Question", 0, t]);
  },
  688371,
  320502,
  (e) => {
    "use strict";
    e.s(["FeedbackDialog", () => C], 688371);
    var t = e.i(324834),
      n = e.i(304649),
      r = e.i(857658),
      i = e.i(391730),
      s = e.i(145392),
      a = e.i(216445),
      o = e.i(7684),
      l = e.i(576191);
    e.i(563948);
    var c = e.i(407562),
      u = e.i(801565),
      d = e.i(32170),
      h = e.i(176248),
      p = e.i(686832),
      m = e.i(297239);
    e.i(608499);
    var f = e.i(51940),
      g = e.i(120945),
      x = e.i(9654),
      v = e.i(393799);
    e.i(904347);
    var y = e.i(37737);
    let b = (0, x.atom)(""),
      j = (0, x.atom)(void 0),
      w = (0, x.atom)(void 0);
    function C({ feedback: e, sentiment: n }) {
      let r = (0, m.useT)(),
        [i, s] = (0, v.useAtom)(b),
        [a, o] = (0, v.useAtom)(j),
        [c, u] = (0, v.useAtom)(w);
      return (
        (0, l.useEffect)(() => {
          (e && s(e), n && o(n));
        }, []),
        (0, t.jsxs)(g.AtomicDialog, {
          type: "feedback",
          children: [
            (0, t.jsxs)(p.ModalHeader, {
              children: [
                (0, t.jsx)(p.ModalTitle, {
                  children: r("feedbackDialog.title"),
                }),
                (0, t.jsx)(p.ModalDescription, {
                  children: r("feedbackDialog.description"),
                }),
              ],
            }),
            (0, t.jsx)(p.ModalContent, {
              children: (0, t.jsx)(S, {
                feedback: i,
                selectedOption: a,
                setFeedback: s,
                closeDialog: y.closeDialog,
                setSelectedOption: o,
                setValidationError: u,
                validationError: c,
              }),
            }),
          ],
        })
      );
    }
    function k({
      children: e,
      selectedOption: r,
      option: i,
      handleOptionClick: s,
    }) {
      return (0, t.jsx)(h.Button, {
        className: (0, n.cn)(
          "transition-all duration-300",
          r === i &&
            "border-v0-gray-1000 hover:border-v0-gray-1000 focus:border-v0-gray-1000 focus-visible:border-v0-gray-1000",
        ),
        onClick: () => s(i),
        size: "sm",
        type: "button",
        variant: "secondary",
        children: e,
      });
    }
    function S({
      feedback: e,
      setFeedback: g,
      selectedOption: x,
      setSelectedOption: v,
      validationError: y,
      setValidationError: b,
      closeDialog: j,
    }) {
      let w = (0, m.useT)(),
        { user: C } = (0, d.useUser)(),
        S = (e) => {
          (e && v(e), b(void 0));
        },
        N = (t) => {
          (t.preventDefault(), "" === e.trim())
            ? b(w("feedbackDialog.error.enterFeedback"))
            : x
              ? ((0, u.sendGeneralFeedback)({
                  feedback: e,
                  url: location.href,
                  sentiment: x,
                  user: C,
                }),
                j(),
                g(""),
                v("neutral"),
                b(void 0),
                c.toast.success(w("feedbackDialog.successToast")))
              : b(w("feedbackDialog.error.selectEmoji"));
        },
        { formRef: E, onKeyDown: A } = (0, o.useCmdEnterSubmit)(),
        D = (0, l.useRef)(null);
      return (
        (0, l.useEffect)(() => {
          if (D.current) {
            D.current.focus();
            let e = D.current.value.length;
            D.current.setSelectionRange(e, e);
          }
        }, []),
        (0, t.jsxs)("form", {
          className: "flex flex-col gap-4",
          onSubmit: N,
          ref: E,
          children: [
            (0, t.jsx)(a.Textarea, {
              asChild: !0,
              children: (0, t.jsx)(f.ResizableTextArea, {
                ref: D,
                maxHeight: 224,
                minHeight: 80,
                name: "feedback",
                onKeyDown: A,
                placeholder: w("feedbackDialog.yourFeedback"),
                spellCheck: !1,
                onChange: (e) => g(e.target.value),
                value: e,
              }),
            }),
            (0, t.jsxs)("div", {
              className:
                "flex flex-col gap-4 md:flex-row md:items-center md:justify-between",
              children: [
                (0, t.jsxs)("div", {
                  className: "flex w-full items-center justify-start gap-2",
                  children: [
                    (0, t.jsx)(k, {
                      handleOptionClick: S,
                      option: "bad",
                      selectedOption: x,
                      children: (0, t.jsx)(r.Frown, {
                        className: (0, n.cn)("size-4", {
                          "dark:fill-red-400/80 fill-red-200": "bad" === x,
                        }),
                      }),
                    }),
                    (0, t.jsx)(k, {
                      handleOptionClick: S,
                      option: "neutral",
                      selectedOption: x,
                      children: (0, t.jsx)(i.Meh, {
                        className: (0, n.cn)("size-4", {
                          "dark:fill-amber-500/70 fill-yellow-200":
                            "neutral" === x,
                        }),
                      }),
                    }),
                    (0, t.jsx)(k, {
                      handleOptionClick: S,
                      option: "good",
                      selectedOption: x,
                      children: (0, t.jsx)(s.Smile, {
                        className: (0, n.cn)("size-4", {
                          "dark:fill-green-500/60 fill-green-200": "good" === x,
                        }),
                      }),
                    }),
                    (0, t.jsx)("div", {
                      children:
                        y &&
                        (0, t.jsx)("div", {
                          className: "text-sm text-v0-red-800",
                          role: "alert",
                          children: y,
                        }),
                    }),
                  ],
                }),
                (0, t.jsxs)(p.ModalFooter, {
                  className: "p-0 md:p-0",
                  children: [
                    (0, t.jsx)(p.ModalClose, {
                      asChild: !0,
                      children: (0, t.jsx)(h.Button, {
                        size: "sm",
                        type: "button",
                        variant: "secondary",
                        onClick: j,
                        children: w("feedbackDialog.cancel"),
                      }),
                    }),
                    (0, t.jsx)(h.Button, {
                      size: "sm",
                      type: "submit",
                      children: w("feedbackDialog.submit"),
                    }),
                  ],
                }),
              ],
            }),
          ],
        })
      );
    }
    var N = l,
      E = e.i(418625);
    function A() {
      let {
          data: e,
          error: t,
          isLoading: n,
          mutate: r,
        } = (0, E.default)(
          "github:active-namespaces",
          async () => {
            try {
              let e = new URLSearchParams({ provider: "github" }),
                t = await fetch(
                  `/chat/api/git/search-namespaces?${e.toString()}`,
                );
              if (!t.ok) throw Error("Failed to search orgs");
              return await t.json();
            } catch {
              return [];
            }
          },
          { revalidateOnFocus: !0, revalidateOnMount: !0 },
        ),
        i = (0, N.useCallback)(() => r(), [r]);
      return {
        userNamespace: e?.userNamespace,
        orgNamespaces: e?.orgNamespaces || [],
        revalidate: i,
        verifiedGitHubUser: e?.user?.verified ? e.user : void 0,
        isLoading: n,
        error: t,
      };
    }
    e.s(["useActiveGitNamespaces", () => A], 320502);
  },
  469378,
  (e) => {
    "use strict";
    let t = (e) => crypto.getRandomValues(new Uint8Array(e)),
      n = (e, t, n) => {
        let r = (2 << (Math.log(e.length - 1) / Math.LN2)) - 1,
          i = -~((1.6 * r * t) / e.length);
        return (s = t) => {
          let a = "";
          for (;;) {
            let t = n(i),
              o = i;
            for (; o--; ) if ((a += e[t[o] & r] || "").length === s) return a;
          }
        };
      },
      r = (e, r = 21) => n(e, r, t);
    e.s(["customAlphabet", () => r], 469378);
  },
  917806,
  (e) => {
    "use strict";
    let t = new WeakMap(),
      n = new WeakSet(),
      r = new WeakMap();
    function i(e) {
      let t = "";
      for (let n = 0; n < e.length; n++) {
        let r = e.charCodeAt(n).toString(16);
        (r.length < 2 && (r = "0" + r), (t += r));
      }
      return BigInt("0x" + t).toString(36);
    }
    function s(e, t) {
      return e
        ? e
            .toLowerCase()
            .replace(/\s+/g, "-")
            .replace(/[^a-z0-9-]/g, "")
            .replace(/-+/g, "-")
            .substring(0, t)
            .replace(/^-+|-+$/g, "")
        : "";
    }
    function a(e, t, { disableLocalhost: n = !1, isPlatformAPI: r = !1 } = {}) {
      let o = i(e),
        l = s(t || "", 54 - o.length),
        u = "";
      if (
        ((u = r
          ? l
            ? `demo-${l}-${o}`
            : `demo-${o}`
          : l
            ? `preview-${l}-${o}`
            : `preview-${o}`),
        "generated.vusercontent.net".endsWith(".vercel.sh"))
      ) {
        let e = "generated.vusercontent.net".split(".");
        if (!e[0]) return c(`${u}.vusercontent.net`);
        let t = e[0].replace(/^v0-frame-render-engine-/g, "");
        return c(`${o}--${t}.dev-lite.vusercontent.net`);
      }
      return c(`${u}.vusercontent.net`);
    }
    function o(e) {
      return a(`vm:${e}`);
    }
    function l(e, { disableLocalhost: t = !1 } = {}) {
      let n = e
        .replace(/_/g, "--")
        .replace(/[^a-zA-Z0-9-]/g, "")
        .replace(/-+$/, "");
      if ("generated.vusercontent.net".endsWith(".vercel.sh")) {
        let e = "generated.vusercontent.net".split(".");
        if (!e[0]) return c(`g-${n}.vusercontent.net`);
        let t = e[0].replace(/^v0-frame-render-engine-/g, "");
        return c(`${t}--${n}.dev.vusercontent.net`);
      }
      return c(`g-${n}.vusercontent.net`);
    }
    function c(e) {
      let t = new URL("https://example.com");
      return ((t.hostname = e), t.origin);
    }
    function u(e, n) {
      if (!e) return;
      let r = t.get(e);
      (r ? r.push(n) : t.set(e, [n]), d(e));
    }
    function d(e) {
      if (!n.has(e)) return;
      let r = t.get(e);
      if (r) {
        for (let t of r)
          e.contentWindow?.postMessage(t, e.dataset.origin || "");
        r.length = 0;
      }
    }
    let h = [];
    function p(e, t) {
      let n = r.get(e) || Math.random().toString();
      return (
        r.set(e, n),
        h.push({ id: n, listener: t }),
        () => {
          let e = h.findIndex((e) => e.listener === t);
          e >= 0 && h.splice(e, 1);
        }
      );
    }
    {
      let e = (e) => {
        if (
          !(e.origin === l("any") || e.origin.endsWith(".vusercontent.net")) ||
          !e.source
        )
          return;
        let t = Array.from(document.querySelectorAll("iframe[data-v0]")).find(
          (t) => t instanceof HTMLIFrameElement && t.contentWindow === e.source,
        );
        if (!t) return;
        (n.add(t),
          d(t),
          window.debug && console.log("child event handler", e.data));
        let i = r.get(t);
        for (let t of h) i === t.id && t.listener(e.data);
      };
      window.addEventListener("message", e);
    }
    e.s([
      "getIframeOrigin",
      () => l,
      "getLiteIframeOrigin",
      () => a,
      "getVMIframeOrigin",
      () => o,
      "listenToIframe",
      () => p,
      "sendData",
      () => u,
    ]);
  },
  12052,
  (e) => {
    "use strict";
    var t = e.i(469378);
    e.i(917806);
    var n = e.i(858269);
    function r(e) {
      return e ? `v0-${(0, n.default)(e)}` : "";
    }
    ((0, t.customAlphabet)(
      "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
      24,
    ),
      e.s(["generateRepoName", () => r]));
  },
  758057,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(577247);
    let r = (e, t) => ({
      left: window.screenX + (window.outerWidth - e) / 2,
      top: window.screenY + (window.outerHeight - t) / 2,
    });
    function i({
      url: e,
      width: i = 600,
      height: s = 700,
      title: a = "Authentication",
      onClose: o,
      onMessage: l,
      onPoll: c,
    }) {
      let [u, d] = (0, t.useState)(null),
        [h, p] = (0, t.useState)(!1),
        m = (0, t.useCallback)(() => {
          if (u && !u.closed) return void u.focus();
          let { left: t, top: n } = r(i, s),
            o = window.open(
              e,
              a,
              `width=${i},height=${s},left=${t},top=${n},resizable=yes,scrollbars=yes,status=yes`,
            );
          o
            ? (d(o), p(!0))
            : console.error(
                "Failed to open popup. It might have been blocked by the browser.",
              );
        }, [e, a, i, s, u, r]),
        f = (0, t.useCallback)(() => {
          (u && !u.closed && u.close(), d(null), p(!1));
        }, [u]);
      return (
        (0, n.useMessage)((e) => {
          (l && l(e), e.data?.type === "auth-complete" && f());
        }),
        (0, t.useEffect)(() => {
          if (!u) return;
          let e = setInterval(() => {
            u.closed && (clearInterval(e), p(!1), d(null), o && o());
          }, 500);
          return () => {
            clearInterval(e);
          };
        }, [u, o]),
        (0, t.useEffect)(() => {
          if (!u || !c) return;
          let e = setInterval(() => {
            try {
              c(u);
            } catch (t) {
              (console.warn(
                "Error accessing popup window location, may be cross-origin:",
                t,
              ),
                clearInterval(e));
            }
          }, 500);
          return () => {
            clearInterval(e);
          };
        }, [u, c]),
        { isOpen: h, open: m, close: f, popupWindow: u }
      );
    }
    e.s(["usePopupWindow", () => i]);
  },
  674725,
  (e) => {
    "use strict";
    function t(e) {
      return window
        .btoa(e)
        .replace(/=/g, "")
        .replace(/\+/g, "-")
        .replace(/\//g, "_");
    }
    e.s(["encodeBase64URL", () => t]);
  },
  921,
  854329,
  316808,
  (e) => {
    "use strict";
    e.i(563948);
    var t = e.i(407562),
      n = e.i(908386),
      r = e.i(919012),
      i = (0, r.createServerReference)(
        "40b81079036f9e6548859b69a31f4a6b0c62270eb7",
        r.callServer,
        void 0,
        r.findSourceMapURL,
        "newProjectAction",
      );
    e.s(["newProjectAction", () => i], 854329);
    var s = r,
      a = (0, s.createServerReference)(
        "4020e2e9e23dc117d9fda7ac8144ec22a42b82530e",
        s.callServer,
        void 0,
        s.findSourceMapURL,
        "assignProjectToChat",
      );
    e.s(["assignProjectToChat", () => a], 316808);
    var o = e.i(387040);
    async function l(e) {
      let {
        projectName: r,
        chatId: s,
        onSuccess: l,
        includeSuccessToast: c = !0,
      } = e;
      if (e.existingProjectId) {
        let t = await (0, n.createNewVercelProject)({
          v0ProjectId: e.existingProjectId,
          name: r,
        });
        return t.ok
          ? (0, o.ok)({
              id: e.existingProjectId,
              vercelProjectId: t.value.id,
              name: t.value.name,
            })
          : t;
      }
      {
        let e = await i({ name: r, icon: "icon-wand-sparkles" });
        if (!e.ok)
          return (0, o.err)(
            "fieldErrors" in e.error
              ? (e.error.fieldErrors.name?.at(0) ?? "Failed to create project")
              : e.error.message,
          );
        if ((c && t.toast.success("Project created successfully"), s)) {
          let t = await a({ chatId: s, projectId: e.value.id });
          if (!t.ok)
            return (0, o.err)(
              `Failed to add chat to newly created project. Error: ${t.error}`,
            );
        }
        return (l?.(e.value.id), e);
      }
    }
    e.s(["createProject", () => l], 921);
  },
  144019,
  (e) => {
    "use strict";
    var t = e.i(921),
      n = e.i(387040),
      r = e.i(209819),
      i = e.i(885340);
    function s({ chatId: e, activeBlock: i }) {
      let {
        project: s,
        title: o,
        setMetadata: l,
        vercelProjectId: c,
      } = (0, r.useChatMetadata)();
      return async () => {
        if (!i || !e) return (0, n.err)("Invalid chat or block");
        if (c) return (0, n.ok)({ vercelProjectId: c });
        let r = a(i, o),
          u = await (0, t.createProject)({
            existingProjectId: s?.projectId,
            projectName: r,
            onSuccess: () => {},
            chatId: e,
            includeSuccessToast: !1,
          });
        return (
          u.ok &&
            (await l({
              vercelProjectId: u.value.vercelProjectId ?? null,
              project: {
                projectId: u.value.id,
                name: u.value.name,
                settings: { color: null, icon: "icon-wand-sparkles" },
                isCreator: !0,
                ...s,
              },
            })),
          u
        );
      };
    }
    function a(e, t) {
      let n = e?.meta.title ?? t;
      return (0, i.stripForkSuffix)(n);
    }
    e.s(["useAutoCreateProject", () => s]);
  },
  5295,
  378723,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Info", [
      ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
      ["path", { d: "M12 16v-4", key: "1dtifu" }],
      ["path", { d: "M12 8h.01", key: "e9boi3" }],
    ]);
    (e.s(["default", () => t], 378723), e.s(["InfoIcon", () => t], 5295));
  },
  926923,
  897850,
  518006,
  530740,
  337034,
  955930,
  (e) => {
    "use strict";
    e.s(["ConnectRepoDialog", () => N], 926923);
    var t = e.i(324834),
      n = e.i(576191);
    e.i(563948);
    var r = e.i(407562),
      i = e.i(320502),
      s = e.i(754853),
      a = e.i(209819),
      o = e.i(12052),
      l = e.i(183673),
      c = e.i(643312),
      u = e.i(176248),
      d = e.i(758057),
      h = e.i(120945);
    e.i(904347);
    var p = e.i(37737),
      m = e.i(686832),
      f = e.i(675120),
      g = e.i(762585),
      x = e.i(763480),
      v = e.i(607391),
      y = e.i(674725);
    (e.i(144019), e.i(707827), e.i(472428));
    var b = e.i(296900),
      j = e.i(449381),
      w = e.i(297239),
      C = e.i(667660),
      k = e.i(538553),
      S = e.i(86617);
    function N({ chatId: e, latestBlockId: r }) {
      let { hasVercelWritePermission: i } = (0, C.useActiveScope)(),
        {
          stage: a,
          isSigningIn: o,
          isInstallingApp: l,
          openSignIn: c,
          openInstallApp: d,
          error: y,
          isCreatingRepo: b,
          handleCreateRepo: j,
          repoName: S,
          setRepoName: N,
          userNamespace: D,
        } = A(e, r),
        I = (0, w.useT)(),
        M = (0, n.useMemo)(() => {
          switch (a) {
            case "loading":
              return {
                title: (0, t.jsx)(g.Skeleton, {
                  className: "h-[26px] w-[180px]",
                }),
                description: (0, t.jsxs)("div", {
                  className: "flex flex-col gap-2",
                  children: [
                    (0, t.jsx)(g.Skeleton, { className: "h-[14px] w-full" }),
                    (0, t.jsx)(g.Skeleton, { className: "h-[14px] w-[75%]" }),
                  ],
                }),
                actions: (0, t.jsx)(E, {
                  children: (0, t.jsx)(g.Skeleton, { className: "h-7 w-24" }),
                }),
              };
            case "login":
              return {
                title: "Sign in with GitHub",
                description:
                  "To connect this project to a GitHub repository, you need to sign in with your GitHub account",
                actions: (0, t.jsxs)(E, {
                  children: [
                    (0, t.jsx)(u.Button, {
                      size: "sm",
                      onClick: p.closeDialog,
                      disabled: o,
                      variant: "outline",
                      children: "Cancel",
                    }),
                    (0, t.jsx)(u.Button, {
                      size: "sm",
                      onClick: c,
                      disabled: o,
                      children: (0, t.jsx)(v.ActionStatus, {
                        isLoading: o,
                        loading: "Signing in",
                        children: "Sign in",
                      }),
                    }),
                  ],
                }),
              };
            case "install-app":
              return {
                title: "Install GitHub App",
                description:
                  "Install Vercel GitHub App on your personal GitHub account to create a repository.",
                actions: (0, t.jsxs)(E, {
                  children: [
                    (0, t.jsx)(u.Button, {
                      size: "sm",
                      onClick: p.closeDialog,
                      disabled: l,
                      variant: "outline",
                      children: "Cancel",
                    }),
                    (0, t.jsx)(u.Button, {
                      size: "sm",
                      onClick: d,
                      disabled: l,
                      children: (0, t.jsx)(v.ActionStatus, {
                        isLoading: l,
                        loading: "Installing App",
                        children: "Install Vercel App",
                      }),
                    }),
                  ],
                }),
              };
            case "create-repo":
              return {
                title: "Connect to GitHub Repository",
                description: (0, t.jsxs)("span", {
                  children: [
                    "Create a new repository on GitHub to push changes to. v0 will push your code to the",
                    " ",
                    (0, t.jsx)("code", {
                      className:
                        "text-label-13-mono border-v0-alpha-400 rounded-sm border bg-v0-gray-100 px-1.5 py-0.5",
                      children: "main",
                    }),
                    " ",
                    "branch, and create a new branch to push changes to.",
                  ],
                }),
                content: (0, t.jsx)(k.RbacTooltip, {
                  show: !i,
                  requiredRole: "V0Builder",
                  children: (0, t.jsx)(x.Input, {
                    label: "Repository Name",
                    id: "repo-name",
                    placeholder: "Repository Name",
                    value: S,
                    onChange: (e) => N(e.target.value),
                    onKeyDown: (e) => {
                      "Enter" === e.key && (e.preventDefault(), j());
                    },
                    disabled: !i,
                  }),
                }),
                actions: (0, t.jsxs)(E, {
                  children: [
                    (0, t.jsx)(u.Button, {
                      size: "sm",
                      onClick: p.closeDialog,
                      variant: "outline",
                      disabled: b,
                      children: "Cancel",
                    }),
                    (0, t.jsx)(k.RbacTooltip, {
                      show: !i,
                      requiredRole: "V0Builder",
                      children: (0, t.jsx)(u.Button, {
                        size: "sm",
                        onClick: j,
                        disabled: b || !i || !S || !D,
                        className: "overflow-hidden",
                        children: (0, t.jsx)(v.ActionStatus, {
                          isLoading: b,
                          loading: "Creating Repository",
                          children: I(
                            "gitSync.createRepo.createRepositoryButton",
                          ),
                        }),
                      }),
                    }),
                  ],
                }),
              };
          }
        }, [a, c, o, d, l, S, b, j, N, i]);
      return (0, t.jsxs)(h.AtomicDialog, {
        type: "connectRepo",
        forceOpen: o || l || b,
        children: [
          (0, t.jsxs)(m.ModalHeader, {
            children: [
              (0, t.jsx)("div", {
                className:
                  "border-v0-gray-300 material-medium mb-2 flex w-min items-center justify-center justify-self-center rounded-lg border p-2 md:justify-self-start",
                children: (0, t.jsx)(s.GitHubLogoIcon, {
                  className: "h-6 w-6",
                }),
              }),
              (0, t.jsx)(f.TransitionNode, {
                ...f.PRESETS.modalSection,
                renderKey: a,
                children: (0, t.jsx)(m.ModalTitle, { children: M.title }),
              }),
              (0, t.jsx)(f.TransitionNode, {
                ...f.PRESETS.modalSection,
                renderKey: a,
                children: (0, t.jsx)(m.ModalDescription, {
                  children: M.description,
                }),
              }),
            ],
          }),
          (0, t.jsx)(m.ModalContent, {
            children: (0, t.jsx)(f.TransitionNode, {
              ...f.PRESETS.modalSection,
              renderKey: `${a}-${y}`,
              children: (0, t.jsxs)("div", {
                className: "flex w-full flex-col gap-2",
                children: [
                  M.content,
                  y
                    ? (0, t.jsx)("div", {
                        className:
                          "rounded-md border border-v0-red-300 bg-v0-red-200 px-4 py-3 text-sm text-v0-red-800",
                        children: y,
                      })
                    : null,
                ],
              }),
            }),
          }),
          (0, t.jsx)(m.ModalFooter, {
            children: (0, t.jsx)(f.TransitionNode, {
              ...f.PRESETS.modalSection,
              renderKey: a,
              children: M.actions,
            }),
          }),
        ],
      });
    }
    function E({ children: e }) {
      return (0, t.jsx)("div", {
        className: "flex w-full justify-end gap-2",
        children: e,
      });
    }
    function A(e, u) {
      let { project: h, title: m } = (0, a.useChatMetadata)(e),
        { revalidate: f } = (0, b.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: e },
          { stopFetch: !e },
        ),
        g = (0, j.useActiveBlockState)(e),
        { mutate: x } = (0, S.useGitConnection)(e),
        { projectId: v = h?.projectId } = (0, l.useProjectId)(),
        { projectName: C = h?.name } = (0, l.useProjectName)(),
        { vercelProject: k, refetch: N } = (0, c.useIntegrationsApi)(),
        E = k?.dashboardProject?.link,
        {
          userNamespace: A,
          verifiedGitHubUser: D,
          isLoading: I,
          revalidate: M,
        } = (0, i.useActiveGitNamespaces)(),
        T = (0, w.useT)(),
        [L, P] = (0, n.useState)("loading"),
        [R, F] = (0, n.useState)(!1),
        [_, O] = (0, n.useState)(!1),
        [B, V] = (0, n.useState)(!1),
        z = (0, n.useRef)(!1),
        [H, $] = (0, n.useState)(null),
        [U, G] = (0, n.useState)((0, o.generateRepoName)(C || m)),
        W = (0, n.useMemo)(
          () =>
            E?.org && E.repo ? `https://github.com/${E.org}/${E.repo}` : void 0,
          [E?.org, E?.repo],
        );
      (0, n.useEffect)(() => {
        if (E) {
          ((0, p.closeDialog)(),
            z.current ||
              (r.toast.default("GitHub Connected", {
                description: "Click to view your repository",
                icon: (0, t.jsx)(s.GitHubLogoIcon, { className: "h-6 w-6" }),
                action: W
                  ? {
                      children: "View",
                      onClick: () => {
                        window.open(W, "_blank");
                      },
                    }
                  : void 0,
              }),
              (z.current = !0)));
          return;
        }
        if (!I) {
          if (!D) return void P("login");
          if (!A) return void P("install-app");
          (P("create-repo"), G((0, o.generateRepoName)(C || m)));
        }
      }, [E, I, W, C, m, A, D]);
      let q = (0, n.useCallback)(async () => {
          try {
            if ((F(!0), !v))
              return void r.toast.error("Chat needs to be in a project");
            if (!(A?.name && A.ownerType))
              return void r.toast.error(
                T("gitSync.createRepo.repoOwnerNotSpecified"),
              );
            let t = g?.id,
              n = await fetch("/chat/api/git/connect", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  owner: A.name,
                  repoName: U,
                  projectId: v,
                  blockId: t || u,
                  chatId: e,
                  from: "dialog",
                }),
              });
            if (!n.ok) {
              let e = await n.json(),
                t = "Failed to create repository.";
              throw (
                "repo_alr_exists" === e.error &&
                  (t = "Repository already exists. Try a new name."),
                Error(t)
              );
            }
            await Promise.all([N(), f(), x()]);
          } catch (t) {
            let e =
              t instanceof Error ? t.message : "Failed to create repository";
            ($(e), r.toast.error(e));
          } finally {
            F(!1);
          }
        }, [v, A?.name, A?.ownerType, g?.id, U, u, e, N, f, T]),
        Z = "/chat/git/connected",
        K = window.location.origin + "/chat/git/callback",
        Y = `https://vercel.com/api/registration/login-with-github?next=${encodeURIComponent(K)}`,
        J = { next: `${window.location.origin}/github/installed` },
        Q = (0, y.encodeBase64URL)(JSON.stringify(J)),
        X = D
          ? `https://github.com/apps/vercel/installations/select_target?state=${encodeURIComponent(Q)}`
          : "",
        ee = (0, n.useCallback)(
          async (e) => {
            (await M(), e());
          },
          [M],
        ),
        { open: et } = (0, d.usePopupWindow)({
          url: Y,
          onPoll: (e) => {
            e.location.pathname === Z &&
              ee(() => {
                (e.close(), O(!1));
              });
          },
          onClose: () => {
            ee(() => {
              O(!1);
            });
          },
        }),
        { open: en } = (0, d.usePopupWindow)({
          url: X,
          onPoll: (e) => {
            (console.log("popupWindow", e.location.pathname, Z),
              e.location.pathname === Z &&
                ee(() => {
                  (e.close(), V(!1));
                }));
          },
          onClose: () => {
            ee(() => {
              V(!1);
            });
          },
        });
      return {
        stage: L,
        setStage: P,
        error: H,
        repoName: U,
        setRepoName: G,
        isCreatingRepo: R,
        isSigningIn: _,
        isInstallingApp: B,
        handleCreateRepo: q,
        openSignIn: function () {
          (O(!0), et());
        },
        openInstallApp: function () {
          (V(!0), en());
        },
        userNamespace: A,
      };
    }
    var D = C;
    function I({ role: e, plan: t }) {
      let {
          user: n,
          isTeam: r,
          isActiveScopeReady: i,
        } = (0, D.useActiveScope)(),
        s = e || n?.teamRole,
        a = t || n?.v0plan,
        o = !i && (!e || !t);
      return i && !r
        ? {
            isLoading: o,
            needsToRequestCredits: !1,
            shouldInvoice: !1,
            canBuyCredits: "v0-level0" !== a,
          }
        : {
            canBuyCredits: "v0-level0" !== a,
            needsToRequestCredits: "OWNER" !== s && "BILLING" !== s,
            shouldInvoice: "v0-enterprise" === a,
            isLoading: o,
          };
    }
    e.s(["useCanBuyCredits", () => I], 897850);
    var M = n,
      T = function () {
        return (T = Object.assign).apply(this, arguments);
      };
    function L(e, t) {
      var n = {};
      for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) &&
          0 > t.indexOf(r) &&
          (n[r] = e[r]);
      if (null != e && "function" == typeof Object.getOwnPropertySymbols)
        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
          0 > t.indexOf(r[i]) &&
            Object.prototype.propertyIsEnumerable.call(e, r[i]) &&
            (n[r[i]] = e[r[i]]);
      return n;
    }
    function P(e, t, n) {
      if (n || 2 == arguments.length)
        for (var r, i = 0, s = t.length; i < s; i++)
          (!r && i in t) ||
            (r || (r = Array.prototype.slice.call(t, 0, i)), (r[i] = t[i]));
      return e.concat(r || Array.prototype.slice.call(t));
    }
    "function" == typeof SuppressedError && SuppressedError;
    var R = function (e) {
        return e.replace(/[-/\\^$*+?.()|[\]{}]/g, "\\$&");
      },
      F = { k: 1e3, m: 1e6, b: 1e9 },
      _ = function (e, t) {
        void 0 === t && (t = ".");
        var n = RegExp("(\\d+(".concat(R(t), "\\d*)?)([kmb])$"), "i"),
          r = e.match(n);
        if (r) {
          var i = r[1],
            s = F[r[3].toLowerCase()];
          return Number(i.replace(t, ".")) * s;
        }
      },
      O = function (e, t) {
        void 0 === t && (t = ",");
        var n = RegExp(R(t), "g");
        return e.replace(n, "");
      },
      B = function (e, t) {
        var n = R(t.join("")),
          r = RegExp("[^\\d".concat(n, "]"), "gi");
        return e.replace(r, "");
      },
      V = function (e) {
        var t = e.value,
          n = e.groupSeparator,
          r = void 0 === n ? "," : n,
          i = e.decimalSeparator,
          s = void 0 === i ? "." : i,
          a = e.allowDecimals,
          o = void 0 === a || a,
          l = e.decimalsLimit,
          c = void 0 === l ? 2 : l,
          u = e.allowNegativeValue,
          d = void 0 === u || u,
          h = e.disableAbbreviations,
          p = void 0 !== h && h,
          m = e.prefix,
          f = void 0 === m ? "" : m,
          g = e.transformRawValue,
          x = (
            void 0 === g
              ? function (e) {
                  return e;
                }
              : g
          )(t);
        if ("-" === x) return x;
        var v = p ? [] : ["k", "m", "b"],
          y = new RegExp("((^|\\D)-\\d)|(-".concat(R(f), ")")).test(x),
          b = RegExp("(\\d+)-?".concat(R(f))).exec(t) || [],
          j = b[0],
          w = b[1],
          C = B(
            O(f ? (j ? x.replace(j, "").concat(w) : x.replace(f, "")) : x, r),
            P([r, s], v, !0),
          ),
          k = C;
        if (!p) {
          if (
            v.some(function (e) {
              return e === C.toLowerCase().replace(s, "");
            })
          )
            return "";
          var S = _(C, s);
          S && (k = String(S));
        }
        var N = y && d ? "-" : "";
        if (s && k.includes(s)) {
          var E = C.split(s),
            A = E[0],
            D = E[1],
            I = c && D ? D.slice(0, c) : D,
            M = o ? "".concat(s).concat(I) : "";
          return "".concat(N).concat(A).concat(M);
        }
        return "".concat(N).concat(k);
      },
      z = function (e, t, n) {
        if (void 0 !== n && e.length > 1) {
          if (0 === n) return e.replace(t, "");
          if (e.includes(t)) {
            var r = e.split(t),
              i = r[0],
              s = r[1];
            if (s.length === n) return e;
            if (s.length > n)
              return "".concat(i).concat(t).concat(s.slice(0, n));
          }
          var a =
              e.length > n
                ? new RegExp("(\\d+)(\\d{".concat(n, "})"))
                : RegExp("(\\d)(\\d+)"),
            o = e.match(a);
          if (o) {
            var i = o[1],
              s = o[2];
            return "".concat(i).concat(t).concat(s);
          }
        }
        return e;
      },
      H = function (e, t) {
        var n = t.groupSeparator,
          r = void 0 === n ? "," : n,
          i = t.decimalSeparator,
          s = void 0 === i ? "." : i,
          a = new RegExp("\\d([^".concat(R(r)).concat(R(s), "0-9]+)")),
          o = e.match(a);
        return o ? o[1] : void 0;
      },
      $ = function (e) {
        var t = e.value,
          n = e.decimalSeparator,
          r = e.intlConfig,
          i = e.decimalScale,
          s = e.prefix,
          a = void 0 === s ? "" : s,
          o = e.suffix,
          l = void 0 === o ? "" : o;
        if ("" === t || void 0 === t) return "";
        if ("-" === t) return "-";
        var c = new RegExp(
            "^\\d?-".concat(a ? "".concat(R(a), "?") : "", "\\d"),
          ).test(t),
          u = "." !== n ? U(t, n, c) : t;
        n && "-" !== n && u.startsWith(n) && (u = "0" + u);
        var d = r || {},
          h = d.locale,
          p = d.currency,
          m = L(d, ["locale", "currency"]),
          f = T(T({}, m), {
            minimumFractionDigits: i || 0,
            maximumFractionDigits: 20,
          }),
          g = G(
            (r
              ? new Intl.NumberFormat(
                  h,
                  T(T({}, f), p && { style: "currency", currency: p }),
                )
              : new Intl.NumberFormat(void 0, f)
            ).formatToParts(Number(u)),
            e,
          ),
          x = H(g, T({}, e)),
          v = t.slice(-1) === n ? n : "",
          y = (u.match(RegExp("\\d+\\.(\\d+)")) || [])[1];
        return (void 0 === i &&
          y &&
          n &&
          (g = g.includes(n)
            ? g.replace(
                RegExp("(\\d+)(".concat(R(n), ")(\\d+)"), "g"),
                "$1$2".concat(y),
              )
            : x && !l
              ? g.replace(x, "".concat(n).concat(y).concat(x))
              : "".concat(g).concat(n).concat(y)),
        l && v)
          ? "".concat(g).concat(v).concat(l)
          : x && v
            ? g.replace(x, "".concat(v).concat(x))
            : x && l
              ? g.replace(x, "".concat(v).concat(l))
              : [g, v, l].join("");
      },
      U = function (e, t, n) {
        var r = e;
        return (
          t &&
            "." !== t &&
            ((r = r.replace(RegExp(R(t), "g"), ".")),
            n && "-" === t && (r = "-".concat(r.slice(1)))),
          r
        );
      },
      G = function (e, t) {
        var n = t.prefix,
          r = t.groupSeparator,
          i = t.decimalSeparator,
          s = t.decimalScale,
          a = t.disableGroupSeparators,
          o = void 0 !== a && a;
        return e
          .reduce(
            function (e, t, a) {
              var l = t.type,
                c = t.value;
              return 0 === a && n
                ? "minusSign" === l
                  ? [c, n]
                  : "currency" === l
                    ? P(P([], e, !0), [n], !1)
                    : [n, c]
                : "currency" === l
                  ? n
                    ? e
                    : P(P([], e, !0), [c], !1)
                  : "group" === l
                    ? o
                      ? e
                      : P(P([], e, !0), [void 0 !== r ? r : c], !1)
                    : "decimal" === l
                      ? void 0 !== s && 0 === s
                        ? e
                        : P(P([], e, !0), [void 0 !== i ? i : c], !1)
                      : "fraction" === l
                        ? P(
                            P([], e, !0),
                            [void 0 !== s ? c.slice(0, s) : c],
                            !1,
                          )
                        : P(P([], e, !0), [c], !1);
            },
            [""],
          )
          .join("");
      },
      W = {
        currencySymbol: "",
        groupSeparator: "",
        decimalSeparator: "",
        prefix: "",
        suffix: "",
      },
      q = function (e) {
        var t = e || {},
          n = t.locale,
          r = t.currency,
          i = L(t, ["locale", "currency"]);
        return (
          n
            ? new Intl.NumberFormat(
                n,
                T(T({}, i), r && { currency: r, style: "currency" }),
              )
            : new Intl.NumberFormat()
        )
          .formatToParts(1000.1)
          .reduce(function (e, t, n) {
            if ("currency" === t.type)
              if (0 === n)
                return T(T({}, e), {
                  currencySymbol: t.value,
                  prefix: t.value,
                });
              else
                return T(T({}, e), {
                  currencySymbol: t.value,
                  suffix: t.value,
                });
            return "group" === t.type
              ? T(T({}, e), { groupSeparator: t.value })
              : "decimal" === t.type
                ? T(T({}, e), { decimalSeparator: t.value })
                : e;
          }, W);
      },
      Z = function (e) {
        return RegExp(/\d/, "gi").test(e);
      },
      K = function (e, t, n) {
        if (
          void 0 === n ||
          "" === t ||
          void 0 === t ||
          "" === e ||
          void 0 === e
        )
          return e;
        if (!e.match(/\d/g)) return "";
        var r = e.split(t),
          i = r[0],
          s = r[1];
        if (0 === n) return i;
        var a = s || "";
        if (a.length < n) for (; a.length < n; ) a += "0";
        else a = a.slice(0, n);
        return "".concat(i).concat(t).concat(a);
      },
      Y = function (e) {
        var t = e.selectionStart,
          n = e.value,
          r = e.lastKeyStroke,
          i = e.stateValue,
          s = e.groupSeparator,
          a = t,
          o = n;
        if (i && a) {
          var l = n.split("");
          return (
            "Backspace" === r && i[a] === s && (l.splice(a - 1, 1), (a -= 1)),
            "Delete" === r && i[a] === s && (l.splice(a, 1), (a += 1)),
            { modifiedValue: (o = l.join("")), cursorPosition: a }
          );
        }
        return { modifiedValue: o, cursorPosition: t };
      },
      J = (0, M.forwardRef)(function (e, t) {
        var n = e.allowDecimals,
          r = void 0 === n || n,
          i = e.allowNegativeValue,
          s = void 0 === i || i,
          a = e.id,
          o = e.name,
          l = e.className,
          c = e.customInput,
          u = e.decimalsLimit,
          d = e.defaultValue,
          h = e.disabled,
          p = void 0 !== h && h,
          m = e.maxLength,
          f = e.value,
          g = e.onValueChange,
          x = e.fixedDecimalLength,
          v = e.placeholder,
          y = e.decimalScale,
          b = e.prefix,
          j = e.suffix,
          w = e.intlConfig,
          C = e.step,
          k = e.min,
          S = e.max,
          N = e.disableGroupSeparators,
          E = void 0 !== N && N,
          A = e.disableAbbreviations,
          D = void 0 !== A && A,
          I = e.decimalSeparator,
          P = e.groupSeparator,
          R = e.onChange,
          F = e.onFocus,
          _ = e.onBlur,
          O = e.onKeyDown,
          B = e.onKeyUp,
          U = e.transformRawValue,
          G = e.formatValueOnBlur,
          W = void 0 === G || G,
          J = L(e, [
            "allowDecimals",
            "allowNegativeValue",
            "id",
            "name",
            "className",
            "customInput",
            "decimalsLimit",
            "defaultValue",
            "disabled",
            "maxLength",
            "value",
            "onValueChange",
            "fixedDecimalLength",
            "placeholder",
            "decimalScale",
            "prefix",
            "suffix",
            "intlConfig",
            "step",
            "min",
            "max",
            "disableGroupSeparators",
            "disableAbbreviations",
            "decimalSeparator",
            "groupSeparator",
            "onChange",
            "onFocus",
            "onBlur",
            "onKeyDown",
            "onKeyUp",
            "transformRawValue",
            "formatValueOnBlur",
          ]);
        if (I && Z(I)) throw Error("decimalSeparator cannot be a number");
        if (P && Z(P)) throw Error("groupSeparator cannot be a number");
        var Q = (0, M.useMemo)(
            function () {
              return q(w);
            },
            [w],
          ),
          X = I || Q.decimalSeparator || "",
          ee = P || Q.groupSeparator || "";
        if (X && ee && X === ee && !1 === E)
          throw Error("decimalSeparator cannot be the same as groupSeparator");
        var et = {
            decimalSeparator: X,
            groupSeparator: ee,
            disableGroupSeparators: E,
            intlConfig: w,
            prefix: b || Q.prefix,
            suffix: j,
          },
          en = {
            decimalSeparator: X,
            groupSeparator: ee,
            allowDecimals: r,
            decimalsLimit: u || x || 2,
            allowNegativeValue: s,
            disableAbbreviations: D,
            prefix: b || Q.prefix,
            transformRawValue: U,
          },
          er = (0, M.useState)(function () {
            return null != d
              ? $(T(T({}, et), { decimalScale: y, value: String(d) }))
              : null != f
                ? $(T(T({}, et), { decimalScale: y, value: String(f) }))
                : "";
          }),
          ei = er[0],
          es = er[1],
          ea = (0, M.useState)(!1),
          eo = ea[0],
          el = ea[1],
          ec = (0, M.useState)(0),
          eu = ec[0],
          ed = ec[1],
          eh = (0, M.useState)(0),
          ep = eh[0],
          em = eh[1],
          ef = (0, M.useState)(null),
          eg = ef[0],
          ex = ef[1],
          ev = (0, M.useRef)(null);
        (0, M.useImperativeHandle)(t, function () {
          return ev.current;
        });
        var ey = function (e, t) {
            el(!0);
            var n = Y({
                selectionStart: t,
                value: e,
                lastKeyStroke: eg,
                stateValue: ei,
                groupSeparator: ee,
              }),
              r = n.modifiedValue,
              i = n.cursorPosition,
              s = V(T({ value: r }, en));
            if (!m || !(s.replace(/-/g, "").length > m)) {
              if ("" === s || "-" === s || s === X) {
                (g && g(void 0, o, { float: null, formatted: "", value: "" }),
                  es(s),
                  ed(1));
                return;
              }
              var a = X ? s.replace(X, ".") : s,
                l = parseFloat(a),
                c = $(T({ value: s }, et));
              if (null != i) {
                var u = i + (c.length - e.length);
                (ed((u = u <= 0 ? (b ? b.length : 0) : u)), em(ep + 1));
              }
              if ((es(c), g)) {
                var d = { float: l, formatted: c, value: s };
                g(s, o, d);
              }
            }
          },
          eb = function (e) {
            var t = e.target;
            (ey(t.value, t.selectionStart), R && R(e));
          },
          ej = function (e) {
            return (F && F(e), ei ? ei.length : 0);
          },
          ew = function (e) {
            var t = e.target.value,
              n = V(T({ value: t }, en));
            if ("-" === n || n === X || !n) {
              (es(""), _ && _(e));
              return;
            }
            var r = K(z(n, X, x), X, void 0 !== y ? y : x),
              i = parseFloat(X ? r.replace(X, ".") : r),
              s = $(T(T({}, et), { value: r }));
            (g && W && g(r, o, { float: i, formatted: s, value: r }),
              es(s),
              _ && _(e));
          },
          eC = function (e) {
            var t = e.key;
            if ((ex(t), C && ("ArrowUp" === t || "ArrowDown" === t))) {
              (e.preventDefault(), ed(ei.length));
              var n = null != f ? String(f) : void 0,
                r = X && n ? n.replace(X, ".") : n,
                i = parseFloat(null != r ? r : V(T({ value: ei }, en))) || 0,
                a = "ArrowUp" === t ? i + C : i - C;
              if (
                (void 0 !== k && a < Number(k)) ||
                (!s && a < 0) ||
                (void 0 !== S && a > Number(S))
              )
                return;
              var o = String(C).includes(".")
                ? Number(String(C).split(".")[1].length)
                : void 0;
              ey(String(o ? a.toFixed(o) : a).replace(".", X));
            }
            O && O(e);
          },
          ek = function (e) {
            var t = e.key,
              n = e.currentTarget.selectionStart;
            if ("ArrowUp" !== t && "ArrowDown" !== t && "-" !== ei) {
              var r = H(ei, { groupSeparator: ee, decimalSeparator: X });
              if (r && n && n > ei.length - r.length && ev.current) {
                var i = ei.length - r.length;
                ev.current.setSelectionRange(i, i);
              }
            }
            B && B(e);
          };
        ((0, M.useEffect)(
          function () {
            null == f && null == d && es("");
          },
          [d, f],
        ),
          (0, M.useEffect)(
            function () {
              eo &&
                "-" !== ei &&
                ev.current &&
                document.activeElement === ev.current &&
                ev.current.setSelectionRange(eu, eu);
            },
            [ei, eu, ev, eo, ep],
          ));
        var eS = function () {
            return null == f || "-" === ei || (X && ei === X)
              ? ei
              : $(
                  T(T({}, et), {
                    decimalScale: eo ? void 0 : y,
                    value: String(f),
                  }),
                );
          },
          eN = T(
            {
              type: "text",
              inputMode: "decimal",
              id: a,
              name: o,
              className: l,
              onChange: eb,
              onBlur: ew,
              onFocus: ej,
              onKeyDown: eC,
              onKeyUp: ek,
              placeholder: v,
              disabled: p,
              value: eS(),
              ref: ev,
            },
            J,
          );
        if (c) {
          var eE = c;
          return M.default.createElement(eE, T({}, eN));
        }
        return M.default.createElement("input", T({}, eN));
      });
    ((J.displayName = "CurrencyInput"), e.s(["default", () => J], 518006));
    var Q = t,
      X = e.i(654335);
    function ee(e) {
      switch (e) {
        case "v0-level0":
          return {
            toolTipMonthly:
              "These credits are issued monthly with your free plan. They do not roll over.",
            toolTipBuyMore: (e) =>
              (0, Q.jsxs)(Q.Fragment, {
                children: [
                  "You can't purchase or consume purchased credits on a free plan.",
                  " ",
                  (0, Q.jsx)(X.default, {
                    href: e ? "" : "/chat/upgrade",
                    onClick: e,
                    className: "text-gray underline",
                    children: "Upgrade Plan",
                  }),
                ],
              }),
          };
        case "v0-level3":
          return {
            toolTipMonthly:
              "These credits are issued monthly with your Premium plan. They do not roll over.",
            toolTipBuyMore: () =>
              (0, Q.jsxs)(Q.Fragment, {
                children: [
                  "Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase.",
                  " ",
                  (0, Q.jsx)(X.default, {
                    href: "/pricing",
                    className: "text-gray underline",
                    children: "Learn more",
                  }),
                ],
              }),
          };
        case "v0-team":
          return {
            toolTipMonthly:
              "These credits are issued monthly with your Team plan. They do not roll over.",
            toolTipBuyMore: () =>
              (0, Q.jsxs)(Q.Fragment, {
                children: [
                  "Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team.",
                  " ",
                  (0, Q.jsx)(X.default, {
                    href: "/pricing",
                    className: "text-gray underline",
                    children: "Learn more",
                  }),
                ],
              }),
          };
        case "v0-enterprise":
          return {
            toolTipMonthly:
              "These credits are issued monthly with your Enterprise plan. They do not roll over.",
            toolTipBuyMore: () =>
              (0, Q.jsxs)(Q.Fragment, {
                children: [
                  "Buy more credits to pay for more v0 usage outside of your monthly credit limit. These credits expire a year after purchase. Unlike monthly credits, they're shared amongst all members of the team.",
                  " ",
                  (0, Q.jsx)(X.default, {
                    href: "/pricing",
                    className: "text-gray underline",
                    children: "Learn more",
                  }),
                ],
              }),
          };
        default:
          return {
            toolTipMonthly:
              "These credits are issued monthly with your plan. They do not roll over.",
            toolTipBuyMore: (e) =>
              (0, Q.jsxs)(Q.Fragment, {
                children: [
                  "You can't purchase additional credits on a free plan.",
                  " ",
                  (0, Q.jsx)(X.default, {
                    href: e ? "" : "/chat/upgrade",
                    onClick: e,
                    className: "text-gray underline",
                    children: "Upgrade Plan",
                  }),
                ],
              }),
          };
      }
    }
    e.s(["getCreditBalanceToolTipContent", () => ee], 530740);
    var et = t,
      en = n;
    let er = (0, et.jsxs)("svg", {
      width: "28",
      height: "22",
      viewBox: "0 0 28 22",
      fill: "none",
      xmlns: "http://www.w3.org/2000/svg",
      className: "w-7 h-5.5 scale-110",
      children: [
        (0, et.jsx)("g", {
          clipPath: "url(#clip0_14095_2055)",
          children: (0, et.jsx)("g", {
            style: { mixBlendMode: "multiply" },
            opacity: "0.6",
            children: (0, et.jsx)("path", {
              d: "M22.8902 14.5326C22.4927 14.799 22.0139 14.9541 21.4995 14.9541L16.4995 14.9535C15.1189 14.9533 14.0002 13.8343 14.0002 12.4537L13.9996 7.99959L11.9996 7.99994L12 13.0478C11.9996 14.6842 9.95272 15.4251 8.90499 14.1679L3.76523 8.00031L-1.0004 7.9998L-1.0001 6.9998L4.23428 6.99948L4.38364 7.17921L9.67373 13.5275C10.1228 14.0659 10.9997 13.7485 11 13.0475L10.9999 6.99963L13.9999 6.99959L14.0008 4.00057L-0.9992 3.9998L-0.998901 2.9998L14.0001 3.00154L14 -0.000410978L15 -9.95465e-05L15.0001 3.00185L15.5001 3.00006L19.0001 3.00017C20.3806 3.00012 21.4997 1.88046 21.4999 0.499972L21.4995 -1.50003L22.0005 -1.50085L22.5005 -1.49972L22.4999 0.499306C22.4999 2.43224 20.9327 4.00007 18.9998 4.00017L15.5008 4.00006L15.0008 4.00088L14.9999 6.9999L21.4999 6.99997C22.3227 7.00001 23.0509 7.3988 23.5064 8.01232L32.0704 3.06772L32.5702 3.93311L23.93 8.92163C23.974 9.10738 24.0001 9.30056 24.0001 9.49977L24.0002 12.4539C24.0002 12.9527 23.8531 13.4171 23.6014 13.8073L31.2834 19.088L30.7167 19.912L22.8902 14.5326ZM22.6323 8.5179C22.3572 8.20098 21.9522 7.99997 21.4996 7.99997L14.9996 7.9999L15.0002 12.454C15.0002 12.6046 15.0233 12.7495 15.0646 12.8866L22.6323 8.5179ZM21.4998 13.9541C22.3282 13.9541 23.0002 13.282 23.0002 12.4536L23.0001 9.49946C23.0001 9.48606 22.9985 9.47274 22.9982 9.45942L15.66 13.6964C15.8997 13.8587 16.1885 13.9535 16.4998 13.9535L21.4998 13.9541ZM6.49955 18.0002C6.49941 16.6196 5.38073 15.4996 4.00029 15.4994L-0.999707 15.4998L-1.00038 14.4998L3.99962 14.4994C5.93247 14.4994 7.49923 16.0668 7.49955 17.9995L7.50001 22.9995L6.5 23.0002L6.49955 18.0002ZM24.5003 21.9999C24.5001 20.6194 23.3806 19.5002 22.0001 19.5001L15.5001 19.5001C14.1194 19.5001 13.0003 20.6195 13.0003 22.0003L13.0002 22.5003L12.0002 22.4999L12.0003 21.9999C12.0004 20.067 13.5674 18.5001 15.5004 18.5001L22.0004 18.5001C23.9332 18.5003 25.5002 20.0675 25.5003 22.0002L25.4998 27.0002L24.4998 26.9999L24.5003 21.9999Z",
              fill: "black",
            }),
          }),
        }),
        (0, et.jsx)("defs", {
          children: (0, et.jsx)("clipPath", {
            id: "clip0_14095_2055",
            children: (0, et.jsx)("rect", {
              width: "27.9959",
              height: "22",
              rx: "4",
              transform:
                "matrix(-1 -0.000311431 0.00029884 -1 27.9961 22.0088)",
              fill: "white",
            }),
          }),
        }),
      ],
    });
    function ei() {
      return (0, et.jsx)("div", {
        className: "bg-v0-black p-0.25 rounded-[5px]",
        children: (0, et.jsxs)("div", {
          className:
            "w-[28px] h-[22px] bg-gradient-to-br from-gray-200 via-gray-300 to-gray-500 dark:from-gray-700 dark:via-gray-900 dark:to-gray-600 rounded-[4px] shadow-[0_0_5px_rgba(0,0,0,0.5),0_0_3px_rgba(255,255,255,0.9)] ring-1 ring-black/10 relative overflow-hidden",
          children: [
            (0, et.jsx)("div", {
              className:
                "absolute inset-0 border border-white/60 rounded-[4px] mix-blend-mode-screen pointer-events-none",
            }),
            (0, et.jsx)("div", {
              className:
                "absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-md",
            }),
            (0, et.jsx)("div", {
              className: "absolute inset-0 shadow-inner rounded-md",
            }),
            (0, et.jsx)("div", {
              className: "absolute inset-0 flex items-center justify-center",
              children: er,
            }),
          ],
        }),
      });
    }
    function es({ amount: e, handle: t, teamName: n }) {
      let [r, i] = (0, en.useState)({ x: 0, y: 0 }),
        [s, a] = (0, en.useState)(!1),
        [o, l] = (0, en.useState)({ x: 0, y: 0 }),
        [c, u] = (0, en.useState)(!1),
        d = (0, en.useRef)(null),
        h = (0, en.useCallback)((e) => {
          if (!d.current) return;
          let t = d.current.getBoundingClientRect(),
            n = t.left + t.width / 2,
            r = t.top + t.height / 2,
            s = e.clientX,
            a = e.clientY,
            o = s - n;
          (i({
            x: -(((a - r) / (t.height / 2)) * 4),
            y: (o / (t.width / 2)) * 4,
          }),
            l({ x: (s - t.left) / t.width, y: (a - t.top) / t.height }));
        }, []),
        p = () => {
          (a(!0), u(!1));
        },
        m = () => {
          (a(!1), i({ x: 0, y: 0 }), u(!0), setTimeout(() => u(!1), 600));
        },
        f = 100 * o.x,
        g = (0, en.useMemo)(() => (c ? (f > 50 ? 120 : -20) : f), [c, f]);
      return (0, et.jsx)("div", {
        className: "relative w-full max-w-md mx-auto font-sans",
        children: (0, et.jsxs)("div", {
          ref: d,
          className:
            "relative overflow-hidden group p-6 ring ring-black/10 shadow-xl w-full bg-v0-black dark:bg-v0-gray-100",
          style: {
            aspectRatio: "190/123",
            alignSelf: "stretch",
            borderRadius: "12px",
            backgroundImage: "url('/noise.webp')",
            backgroundRepeat: "repeat",
            backgroundSize: "18px 18px",
            transform: `perspective(1000px) rotateX(${r.x}deg) rotateY(${r.y}deg) scale(${s ? 1.01 : 1}) translateY(${s ? -1 : 0}px)`,
            transition: s
              ? "transform 0.15s ease-out, box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1)"
              : "transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.4, 0, 0.2, 1)",
            boxShadow: s
              ? "0 20px 40px -12px rgba(0,0,0,0.25), 0 0 0 1px rgba(255,255,255,0.05), inset 0 1px 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(0,0,0,0.3)"
              : "0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.03), inset 0 1px 0 rgba(255,255,255,0.05), inset 0 -1px 0 rgba(0,0,0,0.2)",
          },
          onMouseMove: h,
          onMouseEnter: p,
          onMouseLeave: m,
          children: [
            (0, et.jsx)("div", {
              className: "absolute opacity-100 dark:opacity-30",
              style: {
                width: "144px",
                height: "240px",
                transform: "rotate(-27.52deg)",
                flexShrink: 0,
                background:
                  "linear-gradient(253deg, rgba(216, 216, 216, 0.10) 29.07%, rgba(255, 255, 255, 0.02) 90.23%)",
                top: "-75px",
                left: "90px",
              },
            }),
            (0, et.jsx)("div", {
              className:
                "absolute inset-0 pointer-events-none will-change-transform",
              style: {
                width: "60%",
                height: "100%",
                background:
                  "linear-gradient(90deg, transparent 0%, transparent 20%, rgba(128,128,128,0.1) 30%, rgba(128,128,128,0.2) 50%, rgba(128,128,128,0.1) 70%, transparent 80%, transparent 100%)",
                filter: "blur(2px)",
                transition: c
                  ? "transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)"
                  : "transform 0.1s cubic-bezier(0.4, 0, 0.2, 1)",
                transform: `translateX(${g}%) skewX(-15deg)`,
                mixBlendMode: "normal",
                opacity: 0.7 * !c,
              },
            }),
            (0, et.jsx)("div", {
              className:
                "absolute top-0 left-0 right-0 h-1 pointer-events-none",
              style: {
                background:
                  "linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 50%, transparent 100%)",
                borderRadius: "12px 12px 0 0",
                opacity: +!!s,
                transition: "opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
              },
            }),
            (0, et.jsx)("div", {
              className:
                "absolute top-0 bottom-0 left-0 w-1 pointer-events-none",
              style: {
                background:
                  "linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.03) 50%, transparent 100%)",
                borderRadius: "12px 0 0 12px",
                opacity: +!!s,
                transition: "opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
              },
            }),
            (0, et.jsx)("div", {
              className:
                "absolute bottom-0 left-0 right-0 h-1 pointer-events-none",
              style: {
                background:
                  "linear-gradient(0deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, transparent 100%)",
                borderRadius: "0 0 12px 12px",
                opacity: +!!s,
                transition: "opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
              },
            }),
            (0, et.jsx)("div", {
              className:
                "absolute top-0 bottom-0 right-0 w-1 pointer-events-none",
              style: {
                background:
                  "linear-gradient(-90deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.15) 50%, transparent 100%)",
                borderRadius: "0 12px 12px 0",
                opacity: +!!s,
                transition: "opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)",
              },
            }),
            n &&
              (0, et.jsx)("span", {
                className:
                  "absolute top-7 left-4 font-semibold font-mono text-v0-gray-600 text-[10px] flex items-center",
                children: (0, et.jsx)("span", {
                  className: "max-w-[130px] overflow-hidden text-nowrap",
                  children: n,
                }),
              }),
            (0, et.jsx)("div", {
              className: "absolute top-7 right-3",
              children: (0, et.jsx)(ei, {}),
            }),
            (0, et.jsxs)("div", {
              className: "absolute z-10 bottom-0 left-0 p-4 w-full",
              children: [
                (0, et.jsxs)("div", {
                  className:
                    "text-2xl font-semibold text-v0-gray-100 dark:text-v0-gray-1000 tracking-tight pb-2 [font-variant-numeric:slashed-zero] font-mono",
                  children: ["$", e],
                }),
                (0, et.jsx)("div", {
                  className:
                    "text-xs text-v0-gray-100 dark:text-v0-gray-1000 pb-1 truncate w-full",
                  children: t,
                }),
              ],
            }),
          ],
        }),
      });
    }
    e.s(["CreditCard", () => es], 337034);
    var ea = t,
      eo = e.i(5295),
      el = e.i(794593),
      ec = e.i(996174),
      eu = n;
    function ed({ expirationData: e }) {
      let { totalPayAsYouGoBalance: t, expirations: n } = e;
      if (1 === n.length && n[0]?.expiringAmount === t) {
        let e = n[0];
        if (!e) return null;
        let { expiringAmount: t, expiringDays: r } = e;
        return (0, ea.jsxs)(el.Badge, {
          variant: "amber",
          children: [
            "Expires in ",
            t,
            " ",
            (0, ea.jsx)("span", { children: 1 === r ? "day" : "days" }),
          ],
        });
      }
      if (1 === n.length) {
        let e = n[0];
        if (!e) return null;
        let { expiringAmount: t, expiringDays: r } = e;
        return (0, ea.jsxs)(el.Badge, {
          variant: "amber",
          children: [
            "$",
            t,
            " Expires in ",
            r,
            " ",
            (0, ea.jsx)("span", { children: 1 === r ? "day" : "days" }),
          ],
        });
      }
      return n.length > 1
        ? (0, ea.jsx)(eh, {
            content: (0, ea.jsx)(ec.TooltipContent, {
              children: (0, ea.jsx)("div", {
                children: n.map((e, t) =>
                  (0, ea.jsxs)(
                    "div",
                    {
                      children: [
                        "$",
                        e.expiringAmount,
                        " Expire in ",
                        e.expiringDays,
                        " ",
                        (0, ea.jsx)("span", {
                          children: 1 === e.expiringDays ? "day" : "days",
                        }),
                      ],
                    },
                    t,
                  ),
                ),
              }),
            }),
            children: (0, ea.jsx)("div", {
              children: (0, ea.jsxs)(el.Badge, {
                variant: "amber",
                className: "flex cursor-pointer items-center gap-1",
                children: [
                  "Some credits expire soon ",
                  (0, ea.jsx)(eo.InfoIcon, { size: 14 }),
                ],
              }),
            }),
          })
        : null;
    }
    function eh({ content: e, children: t }) {
      let [n, r] = (0, eu.useState)(!1);
      return (0, ea.jsx)(ec.Tooltip, {
        open: n,
        onOpenChange: r,
        delayDuration: 150,
        content: e,
        children: t,
      });
    }
    e.s(["default", () => ed], 955930);
  },
  593640,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(66990),
      r = e.i(304649),
      i = e.i(576191);
    function s({ children: e, className: s, title: a, noDividers: o = !1 }) {
      let l = i.default.Children.toArray(e);
      return (0, t.jsxs)("div", {
        className: "flex flex-col gap-4",
        children: [
          a &&
            (0, t.jsx)("div", {
              className: "text-sm font-medium text-v0-gray-900 px-1",
              children:
                "string" == typeof a ? (0, t.jsx)("h3", { children: a }) : a,
            }),
          (0, t.jsx)("div", {
            className: (0, r.cn)(
              "bg-v0-background-300 rounded-lg p-4 border border-v0-alpha-400",
              s,
            ),
            children: o
              ? e
              : l.map((e, r) =>
                  (0, t.jsxs)(
                    i.default.Fragment,
                    {
                      children: [
                        e,
                        r < l.length - 1 &&
                          (0, t.jsx)(n.Separator, { className: "my-4" }),
                      ],
                    },
                    r,
                  ),
                ),
          }),
        ],
      });
    }
    e.s(["SettingsGroup", () => s]);
  },
  199929,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649);
    function r({ className: e, ...r }) {
      return (0, t.jsx)("div", {
        className: (0, n.cn)("flex items-center gap-4 sm:gap-4", e),
        ...r,
      });
    }
    function i({ className: e, ...r }) {
      return (0, t.jsx)("div", {
        className: (0, n.cn)("flex-1 flex flex-col gap-0.5", e),
        ...r,
      });
    }
    function s({ className: e, ...r }) {
      return (0, t.jsx)("label", {
        className: (0, n.cn)("text-label-14 font-medium", e),
        ...r,
      });
    }
    function a({ className: e, ...r }) {
      return (0, t.jsx)("p", {
        className: (0, n.cn)("!text-v0-gray-900 text-label-14", e),
        ...r,
      });
    }
    function o({ className: e, ...r }) {
      return (0, t.jsx)("div", {
        className: (0, n.cn)("flex gap-2 justify-end items-center", e),
        ...r,
      });
    }
    e.s([
      "SettingsItem",
      () => r,
      "SettingsItemAction",
      () => o,
      "SettingsItemContent",
      () => i,
      "SettingsItemDescription",
      () => a,
      "SettingsItemTitle",
      () => s,
    ]);
  },
  722198,
  995135,
  (e) => {
    "use strict";
    e.s(["CreditBalance", () => g, "CurrencyInput", () => v], 722198);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(46601),
      i = e.i(996174),
      s = e.i(226368),
      a = e.i(518006),
      o = e.i(403055),
      l = e.i(530740),
      c = e.i(176248);
    e.i(904347);
    var u = e.i(37737),
      d = e.i(337034),
      h = e.i(955930),
      p = e.i(593640),
      m = e.i(199929);
    function f(e) {
      let t =
          e.balance.blocks
            ?.filter((e) =>
              ["daily_credits", "dub_link_signup"].includes(e.metadata?.promo),
            )
            .reduce((e, t) => e + t.currentBalance, 0) ?? 0,
        { couponCredits: n, referrerPromoCredits: r } = (
          e.onDemand.blocks ?? []
        ).reduce(
          (e, t) => (
            t.metadata?.$coupon_code
              ? (e.couponCredits += t.currentBalance)
              : ["invite_and_earn", "create_and_earn"].includes(
                  t.metadata?.promo,
                ) && (e.referrerPromoCredits += t.currentBalance),
            e
          ),
          { couponCredits: 0, referrerPromoCredits: 0 },
        ),
        i = r + n,
        s = t + i,
        a = e.balance.remaining - t,
        o = e.onDemand.balance - i,
        l = a + o + s;
      return {
        giftedCredits: s,
        monthlyCredits: a,
        purchasedCredits: o,
        totalCredits: l,
      };
    }
    function g({
      planInfo: e,
      canBuyCredits: a,
      needsToRequestCredits: o,
      daysRemaining: g,
      autoTopupSection: v,
      username: y,
      teamName: b,
      expirationData: j,
    }) {
      let w = (0, s.useRouter)(),
        C = (0, n.useCallback)(() => {
          (0, n.startTransition)(w.refresh);
        }, [w.refresh]),
        { toolTipMonthly: k, toolTipBuyMore: S } = (0,
        l.getCreditBalanceToolTipContent)(e.plan),
        {
          giftedCredits: N,
          monthlyCredits: E,
          purchasedCredits: A,
          totalCredits: D,
        } = f(e),
        I = y || "Your Balance";
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(p.SettingsGroup, {
            className: "relative p-0",
            noDividers: !0,
            children: [
              (0, t.jsxs)(m.SettingsItem, {
                className:
                  "flex-col items-start gap-3 sm:flex-row sm:items-center sm:gap-4 border-b border-v0-alpha-400 px-4 py-4",
                children: [
                  (0, t.jsxs)(m.SettingsItemContent, {
                    children: [
                      (0, t.jsxs)("div", {
                        className: "flex items-center gap-2",
                        children: [
                          (0, t.jsx)(m.SettingsItemTitle, {
                            children: "Credit Balance",
                          }),
                          j && (0, t.jsx)(h.default, { expirationData: j }),
                        ],
                      }),
                      (0, t.jsxs)(m.SettingsItemDescription, {
                        children: [
                          "Your monthly credits reset in",
                          " ",
                          (0, t.jsxs)("span", {
                            className: "font-medium text-v0-gray-1000",
                            children: [g, " days"],
                          }),
                          ". Credits with the earliest expiration date are used first.",
                        ],
                      }),
                    ],
                  }),
                  (0, t.jsx)(m.SettingsItemAction, {
                    className:
                      "w-full flex-row justify-start sm:w-auto sm:justify-end",
                    children: (0, t.jsx)(i.Tooltip, {
                      content: o
                        ? "You do not have permission to purchase credits. Please contact your administrator"
                        : void 0,
                      children: (0, t.jsx)(c.Button, {
                        size: "sm",
                        disabled: o,
                        onClick: () => {
                          a
                            ? (0, u.openDialog)({
                                type: "buyMoreCredits",
                                data: { onSuccess: C, role: e.role },
                              })
                            : (0, u.openDialog)({
                                type: "upgradePlan",
                                data: {
                                  planSlug: "v0-level3",
                                  customTitle:
                                    "Upgrade your plan to buy more credits",
                                },
                              });
                        },
                        variant: "secondary",
                        className: "whitespace-nowrap h-7 rounded-md px-2",
                        children: "Buy Credits",
                      }),
                    }),
                  }),
                ],
              }),
              (0, t.jsxs)("div", {
                className:
                  "flex flex-col md:flex-row gap-6 p-4 md:items-center",
                children: [
                  (0, t.jsx)("div", {
                    className: "w-52 relative",
                    children: (0, t.jsx)(d.CreditCard, {
                      amount: D.toFixed(2),
                      handle: I,
                      teamName: b,
                    }),
                  }),
                  (0, t.jsxs)("div", {
                    className: "flex-1",
                    children: [
                      (0, t.jsxs)("div", {
                        className:
                          "flex justify-between items-center text-sm h-9 px-2 rounded-md",
                        children: [
                          (0, t.jsxs)("div", {
                            className: "flex items-center gap-1.5",
                            children: [
                              (0, t.jsx)("span", {
                                className: "text-v0-gray-900 font-medium",
                                children: "Gifted Credits",
                              }),
                              (0, t.jsx)(x, {
                                content: (0, t.jsx)("p", {
                                  children:
                                    "Gifted credits include daily credits, referral rewards and other promotional codes.",
                                }),
                                children: (0, t.jsx)("div", {
                                  children: (0, t.jsx)(r.IconInfoFill, {
                                    className: "text-v0-gray-900 h-4 w-4",
                                  }),
                                }),
                              }),
                            ],
                          }),
                          N
                            ? (0, t.jsxs)("span", {
                                children: ["$", N.toFixed(2)],
                              })
                            : (0, t.jsx)("span", { children: "$0.00" }),
                        ],
                      }),
                      (0, t.jsxs)("div", {
                        className:
                          "flex justify-between items-center text-sm bg-v0-background-200 h-9 px-2 rounded-md",
                        children: [
                          (0, t.jsxs)("div", {
                            className: "flex items-center gap-1.5",
                            children: [
                              (0, t.jsx)("span", {
                                className: "text-v0-gray-900 font-medium",
                                children: "Monthly Credits",
                              }),
                              (0, t.jsx)(x, {
                                content: (0, t.jsx)("p", { children: k }),
                                children: (0, t.jsx)("div", {
                                  children: (0, t.jsx)(r.IconInfoFill, {
                                    className: "text-v0-gray-900 h-4 w-4",
                                  }),
                                }),
                              }),
                            ],
                          }),
                          (0, t.jsxs)("span", {
                            children: [
                              "$",
                              E.toFixed(2),
                              " / $",
                              e.balance.total.toFixed(2),
                            ],
                          }),
                        ],
                      }),
                      (0, t.jsxs)("div", {
                        className:
                          "flex justify-between items-center text-sm h-9 px-2 rounded-md",
                        children: [
                          (0, t.jsxs)("div", {
                            className: "flex items-center gap-1.5",
                            children: [
                              (0, t.jsx)("span", {
                                className: "text-v0-gray-900 font-medium",
                                children: "Purchased Credits",
                              }),
                              (0, t.jsx)(x, {
                                content: (0, t.jsx)("p", {
                                  children: S(() =>
                                    (0, u.openDialog)({ type: "upgradePlan" }),
                                  ),
                                }),
                                children: (0, t.jsx)("div", {
                                  children: (0, t.jsx)(r.IconInfoFill, {
                                    className: "text-v0-gray-900 h-4 w-4",
                                  }),
                                }),
                              }),
                            ],
                          }),
                          (0, t.jsxs)("span", {
                            children: ["$", A.toFixed(2)],
                          }),
                        ],
                      }),
                      (0, t.jsxs)("div", {
                        className:
                          "flex justify-between items-center text-sm bg-v0-background-200 h-9 px-2 rounded-md",
                        children: [
                          (0, t.jsx)("span", {
                            className: "font-medium text-v0-gray-1000",
                            children: "Total Available Credits",
                          }),
                          (0, t.jsxs)("span", {
                            className: "font-medium text-v0-gray-1000",
                            children: ["$", D.toFixed(2)],
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
            ],
          }),
          (0, t.jsx)("div", { className: "-mt-13", children: v }),
        ],
      });
    }
    function x({ content: e, children: r }) {
      let [s, a] = (0, n.useState)(!1);
      return (0, t.jsx)(i.Tooltip, {
        className: "max-w-[250px]",
        open: s,
        onOpenChange: a,
        content: e,
        disableHoverableContent: !1,
        children: r,
      });
    }
    e.s(["getCreditBreakdown", () => f], 995135);
    let v = n.default.forwardRef(
      (
        {
          id: e,
          initialValue: r = "",
          onChange: i,
          min: s = 10,
          max: l = 5e3,
          placeholder: c = "$0.00",
          className: u = "",
          currency: d = "USD",
          disabled: h = !1,
        },
        p,
      ) => {
        let [m, f] = (0, n.useState)(() => ("" === r ? "" : r.toString())),
          g = (e) => {
            if (void 0 === e || "" === e) {
              (f(""), i(""));
              return;
            }
            let t = parseFloat(e),
              n = e;
            (t > l && (n = l.toString()), f(n), i(n));
          },
          x = () => {
            "" === m && (f(s.toString()), i(s.toString()));
          };
        return (0, t.jsx)(a.default, {
          id: e,
          placeholder: c,
          value: m,
          ref: p,
          max: l,
          min: s,
          decimalsLimit: 0,
          onBlur: x,
          onValueChange: g,
          prefix: y[d],
          className: (0, o.cn)(
            "outline-hidden min-w-0 border-none bg-transparent",
            u,
          ),
          decimalScale: 0,
          allowNegativeValue: !1,
          disabled: h,
        });
      },
    );
    v.displayName = "CurrencyInput";
    let y = {
      USD: "$",
      EUR: "",
      GBP: "",
      CAD: "CA$",
      AUD: "A$",
      JPY: "",
      CHF: "CHF",
      CNY: "",
    };
  },
  686695,
  584379,
  (e) => {
    "use strict";
    let t;
    var n = e.i(576191);
    let r = !0,
      i = (e, t, n) => {
        let r = document.createElement(e),
          [i, s] = Array.isArray(t) ? [void 0, t] : [t, n];
        return (
          i && Object.assign(r, i),
          null == s || s.forEach((e) => r.appendChild(e)),
          r
        );
      },
      s = (e, t) => {
        var n;
        return "left" === t
          ? e.offsetLeft
          : ((null ==
            (n = e.offsetParent instanceof HTMLElement ? e.offsetParent : null)
              ? void 0
              : n.offsetWidth) ?? 0) -
              e.offsetWidth -
              e.offsetLeft;
      },
      a = (e) => e.offsetWidth > 0 && e.offsetHeight > 0,
      o = (e, t) => {
        r && customElements.get(e) !== t && customElements.define(e, t);
      };
    function l(e, t, { reverse: n = !1 } = {}) {
      let r = e.length;
      for (let i = n ? r - 1 : 0; n ? i >= 0 : i < r; n ? i-- : i++) t(e[i], i);
    }
    function c(e, t, n, r) {
      let i = t.formatToParts(e);
      (n && i.unshift({ type: "prefix", value: n }),
        r && i.push({ type: "suffix", value: r }));
      let s = [],
        a = [],
        o = [],
        l = [],
        c = {},
        u = (e) => `${e}:${(c[e] = (c[e] ?? -1) + 1)}`,
        d = "",
        h = !1,
        p = !1;
      for (let e of i) {
        d += e.value;
        let t =
          "minusSign" === e.type || "plusSign" === e.type ? "sign" : e.type;
        "integer" === t
          ? ((h = !0),
            a.push(
              ...e.value
                .split("")
                .map((e) => ({ type: t, value: parseInt(e) })),
            ))
          : "group" === t
            ? a.push({ type: t, value: e.value })
            : "decimal" === t
              ? ((p = !0), o.push({ type: t, value: e.value, key: u(t) }))
              : "fraction" === t
                ? o.push(
                    ...e.value
                      .split("")
                      .map((e) => ({
                        type: t,
                        value: parseInt(e),
                        key: u(t),
                        pos: -1 - c[t],
                      })),
                  )
                : (h || p ? l : s).push({ type: t, value: e.value, key: u(t) });
      }
      let m = [];
      for (let e = a.length - 1; e >= 0; e--) {
        let t = a[e];
        m.unshift(
          "integer" === t.type
            ? { ...t, key: u(t.type), pos: c[t.type] }
            : { ...t, key: u(t.type) },
        );
      }
      return {
        pre: s,
        integer: m,
        fraction: o,
        post: l,
        valueAsString: d,
        value: "string" == typeof e ? parseFloat(e) : e,
      };
    }
    let u = String.raw,
      d = String.raw,
      h =
        r &&
        (() => {
          try {
            document
              .createElement("div")
              .animate({ opacity: 0 }, { easing: "linear(0, 1)" });
          } catch {
            return !1;
          }
          return !0;
        })(),
      p =
        r &&
        "u" > typeof CSS &&
        CSS.supports &&
        CSS.supports("line-height", "mod(1,1)"),
      m =
        r && "u" > typeof matchMedia
          ? matchMedia("(prefers-reduced-motion: reduce)")
          : null,
      f = "--_number-flow-d-opacity",
      g = "--_number-flow-d-width",
      x = "--_number-flow-dx",
      v = "--_number-flow-d",
      y = (() => {
        try {
          return (
            CSS.registerProperty({
              name: f,
              syntax: "<number>",
              inherits: !1,
              initialValue: "0",
            }),
            CSS.registerProperty({
              name: x,
              syntax: "<length>",
              inherits: !0,
              initialValue: "0px",
            }),
            CSS.registerProperty({
              name: g,
              syntax: "<number>",
              inherits: !1,
              initialValue: "0",
            }),
            CSS.registerProperty({
              name: v,
              syntax: "<number>",
              inherits: !0,
              initialValue: "0",
            }),
            !0
          );
        } catch {
          return !1;
        }
      })(),
      b = "var(--number-flow-char-height, 1em)",
      j = "var(--number-flow-mask-height, 0.25em)",
      w = `calc(${j} / 2)`,
      C = "var(--number-flow-mask-width, 0.5em)",
      k = `calc(${C} / var(--scale-x))`,
      S = "#000 0, transparent 71%",
      N = d`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${b} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${g}) / var(--width));transform:translateX(var(${x})) scaleX(var(--scale-x));margin:0 calc(-1 * ${C});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${k},#000 calc(100% - ${k}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${j},#000 calc(100% - ${j}),transparent 100% ),radial-gradient(at bottom right,${S}),radial-gradient(at bottom left,${S}),radial-gradient(at top left,${S}),radial-gradient(at top right,${S});-webkit-mask-size:100% calc(100% - ${j} * 2),calc(100% - ${k} * 2) 100%,${k} ${j},${k} ${j},${k} ${j},${k} ${j};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${w} ${C};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${x})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${v})}.digit__num,.number .section::after{padding:${w} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${f}))}`,
      E = r ? HTMLElement : class {},
      A = d`:host{display:inline-block;direction:ltr;white-space:nowrap;line-height:${b} !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:${w} 0}.symbol{white-space:pre}`,
      D = (e) =>
        `<span class="${"integer" === e.type || "fraction" === e.type ? "digit" : "symbol"}" part="${"integer" === e.type || "fraction" === e.type ? `digit ${e.type}-digit` : `symbol ${e.type}`}">${e.value}</span>`,
      I = (e, t) =>
        `<span part="${t}">${e.reduce((e, t) => e + D(t), "")}</span>`,
      M = (e) => u`<template shadowroot="open" shadowrootmode="open"
			><style>
				${A}</style
			><span role="img" aria-label="${e.valueAsString}"
				>${I(e.pre, "left")}<span part="number" class="number"
					>${I(e.integer, "integer")}${I(e.fraction, "fraction")}</span
				>${I(e.post, "right")}</span
			></template
		><span
			style="font-kerning: none; display: inline-block; line-height: ${b} !important; padding: ${j} 0;"
			>${e.valueAsString}</span
		>`,
      T = p && h && y;
    class L extends E {
      constructor() {
        (super(), (this.created = !1), (this.batched = !1));
        const { animated: e, ...t } = this.constructor.defaultProps;
        ((this._animated = this.computedAnimated = e), Object.assign(this, t));
      }
      get animated() {
        return this._animated;
      }
      set animated(e) {
        var t;
        this.animated !== e &&
          ((this._animated = e),
          null == (t = this.shadowRoot) ||
            t.getAnimations().forEach((e) => e.finish()));
      }
      set data(e) {
        var n;
        if (null == e) return;
        let { pre: r, integer: i, fraction: s, post: o, value: l } = e;
        if (this.created) {
          let t = this._data;
          ((this._data = e),
            (this.computedTrend =
              "function" == typeof this.trend
                ? this.trend(t.value, l)
                : this.trend),
            (this.computedAnimated =
              T &&
              this._animated &&
              (!this.respectMotionPreference || !(null != m && m.matches)) &&
              a(this)),
            null == (n = this.plugins) ||
              n.forEach((n) => {
                var r;
                return null == (r = n.onUpdate)
                  ? void 0
                  : r.call(n, e, t, this);
              }),
            this.batched || this.willUpdate(),
            this._pre.update(r),
            this._num.update({ integer: i, fraction: s }),
            this._post.update(o),
            this.batched || this.didUpdate());
        } else {
          ((this._data = e), this.attachShadow({ mode: "open" }));
          try {
            (this._internals ?? (this._internals = this.attachInternals()),
              (this._internals.role = "img"));
          } catch {}
          if ("u" > typeof CSSStyleSheet && this.shadowRoot.adoptedStyleSheets)
            (t || (t = new CSSStyleSheet()).replaceSync(N),
              (this.shadowRoot.adoptedStyleSheets = [t]));
          else {
            let e = document.createElement("style");
            ((e.textContent = N), this.shadowRoot.appendChild(e));
          }
          ((this._pre = new _(this, r, { justify: "right", part: "left" })),
            this.shadowRoot.appendChild(this._pre.el),
            (this._num = new P(this, i, s)),
            this.shadowRoot.appendChild(this._num.el),
            (this._post = new _(this, o, { justify: "left", part: "right" })),
            this.shadowRoot.appendChild(this._post.el),
            (this.created = !0));
        }
        try {
          this._internals.ariaLabel = e.valueAsString;
        } catch {}
      }
      willUpdate() {
        (this._pre.willUpdate(),
          this._num.willUpdate(),
          this._post.willUpdate());
      }
      didUpdate() {
        if (!this.computedAnimated) return;
        (this._abortAnimationsFinish
          ? this._abortAnimationsFinish.abort()
          : this.dispatchEvent(new Event("animationsstart")),
          this._pre.didUpdate(),
          this._num.didUpdate(),
          this._post.didUpdate());
        let e = new AbortController();
        (Promise.all(
          this.shadowRoot.getAnimations().map((e) => e.finished),
        ).then(() => {
          e.signal.aborted ||
            (this.dispatchEvent(new Event("animationsfinish")),
            (this._abortAnimationsFinish = void 0));
        }),
          (this._abortAnimationsFinish = e));
      }
    }
    L.defaultProps = {
      transformTiming: {
        duration: 900,
        easing:
          "linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)",
      },
      spinTiming: void 0,
      opacityTiming: { duration: 450, easing: "ease-out" },
      animated: !0,
      trend: (e, t) => Math.sign(t - e),
      respectMotionPreference: !0,
      plugins: void 0,
      digits: void 0,
    };
    class P {
      constructor(e, t, n, { className: r, ...s } = {}) {
        ((this.flow = e),
          (this._integer = new F(e, t, { justify: "right", part: "integer" })),
          (this._fraction = new F(e, n, { justify: "left", part: "fraction" })),
          (this._inner = i("span", { className: "number__inner" }, [
            this._integer.el,
            this._fraction.el,
          ])),
          (this.el = i(
            "span",
            { ...s, part: "number", className: `number ${r ?? ""}` },
            [this._inner],
          )));
      }
      willUpdate() {
        ((this._prevWidth = this.el.offsetWidth),
          (this._prevLeft = this.el.getBoundingClientRect().left),
          this._integer.willUpdate(),
          this._fraction.willUpdate());
      }
      update({ integer: e, fraction: t }) {
        (this._integer.update(e), this._fraction.update(t));
      }
      didUpdate() {
        let e = this.el.getBoundingClientRect();
        (this._integer.didUpdate(), this._fraction.didUpdate());
        let t = this._prevLeft - e.left,
          n = this.el.offsetWidth,
          r = this._prevWidth - n;
        (this.el.style.setProperty("--width", String(n)),
          this.el.animate(
            { [x]: [`${t}px`, "0px"], [g]: [r, 0] },
            { ...this.flow.transformTiming, composite: "accumulate" },
          ));
      }
    }
    class R {
      constructor(e, t, { justify: n, className: r, ...s }, a) {
        ((this.flow = e),
          (this.children = new Map()),
          (this.onCharRemove = (e) => () => {
            this.children.delete(e);
          }),
          (this.justify = n));
        const o = t.map((e) => this.addChar(e).el);
        this.el = i(
          "span",
          { ...s, className: `section section--justify-${n} ${r ?? ""}` },
          a ? a(o) : o,
        );
      }
      addChar(e, { startDigitsAtZero: t = !1, ...n } = {}) {
        let r =
          "integer" === e.type || "fraction" === e.type
            ? new V(this, e.type, t ? 0 : e.value, e.pos, {
                ...n,
                onRemove: this.onCharRemove(e.key),
              })
            : new z(this, e.type, e.value, {
                ...n,
                onRemove: this.onCharRemove(e.key),
              });
        return (this.children.set(e.key, r), r);
      }
      unpop(e) {
        (e.el.removeAttribute("inert"),
          (e.el.style.top = ""),
          (e.el.style[this.justify] = ""));
      }
      pop(e) {
        (e.forEach((e) => {
          ((e.el.style.top = `${e.el.offsetTop}px`),
            (e.el.style[this.justify] = `${s(e.el, this.justify)}px`));
        }),
          e.forEach((e) => {
            (e.el.setAttribute("inert", ""), (e.present = !1));
          }));
      }
      addNewAndUpdateExisting(e) {
        let t = new Map(),
          n = new Map(),
          r = "left" === this.justify,
          i = r ? "prepend" : "append";
        if (
          (l(
            e,
            (e) => {
              let r;
              (this.children.has(e.key)
                ? ((r = this.children.get(e.key)),
                  n.set(e, r),
                  this.unpop(r),
                  (r.present = !0))
                : ((r = this.addChar(e, {
                    startDigitsAtZero: !0,
                    animateIn: !0,
                  })),
                  t.set(e, r)),
                this.el[i](r.el));
            },
            { reverse: r },
          ),
          this.flow.computedAnimated)
        ) {
          let e = this.el.getBoundingClientRect();
          t.forEach((t) => {
            t.willUpdate(e);
          });
        }
        (t.forEach((e, t) => {
          e.update(t.value);
        }),
          n.forEach((e, t) => {
            e.update(t.value);
          }));
      }
      willUpdate() {
        let e = this.el.getBoundingClientRect();
        ((this._prevOffset = e[this.justify]),
          this.children.forEach((t) => t.willUpdate(e)));
      }
      didUpdate() {
        let e = this.el.getBoundingClientRect();
        this.children.forEach((t) => t.didUpdate(e));
        let t = e[this.justify],
          n = this._prevOffset - t;
        n &&
          this.children.size &&
          this.el.animate(
            { transform: [`translateX(${n}px)`, "none"] },
            { ...this.flow.transformTiming, composite: "accumulate" },
          );
      }
    }
    class F extends R {
      update(e) {
        let t = new Map();
        (this.children.forEach((n, r) => {
          (e.find((e) => e.key === r) || t.set(r, n), this.unpop(n));
        }),
          this.addNewAndUpdateExisting(e),
          t.forEach((e) => {
            e instanceof V && e.update(0);
          }),
          this.pop(t));
      }
    }
    class _ extends R {
      update(e) {
        let t = new Map();
        (this.children.forEach((n, r) => {
          e.find((e) => e.key === r) || t.set(r, n);
        }),
          this.pop(t),
          this.addNewAndUpdateExisting(e));
      }
    }
    class O {
      constructor(e, t, { onRemove: n, animateIn: r = !1 } = {}) {
        ((this.flow = e),
          (this.el = t),
          (this._present = !0),
          (this._remove = () => {
            var e;
            (this.el.remove(), null == (e = this._onRemove) || e.call(this));
          }),
          this.el.classList.add("animate-presence"),
          this.flow.computedAnimated &&
            r &&
            this.el.animate(
              { [f]: [-0.9999, 0] },
              { ...this.flow.opacityTiming, composite: "accumulate" },
            ),
          (this._onRemove = n));
      }
      get present() {
        return this._present;
      }
      set present(e) {
        if (this._present !== e) {
          if (
            ((this._present = e),
            e
              ? this.el.removeAttribute("inert")
              : this.el.setAttribute("inert", ""),
            !this.flow.computedAnimated)
          ) {
            e || this._remove();
            return;
          }
          (this.el.style.setProperty(
            "--_number-flow-d-opacity",
            e ? "0" : "-.999",
          ),
            this.el.animate(
              { [f]: e ? [-0.9999, 0] : [0.999, 0] },
              { ...this.flow.opacityTiming, composite: "accumulate" },
            ),
            e
              ? this.flow.removeEventListener("animationsfinish", this._remove)
              : this.flow.addEventListener("animationsfinish", this._remove, {
                  once: !0,
                }));
        }
      }
    }
    class B extends O {
      constructor(e, t, n, r) {
        (super(e.flow, n, r),
          (this.section = e),
          (this.value = t),
          (this.el = n));
      }
    }
    class V extends B {
      constructor(e, t, n, r, s) {
        var a, o;
        const l =
            ((null == (o = null == (a = e.flow.digits) ? void 0 : a[r])
              ? void 0
              : o.max) ?? 9) + 1,
          c = Array.from({ length: l }).map((e, t) => {
            let r = i("span", { className: "digit__num" }, [
              document.createTextNode(String(t)),
            ]);
            return (
              t !== n && r.setAttribute("inert", ""),
              r.style.setProperty("--n", String(t)),
              r
            );
          }),
          u = i("span", { part: `digit ${t}-digit`, className: "digit" }, c);
        (u.style.setProperty("--current", String(n)),
          u.style.setProperty("--length", String(l)),
          super(e, n, u, s),
          (this.pos = r),
          (this._onAnimationsFinish = () => {
            this.el.classList.remove("is-spinning");
          }),
          (this._numbers = c),
          (this.length = l));
      }
      willUpdate(e) {
        let t = this.el.getBoundingClientRect();
        this._prevValue = this.value;
        let n = t[this.section.justify] - e[this.section.justify],
          r = t.width / 2;
        this._prevCenter = "left" === this.section.justify ? n + r : n - r;
      }
      update(e) {
        (this.el.style.setProperty("--current", String(e)),
          this._numbers.forEach((t, n) =>
            n === e ? t.removeAttribute("inert") : t.setAttribute("inert", ""),
          ),
          (this.value = e));
      }
      didUpdate(e) {
        let t = this.el.getBoundingClientRect(),
          n = t[this.section.justify] - e[this.section.justify],
          r = t.width / 2,
          i = "left" === this.section.justify ? n + r : n - r,
          s = this._prevCenter - i;
        s &&
          this.el.animate(
            { transform: [`translateX(${s}px)`, "none"] },
            { ...this.flow.transformTiming, composite: "accumulate" },
          );
        let a = this.getDelta();
        a &&
          (this.el.classList.add("is-spinning"),
          this.el.animate(
            { [v]: [-a, 0] },
            {
              ...(this.flow.spinTiming ?? this.flow.transformTiming),
              composite: "accumulate",
            },
          ),
          this.flow.addEventListener(
            "animationsfinish",
            this._onAnimationsFinish,
            { once: !0 },
          ));
      }
      getDelta() {
        var e;
        if (this.flow.plugins)
          for (let t of this.flow.plugins) {
            let n =
              null == (e = t.getDelta)
                ? void 0
                : e.call(t, this.value, this._prevValue, this);
            if (null != n) return n;
          }
        let t = this.value - this._prevValue,
          n = this.flow.computedTrend || Math.sign(t);
        return n < 0 && this.value > this._prevValue
          ? this.value - this.length - this._prevValue
          : n > 0 && this.value < this._prevValue
            ? this.length - this._prevValue + this.value
            : t;
      }
    }
    class z extends B {
      constructor(e, t, n, r) {
        const s = i("span", { className: "symbol__value", textContent: n });
        (super(
          e,
          n,
          i("span", { part: `symbol ${t}`, className: "symbol" }, [s]),
          r,
        ),
          (this.type = t),
          (this._children = new Map()),
          (this._onChildRemove = (e) => () => {
            this._children.delete(e);
          }),
          this._children.set(
            n,
            new O(this.flow, s, { onRemove: this._onChildRemove(n) }),
          ));
      }
      willUpdate(e) {
        if ("decimal" === this.type) return;
        let t = this.el.getBoundingClientRect();
        this._prevOffset = t[this.section.justify] - e[this.section.justify];
      }
      update(e) {
        if (this.value !== e) {
          let t = this._children.get(this.value);
          t && (t.present = !1);
          let n = this._children.get(e);
          if (n) n.present = !0;
          else {
            let t = i("span", { className: "symbol__value", textContent: e });
            (this.el.appendChild(t),
              this._children.set(
                e,
                new O(this.flow, t, {
                  animateIn: !0,
                  onRemove: this._onChildRemove(e),
                }),
              ));
          }
        }
        this.value = e;
      }
      didUpdate(e) {
        if ("decimal" === this.type) return;
        let t =
            this.el.getBoundingClientRect()[this.section.justify] -
            e[this.section.justify],
          n = this._prevOffset - t;
        n &&
          this.el.animate(
            { transform: [`translateX(${n}px)`, "none"] },
            { ...this.flow.transformTiming, composite: "accumulate" },
          );
      }
    }
    var H = n;
    let $ = parseInt(H.version.match(/^(\d+)\./)?.[1]) >= 19,
      U = ["data", "digits"];
    class G extends L {
      attributeChangedCallback(e, t, n) {
        this[e] = JSON.parse(n);
      }
    }
    ((G.observedAttributes = $ ? [] : U), o("number-flow-react", G));
    let W = {},
      q = $ ? (e) => e : JSON.stringify;
    function Z(e) {
      let {
        transformTiming: t,
        spinTiming: n,
        opacityTiming: r,
        animated: i,
        respectMotionPreference: s,
        trend: a,
        plugins: o,
        ...l
      } = e;
      return [
        {
          transformTiming: t,
          spinTiming: n,
          opacityTiming: r,
          animated: i,
          respectMotionPreference: s,
          trend: a,
          plugins: o,
        },
        l,
      ];
    }
    class K extends H.Component {
      updateProperties(e) {
        if (!this.el) return;
        this.el.batched = !this.props.isolate;
        let [t] = Z(this.props);
        (Object.entries(t).forEach(([e, t]) => {
          this.el[e] = t ?? G.defaultProps[e];
        }),
          e?.onAnimationsStart &&
            this.el.removeEventListener("animationsstart", e.onAnimationsStart),
          this.props.onAnimationsStart &&
            this.el.addEventListener(
              "animationsstart",
              this.props.onAnimationsStart,
            ),
          e?.onAnimationsFinish &&
            this.el.removeEventListener(
              "animationsfinish",
              e.onAnimationsFinish,
            ),
          this.props.onAnimationsFinish &&
            this.el.addEventListener(
              "animationsfinish",
              this.props.onAnimationsFinish,
            ));
      }
      componentDidMount() {
        (this.updateProperties(),
          $ &&
            this.el &&
            ((this.el.digits = this.props.digits),
            (this.el.data = this.props.data)));
      }
      getSnapshotBeforeUpdate(e) {
        if ((this.updateProperties(e), e.data !== this.props.data)) {
          if (this.props.group)
            return (
              this.props.group.willUpdate(),
              () => this.props.group?.didUpdate()
            );
          if (!this.props.isolate)
            return (this.el?.willUpdate(), () => this.el?.didUpdate());
        }
        return null;
      }
      componentDidUpdate(e, t, n) {
        n?.();
      }
      handleRef(e) {
        (this.props.innerRef && (this.props.innerRef.current = e),
          (this.el = e));
      }
      render() {
        let [
          e,
          {
            innerRef: t,
            className: n,
            data: i,
            willChange: s,
            isolate: a,
            group: o,
            digits: l,
            onAnimationsStart: c,
            onAnimationsFinish: u,
            ...d
          },
        ] = Z(this.props);
        return H.createElement("number-flow-react", {
          ref: this.handleRef,
          "data-will-change": s ? "" : void 0,
          class: n,
          ...d,
          dangerouslySetInnerHTML: { __html: r ? "" : M(i) },
          suppressHydrationWarning: !0,
          digits: q(l),
          data: q(i),
        });
      }
      constructor(e) {
        (super(e), (this.handleRef = this.handleRef.bind(this)));
      }
    }
    let Y = H.forwardRef(function (
        { value: e, locales: t, format: n, prefix: r, suffix: i, ...s },
        a,
      ) {
        H.useImperativeHandle(a, () => o.current, []);
        let o = H.useRef(),
          l = H.useContext(J);
        l?.useRegister(o);
        let u = H.useMemo(() => (t ? JSON.stringify(t) : ""), [t]),
          d = H.useMemo(() => (n ? JSON.stringify(n) : ""), [n]),
          h = H.useMemo(
            () => c(e, (W[`${u}:${d}`] ??= new Intl.NumberFormat(t, n)), r, i),
            [e, u, d, r, i],
          );
        return H.createElement(K, { ...s, group: l, data: h, innerRef: o });
      }),
      J = H.createContext(void 0);
    (e.s([], 686695), e.s(["default", () => Y], 584379));
  },
  632393,
  297232,
  851658,
  (e) => {
    "use strict";
    e.s(["BuyMoreCreditsTwoStepDialog", () => eW], 632393);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(120945);
    e.i(904347);
    var i = e.i(37737),
      s = e.i(667660),
      a = e.i(206037),
      o = e.i(897850),
      l = t,
      c = n,
      u = e.i(176248),
      d = e.i(686832),
      h = e.i(722198),
      p = e.i(675120),
      m = e.i(211976),
      f = e.i(691701),
      g = e.i(996174);
    e.i(686695);
    var x = e.i(584379);
    let v = [30, 60, 100, 250, 500],
      y = 100,
      b = 10,
      j = 5e3;
    var w = n;
    function C() {
      let [e, t] = (0, w.useState)(null),
        n = (e) => {
          let n = e;
          if (e.includes(".")) {
            let t = e.split(".");
            t[1] && 1 === t[1].length && (n = `${e}0`);
          } else n = `${e}.00`;
          let r = Number.parseFloat(n);
          return isNaN(r) || r < b
            ? (t(`Minimum amount is $${b}`), !1)
            : r > j
              ? (t(`Maximum amount is $${j.toLocaleString()}`), !1)
              : r;
        };
      return { amountError: e, setAmountError: t, validateAmount: n };
    }
    var k = e.i(919012),
      S = (0, k.createServerReference)(
        "40a95bb9d1a013487f773e0196e697674326505b51",
        k.callServer,
        void 0,
        k.findSourceMapURL,
        "createElementsTopUpPurchaseIntent",
      ),
      N = k,
      E = (0, N.createServerReference)(
        "40afb00a48d581a0cc1175847ffaddd46b5454a4c8",
        N.callServer,
        void 0,
        N.findSourceMapURL,
        "createInvoiceTopUpPurchaseIntent",
      ),
      A = i,
      D = e.i(402907),
      I = k,
      M = (0, I.createServerReference)(
        "4026766460c64024ed9e3462c0f39551fb3c441fd6",
        I.callServer,
        void 0,
        I.findSourceMapURL,
        "requestCreditsAction",
      ),
      T = e.i(127169);
    function L({
      canBuyCredits: e,
      onCancel: t,
      amount: n,
      setAmount: r,
      onContinue: i,
      needsToRequestCredits: s,
      shouldInvoice: a,
    }) {
      let o = (0, c.useRef)(null);
      (0, T.useShortcut)((e) => {
        let n = o.current;
        n &&
          (n.contains(document.activeElement) || e.target === n) &&
          "Escape" === e.key &&
          t();
      });
      let { amountError: b, setAmountError: j, validateAmount: w } = C(),
        [k, N] = (0, c.useState)(!1),
        I = (0, c.useRef)(null),
        [L, P] = (0, c.useState)(!1),
        { toast: R } = (0, D.useToast)(),
        F = (e) => {
          (r(e), j(null));
        };
      (0, c.useEffect)(() => {
        if (k && I.current) {
          let e = setTimeout(() => {
            I.current?.focus();
          }, 50);
          return () => clearTimeout(e);
        }
      }, [k]);
      let _ = async () => {
        let e = w(n);
        if (e)
          try {
            if ((P(!0), s))
              return void (0, c.startTransition)(async () => {
                ((0, A.closeDialog)(),
                  R({
                    title: "Request Sent",
                    description: (0, l.jsxs)("span", {
                      children: [
                        "Your request for ",
                        (0, l.jsx)("strong", { children: n }),
                        " credits has been sent to an admin.",
                      ],
                    }),
                    duration: 5e3,
                  }));
                let e = await M(n.toString());
                e &&
                  "error" in e &&
                  R({
                    title: "Error",
                    description: e.error,
                    variant: "destructive",
                  });
              });
            let t = await (a
              ? E({ amount: e.toString() })
              : S({ amount: e.toString(), returnUrl: window.location.href }));
            if (!t.ok) return void j(t.error.message);
            i(t.value);
          } catch (e) {
            j(e instanceof Error ? e.message : "An unknown error occurred");
          } finally {
            P(!1);
          }
      };
      return (0, l.jsxs)(l.Fragment, {
        children: [
          (0, l.jsx)(d.ModalContent, {
            className: "md:p-0",
            ref: o,
            children: (0, l.jsx)("div", {
              className: "md:p-6 md:pb-0",
              children: (0, l.jsxs)("div", {
                className: "flex flex-col gap-4 text-center",
                children: [
                  (0, l.jsx)(d.ModalTitle, {
                    className:
                      "sm:text-2xl text-xl text-v0-gray-1000 font-semibold",
                    children: e ? "Buy More Credits" : "Request More Credits",
                  }),
                  (0, l.jsx)("p", {
                    className: "text-label-14 text-pretty text-v0-gray-900",
                    children: e
                      ? (0, l.jsxs)(l.Fragment, {
                          children: [
                            "Buying purchased credits allows you to pay for v0 usage beyond your included credit limit.",
                            " ",
                            (0, l.jsx)("strong", {
                              children:
                                "Additional credits expire 1 year after purchase.",
                            }),
                          ],
                        })
                      : (0, l.jsx)("span", {
                          className: "p-6",
                          children:
                            "You do not have permission to purchase credits. Please contact your administrator.",
                        }),
                  }),
                  (0, l.jsxs)("div", {
                    className: "flex flex-col items-center gap-4 pb-4",
                    children: [
                      (0, l.jsx)(p.TransitionNode, {
                        renderKey: `${k}`,
                        exit: { y: 0, scale: 0.98 },
                        enter: { y: 0, scale: 1.02 },
                        duration: 0.2,
                        delay: 0.1,
                        children: (0, l.jsx)("div", {
                          className:
                            "flex h-[84px] items-center justify-center",
                          onClick: () => {
                            N(!0);
                          },
                          children: k
                            ? (0, l.jsx)(h.CurrencyInput, {
                                className: "text-heading-56 w-full text-center",
                                initialValue: n,
                                onChange: F,
                                min: 10,
                                max: 5e3,
                                currency: "USD",
                                ref: I,
                              })
                            : (0, l.jsx)("div", {
                                className:
                                  "flex w-full items-center justify-center",
                                children: (0, l.jsx)(x.default, {
                                  className: "text-heading-56",
                                  value: "" === n ? 10 : parseFloat(n),
                                  format: {
                                    style: "currency",
                                    currency: "USD",
                                  },
                                }),
                              }),
                        }),
                      }),
                      (0, l.jsxs)("div", {
                        className:
                          "flex flex-wrap items-center justify-center gap-2",
                        children: [
                          v.map((e) =>
                            (0, l.jsxs)(
                              u.Button,
                              {
                                variant: "secondary",
                                autoFocus: e === y,
                                size: "sm",
                                onClick: () => {
                                  (r(e.toString()), N(!1), j(null));
                                },
                                children: ["$", e],
                              },
                              e,
                            ),
                          ),
                          (0, l.jsx)(u.Button, {
                            variant: "secondary",
                            size: "sm",
                            onClick: () => {
                              N(!0);
                            },
                            children: "Custom",
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, l.jsx)(p.TransitionNode, {
                    children: b
                      ? (0, l.jsxs)("div", {
                          className:
                            "text-label-13 flex gap-2 pl-3 pt-3 text-v0-red-700 p-4",
                          children: [(0, l.jsx)(f.Stop, {}), b],
                        })
                      : null,
                  }),
                ],
              }),
            }),
          }),
          (0, l.jsxs)(d.ModalFooter, {
            className: "border-t border-v0-gray-200 bg-v0-background-200",
            children: [
              (0, l.jsx)(u.Button, {
                size: "sm",
                type: "button",
                variant: "secondary",
                onClick: t,
                disabled: L,
                children: "Cancel",
              }),
              (0, l.jsx)(g.Tooltip, {
                content: e
                  ? void 0
                  : "You do not have permission to purchase credits. Please contact your administrator.",
                children: (0, l.jsx)(m.SpinnerButton, {
                  size: "sm",
                  type: "button",
                  onClick: _,
                  disabled: L || !e,
                  pending: L,
                  children: e ? "Continue to Payment" : "Send Request",
                }),
              }),
            ],
          }),
        ],
      });
    }
    var P = t,
      R = n,
      F = d,
      _ = u,
      O = m,
      B = f,
      V = p,
      z = n,
      H = e.i(304153);
    function $(e, t) {
      var n = Object.keys(e);
      if (Object.getOwnPropertySymbols) {
        var r = Object.getOwnPropertySymbols(e);
        (t &&
          (r = r.filter(function (t) {
            return Object.getOwnPropertyDescriptor(e, t).enumerable;
          })),
          n.push.apply(n, r));
      }
      return n;
    }
    function U(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = null != arguments[t] ? arguments[t] : {};
        t % 2
          ? $(Object(n), !0).forEach(function (t) {
              W(e, t, n[t]);
            })
          : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n))
            : $(Object(n)).forEach(function (t) {
                Object.defineProperty(
                  e,
                  t,
                  Object.getOwnPropertyDescriptor(n, t),
                );
              });
      }
      return e;
    }
    function G(e) {
      return (G =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (e) {
              return typeof e;
            }
          : function (e) {
              return e &&
                "function" == typeof Symbol &&
                e.constructor === Symbol &&
                e !== Symbol.prototype
                ? "symbol"
                : typeof e;
            })(e);
    }
    function W(e, t, n) {
      return (
        t in e
          ? Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (e[t] = n),
        e
      );
    }
    function q(e, t) {
      if (null == e) return {};
      var n,
        r,
        i = {},
        s = Object.keys(e);
      for (r = 0; r < s.length; r++)
        ((n = s[r]), t.indexOf(n) >= 0 || (i[n] = e[n]));
      return i;
    }
    function Z(e, t) {
      if (null == e) return {};
      var n,
        r,
        i = q(e, t);
      if (Object.getOwnPropertySymbols) {
        var s = Object.getOwnPropertySymbols(e);
        for (r = 0; r < s.length; r++)
          ((n = s[r]),
            !(t.indexOf(n) >= 0) &&
              Object.prototype.propertyIsEnumerable.call(e, n) &&
              (i[n] = e[n]));
      }
      return i;
    }
    function K(e, t) {
      return Y(e) || J(e, t) || Q(e, t) || ee();
    }
    function Y(e) {
      if (Array.isArray(e)) return e;
    }
    function J(e, t) {
      var n,
        r,
        i =
          e &&
          (("undefined" != typeof Symbol && e[Symbol.iterator]) ||
            e["@@iterator"]);
      if (null != i) {
        var s = [],
          a = !0,
          o = !1;
        try {
          for (
            i = i.call(e);
            !(a = (n = i.next()).done) &&
            (s.push(n.value), !t || s.length !== t);
            a = !0
          );
        } catch (e) {
          ((o = !0), (r = e));
        } finally {
          try {
            a || null == i.return || i.return();
          } finally {
            if (o) throw r;
          }
        }
        return s;
      }
    }
    function Q(e, t) {
      if (e) {
        if ("string" == typeof e) return X(e, t);
        var n = Object.prototype.toString.call(e).slice(8, -1);
        if (
          ("Object" === n && e.constructor && (n = e.constructor.name),
          "Map" === n || "Set" === n)
        )
          return Array.from(e);
        if (
          "Arguments" === n ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
        )
          return X(e, t);
      }
    }
    function X(e, t) {
      (null == t || t > e.length) && (t = e.length);
      for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
      return r;
    }
    function ee() {
      throw TypeError(
        "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
      );
    }
    var et = function (e) {
        return null !== e && "object" === G(e);
      },
      en = function (e) {
        return et(e) && "function" == typeof e.then;
      },
      er = function (e) {
        return (
          et(e) &&
          "function" == typeof e.elements &&
          "function" == typeof e.createToken &&
          "function" == typeof e.createPaymentMethod &&
          "function" == typeof e.confirmCardPayment
        );
      },
      ei =
        "Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",
      es = function (e) {
        var t =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ei;
        if (null === e || er(e)) return e;
        throw Error(t);
      },
      ea = function (e) {
        var t =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ei;
        if (en(e))
          return {
            tag: "async",
            stripePromise: Promise.resolve(e).then(function (e) {
              return es(e, t);
            }),
          };
        var n = es(e, t);
        return null === n ? { tag: "empty" } : { tag: "sync", stripe: n };
      },
      eo = function (e) {
        var t = z.default.useRef(e);
        return (
          z.default.useEffect(
            function () {
              t.current = e;
            },
            [e],
          ),
          t.current
        );
      },
      el = "[object Object]",
      ec = function e(t, n) {
        if (!et(t) || !et(n)) return t === n;
        var r = Array.isArray(t);
        if (r !== Array.isArray(n)) return !1;
        var i = Object.prototype.toString.call(t) === el;
        if (i !== (Object.prototype.toString.call(n) === el)) return !1;
        if (!i && !r) return t === n;
        var s = Object.keys(t),
          a = Object.keys(n);
        if (s.length !== a.length) return !1;
        for (var o = {}, l = 0; l < s.length; l += 1) o[s[l]] = !0;
        for (var c = 0; c < a.length; c += 1) o[a[c]] = !0;
        var u = Object.keys(o);
        if (u.length !== s.length) return !1;
        var d = t,
          h = n,
          p = function (t) {
            return e(d[t], h[t]);
          };
        return u.every(p);
      },
      eu = function (e, t, n) {
        return et(e)
          ? Object.keys(e).reduce(function (r, i) {
              var s = !et(t) || !ec(e[i], t[i]);
              return n.includes(i)
                ? (s &&
                    console.warn(
                      "Unsupported prop change: options.".concat(
                        i,
                        " is not a mutable property.",
                      ),
                    ),
                  r)
                : s
                  ? U(U({}, r || {}), {}, W({}, i, e[i]))
                  : r;
            }, null)
          : null;
      },
      ed = function (e) {
        e &&
          e._registerWrapper &&
          e.registerAppInfo &&
          (e._registerWrapper({ name: "react-stripe-js", version: "4.0.2" }),
          e.registerAppInfo({
            name: "react-stripe-js",
            version: "4.0.2",
            url: "https://stripe.com/docs/stripe-js/react",
          }));
      },
      eh = z.default.createContext(null);
    eh.displayName = "ElementsContext";
    var ep = function (e, t) {
      if (!e)
        throw Error(
          "Could not find Elements context; You need to wrap the part of your app that ".concat(
            t,
            " in an <Elements> provider.",
          ),
        );
      return e;
    };
    (H.default.any, H.default.object, H.default.func.isRequired);
    var em = ["on", "session"],
      ef = z.default.createContext(null);
    ef.displayName = "CheckoutContext";
    var eg = function (e, t) {
        if (!e)
          throw Error(
            "Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(
              t,
              " in a <CheckoutProvider> provider.",
            ),
          );
        return e;
      },
      ex = function (e, t) {
        if ("success" !== t.type) return { stripe: e, checkoutState: t };
        var n = t.sdk,
          r = t.session;
        return (
          n.on,
          n.session,
          {
            stripe: e,
            checkoutState: {
              type: "success",
              checkout: Object.assign({}, r, Z(n, em)),
            },
          }
        );
      },
      ev =
        "Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",
      ey = function (e) {
        return "success" === e.type ? e.sdk : null;
      },
      eb = function (e) {
        var t = e.stripe,
          n = e.options,
          r = e.children,
          i = z.default.useMemo(
            function () {
              return ea(t, ev);
            },
            [t],
          ),
          s = K(z.default.useState({ type: "loading" }), 2),
          a = s[0],
          o = s[1],
          l = K(z.default.useState(null), 2),
          c = l[0],
          u = l[1],
          d = z.default.useRef(!1);
        z.default.useEffect(
          function () {
            var e = !0,
              t = function (t) {
                var r = t.stripe;
                r &&
                  e &&
                  !d.current &&
                  ((d.current = !0),
                  r.initCheckout(n).then(
                    function (e) {
                      (o({ type: "success", sdk: e, session: e.session() }),
                        e.on("change", function (e) {
                          o(function (t) {
                            return "success" === t.type
                              ? { type: "success", sdk: t.sdk, session: e }
                              : t;
                          });
                        }));
                    },
                    function (e) {
                      o({ type: "error", error: e });
                    },
                  ));
              };
            return (
              "async" === i.tag
                ? i.stripePromise.then(function (e) {
                    (u(e), e && t({ stripe: e }));
                  })
                : "sync" === i.tag && (u(i.stripe), t({ stripe: i.stripe })),
              function () {
                e = !1;
              }
            );
          },
          [i, n, o],
        );
        var h = eo(t);
        z.default.useEffect(
          function () {
            null !== h &&
              h !== t &&
              console.warn(
                "Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.",
              );
          },
          [h, t],
        );
        var p = ey(a),
          m = eo(n),
          f = eo(p);
        (z.default.useEffect(
          function () {
            if (p) {
              var e,
                t,
                r,
                i,
                s = !!(!f && p),
                a =
                  null == m || null == (e = m.elementsOptions)
                    ? void 0
                    : e.appearance,
                o =
                  null == n || null == (t = n.elementsOptions)
                    ? void 0
                    : t.appearance,
                l = !ec(o, a);
              o && (l || s) && p.changeAppearance(o);
              var c =
                  null == m || null == (r = m.elementsOptions)
                    ? void 0
                    : r.fonts,
                u =
                  null == n || null == (i = n.elementsOptions)
                    ? void 0
                    : i.fonts,
                d = !ec(c, u);
              u && (d || s) && p.loadFonts(u);
            }
          },
          [n, m, p, f],
        ),
          z.default.useEffect(
            function () {
              ed(c);
            },
            [c],
          ));
        var g = z.default.useMemo(
          function () {
            return ex(c, a);
          },
          [c, a],
        );
        return z.default.createElement(ef.Provider, { value: g }, r);
      };
    eb.propTypes = {
      stripe: H.default.any,
      options: H.default.shape({
        fetchClientSecret: H.default.func.isRequired,
        elementsOptions: H.default.object,
      }).isRequired,
    };
    var ej = function (e) {
        var t = z.default.useContext(ef),
          n = z.default.useContext(eh);
        if (!t) return ep(n, e);
        if (!n) return t;
        throw Error(
          "You cannot wrap the part of your app that ".concat(
            e,
            " in both <CheckoutProvider> and <Elements> providers.",
          ),
        );
      },
      ew = function () {
        return eg(z.default.useContext(ef), "calls useCheckout()")
          .checkoutState;
      },
      eC = function (e, t, n) {
        var r = !!n,
          i = z.default.useRef(n);
        (z.default.useEffect(
          function () {
            i.current = n;
          },
          [n],
        ),
          z.default.useEffect(
            function () {
              if (!r || !e) return function () {};
              var n = function () {
                i.current && i.current.apply(i, arguments);
              };
              return (
                e.on(t, n),
                function () {
                  e.off(t, n);
                }
              );
            },
            [r, t, e, i],
          ));
      },
      ek = ["mode"],
      eS = function (e) {
        return e.charAt(0).toUpperCase() + e.slice(1);
      },
      eN = function (e, t) {
        var n = "".concat(eS(e), "Element"),
          r = function (t) {
            var r,
              i = t.id,
              s = t.className,
              a = t.options,
              o = void 0 === a ? {} : a,
              l = t.onBlur,
              c = t.onFocus,
              u = t.onReady,
              d = t.onChange,
              h = t.onEscape,
              p = t.onClick,
              m = t.onLoadError,
              f = t.onLoaderStart,
              g = t.onNetworksChange,
              x = t.onConfirm,
              v = t.onCancel,
              y = t.onShippingAddressChange,
              b = t.onShippingRateChange,
              j = t.onSavedPaymentMethodRemove,
              w = t.onSavedPaymentMethodUpdate,
              C = ej("mounts <".concat(n, ">")),
              k = "elements" in C ? C.elements : null,
              S = "checkoutState" in C ? C.checkoutState : null,
              N =
                (null == S ? void 0 : S.type) === "success" ? S.checkout : null,
              E = K(z.default.useState(null), 2),
              A = E[0],
              D = E[1],
              I = z.default.useRef(null),
              M = z.default.useRef(null);
            (eC(A, "blur", l),
              eC(A, "focus", c),
              eC(A, "escape", h),
              eC(A, "click", p),
              eC(A, "loaderror", m),
              eC(A, "loaderstart", f),
              eC(A, "networkschange", g),
              eC(A, "confirm", x),
              eC(A, "cancel", v),
              eC(A, "shippingaddresschange", y),
              eC(A, "shippingratechange", b),
              eC(A, "savedpaymentmethodremove", j),
              eC(A, "savedpaymentmethodupdate", w),
              eC(A, "change", d),
              u &&
                (r =
                  "expressCheckout" === e
                    ? u
                    : function () {
                        u(A);
                      }),
              eC(A, "ready", r),
              z.default.useLayoutEffect(
                function () {
                  if (null === I.current && null !== M.current && (k || N)) {
                    var t = null;
                    if (N)
                      switch (e) {
                        case "payment":
                          t = N.createPaymentElement(o);
                          break;
                        case "address":
                          if ("mode" in o) {
                            var r = o.mode,
                              i = Z(o, ek);
                            if ("shipping" === r)
                              t = N.createShippingAddressElement(i);
                            else if ("billing" === r)
                              t = N.createBillingAddressElement(i);
                            else
                              throw Error(
                                "Invalid options.mode. mode must be 'billing' or 'shipping'.",
                              );
                          } else
                            throw Error(
                              "You must supply options.mode. mode must be 'billing' or 'shipping'.",
                            );
                          break;
                        case "expressCheckout":
                          t = N.createExpressCheckoutElement(o);
                          break;
                        case "currencySelector":
                          t = N.createCurrencySelectorElement();
                          break;
                        case "taxId":
                          t = N.createTaxIdElement(o);
                          break;
                        default:
                          throw Error(
                            "Invalid Element type ".concat(
                              n,
                              ". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />.",
                            ),
                          );
                      }
                    else k && (t = k.create(e, o));
                    ((I.current = t), D(t), t && t.mount(M.current));
                  }
                },
                [k, N, o],
              ));
            var T = eo(o);
            return (
              z.default.useEffect(
                function () {
                  if (I.current) {
                    var e = eu(o, T, ["paymentRequest"]);
                    e && "update" in I.current && I.current.update(e);
                  }
                },
                [o, T],
              ),
              z.default.useLayoutEffect(function () {
                return function () {
                  if (I.current && "function" == typeof I.current.destroy)
                    try {
                      (I.current.destroy(), (I.current = null));
                    } catch (e) {}
                };
              }, []),
              z.default.createElement("div", { id: i, className: s, ref: M })
            );
          },
          i = function (e) {
            ej("mounts <".concat(n, ">"));
            var t = e.id,
              r = e.className;
            return z.default.createElement("div", { id: t, className: r });
          },
          s = t ? i : r;
        return (
          (s.propTypes = {
            id: H.default.string,
            className: H.default.string,
            onChange: H.default.func,
            onBlur: H.default.func,
            onFocus: H.default.func,
            onReady: H.default.func,
            onEscape: H.default.func,
            onClick: H.default.func,
            onLoadError: H.default.func,
            onLoaderStart: H.default.func,
            onNetworksChange: H.default.func,
            onConfirm: H.default.func,
            onCancel: H.default.func,
            onShippingAddressChange: H.default.func,
            onShippingRateChange: H.default.func,
            onSavedPaymentMethodRemove: H.default.func,
            onSavedPaymentMethodUpdate: H.default.func,
            options: H.default.object,
          }),
          (s.displayName = n),
          (s.__elementType = e),
          s
        );
      },
      eE = "undefined" == typeof window,
      eA = ["options"];
    eN("currencySelector", eE);
    var eD = eN("payment", eE);
    (eN("expressCheckout", eE), eN("taxId", eE));
    var eI = eN("address", eE),
      eM = function (e) {
        var t = e.options,
          n = Z(e, eA),
          r = U(U({}, t), {}, { mode: "billing" });
        return z.default.createElement(eI, U(U({}, n), {}, { options: r }));
      };
    e.s(
      [
        "BillingAddressElement",
        () => eM,
        "CheckoutProvider",
        () => eb,
        "PaymentElement",
        () => eD,
        "useCheckout",
        () => ew,
      ],
      297232,
    );
    var eT = k,
      eL = (0, eT.createServerReference)(
        "4090ba3b41e265bb695303a15325d15a293faac0c1",
        eT.callServer,
        void 0,
        eT.findSourceMapURL,
        "completeTopUpPurchaseIntent",
      ),
      eP = k,
      eR = (0, eP.createServerReference)(
        "40529bd34010abf402db6cd9e71e2339ff3b1c4469",
        eP.callServer,
        void 0,
        eP.findSourceMapURL,
        "confirmTopUpPurchaseIntent",
      ),
      eF = i,
      e_ = e.i(53223),
      eO = s,
      eB = e.i(750571),
      eV = e.i(868712),
      ez = e.i(762585),
      eH = T;
    function e$({ purchaseIntent: e, onBack: t, onSuccess: n, onGoBack: r }) {
      let [i, s] = (0, R.useState)(!1),
        [a, o] = (0, R.useState)(null),
        l = (0, R.useRef)(null),
        c = (0, R.useRef)(null),
        u = () => {
          r();
        };
      (0, eH.useShortcut)((e) => {
        let t = c.current;
        t &&
          (t.contains(document.activeElement) || e.target === t) &&
          "Escape" === e.key &&
          u();
      });
      let d =
          e.purchaseIntent.lineItems?.map((e) => ({
            name: e.name,
            quantity: e.quantity,
            amount: Number(e.unitAmount) * Number(e.quantity),
          })) ?? [],
        h = Number(e.purchaseIntent.total),
        p = Number(e.purchaseIntent.tax),
        m =
          "clientSecret" in e.providerDetails
            ? e.providerDetails.clientSecret
            : null,
        f = async () => {
          try {
            if ((s(!0), o(null), l.current)) {
              let e = await l.current();
              if (!e.success)
                throw Error(e.error || "Payment confirmation failed");
            } else await eR({ intentId: e.purchaseIntent.id });
            (await eL({ intentId: e.purchaseIntent.id }),
              n?.(),
              (0, eF.closeDialog)());
          } catch (e) {
            if (
              (o(
                e instanceof Error
                  ? e.message
                  : "An error occurred while processing your request",
              ),
              "object" == typeof e && null !== e && "type" in e)
            ) {
              let {
                type: t,
                code: n,
                decline_code: r,
                param: i,
                doc_url: s,
              } = e;
              (0, e_.track)("BillingNewPaymentMethodStripeError", {
                type: t,
                code: n,
                declineCode: r,
                param: i,
                docUrl: s,
              });
            }
          } finally {
            s(!1);
          }
        };
      return (0, P.jsxs)(P.Fragment, {
        children: [
          (0, P.jsx)(F.ModalContent, {
            className: "md:p-0 max-h-[90vh] overflow-y-auto",
            ref: c,
            children: (0, P.jsxs)("div", {
              children: [
                (0, P.jsx)("div", {
                  className: "md:p-6 md:pb-0",
                  children: (0, P.jsx)("div", {
                    className: "flex flex-col gap-4 text-left",
                    children: (0, P.jsx)(F.ModalTitle, {
                      className:
                        "sm:text-2xl text-xl text-v0-gray-1000 font-semibold",
                      children: "Complete Payment",
                    }),
                  }),
                }),
                (0, P.jsx)("div", {
                  className: "grid h-fit bg-v0-background-100 sm:p-6 pt-6",
                  children:
                    m && (0, P.jsx)(eU, { clientSecret: m, confirmHandler: l }),
                }),
                (0, P.jsxs)("div", {
                  className:
                    "flex flex-col sm:p-6 pt-2 bg-v0-background-200 border-t border-t-gray-200",
                  children: [
                    (0, P.jsxs)("div", {
                      className: "flex flex-col",
                      children: [
                        d.map((e, t) =>
                          (0, P.jsxs)(
                            "div",
                            {
                              className: "flex flex-col",
                              children: [
                                (0, P.jsxs)("div", {
                                  className: "flex justify-between py-4",
                                  children: [
                                    (0, P.jsxs)("span", {
                                      className:
                                        "text-label-14 text-v0-gray-900 font-medium",
                                      children: [
                                        Number(e.quantity) > 1
                                          ? (0, P.jsxs)("span", {
                                              children: [e.quantity, " "],
                                            })
                                          : null,
                                        (0, P.jsx)("span", {
                                          children: e.name,
                                        }),
                                      ],
                                    }),
                                    (0, P.jsxs)("span", {
                                      className:
                                        "text-label-14 text-v0-gray-900 font-medium",
                                      children: ["$", e.amount.toFixed(2)],
                                    }),
                                  ],
                                }),
                                t < d.length - 1 && (0, P.jsx)("hr", {}),
                              ],
                            },
                            e.name,
                          ),
                        ),
                        (0, P.jsx)("hr", {}),
                        p > 0 &&
                          (0, P.jsxs)("div", {
                            className: "flex flex-col",
                            children: [
                              (0, P.jsxs)("div", {
                                className: "flex justify-between py-4",
                                children: [
                                  (0, P.jsx)("span", {
                                    className:
                                      "text-label-14 text-v0-gray-900 font-medium",
                                    children: "Estimated Tax",
                                  }),
                                  (0, P.jsxs)("span", {
                                    className:
                                      "text-label-14 text-v0-gray-900 font-medium",
                                    children: ["$", p.toFixed(2)],
                                  }),
                                ],
                              }),
                              (0, P.jsx)("hr", {}),
                            ],
                          }),
                        (0, P.jsxs)("div", {
                          className: "flex justify-between font-semibold py-4",
                          children: [
                            (0, P.jsx)("span", {
                              className:
                                "text-label-14 text-v0-gray-1000 font-medium",
                              children: "Total",
                            }),
                            (0, P.jsxs)("span", {
                              className:
                                "text-label-14 text-v0-gray-1000 font-medium",
                              children: ["$", Number(h).toFixed(2)],
                            }),
                          ],
                        }),
                      ],
                    }),
                    (0, P.jsx)("p", {
                      className: "text-label-14 text-v0-gray-900",
                      children:
                        'By pressing "Confirm and Pay" you\'ll make a one-time credit purchase. Your card will be charged and your credit limit will be updated immediately.',
                    }),
                  ],
                }),
                (0, P.jsx)(V.TransitionNode, {
                  children: a
                    ? (0, P.jsxs)("div", {
                        className:
                          "text-label-13 flex gap-2 pl-3 pt-3 text-v0-red-700 p-4",
                        children: [(0, P.jsx)(B.Stop, {}), a],
                      })
                    : null,
                }),
              ],
            }),
          }),
          (0, P.jsxs)(F.ModalFooter, {
            className: "border-t border-v0-gray-200 bg-v0-background-200",
            children: [
              (0, P.jsx)(_.Button, {
                size: "sm",
                type: "button",
                variant: "secondary",
                onClick: t,
                disabled: i,
                children: "Back",
              }),
              (0, P.jsx)(O.SpinnerButton, {
                size: "sm",
                type: "button",
                onClick: f,
                disabled: i,
                pending: i,
                children: "Confirm and Pay",
              }),
            ],
          }),
        ],
      });
    }
    function eU({ clientSecret: e, confirmHandler: t }) {
      let { user: n } = (0, eO.useActiveScope)(),
        r = (0, eV.useIsDark)(),
        [i, s] = (0, R.useState)(!0),
        a = n?.billingMode === "test" ? "test" : "live";
      return (0, P.jsxs)("div", {
        children: [
          i &&
            (0, P.jsxs)("div", {
              className: "flex flex-col gap-[10px]",
              children: [
                (0, P.jsxs)("div", {
                  className: "flex gap-1",
                  children: [
                    (0, P.jsx)(ez.Skeleton, {
                      className: "h-[55px] w-1/2 rounded-md",
                    }),
                    (0, P.jsx)(ez.Skeleton, {
                      className: "h-[55px] w-1/2 rounded-md",
                    }),
                  ],
                }),
                (0, P.jsx)(ez.Skeleton, {
                  className: "h-[55px] w-full rounded-md",
                }),
              ],
            }),
          (0, P.jsx)(eb, {
            stripe: (0, eB.getStripeUsingMode)(a),
            options: {
              fetchClientSecret: () => Promise.resolve(e),
              elementsOptions: {
                appearance: (0, eB.stripeAppearence)(r, { theme: "stripe" }),
                loader: "never",
                savedPaymentMethod: { enableRedisplay: "auto" },
              },
            },
            children: (0, P.jsx)(eG, {
              className: i ? "hidden" : "",
              confirmHandler: t,
              onReady: () => s(!1),
            }),
          }),
        ],
      });
    }
    function eG({ confirmHandler: e, className: t, onReady: n }) {
      let r = ew(),
        i = (0, R.useCallback)(async () => {
          try {
            if ("success" !== r.type)
              return {
                success: !1,
                error:
                  "error" === r.type
                    ? r.error.message
                    : "Checkout is not ready",
              };
            let e = await r.checkout.confirm({ redirect: "if_required" });
            if ("error" === e.type)
              return { success: !1, error: e.error.message };
            return { success: !0 };
          } catch (e) {
            return {
              success: !1,
              error: e instanceof Error ? e.message : "An error occurred",
            };
          }
        }, [r]);
      return (
        (0, R.useEffect)(
          () => (
            (e.current = i),
            () => {
              e.current = null;
            }
          ),
          [e, i],
        ),
        (0, P.jsxs)(P.Fragment, {
          children: [
            (0, P.jsx)(eD, {
              className: t,
              onReady: n,
              options: {
                layout: { type: "tabs", defaultCollapsed: !1 },
                terms: { card: "never", applePay: "never", googlePay: "never" },
              },
            }),
            (0, P.jsx)(eM, {}),
          ],
        })
      );
    }
    function eW(e) {
      return (0, t.jsx)(eq, { ...e });
    }
    function eq({ onSuccess: e, onCancel: n, role: r }) {
      let { activeScope: i, isActiveScopeReady: l } = (0, s.useActiveScope)(),
        {
          needsToRequestCredits: c,
          isLoading: u,
          shouldInvoice: d,
        } = (0, o.useCanBuyCredits)({ role: r }),
        { planInfo: h } = (0, a.usePlanInfo)(!0, i?.id, !c);
      return !l || u
        ? null
        : (0, t.jsx)(eZ, {
            paymentMethod: h?.current?.payment?.instruments?.[0]?.details,
            onCancel: n,
            canBuyCredits: !c,
            shouldInvoice: d,
            onSuccess: e,
            needsToRequestCredits: c,
          });
    }
    function eZ({
      onCancel: e,
      canBuyCredits: s,
      shouldInvoice: a,
      onSuccess: o,
      needsToRequestCredits: l,
    }) {
      let [c, u] = (0, n.useState)("amount"),
        [d, h] = (0, n.useState)(null),
        p = () => {
          "payment" === c ? u("amount") : (e?.(), (0, i.closeDialog)());
        },
        [m, f] = (0, n.useState)(y.toString()),
        g = (e) => {
          (h(e), u("payment"));
        };
      return (0, t.jsxs)(r.AtomicDialog, {
        type: "buyMoreCredits",
        className: "h-auto max-h-[calc(100svh-theme(space.8))] overflow-auto",
        children: [
          "amount" === c &&
            (0, t.jsx)(L, {
              amount: m,
              setAmount: f,
              canBuyCredits: s,
              onCancel: p,
              needsToRequestCredits: l,
              onContinue: g,
              shouldInvoice: a,
            }),
          "payment" === c &&
            d &&
            (0, t.jsx)(e$, {
              purchaseIntent: d,
              onBack: p,
              onSuccess: o,
              onGoBack: p,
            }),
        ],
      });
    }
    e.s(["CancelPlanDialog", () => th], 851658);
    var eK = t,
      eY = k,
      eJ = (0, eY.createServerReference)(
        "40857f2f3195b0ba348f63b238dc8d6a8a4d9b021a",
        eY.callServer,
        void 0,
        eY.findSourceMapURL,
        "unsubscribeAction",
      ),
      eQ = n,
      eX = e.i(403055),
      e0 = e.i(228141),
      e1 = e.i(405193);
    e.i(563948);
    var e2 = e.i(407562),
      e5 = e.i(396407),
      e3 = e.i(226368),
      e4 = e.i(216445),
      e9 = d,
      e7 = u,
      e6 = m,
      e8 = e.i(341003),
      te = e.i(304649),
      tt = e.i(580643),
      tn = k,
      tr = (0, tn.createServerReference)(
        "408403e1ddf61708a4c6bdea3e86e9c789a65078e7",
        tn.callServer,
        void 0,
        tn.findSourceMapURL,
        "cancelTeam",
      ),
      ti = s,
      ts = e.i(906261),
      ta = e.i(890446),
      to = r,
      tl = i,
      tc = e.i(242759);
    let tu = [
        { text: "Too expensive", code: "expensive" },
        { text: "Not enough variety", code: "variety" },
        { text: "Complicated to use", code: "complicated" },
        { text: "Not my stack", code: "stack" },
        { text: "Needs more components", code: "needs-components" },
        { text: "Output wasn't good", code: "output" },
        { text: "Other", code: "other" },
      ],
      td = [{ text: "Just wanted 1 month", code: "one-month" }, ...tu];
    function th({
      currentPlan: e,
      onPlanCancelled: t,
      currentPlanPricingInfo: n,
      isOnPersonalAccount: r,
      updatePlanInfo: i,
      remainingBalance: s,
    }) {
      let [a, o] = (0, eQ.useState)("confirm"),
        l = (0, tt.useMultiSelect)(),
        { activeScope: c } = (0, ti.useActiveScope)(),
        { tbb: u } = (0, tc.useFlags)(),
        [d, h] = (0, eQ.useState)(),
        p = (e) => {
          (e ||
            setTimeout(() => {
              o("confirm");
            }, 500),
            e || (0, tl.closeDialog)());
        },
        m = (0, e3.useRouter)(),
        f = async () => {
          let e =
            l.values.join("\n") +
            (d
              ? `
 Free-form reason: ${d}`
              : "");
          if (r) {
            let n = await eJ({ reason: e });
            (n.ok
              ? (o("cancelled"), t?.(n.value))
              : ("no_subscription" === n.error.code && m.refresh(),
                e2.toast.error(
                  (0, eK.jsx)(e5.ErrorMessage, {
                    code: n.error.code,
                    variant: "unstyled",
                  }),
                  { duration: 5e3 },
                ),
                p(!1)),
              await i());
          } else {
            if (!c) throw Error("No active scope found");
            let e = (0, ts.isUserScope)(c) ? null : c;
            if (!e) throw Error("No active team scope found");
            let t = await tr(e);
            (await i(),
              t.ok
                ? o("cancelled")
                : (e2.toast.error(
                    (0, eK.jsx)(e5.ErrorMessage, {
                      code: t.error.code,
                      variant: "unstyled",
                    }),
                    { duration: 5e3 },
                  ),
                  p(!1)));
          }
        },
        g = (0, eQ.useMemo)(
          () =>
            "cancelled" === a
              ? (0, eK.jsxs)(e9.ModalDescription, {
                  className: "text-center text-sm",
                  children: [
                    (0, eK.jsxs)("span", {
                      children: [
                        "Your increased limits remain active until the end of this calendar month's billing cycle which is on",
                        " ",
                      ],
                    }),
                    e.billingPeriodEndDate
                      ? (0, eK.jsx)("span", {
                          className: "font-medium text-v0-black",
                          children: (0, eX.formatShortDate)(
                            e.billingPeriodEndDate,
                          ),
                        })
                      : null,
                    (0, eK.jsx)("span", {
                      children:
                        ". After that, you'll be moved onto our Free Plan. Enjoy the continued access!",
                    }),
                  ],
                })
              : (0, eK.jsxs)("div", {
                  children: [
                    (0, eK.jsxs)(e9.ModalDescription, {
                      className: "text-sm",
                      children: [
                        "You are about to cancel your",
                        " ",
                        (0, eK.jsxs)("span", {
                          className: "font-medium text-v0-black",
                          children: [n.name, " Plan."],
                        }),
                        " ",
                        "Your increased limits will remain active until the end of your billing period.",
                        u && void 0 !== s && s > 0.01
                          ? (0, eK.jsxs)("span", {
                              className: "text-medium",
                              children: [
                                " ",
                                "Are you sure? You won't be able to use your Purchased Credits (",
                                (0, eK.jsxs)("span", {
                                  className: "font-semibold",
                                  children: ["$", s.toFixed(2), " left"],
                                }),
                                ") until you resubscribe.",
                              ],
                            })
                          : null,
                        (0, eK.jsx)("span", {
                          children:
                            " Before you go, tell us why you're cancelling:",
                        }),
                      ],
                    }),
                    (0, eK.jsx)("div", {
                      className: "text-sm",
                      children: e.billingPeriodStartDate
                        ? (0, eK.jsx)(tm, {
                            freeformReason: d,
                            planStartDate: new Date(
                              e.billingPeriodStartDate,
                            ).toISOString(),
                            reasons: l,
                            setFreeformReason: h,
                          })
                        : null,
                    }),
                  ],
                }),
          [e.billingPeriodEndDate, e.billingPeriodStartDate, n, s, d, l, a, u],
        );
      return (0, eK.jsxs)(to.AtomicDialog, {
        type: "cancelPlan",
        onOpenChange: p,
        forceOpen: "cancelled" === a,
        children: [
          "confirm" === a
            ? (0, eK.jsxs)("form", {
                action: f,
                className: "grid gap-6",
                children: [
                  (0, eK.jsx)(e9.ModalHeader, {
                    className: "flex flex-col justify-center gap-4 pb-0!",
                    children: (0, eK.jsx)(e9.ModalTitle, {
                      className: "w-full text-left",
                      children: "Confirm Plan Cancellation",
                    }),
                  }),
                  (0, eK.jsx)(e9.ModalContent, {
                    className: (0, te.cn)("gap-2", { "p-0": "confirm" === a }),
                    children: g,
                  }),
                  (0, eK.jsxs)(e9.ModalFooter, {
                    className:
                      "bg-v0-background-200 border-t border-v0-alpha-400",
                    children: [
                      (0, eK.jsx)(tf, {
                        asChild: !0,
                        onClick: () => (0, tl.closeDialog)(),
                        type: "button",
                        children: (0, eK.jsx)(e7.Button, {
                          className: "gap-2 rounded-md",
                          variant: "secondary",
                          size: "sm",
                          children: "Cancel",
                        }),
                      }),
                      (0, eK.jsx)(tp, {}),
                    ],
                  }),
                ],
              })
            : null,
          "cancelled" === a
            ? (0, eK.jsxs)(eK.Fragment, {
                children: [
                  (0, eK.jsx)(e9.ModalHeader, {
                    children: (0, eK.jsxs)(e9.ModalTitle, {
                      className: "flex flex-col gap-4 items-center",
                      children: [
                        (0, eK.jsx)(e0.CheckCircleFill, {
                          className: "rounded-full !text-v0-teal-700",
                          size: 32,
                        }),
                        "Cancellation Confirmed",
                      ],
                    }),
                  }),
                  (0, eK.jsx)(e9.ModalContent, { children: g }),
                  (0, eK.jsx)(e9.ModalFooter, {
                    children: (0, eK.jsx)(e7.Button, {
                      className: "w-full justify-center rounded-md",
                      onClick: () => (0, tl.closeDialog)(),
                      type: "button",
                      size: "sm",
                      children: "Continue",
                    }),
                  }),
                ],
              })
            : null,
        ],
      });
    }
    function tp() {
      let { pending: e } = (0, e1.useFormStatus)();
      return (0, eK.jsx)(e6.SpinnerButton, {
        disabled: e,
        pending: e,
        type: "submit",
        variant: "destructive",
        className: "rounded-md",
        children: "Confirm Cancellation",
      });
    }
    function tm({
      planStartDate: e,
      freeformReason: t,
      setFreeformReason: n,
      reasons: r,
    }) {
      let i = e && (0, eX.isWithin30Days)(e) ? td : tu;
      return (0, eK.jsxs)("div", {
        className: "mt-4 flex flex-col gap-4",
        children: [
          (0, eK.jsx)("div", {
            className: "grid grid-cols-2 gap-2",
            children: i.map(({ text: e, code: t }) =>
              (0, eK.jsx)(
                e8.RadioButton,
                { onClick: () => r.toggle(t), selected: r.has(t), children: e },
                t,
              ),
            ),
          }),
          (0, eK.jsx)(e4.Textarea, {
            onChange: (e) => n(e.target.value),
            placeholder: "Tell us how we can improve...",
            value: t,
          }),
        ],
      });
    }
    let tf = (0, eQ.forwardRef)(({ asChild: e, disabled: t, ...n }, r) => {
      let i = e ? ta.Slot : e7.Button,
        { pending: s } = (0, e1.useFormStatus)();
      return (0, eK.jsx)(i, { ...n, disabled: t || s, ref: r });
    });
    tf.displayName = "FormButton";
  },
  936990,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(242759),
      r = e.i(667660);
    function i(e) {
      let { tbb: i } = (0, n.useFlags)(),
        { activeScope: s } = (0, r.useActiveScope)(),
        {
          data: a,
          error: o,
          isLoading: l,
          isValidating: c,
          mutate: u,
        } = (0, t.default)(
          i ? ["/chat/api/plan-info", s] : null,
          async ([e]) => {
            let t = await fetch(e);
            if (!t.ok) {
              let e = t.headers.get("content-type");
              if (e && -1 !== e.indexOf("application/json"))
                throw Error(
                  (await t.json()).message || "Failed to get plan info",
                );
              throw Error(
                `Failed to get plan info: ${t.status} ${t.statusText}`,
              );
            }
            return t.json();
          },
          { revalidateOnFocus: !1, ...e },
        );
      return {
        planInfo: a,
        error: o,
        isLoading: l,
        isValidating: c,
        mutate: u,
      };
    }
    e.s(["useTokenBillingPlanInfo", () => i]);
  },
  460816,
  (e) => {
    "use strict";
    let t = (0, e.i(563261).default)(
      () => e.A(437460).then((e) => e.ClientStripeProvider),
      { loadableGenerated: { modules: [602876] }, ssr: !1 },
    );
    e.s(["StripeProvider", 0, t]);
  },
  298515,
  396407,
  74656,
  150557,
  999647,
  166749,
  931325,
  878279,
  70772,
  (e) => {
    "use strict";
    let t = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "usd",
      }),
      n = new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "usd",
        maximumFractionDigits: 0,
      }),
      r = (e, r = "default") => {
        switch (r) {
          case "default":
            return t.format(e / 100);
          case "display":
            return n.format(e / 100);
        }
      };
    function i(e) {
      return r(
        e.reduce((e, t) => e + t.price.cents, 0),
        "display",
      );
    }
    function s(e) {
      return i(e.items);
    }
    function a(e) {
      return i(e.items);
    }
    e.s(
      [
        "formatCents",
        0,
        r,
        "formatPlanTotalPrice",
        () => s,
        "formatSubscriptionTotalPrice",
        () => a,
      ],
      298515,
    );
    var o = e.i(324834),
      l = e.i(654335),
      c = e.i(888982),
      u = e.i(89440),
      d = e.i(403055);
    let h = {
        rate_limited: "Too many requests, try again in 1 minute.",
        payment_method_required:
          "Payment method required. Add a payment method and try again.",
        plan_not_self_serve: "Contact sales to upgrade to this plan.",
        has_subscription: "You already have a subscription.",
        user_plans: "You are unable to upgrade your plan at this time.",
        no_subscription: "You do not have a subscription to cancel.",
        no_active_subscription:
          "You do not have an active subscription to change.",
        already_on_plan: "You are already subscribed to this plan.",
        plan_not_available: "This plan is not available at this time.",
        no_scheduled_plan_change:
          "You do not have any scheduled plan changes to cancel.",
        no_on_demand_credits:
          "Your plan does not include on-demand credit purchases. Upgrade your plan and try again.",
        duplicate_idempotency_key:
          "Your previous subscription modification is processing. Please try again in a minute.",
        upgrade_attempts_exceeded:
          "Your payment has been declined. Please check your information and try again later.",
        no_session: "Log in and try again.",
      },
      p = (0, u.cva)("", {
        variants: {
          variant: {
            default: "text-sm font-medium text-destructive",
            unstyled: "",
          },
        },
        defaultVariants: { variant: "default" },
      }),
      m = (0, u.cva)("h-auto p-0 underline", {
        variants: {
          variant: { default: "text-destructive", unstyled: "text-inherit" },
        },
        defaultVariants: { variant: "default" },
      });
    function f({ code: e, variant: t, className: n }) {
      let r = e ? h[e] : void 0;
      return (0, o.jsx)("div", {
        className: (0, d.cn)(p({ variant: t, className: n })),
        children:
          r ||
          (0, o.jsxs)(o.Fragment, {
            children: [
              "We've encountered an unexpected issue. Should this continue, kindly reach out to our",
              " ",
              (0, o.jsx)(c.Button, {
                asChild: !0,
                className: (0, d.cn)(m({ variant: t })),
                variant: "link",
                children: (0, o.jsx)(l.default, {
                  href: "https://vercel.com/help",
                  target: "_blank",
                  children: "support",
                }),
              }),
              " ",
              "team.",
            ],
          }),
      });
    }
    function g(e) {
      if ("object" == typeof e && null !== e) {
        if ("code" in e && "string" == typeof e.code) return e.code;
        if ("message" in e && "string" == typeof e.message) return e.message;
      }
      if ("string" == typeof e) return e;
    }
    e.s(["ErrorMessage", () => f, "codeFromError", () => g], 396407);
    var x = o,
      v = e.i(460816),
      y = e.i(576191),
      b = e.i(418625),
      j = y;
    function w({ action: e, additionalFields: t = {} }) {
      let n = (0, j.useId)(),
        r = (0, j.useRef)(new FormData()),
        i = (0, j.useRef)(null),
        [s, a] = (0, j.useState)("idle"),
        [o, l] = (0, j.useState)(null);
      return {
        status: s,
        error: o,
        submit: (e) => {
          if (i.current)
            throw Error("Cannot submit form while another action is pending");
          (a("submitting"), l(null));
          let s = document.getElementById(n);
          if (!s)
            throw Error(`No form found for useImperativeHandle with id ${n}`);
          let o = new FormData();
          if (e) for (let [t, n] of Object.entries(e)) o.append(t, n);
          for (let [e, n] of Object.entries(t)) o.append(e, n);
          return (
            (r.current = o),
            new Promise((e, t) => {
              ((i.current = { resolve: e, reject: t }), s.requestSubmit());
            })
          );
        },
        props: {
          id: n,
          action: async () => {
            try {
              let t = await e(r.current);
              t.ok
                ? i.current?.resolve(t.value)
                : (l(t.error.message), i.current?.reject(t.error));
            } catch (e) {
              (l(e instanceof Error ? e.message : "Unknown error"),
                i.current?.reject());
            } finally {
              ((i.current = null), a("idle"));
            }
          },
          onSubmit: (e) => e.stopPropagation(),
        },
      };
    }
    e.s(["useImperativeForm", () => w], 74656);
    var C = e.i(919012),
      k = (0, C.createServerReference)(
        "40bd2eb6d6c217d6f70e2572ad661c4a2b4d2effc8",
        C.callServer,
        void 0,
        C.findSourceMapURL,
        "changePlanAction",
      ),
      S = o,
      N = e.i(899002),
      E = y,
      A = e.i(405193),
      D = e.i(504015);
    let I = (0, E.forwardRef)((e, t) => {
      var n;
      let {
        container: r = null == globalThis || null == (n = globalThis.document)
          ? void 0
          : n.body,
        ...i
      } = e;
      return r
        ? A.default.createPortal(
            (0, E.createElement)(
              D.Primitive.div,
              (0, N.default)({}, i, { ref: t }),
            ),
            r,
          )
        : null;
    });
    var M = y;
    let T = (e) => {
      let [t, n] = M.default.useState(0),
        r = M.default.useRef(null);
      return (
        M.default.useEffect(() => {
          ((r.current = document.body), n((e) => e + 1));
        }, []),
        (0, S.jsx)(I, { container: r.current, ...e })
      );
    };
    ((T.displayName = I.displayName), e.s(["Portal", () => T], 150557));
    var L = d,
      P = o,
      R = o,
      F = C,
      _ = (0, F.createServerReference)(
        "4007733cced662d458b793a54402f1ee6e1c2a169d",
        F.callServer,
        void 0,
        F.findSourceMapURL,
        "createPaymentMethodAction",
      );
    e.s(["createPaymentMethodAction", () => _], 999647);
    var O = C,
      B = (0, O.createServerReference)(
        "40307c1c9601cef2bde7ef63abbbad2bb5e099b952",
        O.callServer,
        void 0,
        O.findSourceMapURL,
        "updateBillingAddressAction",
      ),
      V = C,
      z = (0, V.createServerReference)(
        "40aca142b90b80786430a975fab98fa233cdce29bf",
        V.callServer,
        void 0,
        V.findSourceMapURL,
        "upsertPaymentMethodAction",
      );
    e.s(["upsertPaymentMethodAction", () => z], 166749);
    var H = e.i(781044),
      $ = e.i(477510);
    e.s(["PlusIcon", () => $.default], 931325);
    var $ = $,
      U = y,
      G = o,
      W = e.i(431141),
      q = e.i(790942);
    let Z = [
      "alipay",
      "diners",
      "discover",
      "elo",
      "hipercard",
      "jcb",
      "maestro",
      "unionpay",
    ];
    function K({ brand: e }) {
      switch (e) {
        case "amex":
          return (0, G.jsx)(Y, {});
        case "visa":
          return (0, G.jsx)(J, {});
        case "paypal":
          return (0, G.jsx)(Q, {});
        case "mastercard":
          return (0, G.jsx)(X, {});
      }
      return Z.includes(e)
        ? (0, G.jsx)(W.default, {
            alt: `logo for ${e}`,
            height: "32",
            src: `/assets/cardbrands/${e}.svg`,
            width: "32",
            className: "shrink-0",
          })
        : (0, G.jsx)("div", {
            className:
              "size-8 bg-v0-background-200 border border-v0-alpha-400 rounded-sm flex items-center justify-center",
            children: (0, G.jsx)(q.CreditCard, {
              className: "size-4 !text-v0-gray-900 shrink-0",
            }),
          });
    }
    let Y = () =>
        (0, G.jsxs)("svg", {
          width: "32",
          height: "32",
          viewBox: "0 0 33 32",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
          className: "shrink-0",
          children: [
            (0, G.jsxs)("g", {
              clipPath: "url(#clip0_14699_9492)",
              children: [
                (0, G.jsx)("rect", {
                  x: "0.833008",
                  width: "32",
                  height: "32",
                  rx: "4",
                  fill: "#016FD0",
                }),
                (0, G.jsx)("path", {
                  d: "M15.0318 5H32.8318L32.832 27H13.832V17H9.63184L15.0318 5Z",
                  fill: "white",
                }),
                (0, G.jsx)("path", {
                  d: "M22.833 18.8428H18.0996V20.0938H22.7207V21.9062H18.0996V23.1357H22.833V25H15.833V17H22.833V18.8428ZM27.8906 19.5352L30.1279 17H32.833V17.0625L29.2588 20.9951L32.833 24.8867V25H30.1006L27.8301 22.4395L25.582 25H22.833L26.4844 20.9951L22.833 17H25.6592L27.8906 19.5352ZM22.833 15H20.3125L19.6357 13.3975H15.9697L15.293 15H12.833L16.4199 7H19.2617L22.833 15ZM32.833 14.9814L30.7656 15V9.51758L28.8135 14.9814H26.9258L24.9326 9.49902V14.9814H22.833V7L26.1719 7.01172L27.8896 11.9189L29.6201 7H32.833V14.9814ZM16.7275 11.6025H18.8779L17.8027 9.05566L16.7275 11.6025Z",
                  fill: "#016FD0",
                }),
              ],
            }),
            (0, G.jsx)("defs", {
              children: (0, G.jsx)("clipPath", {
                id: "clip0_14699_9492",
                children: (0, G.jsx)("rect", {
                  x: "0.833008",
                  width: "32",
                  height: "32",
                  rx: "4",
                  fill: "white",
                }),
              }),
            }),
          ],
        }),
      J = () =>
        (0, G.jsxs)("svg", {
          width: "33",
          height: "32",
          viewBox: "0 0 33 32",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
          className: "shrink-0",
          children: [
            (0, G.jsxs)("g", {
              clipPath: "url(#clip0_14699_9489)",
              children: [
                (0, G.jsx)("rect", {
                  x: "0.166992",
                  width: "32",
                  height: "32",
                  rx: "4",
                  fill: "#1434CB",
                }),
                (0, G.jsx)("path", {
                  d: "M20.509 8L16.351 18.742L14.619 9.6C14.387 8.572 13.579 8 12.771 8H6.78299L6.66699 8.458C8.05299 8.8 9.09499 9.142 10.019 9.6C10.307 9.744 10.547 10 10.693 11.086L13.695 24H17.967L24.667 8H20.509Z",
                  fill: "url(#paint0_linear_14699_9489)",
                }),
              ],
            }),
            (0, G.jsxs)("defs", {
              children: [
                (0, G.jsx)("linearGradient", {
                  id: "paint0_linear_14699_9489",
                  x1: "152.053",
                  y1: "215.008",
                  x2: "155.169",
                  y2: "89.964",
                  gradientUnits: "userSpaceOnUse",
                  children: (0, G.jsx)("stop", {
                    offset: "1",
                    stopColor: "white",
                  }),
                }),
                (0, G.jsx)("clipPath", {
                  id: "clip0_14699_9489",
                  children: (0, G.jsx)("rect", {
                    x: "0.166992",
                    width: "32",
                    height: "32",
                    rx: "4",
                    fill: "white",
                  }),
                }),
              ],
            }),
          ],
        }),
      Q = () =>
        (0, G.jsxs)("svg", {
          width: "33",
          height: "32",
          viewBox: "0 0 33 32",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
          className: "shrink-0",
          children: [
            (0, G.jsx)("rect", {
              x: "0.5",
              width: "32",
              height: "32",
              rx: "4",
              fill: "white",
            }),
            (0, G.jsx)("path", {
              d: "M16.217 16.8282C19.7944 16.7859 22.4936 15.3622 23.6313 12.0494C24.7745 8.8317 24.4834 5.8575 21.3028 4.62435C19.2441 3.82525 18.5667 4.02106 10.5067 4.02106C9.98276 4.02106 9.52764 4.40741 9.44818 4.91543L6.34703 24.5972C6.29413 24.9835 6.58516 25.3328 6.98732 25.3328H10.9353C11.0412 25.3328 11.0782 25.2958 11.0941 25.2005C11.311 23.8615 12.0467 19.125 12.2319 18.1089C12.5389 16.4577 13.9202 16.8653 16.217 16.8282Z",
              fill: "#002D8A",
            }),
            (0, G.jsx)("path", {
              d: "M25.2351 10.4935C25.1398 10.4247 25.1028 10.3982 25.0763 10.5622C24.9704 11.1656 24.8064 11.753 24.6105 12.3405C22.4989 18.363 16.6457 17.8391 13.7879 17.8391C13.4651 17.8391 13.2534 18.0138 13.211 18.3365C12.0151 25.7668 11.7769 27.3174 11.7769 27.3174C11.7239 27.6931 11.9621 28.0001 12.3379 28.0001H15.6984C16.1535 28.0001 16.5293 27.6666 16.6193 27.2116C16.6563 26.9258 16.5611 27.5344 17.3814 22.3798C17.6247 21.2156 18.1381 21.3373 18.9319 21.3373C22.6895 21.3373 25.6213 19.8131 26.4945 15.3942C26.8386 13.5524 26.7381 11.6154 25.2351 10.4935Z",
              fill: "#019BE1",
            }),
          ],
        }),
      X = () =>
        (0, G.jsxs)("svg", {
          width: "33",
          height: "32",
          viewBox: "0 0 33 32",
          fill: "none",
          xmlns: "http://www.w3.org/2000/svg",
          className: "shrink-0",
          children: [
            (0, G.jsxs)("g", {
              clipPath: "url(#clip0_14699_9214)",
              children: [
                (0, G.jsx)("rect", {
                  x: "0.5",
                  width: "32",
                  height: "32",
                  rx: "4",
                  fill: "black",
                }),
                (0, G.jsx)("path", {
                  d: "M19.4581 10.6531H13.5098V21.3437H19.4581V10.6531Z",
                  fill: "#FF5F00",
                }),
                (0, G.jsx)("path", {
                  d: "M13.9027 15.9986C13.9017 14.969 14.1351 13.9527 14.5851 13.0266C15.0351 12.1005 15.6899 11.289 16.4999 10.6534C15.4969 9.8651 14.2924 9.37488 13.0241 9.23877C11.7557 9.10265 10.4746 9.32614 9.32721 9.88369C8.17984 10.4412 7.21248 11.3103 6.53569 12.3917C5.85891 13.473 5.5 14.7229 5.5 15.9986C5.5 17.2743 5.85891 18.5242 6.53569 19.6055C7.21248 20.6869 8.17984 21.556 9.32721 22.1135C10.4746 22.6711 11.7557 22.8946 13.0241 22.7585C14.2924 22.6224 15.4969 22.1321 16.4999 21.3438C15.6899 20.7083 15.0351 19.8967 14.5851 18.9706C14.1351 18.0446 13.9017 17.0282 13.9027 15.9986Z",
                  fill: "#EB001B",
                }),
                (0, G.jsx)("path", {
                  d: "M20.7016 9.19996C19.1774 9.1976 17.697 9.70971 16.5 10.6534C17.3093 11.2896 17.9637 12.1013 18.4136 13.0272C18.8635 13.9531 19.0973 14.9692 19.0973 15.9986C19.0973 17.0281 18.8635 18.0441 18.4136 18.97C17.9637 19.896 17.3093 20.7076 16.5 21.3438C17.3521 22.0136 18.3519 22.47 19.4161 22.6749C20.4804 22.8798 21.5782 22.8273 22.618 22.5218C23.6579 22.2162 24.6096 21.6666 25.3939 20.9186C26.1781 20.1706 26.7722 19.2459 27.1266 18.2217C27.4809 17.1975 27.5853 16.1034 27.431 15.0306C27.2767 13.9579 26.8681 12.9376 26.2394 12.0548C25.6107 11.172 24.7801 10.4523 23.8168 9.95568C22.8535 9.45908 21.7854 9.19997 20.7016 9.19996Z",
                  fill: "#F79E1B",
                }),
              ],
            }),
            (0, G.jsx)("defs", {
              children: (0, G.jsx)("clipPath", {
                id: "clip0_14699_9214",
                children: (0, G.jsx)("rect", {
                  x: "0.5",
                  width: "32",
                  height: "32",
                  rx: "4",
                  fill: "white",
                }),
              }),
            }),
          ],
        });
    e.s(["CreditCardBrand", () => K], 878279);
    var ee = e.i(576949),
      et = e.i(602544);
    e.i(563948);
    var en = e.i(407562),
      er = e.i(206037),
      ei = e.i(762585);
    async function es(t, n) {
      if (!n) return;
      let [{ subdivision: r, data: i }, { default: s }] = await Promise.all([
          e.A(625498),
          e.A(344236),
        ]),
        a = r(t, n);
      if (!a) {
        let e = i[t];
        if (!e) return;
        for (let [t, r] of Object.entries(e.sub)) {
          let e = n.toLowerCase(),
            i = r.name.toLowerCase(),
            a = s.single(e, i);
          if (a && a.score > 0.5) return t;
        }
        return;
      }
      return a.code;
    }
    function ea(e, t) {
      switch (t.type) {
        case "submit":
          return { ...e, status: "submitting" };
        case "added":
          return { ...e, status: "new-card", paymentMethod: t.paymentMethod };
        case "go-to-add-new":
          if (t.clearPaymentMethod)
            return { ...e, status: "add-new", paymentMethod: void 0 };
          return { ...e, status: "add-new" };
        case "go-to-use-existing":
          if (t.paymentMethod)
            return {
              ...e,
              status: "use-existing",
              paymentMethod: t.paymentMethod,
            };
          if (e.paymentMethod)
            return {
              ...e,
              status: "use-existing",
              paymentMethod: e.paymentMethod,
            };
          return e;
      }
    }
    function eo({
      teamSlug: e,
      defaultNew: t = !1,
      maybePlan: n,
      teamId: r,
      billingDetails: i,
    }) {
      let { planInfo: s } = (0, er.usePlanInfo)(!0, r, !0),
        [a, o] = (0, U.useReducer)(
          ea,
          t
            ? { status: "add-new" }
            : s?.paymentMethod
              ? { status: "use-existing", paymentMethod: s.paymentMethod }
              : { status: "loading" },
        );
      (0, U.useEffect)(() => {
        if (!t && s) {
          let e = !s.paymentMethod,
            t = s.paymentMethod?.id !== a.paymentMethod?.id;
          e
            ? o({ type: "go-to-add-new", clearPaymentMethod: !0 })
            : t &&
              s.paymentMethod &&
              o({ type: "go-to-use-existing", paymentMethod: s.paymentMethod });
        }
      }, [t, s, a.paymentMethod?.id]);
      let l = (0, H.useStripe)(),
        c = (0, H.useElements)(),
        [u, d] = (0, U.useState)(!1),
        h = w({ action: _, additionalFields: e ? { teamSlug: e } : void 0 }),
        p = w({ action: z, additionalFields: e ? { teamSlug: e } : void 0 }),
        m = w({ action: B, additionalFields: e ? { teamSlug: e } : void 0 }),
        f = "add-new" === a.status,
        g = (0, U.useCallback)(async () => {
          if (!f || !l || !c) return null;
          try {
            o({ type: "submit" });
            let [t, n] = await Promise.all([
              c.submit(),
              c.getElement("address")?.getValue(),
            ]);
            if (t.error) throw t.error;
            let { client_secret: r } = await h.submit(
                e ? { teamSlug: e } : void 0,
              ),
              s = await l.confirmSetup({
                elements: c,
                clientSecret: r,
                redirect: "if_required",
                confirmParams: {
                  return_url: window.location.href,
                  payment_method_data: {
                    allow_redisplay: "always",
                    billing_details: i,
                  },
                },
              });
            if (s.error) throw s.error;
            if (s.setupIntent.payment_method) {
              let t =
                  "string" == typeof s.setupIntent.payment_method
                    ? s.setupIntent.payment_method
                    : s.setupIntent.payment_method.id,
                r = await p.submit({
                  paymentMethod: t,
                  ...(e ? { teamSlug: e } : void 0),
                });
              if (n?.value) {
                let t = await es(
                    n.value.address.country,
                    n.value.address.state,
                  ),
                  r = {
                    name: n.value.name,
                    ...n.value.address,
                    line2: n.value.address.line2 ?? "",
                    ...(t ? { state: t } : {}),
                    ...(e ? { teamSlug: e } : {}),
                  };
                await m.submit(r);
              }
              return r.paymentMethod;
            }
          } catch (e) {
            (c.getElement("card")?.focus(),
              o({ type: "go-to-add-new" }),
              el(en.toast, e));
          }
          return null;
        }, [i, h, c, f, l, e, m, p]);
      return (0, U.useMemo)(() => {
        switch (a.status) {
          case "new-card":
          case "use-existing":
            return {
              status: "use-existing",
              send: o,
              form: (0, R.jsx)(ec, {
                onAddNewCard: () => o({ type: "go-to-add-new" }),
                paymentMethod: a.paymentMethod,
              }),
            };
          case "add-new":
          case "submitting":
            return {
              status: a.status,
              send: o,
              form: (0, R.jsxs)("div", {
                className: "flex flex-col gap-4",
                children: [
                  (0, R.jsx)("div", {
                    className: "font-medium",
                    children: "Payment Method",
                  }),
                  (0, R.jsx)("div", {
                    children: (0, R.jsx)(H.PaymentElement, {
                      onReady: () => d(!0),
                      options: {
                        terms: { card: "never" },
                        wallets: { googlePay: "never", applePay: "never" },
                        layout: { type: "tabs", defaultCollapsed: !0 },
                        defaultValues: {
                          billingDetails: i
                            ? { name: i.name, email: i.email }
                            : void 0,
                        },
                      },
                    }),
                  }),
                  (0, R.jsx)("div", {
                    children: (0, R.jsx)(H.AddressElement, {
                      options: { mode: "billing", display: { name: "full" } },
                    }),
                  }),
                  u &&
                    a.paymentMethod &&
                    (0, R.jsxs)("button", {
                      className:
                        "flex items-center gap-2 text-sm text-v0-blue-700",
                      onClick: () => o({ type: "go-to-use-existing" }),
                      type: "button",
                      children: [
                        (0, R.jsx)(ee.ArrowLeft, { size: 16 }),
                        (0, R.jsx)("span", {
                          className: "text-sm font-medium",
                          children: "Use existing payment method",
                        }),
                      ],
                    }),
                  (0, R.jsxs)(T, {
                    children: [
                      (0, R.jsx)("form", { ...h.props }),
                      (0, R.jsx)("form", { ...p.props }),
                      (0, R.jsx)("form", { ...m.props }),
                    ],
                  }),
                ],
              }),
              submit: g,
              useExisting: a.paymentMethod
                ? () => o({ type: "go-to-use-existing" })
                : void 0,
            };
          default: {
            let e = "pro" === n || "enterprise" === n;
            return {
              status: "loading",
              send: o,
              form: (0, R.jsxs)("div", {
                className: "flex flex-col gap-4",
                children: [
                  (0, R.jsx)("div", {
                    className: "font-medium",
                    children: "Payment Method",
                  }),
                  (0, R.jsx)(ei.Skeleton, {
                    className: e ? "h-[82px]" : "h-[378px]",
                  }),
                ],
              }),
            };
          }
        }
      }, [a.status, a.paymentMethod, i, u, h.props, p.props, m.props, g, n]);
    }
    function el(e, t) {
      let { code: n, message: r } = Object(t),
        i = !n;
      e.error(i ? "An unknown error occurred. Please contact support." : r);
    }
    function ec({ paymentMethod: e, onAddNewCard: t }) {
      return (0, R.jsxs)("div", {
        className: "flex flex-col gap-4",
        children: [
          (0, R.jsx)("div", {
            className: "font-medium",
            children: "Payment Method",
          }),
          (0, R.jsxs)("div", {
            className:
              "flex items-center justify-between rounded-lg border border-v0-blue-700 bg-v0-white p-3",
            children: [
              (0, R.jsxs)("span", {
                className: "flex items-center gap-4 text-sm",
                children: [
                  (0, R.jsx)(K, { brand: e.brand }),
                  (0, R.jsxs)("span", {
                    className: "flex items-center gap-1 text-sm font-medium",
                    children: [
                      (0, R.jsx)("span", { children: "" }),
                      (0, R.jsx)("span", { children: e.last4 }),
                    ],
                  }),
                ],
              }),
              (0, R.jsx)("span", {
                className: "text-v0-white",
                children: (0, R.jsx)(et.Check, {
                  className: "rounded-sm bg-v0-blue-700 p-1",
                  size: 16,
                }),
              }),
            ],
          }),
          (0, R.jsxs)("button", {
            className: "flex items-center gap-2 text-sm text-v0-blue-700",
            onClick: t,
            type: "button",
            children: [
              (0, R.jsx)($.default, { size: 16 }),
              (0, R.jsx)("span", {
                className: "text-sm font-medium",
                children: "Use a different payment method",
              }),
            ],
          }),
        ],
      });
    }
    var eu = e.i(926788),
      ed = e.i(176248),
      eh = e.i(707827),
      ep = y,
      em = e.i(53223),
      ef = e.i(667660),
      eg = e.i(127169);
    function ex({
      disabled: e,
      onPaymentSelected: t,
      paymentMethod: n,
      onBack: r,
      description: i,
      willCharge: s,
      onPaymentMethodAdded: a,
    }) {
      let { user: o, isTeam: l, activeScope: c } = (0, ef.useActiveScope)(),
        u = eo({
          teamSlug: l && c && "slug" in c ? c.slug : void 0,
          teamId: l && c ? c.id : void 0,
          defaultNew: !n,
          billingDetails: o ? { name: o.name, email: o.email } : void 0,
        }),
        d = (0, ep.useRef)(null),
        h = e || "submitting" === u.status,
        p = "Add Card" + (s ? " and Pay" : "");
      "use-existing" === u.status && (p = "Confirm" + (s ? " and Pay" : ""));
      let m = async () => {
        try {
          if ("add-new" === u.status) {
            let e = await u.submit();
            e && (a?.(e), t?.());
          } else t?.();
        } catch (e) {
          if ("object" == typeof e && null !== e && "type" in e) {
            let { type: t, code: n, decline_code: r, param: i, doc_url: s } = e;
            (0, em.track)("BillingNewPaymentMethodStripeError", {
              type: t,
              code: n,
              declineCode: r,
              param: i,
              docUrl: s,
            });
          }
        }
      };
      return (
        (0, eg.useShortcut)((e) => {
          ("Escape" === e.key && r(), "Enter" === e.key && m());
        }),
        (0, P.jsxs)(P.Fragment, {
          children: [
            (0, P.jsxs)("div", {
              className: "grid h-fit px-4 max-h-[60vh] overflow-y-auto",
              ref: d,
              children: [
                u.form,
                (0, P.jsx)("div", {
                  className: "bottom-0 mb-2 mt-4 text-sm text-gray-500",
                  children:
                    i ??
                    (0, P.jsxs)(P.Fragment, {
                      children: [
                        'By clicking on "',
                        p,
                        '" you will link the new payment method to your Vercel account',
                      ],
                    }),
                }),
              ],
            }),
            (0, P.jsxs)(eu.DialogFooter, {
              className:
                "flex flex-col-reverse gap-2 px-4 py-0 md:flex-row md:justify-between",
              children: [
                (0, P.jsx)(ed.Button, {
                  className: "w-full md:w-auto",
                  disabled: h,
                  onClick: () => {
                    "add-new" === u.status && u.useExisting
                      ? u.useExisting()
                      : r();
                  },
                  size: "sm",
                  variant: "secondary",
                  children: "Cancel",
                }),
                (0, P.jsxs)(ed.Button, {
                  disabled: h,
                  onClick: m,
                  size: "sm",
                  children: [
                    h ? (0, P.jsx)(eh.Spinner, { size: 14 }) : null,
                    p,
                  ],
                }),
              ],
            }),
          ],
        })
      );
    }
    var ev = en,
      ey = e.i(226368),
      eb = y;
    function ej(e, t) {
      switch (t.type) {
        case "set-payment-method":
          if (!e) return e;
          return (
            e.payment?.instruments &&
              e.payment.instruments.unshift({ details: t.paymentMethod }),
            { ...e }
          );
        case "set-billing-details":
          return t.subscription;
      }
    }
    function ew(e) {
      let [t, n] = (0, eb.useOptimistic)(e, ej);
      return {
        subscription: t,
        optimisticSetPaymentMethod: (e) => {
          (0, eb.startTransition)(() => {
            n({ type: "set-payment-method", paymentMethod: e });
          });
        },
        optimisticSetBillingDetails: (e) => {
          (0, eb.startTransition)(() => {
            n({ type: "set-billing-details", subscription: e });
          });
        },
      };
    }
    var eC = e.i(686832),
      ek = er,
      eS = ef;
    function eN() {
      let { data: e, mutate: t } = (0, b.default)("paymentDialogOpen", null, {
        fallbackData: null,
      });
      return {
        paymentDialogOpen: !!e,
        selectedPlan: e,
        setPaymentDialogPlan: t,
      };
    }
    function eE({ billingPromise: e, onBack: t }) {
      let n = (0, ey.useRouter)(),
        {
          isActiveScopeReady: r,
          isTeam: i,
          user: a,
        } = (0, eS.useActiveScope)(),
        { update: o } = (0, ek.usePlanInfo)(r && !i, a?.id),
        l = w({ action: k, additionalFields: { source: "chat" } }),
        {
          paymentDialogOpen: c,
          selectedPlan: u,
          setPaymentDialogPlan: d,
        } = eN(),
        h = (0, y.use)(e),
        {
          subscription: p,
          optimisticSetBillingDetails: m,
          optimisticSetPaymentMethod: b,
        } = ew(h[0].ok ? h[0].value : null),
        j = (0, y.useMemo)(() => h[1].find((e) => "v0-level3" === e.slug), [h]);
      (0, y.useEffect)(() => () => void d(null), [d]);
      let C = u && "v0-level3" === u ? j : null,
        S = (0, y.useCallback)(async () => {
          if (C)
            try {
              let e = await l.submit({
                planSlug: C.slug,
                entitlement: "messages",
                entitlementFromCurrentSession: "yes",
              });
              (m(e),
                o(),
                ev.toast.success("Upgraded plan successfully."),
                d(null));
            } catch (t) {
              let e = g(t);
              "no_active_subscription" === e || "already_on_plan" === e
                ? n.refresh()
                : ev.toast.error(
                    (0, x.jsx)(f, { code: e, variant: "unstyled" }),
                    { duration: 5e3 },
                  );
            }
        }, [l, o, m, n, d, C]),
        N = p?.payment?.instruments?.[0]?.details,
        E = (0, y.useMemo)(
          () =>
            C
              ? (0, x.jsx)(ex, {
                  description: (0, x.jsxs)(x.Fragment, {
                    children: [
                      "By clicking on Confirm you'll start your",
                      " ",
                      C.name,
                      " plan subscription of",
                      " ",
                      (0, x.jsxs)("span", {
                        className: "font-medium text-black",
                        children: [s(C), "/month,"],
                      }),
                      " ",
                      "with a renewal date of the",
                      " ",
                      (0, x.jsxs)("span", {
                        className: "font-medium text-black",
                        children: [
                          (0, L.formatOrdinalSuffix)(new Date().getDate()),
                          " of each month",
                        ],
                      }),
                      ".",
                    ],
                  }),
                  disabled: "submitting" === l.status,
                  onBack: () => {
                    (t?.(), d(null));
                  },
                  onPaymentMethodAdded: b,
                  onPaymentSelected: S,
                  paymentMethod: N,
                  willCharge: !0,
                })
              : null,
          [N, l.status, t, S, b, d, C],
        );
      return p
        ? (0, x.jsxs)(v.StripeProvider, {
            mode: p.account.mode || "live",
            children: [
              (0, x.jsx)(eC.Modal, {
                onOpenChange: (e) => (e ? d(C?.slug) : d(null)),
                open: c,
                children: (0, x.jsxs)(eC.ModalContent, {
                  className:
                    "flex max-h-[90vh] flex-col gap-6 overflow-y-auto md:px-2",
                  children: [
                    (0, x.jsxs)(eC.ModalTitle, {
                      className: "px-3",
                      children: [
                        "Subscribing to",
                        " ",
                        C?.slug === "v0-ultra"
                          ? (0, x.jsx)("span", { children: "Ultra" })
                          : (0, x.jsx)("span", { children: "Premium" }),
                        (0, x.jsx)("span", { children: " plan" }),
                      ],
                    }),
                    E,
                  ],
                }),
              }),
              (0, x.jsx)(T, { children: (0, x.jsx)("form", { ...l.props }) }),
            ],
          })
        : null;
    }
    e.s(["PaymentDialog", () => eE, "usePaymentDialog", () => eN], 70772);
  },
  739976,
  (e, t, n) => {
    "use strict";
    (Object.defineProperty(n, "__esModule", { value: !0 }),
      (n.parse = c),
      (n.serialize = h));
    let r = /^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,
      i =
        /^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,
      s =
        /^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,
      a = /^[\u0020-\u003A\u003D-\u007E]*$/,
      o = Object.prototype.toString,
      l = (() => {
        let e = function () {};
        return ((e.prototype = Object.create(null)), e);
      })();
    function c(e, t) {
      let n = new l(),
        r = e.length;
      if (r < 2) return n;
      let i = t?.decode || p,
        s = 0;
      do {
        let t = e.indexOf("=", s);
        if (-1 === t) break;
        let a = e.indexOf(";", s),
          o = -1 === a ? r : a;
        if (t > o) {
          s = e.lastIndexOf(";", t - 1) + 1;
          continue;
        }
        let l = u(e, s, t),
          c = d(e, t, l),
          h = e.slice(l, c);
        if (void 0 === n[h]) {
          let r = u(e, t + 1, o),
            s = d(e, o, r),
            a = i(e.slice(r, s));
          n[h] = a;
        }
        s = o + 1;
      } while (s < r);
      return n;
    }
    function u(e, t, n) {
      do {
        let n = e.charCodeAt(t);
        if (32 !== n && 9 !== n) return t;
      } while (++t < n);
      return n;
    }
    function d(e, t, n) {
      for (; t > n; ) {
        let n = e.charCodeAt(--t);
        if (32 !== n && 9 !== n) return t + 1;
      }
      return n;
    }
    function h(e, t, n) {
      let o = n?.encode || encodeURIComponent;
      if (!r.test(e)) throw TypeError(`argument name is invalid: ${e}`);
      let l = o(t);
      if (!i.test(l)) throw TypeError(`argument val is invalid: ${t}`);
      let c = e + "=" + l;
      if (!n) return c;
      if (void 0 !== n.maxAge) {
        if (!Number.isInteger(n.maxAge))
          throw TypeError(`option maxAge is invalid: ${n.maxAge}`);
        c += "; Max-Age=" + n.maxAge;
      }
      if (n.domain) {
        if (!s.test(n.domain))
          throw TypeError(`option domain is invalid: ${n.domain}`);
        c += "; Domain=" + n.domain;
      }
      if (n.path) {
        if (!a.test(n.path))
          throw TypeError(`option path is invalid: ${n.path}`);
        c += "; Path=" + n.path;
      }
      if (n.expires) {
        if (!m(n.expires) || !Number.isFinite(n.expires.valueOf()))
          throw TypeError(`option expires is invalid: ${n.expires}`);
        c += "; Expires=" + n.expires.toUTCString();
      }
      if (
        (n.httpOnly && (c += "; HttpOnly"),
        n.secure && (c += "; Secure"),
        n.partitioned && (c += "; Partitioned"),
        n.priority)
      )
        switch (
          "string" == typeof n.priority ? n.priority.toLowerCase() : n.sameSite
        ) {
          case "low":
            c += "; Priority=Low";
            break;
          case "medium":
            c += "; Priority=Medium";
            break;
          case "high":
            c += "; Priority=High";
            break;
          default:
            throw TypeError(`option priority is invalid: ${n.priority}`);
        }
      if (n.sameSite)
        switch (
          "string" == typeof n.sameSite ? n.sameSite.toLowerCase() : n.sameSite
        ) {
          case !0:
          case "strict":
            c += "; SameSite=Strict";
            break;
          case "lax":
            c += "; SameSite=Lax";
            break;
          case "none":
            c += "; SameSite=None";
            break;
          default:
            throw TypeError(`option sameSite is invalid: ${n.sameSite}`);
        }
      return c;
    }
    function p(e) {
      if (-1 === e.indexOf("%")) return e;
      try {
        return decodeURIComponent(e);
      } catch (t) {
        return e;
      }
    }
    function m(e) {
      return "[object Date]" === o.call(e);
    }
  },
  745197,
  276302,
  525258,
  (e) => {
    "use strict";
    var t = e.i(162061),
      n = e.i(418625),
      r = e.i(914483),
      i = e.i(696871),
      s = e.i(576191),
      a = e.i(206037),
      o = e.i(936990),
      l = e.i(667660),
      c = e.i(739976),
      u = e.i(139505);
    e.i(665632);
    var d = u;
    function h(e) {
      return e.startsWith(d.ANON_ID_PREFIX);
    }
    function p(e) {
      if (!h(e)) throw Error(`Invalid anonId: ${e}`);
    }
    let m = null,
      f = {};
    function g() {
      if ("undefined" == typeof document) return;
      m !== document.cookie && ((m = document.cookie), (f = (0, c.parse)(m)));
      let e = f[u.ANON_COOKIE_NAME_DO_NOT_USE_OR_YOU_WILL_BE_FIRED];
      if (e) return (p(e), e);
    }
    e.s(["getAnonId", () => g], 276302);
    var x = e.i(242759),
      v = e.i(296900),
      y = e.i(457456),
      b = e.i(393799),
      j = x,
      w = i;
    function C() {
      let e = (0, y.getGlobalAtoms)(),
        { dmule: t } = (0, j.useFlags)(),
        n = (0, b.useAtomValue)(e.dailyModelUsageRateLimit),
        { updateDailyModelUsage: r } = (0, y.getGlobalActions)(),
        { isValidating: i } = (0, v.useServerQuerySWR)(
          ["global", "dailyModelUsage"],
          {},
          { noRevalidate: !0, revalidateOnFocus: !1 },
        );
      return {
        isValidating: i,
        updateDailyModelUsage: t ? r : (e) => {},
        ...(!t
          ? {
              remaining: w.DAILY_MODEL_USAGE_LIMIT,
              usage: 0,
              limit: w.DAILY_MODEL_USAGE_LIMIT,
            }
          : n),
      };
    }
    e.s(["useDailyModelUsage", () => C], 525258);
    let k = (e, t) => fetch(`${e}?scope=${t}`).then((e) => e.json());
    function S() {
      let { tbb: e } = (0, x.useFlags)(),
        { activeScopeSlug: t } = (0, l.useActiveScope)(),
        r = g(),
        i = t ?? r ?? void 0,
        { data: a, mutate: o } = (0, n.default)(
          i && !e ? ["/chat/api/rate-limit", i] : null,
          () => {
            if (i) return k("/chat/api/rate-limit", i);
          },
        );
      return [
        a,
        (0, s.useCallback)(
          () =>
            o(
              (e) => {
                if (void 0 !== e)
                  return { ...e, remaining: Math.max(e.remaining - 1, 0) };
              },
              { revalidate: !1 },
            ),
          [o],
        ),
      ];
    }
    function N() {
      let { tbb: e } = (0, x.useFlags)(),
        [n] = S(),
        { isTeam: c, user: u, isActiveScopeReady: d } = (0, l.useActiveScope)(),
        { planSlug: h } = (0, a.usePlanInfo)(d && !c, u?.id, !1),
        { planInfo: p } = (0, o.useTokenBillingPlanInfo)(),
        m = "v0-level0" === h,
        { remaining: f } = C(),
        [g, v] = (0, r.useGetSet)("show-daily-usage-upgrade-banner", !1),
        [y, b] = (0, r.useGetSet)("show-upgrade-banner-limit", !1),
        [j, w] = (0, r.useGetSet)("show-upgrade-banner-general", !1);
      (0, s.useLayoutEffect)(() => {
        if (!h) {
          (b(!1), w(!1), v(!1));
          return;
        }
        let r = t.default.get(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE),
          s = t.default.get(i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE),
          a = p
            ? (p.onDemand.balance || 0) + (p.balance.remaining || 0)
            : void 0,
          o =
            !((n && 0 === n.remaining) || ("number" == typeof a && a <= 0)) &&
            "1" === r,
          l = "1" === t.default.get(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE),
          c =
            !(
              f <=
              i.SHOW_NON_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE
            ) &&
            (f > i.SHOW_DISMISSABLE_UPGRADE_CTA_THRESHOLD_DAILY_MODEL_USAGE ||
              "1" === s),
          u =
            !o &&
            ((n && n.remaining < i.SHOW_UPGRADE_CTA_THRESHOLD_MESSAGES) ||
              (e &&
                "number" == typeof a &&
                a < i.SHOW_UPGRADE_CTA_THRESHOLD_CREDITS)),
          d = m && !c,
          g = n && n.limit - n.remaining >= 1,
          x = m && !l && (g || e);
        (b(u ?? !1), w(x ?? !1), v(d));
      }, [n, w, b, v, m, c, h, u, p, e, f]);
      let k = (0, s.useCallback)(() => {
          (b(!1),
            t.default.set(i.DISMISSED_DAILY_UPGRADE_CTA_COOKIE, "1", {
              expires: 1,
            }));
        }, [b]),
        N = (0, s.useCallback)(() => {
          (w(!1),
            t.default.set(i.DISMISSED_GENERAL_UPGRADE_CTA_COOKIE, "1", {
              expires: 5,
            }));
        }, [w]),
        E = (0, s.useCallback)(() => {
          (v(!1),
            t.default.set(
              i.DISMISSED_DAILY_MODEL_USAGE_UPGRADE_CTA_COOKIE,
              "1",
              { expires: 1 },
            ));
        }, [v]);
      return {
        showBannerLimit: y,
        showBannerGeneral: j,
        showDailyUsageBannerLimit: g,
        remaining: n?.remaining,
        dismissBannerLimit: k,
        dismissBannerGeneral: N,
        dismissDailyUsageBanner: E,
        userOnFree: m,
        dailyUsageRemaining: f,
      };
    }
    e.s(["useRateLimit", () => S, "useShowUpgradeBanner", () => N], 745197);
  },
  346828,
  946366,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "7f929ba59a21167a50e0bc896de40549a2df8be7d5",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "detectUserVercelUsage",
      );
    e.s(["detectUserVercelUsage", () => n], 346828);
    var r = t,
      i = (0, r.createServerReference)(
        "7f2cc88093e2cef2dd30a3c1a7ebed73c1135400be",
        r.callServer,
        void 0,
        r.findSourceMapURL,
        "updateTeamDetails",
      );
    e.s(["updateTeamDetails", () => i], 946366);
  },
  569175,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4.875C1.5 3.01104 3.01104 1.5 4.875 1.5C6.20018 1.5 7.34838 2.26364 7.901 3.37829C8.1902 3.96162 8.79547 4.5 9.60112 4.5H12.25C13.4926 4.5 14.5 5.50736 14.5 6.75C14.5 7.42688 14.202 8.03329 13.7276 8.44689L13.1622 8.93972L14.1479 10.0704L14.7133 9.57758C15.5006 8.89123 16 7.8785 16 6.75C16 4.67893 14.3211 3 12.25 3H9.60112C9.51183 3 9.35322 2.93049 9.2449 2.71201C8.44888 1.1064 6.79184 0 4.875 0C2.18261 0 0 2.18261 0 4.875V6.40385C0 7.69502 0.598275 8.84699 1.52982 9.59656L2.11415 10.0667L3.0545 8.89808L2.47018 8.42791C1.87727 7.95083 1.5 7.22166 1.5 6.40385V4.875ZM7.29289 7.39645C7.68342 7.00592 8.31658 7.00592 8.70711 7.39645L11.7803 10.4697L12.3107 11L11.25 12.0607L10.7197 11.5303L8.75 9.56066V15.25V16H7.25V15.25V9.56066L5.28033 11.5303L4.75 12.0607L3.68934 11L4.21967 10.4697L7.29289 7.39645Z" fill="currentColor"/>',
    );
    e.s(["CloudUpload", 0, t]);
  },
  485963,
  (e, t, n) => {},
  511969,
  544785,
  (e) => {
    "use strict";
    e.s(["UpgradePlanDialog", () => R], 511969);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(206037),
      s = e.i(936990),
      a = e.i(654335),
      o = e.i(680372),
      l = e.i(70772),
      c = e.i(762585),
      u = e.i(745197),
      d = e.i(696871),
      h = e.i(686832),
      p = e.i(667660),
      m = e.i(644471),
      f = e.i(298515),
      g = e.i(602544),
      x = e.i(346828),
      v = e.i(120485);
    e.i(563948);
    var y = e.i(407562),
      b = e.i(763480),
      j = e.i(946366),
      w = e.i(230766),
      C = e.i(569175),
      k = e.i(775883),
      S = e.i(226368),
      N = e.i(53223),
      E = e.i(242759),
      A = e.i(304649),
      D = e.i(120945),
      I = e.i(37737),
      M = e.i(675120);
    e.i(485963);
    let T = (e) => (e?.balance.remaining || 0) + (e?.onDemand.balance || 0),
      L = {
        "v0-ultra": { bullets: [] },
        "v0-level0": {
          bullets: [
            "$5 of usage credit per month",
            "Deploy to Vercel",
            "Sync with GitHub",
            "Create up to 200 projects",
          ],
        },
        "v0-level3": {
          bullets: [
            "$20 of usage credit per month",
            "Purchase additional credits outside your monthly limits",
            "Unlimited projects",
            "Access to v0-1.5-lg and v0 API",
          ],
        },
        "v0-team": {
          bullets: [
            "$30 of usage credit per user per month",
            "Share chats and collaborate with your team",
            "Centralized billing on Vercel",
            "Purchase credits shared across your team",
          ],
        },
        "v0-business": {
          bullets: [
            "$30 of usage credit per user per month",
            "Training opt-out by default",
            "Share chats and collaborate with your team",
            "Centralized billing on Vercel",
            "Purchase credits shared across your team",
          ],
        },
        "v0-enterprise": {
          bullets: [
            "Custom credit limits",
            "Training opt-out by default",
            "Guaranteed customer support SLAs",
            "SAML SSO",
          ],
        },
      },
      P = 1048576;
    function R({ planSlug: e, customTitle: m }) {
      let [f] = (0, u.useRateLimit)(),
        g = f && f.remaining <= 0,
        {
          activeScope: C,
          scopes: k,
          refreshScopes: A,
          isActiveScopeReady: R,
        } = (0, p.useActiveScope)(),
        [_, H] = (0, n.useState)("plans"),
        [$, U] = (0, n.useState)(void 0),
        G = (0, n.useMemo)(() => k?.find((e) => e.id === $), [k, $]),
        [W, q] = (0, n.useState)(G?.avatar),
        Z = (0, n.useRef)(null),
        { setPaymentDialogPlan: K } = (0, l.usePaymentDialog)(),
        [Y, J] = (0, n.useTransition)(),
        Q = (0, S.useRouter)(),
        { planInfo: X, planSlug: ee } = (0, i.usePlanInfo)(!0, C?.id, !1),
        { planInfo: et, isLoading: en } = (0, s.useTokenBillingPlanInfo)(),
        er = (0, n.useMemo)(
          () =>
            ["v0-business", "v0-team"].includes(ee ?? "")
              ? X?.plans?.filter(
                  (e) =>
                    "v0-team" === e.slug ||
                    "v0-enterprise" === e.slug ||
                    "v0-business" === e.slug,
                )
              : X?.plans,
          [ee, X],
        ),
        [ei, es] = (0, n.useState)(e),
        { tbb: ea } = (0, E.useFlags)(),
        eo = ea ? T(et) : 0,
        el = (0, n.useMemo)(() => {
          if (m) return m;
          let e = ea && eo <= d.MINIMUM_CREDITS_TO_SEND_MESSAGE;
          return "plans" === _
            ? g
              ? ea
                ? "You are out of monthly credits"
                : "Message Limit Reached"
              : ea
                ? e
                  ? "You are out of credits"
                  : "Explore More Plans"
                : "Upgrade Plan"
            : "Confirm your Team's Details";
        }, [m, ea, eo, _, g]),
        ec = (0, n.useMemo)(() => {
          if ("plans" === _) {
            if (void 0 === f && !ea)
              return (0, t.jsx)(c.Skeleton, { className: "h-4 w-full" });
            let e = [];
            if (ee) {
              let n = d.PLAN_SLUG_TO_PLAN_NAME[ee],
                r = ei ? d.PLAN_SLUG_TO_PLAN_NAME[ei] : void 0;
              if (ea)
                return (0, t.jsxs)(h.ModalDescription, {
                  children: [
                    "You are currently on the v0 ",
                    n,
                    " plan. Upgrade or start a new plan for monthly credit limits.",
                  ],
                });
              g
                ? (e.push(
                    `You have reached the message limit on the v0 ${n} plan.`,
                  ),
                  "v0-team" === ei ||
                  "v0-enterprise" === ei ||
                  "v0-business" === ei
                    ? e.push(`Start a v0 ${r} plan for higher message limits.`)
                    : "v0-enterprise" !== ee &&
                      e.push(
                        `Upgrade ${r ? `to v0 ${r} ` : ""}for higher message limits.`,
                      ))
                : e.push(`You're currently on the v0 ${n} plan.`);
            }
            return (0, t.jsx)(h.ModalDescription, {
              children: e.map((e, n) => (0, t.jsx)("p", { children: e }, n)),
            });
          }
          return "team-details" === _
            ? (0, t.jsx)(h.ModalDescription, {
                children: "Edit your Team's avatar and name.",
              })
            : null;
        }, [_, ea, f, ee, g, ei]),
        eu = (0, n.useCallback)(
          (e) => {
            (K(e), (0, I.closeDialog)());
          },
          [K],
        ),
        ed = (0, n.useCallback)(
          (e) => {
            J(async () => {
              if (!$) return;
              let t = e.get("team-name");
              if (!t) return void y.toast.error("Team name is required");
              let n = e.get("team-avatar"),
                r = await z(n);
              !0 ===
              (await (0, j.updateTeamDetails)({
                teamId: $,
                name: t,
                avatar: n,
                avatarSha: r,
              }))
                ? (A(),
                  y.toast.success("Team details configured"),
                  q(void 0),
                  H("plans"),
                  Q.push(
                    `/chat/upgrade?teamId=${$}&premium=${"v0-level3" === ee}`,
                  ),
                  U(void 0),
                  (0, I.closeDialog)())
                : y.toast.error(
                    "Failed to update team details. Please try again.",
                  );
            });
          },
          [$, ee, A, Q],
        ),
        eh = (0, n.useCallback)(() => {
          (ei && (0, N.track)("ClickUpgradeModalButton", { targetPlan: ei }),
            "plans" === _ &&
              (("v0-level3" === ei || "v0-ultra" === ei) && eu(ei),
              ("v0-team" === ei || "v0-business" === ei) &&
                J(async () => {
                  let e = await (0, x.detectUserVercelUsage)();
                  if ("error" in e) {
                    let t = Error(e.error);
                    (0, v.handleChatError)(t) ||
                      y.toast.error(
                        "Failed to start team plan. Please try again.",
                      );
                  } else {
                    let { type: t, recommendedTeamId: n } = e;
                    (n && Q.prefetch(`/chat/upgrade?teamId=${n}&plan=${ei}`),
                      "new" === t
                        ? (U(n), H("team-details"))
                        : (Q.push(`/chat/upgrade?teamId=${n}&plan=${ei}`),
                          (0, I.closeDialog)()));
                  }
                })),
            "team-details" === _ && Z.current?.requestSubmit());
        }, [_, eu, Q, ei]),
        ep = (0, n.useCallback)(
          (e) => {
            e.size >= P
              ? y.toast.error(
                  "File size is too large. Please upload a file smaller than 1MB.",
                )
              : q(URL.createObjectURL(e));
          },
          [q],
        );
      return ((0, n.useEffect)(() => {
        if (e) return es(e);
        es(O(er, ee ?? void 0));
      }, [er, ee, e]),
      !er || !R || (ea && en))
        ? null
        : (0, t.jsxs)(D.AtomicDialog, {
            type: "upgradePlan",
            children: [
              (0, t.jsxs)(h.ModalHeader, {
                children: [(0, t.jsx)(h.ModalTitle, { children: el }), ec],
              }),
              (0, t.jsxs)(h.ModalContent, {
                className:
                  "max-sm:items-center flex flex-col gap-3 overflow-hidden",
                "data-testid": "upgrade-modal-content",
                children: [
                  "plans" === _ && "v0-enterprise" !== ee
                    ? (0, t.jsxs)(t.Fragment, {
                        children: [
                          (0, t.jsx)(F, {
                            plans: er,
                            selectedPlan: ei,
                            setSelectedPlan: (e) => es(e),
                            children: ea
                              ? (0, t.jsx)("div", {
                                  className: "mt-1 flex flex-col",
                                  children: (0, t.jsx)(B, {
                                    currentStep: _,
                                    isPending: Y,
                                    onClick: eh,
                                    selectedPlan: ei,
                                    currentPlan: ee ?? void 0,
                                  }),
                                })
                              : null,
                          }),
                          (0, t.jsxs)("p", {
                            className:
                              "flex gap-1 text-center text-sm text-v0-gray-900",
                            children: [
                              "Compare plans and options on our",
                              (0, t.jsxs)(a.default, {
                                className:
                                  "flex items-center gap-x-1 text-v0-blue-700",
                                href: "/pricing",
                                onClick: () => (0, I.closeDialog)(),
                                children: [
                                  "pricing page ",
                                  (0, t.jsx)(o.ExternalLink, {
                                    className: "size-3",
                                  }),
                                ],
                              }),
                              ".",
                            ],
                          }),
                          (0, t.jsx)(M.TransitionNode, {
                            renderKey: ei,
                            children:
                              ea ||
                              !ei ||
                              [
                                "v0-level0",
                                "v0-team",
                                "v0-enterprise",
                              ].includes(ei) ||
                              ee === ei
                                ? null
                                : (0, t.jsxs)("div", {
                                    className:
                                      "rounded-lg bg-v0-blue-100 p-2 pl-3 text-sm text-v0-blue-800",
                                    children: [
                                      "v0 is a Vercel product, but has separate plans and pricing. Your",
                                      " ",
                                      (0, t.jsxs)("span", {
                                        className: "font-medium",
                                        children: ["v0 ", L[ei].label],
                                      }),
                                      " ",
                                      "subscription is billed independently of the",
                                      " ",
                                      (0, t.jsx)(a.default, {
                                        className:
                                          "inline-flex items-center gap-x-1 underline",
                                        href: "https://vercel.com/pricing",
                                        target: "_blank",
                                        children: "Vercel plans",
                                      }),
                                      " ",
                                      "and is non-refundable.",
                                    ],
                                  }),
                          }),
                        ],
                      })
                    : null,
                  "team-details" === _
                    ? (0, t.jsxs)("form", {
                        action: ed,
                        className: "flex flex-col gap-6",
                        ref: Z,
                        children: [
                          (0, t.jsxs)("div", {
                            className: "flex items-center gap-4",
                            children: [
                              W
                                ? (0, t.jsx)(
                                    w.Avatar,
                                    {
                                      rounded: !0,
                                      className: "size-20",
                                      children: (0, t.jsx)(w.AvatarImage, {
                                        alt: "Uploaded team avatar",
                                        className: "aspect-auto",
                                        src: W,
                                        title: "Uploaded team avatar",
                                      }),
                                    },
                                    "uploaded-avatar-image",
                                  )
                                : (0, t.jsx)(w.AvatarUser, {
                                    rounded: !0,
                                    className: "size-20",
                                    teamId: G?.id,
                                  }),
                              (0, t.jsx)(V, { uploading: Y, onChange: ep }),
                            ],
                          }),
                          (0, t.jsx)("div", {
                            className: "flex flex-col gap-2",
                            children: (0, t.jsx)(b.Input, {
                              label: "Team Name",
                              id: "team-name",
                              name: "team-name",
                              required: !0,
                              maxLength: 256,
                              minLength: 1,
                            }),
                          }),
                        ],
                      })
                    : null,
                ],
              }),
              ea
                ? null
                : (0, t.jsxs)(h.ModalFooter, {
                    className:
                      "border-v0-gray-300 bg-v0-background-200 border-t p-4!",
                    children: [
                      (0, t.jsx)(r.Button, {
                        onClick: () => {
                          "team-details" === _
                            ? H("plans")
                            : (0, I.closeDialog)();
                        },
                        size: "sm",
                        type: "button",
                        variant: "secondary",
                        children: "team-details" === _ ? "Back" : "Cancel",
                      }),
                      (0, t.jsx)(B, {
                        currentStep: _,
                        isPending: Y,
                        onClick: eh,
                        selectedPlan: ei,
                        currentPlan: ee ?? void 0,
                      }),
                    ],
                  }),
            ],
          });
    }
    let F = ({
        plans: e,
        selectedPlan: n,
        setSelectedPlan: r,
        children: i,
      }) => {
        let { tbb: s } = (0, E.useFlags)(),
          a = e?.filter((e) => "v0-ultra" !== e.slug) || [],
          o = s && "v0-ultra" === n ? "v0-level3" : n;
        return (0, t.jsxs)(m.Tabs, {
          className: "flex w-full flex-col gap-4",
          onValueChange: r,
          value: o,
          children: [
            (0, t.jsx)(m.TabsList, {
              className: "grid h-fit",
              style: { gridTemplateColumns: `repeat(${a.length}, 1fr)` },
              children: a.map((e) =>
                (0, t.jsx)(
                  m.TabsTrigger,
                  { value: e.slug, children: e.name },
                  e.slug,
                ),
              ),
            }),
            a.map((e) =>
              (0, t.jsx)(
                m.TabsContent,
                {
                  value: e.slug,
                  children: (0, t.jsxs)("div", {
                    className: (0, A.cn)(
                      "bg-v0-background-200 border-v0-alpha-400 flex flex-col gap-4 rounded-sm border p-4 text-sm",
                      { "h-72": !s },
                    ),
                    children: [
                      (0, t.jsxs)("div", {
                        className: "flex flex-col gap-2",
                        children: [
                          (0, t.jsxs)("h1", {
                            className: "text-base font-semibold",
                            children: ["v0 ", e.name],
                          }),
                          (0, t.jsx)(_, { plan: e }),
                        ],
                      }),
                      (0, t.jsxs)("div", {
                        className: "flex flex-col gap-3",
                        children: [
                          e.slug in L
                            ? (0, t.jsx)("p", {
                                className: "font-semibold",
                                children: L[e.slug].title,
                              })
                            : null,
                          (0, t.jsx)("ul", {
                            className: "flex flex-col gap-3",
                            children:
                              e.slug in L
                                ? L[e.slug].bullets.map((e) =>
                                    (0, t.jsxs)(
                                      "li",
                                      {
                                        className: "flex items-center gap-2",
                                        children: [
                                          (0, t.jsx)(g.Check, { size: 20 }),
                                          e,
                                        ],
                                      },
                                      e,
                                    ),
                                  )
                                : null,
                          }),
                        ],
                      }),
                      i,
                    ],
                  }),
                },
                e.slug,
              ),
            ),
          ],
        });
      },
      _ = ({ plan: e }) => {
        let { tbb: n } = (0, E.useFlags)(),
          r = "v0-enterprise" === e.slug,
          i = "v0-team" === e.slug || "v0-business" === e.slug,
          s = r ? void 0 : (0, f.formatPlanTotalPrice)(e),
          a = r ? void 0 : i ? "/user/month" : "/month";
        return n && r
          ? (0, t.jsx)("div", {
              className: "flex items-center gap-1 text-xl font-semibold",
              children: "Custom Pricing",
            })
          : r
            ? null
            : (0, t.jsxs)("div", {
                className: "flex items-center gap-1",
                children: [
                  (0, t.jsx)("span", {
                    className: "text-xl font-semibold",
                    children: s,
                  }),
                  (0, t.jsx)("span", {
                    className:
                      "align-text-bottom text-sm leading-7 text-v0-gray-900",
                    children: a,
                  }),
                ],
              });
      },
      O = (e, t) => {
        if (!e || !t) return;
        let n = e.find((e) => e.slug === t),
          r = (n ? e.indexOf(n) : 0) + 1;
        if ("v0-level0" === t) {
          let t = e.findIndex((e) => "v0-team" === e.slug);
          -1 !== t && (r = t);
        }
        let i = e[r];
        return i ? i.slug : void 0;
      },
      B = ({
        currentPlan: e,
        isPending: n,
        selectedPlan: i,
        onClick: s,
        currentStep: o,
      }) => {
        let { tbb: l } = (0, E.useFlags)(),
          c = (0, k.usePlanLabelMap)();
        if (!i) return null;
        if (i === e)
          return (0, t.jsx)(r.Button, {
            disabled: !0,
            size: "sm",
            children: "Current Plan",
          });
        if ("v0-level0" === i)
          return (0, t.jsx)(r.Button, {
            className: "w-full md:w-auto",
            size: "sm",
            onClick: () =>
              (0, N.track)("ClickDowngradeModalButton", {
                targetPlan: "v0-level0",
              }),
            asChild: !0,
            type: "button",
            variant: "secondary",
            children: (0, t.jsx)(a.default, {
              href: "/subscription?from=chat",
              children: "Downgrade Plan",
            }),
          });
        if ("v0-level3" === i && "v0-ultra" === e)
          return (0, t.jsx)(r.Button, {
            className: "w-full md:w-auto",
            size: "sm",
            onClick: () =>
              (0, N.track)("ClickDowngradeModalButton", {
                targetPlan: "v0-level3",
              }),
            asChild: !0,
            type: "button",
            variant: "secondary",
            children: (0, t.jsx)(a.default, {
              href: "/subscription?from=chat",
              children: "Downgrade Plan",
            }),
          });
        if ("v0-enterprise" === i)
          return (0, t.jsx)(r.Button, {
            onClick: () =>
              (0, N.track)("ClickUpgradeModalButton", {
                targetPlan: "v0-enterprise",
              }),
            className: "w-full md:w-auto",
            size: "sm",
            asChild: !0,
            type: "button",
            children: (0, t.jsx)(a.default, {
              href: d.CONTACT_SALES_LINK,
              children: "Contact Sales",
            }),
          });
        if ("v0-team" === i || "v0-business" === i) {
          let e = l
            ? `Start a ${c[i].label} Plan`
            : `Start a v0 ${c[i].label} Plan`;
          return (0, t.jsx)(r.Button, {
            className: "w-full md:w-auto",
            disabled: n,
            onClick: s,
            size: "sm",
            type: "button",
            children: "plans" === o ? e : "Continue to Payment",
          });
        }
        return (0, t.jsxs)(r.Button, {
          disabled: e === i,
          onClick: s,
          size: "sm",
          children: ["Upgrade to v0 ", c[i].label],
        });
      },
      V = ({ uploading: e, onChange: n }) =>
        (0, t.jsx)(r.Button, {
          asChild: !0,
          size: "sm",
          variant: "secondary",
          children: (0, t.jsxs)("label", {
            "data-id": "team-avatar-upload",
            htmlFor: "team-avatar",
            children: [
              (0, t.jsx)("input", {
                className: "sr-only",
                "data-enable-grammarly": "false",
                "data-gramm": "false",
                "data-gramm_editor": "false",
                disabled: e,
                id: "team-avatar",
                name: "team-avatar",
                onChange: (e) => {
                  e.preventDefault();
                  let t = e.target.files?.[0];
                  t && n(t);
                },
                accept: "image/png,image/jpeg",
                type: "file",
              }),
              (0, t.jsx)(C.CloudUpload, {}),
              "Upload Photo",
            ],
          }),
        });
    function z(e) {
      return new Promise((t) => {
        let n = new FileReader();
        (n.addEventListener("load", ({ target: e }) => {
          e?.result instanceof ArrayBuffer &&
            crypto.subtle
              .digest("SHA-1", e.result)
              .then((e) => {
                t(H(e));
              })
              .catch((e) => console.error(e));
        }),
          n.readAsArrayBuffer(e));
      });
    }
    function H(e) {
      let t = [],
        n = new DataView(e);
      for (let e = 0; e < n.byteLength; e += 4) {
        let r = n.getUint32(e).toString(16),
          i = "00000000",
          s = (i + r).slice(-i.length);
        t.push(s);
      }
      return t.join("");
    }
    var $ = e.i(619822);
    e.s(["CheckIcon", () => $.default], 544785);
  },
  539145,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("CreditCard", [
      [
        "rect",
        { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" },
      ],
      ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }],
    ]);
    e.s(["default", () => t]);
  },
  287089,
  (e) => {
    e.v({ jiggle: "redeem-code-modal-module__RfT0iq__jiggle" });
  },
  642969,
  485614,
  146179,
  648096,
  (e) => {
    "use strict";
    e.s(["AddPaymentMethodDialog", () => P], 642969);
    var t = e.i(324834),
      n = e.i(667660),
      r = t,
      i = e.i(150557),
      s = e.i(219041),
      a = e.i(999647),
      o = e.i(166749),
      l = e.i(74656),
      c = e.i(781044),
      u = e.i(544785),
      d = e.i(931325),
      h = e.i(654335),
      p = e.i(576191),
      m = e.i(402907),
      f = t,
      g = e.i(431141),
      x = e.i(539145),
      x = x;
    let v = [
      "alipay",
      "amex",
      "diners",
      "discover",
      "elo",
      "hipercard",
      "jcb",
      "maestro",
      "mastercard",
      "paypal",
      "unionpay",
      "visa",
    ];
    function y({ brand: e, width: t = 14 }) {
      return v.includes(e)
        ? (0, f.jsx)(g.default, {
            alt: `logo for ${e}`,
            height: "20",
            src: `/assets/cardbrands/${e}.svg`,
            width: t,
          })
        : (0, f.jsx)(x.default, {});
    }
    var b = e.i(70165),
      j = e.i(868712);
    function w(e, t) {
      switch (t.type) {
        case "submit":
          return { ...e, status: "submitting" };
        case "added":
          return { ...e, status: "new-card" };
        case "go-to-add-new":
          return { ...e, status: "add-new" };
        case "go-to-use-existing":
          return {
            ...e,
            status: "use-existing",
            paymentMethod: t.paymentMethod,
          };
      }
    }
    let C = [
      [302, 383],
      [522, 304],
      [1 / 0, 227],
    ];
    function k({ paymentMethod: e, noPrefix: t, billingDetails: n }) {
      let [s, u] = (0, p.useReducer)(
          w,
          e
            ? { status: "use-existing", paymentMethod: e }
            : { status: "add-new" },
        ),
        { windowSize: d } = (0, b.useWindowSize)(),
        h =
          C.find((e) => void 0 !== e[0] && (d.width ?? 1e3) < e[0])?.[1] ?? 230,
        f = (0, c.useStripe)(),
        g = (0, c.useElements)(),
        { toast: x } = (0, m.useToast)(),
        [v, y] = (0, p.useState)(!1),
        k = (0, j.useIsDark)(),
        E = (0, l.useImperativeForm)({ action: a.createPaymentMethodAction }),
        A = (0, l.useImperativeForm)({ action: o.upsertPaymentMethodAction }),
        D = "add-new" === s.status,
        I = (0, p.useCallback)(
          async (e) => {
            if (!D || !f || !g) return null;
            try {
              u({ type: "submit" });
              let t = await g.submit();
              if (t.error) throw t.error;
              let { client_secret: r } = await E.submit(
                  e ? { teamSlug: e } : void 0,
                ),
                i = await f.confirmSetup({
                  elements: g,
                  clientSecret: r,
                  redirect: "if_required",
                  confirmParams: {
                    return_url: window.location.href,
                    payment_method_data: {
                      allow_redisplay: "always",
                      billing_details: n,
                    },
                  },
                });
              if (i.error) throw i.error;
              if (i.setupIntent.payment_method) {
                let t =
                    "string" == typeof i.setupIntent.payment_method
                      ? i.setupIntent.payment_method
                      : i.setupIntent.payment_method.id,
                  n = await A.submit({
                    paymentMethod: t,
                    ...(e ? { teamSlug: e } : void 0),
                  });
                return (u({ type: "added" }), n.paymentMethod);
              }
            } catch (e) {
              (g.getElement("card")?.focus(),
                u({ type: "go-to-add-new" }),
                S(x, e));
            }
            return null;
          },
          [E, g, D, f, x, A],
        );
      return (0, p.useMemo)(() => {
        switch (s.status) {
          case "use-existing":
            return {
              status: "use-existing",
              form: (0, r.jsx)(N, {
                onAddNewCard: () => u({ type: "go-to-add-new" }),
                paymentMethod: s.paymentMethod,
                noPrefix: t,
              }),
            };
          case "add-new":
          case "submitting":
          case "new-card":
            return {
              status: s.status,
              form: (0, r.jsxs)("div", {
                style: {
                  backgroundColor: k ? "black" : "white",
                  ...(v ? { minHeight: `${h}px` } : { height: `${h}px` }),
                },
                children: [
                  (0, r.jsx)(c.PaymentElement, {
                    onReady: () => y(!0),
                    options: {
                      terms: { card: "never" },
                      wallets: { googlePay: "never", applePay: "never" },
                      defaultValues: {
                        billingDetails: n
                          ? { name: n.name, email: n.email }
                          : void 0,
                      },
                    },
                  }),
                  (0, r.jsxs)(i.Portal, {
                    children: [
                      (0, r.jsx)("form", { ...E.props }),
                      (0, r.jsx)("form", { ...A.props }),
                    ],
                  }),
                ],
              }),
              submit: I,
              useExisting: e
                ? () => u({ type: "go-to-use-existing", paymentMethod: e })
                : void 0,
            };
        }
      }, [s.status, s.paymentMethod, v, h, E.props, A.props, I, t, e]);
    }
    function S(e, t) {
      let { code: n, message: i } = Object(t),
        a = !n;
      throw (
        e({
          description: a
            ? "An unknown error occurred. Please contact support."
            : i,
          action: (0, r.jsxs)(r.Fragment, {
            children: [
              (0, r.jsx)(s.ToastAction, {
                altText: "Dismiss",
                variant: a ? "secondary" : "default",
                children: "Dismiss",
              }),
              a
                ? (0, r.jsx)(s.ToastAction, {
                    altText: "Contact Support",
                    asChild: !0,
                    children: (0, r.jsx)(h.default, {
                      href: "https://vercel.com/help",
                      target: "_blank",
                      children: "Contact Support",
                    }),
                  })
                : null,
            ],
          }),
          duration: 1 / 0,
          variant: "destructive",
        }),
        t
      );
    }
    function N({ paymentMethod: e, onAddNewCard: t, noPrefix: n }) {
      return (0, r.jsxs)("div", {
        className: "flex flex-col gap-4",
        children: [
          n
            ? null
            : (0, r.jsx)("div", {
                className: "text-sm",
                children:
                  "Use your Vercel account's default payment method or add a new one.",
              }),
          (0, r.jsxs)("div", {
            className:
              "flex items-center justify-between rounded-lg border border-blue-700 bg-white p-4",
            children: [
              (0, r.jsxs)("span", {
                className: "flex items-center gap-4 text-sm",
                children: [
                  (0, r.jsx)(y, { brand: e.brand }),
                  (0, r.jsxs)("span", {
                    className: "flex items-center gap-1",
                    children: [
                      (0, r.jsx)("span", {
                        className: "text-xs",
                        children: "",
                      }),
                      (0, r.jsx)("span", { children: e.last4 }),
                    ],
                  }),
                ],
              }),
              (0, r.jsx)(u.CheckIcon, {
                className: "h-4 w-4 rounded-full bg-blue-700 p-0.5 text-white",
                size: 16,
              }),
            ],
          }),
          (0, r.jsxs)("button", {
            className: "flex items-center gap-2 text-sm text-blue-700",
            onClick: t,
            type: "button",
            children: [
              (0, r.jsx)(d.PlusIcon, { size: 16 }),
              (0, r.jsx)("span", {
                children: "Use a different payment method",
              }),
            ],
          }),
        ],
      });
    }
    var E = e.i(460816),
      A = e.i(686832),
      D = e.i(120945);
    e.i(904347);
    var I = e.i(37737),
      M = e.i(176248),
      T = e.i(307778);
    e.i(563948);
    var L = e.i(407562);
    function P({ paymentMethod: e }) {
      let { user: r } = (0, n.useActiveScope)(),
        i = r?.billingMode === "test" ? "test" : "live",
        s = r ? { name: r.name, email: r.email } : void 0;
      return (0, t.jsx)(E.StripeProvider, {
        mode: i,
        children: (0, t.jsx)(R, { paymentMethod: e, billingDetails: s }),
      });
    }
    function R({ paymentMethod: e, billingDetails: n }) {
      let r = k({ paymentMethod: e, noPrefix: !0, billingDetails: n }),
        i = async () => {
          if ("add-new" === r.status && (await r.submit()))
            return (
              L.toast.success("New Payment Method added."),
              (0, I.closeDialog)()
            );
        },
        s = () => {
          "add-new" === r.status && r.useExisting
            ? r.useExisting()
            : (0, I.closeDialog)();
        };
      return (0, t.jsxs)(D.AtomicDialog, {
        type: "addPaymentMethod",
        children: [
          (0, t.jsx)(A.ModalHeader, {
            children: (0, t.jsx)(A.ModalTitle, {
              children: "Choose New Payment Method",
            }),
          }),
          (0, t.jsx)(A.ModalContent, {
            className: "max-h-[70vh] overflow-y-auto",
            children: r.form,
          }),
          (0, t.jsxs)(A.ModalFooter, {
            children: [
              (0, t.jsx)(M.Button, {
                type: "button",
                variant: "secondary",
                onClick: s,
                disabled: "submitting" === r.status,
                children: "add-new" === r.status && e ? "Back" : "Cancel",
              }),
              (0, t.jsxs)(M.Button, {
                type: "button",
                onClick: i,
                disabled: "add-new" !== r.status,
                children: [
                  "submitting" === r.status
                    ? (0, t.jsx)(T.IconSpinner, {})
                    : null,
                  (0, t.jsx)("span", { children: "Add New Payment Method" }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    e.s(["RedeemCodeDialog", () => Z], 485614);
    var F = t,
      _ = p,
      O = M,
      B = e.i(763480),
      V = e.i(919012),
      z = (0, V.createServerReference)(
        "409f69ad7512a6900dd9f269147120f321b87e61b5",
        V.callServer,
        void 0,
        V.findSourceMapURL,
        "claimUsageCode",
      ),
      H = D,
      $ = I,
      U = A,
      G = e.i(607391),
      W = e.i(337034),
      q = e.i(287089);
    function Z({ prefilledCode: e }) {
      let [t, n] = (0, _.useState)(e ?? ""),
        [r, i] = (0, _.useState)(!1),
        [s, a] = (0, _.useState)(null),
        [o, l] = (0, _.useState)(!1),
        c = (0, _.useRef)(null);
      (0, _.useEffect)(() => {
        let e = setTimeout(() => {
          c.current && c.current.focus();
        }, 150);
        return () => clearTimeout(e);
      }, []);
      let u = async (e) => {
          (e.preventDefault(), i(!0), a(null));
          try {
            let e = await z(t);
            (a(e), e.success || (l(!0), setTimeout(() => l(!1), 250)));
          } catch (e) {
            (a({
              success: !1,
              message: e instanceof Error ? e.message : "Failed to claim code",
            }),
              l(!0),
              setTimeout(() => l(!1), 250));
          } finally {
            i(!1);
          }
        },
        d = () => {
          ((0, $.closeDialog)(),
            setTimeout(() => {
              (n(""), a(null));
            }, 300));
        };
      return (0, F.jsxs)(H.AtomicDialog, {
        type: "redeemCode",
        children: [
          (0, F.jsx)("div", {
            className: "flex flex-col px-4 pt-4",
            children: (0, F.jsx)("div", {
              className:
                "flex items-center justify-center p-4 bg-v0-background-200 rounded-md border border-v0-alpha-400 h-[240px]",
              children: (0, F.jsx)("div", {
                className: `w-[250px] relative transition-all duration-500 ${o ? q.default.jiggle : ""} ${s?.success ? "scale-105" : ""}`,
                style: {
                  transform: s?.success
                    ? "rotate(-3deg) scale(1.05)"
                    : o
                      ? "translateX(-2px)"
                      : "translateX(0px)",
                },
                children: (0, F.jsx)(W.CreditCard, {
                  amount: s?.success ? Number(s.credits).toFixed(2) : "0.00",
                  handle: "Gifted Credits",
                }),
              }),
            }),
          }),
          (0, F.jsxs)(U.ModalHeader, {
            className: "!pb-4 gap-1",
            children: [
              (0, F.jsx)(U.ModalTitle, {
                children: s?.success
                  ? `You claimed $${Number(s.credits).toFixed(2)} in credits!`
                  : "Redeem a Usage Code",
              }),
              (0, F.jsx)(U.ModalDescription, {
                children: s?.success
                  ? "Your credits will be ready to use immediately. Happy prompting!"
                  : "If you have a Usage Code for v0, you can enter it here to add credits to your account.",
              }),
            ],
          }),
          !s?.success &&
            (0, F.jsx)(U.ModalContent, {
              children: (0, F.jsx)("form", {
                id: "redeem-form",
                onSubmit: u,
                className: "space-y-2",
                children: (0, F.jsx)(B.Input, {
                  ref: c,
                  id: "code",
                  value: t,
                  onChange: (e) => n(e.target.value.trim()),
                  placeholder: "Enter a code",
                  required: !0,
                  disabled: r,
                  error: s && !s.success ? s.message : void 0,
                }),
              }),
            }),
          (0, F.jsx)(U.ModalFooter, {
            className: "bg-v0-background-200 border-t border-v0-alpha-400",
            children: s?.success
              ? (0, F.jsx)(O.Button, {
                  type: "button",
                  onClick: d,
                  size: "sm",
                  className: "rounded-md",
                  children: "Start Building",
                })
              : (0, F.jsxs)(F.Fragment, {
                  children: [
                    (0, F.jsx)(O.Button, {
                      type: "button",
                      variant: "secondary",
                      onClick: d,
                      disabled: r,
                      size: "sm",
                      className: "rounded-md",
                      children: "Cancel",
                    }),
                    (0, F.jsx)(O.Button, {
                      type: "submit",
                      form: "redeem-form",
                      disabled: r,
                      size: "sm",
                      className: "rounded-md",
                      children: (0, F.jsx)(G.ActionStatus, {
                        loading: "Verifying",
                        isLoading: r,
                        children: "Redeem",
                      }),
                    }),
                  ],
                }),
          }),
        ],
      });
    }
    e.s(["StudentVerificationSuccessDialog", () => en], 146179);
    var K = t,
      Y = M,
      J = D,
      Q = I,
      X = A,
      ee = e.i(226368),
      et = W;
    function en({ email: e, alreadyVerified: t = !1 }) {
      let n = (0, ee.usePathname)(),
        r = (0, ee.useRouter)(),
        i = () => {
          (n.includes("/chat/settings/billing") && r.refresh(),
            (0, Q.closeDialog)());
        };
      return (0, K.jsxs)(J.AtomicDialog, {
        type: "studentVerificationSuccess",
        children: [
          (0, K.jsx)("div", {
            className: "flex flex-col px-4 pt-4",
            children: (0, K.jsx)("div", {
              className:
                "flex items-center justify-center p-4 bg-v0-background-200 rounded-md border border-v0-alpha-400 h-[240px]",
              children: (0, K.jsx)("div", {
                className:
                  "w-[250px] relative transition-all duration-500 scale-105",
                style: { transform: "rotate(-3deg) scale(1.05)" },
                children: (0, K.jsx)(et.CreditCard, {
                  amount: "20.00",
                  handle: "Student",
                }),
              }),
            }),
          }),
          (0, K.jsxs)(X.ModalHeader, {
            className: "!pb-4 gap-1",
            children: [
              (0, K.jsx)(X.ModalTitle, {
                children: t
                  ? "Your student status is already verified"
                  : "Welcome to the v0 Student Program!",
              }),
              (0, K.jsx)(X.ModalDescription, {
                children: t
                  ? "You have already verified your student email address. Enjoy your Premium benefits!"
                  : "Your student email has been verified. You now have access to v0 Premium for one year. Happy building!",
              }),
            ],
          }),
          (0, K.jsx)(X.ModalFooter, {
            className: "bg-v0-background-200 border-t border-v0-alpha-400",
            children: (0, K.jsx)(X.ModalClose, {
              asChild: !0,
              children: (0, K.jsx)(Y.Button, {
                type: "button",
                onClick: i,
                size: "sm",
                className: "rounded-md",
                children: "Start Building",
              }),
            }),
          }),
        ],
      });
    }
    var er = V,
      ei = (0, er.createServerReference)(
        "40fa6a0867c88cf68e9cd9bdfac4b1a6ecf9630a69",
        er.callServer,
        void 0,
        er.findSourceMapURL,
        "verifyStudentCode",
      );
    e.s(["verifyStudentCode", () => ei], 648096);
  },
  685289,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "404675c7206f7eba9fb952cde35007259f532f781f",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "forkBlock",
      );
    e.s(["forkBlock", () => n]);
  },
  646805,
  (e) => {
    "use strict";
    e.s(["Duplicate", () => g, "Remix", () => m, "RemixBlockButton", () => h]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(304649),
      s = e.i(92479),
      a = e.i(297239),
      o = e.i(877318);
    e.i(904347);
    var l = e.i(37737),
      c = e.i(538553),
      u = e.i(667660),
      d = e.i(242759);
    function h({ blockId: e, className: o, canWriteToChat: h }) {
      let { hasWritePermission: p } = (0, u.useActiveScope)(),
        { isStreaming: f } = (0, s.useChatLoadingState)(),
        { chatId: g } = (0, s.useChatId)(),
        { gwe: x } = (0, d.useFlags)(),
        v = (0, a.useT)(),
        y = (0, n.useCallback)(() => {
          x && g
            ? (0, l.openDialog)({
                type: "duplicateChat",
                data: { chatId: g, blockId: e, actionType: "remix" },
              })
            : (0, l.openDialog)({
                type: "forkBlock",
                data: {
                  blockId: e,
                  page: "chat",
                  canWriteToChat: !!h,
                  actionType: "remix",
                },
              });
        }, [x, g, h, e]);
      return (0, t.jsx)(c.RbacTooltip, {
        show: !p,
        requiredRole: "V0Chatter",
        children: (0, t.jsxs)(r.Button, {
          className: (0, i.cn)(
            "group rounded-md px-2 has-[>svg]:px-2 flex items-center gap-2 h-7",
            o,
          ),
          disabled: f || !p,
          onClick: y,
          tooltip: p
            ? { content: v("remixBlockButton.modalDescription") }
            : void 0,
          size: "sm",
          variant: "default",
          children: [
            (0, t.jsx)(m, {
              "aria-hidden": "true",
              className: "size-3.5! md:size-4! text-v0-background-100",
            }),
            (0, t.jsx)("span", { children: v("remixBlockButton.remix") }),
          ],
        }),
      });
    }
    let p = (0, o.withNewIcon)(
        '<path d="M10.8213 15.5645C10.0601 15.8123 9.28162 15.9305 8.5127 15.9287L8.51562 14.4297C9.12828 14.4312 9.74895 14.3364 10.3564 14.1387L10.8213 15.5645ZM5.55176 13.6289C6.09159 13.9408 6.67848 14.1662 7.28809 14.2969L7.13184 15.0303L6.97461 15.7637C6.21162 15.6002 5.47742 15.3181 4.80176 14.9277L5.55176 13.6289ZM8.49707 1.0498C12.6108 1.0498 15.9531 4.36694 15.9531 8.46777C15.953 10.8964 14.7795 13.0519 12.9707 14.4033L12.3691 14.8516L11.4717 13.6504L12.0723 13.2012C13.5201 12.1195 14.453 10.4013 14.4531 8.46777C14.4531 5.20336 11.7904 2.5498 8.49707 2.5498C5.74561 2.54995 3.43409 4.40342 2.74902 6.91699H4.2373V8.41699H0.800781C0.386597 8.41699 0.0508293 8.08116 0.0507812 7.66699V3.9834H1.55078V5.77051C2.63585 3.00553 5.33784 1.04994 8.49707 1.0498ZM3.38086 11.4521C3.69902 12.0068 4.0969 12.4933 4.55273 12.9033L3.54883 14.0176C2.97707 13.5031 2.47853 12.8928 2.08008 12.1982L3.38086 11.4521ZM8.53516 5.5332C8.97692 5.53321 9.33472 5.8913 9.33496 6.33301C9.33496 6.61596 9.33635 6.83074 9.36133 7.01953C9.38549 7.20145 9.42575 7.3024 9.46582 7.3623C9.51048 7.42885 9.70248 7.66696 10.6689 7.66699C11.1107 7.66701 11.4685 8.0251 11.4688 8.4668C11.4687 8.9087 11.1108 9.26659 10.6689 9.2666C10.3859 9.2666 10.1713 9.26794 9.98242 9.29297C9.80024 9.31718 9.69949 9.35732 9.63965 9.39746C9.57314 9.44209 9.33504 9.63423 9.33496 10.6006L9.33105 10.6826C9.28996 11.086 8.94936 11.4004 8.53516 11.4004C8.12104 11.4003 7.78035 11.0859 7.73926 10.6826L7.73535 10.6006L7.73145 10.2217C7.72799 10.1094 7.72148 10.0083 7.70898 9.91406C7.68476 9.73202 7.64364 9.63109 7.60352 9.57129C7.55782 9.50361 7.36403 9.2666 6.40137 9.2666C5.95955 9.26648 5.60157 8.90864 5.60156 8.4668C5.60179 8.05284 5.91619 7.71205 6.31934 7.6709L6.40137 7.66699L6.78027 7.66309C6.8927 7.65964 6.99357 7.65312 7.08789 7.64062C7.27023 7.61641 7.37081 7.57532 7.43066 7.53516C7.49789 7.48987 7.73535 7.29726 7.73535 6.33301C7.7356 5.89137 8.09349 5.53332 8.53516 5.5332Z" fill="currentColor"/>',
      ),
      m = (e) => (0, t.jsx)(p, { ...e, "aria-hidden": "true" }),
      f = (0, o.withNewIcon)(`
  <path d="M13.25 4.5C14.2163 4.50024 15 5.28365 15 6.25V13.75C15 14.7164 14.2163 15.4998 13.25 15.5H6.7002C5.72932 15.4997 4.94369 14.7092 4.9502 13.7383L5.00195 6.23828C5.00854 5.27663 5.79034 4.50024 6.75195 4.5H13.25ZM6.75195 6C6.61484 6.00024 6.50302 6.11091 6.50195 6.24805L6.4502 13.748C6.44925 13.8866 6.56167 13.9997 6.7002 14H13.25C13.3879 13.9998 13.5 13.8879 13.5 13.75V6.25C13.5 6.11208 13.3879 6.00024 13.25 6H6.75195ZM10.75 9.25H12.5V10.75H10.75V12.5H9.25V10.75H7.5V9.25H9.25V7.5H10.75V9.25ZM9.21191 0.5C10.1783 0.500098 10.9619 1.28356 10.9619 2.25V3.10742H9.46191V2.25C9.46191 2.11199 9.3499 2.0001 9.21191 2H2.75C2.61193 2 2.5 2.11193 2.5 2.25V9.75C2.5 9.88807 2.61193 10 2.75 10H4.01855V11.5H2.75C1.7835 11.5 1 10.7165 1 9.75V2.25C1 1.2835 1.7835 0.5 2.75 0.5H9.21191Z" fill="currentColor" />
`),
      g = (e) => (0, t.jsx)(f, { ...e, "aria-hidden": "true" });
  },
  366021,
  771539,
  840696,
  (e) => {
    "use strict";
    e.s(
      [
        "ScopeDisplayText",
        () => P,
        "ScopeListItem",
        () => L,
        "TransferOwnershipModal",
        () => R,
      ],
      366021,
    );
    var t = e.i(324834),
      n = e.i(686832),
      r = e.i(176248);
    e.s(
      [
        "TransferOwnershipSetting",
        () => c,
        "useTransferOwnershipModal",
        () => l,
      ],
      771539,
    );
    var i = t,
      s = e.i(199929),
      a = r,
      o = e.i(418625);
    function l() {
      let { data: e, mutate: t } = (0, o.default)(
        "transferOwnershipModal",
        null,
        { fallbackData: !1 },
      );
      return {
        transferOwnershipModalOpen: e,
        setTransferOwnershipModalOpen: t,
      };
    }
    function c() {
      let { setTransferOwnershipModalOpen: e } = l();
      return (0, i.jsxs)(i.Fragment, {
        children: [
          (0, i.jsxs)(s.SettingsItem, {
            children: [
              (0, i.jsxs)(s.SettingsItemContent, {
                children: [
                  (0, i.jsx)(s.SettingsItemTitle, {
                    children: "Transfer Data",
                  }),
                  (0, i.jsx)(s.SettingsItemDescription, {
                    children:
                      "Transfer your chats or projects to another team or account.",
                  }),
                ],
              }),
              (0, i.jsx)(s.SettingsItemAction, {
                children: (0, i.jsx)(a.Button, {
                  size: "sm",
                  variant: "secondary",
                  className: "rounded-md h-7 px-2",
                  onClick: () => {
                    e(!0);
                  },
                  children: "Start Transfer",
                }),
              }),
            ],
          }),
          (0, i.jsx)(R, {}),
        ],
      });
    }
    var u = e.i(211976),
      d = e.i(576191),
      h = e.i(592258),
      p = e.i(230766),
      m = e.i(837062),
      f = e.i(906261),
      g = e.i(667660),
      x = e.i(206037),
      v = e.i(794593);
    e.i(563948);
    var y = e.i(407562),
      b = e.i(762585),
      j = e.i(919012),
      w = (0, j.createServerReference)(
        "4047aec81f4ec01a1e8c6d7b4fe607312d3cda758a",
        j.callServer,
        void 0,
        j.findSourceMapURL,
        "transferOwnershipAction",
      );
    e.s(["transferOwnershipAction", () => w], 840696);
    var C = e.i(226368),
      k = e.i(610726),
      S = e.i(707827);
    e.i(472428);
    var N = e.i(296900),
      E = e.i(602544),
      A = e.i(403055),
      D = e.i(696871);
    let I = "";
    function M({ planSlug: e }) {
      let n = {
        "v0-level0": { label: "Free", variant: void 0 },
        "v0-level3": { label: "Premium", variant: "teal" },
        "v0-team": { label: "Team", variant: "blue" },
        "v0-business": { label: "Business", variant: "blue" },
        "v0-enterprise": { label: "Enterprise", variant: "purple" },
        "v0-ultra": { label: "Ultra", variant: "teal" },
      }[e];
      return n
        ? (0, t.jsx)(v.Badge, { variant: n.variant, children: n.label })
        : null;
    }
    function T(e, t, n) {
      return (
        e.id !== t?.id &&
        (!!(0, f.isUserScope)(e) ||
          "v0-team" === n ||
          "v0-enterprise" === n ||
          "v0-business" === n)
      );
    }
    function L({ scope: e, activeScope: n }) {
      let { planSlug: r } = (0, x.usePlanInfo)(!0, e.id);
      if (!r || !T(e, n, r)) return null;
      let i = (0, f.isUserScope)(e) ? e.username : e.name;
      return (0, t.jsx)(h.SelectItem, {
        className: "flex w-full items-center justify-between gap-2",
        value: e.id,
        children: (0, t.jsxs)("div", {
          className: "flex w-full items-center justify-between gap-2",
          children: [
            (0, t.jsxs)("div", {
              className: "flex items-center gap-2",
              children: [
                (0, t.jsx)(p.AvatarUser, {
                  teamId: (0, f.isUserScope)(e) ? void 0 : e.id,
                  userId: (0, f.isUserScope)(e) ? e.id : void 0,
                  className: "h-4 w-4",
                }),
                (0, t.jsx)("p", { children: i }),
              ],
            }),
            r && (0, t.jsx)(M, { planSlug: r }),
          ],
        }),
      });
    }
    function P({ activeScope: e }) {
      return e
        ? (0, f.isUserScope)(e)
          ? (0, t.jsxs)("span", {
              className: "inline-flex font-medium ",
              children: [e.username, "'s Account"],
            })
          : (0, t.jsxs)("span", {
              className: "inline-flex font-medium",
              children: [e.slug, ""],
            })
        : (0, t.jsx)("span", {
            className: "mx-1 inline-flex align-middle",
            children: (0, t.jsx)(b.Skeleton, { className: "h-4 w-24" }),
          });
    }
    function R() {
      let { transferOwnershipModalOpen: e, setTransferOwnershipModalOpen: i } =
          l(),
        [s, a] = (0, d.useState)(!1),
        { scopes: o } = (0, m.useScopes)(),
        [c, x] = (0, d.useState)(""),
        { activeScope: v } = (0, g.useActiveScope)(),
        b = (0, C.useRouter)(),
        [j, E] = (0, d.useState)(new Set()),
        [A, M] = (0, d.useState)(!1),
        { count: R, increment: _, reset: O } = (0, k.useCounter)(1),
        B = (0, d.useRef)(null),
        V = (0, d.useRef)(null),
        [z, H] = (0, d.useState)([]),
        { data: $, isLoading: U } = (0, N.useServerQuerySWR)(
          ["scoped", "paginatedChats"],
          { page: R, pageSize: D.CHAT_HISTORY_PAGE_SIZE, searchText: "" },
          {
            onSuccess(e) {
              e?.ok &&
                (1 === R
                  ? H(e.value.chats)
                  : H((t) => [...t, ...e.value.chats]));
            },
          },
        );
      function G() {
        W && _();
      }
      (0, d.useEffect)(() => {
        O();
      }, [v]);
      let W = (0, d.useMemo)(
        () => $?.ok && $.value.chats.length === D.CHAT_HISTORY_PAGE_SIZE,
        [$],
      );
      (0, d.useEffect)(() => {
        if (o?.length && !c) {
          let e = o.find((e) => T(e, v));
          e && x(e.id);
        }
      }, [o, c, v]);
      let q = o?.find((e) => e.id === c),
        Z = async () => {
          if (!v) return void y.toast.error("Active scope is null");
          if (!q) return void y.toast.error("Selected team is null");
          a(!0);
          try {
            let e = await w({ from: v, to: q, chatIds: Array.from(j) });
            if (!e.ok) return void y.toast.error(e.error);
            (y.toast.success("Ownership transferred successfully"),
              i(!1),
              E(new Set()),
              b.refresh());
          } catch (e) {
            (y.toast.error(
              "message" in e ? e.message : "Failed to transfer ownership",
            ),
              console.error("Failed to transfer ownership:", e));
          } finally {
            a(!1);
          }
        };
      function K(e) {
        E((t) => {
          if (e == I) return new Set([]);
          let n = new Set(t);
          return (n.has(e) ? n.delete(e) : n.add(e), n);
        });
      }
      return (
        (0, d.useEffect)(() => {
          if (!A || !B.current || !V.current) return;
          let e = new IntersectionObserver(
            (e) => {
              let t = e[0];
              t?.isIntersecting && G();
            },
            { root: B.current },
          );
          return (
            e.observe(V.current),
            () => {
              e.disconnect();
            }
          );
        }, [A]),
        (0, t.jsxs)(n.Modal, {
          open: e,
          onOpenChange: i,
          children: [
            (0, t.jsxs)(n.ModalHeader, {
              className: "space-y-2",
              children: [
                (0, t.jsx)(n.ModalTitle, { children: "Transfer Data" }),
                (0, t.jsxs)(n.ModalDescription, {
                  children: [
                    "Transfer one or all of your chats from",
                    " ",
                    (0, t.jsxs)("span", {
                      className: "whitespace-nowrap",
                      children: [
                        (0, t.jsx)("span", {
                          className: "ml-[-2px] inline-flex align-middle",
                          children: (0, t.jsx)(p.AvatarUser, {
                            teamId: (0, f.isUserScope)(v) ? void 0 : v?.id,
                            userId: (0, f.isUserScope)(v) ? v.id : void 0,
                            className: "ml-1 size-4 rounded-full",
                          }),
                        }),
                        " ",
                        (0, t.jsx)(P, { activeScope: v }),
                      ],
                    }),
                    "to another account or team.",
                  ],
                }),
              ],
            }),
            (0, t.jsxs)(n.ModalContent, {
              className: "py-4 space-y-4",
              children: [
                (0, t.jsxs)(h.Select, {
                  value: void 0,
                  open: A,
                  onOpenChange: M,
                  children: [
                    (0, t.jsx)(h.SelectTrigger, {
                      className: "w-full",
                      children: (0, t.jsx)(h.SelectValue, {
                        placeholder:
                          0 == j.size
                            ? "All chats"
                            : `${j.size} ${j.size > 1 ? "chats" : "chat"} selected`,
                      }),
                    }),
                    (0, t.jsxs)(h.SelectContent, {
                      className: "max-h-[250px] overflow-y-auto relative",
                      ref: B,
                      children: [
                        (0, t.jsx)(F, {
                          name: "All chats",
                          id: I,
                          checked: 0 === j.size,
                          onClick: K,
                        }),
                        z.map((e) =>
                          (0, t.jsx)(
                            F,
                            {
                              name: e.metadata?.title ?? "Untitled chat",
                              id: e.chatId,
                              checked: j.has(e.chatId),
                              onClick: K,
                            },
                            e.chatId,
                          ),
                        ),
                        W
                          ? (0, t.jsx)("div", {
                              ref: V,
                              className:
                                "h-10 w-full pointer-events-none absolute",
                            })
                          : null,
                        U
                          ? (0, t.jsx)("div", {
                              className: "w-fit mx-auto",
                              children: (0, t.jsx)(S.Spinner, { size: 16 }),
                            })
                          : null,
                      ],
                    }),
                  ],
                }),
                (0, t.jsxs)(h.Select, {
                  value: c,
                  onValueChange: x,
                  children: [
                    (0, t.jsx)(h.SelectTrigger, {
                      className: "w-full",
                      children: (0, t.jsx)(h.SelectValue, {
                        placeholder: "Select a team or user...",
                      }),
                    }),
                    (0, t.jsx)(h.SelectContent, {
                      className: "max-h-[250px] overflow-y-auto",
                      children: o?.map((e) =>
                        (0, t.jsx)(L, { scope: e, activeScope: v }, e.id),
                      ),
                    }),
                  ],
                }),
              ],
            }),
            (0, t.jsxs)(n.ModalFooter, {
              children: [
                (0, t.jsx)(n.ModalClose, {
                  asChild: !0,
                  children: (0, t.jsx)(r.Button, {
                    variant: "secondary",
                    size: "sm",
                    children: "Cancel",
                  }),
                }),
                (0, t.jsx)(u.SpinnerButton, {
                  size: "sm",
                  pending: s,
                  onClick: Z,
                  disabled: !q,
                  children: s ? "Transferring" : "Confirm and Transfer",
                }),
              ],
            }),
          ],
        })
      );
    }
    function F({ name: e, id: n, checked: r, onClick: i }) {
      return (0, t.jsxs)("div", {
        className:
          "p-1.5 text-sm hover:bg-v0-gray-100 rounded-md flex items-center gap-2",
        onClick: () => {
          i(n);
        },
        children: [
          (0, t.jsx)("div", {
            className: (0, A.cn)(
              "flex h-3.5 w-3.5 items-center justify-center left-2",
              !r && "invisible",
            ),
            children: (0, t.jsx)(E.Check, { className: "h-3 w-3" }),
          }),
          (0, t.jsx)("p", { children: e }),
        ],
      });
    }
  },
  199814,
  331193,
  443283,
  565135,
  (e) => {
    "use strict";
    (e.s(["ChatForkBlockDialog", () => C], 199814), e.i(439235));
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(763480);
    e.i(563948);
    var s = e.i(407562),
      a = e.i(686832),
      o = e.i(120945),
      l = e.i(53223),
      c = e.i(685289),
      u = e.i(120485),
      d = e.i(226368),
      h = e.i(885340),
      p = e.i(297239),
      m = e.i(323194),
      f = e.i(32170),
      g = e.i(707827),
      x = e.i(37737),
      v = e.i(70165),
      y = e.i(646805),
      b = e.i(819969),
      j = e.i(393799);
    let w = "production";
    function C({
      page: e,
      canWriteToChat: C,
      blockId: k,
      actionType: S = "duplicate",
    }) {
      let { expectUser: N, user: E } = (0, f.useUser)(),
        { setShowSignInDialog: A } = (0, m.useSignInDialog)(),
        D = (0, d.useRouter)(),
        I = (0, p.useT)(),
        { atoms: M } = (0, b.useCurrentChat)(),
        T = (0, j.useAtomValue)(M.title),
        L = (0, v.useIsMobile)(),
        P = (0, n.useRef)(null),
        [R, F] = (0, n.useTransition)(),
        _ = (0, n.useMemo)(() => {
          let e = T || "Untitled Chat";
          return (0, h.incrementForkName)(e, 100);
        }, [T]),
        [O, B] = (0, n.useState)(_);
      (0, n.useEffect)(() => {
        setTimeout(() => {
          (P.current?.focus(), L || P.current?.select());
        }, 0);
      }, [L]);
      let V = (0, n.useCallback)(() => {
          if (!O.trim()) return void s.toast.error("Please enter a fork name");
          if (
            !C &&
            E?.isAdminMode &&
            !window.confirm(
              "[V0 ADMIN] Are you sure you want to fork this block?",
            )
          )
            return;
          let t = new URLSearchParams();
          t.set("forkBlockId", k);
          let n = "http://localhost:3000/chat";
          "production" === w && (n = "https://v0.app/chat");
          let r = `${n}?${t.toString()}`;
          if (!N) return A({ content: !1, forkBlockId: k });
          (0, l.track)("ClickForkBlock");
          try {
            F(async () => {
              if ("chat" === e) {
                let e = await (0, c.forkBlock)({
                  blockId: k,
                  customForkName: O.trim(),
                  type: S,
                });
                if (!e.ok)
                  return void s.toast.error(
                    "duplicate" === S
                      ? I("duplicateBlockButton.errorToast")
                      : I("remixBlockButton.errorToast"),
                  );
                let t = new URLSearchParams(window.location.search).get(
                    "assignBranch",
                  ),
                  { newChatId: n } = e.value,
                  r = t
                    ? `/chat/${n}?assignBranch=${encodeURIComponent(t)}`
                    : `/chat/${n}`;
                D.push(r);
              }
              (s.toast.success(
                "duplicate" === S
                  ? I("duplicateBlockButton.successToast")
                  : I("remixBlockButton.successToast"),
              ),
                "block" === e && window.open(r, "_blank")?.focus(),
                (0, x.closeDialog)());
            });
          } catch (e) {
            ((0, d.unstable_rethrow)(e),
              console.log(e),
              (0, u.handleChatError)(e) ||
                s.toast.error(
                  "duplicate" === S
                    ? I("duplicateBlockButton.errorToast")
                    : I("remixBlockButton.errorToast"),
                ));
          }
        }, [O, C, E?.isAdminMode, k, N, A, e, I, S, D]),
        z = (0, n.useCallback)(
          (e) => {
            (e.preventDefault(), V());
          },
          [V],
        ),
        H = (0, n.useCallback)(
          (e) => {
            "Enter" === e.key && !R && O.trim() && (e.preventDefault(), V());
          },
          [V, R, O],
        ),
        $ = (0, n.useMemo)(
          () =>
            R
              ? (0, t.jsx)(g.Spinner, {
                  className: "size-4! text-v0-gray-900",
                  size: 16,
                })
              : "duplicate" === S
                ? (0, t.jsx)(y.Duplicate, { className: "size-4!" })
                : (0, t.jsx)(y.Remix, { className: "size-4!" }),
          [R, S],
        );
      return (0, t.jsxs)(o.AtomicDialog, {
        type: "forkBlock",
        children: [
          (0, t.jsxs)(a.ModalHeader, {
            children: [
              (0, t.jsx)(a.ModalTitle, {
                children:
                  "duplicate" === S
                    ? I("duplicateBlockButton.duplicate")
                    : I("remixBlockButton.remix"),
              }),
              (0, t.jsx)(a.ModalDescription, {
                asChild: !0,
                children: (0, t.jsxs)("div", {
                  children: [
                    (0, t.jsx)("div", {
                      className: "text-v0-gray-1000 text-label-14 mb-4",
                      children:
                        "duplicate" === S
                          ? I("duplicateBlockButton.modalDescription")
                          : I("remixBlockButton.modalDescription"),
                    }),
                    (0, t.jsx)("div", {
                      className: "space-y-2",
                      children: (0, t.jsx)(i.Input, {
                        label: "New chat name",
                        id: "forkName",
                        ref: P,
                        value: O,
                        onChange: (e) => B(e.target.value),
                        onKeyDown: H,
                        placeholder: "Enter fork name",
                        disabled: R,
                        className: "w-full",
                        maxLength: 100,
                        autoFocus: !0,
                      }),
                    }),
                  ],
                }),
              }),
            ],
          }),
          (0, t.jsxs)("div", {
            className:
              "bg-v0-background-200 border-v0-alpha-400 flex w-full items-center justify-end gap-2 border-t p-4",
            children: [
              (0, t.jsx)(a.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(r.Button, {
                  variant: "secondary",
                  size: "sm",
                  children:
                    "duplicate" === S
                      ? I("duplicateBlockButton.cancel")
                      : I("remixBlockButton.cancel"),
                }),
              }),
              (0, t.jsxs)(r.Button, {
                className: "fork-button",
                size: "sm",
                onClick: z,
                disabled: R || !O.trim(),
                children: [
                  $,
                  "duplicate" === S
                    ? I("duplicateBlockButton.duplicate")
                    : I("remixBlockButton.remix"),
                ],
              }),
            ],
          }),
        ],
      });
    }
    var k = t,
      S = a,
      N = o,
      E = r,
      A = e.i(990453),
      D = e.i(707974),
      I = n,
      M = i,
      T = e.i(741006),
      L = e.i(772438),
      P = s;
    e.i(472428);
    var R = e.i(296900),
      F = e.i(607391),
      _ = e.i(919012),
      O = (0, _.createServerReference)(
        "403f53d348402c094811f648f288cb90cac0cf527f",
        _.callServer,
        void 0,
        _.findSourceMapURL,
        "configurePasswordProtectionAction",
      ),
      B = f,
      V = e.i(667660),
      z = e.i(538553),
      H = e.i(387040);
    let $ = new Set(["OWNER", "MEMBER"]),
      U = "__VERCEL_PASS__";
    function G({ chatId: e }) {
      let { hasVercelWritePermission: t } = (0, V.useActiveScope)(),
        { user: n } = (0, B.useUser)(),
        [r, i] = (0, I.useState)(!1),
        [s, a] = (0, I.useState)(!1),
        [o, l] = (0, I.useState)(!1),
        [c, u] = (0, I.useState)(""),
        d = (0, I.useMemo)(
          () => !!(!t || (n?.teamRole && !$.has(n.teamRole))),
          [t, n?.teamRole],
        ),
        {
          data: h,
          isLoading: p,
          mutate: m,
        } = (0, R.useServerQuerySWR)(["chat", "passwordProtection"], {
          chatId: e,
        });
      async function f() {
        a(!0);
        let t = r ? "enabled" : "disabled";
        try {
          let n = r ? c.trim() : void 0,
            i = await m({
              serverMutate: (async () => await O({ password: n, chatId: e }))(),
              optimisticData: (0, H.ok)({ enabled: r }),
            });
          if (!0 !== i)
            throw Error(
              `An error happened while trying to ${t} password protection`,
            );
          P.toast.success(`Password protection was ${t} successfully`);
        } catch (e) {
          P.toast.error(
            `An error happened while trying to ${t} password protection`,
          );
        } finally {
          a(!1);
        }
      }
      return (
        (0, I.useEffect)(() => {
          h?.ok && h.value.enabled && (i(!0), u(U));
        }, [h]),
        (0, k.jsxs)(N.AtomicDialog, {
          type: "passwordProtection",
          children: [
            (0, k.jsxs)(S.ModalHeader, {
              children: [
                (0, k.jsx)(S.ModalTitle, { children: "Password Protection" }),
                (0, k.jsx)(S.ModalDescription, {
                  className: "text-sm text-v0-gray-1000",
                  children:
                    "Ensures visitors to your deployments must enter a password in order to gain access. All chats created in this project will be password protected.",
                }),
              ],
            }),
            (0, k.jsxs)(S.ModalContent, {
              className: "flex flex-col gap-4",
              children: [
                (0, k.jsxs)("div", {
                  className: "flex items-center space-x-2",
                  children: [
                    (0, k.jsx)(z.RbacTooltip, {
                      show: !t,
                      requiredRole: "V0Builder",
                      children: (0, k.jsx)(A.Switch, {
                        thumbClassName: "size-[22px]",
                        id: "password-protection",
                        checked: r,
                        onCheckedChange: i,
                        disabled: p || s || d,
                        className: "h-6 w-10",
                      }),
                    }),
                    (0, k.jsx)(D.Label, {
                      htmlFor: "password-protection",
                      className: "font-medium text-v0-black",
                      children: r ? "Enabled" : "Disabled",
                    }),
                  ],
                }),
                (0, k.jsx)("div", {
                  children: (0, k.jsx)(z.RbacTooltip, {
                    show: !t,
                    requiredRole: "V0Builder",
                    children: (0, k.jsx)(M.Input, {
                      label: "Password",
                      id: "password-input",
                      placeholder: "Enter a password",
                      type: o && c != U ? "text" : "password",
                      disabled: !r || p || s || d,
                      value: c,
                      onChange: (e) => u(e.target.value),
                      onFocus: () => {
                        c === U && u("");
                      },
                      onBlur: () => {
                        "" === c && h?.ok && h.value.enabled && u(U);
                      },
                      suffix:
                        c !== U
                          ? (0, k.jsx)(z.RbacTooltip, {
                              show: !t,
                              requiredRole: "V0Builder",
                              children: (0, k.jsx)(E.Button, {
                                type: "button",
                                variant: "ghost",
                                size: "sm",
                                className: "size-4",
                                onClick: () => l(!o),
                                disabled: !r || p || d,
                                children: o
                                  ? (0, k.jsx)(L.EyeOff, {})
                                  : (0, k.jsx)(T.Eye, {}),
                              }),
                            })
                          : null,
                    }),
                  }),
                }),
                d
                  ? (0, k.jsx)("div", {
                      className: "text-label-13 text-v0-gray-900",
                      children: (0, k.jsx)("p", {
                        children:
                          "You need additional permissions to manage Password Protection",
                      }),
                    })
                  : null,
              ],
            }),
            (0, k.jsxs)(S.ModalFooter, {
              className: "bg-v0-background-200 border-v0-alpha-400 border-t",
              children: [
                (0, k.jsx)(S.ModalClose, {
                  asChild: !0,
                  children: (0, k.jsx)(E.Button, {
                    size: "sm",
                    variant: "secondary",
                    children: "Cancel",
                  }),
                }),
                (0, k.jsx)(z.RbacTooltip, {
                  show: !t,
                  requiredRole: "V0Builder",
                  children: (0, k.jsx)(E.Button, {
                    size: "sm",
                    variant: "secondary",
                    disabled: p || (r && !c.trim()) || s || d,
                    onClick: f,
                    children: (0, k.jsx)(F.ActionStatus, {
                      isLoading: s,
                      loading: "Saving changes",
                      children: "Save Changes",
                    }),
                  }),
                }),
              ],
            }),
          ],
        })
      );
    }
    (e.s(["PasswordProtection", () => G], 331193),
      e.s(["JoinedTeams", () => en], 443283));
    var W = t,
      q = a,
      Z = r,
      K = o;
    e.i(904347);
    var Y = x,
      J = e.i(230766),
      Q = e.i(366021),
      X = V,
      ee = n,
      et = e.i(211976);
    function en({ teams: e }) {
      let { setActiveScope: t } = (0, X.useActiveScope)();
      async function n(e) {
        (await t(e), (0, Y.closeDialog)());
      }
      return (0, W.jsxs)(K.AtomicDialog, {
        type: "joinedNewTeams",
        children: [
          (0, W.jsxs)(q.ModalHeader, {
            children: [
              (0, W.jsxs)(q.ModalTitle, {
                children: [
                  "You've Joined",
                  " ",
                  (0, W.jsx)("span", {
                    children: e.length > 1 ? "New Teams" : "a New Team",
                  }),
                ],
              }),
              (0, W.jsxs)(q.ModalDescription, {
                children: [
                  "You've joined",
                  " ",
                  (0, W.jsx)("span", {
                    children: e.length > 1 ? "new teams" : "a new team",
                  }),
                  " on v0, do you want to switch?",
                ],
              }),
            ],
          }),
          (0, W.jsx)(q.ModalContent, {
            className: "space-y-3",
            children: e.map((e) =>
              (0, W.jsx)(er, { scope: e, onClick: n }, e.id),
            ),
          }),
          (0, W.jsx)(q.ModalFooter, {
            children: (0, W.jsx)(Z.Button, {
              size: "sm",
              onClick: Y.closeDialog,
              children: "Continue with current team",
            }),
          }),
        ],
      });
    }
    function er({ scope: e, onClick: t }) {
      let [n, r] = (0, ee.useState)(!1);
      return (0, W.jsxs)("div", {
        className: "flex justify-between",
        children: [
          (0, W.jsxs)("div", {
            className: "flex gap-1.5 items-center",
            children: [
              (0, W.jsx)(J.AvatarUser, {
                teamId: e.id,
                size: "sm",
                rounded: !0,
              }),
              (0, W.jsx)(Q.ScopeDisplayText, { activeScope: e }),
            ],
          }),
          (0, W.jsx)(et.SpinnerButton, {
            pending: n,
            size: "sm",
            variant: "secondary",
            onClick: async () => {
              try {
                (r(!0), await t(e));
              } finally {
                r(!1);
              }
            },
            children: "Switch",
          }),
        ],
      });
    }
    var ei = t,
      es = a,
      ea = o,
      eo = r,
      el = n,
      ec = F,
      eu = V,
      ed = e.i(592258),
      eh = Q,
      ep = e.i(840696),
      em = s,
      ef = x;
    function eg({ chatId: e }) {
      let [t, n] = (0, el.useState)(!1),
        {
          activeScope: r,
          scopes: i,
          setActiveScope: s,
        } = (0, eu.useActiveScope)(),
        [a, o] = (0, el.useState)(),
        l = (0, el.useMemo)(() => i?.find((e) => e.id === a), [a, i]);
      async function c() {
        if (!r) return void em.toast.error("Active scope is null");
        if (!l) return void em.toast.error("Selected team is null");
        n(!0);
        try {
          let t = await (0, ep.transferOwnershipAction)({
            from: r,
            to: l,
            chatIds: [e],
          });
          if (!t.ok) return void em.toast.error(t.error);
          (await s(l),
            em.toast.success("Ownership transferred successfully"),
            (0, ef.closeDialog)());
        } catch (e) {
          em.toast.error(
            "message" in e ? e.message : "Failed to transfer ownership",
          );
        } finally {
          n(!1);
        }
      }
      return (0, ei.jsxs)(ea.AtomicDialog, {
        type: "transferChat",
        children: [
          (0, ei.jsxs)(es.ModalHeader, {
            children: [
              (0, ei.jsx)(es.ModalTitle, { children: "Transfer Chat" }),
              (0, ei.jsx)(es.ModalDescription, {
                className: "text-sm text-v0-gray-1000",
                children: "Transfer this chat to a different team",
              }),
            ],
          }),
          (0, ei.jsx)(es.ModalContent, {
            className: "flex flex-col gap-4",
            children: (0, ei.jsxs)(ed.Select, {
              value: a,
              onValueChange: o,
              children: [
                (0, ei.jsx)(ed.SelectTrigger, {
                  className: "w-full",
                  children: (0, ei.jsx)(ed.SelectValue, {
                    placeholder: "Select a team or user...",
                  }),
                }),
                (0, ei.jsx)(ed.SelectContent, {
                  className: "max-h-[250px] overflow-y-auto",
                  children: i?.map((e) =>
                    (0, ei.jsx)(
                      eh.ScopeListItem,
                      { scope: e, activeScope: r },
                      e.id,
                    ),
                  ),
                }),
              ],
            }),
          }),
          (0, ei.jsxs)(es.ModalFooter, {
            className: "bg-v0-background-200 border-v0-alpha-400 border-t",
            children: [
              (0, ei.jsx)(es.ModalClose, {
                asChild: !0,
                children: (0, ei.jsx)(eo.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: "Cancel",
                }),
              }),
              (0, ei.jsx)(eo.Button, {
                size: "sm",
                disabled: t || !a,
                onClick: c,
                children: (0, ei.jsx)(ec.ActionStatus, {
                  isLoading: t,
                  loading: "Saving changes",
                  children: "Transfer Chat",
                }),
              }),
            ],
          }),
        ],
      });
    }
    e.s(["TransferChat", () => eg], 565135);
  },
  984049,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M7.15714 0L2.33264 9.40776L1.77252 10.5H3.00001H7.00001C7.13808 10.5 7.25001 10.6119 7.25001 10.75V16H8.84288L13.6674 6.59224L14.2275 5.5H13H9.00001C8.86194 5.5 8.75001 5.38807 8.75001 5.25V0H7.15714ZM7.00001 9H4.22749L7.25001 3.1061V5.25C7.25001 6.2165 8.03351 7 9.00001 7H11.7725L8.75001 12.8939V10.75C8.75001 9.7835 7.96651 9 7.00001 9Z" fill="currentColor"/>',
    );
    e.s(["Lightning", 0, t]);
  },
  529660,
  (e) => {
    "use strict";
    e.s(["NewProjectButton", () => v]);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(304649),
      i = e.i(654335),
      s = e.i(984049),
      a = e.i(459522),
      o = e.i(297239),
      l = e.i(206037),
      c = e.i(762585),
      u = e.i(667660),
      d = e.i(696871),
      h = e.i(921),
      p = e.i(576191),
      m = e.i(211976);
    e.i(563948);
    var f = e.i(407562);
    e.i(904347);
    var g = e.i(37737),
      x = e.i(538553);
    function v({
      variant: e,
      onAfterClick: v,
      className: y,
      numProjects: b,
      quickCreate: j = !1,
      projectName: w,
      onSuccess: C,
      assignToChatId: k,
      withIcon: S,
      ...N
    }) {
      let E = (0, o.useT)(),
        { activeScope: A, hasVercelWritePermission: D } = (0,
        u.useActiveScope)(),
        { planSlug: I } = (0, l.usePlanInfo)(!0, A?.id),
        [M, T] = (0, p.useState)(!1),
        L = I && ("v0-level0" !== I || b < d.MAX_PROJECTS_FOR_FREE_USERS),
        P = (0, p.useCallback)(async () => {
          if (!w || !D) return;
          T(!0);
          let e = await (0, h.createProject)({
            projectName: w,
            onSuccess: C,
            chatId: k,
          });
          (e.ok || f.toast.error(e.error), T(!1));
        }, [w, C, k, D]);
      return L || void 0 !== I
        ? L
          ? j && w
            ? (0, t.jsx)(x.RbacTooltip, {
                show: !D,
                requiredRole: "V0Builder",
                children: (0, t.jsxs)(m.SpinnerButton, {
                  className: (0, r.cn)(y),
                  pending: M,
                  onClick: P,
                  size: "sm",
                  variant: e,
                  disabled: !D || N.disabled,
                  ...N,
                  children: [
                    S && (0, t.jsx)(a.Plus, {}),
                    E("project.createDialog.newProjectButton"),
                  ],
                }),
              })
            : j
              ? (0, t.jsx)(x.RbacTooltip, {
                  show: !D,
                  requiredRole: "V0Builder",
                  children: (0, t.jsxs)(n.Button, {
                    className: (0, r.cn)(y),
                    onClick: () => {
                      (0, g.openDialog)({ type: "quickProjectCreate" });
                    },
                    size: "sm",
                    variant: e,
                    disabled: !D || N.disabled,
                    ...N,
                    children: [
                      S && (0, t.jsx)(a.Plus, {}),
                      E("project.createDialog.newProjectButton"),
                    ],
                  }),
                })
              : (0, t.jsx)(x.RbacTooltip, {
                  show: !D,
                  requiredRole: "V0Builder",
                  children: (0, t.jsx)(n.Button, {
                    className: (0, r.cn)(y),
                    size: "sm",
                    variant: e,
                    disabled: !D || N.disabled,
                    ...N,
                    asChild: !0,
                    children: (0, t.jsxs)(i.default, {
                      className: (0, r.cn)(y),
                      href: "/chat/projects/new",
                      onClick: v,
                      children: [
                        S && (0, t.jsx)(a.Plus, {}),
                        E("project.createDialog.newProjectButton"),
                      ],
                    }),
                  }),
                })
          : (0, t.jsxs)(n.Button, {
              className: (0, r.cn)(y),
              "data-testid": "new-project-upgrade-button",
              onClick: () => {
                ((0, g.openDialog)({ type: "upgradePlan" }), v?.());
              },
              size: "sm",
              type: "button",
              children: [
                (0, t.jsx)(s.Lightning, {}),
                E("project.createDialog.upgradePlan"),
              ],
            })
        : (0, t.jsx)(c.Skeleton, { className: (0, r.cn)("h-8 w-24", y) });
    }
  },
  751231,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.7071 2.39644C8.31658 2.00592 7.68341 2.00592 7.29289 2.39644L4.46966 5.21966L3.93933 5.74999L4.99999 6.81065L5.53032 6.28032L7.99999 3.81065L10.4697 6.28032L11 6.81065L12.0607 5.74999L11.5303 5.21966L8.7071 2.39644ZM5.53032 9.71966L4.99999 9.18933L3.93933 10.25L4.46966 10.7803L7.29289 13.6035C7.68341 13.9941 8.31658 13.9941 8.7071 13.6035L11.5303 10.7803L12.0607 10.25L11 9.18933L10.4697 9.71966L7.99999 12.1893L5.53032 9.71966Z" fill="currentColor"/>',
    );
    e.s(["ChevronUpDown", 0, t]);
  },
  60425,
  914897,
  (e) => {
    "use strict";
    e.s(["ProjectsDropdown", () => N], 60425);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(556355),
      i = e.i(621553),
      s = e.i(176248),
      a = e.i(529660),
      o = e.i(969372),
      l = e.i(751231),
      c = e.i(84977),
      u = e.i(276507),
      d = e.i(304649),
      h = e.i(686832),
      p = e.i(183673),
      m = e.i(53223),
      f = e.i(297239),
      g = e.i(802094),
      x = e.i(70165),
      v = e.i(118376),
      y = e.i(783069),
      b = e.i(449381),
      j = e.i(479273),
      w = e.i(120282),
      C = e.i(393799),
      k = e.i(819969);
    function S({ onClose: e, quickCreate: n = !1 }) {
      let r = (0, f.useT)(),
        { atoms: i } = (0, k.useCurrentChat)(),
        s = (0, C.useAtomValue)(i.title),
        o = (0, b.useActiveBlockState)();
      return (0, t.jsx)("div", {
        className: "flex h-full items-center justify-center p-1 sm:p-2",
        children: (0, t.jsx)(u.Empty, {
          className:
            "bg-v0-background-200 w-full rounded-md border border-v0-gray-200 p-2",
          children: (0, t.jsxs)(u.EmptyContent, {
            className: "flex flex-col items-center space-y-4 p-4",
            children: [
              (0, t.jsxs)("span", {
                className:
                  "flex flex-col items-center justify-between space-y-4",
                children: [
                  (0, t.jsx)(u.EmptyIcon, {
                    className: "bg-v0-background-100 mx-auto text-v0-gray-500",
                    children: (0, t.jsx)(c.FolderClosed, {}),
                  }),
                  (0, t.jsxs)("span", {
                    className: "flex flex-col items-center space-y-2",
                    children: [
                      (0, t.jsx)(u.EmptyTitle, {
                        children: r("project.dropdown.noProjects"),
                      }),
                      (0, t.jsx)(u.EmptyDescription, {
                        className: "text-balance text-center text-v0-gray-500",
                        children: r("project.dropdown.createProject"),
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsx)(a.NewProjectButton, {
                onAfterClick: e,
                numProjects: 0,
                quickCreate: n,
                projectName: o?.meta.title ?? s ?? void 0,
              }),
            ],
          }),
        }),
      });
    }
    function N({
      projectName: e,
      chatId: c,
      disabled: u,
      onLoggedOutClick: b,
      modalClassName: C,
      triggerButton: k,
      handleProjectSelect: N,
      variant: E = "default",
      className: A,
      quickCreate: D = !1,
      onSuccess: I,
      align: M = "start",
    }) {
      let {
          projects: T,
          selectedProjectId: L,
          setSelectedProjectId: P,
        } = (0, p.useProjectsForUser)(),
        [R, F] = (0, n.useState)(!1),
        [_, O] = (0, n.useState)(!1),
        B = (0, x.useIsMobile)(),
        V = (0, f.useT)(),
        { locale: z } = (0, j.useLocale)(),
        H = () => {
          (F(!1), O(!1));
        },
        $ = (e) => {
          (P(e?.projectId || null),
            H(),
            (0, m.track)("SelectProject", { projectId: e?.projectId || null }),
            N?.(
              e
                ? {
                    projectId: e.projectId,
                    name: e.name,
                    settings: {
                      icon: e.icon || void 0,
                      color: e.color || void 0,
                    },
                    creatorId: e.creatorId,
                    vercelProjectId: e.vercelProjectId,
                  }
                : null,
            ));
        },
        U = L && T.find((e) => e.projectId === L),
        G =
          k ||
          (0, t.jsx)(s.Button, {
            "aria-label": "Select project",
            className: (0, d.cn)(
              "flex h-7 max-w-[124px] justify-start gap-0.5 rounded-md border-none bg-v0-gray-100 pr-1.5 text-[12px] transition-colors hover:bg-v0-gray-200 hover:text-v0-gray-1000 has-[>svg]:pr-1.5 sm:text-[13px]",
              { "text-v0-gray-900": !U },
              z === w.esLocaleInfo.iso639
                ? "sm:max-w-[220px]"
                : "sm:max-w-[200px]",
            ),
            disabled: u,
            size: "sm",
            variant: "secondary",
            children: U
              ? (0, t.jsxs)(t.Fragment, {
                  children: [
                    (0, t.jsx)(g.IconPickerIcon, {
                      name: (0, v.cleanIconName)(U.icon),
                    }),
                    (0, t.jsx)("span", {
                      className: "ml-1 truncate",
                      children: U.name,
                    }),
                    (0, t.jsx)(o.ChevronDownSmall, {}),
                  ],
                })
              : (0, t.jsxs)(t.Fragment, {
                  children: [
                    (0, t.jsx)("span", {
                      className: "sm:hidden",
                      children: V("project.noProjectSelectedMobile"),
                    }),
                    (0, t.jsx)("span", {
                      className: "hidden sm:inline",
                      children: V("project.noProjectSelected"),
                    }),
                    (0, t.jsx)(o.ChevronDownSmall, {}),
                  ],
                }),
          }),
        W = (0, n.useMemo)(
          () =>
            (0, y.toSorted)(T, (e, t) =>
              e.projectId === L ? -1 : +(t.projectId === L),
            ).map((e) =>
              (0, t.jsxs)(
                "button",
                {
                  className:
                    "flex w-full items-center justify-between rounded-md px-2 py-2.5 hover:bg-v0-gray-100",
                  onClick: () => $(L === e.projectId ? null : e),
                  children: [
                    (0, t.jsxs)("span", {
                      className: "flex min-w-0 flex-1 items-center",
                      children: [
                        (0, t.jsx)("div", {
                          className: "[&>svg]:size-4",
                          children: (0, t.jsx)(g.IconPickerIcon, {
                            name: (0, v.cleanIconName)(e.icon),
                          }),
                        }),
                        (0, t.jsx)("span", {
                          className: "ml-2 max-w-[200px] truncate",
                          children: e.name,
                        }),
                      ],
                    }),
                    L === e.projectId
                      ? (0, t.jsxs)("span", {
                          className:
                            "flex shrink-0 items-center text-v0-gray-900",
                          children: [
                            (0, t.jsx)(i.Check, {
                              className: "h-4 w-4 group-hover:hidden",
                            }),
                            (0, t.jsx)("span", {
                              className: "hidden group-hover:inline",
                              children: V("project.dropdown.unselect"),
                            }),
                          ],
                        })
                      : (0, t.jsx)("span", {
                          className:
                            "hidden shrink-0 text-v0-gray-900 group-hover:inline",
                          children: V("project.dropdown.select"),
                        }),
                  ],
                },
                e.projectId,
              ),
            ),
          [T, L],
        ),
        q = (0, t.jsxs)("div", {
          className: "p-1",
          children: [
            (0, t.jsx)("div", {
              className: "max-h-[400px] space-y-2 overflow-y-auto text-left",
              children: W,
            }),
            (0, t.jsx)("div", {
              className: "mt-4",
              children: (0, t.jsx)(a.NewProjectButton, {
                assignToChatId: c,
                className: "w-full",
                onAfterClick: H,
                size: "sm",
                variant: "secondary",
                numProjects: T.length,
                quickCreate: D,
                projectName: e,
                onSuccess: (e) => {
                  (I?.(e), H());
                },
              }),
            }),
          ],
        }),
        Z = 0 === T.length ? (0, t.jsx)(S, { onClose: H, quickCreate: D }) : q,
        K = (0, t.jsx)(r.DropdownMenuContent, {
          align: M,
          className: "w-[350px]",
          side: "bottom",
          sideOffset: 4,
          children:
            0 === T.length
              ? (0, t.jsx)(S, { onClose: H, quickCreate: D })
              : (0, t.jsxs)(t.Fragment, {
                  children: [
                    (0, t.jsx)(r.DropdownMenuGroup, {
                      className: "max-h-[225px] overflow-y-auto",
                      children: (0, y.toSorted)(
                        T,
                        (e, t) =>
                          (e.projectId === L ? -1 : 0) -
                          (t.projectId === L ? -1 : 0),
                      ).map((e) =>
                        (0, t.jsxs)(
                          r.DropdownMenuItem,
                          {
                            className: "group pl-2 pr-3",
                            onClick: () => $(L === e.projectId ? null : e),
                            children: [
                              (0, t.jsxs)("span", {
                                className:
                                  "flex w-full max-w-[200px] items-center",
                                children: [
                                  (0, t.jsx)(g.IconPickerIcon, {
                                    name: (0, v.cleanIconName)(e.icon),
                                  }),
                                  (0, t.jsx)("span", {
                                    className: "ml-3 min-w-0 flex-1",
                                    children: (0, t.jsx)("span", {
                                      className: "block truncate",
                                      "data-testid": "project-option",
                                      children: e.name,
                                    }),
                                  }),
                                ],
                              }),
                              L === e.projectId
                                ? (0, t.jsxs)("span", {
                                    className:
                                      "ml-auto flex shrink-0 items-center text-v0-gray-900",
                                    children: [
                                      (0, t.jsx)(i.Check, {
                                        className: "h-4 w-4 group-hover:hidden",
                                      }),
                                      (0, t.jsx)("span", {
                                        className: "hidden group-hover:inline",
                                        children: V(
                                          "project.dropdown.unselect",
                                        ),
                                      }),
                                    ],
                                  })
                                : (0, t.jsx)("span", {
                                    className:
                                      "ml-auto hidden shrink-0 text-v0-gray-900 group-hover:inline",
                                    children: V("project.dropdown.select"),
                                  }),
                            ],
                          },
                          e.projectId,
                        ),
                      ),
                    }),
                    (0, t.jsx)(r.DropdownMenuSeparator, {}),
                    (0, t.jsx)(r.DropdownMenuGroup, {
                      className: "bg-v0-background-200",
                      children: (0, t.jsx)(a.NewProjectButton, {
                        onAfterClick: H,
                        size: "sm",
                        variant: "secondary",
                        className: "w-full",
                        numProjects: T.length,
                        quickCreate: D,
                        projectName: e,
                        onSuccess: (e) => {
                          (I?.(e), H());
                        },
                      }),
                    }),
                  ],
                }),
        }),
        Y = (0, t.jsxs)(s.Button, {
          variant: "ghost",
          size: "sm",
          className: "relative h-7 w-4 rounded-md text-v0-gray-900",
          children: [
            (0, t.jsx)(l.ChevronUpDown, {}),
            (0, t.jsx)("div", { className: "absolute -inset-x-2 inset-y-0" }),
          ],
        });
      return b
        ? (0, t.jsx)("div", { onClick: b, children: G })
        : (0, t.jsxs)(t.Fragment, {
            children: [
              (0, t.jsxs)("div", {
                className: (0, d.cn)(
                  "flex w-full min-w-0 items-center gap-1 md:hidden",
                  A,
                ),
                children: [
                  "split" === E ? G : null,
                  (0, t.jsx)(h.Modal, {
                    onOpenChange: F,
                    open: R && B,
                    trigger: "split" === E ? Y : G,
                    className: C,
                    children: (0, t.jsx)(h.ModalContent, {
                      className: (0, d.cn)("max-h-[80vh]", {
                        "overflow-y-auto": T.length > 0,
                      }),
                      children: Z,
                    }),
                  }),
                ],
              }),
              (0, t.jsx)("div", {
                className: (0, d.cn)("hidden w-full min-w-0 md:block", A),
                children: (0, t.jsxs)(r.DropdownMenu, {
                  onOpenChange: O,
                  open: _ && !B,
                  children: [
                    "default" === E
                      ? (0, t.jsx)(r.DropdownMenuTrigger, {
                          asChild: !0,
                          className: "max-w-[200px]",
                          children: G,
                        })
                      : null,
                    "split" === E
                      ? (0, t.jsxs)("div", {
                          className: "flex items-center gap-1",
                          children: [
                            G,
                            (0, t.jsx)(r.DropdownMenuTrigger, {
                              asChild: !0,
                              children: Y,
                            }),
                          ],
                        })
                      : null,
                    K,
                  ],
                }),
              }),
            ],
          });
    }
    e.s(["useReassignProject", () => P], 914897);
    var E = e.i(209819),
      A = e.i(92479),
      D = n;
    e.i(563948);
    var I = e.i(407562),
      M = e.i(667660),
      T = e.i(120485),
      L = e.i(316808);
    function P() {
      let { project: e, setMetadata: t } = (0, E.useChatMetadata)(),
        { chatId: n } = (0, A.useChatId)(),
        { activeScope: r } = (0, M.useActiveScope)(),
        [i, s] = (0, D.useTransition)();
      return {
        reassignPending: i,
        handleReassignProject: (0, D.useCallback)(
          (i) => {
            if (!n || !r) return;
            let a = e ? { ...e } : void 0;
            (t({
              project: i
                ? {
                    projectId: i.projectId,
                    name: i.name,
                    settings: {
                      color: i.settings?.color || null,
                      icon: i.settings?.icon || null,
                    },
                    isCreator: i.creatorId === r.id,
                  }
                : void 0,
              vercelProjectId: i?.vercelProjectId || null,
            }),
              s(async () => {
                let e = await (0, L.assignProjectToChat)({
                  chatId: n,
                  projectId: i?.projectId || null,
                });
                e.ok ||
                  ((0, T.handleChatError)(e.error) ||
                    I.toast.error("Something went wrong. Please try again."),
                  t({ project: a }));
              }));
          },
          [n, t, e, r],
        ),
      };
    }
  },
  687639,
  (e) => {
    "use strict";
    e.s(["ReassignProject", () => p]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(120945),
      s = e.i(176248),
      a = e.i(607391),
      o = e.i(37737),
      l = e.i(60425),
      c = e.i(914897),
      u = e.i(802094),
      d = e.i(118376),
      h = e.i(222431);
    function p({ chatId: e }) {
      let { reassignPending: p, handleReassignProject: m } = (0,
        c.useReassignProject)(),
        [f, g] = (0, n.useState)(null),
        x = () => {
          (m(f), (0, o.closeDialog)());
        },
        v = (0, t.jsxs)(s.Button, {
          variant: "secondary",
          className: "w-full max-w-full justify-between font-normal",
          children: [
            f
              ? (0, t.jsxs)("span", {
                  className: "flex items-center gap-2",
                  children: [
                    f.settings?.icon
                      ? (0, t.jsx)(u.IconPickerIcon, {
                          name: (0, d.cleanIconName)(f.settings.icon),
                        })
                      : null,
                    f.name,
                  ],
                })
              : (0, t.jsx)("span", { children: "Select a project..." }),
            (0, t.jsx)(h.ChevronDown, {}),
          ],
        });
      return (0, t.jsxs)(i.AtomicDialog, {
        type: "reassignProject",
        children: [
          (0, t.jsxs)(r.ModalHeader, {
            children: [
              (0, t.jsx)(r.ModalTitle, { children: "Move Chat" }),
              (0, t.jsx)(r.ModalDescription, {
                className: "text-sm text-v0-gray-1000",
                children:
                  "Move this chat to a different project, or choose none to unassign the current project",
              }),
            ],
          }),
          (0, t.jsx)(r.ModalContent, {
            className: "flex flex-col gap-4",
            children: (0, t.jsx)(l.ProjectsDropdown, {
              handleProjectSelect: g,
              disabled: p,
              quickCreate: !0,
              align: "start",
              className: "w-full",
              chatId: e,
              triggerButton: v,
            }),
          }),
          (0, t.jsxs)(r.ModalFooter, {
            className: "bg-v0-background-200 border-v0-alpha-400 border-t",
            children: [
              (0, t.jsx)(r.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(s.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: "Cancel",
                }),
              }),
              (0, t.jsx)(s.Button, {
                size: "sm",
                disabled: p,
                onClick: x,
                children: (0, t.jsx)(a.ActionStatus, {
                  isLoading: p,
                  loading: "Reassigning...",
                  children: "Confirm",
                }),
              }),
            ],
          }),
        ],
      });
    }
  },
  577745,
  (e) => {
    "use strict";
    function t(e) {
      return e.startsWith("image/") && !e.includes("svg");
    }
    function n(e) {
      return (e / 1048576).toFixed(2).replace(/\.?0+$/, "") + "MB";
    }
    let r = [
        "text/plain",
        "text/markdown",
        "text/html",
        "application/json",
        "text/csv",
        "text/x-python",
        "application/typescript",
        "text/tsx",
        "text/jsx",
        "text/markdown",
        "text/html",
        "text/css",
        "application/yaml",
        "application/yml",
        "application/sql",
        "application/x-sql",
        "application/xml",
        "message/rfc822",
      ],
      i = [
        "txt",
        "md",
        "json",
        "csv",
        "py",
        "ts",
        "tsx",
        "js",
        "jsx",
        "log",
        "html",
        "css",
        "yml",
        "yaml",
        "mermaid",
        "mjs",
        "mts",
        "sql",
        "map",
        "xml",
        "eml",
      ];
    function s(e, t) {
      return r.includes(e) || (void 0 !== t && i.includes(t));
    }
    let a = 5242880,
      o = 0x1400000,
      l = 0xa00000,
      c = 0x3200000;
    function u(e, t = !1) {
      if (!e) return !1;
      let n = "v0-level3" === e.v0plan || "v0-ultra" === e.v0plan;
      return !!(e.isVercelian || e.isAdminMode || t || n);
    }
    function d(e, t) {
      return "prompt-attachment" === e ? (t ? o : a) : t ? c : l;
    }
    function h(e) {
      return {
        regular: "prompt-attachment" === e ? "5MB" : "10MB",
        premium: "prompt-attachment" === e ? "20MB" : "50MB",
      };
    }
    e.s([
      "TEXT_EXTENSIONS",
      0,
      i,
      "bytesToMB",
      () => n,
      "getFileSizeLimitLabels",
      () => h,
      "getMaxFileSizeBytes",
      () => d,
      "hasHigherUploadLimits",
      () => u,
      "isConvertedToText",
      () => s,
      "isInlinableImageType",
      () => t,
    ]);
  },
  567407,
  (e) => {
    "use strict";
    let t = [
        "background",
        "foreground",
        "card",
        "card-foreground",
        "popover",
        "popover-foreground",
        "primary",
        "primary-foreground",
        "secondary",
        "secondary-foreground",
        "muted",
        "muted-foreground",
        "accent",
        "accent-foreground",
        "destructive",
        "destructive-foreground",
        "border",
        "input",
        "ring",
        "chart-1",
        "chart-2",
        "chart-3",
        "chart-4",
        "chart-5",
        "sidebar",
        "sidebar-foreground",
        "sidebar-primary",
        "sidebar-primary-foreground",
        "sidebar-accent",
        "sidebar-accent-foreground",
        "sidebar-border",
        "sidebar-ring",
        "shadow-x",
        "shadow-y",
        "shadow-blur",
        "shadow-spread",
        "shadow-opacity",
        "shadow-color",
      ],
      n = ["font-sans", "font-mono", "font-serif"],
      r = ["radius", ...n];
    ([...t, ...r],
      e.s([
        "SHADCN_COMMON_TOKENS",
        0,
        r,
        "SHADCN_FONT_TOKENS",
        0,
        n,
        "SHADCN_LIGHT_DARK_TOKENS",
        0,
        t,
      ]));
  },
  150015,
  (e) => {
    "use strict";
    var t = e.i(908431);
    let n = t.z.enum([
        "registry:lib",
        "registry:block",
        "registry:component",
        "registry:ui",
        "registry:hook",
        "registry:page",
        "registry:file",
        "registry:theme",
        "registry:style",
        "registry:item",
        "registry:example",
        "registry:internal",
      ]),
      r = t.z.discriminatedUnion("type", [
        t.z.object({
          path: t.z.string(),
          content: t.z.string().optional(),
          type: t.z.enum(["registry:file", "registry:page"]),
          target: t.z.string(),
        }),
        t.z.object({
          path: t.z.string(),
          content: t.z.string().optional(),
          type: n.exclude(["registry:file", "registry:page"]),
          target: t.z.string().optional(),
        }),
      ]),
      i = t.z.object({
        config: t.z
          .object({
            content: t.z.array(t.z.string()).optional(),
            theme: t.z.record(t.z.string(), t.z.any()).optional(),
            plugins: t.z.array(t.z.string()).optional(),
          })
          .optional(),
      }),
      s = t.z.object({
        theme: t.z.record(t.z.string(), t.z.string()).optional(),
        light: t.z.record(t.z.string(), t.z.string()).optional(),
        dark: t.z.record(t.z.string(), t.z.string()).optional(),
      }),
      a = t.z.record(
        t.z.string(),
        t.z.lazy(() =>
          t.z.union([
            t.z.string(),
            t.z.record(
              t.z.string(),
              t.z.union([t.z.string(), t.z.record(t.z.string(), t.z.string())]),
            ),
          ]),
        ),
      ),
      o = t.z.record(t.z.string(), t.z.string()),
      l = t.z.object({
        $schema: t.z.string().optional(),
        extends: t.z.string().optional(),
        name: t.z.string(),
        type: n,
        title: t.z.string().optional(),
        author: t.z.string().min(2).optional(),
        description: t.z.string().optional(),
        dependencies: t.z.array(t.z.string()).optional(),
        devDependencies: t.z.array(t.z.string()).optional(),
        registryDependencies: t.z.array(t.z.string()).optional(),
        files: t.z.array(r).optional(),
        tailwind: i.optional(),
        cssVars: s.optional(),
        css: a.optional(),
        envVars: o.optional(),
        meta: t.z.record(t.z.string(), t.z.any()).optional(),
        docs: t.z.string().optional(),
        categories: t.z.array(t.z.string()).optional(),
      }),
      c = t.z.object({
        name: t.z.string(),
        homepage: t.z.string(),
        items: t.z.array(l),
      });
    (t.z.array(l),
      t.z.array(t.z.object({ name: t.z.string(), label: t.z.string() })),
      t.z.record(t.z.string(), t.z.record(t.z.string(), t.z.string())),
      t.z.object({
        inlineColors: t.z.object({
          light: t.z.record(t.z.string(), t.z.string()),
          dark: t.z.record(t.z.string(), t.z.string()),
        }),
        cssVars: s,
        cssVarsV4: s.optional(),
        inlineColorsTemplate: t.z.string(),
        cssVarsTemplate: t.z.string(),
      }),
      l.pick({
        dependencies: !0,
        devDependencies: !0,
        files: !0,
        tailwind: !0,
        cssVars: !0,
        css: !0,
        envVars: !0,
        docs: !0,
      }));
    let u = t.z.union([
        t.z
          .string()
          .refine((e) => e.includes("{name}"), {
            message: "Registry URL must include {name} placeholder",
          }),
        t.z.object({
          url: t.z
            .string()
            .refine((e) => e.includes("{name}"), {
              message: "Registry URL must include {name} placeholder",
            }),
          params: t.z.record(t.z.string(), t.z.string()).optional(),
          headers: t.z.record(t.z.string(), t.z.string()).optional(),
        }),
      ]),
      d = t.z.record(
        t.z
          .string()
          .refine((e) => e.startsWith("@"), {
            message: "Registry names must start with @ (e.g., @v0, @acme)",
          }),
        u,
      ),
      h = t.z
        .object({
          $schema: t.z.string().optional(),
          style: t.z.string(),
          rsc: t.z.coerce.boolean().default(!1),
          tsx: t.z.coerce.boolean().default(!0),
          tailwind: t.z.object({
            config: t.z.string().optional(),
            css: t.z.string(),
            baseColor: t.z.string(),
            cssVariables: t.z.boolean().default(!0),
            prefix: t.z.string().default("").optional(),
          }),
          iconLibrary: t.z.string().optional(),
          aliases: t.z.object({
            components: t.z.string(),
            utils: t.z.string(),
            ui: t.z.string().optional(),
            lib: t.z.string().optional(),
            hooks: t.z.string().optional(),
          }),
          registries: d.optional(),
        })
        .strict()
        .extend({
          resolvedPaths: t.z.object({
            cwd: t.z.string(),
            tailwindConfig: t.z.string(),
            tailwindCss: t.z.string(),
            utils: t.z.string(),
            components: t.z.string(),
            lib: t.z.string(),
            hooks: t.z.string(),
            ui: t.z.string(),
          }),
        });
    t.z.record(t.z.string(), h);
    var p = e.i(567407);
    function m(e) {
      let t;
      if ("string" == typeof e)
        try {
          t = JSON.parse(e);
        } catch {
          throw Error("Invalid JSON parsing registry");
        }
      else t = e;
      return c.parse(t);
    }
    function f(e) {
      let t;
      if ("string" == typeof e)
        try {
          t = JSON.parse(e);
        } catch {
          throw Error("Invalid JSON parsing registry item");
        }
      else t = e;
      return l.parse(t);
    }
    function g(e, t) {
      return e
        ? Object.fromEntries(
            Object.entries(e)
              .map(([e, t]) => [e.replace(/^--/, ""), t])
              .filter(([e]) => t.includes(e)),
          )
        : {};
    }
    function x(e) {
      let t = f(e),
        n = g(t.cssVars?.light, p.SHADCN_COMMON_TOKENS),
        r = g(t.cssVars?.theme, p.SHADCN_FONT_TOKENS),
        i = { ...n, ...r };
      return {
        common: i,
        light: g(t.cssVars?.light, p.SHADCN_LIGHT_DARK_TOKENS),
        dark: g(t.cssVars?.dark, p.SHADCN_LIGHT_DARK_TOKENS),
      };
    }
    function v(e) {
      return m(e)
        .items.filter((e) => e.cssVars)
        .map(x)
        .reduce(
          (e, t) => {
            let n = (e, t) =>
              Object.entries(t).reduce(
                (e, [t, n]) => (t in e ? e : { ...e, [t]: n }),
                e,
              );
            return {
              common: n(e.common, t.common),
              light: n(e.light, t.light),
              dark: n(e.dark, t.dark),
            };
          },
          { common: {}, light: {}, dark: {} },
        );
    }
    e.s(
      ["parseRegistryItem", () => f, "registryToPartialShadcnStyle", () => v],
      150015,
    );
  },
  588385,
  (e) => {
    "use strict";
    var t = e.i(567407),
      n = e.i(150015);
    function r(e = {}) {
      return Object.fromEntries(
        Object.entries(e).map(([e, t]) => [
          e.startsWith("--") ? e.slice(2) : e,
          t,
        ]),
      );
    }
    function i(e, r, s = {}) {
      let {
          type: a = "registry:theme",
          description: o,
          title: l,
          author: c,
        } = s,
        u = {
          ...(r.common.radius ? { radius: r.common.radius } : {}),
          ...r.light,
        },
        d = Object.fromEntries(
          Object.entries(r.common).filter(([e]) =>
            t.SHADCN_FONT_TOKENS.includes(e),
          ),
        ),
        h = r.dark,
        p = {
          name: e,
          type: a,
          ...(o && { description: o }),
          ...(l && { title: l }),
          ...(c && { author: c }),
          cssVars: {
            ...(Object.keys(u).length > 0 && { light: u }),
            ...(Object.keys(h).length > 0 && { dark: h }),
            ...(Object.keys(d).length > 0 && { theme: d }),
          },
        };
      try {
        (0, n.parseRegistryItem)(p);
      } catch (e) {
        throw (console.error(e), Error("Invalid registry item"));
      }
      return p;
    }
    function s({ name: e, homepage: t, items: n }) {
      return { name: e, homepage: t, items: n.filter((e) => !!e) };
    }
    function a(e, t, n) {
      return {
        name: e,
        homepage: t,
        items: n.map(({ name: e, style: t, options: n = {} }) => i(e, t, n)),
      };
    }
    e.s([
      "generateRegistryFromRegistryItems",
      () => s,
      "generateRegistryFromStyles",
      () => a,
      "generateRegistryItemFromStyle",
      () => i,
      "stripDash",
      () => r,
    ]);
  },
  175807,
  216616,
  292750,
  625815,
  477306,
  281622,
  41569,
  (e) => {
    "use strict";
    e.s(["AttachmentPreviewDialog", () => b], 175807);
    var t = e.i(324834),
      n = e.i(120945),
      r = e.i(37737),
      i = e.i(770858),
      s = e.i(304649),
      a = e.i(431141),
      o = e.i(576191),
      l = e.i(355805),
      c = e.i(563261),
      u = e.i(87467),
      d = e.i(577745),
      h = e.i(926788),
      p = e.i(762585),
      m = e.i(73600),
      f = e.i(602544),
      g = e.i(672001);
    let x = (0, c.default)(() => e.A(688269).then((e) => e.Table), {
      loadableGenerated: { modules: [20068] },
    });
    function v(e) {
      return e.contentType?.startsWith("video/") && !e.name?.endsWith(".ts");
    }
    function y(e) {
      return e.contentType?.startsWith("audio/");
    }
    function b({ attachment: e, content: i, onRename: a }) {
      let l = e.contentType?.startsWith("image/"),
        c = v(e),
        u = y(e),
        d = S(e),
        p = (0, o.useRef)(null),
        [x, b] = (0, o.useState)(!1),
        [N, E] = (0, o.useState)(e.name || ""),
        [A, D] = (0, o.useState)(e.name || ""),
        I = (0, o.useRef)(null);
      (0, o.useEffect)(() => {
        let t = e.name || "";
        (E(t), D(t));
      }, [e.name]);
      let M = (0, o.useCallback)(() => {
          (A.trim() && A !== N && (a?.(A.trim()), E(A.trim())), b(!1));
        }, [A, N, a]),
        T = (0, o.useCallback)(() => {
          (D(N), b(!1));
        }, [N]),
        L = (0, o.useCallback)(
          (e) => {
            "Enter" === e.key ? M() : "Escape" === e.key && T();
          },
          [M, T],
        );
      return (0, t.jsxs)(n.AtomicDialog, {
        type: "attachmentPreview",
        className: (0, s.cn)(
          "w-full max-w-[90vw] max-h-[90vh] auto-rows-min gap-2 rounded-xl p-0 [&>button:last-child]:invisible",
          u && "bg-transparent",
        ),
        style: { width: "unset" },
        onOpenAutoFocus: (e) => {
          (e.preventDefault(), x || p.current?.focus());
        },
        children: [
          (0, t.jsx)(h.DialogTitle, {
            className: "sr-only",
            "aria-label": N,
            children: N,
          }),
          (0, t.jsx)("div", {
            className:
              "flex items-center gap-2 px-4 py-2 border-b border-v0-gray-200",
            children: (0, t.jsx)("div", {
              className: "flex items-center gap-2",
              children: x
                ? (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)("input", {
                        ref: I,
                        type: "text",
                        value: A,
                        onChange: (e) => D(e.target.value),
                        onKeyDown: L,
                        className:
                          "px-2 text-sm font-medium bg-transparent border border-v0-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-v0-blue-500",
                        style: {
                          width: `${8 * Math.max(A.length, 1) + 20}px`,
                          minWidth: "60px",
                          maxWidth: "400px",
                        },
                        autoFocus: !0,
                      }),
                      (0, t.jsx)("button", {
                        onClick: M,
                        className:
                          "p-1 text-v0-green-700 hover:text-v0-green-700 rounded transition-colors",
                        "aria-label": "Save filename",
                        type: "button",
                        children: (0, t.jsx)(f.Check, { size: 14 }),
                      }),
                      (0, t.jsx)("button", {
                        onClick: T,
                        className:
                          "p-1 text-v0-gray-900 hover:text-v0-gray-900 hover:bg-v0-gray-100 rounded transition-colors",
                        "aria-label": "Cancel edit",
                        type: "button",
                        children: (0, t.jsx)(g.CrossSmall, { size: 14 }),
                      }),
                    ],
                  })
                : (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)("span", {
                        className: "text-sm font-medium text-v0-gray-900",
                        children: N,
                      }),
                      a &&
                        (0, t.jsx)("button", {
                          onClick: () => {
                            (b(!0), setTimeout(() => I.current?.select(), 0));
                          },
                          className:
                            "p-1 text-v0-gray-900 hover:text-v0-gray-900 hover:bg-v0-gray-100 rounded transition-colors",
                          "aria-label": "Edit filename",
                          type: "button",
                          children: (0, t.jsx)(m.Pencil, { size: 14 }),
                        }),
                    ],
                  }),
            }),
          }),
          (0, t.jsx)(o.Suspense, {
            children: l
              ? (0, t.jsx)(w, { attachment: e })
              : c
                ? (0, t.jsx)(C, { attachment: e })
                : u
                  ? (0, t.jsx)(k, { attachment: e })
                  : i &&
                    d &&
                    (0, t.jsx)(j, {
                      attachment: e,
                      content: i,
                      onClose: () => (0, r.closeDialog)(),
                      showTitle: !1,
                    }),
          }),
        ],
      });
    }
    function j({ attachment: e, onClose: n, content: r, showTitle: s = !0 }) {
      let a = "relative max-h-[90vh] max-w-[90vw] min-w-[80vw] overflow-y-auto";
      switch (e.contentType) {
        case "application/x-zip-compressed":
        case "application/zip":
          return (0, t.jsxs)("div", {
            className: a,
            children: [
              s &&
                (0, t.jsx)("div", {
                  className:
                    "flex items-center justify-between p-4 pb-0 text-sm font-medium text-v0-gray-900",
                  children: (0, t.jsx)("span", { children: e.name }),
                }),
              (0, t.jsx)("div", {
                className: "flex gap-2 p-4 text-v0-gray-900",
                children:
                  "v0 does not support previewing ZIP files at this time.",
              }),
            ],
          });
        case "text/csv":
          return (0, t.jsxs)("div", {
            className: a,
            children: [
              s &&
                (0, t.jsxs)("div", {
                  className:
                    "flex items-center justify-between p-4 pb-0 text-sm font-medium text-v0-gray-900",
                  children: [
                    (0, t.jsx)("span", { children: e.name }),
                    (0, t.jsx)("div", {
                      className: "flex gap-2",
                      children: (0, t.jsx)(u.CodeBlockActions, {
                        allowClose: !0,
                        allowCopyCode: !0,
                        allowDownloadCode: !0,
                        caller: "inline",
                        closeHandler: n,
                        fileName: e.name,
                        value: r,
                        isTabbed: !1,
                        closed: !1,
                        originalCode: void 0,
                        blockId: `attachment-preview-${e.name}`,
                      }),
                    }),
                  ],
                }),
              (0, t.jsx)("div", {
                className: "p-4",
                children: (0, t.jsx)(x, { source: r }),
              }),
            ],
          });
        default:
          let o = (0, l.cleanLangNoCustom)(
            e.name?.split(".").pop() ||
              e.contentType?.split("/")[1] ||
              "plaintext",
          );
          return (0, t.jsx)("div", {
            className: a,
            children: (0, t.jsx)(i.CodeBlock, {
              allowClose: !0,
              caller: "inline",
              className:
                "rounded-xl border-none [&>div:last-child]:pt-0! [&_code]:whitespace-pre!",
              closeHandler: n,
              showQuickEditAnimation: !1,
              fileName: e.name,
              headerClassName: "h-14 border-none px-4 bg-background/70",
              language: o,
              showLineNumbers: !0,
              value: r,
              wrapLongLines: !0,
              originalCode: void 0,
              blockId: `attachment-preview-${e.name}`,
              closed: !0,
            }),
          });
      }
    }
    function w({ attachment: e }) {
      let [n, r] = (0, o.useState)(null),
        [i, l] = (0, o.useState)(!0),
        c = (0, o.useCallback)((e) => {
          let t = e.currentTarget;
          (console.log(t),
            r({ width: t.naturalWidth, height: t.naturalHeight }),
            l(!1));
        }, []),
        u = (0, o.useCallback)(() => {
          l(!1);
        }, []);
      return (0, t.jsxs)("div", {
        className:
          "flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",
        children: [
          i &&
            (0, t.jsx)("div", {
              className: "absolute inset-0 flex items-center justify-center",
              children: (0, t.jsx)(p.Skeleton, {
                className: "w-64 h-64 rounded-lg",
              }),
            }),
          (0, t.jsx)(a.default, {
            alt: e.name ?? "Image Preview",
            className: (0, s.cn)(
              "bg-alpha-950 rounded-lg object-contain transition-opacity duration-200",
              i ? "opacity-0" : "opacity-100",
            ),
            src: e.url,
            width: n?.width || 800,
            height: n?.height || 600,
            style: { maxWidth: "90vw", maxHeight: "90vh" },
            onLoad: c,
            onError: u,
            unoptimized: !0,
          }),
        ],
      });
    }
    function C({ attachment: e }) {
      return (0, t.jsx)("div", {
        className:
          "flex items-center justify-center w-full h-full max-w-[90vw] max-h-[90vh]",
        children: (0, t.jsxs)("video", {
          className: "bg-alpha-950 rounded-lg object-contain",
          controls: !0,
          style: {
            maxWidth: "90vw",
            maxHeight: "90vh",
            width: "auto",
            height: "auto",
          },
          children: [
            (0, t.jsx)("source", { src: e.url, type: e.contentType }),
            "Your browser does not support the video tag.",
          ],
        }),
      });
    }
    function k({ attachment: e }) {
      return (0, t.jsx)("div", {
        className: "flex items-center justify-center w-full h-full p-8",
        children: (0, t.jsxs)("div", {
          className: "w-full max-w-md",
          children: [
            (0, t.jsx)("div", {
              className: "mb-4 text-center",
              children: (0, t.jsx)("h3", {
                className:
                  "text-lg font-medium text-v0-gray-1000 dark:text-v0-gray-100",
                children: e.name || "Audio File",
              }),
            }),
            (0, t.jsxs)("audio", {
              className: "w-full rounded-lg",
              controls: !0,
              children: [
                (0, t.jsx)("source", { src: e.url, type: e.contentType }),
                "Your browser does not support the audio tag.",
              ],
            }),
          ],
        }),
      });
    }
    let S = (e) => {
      let t = new Set(["pdf", "doc", "docx", "xls", "xlsx"]),
        n = e.contentType?.split("/")[1] || "none",
        r = e.name?.split(".").pop() || "none";
      return (d.TEXT_EXTENSIONS.includes(r) && (n = "plain"), !t.has(n));
    };
    e.s(
      [
        "NewFeatureButton",
        () => V,
        "NewFeatureDialog",
        () => B,
        "NewFeatureDialogOpener",
        () => H,
      ],
      292750,
    );
    var N = t,
      E = o,
      A = e.i(176248),
      D = e.i(686832),
      I = n;
    e.i(904347);
    var M = r,
      T = e.i(919012),
      L = (0, T.createServerReference)(
        "605377a241f2957b1c6e98e92d4709e3d1fd9d3782",
        T.callServer,
        void 0,
        T.findSourceMapURL,
        "setFeatureDialogDismissed",
      );
    e.s(["setFeatureDialogDismissed", () => L], 216616);
    var P = e.i(654335),
      R = e.i(794593),
      F = e.i(296046);
    let _ = (0, E.createContext)(null),
      O = () => {
        let e = (0, E.useContext)(_);
        if (!e)
          throw Error(
            "useFeatureDialogContext must be used within a FeatureDialogProvider",
          );
        return e;
      };
    function B({ featureId: e, config: t }) {
      let { handleSetDismissedTrue: n } = z(e),
        r = (0, E.useCallback)(() => {
          ((0, M.closeDialog)(), n());
        }, [n]);
      return (0, N.jsx)(_.Provider, {
        value: { onClose: r },
        children: (0, N.jsxs)(I.AtomicDialog, {
          type: "newFeatureDialog",
          onOpenChange: (e) => {
            e || n();
          },
          children: [
            (0, N.jsx)("div", {
              className: "flex border-b border-v0-alpha-400 min-h-[280px]",
              children: t.visual,
            }),
            (0, N.jsxs)("div", {
              className: "overflow-auto",
              children: [
                (0, N.jsxs)(D.ModalHeader, {
                  className: "pt-2 flex flex-col gap-3 items-start",
                  children: [
                    t.badge
                      ? (0, N.jsx)(R.Badge, {
                          variant: "teal",
                          className: "h-6 px-2",
                          children: t.badge.text,
                        })
                      : null,
                    (0, N.jsx)(D.ModalTitle, {
                      className: "!text-heading-24",
                      children: t.title,
                    }),
                    (0, N.jsx)(D.ModalDescription, {
                      className: "text-start",
                      children: t.description,
                    }),
                  ],
                }),
                (0, N.jsx)(D.ModalContent, {
                  children: (0, N.jsxs)("div", {
                    className: "flex gap-2 justify-start [&>*]:flex-1",
                    children: [
                      !t.hideDefaultSecondaryAction &&
                        (0, N.jsx)("span", {
                          children: t.secondaryAction
                            ? t.secondaryAction
                            : (0, N.jsx)(A.Button, {
                                variant: "secondary",
                                className: "w-full",
                                size: "sm",
                                onClick: r,
                                children: "Got it",
                              }),
                        }),
                      (0, N.jsx)("span", {
                        children: t.primaryAction ? t.primaryAction : null,
                      }),
                    ],
                  }),
                }),
              ],
            }),
          ],
        }),
      });
    }
    function V({
      variant: e = "default",
      onClick: t,
      href: n,
      target: r,
      children: i,
      disabled: s = !1,
    }) {
      let { onClose: a } = O(),
        o = ({ children: e }) =>
          n ? (0, N.jsx)(P.default, { href: n, target: r, children: e }) : e;
      return (0, N.jsx)(o, {
        children: (0, N.jsx)(A.Button, {
          size: "sm",
          type: "button",
          className: "w-full",
          variant: e,
          disabled: s,
          onClick: () => {
            s || (t?.(), a());
          },
          children: i,
        }),
      });
    }
    let z = (e) => {
      let [t, n] = (0, E.useTransition)();
      return {
        handleSetDismissedTrue: (0, E.useCallback)(() => {
          n(async () => {
            await L(e, !0);
          });
        }, [e]),
      };
    };
    function H({ featureId: e, config: t }) {
      let n = (0, F.useIsChatPage)(),
        r = (0, E.useRef)(!1);
      return (
        (0, E.useEffect)(() => {
          (!t.chatPageOnly || n) &&
            (r.current ||
              ((0, M.openDialog)({
                type: "newFeatureDialog",
                data: { featureId: e, config: t },
              }),
              (r.current = !0)));
        }, [e, t, n]),
        null
      );
    }
    var $ = t,
      U = D,
      G = e.i(763480),
      W = e.i(589910),
      q = A,
      Z = o,
      K = e.i(297239),
      Y = n,
      J = r,
      Q = e.i(211976),
      X = T,
      ee = (0, X.createServerReference)(
        "7f902f7b7de8fbd2defaa108b61354bf83d245fcdd",
        X.callServer,
        void 0,
        X.findSourceMapURL,
        "createDesignSystemWithRegistryAction",
      ),
      et = e.i(588385);
    e.i(563948);
    var en = e.i(407562),
      er = e.i(948973);
    e.i(472428);
    var ei = e.i(296900);
    function es({
      initialName: e,
      onSuccess: t,
      shadcnStyle: n,
      isExampleDesignSystem: r,
    }) {
      let { data: i, mutate: s } = (0, ei.useServerQuerySWR)(
          ["scoped", "designSystems"],
          {},
        ),
        [a, o] = (0, Z.useTransition)(),
        l = (0, K.useT)(),
        c = (0, Z.useRef)(null),
        [u, d] = (0, Z.useState)(e || ""),
        h = (0, Z.useCallback)(
          (e) => {
            (e.preventDefault(),
              o(async () => {
                let e = (0, et.generateRegistryItemFromStyle)(u, n),
                  r = (0, et.generateRegistryFromRegistryItems)({
                    name: u,
                    homepage: "https://v0.app",
                    items: [e],
                  }),
                  a = {
                    name: u,
                    description: "Design system created from editor",
                    registry: r,
                  },
                  o = await s({ serverMutate: ee(a), optimisticData: i });
                o.ok
                  ? (t?.(o.value),
                    en.toast.success(l("saveDesignSystemDialog.successToast")),
                    (0, J.closeDialog)())
                  : en.toast.error(
                      "Failed to create design system. Please try again.",
                    );
              }));
          },
          [u, n, t, l, i, s],
        );
      return (0, $.jsx)(Y.AtomicDialog, {
        type: "createDesignSystem",
        children: (0, $.jsxs)("form", {
          onSubmit: h,
          children: [
            (0, $.jsxs)(U.ModalHeader, {
              children: [
                (0, $.jsx)(U.ModalTitle, {
                  children: r
                    ? l("saveDefaultDesignSystemDialog.title")
                    : l("saveDesignSystemDialog.title"),
                }),
                r &&
                  (0, $.jsx)(U.ModalDescription, {
                    children: l("saveDefaultDesignSystemDialog.description"),
                  }),
              ],
            }),
            (0, $.jsxs)(U.ModalContent, {
              children: [
                (0, $.jsx)(G.Input, {
                  label: l("saveDesignSystemDialog.newName"),
                  "aria-label": l("saveDesignSystemDialog.newName"),
                  autoComplete: "off",
                  autoFocus: !0,
                  className: "w-full",
                  id: "designSystemName",
                  maxLength: er.DESIGN_SYSTEM_NAME_MAX_LENGTH,
                  onChange: (e) => d(e.target.value),
                  placeholder: e || l("saveDesignSystemDialog.enterNewName"),
                  ref: c,
                  value: u,
                }),
                (0, $.jsx)(W.InputCounter, {
                  className: "mt-2",
                  count: u.length,
                  max: er.DESIGN_SYSTEM_NAME_MAX_LENGTH,
                  message: `Name must be less than ${er.DESIGN_SYSTEM_NAME_MAX_LENGTH} characters`,
                }),
              ],
            }),
            (0, $.jsxs)(U.ModalFooter, {
              children: [
                (0, $.jsx)(q.Button, {
                  onClick: J.closeDialog,
                  size: "sm",
                  type: "button",
                  variant: "secondary",
                  children: l("saveDesignSystemDialog.cancel"),
                }),
                (0, $.jsx)(Q.SpinnerButton, {
                  pending: a,
                  disabled: !u.trim(),
                  size: "sm",
                  type: "submit",
                  children: a
                    ? l("saveDesignSystemDialog.saving")
                    : r
                      ? l("saveDefaultDesignSystemDialog.save")
                      : l("saveDesignSystemDialog.save"),
                }),
              ],
            }),
          ],
        }),
      });
    }
    e.s(["CreateDesignSystemDialog", () => es], 625815);
    var ea = t,
      eo = D,
      el = A,
      ec = o,
      eu = n,
      ed = r,
      eh = Q;
    function ep({ designSystemName: e, onDelete: t }) {
      let [n, r] = (0, ec.useTransition)(),
        i = (0, ec.useCallback)(() => {
          r(async () => {
            await t();
          });
        }, [t]);
      return (0, ea.jsxs)(eu.AtomicDialog, {
        type: "deleteDesignSystem",
        children: [
          (0, ea.jsxs)(eo.ModalHeader, {
            children: [
              (0, ea.jsx)(eo.ModalTitle, { children: "Delete Design System" }),
              (0, ea.jsxs)(eo.ModalDescription, {
                children: [
                  'Are you sure you want to delete "',
                  e,
                  '"? This action cannot be undone.',
                ],
              }),
            ],
          }),
          (0, ea.jsxs)(eo.ModalFooter, {
            children: [
              (0, ea.jsx)(el.Button, {
                onClick: ed.closeDialog,
                size: "sm",
                type: "button",
                variant: "secondary",
                children: "Cancel",
              }),
              (0, ea.jsx)(eh.SpinnerButton, {
                pending: n,
                size: "sm",
                variant: "destructive",
                onClick: i,
                children: n ? "Deleting..." : "Delete",
              }),
            ],
          }),
        ],
      });
    }
    e.s(["DeleteDesignSystemDialog", () => ep], 477306);
    var em = t,
      ef = D,
      eg = G,
      ex = W,
      ev = A,
      ey = o,
      eb = n,
      ej = r,
      ew = Q,
      eC = e.i(70165),
      ek = en,
      eS = ei,
      eN = T,
      eE = (0, eN.createServerReference)(
        "7f471219b2fa74a43235fca27f860958f1dc1f9caa",
        eN.callServer,
        void 0,
        eN.findSourceMapURL,
        "updateDesignSystemWithRegistryAction",
      );
    e.s(["updateDesignSystemWithRegistryAction", () => eE], 281622);
    var eA = er,
      eD = e.i(387040);
    function eI({ currentName: e, designSystemId: t }) {
      let { mutate: n, data: r } = (0, eS.useServerQuerySWR)(
          ["scoped", "designSystems"],
          {},
          { suspense: !0 },
        ),
        i = (0, eC.useIsMobile)(),
        [s, a] = (0, ey.useTransition)(),
        o = (0, ey.useRef)(null),
        [l, c] = (0, ey.useState)(e),
        u = (0, ey.useCallback)(
          (i) => {
            (i.preventDefault(), l.trim() && l !== e)
              ? a(async () => {
                  try {
                    (await n({
                      serverMutate: eE({ designSystemId: t, name: l }),
                      optimisticData: r.ok
                        ? (0, eD.ok)({
                            ...r.value,
                            data: r.value.data.map((e) =>
                              e.designSystemId === t ? { ...e, name: l } : e,
                            ),
                          })
                        : r,
                    }),
                      ek.toast.success("Design system renamed successfully"));
                  } catch (e) {
                    ek.toast.error("Failed to rename design system.");
                  }
                  (0, ej.closeDialog)();
                })
              : (0, ej.closeDialog)();
          },
          [l, e, n, t, r],
        );
      return (
        (0, ey.useEffect)(() => {
          setTimeout(() => {
            (o.current?.focus(), i || o.current?.select());
          }, 0);
        }, [i]),
        (0, em.jsx)(eb.AtomicDialog, {
          type: "renameDesignSystem",
          children: (0, em.jsxs)("form", {
            onSubmit: u,
            children: [
              (0, em.jsxs)(ef.ModalHeader, {
                children: [
                  (0, em.jsx)(ef.ModalTitle, {
                    children: "Rename Design System",
                  }),
                  (0, em.jsx)(ef.ModalDescription, {
                    children: (0, em.jsx)("label", {
                      className: "sr-only",
                      htmlFor: "designSystemName",
                      children: "Design System Name",
                    }),
                  }),
                ],
              }),
              (0, em.jsxs)(ef.ModalContent, {
                children: [
                  (0, em.jsx)(eg.Input, {
                    "aria-label": "Design System Name",
                    autoComplete: "off",
                    autoFocus: !0,
                    className: "w-full",
                    id: "designSystemName",
                    maxLength: eA.DESIGN_SYSTEM_NAME_MAX_LENGTH,
                    onChange: (e) => c(e.target.value),
                    placeholder: "Enter design system name",
                    ref: o,
                    value: l,
                  }),
                  (0, em.jsx)(ex.InputCounter, {
                    className: "mt-2",
                    count: l.length,
                    max: eA.DESIGN_SYSTEM_NAME_MAX_LENGTH,
                    message: `Name must be less than ${eA.DESIGN_SYSTEM_NAME_MAX_LENGTH} characters`,
                  }),
                ],
              }),
              (0, em.jsxs)(ef.ModalFooter, {
                children: [
                  (0, em.jsx)(ev.Button, {
                    onClick: ej.closeDialog,
                    size: "sm",
                    type: "button",
                    variant: "secondary",
                    children: "Cancel",
                  }),
                  (0, em.jsx)(ew.SpinnerButton, {
                    pending: s,
                    disabled: !l.trim(),
                    size: "sm",
                    type: "submit",
                    children: s ? "Renaming..." : "Rename",
                  }),
                ],
              }),
            ],
          }),
        })
      );
    }
    e.s(["SuspendingRenameDesignSystemDialog", () => eI], 41569);
  },
  177661,
  (e, t, n) => {
    "use strict";
    var r = Object.defineProperty,
      i = Object.getOwnPropertyDescriptor,
      s = Object.getOwnPropertyNames,
      a = Object.prototype.hasOwnProperty,
      o = (e, t, n, o) => {
        if ((t && "object" == typeof t) || "function" == typeof t)
          for (let l of s(t))
            a.call(e, l) ||
              l === n ||
              r(e, l, {
                get: () => t[l],
                enumerable: !(o = i(t, l)) || o.enumerable,
              });
        return e;
      },
      l = (e) => o(r({}, "__esModule", { value: !0 }), e),
      c = {};
    (((e, t) => {
      for (var n in t) r(e, n, { get: t[n], enumerable: !0 });
    })(c, { SYMBOL_FOR_REQ_CONTEXT: () => u, getContext: () => d }),
      (t.exports = l(c)));
    let u = Symbol.for("@vercel/request-context");
    function d() {
      let e = globalThis;
      return e[u]?.get?.() ?? {};
    }
  },
  702758,
  (e, t, n) => {
    "use strict";
    var r = e.i(439235),
      i = Object.defineProperty,
      s = Object.getOwnPropertyDescriptor,
      a = Object.getOwnPropertyNames,
      o = Object.prototype.hasOwnProperty,
      l = (e, t, n, r) => {
        if ((t && "object" == typeof t) || "function" == typeof t)
          for (let l of a(t))
            o.call(e, l) ||
              l === n ||
              i(e, l, {
                get: () => t[l],
                enumerable: !(r = s(t, l)) || r.enumerable,
              });
        return e;
      },
      c = (e) => l(i({}, "__esModule", { value: !0 }), e),
      u = {};
    (((e, t) => {
      for (var n in t) i(e, n, { get: t[n], enumerable: !0 });
    })(u, { getVercelOidcToken: () => h, getVercelOidcTokenSync: () => p }),
      (t.exports = c(u)));
    var d = e.r(177661);
    async function h() {
      return p();
    }
    function p() {
      let e =
        (0, d.getContext)().headers?.["x-vercel-oidc-token"] ??
        r.default.env.VERCEL_OIDC_TOKEN;
      if (!e)
        throw Error(
          "The 'x-vercel-oidc-token' header is missing from the request. Do you have the OIDC option enabled in the Vercel project settings?",
        );
      return e;
    }
  },
  410978,
  (e, t, n) => {
    "use strict";
    var r = Object.defineProperty,
      i = Object.getOwnPropertyDescriptor,
      s = Object.getOwnPropertyNames,
      a = Object.prototype.hasOwnProperty,
      o = (e, t, n, o) => {
        if ((t && "object" == typeof t) || "function" == typeof t)
          for (let l of s(t))
            a.call(e, l) ||
              l === n ||
              r(e, l, {
                get: () => t[l],
                enumerable: !(o = i(t, l)) || o.enumerable,
              });
        return e;
      },
      l = (e) => o(r({}, "__esModule", { value: !0 }), e),
      c = {};
    (((e, t) => {
      for (var n in t) r(e, n, { get: t[n], enumerable: !0 });
    })(c, {
      getVercelOidcToken: () => u.getVercelOidcToken,
      getVercelOidcTokenSync: () => u.getVercelOidcTokenSync,
    }),
      (t.exports = l(c)));
    var u = e.r(702758);
  },
  501852,
  (e, t, n) => {
    "use strict";
    var r = Object.defineProperty,
      i = Object.getOwnPropertyDescriptor,
      s = Object.getOwnPropertyNames,
      a = Object.prototype.hasOwnProperty,
      o = (e, t, n, o) => {
        if ((t && "object" == typeof t) || "function" == typeof t)
          for (let l of s(t))
            a.call(e, l) ||
              l === n ||
              r(e, l, {
                get: () => t[l],
                enumerable: !(o = i(t, l)) || o.enumerable,
              });
        return e;
      },
      l = (e) => o(r({}, "__esModule", { value: !0 }), e),
      c = {};
    (((e, t) => {
      for (var n in t) r(e, n, { get: t[n], enumerable: !0 });
    })(c, { awsCredentialsProvider: () => d }),
      (t.exports = l(c)));
    var u = e.r(410978);
    function d(t) {
      return async () => {
        let { fromWebToken: n } = await e.A(648677);
        return n({ ...t, webIdentityToken: (0, u.getVercelOidcTokenSync)() })();
      };
    }
  },
  258025,
  (e, t, n) => {
    "use strict";
    var r = Object.defineProperty,
      i = Object.getOwnPropertyDescriptor,
      s = Object.getOwnPropertyNames,
      a = Object.prototype.hasOwnProperty,
      o = (e, t, n, o) => {
        if ((t && "object" == typeof t) || "function" == typeof t)
          for (let l of s(t))
            a.call(e, l) ||
              l === n ||
              r(e, l, {
                get: () => t[l],
                enumerable: !(o = i(t, l)) || o.enumerable,
              });
        return e;
      },
      l = (e) => o(r({}, "__esModule", { value: !0 }), e),
      c = {};
    (((e, t) => {
      for (var n in t) r(e, n, { get: t[n], enumerable: !0 });
    })(c, {
      awsCredentialsProvider: () => u.awsCredentialsProvider,
      getVercelOidcToken: () => d.getVercelOidcToken,
      getVercelOidcTokenSync: () => d.getVercelOidcTokenSync,
    }),
      (t.exports = l(c)));
    var u = e.r(501852),
      d = e.r(410978);
  },
  199490,
  (e) => {
    "use strict";
    var t = e.i(908431);
    (t.z.object({
      teamId: t.z.string().optional(),
      scope: t.z.string().optional(),
      saml: t.z.boolean().optional(),
      enforced: t.z.boolean().optional(),
    }),
      t.z.object({
        limit: t.z.object({
          remaining: t.z.number(),
          reset: t.z.number(),
          resetMs: t.z.number(),
          total: t.z.number(),
        }),
      }),
      t.z.union([
        t.z.object({
          error: t.z
            .object({
              message: t.z.string().optional().default(""),
              code: t.z.string().optional().default(""),
            })
            .catchall(t.z.any()),
        }),
        t.z
          .object({
            message: t.z.string().optional().default(""),
            code: t.z.string().optional().default(""),
          })
          .catchall(t.z.any()),
      ]),
      e.i(134542),
      e.i(70039),
      e.i(258025));
    var n = (function (e) {
        return (
          (e.Production = "production"),
          (e.Preview = "preview"),
          (e.Development = "development"),
          e
        );
      })({}),
      r = (function (e) {
        return (
          (e.Plain = "plain"),
          (e.Secret = "secret"),
          (e.System = "system"),
          (e.Encrypted = "encrypted"),
          (e.Sensitive = "sensitive"),
          e
        );
      })({});
    e.s(["EnvTarget", () => n, "EnvType", () => r], 199490);
  },
  416577,
  (e) => {
    "use strict";
    e.s(["EnvVarDetailsDialog", () => g]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(297239),
      s = e.i(120945),
      a = e.i(199490),
      o = e.i(183673),
      l = e.i(538553),
      c = e.i(211976),
      u = e.i(667660),
      d = e.i(209819);
    e.i(563948);
    var h = e.i(407562),
      p = e.i(583965);
    e.i(904347);
    var m = e.i(37737),
      f = e.i(643312);
    function g({ envVar: e }) {
      let a = (0, o.useCanMakeProjectUpdates)(),
        g = (0, i.useT)(),
        { hasVercelWritePermission: v } = (0, u.useActiveScope)(),
        { project: y, vercelProjectId: b } = (0, d.useChatMetadata)(),
        j = (0, f.useIntegrationsApi)(),
        { refresh: w } = (0, p.useBrowserFrame)(),
        [C, k] = (0, n.useTransition)(),
        S = (0, n.useCallback)(() => {
          y &&
            y.projectId &&
            b &&
            "ready" === j.status &&
            k(async () => {
              let t = await j.update({ deleteEnvironmentVariableIds: [e.id] });
              ("error" === t.status &&
                h.toast.error(g("projectSettings.envVarDeleteError")(e.key)),
                "success" === t.status &&
                  t.deletedEnvironmentVariables.ids.includes(e.id) &&
                  h.toast.success(
                    g("projectSettings.envVarDeleteSuccess")(e.key),
                  ),
                w(),
                (0, m.closeDialog)());
            });
        }, [e, y, b, j, w, g]);
      return (0, t.jsxs)(s.AtomicDialog, {
        type: "envVarDetails",
        children: [
          (0, t.jsx)(r.ModalHeader, {
            children: (0, t.jsx)(r.ModalTitle, {
              className: "flex items-center gap-2",
              children: g("projectSettings.envVarDetails"),
            }),
          }),
          (0, t.jsx)(r.ModalContent, {
            children: (0, t.jsx)(x, { envVar: e }),
          }),
          a &&
            (0, t.jsx)(r.ModalFooter, {
              className:
                "border-v0-gray-300 bg-v0-background-200 flex border-t p-4!",
              children: (0, t.jsx)(l.RbacTooltip, {
                show: !v,
                requiredRole: "V0Builder",
                children: (0, t.jsx)(c.SpinnerButton, {
                  size: "sm",
                  pending: C,
                  variant: "destructive",
                  onClick: S,
                  disabled: C || !v,
                  children: g("projectSettings.delete"),
                }),
              }),
            }),
        ],
      });
    }
    function x({ envVar: e }) {
      return (0, t.jsxs)("div", {
        className: "space-y-4",
        children: [
          (0, t.jsxs)("div", {
            children: [
              (0, t.jsx)("p", {
                className: "text-sm font-medium",
                children: "Key",
              }),
              (0, t.jsx)("p", {
                className: "text-v0-gray-900 break-all",
                children: e.key,
              }),
            ],
          }),
          (0, t.jsxs)("div", {
            children: [
              (0, t.jsx)("p", {
                className: "text-sm font-medium",
                children: "Value",
              }),
              (0, t.jsx)("p", {
                className: "text-v0-gray-900 break-all",
                children:
                  e.type === a.EnvType.Encrypted
                    ? e.decrypted
                      ? e.value
                      : "*** Encrypted ***"
                    : e.value,
              }),
            ],
          }),
          (0, t.jsxs)("div", {
            children: [
              (0, t.jsx)("p", {
                className: "text-sm font-medium",
                children: "Targets",
              }),
              (0, t.jsx)("p", {
                className: "text-v0-gray-900 break-words",
                children: Array.isArray(e.target)
                  ? e.target.join(", ")
                  : e.target,
              }),
            ],
          }),
          e.comment &&
            (0, t.jsxs)("div", {
              children: [
                (0, t.jsx)("p", {
                  className: "text-sm font-medium",
                  children: "Comment",
                }),
                (0, t.jsx)("p", {
                  className: "text-v0-gray-900 break-words",
                  children: e.comment,
                }),
              ],
            }),
        ],
      });
    }
  },
  151277,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.25136V4.2487L0.463236 4.05702L7.71324 1.05702L8 0.938354L8.28676 1.05702L15.5368 4.05702L16 4.2487V5.25136L15.5368 5.44304L8.28676 8.44304L8 8.5617L7.71324 8.44304L0.463236 5.44304L0 5.25136ZM0 8.45825V6.83491L0.536764 7.05702L8 10.1453L15.4632 7.05702L16 6.83491V8.45825L8.28676 11.6499L8 11.7686L7.71324 11.6499L0 8.45825ZM0 11.7083V10.0849L0.536764 10.307L8 13.3953L15.4632 10.307L16 10.0849V11.7083L8.28676 14.8999L8 15.0186L7.71324 14.8999L0 11.7083ZM8 6.93835L2.71154 4.75003L8 2.5617L13.2885 4.75003L8 6.93835Z" fill="currentColor"/>',
    );
    e.s(["Layers", 0, t]);
  },
  829890,
  740838,
  264050,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(707974),
      i = e.i(996174),
      s = e.i(176248),
      a = e.i(556355),
      o = e.i(222431),
      l = e.i(151277),
      c = e.i(877318);
    let u = (0, c.withNewIcon)(
      '<path d="M12.798 1.24199L13.3283 1.77232L14.0567 1.04389L13.1398 0.574402L12.798 1.24199ZM9.95705 4.0829L9.42672 3.55257L9.95705 4.0829ZM6.5844 6.95555L7.11473 7.48588L7.46767 7.13295L7.27837 6.67111L6.5844 6.95555ZM1.49995 12.04L2.03027 12.5703L2.03028 12.5703L1.49995 12.04ZM1.49994 14.54L0.969615 15.0703H0.969615L1.49994 14.54ZM3.99995 14.54L4.53028 15.0703L3.99995 14.54ZM9.10147 9.43848L9.37633 8.74066L8.91883 8.56046L8.57114 8.90815L9.10147 9.43848ZM14.7848 3.25519L15.4568 2.92229L14.9931 1.98617L14.2544 2.72486L14.7848 3.25519ZM11.9571 6.0829L11.4267 5.55257L11.9571 6.0829ZM10.5428 6.0829L11.0732 5.55257L11.0732 5.55257L10.5428 6.0829ZM9.95705 5.49711L9.42672 6.02744L9.42672 6.02745L9.95705 5.49711ZM12.2676 0.711655L9.42672 3.55257L10.4874 4.61323L13.3283 1.77232L12.2676 0.711655ZM10.7499 1.5C11.3659 1.5 11.9452 1.64794 12.4562 1.90957L13.1398 0.574402C12.4221 0.206958 11.6091 0 10.7499 0V1.5ZM6.99994 5.25C6.99994 3.17893 8.67888 1.5 10.7499 1.5V0C7.85045 0 5.49994 2.3505 5.49994 5.25H6.99994ZM7.27837 6.67111C7.09913 6.23381 6.99994 5.75443 6.99994 5.25H5.49994C5.49994 5.95288 5.63848 6.62528 5.89043 7.23999L7.27837 6.67111ZM6.05407 6.42522L0.969615 11.5097L2.03028 12.5703L7.11473 7.48588L6.05407 6.42522ZM0.969616 11.5097C-0.0136344 12.4929 -0.013635 14.0871 0.969615 15.0703L2.03027 14.0097C1.63281 13.6122 1.63281 12.9678 2.03027 12.5703L0.969616 11.5097ZM0.969615 15.0703C1.95287 16.0536 3.54703 16.0536 4.53028 15.0703L3.46962 14.0097C3.07215 14.4071 2.42774 14.4071 2.03027 14.0097L0.969615 15.0703ZM4.53028 15.0703L9.6318 9.96881L8.57114 8.90815L3.46962 14.0097L4.53028 15.0703ZM10.7499 9C10.2637 9 9.80071 8.90782 9.37633 8.74066L8.82661 10.1363C9.4232 10.3713 10.0724 10.5 10.7499 10.5V9ZM14.4999 5.25C14.4999 7.32107 12.821 9 10.7499 9V10.5C13.6494 10.5 15.9999 8.1495 15.9999 5.25H14.4999ZM14.1127 3.5881C14.3604 4.08811 14.4999 4.65168 14.4999 5.25H15.9999C15.9999 4.4156 15.8047 3.62465 15.4568 2.92229L14.1127 3.5881ZM12.4874 6.61323L15.3151 3.78552L14.2544 2.72486L11.4267 5.55257L12.4874 6.61323ZM10.0125 6.61323C10.6959 7.29665 11.804 7.29665 12.4874 6.61323L11.4267 5.55257C11.3291 5.6502 11.1708 5.6502 11.0732 5.55257L10.0125 6.61323ZM9.42672 6.02745L10.0125 6.61323L11.0732 5.55257L10.4874 4.96678L9.42672 6.02745ZM9.42672 3.55257C8.7433 4.23599 8.7433 5.34403 9.42672 6.02744L10.4874 4.96678C10.3898 4.86915 10.3897 4.71086 10.4874 4.61323L9.42672 3.55257Z" fill="currentColor"/>',
    );
    e.s(["Wrench", 0, u], 740838);
    let d = (0, c.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M4.02174 4.76932C6.11625 2.33698 9.8838 2.33698 11.9783 4.76932L14.7603 7.99999L13.6664 9.27031L14.6934 10.3764L16.3184 8.48938V7.5106L13.115 3.79054C10.422 0.663244 5.57803 0.663247 2.88509 3.79054L-0.318298 7.5106V8.48938L2.88509 12.2094C4.7342 14.3568 7.59749 15.0297 10.0822 14.2281L8.9183 12.9747C7.16767 13.2832 5.28865 12.7019 4.02174 11.2307L1.23978 7.99999L4.02174 4.76932ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>',
    );
    e.s(["PreviewEye", 0, d], 264050);
    let h = (0, c.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 10.75V11.5H8.75V10.75V6.56066L10.2197 8.03033L10.75 8.56066L11.8107 7.5L11.2803 6.96967L8.53033 4.21967C8.23744 3.92678 7.76256 3.92678 7.46967 4.21967L4.71967 6.96967L4.18934 7.5L5.25 8.56066L5.78033 8.03033L7.25 6.56066V10.75ZM14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z" fill="currentColor"/>',
    );
    var p = e.i(227152),
      m = e.i(304649),
      f = e.i(199490);
    let g = [
        { target: f.EnvTarget.Production, label: "Production", icon: h },
        { target: f.EnvTarget.Preview, label: "Preview", icon: d },
        { target: f.EnvTarget.Development, label: "Development", icon: u },
      ],
      x = {
        create: "Add Environment Variables",
        missing: "Missing Environment Variables",
      },
      v = new Set([
        "AWS_SECRET_KEY",
        "AWS_EXECUTION_ENV",
        "AWS_LAMBDA_LOG_GROUP_NAME",
        "AWS_LAMBDA_LOG_STREAM_NAME",
        "AWS_LAMBDA_FUNCTION_NAME",
        "AWS_LAMBDA_FUNCTION_MEMORY_SIZE",
        "AWS_LAMBDA_FUNCTION_VERSION",
        "NOW_REGION",
        "TZ",
        "LAMBDA_TASK_ROOT",
        "LAMBDA_RUNTIME_DIR",
      ]),
      y = (e) =>
        !(0 === e.length || e.length > 256 || v.has(e)) &&
        /^[A-Za-z_][A-Za-z0-9_]*$/.test(e),
      b = (e) =>
        0 === e.length
          ? null
          : e.length > 256
            ? "Key must be 256 characters or less"
            : v.has(e)
              ? "This is a reserved environment variable name"
              : /^\d/.test(e)
                ? "Key cannot start with a number"
                : /^[A-Za-z0-9_]+$/.test(e)
                  ? /^[A-Za-z_]/.test(e)
                    ? null
                    : "Key must start with a letter or underscore"
                  : "Only letters, digits and underscores are allowed",
      j = (e) => {
        let t = e.map((e) => {
          switch (e) {
            case f.EnvTarget.Development:
              return "Development";
            case f.EnvTarget.Preview:
              return "Preview";
            case f.EnvTarget.Production:
              return "Production";
            default:
              return e;
          }
        });
        return 0 === t.length
          ? "None"
          : 3 === t.length
            ? "All Environments"
            : t.join(", ");
      },
      w = (e) => {
        let t = e
            .split(/\r?\n/)
            .filter((e) => e.trim() && !e.trim().startsWith("#")),
          n = [];
        for (let e of t) {
          let t = e.match(/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/);
          if (t) {
            let [, e] = t,
              r = t[2] ?? "";
            (((r && r.startsWith('"') && r.endsWith('"')) ||
              (r.startsWith("'") && r.endsWith("'"))) &&
              (r = r.substring(1, r.length - 1)),
              n.push({
                key: e,
                value: r,
                targets: [
                  f.EnvTarget.Development,
                  f.EnvTarget.Preview,
                  f.EnvTarget.Production,
                ],
              }));
          } else
            n.push({
              key: e.trim(),
              value: "",
              targets: [
                f.EnvTarget.Development,
                f.EnvTarget.Preview,
                f.EnvTarget.Production,
              ],
            });
        }
        return n;
      },
      C = (e, t) => {
        if (e.key !== t.key) return !1;
        let n = e.targets || [],
          r = t.targets || [];
        return n.some((e) => r.includes(e));
      },
      k = (e) => {
        for (let t = 0; t < e.length; t++) {
          let n = e[t];
          if (n && "" !== n.key.trim())
            for (let r = t + 1; r < e.length; r++) {
              let t = e[r];
              if (t && "" !== t.key.trim() && C(n, t)) return !0;
            }
        }
        return !1;
      },
      S = (e, t) => {
        for (let n of e)
          if ("" !== n.key.trim()) {
            for (let e of t)
              if (e.key === n.key) {
                let t = n.targets || [],
                  r = Array.isArray(e.target) ? e.target : [e.target];
                if (t.some((e) => r.includes(e))) return !0;
              }
          }
        return !1;
      },
      N = () =>
        (0, n.useCallback)((e) => {
          if ("Tab" === e.key) {
            e.preventDefault();
            let t = e.currentTarget.form;
            if (!t) return;
            let n = Array.from(
                t.querySelectorAll(
                  "input:not([disabled]), textarea:not([disabled]), button:not([disabled])",
                ),
              ),
              r = n.indexOf(e.currentTarget);
            if (e.shiftKey) {
              let e = r - 1;
              e >= 0 && n[e]?.focus();
            } else {
              let e = r + 1;
              e < n.length && n[e]?.focus();
            }
          }
        }, []);
    function E({
      targets: e,
      onTargetsChange: n,
      hasVercelWritePermission: c = !0,
      hasError: u,
      showLabel: d = !0,
      className: x,
    }) {
      let v = (t, r) => {
          r ? n([...e, t]) : n(e.filter((e) => e !== t));
        },
        y = () => {
          if (0 === e.length) return "Select environments";
          if (3 === e.length) return "All Environments";
          let t = e.includes(f.EnvTarget.Production),
            n = e.includes(f.EnvTarget.Preview),
            r = e.includes(f.EnvTarget.Development);
          return !t && n && r
            ? "All Pre-Production Environments"
            : t && !n && r
              ? "Production and Development"
              : t && n && !r
                ? "Production and Preview"
                : e
                    .map((e) => g.find((t) => t.target === e)?.label || e)
                    .join(", ");
        },
        b = (() => {
          let t = e.includes(f.EnvTarget.Preview),
            n = e.includes(f.EnvTarget.Development);
          return (!!t && !!n) || ((!!t || !!n) && "indeterminate");
        })();
      return (0, t.jsxs)("div", {
        className: (0, m.cn)(d ? "mb-4" : "mb-3", x),
        children: [
          d &&
            (0, t.jsxs)("div", {
              className: "flex items-center gap-1 mb-2",
              children: [
                (0, t.jsx)(r.Label, {
                  className: "text-xs text-v0-gray-700",
                  children: "Environment",
                }),
                (0, t.jsx)(i.Tooltip, {
                  content: (0, t.jsxs)("span", {
                    children: [
                      "Deployments in the selected environments will have access to the variables below.",
                      " ",
                      (0, t.jsx)("a", {
                        href: "https://vercel.com/docs/environment-variables#preview-environment-variables",
                        target: "_blank",
                        rel: "noopener noreferrer",
                        className:
                          "text-v0-blue-900 underline hover:no-underline",
                        children: "Learn more",
                      }),
                    ],
                  }),
                  className: "max-w-[200px]",
                  children: (0, t.jsx)(p.InformationFillSmall, {
                    className: "text-v0-gray-900",
                  }),
                }),
              ],
            }),
          (0, t.jsxs)(a.DropdownMenu, {
            children: [
              (0, t.jsx)(a.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, t.jsxs)(s.Button, {
                  type: "button",
                  variant: "outline",
                  className: (0, m.cn)(
                    "w-full justify-between h-8 text-sm overflow-hidden rounded-md [&]:p-0",
                    u &&
                      "border-v0-red-900 ring-3 ring-v0-caveat-focus-ring-error hover:border-v0-red-900 hover:ring-3 hover:ring-v0-red-500",
                  ),
                  disabled: !c,
                  children: [
                    (0, t.jsxs)("div", {
                      className: "flex items-center gap-3 h-full flex-1",
                      children: [
                        (0, t.jsx)("div", {
                          className:
                            "flex items-center justify-center size-8 border-r border-v0-gray-300 bg-v0-gray-100 rounded-l-[calc(0.375rem-1px)]",
                          children: (0, t.jsx)(l.Layers, {
                            size: 16,
                            className: "text-v0-gray-900",
                          }),
                        }),
                        (0, t.jsx)("span", {
                          className: "truncate flex-1 text-left",
                          children: y(),
                        }),
                      ],
                    }),
                    (0, t.jsx)("div", {
                      className: "flex items-center justify-center size-8",
                      children: (0, t.jsx)(o.ChevronDown, {
                        size: 14,
                        className: "shrink-0",
                      }),
                    }),
                  ],
                }),
              }),
              (0, t.jsxs)(a.DropdownMenuContent, {
                align: "start",
                sideOffset: 8,
                className:
                  "min-w-[var(--radix-dropdown-menu-trigger-width)] w-[var(--radix-dropdown-menu-trigger-width)] p-2",
                onCloseAutoFocus: (e) => e.preventDefault(),
                children: [
                  (0, t.jsx)(a.DropdownMenuCheckboxItem, {
                    checked: e.includes(f.EnvTarget.Production),
                    onCheckedChange: (e) => v(f.EnvTarget.Production, !!e),
                    onSelect: (e) => e.preventDefault(),
                    variant: "checkbox",
                    checkboxPosition: "right",
                    className:
                      "h-8 text-[14px] leading-[20px] font-normal text-v0-gray-1000",
                    children: (0, t.jsxs)("div", {
                      className: "flex items-center gap-3 w-full",
                      children: [
                        (0, t.jsx)(h, {
                          size: 16,
                          className: "text-v0-gray-900",
                        }),
                        (0, t.jsx)("span", { children: "Production" }),
                      ],
                    }),
                  }),
                  (0, t.jsx)(a.DropdownMenuSeparator, {}),
                  (0, t.jsx)(a.DropdownMenuCheckboxItem, {
                    checked: b,
                    onSelect: (e) => e.preventDefault(),
                    variant: "checkbox",
                    checkboxPosition: "right",
                    className:
                      "h-8 text-[12px] leading-[20px] font-medium text-v0-gray-700 cursor-default pointer-events-none",
                    children: (0, t.jsx)("span", {
                      children: "Pre-production environments",
                    }),
                  }),
                  g
                    .slice(1)
                    .map(({ target: n, label: r, icon: i }) =>
                      (0, t.jsx)(
                        a.DropdownMenuCheckboxItem,
                        {
                          checked: e.includes(n),
                          onCheckedChange: (e) => v(n, !!e),
                          onSelect: (e) => e.preventDefault(),
                          variant: "checkbox",
                          checkboxPosition: "right",
                          className:
                            "h-8 text-[14px] leading-[20px] font-normal text-v0-gray-1000",
                          children: (0, t.jsxs)("div", {
                            className: "flex items-center gap-3 w-full",
                            children: [
                              (0, t.jsx)(i, {
                                size: 16,
                                className: "text-v0-gray-900",
                              }),
                              (0, t.jsx)("span", { children: r }),
                            ],
                          }),
                        },
                        n,
                      ),
                    ),
                ],
              }),
            ],
          }),
        ],
      });
    }
    e.s(
      [
        "GlobalEnvironmentSelector",
        () => E,
        "checkConflictWithExisting",
        0,
        S,
        "checkDuplicateKeys",
        0,
        k,
        "formatTargets",
        0,
        j,
        "getEnvVarKeyError",
        0,
        b,
        "isValidEnvVarKey",
        0,
        y,
        "parseEnvVars",
        0,
        w,
        "titleMap",
        0,
        x,
        "useFormTabNavigation",
        0,
        N,
      ],
      829890,
    );
  },
  931194,
  (e) => {
    "use strict";
    function t(e, t) {
      return { ...e, ...t };
    }
    function n(e, n) {
      return {
        ...n,
        ...e,
        common: t(n.common, e.common),
        light: t(n.light, e.light),
        dark: t(n.dark, e.dark),
      };
    }
    e.s(["mergePartialShadcnStylesWithDefaults", () => n]);
  },
  471964,
  (e) => {
    "use strict";
    let t = {
        "font-sans": "'Geist', 'Geist Fallback'",
        "font-mono": "'Geist Mono', 'Geist Mono Fallback'",
        "font-serif": "'Source Serif 4', 'Source Serif 4 Fallback'",
      },
      n = {
        common: { radius: "0.5rem", ...t },
        light: {
          background: "oklch(1 0 0)",
          foreground: "oklch(0.1450 0 0)",
          card: "oklch(1 0 0)",
          "card-foreground": "oklch(0.1450 0 0)",
          popover: "oklch(1 0 0)",
          "popover-foreground": "oklch(0.1450 0 0)",
          primary: "oklch(0.2050 0 0)",
          "primary-foreground": "oklch(0.9850 0 0)",
          secondary: "oklch(0.9700 0 0)",
          "secondary-foreground": "oklch(0.2050 0 0)",
          muted: "oklch(0.9700 0 0)",
          "muted-foreground": "oklch(0.5560 0 0)",
          accent: "oklch(0.9700 0 0)",
          "accent-foreground": "oklch(0.2050 0 0)",
          destructive: "oklch(0.5770 0.2450 27.3250)",
          "destructive-foreground": "oklch(1 0 0)",
          border: "oklch(0.9220 0 0)",
          input: "oklch(0.9220 0 0)",
          ring: "oklch(0.7080 0 0)",
          "chart-1": "oklch(0.8100 0.1000 252)",
          "chart-2": "oklch(0.6200 0.1900 260)",
          "chart-3": "oklch(0.5500 0.2200 263)",
          "chart-4": "oklch(0.4900 0.2200 264)",
          "chart-5": "oklch(0.4200 0.1800 266)",
          sidebar: "oklch(0.9850 0 0)",
          "sidebar-foreground": "oklch(0.1450 0 0)",
          "sidebar-primary": "oklch(0.2050 0 0)",
          "sidebar-primary-foreground": "oklch(0.9850 0 0)",
          "sidebar-accent": "oklch(0.9700 0 0)",
          "sidebar-accent-foreground": "oklch(0.2050 0 0)",
          "sidebar-border": "oklch(0.9220 0 0)",
          "sidebar-ring": "oklch(0.7080 0 0)",
          "shadow-x": "0px",
          "shadow-y": "1px",
          "shadow-blur": "2px",
          "shadow-spread": "0px",
          "shadow-opacity": "0.05",
          "shadow-color": "#000000",
        },
        dark: {
          background: "oklch(0.1450 0 0)",
          foreground: "oklch(0.9850 0 0)",
          card: "oklch(0.2050 0 0)",
          "card-foreground": "oklch(0.9850 0 0)",
          popover: "oklch(0.2690 0 0)",
          "popover-foreground": "oklch(0.9850 0 0)",
          primary: "oklch(0.9220 0 0)",
          "primary-foreground": "oklch(0.2050 0 0)",
          secondary: "oklch(0.2690 0 0)",
          "secondary-foreground": "oklch(0.9850 0 0)",
          muted: "oklch(0.2690 0 0)",
          "muted-foreground": "oklch(0.7080 0 0)",
          accent: "oklch(0.3710 0 0)",
          "accent-foreground": "oklch(0.9850 0 0)",
          destructive: "oklch(0.7040 0.1910 22.2160)",
          "destructive-foreground": "oklch(0.9850 0 0)",
          border: "oklch(0.2750 0 0)",
          input: "oklch(0.3250 0 0)",
          ring: "oklch(0.5560 0 0)",
          "chart-1": "oklch(0.8100 0.1000 252)",
          "chart-2": "oklch(0.6200 0.1900 260)",
          "chart-3": "oklch(0.5500 0.2200 263)",
          "chart-4": "oklch(0.4900 0.2200 264)",
          "chart-5": "oklch(0.4200 0.1800 266)",
          sidebar: "oklch(0.2050 0 0)",
          "sidebar-foreground": "oklch(0.9850 0 0)",
          "sidebar-primary": "oklch(0.4880 0.2430 264.3760)",
          "sidebar-primary-foreground": "oklch(0.9850 0 0)",
          "sidebar-accent": "oklch(0.2690 0 0)",
          "sidebar-accent-foreground": "oklch(0.9850 0 0)",
          "sidebar-border": "oklch(0.2750 0 0)",
          "sidebar-ring": "oklch(0.4390 0 0)",
          "shadow-x": "0px",
          "shadow-y": "1px",
          "shadow-blur": "2px",
          "shadow-spread": "0px",
          "shadow-opacity": "0.05",
          "shadow-color": "#000000",
        },
      };
    e.s(["FONTS_INITIAL_STYLES", 0, t, "initialStyles", 0, n]);
  },
  55437,
  255707,
  166867,
  494563,
  (e) => {
    "use strict";
    e.s(["CreateEnvVarDialog", () => w], 55437);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(304649),
      s = e.i(763480),
      a = e.i(51940),
      o = e.i(211976),
      l = e.i(583965),
      c = e.i(176248),
      u = e.i(707974);
    e.i(563948);
    var d = e.i(407562),
      h = e.i(667660),
      p = e.i(538553),
      m = e.i(199490),
      f = e.i(459522),
      g = e.i(383790),
      x = e.i(418270),
      v = e.i(643312),
      y = e.i(120945);
    e.i(904347);
    var b = e.i(37737),
      j = e.i(829890);
    function w(e) {
      let { mode: w = "create", variables: C, onSave: k } = e,
        { hasVercelWritePermission: S } = (0, h.useActiveScope)(),
        N = (0, v.useIntegrationsApi)(),
        [E, A] = (0, n.useTransition)(),
        [D, I] = (0, n.useState)(null),
        { refresh: M } = (0, l.useBrowserFrame)(),
        T = (0, x.useActiveBlockWizardRefetch)(),
        L = (0, j.useFormTabNavigation)(),
        [P, R] = (0, n.useState)(!1),
        [F, _] = (0, n.useState)([
          m.EnvTarget.Production,
          m.EnvTarget.Preview,
          m.EnvTarget.Development,
        ]),
        O = [
          {
            key: "",
            value: "",
            targets: [
              m.EnvTarget.Development,
              m.EnvTarget.Preview,
              m.EnvTarget.Production,
            ],
            comment: "Added in V0",
          },
        ],
        [B, V] = (0, n.useState)(C ?? O),
        [z, H] = (0, n.useState)({}),
        $ = async (e) => {
          R(!0);
          try {
            let t = B[e],
              n = t?.key === "AI_GATEWAY_API_KEY",
              r = n ? "/chat/api/ai-gateway-key" : "/chat/api/api-keys",
              i = n
                ? void 0
                : JSON.stringify({ name: "Generated from v0.app chat" }),
              s = await fetch(r, {
                method: "POST",
                headers: n ? {} : { "Content-Type": "application/json" },
                ...(i && { body: i }),
              });
            if (!s.ok) throw Error("Failed to generate API key");
            let a = await s.json();
            (d.toast.success("API key generated successfully"),
              U(e, "value", a.fullKey),
              H((t) => ({
                ...t,
                [e]: { ...(t[e] || { key: "", value: "" }), value: "" },
              })));
          } catch (e) {
            (console.error("Error generating API key:", e),
              d.toast.error("Failed to generate API key"));
          } finally {
            R(!1);
          }
        },
        U = (e, t, n) => {
          let r = [...B];
          ((r[e] = { ...r[e], [t]: n }), V(r));
        },
        G = () => {
          V([...B, { key: "", value: "", targets: F, comment: "" }]);
        },
        W = (e) => {
          B.length <= 1 ||
            (V(B.filter((t, n) => n !== e)),
            H((t) => {
              let n = { ...t };
              delete n[e];
              let r = {};
              return (
                Object.entries(n).forEach(([t, n]) => {
                  let i = Number(t);
                  i > e ? (r[i - 1] = n) : (r[i] = n);
                }),
                r
              );
            }));
        },
        q = (0, n.useMemo)(() => (0, j.checkDuplicateKeys)(B), [B]),
        Z = (0, n.useMemo)(
          () =>
            "ready" === N.status &&
            (0, j.checkConflictWithExisting)(B, N.envVars),
          [B, N],
        ),
        K = (0, n.useCallback)(
          (e, t, n) => {
            if ("" !== t.key.trim() && !(0, j.isValidEnvVarKey)(t.key))
              return (0, j.getEnvVarKeyError)(t.key);
            if ("" !== t.key.trim() && (0, j.isValidEnvVarKey)(t.key)) {
              if (
                B.some(
                  (r, i) =>
                    i !== e &&
                    r.key === t.key &&
                    (r.targets || []).some((e) => n.includes(e)),
                )
              )
                return "Duplicate key";
              if ("ready" === N.status) {
                let e = { ...t, targets: n };
                if ((0, j.checkConflictWithExisting)([e], N.envVars))
                  return "Duplicate key";
              }
            }
            return null;
          },
          [B, N],
        ),
        Y = (0, n.useCallback)(
          (e) => {
            let t = B[e];
            return t ? K(e, t, t.targets || []) : null;
          },
          [B, K],
        ),
        J = (0, n.useCallback)(
          (e) => {
            let t = B[e];
            return t && "" !== t.key.trim()
              ? "" === t.value.trim()
                ? "Value cannot be empty"
                : t.value.length > 65536
                  ? "Value cannot exceed 65,536 characters"
                  : null
              : null;
          },
          [B],
        ),
        Q = (0, n.useCallback)(
          (e) => {
            _(e);
            let t = B.map((t) => ({ ...t, targets: e }));
            (V(t),
              H((n) => {
                let r = {};
                return (
                  t.forEach((t, i) => {
                    let s = K(i, t, e);
                    r[i] = {
                      ...(n[i] || { key: "", value: "" }),
                      key: s || "",
                    };
                  }),
                  r
                );
              }));
          },
          [B, K],
        ),
        X = (0, n.useCallback)(
          (e, t) => {
            setTimeout(() => {
              let n = "key" === t ? Y(e) : J(e);
              H((r) => ({
                ...r,
                [e]: { ...(r[e] || { key: "", value: "" }), [t]: n || "" },
              }));
            }, 0);
          },
          [Y, J],
        ),
        ee = (e, t, n) => {
          let r = e.clipboardData.getData("text");
          if ("key" === n) {
            e.preventDefault();
            let n = (0, j.parseEnvVars)(r);
            if (n.length > 0) {
              let e = [...B];
              (e.splice(t, 1, ...n), V(e));
            }
          }
        },
        et = (0, n.useMemo)(
          () =>
            0 === F.length ||
            B.some(
              (e) =>
                "" !== e.key.trim() && (!e.targets || 0 === e.targets.length),
            ),
          [F, B],
        ),
        en = (0, n.useMemo)(() => {
          let e = B.some(
              (e) => "" !== e.key.trim() && !(0, j.isValidEnvVarKey)(e.key),
            ),
            t = B.some((e) => "" !== e.key.trim() && "" === e.value.trim()),
            n = B.some((e) => "" !== e.key.trim() && e.value.length > 65536);
          return !S || et || e || q || Z || t || n || null !== D;
        }, [S, et, q, Z, B, D]),
        er = () => {
          (I("save"),
            A(async () => {
              try {
                if (!S) {
                  (d.toast.error(
                    "You do not have permission to create environment variables",
                  ),
                    I(null));
                  return;
                }
                if ("ready" !== N.status) {
                  (d.toast.error("Something went wrong. Please try again."),
                    I(null));
                  return;
                }
                let e = B.filter(
                  (e) => "" !== e.key.trim() && "" !== e.value.trim(),
                );
                if (0 === e.length) {
                  let e = B.some((e) => "" !== e.key.trim()),
                    t = B.some((e) => "" !== e.value.trim());
                  e && !t
                    ? d.toast.error(
                        "Please provide values for your environment variables",
                      )
                    : !e && t
                      ? d.toast.error(
                          "Please provide keys for your environment variables",
                        )
                      : d.toast.error(
                          "Please provide at least one environment variable with both key and value",
                        );
                  return;
                }
                for (let t of e)
                  if (!t.targets || 0 === t.targets.length)
                    return void d.toast.error(
                      `Please select at least one target environment for ${t.key}`,
                    );
                for (let t of e)
                  if (!(0, j.isValidEnvVarKey)(t.key)) {
                    let e = (0, j.getEnvVarKeyError)(t.key);
                    d.toast.error(
                      e ||
                        `Invalid key name: ${t.key}. Keys can only contain letters, numbers, and underscores, and must start with a letter or underscore.`,
                    );
                    return;
                  }
                if (q)
                  return void d.toast.error(
                    "Cannot add duplicate keys for the same environment",
                  );
                if (Z)
                  return void d.toast.error(
                    "One or more keys already exist for the selected environments",
                  );
                let t = await N.update({ setEnvironmentVariables: e });
                if ("error" === t.status)
                  return void d.toast.error(
                    t.message || "Failed to save environment variables",
                  );
                if ("error" === t.setEnvironmentVariables.status)
                  return void d.toast.error(
                    t.setEnvironmentVariables.message ||
                      "Failed to save environment variables",
                  );
                (d.toast.success("Environment variables saved successfully"),
                  k?.(e),
                  (0, b.closeDialog)(),
                  M(),
                  T());
              } finally {
                I(null);
              }
            }));
        };
      return (0, t.jsx)(y.AtomicDialog, {
        type: "createEnvVar",
        className: "md:w-[700px]",
        onOpenChange: (e) => {
          e &&
            (V(C ?? O),
            _([
              m.EnvTarget.Production,
              m.EnvTarget.Preview,
              m.EnvTarget.Development,
            ]),
            R(!1),
            I(null),
            H({}));
        },
        children: (0, t.jsxs)("form", {
          action: er,
          children: [
            (0, t.jsxs)(r.ModalHeader, {
              children: [
                (0, t.jsx)(r.ModalTitle, {
                  className: "flex items-center gap-2 text-xl font-medium",
                  children: (0, t.jsx)("span", { children: j.titleMap[w] }),
                }),
                "create" === w &&
                  (0, t.jsx)(r.ModalDescription, {
                    className: "text-v0-gray-900 text-left",
                    children:
                      "Environment variables will be encrypted and stored securely on Vercel.",
                  }),
              ],
            }),
            (0, t.jsxs)(r.ModalContent, {
              className: "pb-3 max-h-[60vh] overflow-y-auto no-scrollbar",
              children: [
                "missing" === w &&
                  (0, t.jsx)("p", {
                    className: "text-v0-gray-900 mb-4 text-[15px]",
                    children:
                      "The functionality of this app will be limited without the following environment variables:",
                  }),
                "create" === w &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)(j.GlobalEnvironmentSelector, {
                        targets: F,
                        onTargetsChange: Q,
                        hasVercelWritePermission: S,
                        hasError: et,
                      }),
                      et &&
                        (0, t.jsx)("span", {
                          className: "text-xs text-v0-red-900 -mt-3 block",
                          children: "Please select at least one environment",
                        }),
                    ],
                  }),
                (0, t.jsxs)("div", {
                  children: [
                    B.length > 0 &&
                      (0, t.jsxs)("div", {
                        className: "grid grid-cols-[1fr_1fr_auto] gap-3 mb-1",
                        children: [
                          (0, t.jsx)(u.Label, {
                            className: "text-xs text-v0-gray-700",
                            children: "Name",
                          }),
                          (0, t.jsx)(u.Label, {
                            className: "text-xs text-v0-gray-700",
                            children: "Value",
                          }),
                          (0, t.jsx)("div", { className: "w-8" }),
                        ],
                      }),
                    B.map((e, n) => {
                      let r =
                          ("V0_API_KEY" === e.key ||
                            "AI_GATEWAY_API_KEY" === e.key) &&
                          "" === e.value,
                        l = z[n] || { key: "", value: "" };
                      return (0, t.jsx)(
                        "div",
                        {
                          className: (0, i.cn)(n > 0 && "mt-3"),
                          children: (0, t.jsx)("div", {
                            className: "space-y-3",
                            children: (0, t.jsxs)("div", {
                              className:
                                "grid grid-cols-[1fr_1fr_auto] gap-3 items-start",
                              children: [
                                (0, t.jsxs)("div", {
                                  children: [
                                    (0, t.jsx)(p.RbacTooltip, {
                                      show: !S,
                                      requiredRole: "V0Builder",
                                      children: (0, t.jsx)(s.Input, {
                                        value: e.key,
                                        onChange: (e) => {
                                          (U(n, "key", e.target.value),
                                            H((e) => ({
                                              ...e,
                                              [n]: {
                                                ...(e[n] || {
                                                  key: "",
                                                  value: "",
                                                }),
                                                key: "",
                                              },
                                            })));
                                        },
                                        onBlur: () => X(n, "key"),
                                        onPaste: (e) => ee(e, n, "key"),
                                        onKeyDown: (e) => {
                                          if ("Tab" === e.key && !e.shiftKey) {
                                            e.preventDefault();
                                            let t =
                                              e.currentTarget.closest(".grid");
                                            if (t) {
                                              let e =
                                                t.querySelector("textarea");
                                              e && e.focus();
                                            }
                                          }
                                        },
                                        placeholder: "API_KEY",
                                        disabled: !S,
                                        className: "h-8",
                                        autoFocus: 0 === n,
                                        error: l.key || void 0,
                                        showErrorMessage: !1,
                                      }),
                                    }),
                                    l.key &&
                                      (0, t.jsx)("span", {
                                        className:
                                          "text-xs text-v0-red-900 mt-1 block",
                                        children: l.key,
                                      }),
                                  ],
                                }),
                                (0, t.jsxs)("div", {
                                  children: [
                                    (0, t.jsxs)("div", {
                                      className: "relative",
                                      children: [
                                        (0, t.jsx)(p.RbacTooltip, {
                                          show: !S,
                                          requiredRole: "V0Builder",
                                          children: (0, t.jsx)(
                                            a.ResizableTextArea,
                                            {
                                              value: e.value,
                                              onChange: (e) => {
                                                (U(n, "value", e.target.value),
                                                  H((e) => ({
                                                    ...e,
                                                    [n]: {
                                                      ...(e[n] || {
                                                        key: "",
                                                        value: "",
                                                      }),
                                                      value: "",
                                                    },
                                                  })));
                                              },
                                              onBlur: () => X(n, "value"),
                                              onPaste: (e) => ee(e, n, "value"),
                                              onMouseDown: (e) => {
                                                e.currentTarget.focus();
                                              },
                                              onKeyDown: L,
                                              placeholder: "Value",
                                              className: (0, i.cn)(
                                                (0, s.inputVariants)({
                                                  size: "md",
                                                  hasError: !!l.value,
                                                }),
                                                "whitespace-pre px-2 py-1 leading-5 resize-none overflow-y-auto h-8 focus:outline-none focus-visible:outline-none",
                                              ),
                                              disabled: P || !S,
                                              tabIndex: 0,
                                              minHeight: 32,
                                              maxHeight: 128,
                                              rows: 1,
                                            },
                                          ),
                                        }),
                                        r &&
                                          (0, t.jsx)(p.RbacTooltip, {
                                            show: !S,
                                            requiredRole: "V0Builder",
                                            children: (0, t.jsx)(
                                              o.SpinnerButton,
                                              {
                                                type: "button",
                                                variant: "outline",
                                                size: "sm",
                                                onClick: () => $(n),
                                                pending: P,
                                                className:
                                                  "absolute right-1 top-0.5 h-7 text-xs px-2",
                                                disabled: !S,
                                                children: "Generate",
                                              },
                                            ),
                                          }),
                                      ],
                                    }),
                                    l.value &&
                                      (0, t.jsx)("span", {
                                        className:
                                          "text-xs text-v0-red-900 mt-1 block",
                                        children: l.value,
                                      }),
                                  ],
                                }),
                                (0, t.jsx)("div", {
                                  className: "flex items-center justify-center",
                                  children:
                                    "create" === w &&
                                    (0, t.jsx)("button", {
                                      type: "button",
                                      onClick: () => W(n),
                                      className: (0, i.cn)(
                                        "flex items-center justify-center size-8 rounded-md transition-colors border border-v0-alpha-400",
                                        B.length <= 1
                                          ? "text-v0-gray-500 cursor-not-allowed"
                                          : "text-v0-gray-900 hover:bg-v0-gray-200",
                                      ),
                                      disabled: !S || B.length <= 1,
                                      children: (0, t.jsx)(g.Trash, {
                                        size: 16,
                                      }),
                                    }),
                                }),
                              ],
                            }),
                          }),
                        },
                        n,
                      );
                    }),
                    "create" === w &&
                      (0, t.jsx)("div", {
                        className: "mt-3",
                        children: (0, t.jsx)(p.RbacTooltip, {
                          show: !S,
                          requiredRole: "V0Builder",
                          children: (0, t.jsxs)(c.Button, {
                            type: "button",
                            variant: "outline",
                            size: "sm",
                            onClick: G,
                            disabled: !S,
                            className: "flex items-center gap-2",
                            children: [
                              (0, t.jsx)(f.Plus, { size: 16 }),
                              "Add Variable",
                            ],
                          }),
                        }),
                      }),
                  ],
                }),
              ],
            }),
            (0, t.jsx)(r.ModalFooter, {
              className:
                "border-v0-gray-300 bg-v0-background-200 border-t h-14 px-3 md:px-6",
              children: (0, t.jsxs)("div", {
                className: "flex items-center justify-end w-full h-full gap-2",
                children: [
                  (0, t.jsx)(c.Button, {
                    type: "button",
                    size: "sm",
                    variant: "secondary",
                    onClick: () => (0, b.closeDialog)(),
                    disabled: E,
                    children: "Cancel",
                  }),
                  (0, t.jsx)(p.RbacTooltip, {
                    show: !S,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(o.SpinnerButton, {
                      size: "sm",
                      pending: E,
                      disabled: en,
                      children: "Add Variables",
                    }),
                  }),
                ],
              }),
            }),
          ],
        }),
      });
    }
    e.s(["EditEnvVarDialog", () => H], 255707);
    var C = t,
      k = n,
      S = r,
      N = i,
      E = s,
      A = e.i(216445),
      D = a,
      I = o,
      M = l,
      T = c,
      L = u,
      P = d,
      R = h,
      F = p,
      _ = v,
      O = y,
      B = b,
      V = e.i(120485),
      z = j;
    function H(e) {
      let { envVarId: t, varKey: n, value: r, targets: i, comment: s } = e,
        { hasVercelWritePermission: a } = (0, R.useActiveScope)(),
        [o, l] = (0, k.useTransition)(),
        [c, u] = (0, k.useState)(null),
        { refresh: d } = (0, M.useBrowserFrame)(),
        h = (0, _.useIntegrationsApi)(),
        p = (0, k.useRef)(!0),
        m = (0, z.useFormTabNavigation)(),
        [f, g] = (0, k.useState)(n),
        [x, v] = (0, k.useState)(r),
        [y, b] = (0, k.useState)(i),
        [j, w] = (0, k.useState)(s ?? ""),
        [H, $] = (0, k.useState)({ key: "", value: "" });
      (0, k.useEffect)(
        () => () => {
          p.current = !1;
        },
        [],
      );
      let U = (0, k.useCallback)(
          (e) => {
            if ("" !== f.trim() && !(0, z.isValidEnvVarKey)(f))
              return (0, z.getEnvVarKeyError)(f);
            if (
              "" !== f.trim() &&
              (0, z.isValidEnvVarKey)(f) &&
              "ready" === h.status
            ) {
              let n = h.envVars.filter((e) => e.id !== t),
                r = { key: f, value: x, targets: e };
              if ((0, z.checkConflictWithExisting)([r], n))
                return "Duplicate key";
            }
            return null;
          },
          [f, x, h, t],
        ),
        G = (0, k.useCallback)(() => U(y), [U, y]),
        W = (0, k.useMemo)(() => {
          if ("ready" !== h.status) return !1;
          let e = h.envVars.filter((e) => e.id !== t),
            n = { key: f, value: x, targets: y };
          return (0, z.checkConflictWithExisting)([n], e);
        }, [f, y, h, t, x]),
        q = 0 === y.length,
        Z = (0, k.useCallback)(
          () =>
            "" === x.trim()
              ? "Value cannot be empty"
              : x.length > 65536
                ? "Value cannot exceed 65,536 characters"
                : null,
          [x],
        ),
        K = (0, k.useCallback)(
          (e) => {
            b(e);
            let t = U(e);
            $((e) => ({ ...e, key: t || "" }));
          },
          [U],
        ),
        Y = (0, k.useCallback)(
          (e) => {
            setTimeout(() => {
              let t = "key" === e ? G() : Z();
              $((n) => ({ ...n, [e]: t || "" }));
            }, 0);
          },
          [G, Z],
        ),
        J = (0, k.useMemo)(
          () =>
            !a ||
            0 === y.length ||
            !(0, z.isValidEnvVarKey)(f) ||
            W ||
            "" === x.trim() ||
            x.length > 65536 ||
            null !== c,
          [a, y.length, f, W, x, c],
        ),
        Q = (0, k.useCallback)(() => {
          if (!a) return;
          let e = G(),
            n = Z();
          ($({ key: e || "", value: n || "" }),
            e ||
              n ||
              0 === y.length ||
              (u("save"),
              l(async () => {
                try {
                  if ("ready" !== h.status)
                    return void P.toast.error(
                      "Something went wrong. Please try again.",
                    );
                  if ("" === f.trim() || "" === x.trim())
                    return void P.toast.error(
                      "Please provide both key and value",
                    );
                  if (0 === y.length)
                    return void P.toast.error(
                      "Please select at least one environment",
                    );
                  if (!(0, z.isValidEnvVarKey)(f)) {
                    let e = (0, z.getEnvVarKeyError)(f);
                    P.toast.error(
                      e ||
                        "Invalid key name. Keys can only contain letters, numbers, and underscores, and must start with a letter or underscore.",
                    );
                    return;
                  }
                  if (W)
                    return void P.toast.error(
                      "Duplicate key for the selected environments",
                    );
                  let e = await h.update({
                    updateEnvironmentVariables: [
                      { id: t, key: f, value: x, targets: y, comment: j },
                    ],
                  });
                  if ("error" === e.status) {
                    (0, V.handleChatError)(e.message, void 0, e.message) ||
                      P.toast.error(e.message);
                    return;
                  }
                  if ("error" === e.updatedEnvironmentVariables.status) {
                    (0, V.handleChatError)(
                      e.updatedEnvironmentVariables.message,
                      void 0,
                      e.updatedEnvironmentVariables.message,
                    ) || P.toast.error(e.updatedEnvironmentVariables.message);
                    return;
                  }
                  (P.toast.success("Environment variable updated successfully"),
                    (0, B.closeDialog)(),
                    d());
                } catch (e) {
                  (console.error("Error in handleSave:", e),
                    P.toast.error(
                      e instanceof Error
                        ? e.message
                        : "An unexpected error occurred",
                    ));
                } finally {
                  p.current && u(null);
                }
              })));
        }, [a, h, f, x, y, j, W, t, d, G, Z]);
      return (0, C.jsx)(O.AtomicDialog, {
        type: "editEnvVar",
        className: "md:w-[720px]",
        children: (0, C.jsxs)("form", {
          action: Q,
          children: [
            (0, C.jsxs)(S.ModalHeader, {
              children: [
                (0, C.jsx)(S.ModalTitle, {
                  className: "flex items-center gap-2 text-xl font-medium",
                  children: (0, C.jsx)("span", {
                    children: "Edit Environment Variable",
                  }),
                }),
                (0, C.jsx)(S.ModalDescription, {
                  className: "text-v0-gray-900 text-left",
                  children:
                    "Update the configuration for this environment variable.",
                }),
              ],
            }),
            (0, C.jsx)(S.ModalContent, {
              className: "pb-3",
              children: (0, C.jsxs)("div", {
                className: "space-y-3",
                children: [
                  (0, C.jsxs)("div", {
                    className: "grid grid-cols-2 gap-3",
                    children: [
                      (0, C.jsxs)("div", {
                        children: [
                          (0, C.jsx)(L.Label, {
                            className: "text-xs text-v0-gray-700 mb-2 block",
                            children: "Name",
                          }),
                          (0, C.jsx)(F.RbacTooltip, {
                            show: !a,
                            requiredRole: "V0Builder",
                            children: (0, C.jsx)(E.Input, {
                              value: f,
                              onChange: (e) => {
                                (g(e.target.value),
                                  $((e) => ({ ...e, key: "" })));
                              },
                              onBlur: () => Y("key"),
                              onKeyDown: (e) => {
                                if ("Tab" === e.key && !e.shiftKey) {
                                  e.preventDefault();
                                  let t = e.currentTarget.closest(".grid");
                                  if (t) {
                                    let e = t.querySelector("textarea");
                                    e && e.focus();
                                  }
                                }
                              },
                              placeholder: "API_KEY",
                              disabled: !a,
                              className: "h-8",
                              error: H.key || void 0,
                              showErrorMessage: !1,
                            }),
                          }),
                          H.key &&
                            (0, C.jsx)("span", {
                              className: "text-xs text-v0-red-900 mt-1 block",
                              children: H.key,
                            }),
                        ],
                      }),
                      (0, C.jsxs)("div", {
                        children: [
                          (0, C.jsx)(L.Label, {
                            className: "text-xs text-v0-gray-700 mb-2 block",
                            children: "Value",
                          }),
                          (0, C.jsx)(F.RbacTooltip, {
                            show: !a,
                            requiredRole: "V0Builder",
                            children: (0, C.jsx)(D.ResizableTextArea, {
                              value: x,
                              onChange: (e) => {
                                (v(e.target.value),
                                  $((e) => ({ ...e, value: "" })));
                              },
                              onBlur: () => Y("value"),
                              onMouseDown: (e) => {
                                e.currentTarget.focus();
                              },
                              onKeyDown: m,
                              placeholder: "my-api-key",
                              className: (0, N.cn)(
                                (0, E.inputVariants)({
                                  size: "md",
                                  hasError: !!H.value,
                                }),
                                "whitespace-pre px-2 py-1 leading-5 resize-none overflow-y-auto h-8 focus:outline-none focus-visible:outline-none",
                              ),
                              disabled: !a,
                              tabIndex: 0,
                              minHeight: 32,
                              maxHeight: 128,
                              rows: 1,
                            }),
                          }),
                          H.value &&
                            (0, C.jsx)("span", {
                              className: "text-xs text-v0-red-900 mt-1 block",
                              children: H.value,
                            }),
                        ],
                      }),
                    ],
                  }),
                  (0, C.jsx)(z.GlobalEnvironmentSelector, {
                    targets: y,
                    onTargetsChange: K,
                    hasVercelWritePermission: a,
                    hasError: q,
                  }),
                  q &&
                    (0, C.jsx)("span", {
                      className: "text-xs text-v0-red-900 -mt-3 block",
                      children: "Please select at least one environment",
                    }),
                  (0, C.jsxs)("div", {
                    children: [
                      (0, C.jsx)(L.Label, {
                        className: "text-xs text-v0-gray-700",
                        children: "Comment (optional):",
                      }),
                      (0, C.jsx)(F.RbacTooltip, {
                        show: !a,
                        requiredRole: "V0Builder",
                        children: (0, C.jsx)(A.Textarea, {
                          value: j,
                          onChange: (e) => w(e.target.value),
                          onKeyDown: m,
                          placeholder:
                            "Add a note about this environment variable...",
                          className: "mt-1 min-h-[60px] text-sm resize-none",
                          disabled: !a,
                          tabIndex: 0,
                        }),
                      }),
                    ],
                  }),
                ],
              }),
            }),
            (0, C.jsx)(S.ModalFooter, {
              className:
                "border-v0-gray-300 bg-v0-background-200 border-t h-14 px-3 md:px-6",
              children: (0, C.jsxs)("div", {
                className: "flex items-center justify-end w-full h-full gap-2",
                children: [
                  (0, C.jsx)(T.Button, {
                    type: "button",
                    size: "sm",
                    variant: "secondary",
                    onClick: () => (0, B.closeDialog)(),
                    disabled: o,
                    children: "Cancel",
                  }),
                  (0, C.jsx)(F.RbacTooltip, {
                    show: !a,
                    requiredRole: "V0Builder",
                    children: (0, C.jsx)(I.SpinnerButton, {
                      size: "sm",
                      pending: o,
                      disabled: J,
                      children: "Save",
                    }),
                  }),
                ],
              }),
            }),
          ],
        }),
      });
    }
    e.s(["DeleteEnvVarDialog", () => en], 166867);
    var $ = t,
      U = n,
      G = r,
      W = o,
      q = l,
      Z = c,
      K = u,
      Y = d,
      J = v,
      Q = y,
      X = b,
      ee = V,
      et = j;
    function en(e) {
      let { envVarId: t, varKey: n, targets: r } = e,
        i = (0, J.useIntegrationsApi)(),
        { refresh: s } = (0, q.useBrowserFrame)(),
        [a, o] = (0, U.useTransition)(),
        l = (0, U.useCallback)(() => {
          o(async () => {
            if ("ready" !== i.status)
              return void Y.toast.error(
                "Something went wrong. Please try again.",
              );
            let e = await i.update({ deleteEnvironmentVariableIds: [t] });
            if ("error" === e.status) {
              (0, ee.handleChatError)(e.message) || Y.toast.error(e.message);
              return;
            }
            if ("error" === e.deletedEnvironmentVariables.status) {
              (0, ee.handleChatError)(e.deletedEnvironmentVariables.message) ||
                Y.toast.error(e.deletedEnvironmentVariables.message);
              return;
            }
            (Y.toast.success("Environment variable deleted successfully"),
              (0, X.closeDialog)(),
              s());
          });
        }, [t, i, s]);
      return (0, $.jsxs)(Q.AtomicDialog, {
        type: "deleteEnvVar",
        className: "md:w-[560px]",
        children: [
          (0, $.jsxs)(G.ModalHeader, {
            children: [
              (0, $.jsx)(G.ModalTitle, {
                children: "Remove Environment Variable",
              }),
              (0, $.jsx)(G.ModalDescription, {
                className: "text-v0-gray-900 text-left",
                children:
                  "This action cannot be undone. The variable will be removed from the selected environments.",
              }),
            ],
          }),
          (0, $.jsx)(G.ModalContent, {
            children: (0, $.jsxs)("div", {
              className: "space-y-3",
              children: [
                (0, $.jsxs)("div", {
                  children: [
                    (0, $.jsx)(K.Label, {
                      className: "text-sm text-v0-gray-900",
                      children: "Environment Variable:",
                    }),
                    (0, $.jsx)("div", {
                      className:
                        "mt-1.5 rounded-lg border border-v0-gray-300 bg-v0-background-200 px-3 py-2",
                      children: (0, $.jsx)("span", {
                        className: "font-mono text-sm",
                        children: n,
                      }),
                    }),
                  ],
                }),
                (0, $.jsxs)("div", {
                  children: [
                    (0, $.jsx)(K.Label, {
                      className: "text-sm text-v0-gray-900",
                      children: "Affected Environments:",
                    }),
                    (0, $.jsx)("div", {
                      className:
                        "mt-1.5 rounded-lg border border-v0-gray-300 bg-v0-background-200 px-3 py-2",
                      children: (0, $.jsx)("span", {
                        className: "text-sm",
                        children: (0, et.formatTargets)(r),
                      }),
                    }),
                  ],
                }),
              ],
            }),
          }),
          (0, $.jsxs)(G.ModalFooter, {
            children: [
              (0, $.jsx)(Z.Button, {
                size: "sm",
                variant: "secondary",
                onClick: () => (0, X.closeDialog)(),
                disabled: a,
                children: "Cancel",
              }),
              (0, $.jsx)(W.SpinnerButton, {
                size: "sm",
                variant: "destructive",
                onClick: l,
                pending: a,
                disabled: a,
                children: "Remove",
              }),
            ],
          }),
        ],
      });
    }
    e.s(["ImportDesignSystemDialog", () => eb], 494563);
    var er = t,
      ei = c,
      es = r,
      ea = A,
      eo = y,
      el = b,
      ec = n,
      eu = e.i(919012),
      ed = (0, eu.createServerReference)(
        "7f8861cb79bbdea6108aa691f232b4bbcb97c7907f",
        eu.callServer,
        void 0,
        eu.findSourceMapURL,
        "extractStyles",
      ),
      eh = e.i(931194),
      ep = e.i(471964),
      em = o,
      ef = i,
      eg = n;
    function ex({
      onFileDrop: e,
      onInvalidFile: t,
      accept: n = [],
      multiple: r = !1,
      disabled: i = !1,
    } = {}) {
      let [s, a] = (0, eg.useState)(!1),
        o = (0, eg.useRef)(null),
        l = (0, eg.useRef)(0),
        c = (0, eg.useCallback)(
          (e) => {
            !i &&
              (e.preventDefault(),
              e.stopPropagation(),
              l.current++,
              e.dataTransfer.items.length > 0 && a(!0));
          },
          [i],
        ),
        u = (0, eg.useCallback)(
          (e) => {
            i ||
              (e.preventDefault(),
              e.stopPropagation(),
              l.current--,
              0 === l.current && a(!1));
          },
          [i],
        ),
        d = (0, eg.useCallback)(
          (e) => {
            i || (e.preventDefault(), e.stopPropagation());
          },
          [i],
        ),
        h = (0, eg.useCallback)(
          async (s) => {
            if (i) return;
            (s.preventDefault(), s.stopPropagation(), (l.current = 0), a(!1));
            let o = Array.from(s.dataTransfer.files),
              c = o;
            if (
              (n.length > 0 &&
                (c = o.filter((e) =>
                  n.some((t) => e.name.toLowerCase().endsWith(t.toLowerCase())),
                )),
              0 === c.length)
            ) {
              t && o.length > 0 && t(o);
              return;
            }
            let u = r ? c : [c[0]];
            if (e) for (let t of u) t && (await e(t));
          },
          [e, t, n, r, i],
        );
      return (
        (0, eg.useEffect)(
          () => () => {
            l.current = 0;
          },
          [],
        ),
        {
          isDragging: s,
          dropZoneRef: o,
          handleDragEnter: c,
          handleDragLeave: u,
          handleDragOver: d,
          handleDrop: h,
        }
      );
    }
    async function ev(e) {
      return new Promise((t, n) => {
        let r = new FileReader();
        ((r.onload = () => {
          let e = r.result;
          "string" == typeof e ? t(e) : n(Error("Failed to read file content"));
        }),
          (r.onerror = () => {
            n(Error("Failed to read file"));
          }),
          r.readAsText(e));
      });
    }
    var ey = e.i(502398);
    function eb({ onSuccess: e }) {
      let [t, n] = (0, ec.useState)(""),
        [r, i] = (0, ec.useState)(void 0),
        [s, a] = (0, ec.useState)(!1),
        o = (0, ec.useRef)(null),
        l = (0, ec.useRef)(null);
      (0, ec.useEffect)(() => {
        setTimeout(() => {
          o.current?.focus();
        }, 0);
      }, []);
      let c = (0, ec.useCallback)(async () => {
          if (!t.trim()) return void i("Please enter CSS content");
          a(!0);
          let n = await ed({ globalsCss: t });
          if (!n.ok) {
            (i(
              (0, er.jsxs)(er.Fragment, {
                children: [
                  "Failed to parse CSS. Please ensure it follows the",
                  " ",
                  (0, er.jsx)(ey.Link, {
                    className: "underline underline-offset-2",
                    href: "https://ui.shadcn.com/docs/theming#convention",
                    target: "_blank",
                    children: "shadcn convention",
                  }),
                  ".",
                ],
              }),
            ),
              a(!1));
            return;
          }
          (e(
            (0, eh.mergePartialShadcnStylesWithDefaults)(
              n.value.styles,
              ep.initialStyles,
            ),
          ),
            u());
        }, [t, e]),
        u = () => {
          (n(""), i(void 0), a(!1), (0, el.closeDialog)());
        },
        d = (0, ec.useCallback)(async (e) => {
          try {
            let t = await ev(e);
            (n(t), i(void 0));
          } catch (e) {
            (i("Failed to read file. Please make sure it's a valid CSS file."),
              console.error("Error reading file:", e));
          }
        }, []),
        {
          isDragging: h,
          dropZoneRef: p,
          handleDragEnter: m,
          handleDragLeave: f,
          handleDragOver: g,
          handleDrop: x,
        } = ex({
          onFileDrop: d,
          onInvalidFile: (0, ec.useCallback)((e) => {
            i(
              "An error occurred while reading the file. Please make sure it's a valid CSS file.",
            );
          }, []),
          accept: [".css"],
          multiple: !1,
        }),
        v = (0, ec.useCallback)(
          async (e) => {
            let t = e.target.files?.[0];
            t && (await d(t), (e.target.value = ""));
          },
          [d],
        ),
        y = (0, ec.useMemo)(() => {
          let e = (e) =>
              Object.entries(e)
                .map(([e, t]) => `--${e}: ${t}`)
                .join(";\n  "),
            t = e({ ...ep.initialStyles.light, ...ep.initialStyles.common }),
            n = e(ep.initialStyles.dark);
          return `:root {
  ${t}
}

.dark {
  ${n}
}`;
        }, []);
      return (0, er.jsxs)(eo.AtomicDialog, {
        type: "importDesignSystem",
        children: [
          (0, er.jsxs)(es.ModalHeader, {
            children: [
              (0, er.jsx)(es.ModalTitle, { children: "Import from CSS" }),
              (0, er.jsxs)(es.ModalDescription, {
                children: [
                  (0, er.jsx)("p", {
                    children: "Import a CSS file to create your Design System.",
                  }),
                  (0, er.jsxs)("p", {
                    children: [
                      "Include variables like",
                      " ",
                      (0, er.jsx)("code", {
                        className:
                          "font-mono bg-v0-gray-300 px-1 py-0.5 rounded text-sm",
                        children: "--primary",
                      }),
                      " ",
                      "and",
                      " ",
                      (0, er.jsx)("code", {
                        className:
                          "font-mono bg-v0-gray-300 px-1 py-0.5 rounded text-sm",
                        children: "--background",
                      }),
                      " ",
                      "following the",
                      " ",
                      (0, er.jsx)(ey.Link, {
                        className: "underline underline-offset-4",
                        href: "https://ui.shadcn.com/docs/theming#convention",
                        target: "_blank",
                        children: "shadcn convention",
                      }),
                      ". Drag & drop or paste your CSS to get started.",
                    ],
                  }),
                ],
              }),
            ],
          }),
          (0, er.jsx)(es.ModalContent, {
            children: (0, er.jsxs)("div", {
              className: "space-y-4",
              children: [
                (0, er.jsx)("input", {
                  ref: l,
                  type: "file",
                  accept: ".css",
                  onChange: v,
                  className: "hidden",
                }),
                (0, er.jsxs)("div", {
                  ref: p,
                  onDragEnter: m,
                  onDragLeave: f,
                  onDragOver: g,
                  onDrop: x,
                  className: (0, ef.cn)(
                    "relative rounded-md transition-all duration-200",
                    h &&
                      "bg-v0-gray-100 ring-2 ring-v0-gray-500 ring-offset-2 scale-[1.01]",
                  ),
                  children: [
                    h &&
                      (0, er.jsx)("div", {
                        className:
                          "absolute inset-0 z-10 flex items-center justify-center rounded-md bg-v0-background-100/95 backdrop-blur-sm",
                        children: (0, er.jsx)("div", {
                          className: "text-center",
                          children: (0, er.jsx)("p", {
                            className: "text-sm font-medium",
                            children: "Drop your CSS file here",
                          }),
                        }),
                      }),
                    (0, er.jsxs)("div", {
                      className: "space-y-2",
                      children: [
                        (0, er.jsx)(ea.Textarea, {
                          ref: o,
                          autoFocus: !0,
                          placeholder: y,
                          className: (0, ef.cn)(
                            "min-h-[300px] font-mono text-sm",
                            r &&
                              "border-v0-red-700 focus-visible:border-v0-red-700",
                          ),
                          value: t,
                          onChange: (e) => {
                            (n(e.target.value), r && i(void 0));
                          },
                        }),
                        r &&
                          (0, er.jsx)("p", {
                            className: "text-xs text-v0-red-700",
                            children: r,
                          }),
                      ],
                    }),
                  ],
                }),
                (0, er.jsxs)("div", {
                  className: "flex gap-2 justify-end mt-4",
                  children: [
                    (0, er.jsx)(ei.Button, {
                      variant: "ghost",
                      onClick: u,
                      size: "sm",
                      children: "Cancel",
                    }),
                    (0, er.jsx)(em.SpinnerButton, {
                      pending: s,
                      onClick: c,
                      size: "sm",
                      children: "Import",
                    }),
                  ],
                }),
              ],
            }),
          }),
        ],
      });
    }
  },
  494713,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = n;
    function i(e, [t, n]) {
      return Math.min(n, Math.max(t, e));
    }
    var s = e.i(775453),
      a = e.i(221977),
      o = e.i(359687),
      l = e.i(975946),
      c = e.i(273311),
      u = e.i(609297),
      d = e.i(274662),
      h = e.i(590285),
      p = e.i(610902),
      m = t,
      f = ["PageUp", "PageDown"],
      g = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"],
      x = {
        "from-left": ["Home", "PageDown", "ArrowDown", "ArrowLeft"],
        "from-right": ["Home", "PageDown", "ArrowDown", "ArrowRight"],
        "from-bottom": ["Home", "PageDown", "ArrowDown", "ArrowLeft"],
        "from-top": ["Home", "PageDown", "ArrowUp", "ArrowLeft"],
      },
      v = "Slider",
      [y, b, j] = (0, p.createCollection)(v),
      [w, C] = (0, o.createContextScope)(v, [j]),
      [k, S] = w(v),
      N = r.forwardRef((e, t) => {
        let {
            name: n,
            min: a = 0,
            max: o = 100,
            step: c = 1,
            orientation: u = "horizontal",
            disabled: d = !1,
            minStepsBetweenThumbs: h = 0,
            defaultValue: p = [a],
            value: x,
            onValueChange: v = () => {},
            onValueCommit: b = () => {},
            inverted: j = !1,
            form: w,
            ...C
          } = e,
          S = r.useRef(new Set()),
          N = r.useRef(0),
          E = "horizontal" === u ? D : I,
          [A = [], M] = (0, l.useControllableState)({
            prop: x,
            defaultProp: p,
            onChange: (e) => {
              let t = [...S.current];
              (t[N.current]?.focus(), v(e));
            },
          }),
          T = r.useRef(A);
        function L(e) {
          let t = U(A, e);
          F(e, t);
        }
        function P(e) {
          F(e, N.current);
        }
        function R() {
          let e = T.current[N.current];
          A[N.current] !== e && b(A);
        }
        function F(e, t, { commit: n } = { commit: !1 }) {
          let r = K(c),
            s = i(Y(Math.round((e - a) / c) * c + a, r), [a, o]);
          M((e = []) => {
            let r = z(e, s, t);
            if (!q(r, h * c)) return e;
            {
              N.current = r.indexOf(s);
              let t = String(r) !== String(e);
              return (t && n && b(r), t ? r : e);
            }
          });
        }
        return (0, m.jsx)(k, {
          scope: e.__scopeSlider,
          name: n,
          disabled: d,
          min: a,
          max: o,
          valueIndexToChangeRef: N,
          thumbs: S.current,
          values: A,
          orientation: u,
          form: w,
          children: (0, m.jsx)(y.Provider, {
            scope: e.__scopeSlider,
            children: (0, m.jsx)(y.Slot, {
              scope: e.__scopeSlider,
              children: (0, m.jsx)(E, {
                "aria-disabled": d,
                "data-disabled": d ? "" : void 0,
                ...C,
                ref: t,
                onPointerDown: (0, s.composeEventHandlers)(
                  C.onPointerDown,
                  () => {
                    d || (T.current = A);
                  },
                ),
                min: a,
                max: o,
                inverted: j,
                onSlideStart: d ? void 0 : L,
                onSlideMove: d ? void 0 : P,
                onSlideEnd: d ? void 0 : R,
                onHomeKeyDown: () => !d && F(a, 0, { commit: !0 }),
                onEndKeyDown: () => !d && F(o, A.length - 1, { commit: !0 }),
                onStepKeyDown: ({ event: e, direction: t }) => {
                  if (!d) {
                    let n =
                        f.includes(e.key) || (e.shiftKey && g.includes(e.key))
                          ? 10
                          : 1,
                      r = N.current;
                    F(A[r] + c * n * t, r, { commit: !0 });
                  }
                },
              }),
            }),
          }),
        });
      });
    N.displayName = v;
    var [E, A] = w(v, {
        startEdge: "left",
        endEdge: "right",
        size: "width",
        direction: 1,
      }),
      D = r.forwardRef((e, t) => {
        let {
            min: n,
            max: i,
            dir: s,
            inverted: o,
            onSlideStart: l,
            onSlideMove: u,
            onSlideEnd: d,
            onStepKeyDown: h,
            ...p
          } = e,
          [f, g] = r.useState(null),
          v = (0, a.useComposedRefs)(t, (e) => g(e)),
          y = r.useRef(void 0),
          b = (0, c.useDirection)(s),
          j = "ltr" === b,
          w = (j && !o) || (!j && o);
        function C(e) {
          let t = y.current || f.getBoundingClientRect(),
            r = Z([0, t.width], w ? [n, i] : [i, n]);
          return ((y.current = t), r(e - t.left));
        }
        return (0, m.jsx)(E, {
          scope: e.__scopeSlider,
          startEdge: w ? "left" : "right",
          endEdge: w ? "right" : "left",
          direction: w ? 1 : -1,
          size: "width",
          children: (0, m.jsx)(M, {
            dir: b,
            "data-orientation": "horizontal",
            ...p,
            ref: v,
            style: {
              ...p.style,
              "--radix-slider-thumb-transform": "translateX(-50%)",
            },
            onSlideStart: (e) => {
              let t = C(e.clientX);
              l?.(t);
            },
            onSlideMove: (e) => {
              let t = C(e.clientX);
              u?.(t);
            },
            onSlideEnd: () => {
              ((y.current = void 0), d?.());
            },
            onStepKeyDown: (e) => {
              let t = x[w ? "from-left" : "from-right"].includes(e.key);
              h?.({ event: e, direction: t ? -1 : 1 });
            },
          }),
        });
      }),
      I = r.forwardRef((e, t) => {
        let {
            min: n,
            max: i,
            inverted: s,
            onSlideStart: o,
            onSlideMove: l,
            onSlideEnd: c,
            onStepKeyDown: u,
            ...d
          } = e,
          h = r.useRef(null),
          p = (0, a.useComposedRefs)(t, h),
          f = r.useRef(void 0),
          g = !s;
        function v(e) {
          let t = f.current || h.current.getBoundingClientRect(),
            r = Z([0, t.height], g ? [i, n] : [n, i]);
          return ((f.current = t), r(e - t.top));
        }
        return (0, m.jsx)(E, {
          scope: e.__scopeSlider,
          startEdge: g ? "bottom" : "top",
          endEdge: g ? "top" : "bottom",
          size: "height",
          direction: g ? 1 : -1,
          children: (0, m.jsx)(M, {
            "data-orientation": "vertical",
            ...d,
            ref: p,
            style: {
              ...d.style,
              "--radix-slider-thumb-transform": "translateY(50%)",
            },
            onSlideStart: (e) => {
              let t = v(e.clientY);
              o?.(t);
            },
            onSlideMove: (e) => {
              let t = v(e.clientY);
              l?.(t);
            },
            onSlideEnd: () => {
              ((f.current = void 0), c?.());
            },
            onStepKeyDown: (e) => {
              let t = x[g ? "from-bottom" : "from-top"].includes(e.key);
              u?.({ event: e, direction: t ? -1 : 1 });
            },
          }),
        });
      }),
      M = r.forwardRef((e, t) => {
        let {
            __scopeSlider: n,
            onSlideStart: r,
            onSlideMove: i,
            onSlideEnd: a,
            onHomeKeyDown: o,
            onEndKeyDown: l,
            onStepKeyDown: c,
            ...u
          } = e,
          d = S(v, n);
        return (0, m.jsx)(h.Primitive.span, {
          ...u,
          ref: t,
          onKeyDown: (0, s.composeEventHandlers)(e.onKeyDown, (e) => {
            "Home" === e.key
              ? (o(e), e.preventDefault())
              : "End" === e.key
                ? (l(e), e.preventDefault())
                : f.concat(g).includes(e.key) && (c(e), e.preventDefault());
          }),
          onPointerDown: (0, s.composeEventHandlers)(e.onPointerDown, (e) => {
            let t = e.target;
            (t.setPointerCapture(e.pointerId),
              e.preventDefault(),
              d.thumbs.has(t) ? t.focus() : r(e));
          }),
          onPointerMove: (0, s.composeEventHandlers)(e.onPointerMove, (e) => {
            e.target.hasPointerCapture(e.pointerId) && i(e);
          }),
          onPointerUp: (0, s.composeEventHandlers)(e.onPointerUp, (e) => {
            let t = e.target;
            t.hasPointerCapture(e.pointerId) &&
              (t.releasePointerCapture(e.pointerId), a(e));
          }),
        });
      }),
      T = "SliderTrack",
      L = r.forwardRef((e, t) => {
        let { __scopeSlider: n, ...r } = e,
          i = S(T, n);
        return (0, m.jsx)(h.Primitive.span, {
          "data-disabled": i.disabled ? "" : void 0,
          "data-orientation": i.orientation,
          ...r,
          ref: t,
        });
      });
    L.displayName = T;
    var P = "SliderRange",
      R = r.forwardRef((e, t) => {
        let { __scopeSlider: n, ...i } = e,
          s = S(P, n),
          o = A(P, n),
          l = r.useRef(null),
          c = (0, a.useComposedRefs)(t, l),
          u = s.values.length,
          d = s.values.map((e) => H(e, s.min, s.max)),
          p = u > 1 ? Math.min(...d) : 0,
          f = 100 - Math.max(...d);
        return (0, m.jsx)(h.Primitive.span, {
          "data-orientation": s.orientation,
          "data-disabled": s.disabled ? "" : void 0,
          ...i,
          ref: c,
          style: { ...e.style, [o.startEdge]: p + "%", [o.endEdge]: f + "%" },
        });
      });
    R.displayName = P;
    var F = "SliderThumb",
      _ = r.forwardRef((e, t) => {
        let n = b(e.__scopeSlider),
          [i, s] = r.useState(null),
          o = (0, a.useComposedRefs)(t, (e) => s(e)),
          l = r.useMemo(
            () => (i ? n().findIndex((e) => e.ref.current === i) : -1),
            [n, i],
          );
        return (0, m.jsx)(O, { ...e, ref: o, index: l });
      }),
      O = r.forwardRef((e, t) => {
        let { __scopeSlider: n, index: i, name: o, ...l } = e,
          c = S(F, n),
          u = A(F, n),
          [p, f] = r.useState(null),
          g = (0, a.useComposedRefs)(t, (e) => f(e)),
          x = !p || c.form || !!p.closest("form"),
          v = (0, d.useSize)(p),
          b = c.values[i],
          j = void 0 === b ? 0 : H(b, c.min, c.max),
          w = $(i, c.values.length),
          C = v?.[u.size],
          k = C ? G(C, j, u.direction) : 0;
        return (
          r.useEffect(() => {
            if (p)
              return (
                c.thumbs.add(p),
                () => {
                  c.thumbs.delete(p);
                }
              );
          }, [p, c.thumbs]),
          (0, m.jsxs)("span", {
            style: {
              transform: "var(--radix-slider-thumb-transform)",
              position: "absolute",
              [u.startEdge]: `calc(${j}% + ${k}px)`,
            },
            children: [
              (0, m.jsx)(y.ItemSlot, {
                scope: e.__scopeSlider,
                children: (0, m.jsx)(h.Primitive.span, {
                  role: "slider",
                  "aria-label": e["aria-label"] || w,
                  "aria-valuemin": c.min,
                  "aria-valuenow": b,
                  "aria-valuemax": c.max,
                  "aria-orientation": c.orientation,
                  "data-orientation": c.orientation,
                  "data-disabled": c.disabled ? "" : void 0,
                  tabIndex: c.disabled ? void 0 : 0,
                  ...l,
                  ref: g,
                  style: void 0 === b ? { display: "none" } : e.style,
                  onFocus: (0, s.composeEventHandlers)(e.onFocus, () => {
                    c.valueIndexToChangeRef.current = i;
                  }),
                }),
              }),
              x &&
                (0, m.jsx)(
                  V,
                  {
                    name:
                      o ??
                      (c.name
                        ? c.name + (c.values.length > 1 ? "[]" : "")
                        : void 0),
                    form: c.form,
                    value: b,
                  },
                  i,
                ),
            ],
          })
        );
      });
    _.displayName = F;
    var B = "RadioBubbleInput",
      V = r.forwardRef(({ __scopeSlider: e, value: t, ...n }, i) => {
        let s = r.useRef(null),
          o = (0, a.useComposedRefs)(s, i),
          l = (0, u.usePrevious)(t);
        return (
          r.useEffect(() => {
            let e = s.current;
            if (!e) return;
            let n = Object.getOwnPropertyDescriptor(
              window.HTMLInputElement.prototype,
              "value",
            ).set;
            if (l !== t && n) {
              let r = new Event("input", { bubbles: !0 });
              (n.call(e, t), e.dispatchEvent(r));
            }
          }, [l, t]),
          (0, m.jsx)(h.Primitive.input, {
            style: { display: "none" },
            ...n,
            ref: o,
            defaultValue: t,
          })
        );
      });
    function z(e = [], t, n) {
      let r = [...e];
      return ((r[n] = t), r.sort((e, t) => e - t));
    }
    function H(e, t, n) {
      return i((100 / (n - t)) * (e - t), [0, 100]);
    }
    function $(e, t) {
      return t > 2
        ? `Value ${e + 1} of ${t}`
        : 2 === t
          ? ["Minimum", "Maximum"][e]
          : void 0;
    }
    function U(e, t) {
      if (1 === e.length) return 0;
      let n = e.map((e) => Math.abs(e - t)),
        r = Math.min(...n);
      return n.indexOf(r);
    }
    function G(e, t, n) {
      let r = e / 2,
        i = Z([0, 50], [0, r]);
      return (r - i(t) * n) * n;
    }
    function W(e) {
      return e.slice(0, -1).map((t, n) => e[n + 1] - t);
    }
    function q(e, t) {
      return !(t > 0) || Math.min(...W(e)) >= t;
    }
    function Z(e, t) {
      return (n) => {
        if (e[0] === e[1] || t[0] === t[1]) return t[0];
        let r = (t[1] - t[0]) / (e[1] - e[0]);
        return t[0] + r * (n - e[0]);
      };
    }
    function K(e) {
      return (String(e).split(".")[1] || "").length;
    }
    function Y(e, t) {
      let n = Math.pow(10, t);
      return Math.round(e * n) / n;
    }
    V.displayName = B;
    var J = N,
      Q = L,
      X = R,
      ee = _,
      et = e.i(304649);
    function en({
      className: e,
      defaultValue: r,
      value: i,
      min: s = 0,
      max: a = 100,
      ...o
    }) {
      let l = n.useMemo(
        () => (Array.isArray(i) ? i : Array.isArray(r) ? r : [s, a]),
        [i, r, s, a],
      );
      return (0, t.jsxs)(J, {
        "data-slot": "slider",
        defaultValue: r,
        value: i,
        min: s,
        max: a,
        className: (0, et.cn)(
          "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
          e,
        ),
        ...o,
        children: [
          (0, t.jsx)(Q, {
            "data-slot": "slider-track",
            className:
              "bg-v0-gray-200 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",
            children: (0, t.jsx)(X, {
              "data-slot": "slider-range",
              className:
                "bg-v0-blue-700 absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full",
            }),
          }),
          Array.from({ length: l.length }, (e, n) =>
            (0, t.jsx)(
              ee,
              {
                "data-slot": "slider-thumb",
                className:
                  "rounded-[1px] cursor-pointer bg-v0-background-100 ring-ring/50 block w-1.5 h-3.5 shrink-0 shadow-sm transition-[color,box-shadow] hover:ring-2 focus-visible:ring-2 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50",
              },
              n,
            ),
          ),
        ],
      });
    }
    e.s(["Slider", () => en], 494713);
  },
  760227,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(`<g clip-path="url(#clip0_1529_2727)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M1.8627 7.61014C2.83103 7.22281 4.11733 7 5.5 7C6.88267 7 8.16897 7.22281 9.1373 7.61014C9.61938 7.80297 10.0598 8.05135 10.3921 8.36552C10.7258 8.68119 11 9.11499 11 9.65V13.35C11 13.8859 10.7347 14.3259 10.3979 14.6514C10.0646 14.9735 9.62194 15.226 9.1373 15.4199C8.1672 15.8079 6.88111 16.0199 5.5 16.0001C4.11889 16.0199 2.8328 15.8079 1.8627 15.4199C1.37806 15.226 0.935392 14.9735 0.602056 14.6514C0.265315 14.3259 0 13.8859 0 13.35V9.65C0 9.11499 0.274157 8.68119 0.607948 8.36552C0.940154 8.05135 1.38062 7.80297 1.8627 7.61014ZM1.5 9.65088V9.65L1.5 9.64998C1.49997 9.64935 1.49947 9.63747 1.5142 9.60866C1.53081 9.57621 1.56658 9.52347 1.63861 9.45535C1.78713 9.31489 2.04229 9.15385 2.41979 9.00285C3.17062 8.70252 4.25931 8.5 5.5 8.5C6.74069 8.5 7.82938 8.70252 8.58021 9.00285C8.95771 9.15385 9.21287 9.31489 9.36139 9.45535C9.43342 9.52347 9.46919 9.57621 9.4858 9.60866C9.50054 9.63747 9.50003 9.64935 9.5 9.64998L9.5 9.65C9.5 9.65002 9.50002 9.65031 9.5 9.65089M1.5 11.5298V13.35C1.5 13.3588 1.50052 13.4336 1.6445 13.5728C1.79189 13.7152 2.04485 13.8772 2.41979 14.0271C3.16618 14.3257 4.25066 14.519 5.48857 14.5001L5.5 14.4999L5.51143 14.5001C6.74934 14.519 7.83382 14.3257 8.58021 14.0271C8.95515 13.8772 9.20811 13.7152 9.3555 13.5728C9.49948 13.4336 9.5 13.3588 9.5 13.35V11.5298C9.38261 11.587 9.26133 11.6402 9.1373 11.6899C8.16897 12.0772 6.88267 12.3 5.5 12.3C4.11733 12.3 2.83103 12.0772 1.8627 11.6899C1.73867 11.6402 1.61739 11.587 1.5 11.5298ZM9.5 9.65089C9.49989 9.65411 9.49857 9.66636 9.4858 9.69134C9.46919 9.72379 9.43342 9.77653 9.36139 9.84465C9.21287 9.98511 8.95771 10.1461 8.58021 10.2971C7.82938 10.5975 6.74069 10.8 5.5 10.8C4.25931 10.8 3.17062 10.5975 2.41979 10.2971C2.04229 10.1461 1.78713 9.98511 1.63861 9.84465C1.56658 9.77653 1.53081 9.72379 1.5142 9.69134C1.50143 9.66636 1.50011 9.65411 1.5 9.65088" fill="currentColor" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.8627 0.61014C7.83103 0.222808 9.11733 0 10.5 0C11.8827 0 13.169 0.222808 14.1373 0.61014C14.6194 0.802973 15.0598 1.05135 15.3921 1.36552C15.7258 1.68119 16 2.11499 16 2.65V6.35C16 6.90413 15.746 7.35093 15.4245 7.67984C15.1106 8.00089 14.7088 8.23745 14.3171 8.41033C13.5387 8.75385 12.6231 8.92251 12 8.92251V7.42251C12.415 7.42251 13.1243 7.29715 13.7115 7.03804C14.0025 6.90961 14.2185 6.76769 14.3518 6.63129C14.4775 6.50275 14.5 6.41311 14.5 6.35V4.52982C14.3826 4.58696 14.2613 4.64025 14.1373 4.68986C13.169 5.07719 11.8827 5.3 10.5 5.3C9.11733 5.3 7.83103 5.07719 6.8627 4.68986C6.73867 4.64025 6.61739 4.58696 6.5 4.52982V5.5H5V2.65C5 2.11499 5.27416 1.68119 5.60795 1.36552C5.94015 1.05135 6.38062 0.802973 6.8627 0.61014ZM6.5 2.65088V2.65L6.5 2.64998C6.49997 2.64935 6.49947 2.63747 6.5142 2.60866C6.53081 2.57621 6.56658 2.52347 6.63861 2.45535C6.78713 2.31489 7.04229 2.15385 7.41979 2.00285C8.17062 1.70252 9.25931 1.5 10.5 1.5C11.7407 1.5 12.8294 1.70252 13.5802 2.00285C13.9577 2.15385 14.2129 2.31489 14.3614 2.45535C14.4334 2.52347 14.4692 2.57621 14.4858 2.60866C14.5005 2.63747 14.5 2.64935 14.5 2.64998L14.5 2.65C14.5 2.65002 14.5 2.65031 14.5 2.65089M6.5 2.65088C6.50011 2.65411 6.50143 2.66636 6.5142 2.69134C6.53081 2.72379 6.56658 2.77653 6.63861 2.84465C6.78713 2.98511 7.04229 3.14615 7.41979 3.29715C8.17062 3.59748 9.25931 3.8 10.5 3.8C11.7407 3.8 12.8294 3.59748 13.5802 3.29715C13.9577 3.14615 14.2129 2.98511 14.3614 2.84465C14.4334 2.77653 14.4692 2.72379 14.4858 2.69134C14.4986 2.66636 14.4999 2.65411 14.5 2.65089" fill="currentColor" />
  </g>
  <defs>
  <clipPath id="clip0_1529_2727">
  <rect width="16" height="16" fill="white" />
  </clipPath>
  </defs>`);
    e.s(["Coins", 0, t]);
  },
  821300,
  825877,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M13 1.5H3V4H13V1.5ZM3 13.5V5.25H13V13.5C13 14.0523 12.5523 14.5 12 14.5H4C3.44772 14.5 3 14.0523 3 13.5ZM3 0H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H12C13.3807 16 14.5 14.8807 14.5 13.5V1.5V0H13H3ZM5.25 8C5.66421 8 6 7.66421 6 7.25C6 6.83579 5.66421 6.5 5.25 6.5C4.83579 6.5 4.5 6.83579 4.5 7.25C4.5 7.66421 4.83579 8 5.25 8ZM5.25 10.5C5.66421 10.5 6 10.1642 6 9.75C6 9.33579 5.66421 9 5.25 9C4.83579 9 4.5 9.33579 4.5 9.75C4.5 10.1642 4.83579 10.5 5.25 10.5ZM6 12.5C6 12.9142 5.66421 13.25 5.25 13.25C4.83579 13.25 4.5 12.9142 4.5 12.5C4.5 12.0858 4.83579 11.75 5.25 11.75C5.66421 11.75 6 12.0858 6 12.5ZM8 8C8.41421 8 8.75 7.66421 8.75 7.25C8.75 6.83579 8.41421 6.5 8 6.5C7.58579 6.5 7.25 6.83579 7.25 7.25C7.25 7.66421 7.58579 8 8 8ZM8.75 9.75C8.75 10.1642 8.41421 10.5 8 10.5C7.58579 10.5 7.25 10.1642 7.25 9.75C7.25 9.33579 7.58579 9 8 9C8.41421 9 8.75 9.33579 8.75 9.75ZM8 13.25C8.41421 13.25 8.75 12.9142 8.75 12.5C8.75 12.0858 8.41421 11.75 8 11.75C7.58579 11.75 7.25 12.0858 7.25 12.5C7.25 12.9142 7.58579 13.25 8 13.25ZM11.5 7.25C11.5 7.66421 11.1642 8 10.75 8C10.3358 8 10 7.66421 10 7.25C10 6.83579 10.3358 6.5 10.75 6.5C11.1642 6.5 11.5 6.83579 11.5 7.25ZM10.75 10.5C11.1642 10.5 11.5 10.1642 11.5 9.75C11.5 9.33579 11.1642 9 10.75 9C10.3358 9 10 9.33579 10 9.75C10 10.1642 10.3358 10.5 10.75 10.5ZM11.5 12.5C11.5 12.9142 11.1642 13.25 10.75 13.25C10.3358 13.25 10 12.9142 10 12.5C10 12.0858 10.3358 11.75 10.75 11.75C11.1642 11.75 11.5 12.0858 11.5 12.5Z" fill="currentColor"/>',
    );
    e.s(["Calculator", 0, t], 821300);
    var n = e.i(324834);
    let r = () =>
      (0, n.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, n.jsxs)("g", {
            clipPath: "url(#clip0_983_23)",
            children: [
              (0, n.jsx)("path", {
                d: "M14.6458 5H1.35417C1.02049 5 0.75 5.29848 0.75 5.66667V8.33333C0.75 8.70152 1.02049 9 1.35417 9H14.6458C14.9795 9 15.25 8.70152 15.25 8.33333V5.66667C15.25 5.29848 14.9795 5 14.6458 5Z",
                stroke: "currentColor",
                strokeWidth: "1.5",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
              (0, n.jsx)("path", {
                d: "M14.25 9V14.625C14.25 14.7908 14.1842 14.9497 14.0669 15.0669C13.9497 15.1842 13.7908 15.25 13.625 15.25H2.375C2.20924 15.25 2.05027 15.1842 1.93306 15.0669C1.81585 14.9497 1.75 14.7908 1.75 14.625V9",
                stroke: "currentColor",
                strokeWidth: "1.5",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
              (0, n.jsx)("path", {
                d: "M8 5.25V15.25",
                stroke: "currentColor",
                strokeWidth: "1.5",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
              (0, n.jsx)("path", {
                d: "M11.7026 1.29737C12.4114 2.00617 12.4532 3.19915 11.7026 3.86394C10.4193 5 8 5 8 5C8 5 8 2.58065 9.13834 1.29737C9.80085 0.546824 10.9938 0.588563 11.7026 1.29737Z",
                stroke: "currentColor",
                strokeWidth: "1.5",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
              (0, n.jsx)("path", {
                d: "M4.29737 1.29737C3.58856 2.00617 3.54682 3.19915 4.29737 3.86394C5.58065 5 8 5 8 5C8 5 8 2.58065 6.86166 1.29737C6.19915 0.546824 5.00617 0.588563 4.29737 1.29737Z",
                stroke: "currentColor",
                strokeWidth: "1.5",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
            ],
          }),
          (0, n.jsx)("defs", {
            children: (0, n.jsx)("clipPath", {
              id: "clip0_983_23",
              children: (0, n.jsx)("rect", {
                width: "16",
                height: "16",
                fill: "white",
              }),
            }),
          }),
        ],
      });
    e.s(["GiftIcon", 0, r], 825877);
  },
  803342,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(230657),
      i = e.i(304649);
    let s = n.forwardRef(({ className: e, value: n, ...s }, a) =>
      (0, t.jsx)(r.Root, {
        ref: a,
        className: (0, i.cn)(
          "bg-secondary relative h-4 w-full overflow-hidden rounded-full",
          e,
        ),
        ...s,
        children: (0, t.jsx)(r.Indicator, {
          className:
            "h-full w-full flex-1 rounded-r-full bg-v0-teal-700 transition-all",
          style: { transform: `translateX(-${100 - (n || 0)}%)` },
        }),
      }),
    );
    ((s.displayName = r.Root.displayName), e.s(["Progress", () => s]));
  },
  775846,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(431141),
      i = e.i(176248),
      s = e.i(686832),
      a = e.i(763480),
      o = e.i(707974),
      l = e.i(494713),
      c = e.i(120945),
      u = e.i(515734),
      d = e.i(504066);
    e.i(563948);
    var h = e.i(407562),
      p = e.i(37737),
      m = e.i(576949),
      f = e.i(821300),
      g = e.i(760227),
      x = e.i(605177),
      v = e.i(581965),
      y = e.i(926297),
      b = e.i(293475),
      j = e.i(825877),
      w = e.i(803342),
      C = e.i(304649),
      k = e.i(53223);
    let S = (e) => {
        let t = e.replace(/\D/g, "");
        return "" === t ? 0 : parseInt(t, 10);
      },
      N = (e, t, n) => Math.min(Math.max(e, t), n);
    function E() {
      let { link: e, affiliate: p } = (0, u.useReferralLink)(),
        [j, C] = (0, n.useState)("share"),
        E = 5,
        A = 20,
        [D, I] = (0, n.useState)(12),
        [M, T] = (0, n.useState)(7),
        L = D * E + M * A,
        { copyToClipboard: P } = (0, d.useCopyToClipboard)({ timeout: 2e3 }),
        R = async () => {
          ((0, k.track)("CopyEarnLink", { link: e }),
            await P(e),
            h.toast.success(
              p ? "Affiliate referral link copied!" : "Referral link copied!",
            ));
        },
        { currentEarnings: F, maxEarnings: _ } = (0, u.useReferralEarnings)(),
        O = Math.max(3, (F / _) * 100),
        B = (0, t.jsxs)(t.Fragment, {
          children: [
            (0, t.jsxs)(s.ModalHeader, {
              className: "relative",
              children: [
                (0, t.jsxs)("div", {
                  className:
                    "relative w-full h-40 md:h-48 overflow-hidden rounded-md -mt-12 -mb-16 flex items-center justify-center",
                  children: [
                    (0, t.jsx)(r.default, {
                      src: "/chat-static/assets/referrals/diamond.png",
                      alt: "Diamond",
                      width: 95,
                      height: 95,
                      unoptimized: !0,
                      className: "mx-auto dark:hidden",
                    }),
                    (0, t.jsx)(r.default, {
                      src: "/chat-static/assets/referrals/diamond-dark.png",
                      alt: "Diamond",
                      width: 95,
                      height: 95,
                      unoptimized: !0,
                      className: "mx-auto hidden dark:block",
                    }),
                  ],
                }),
                (0, t.jsx)(s.ModalTitle, {
                  className:
                    "relative z-10 text-center sm:!text-[32px] min-h-[40px] flex items-center justify-center",
                  children: p ? "Share & Earn" : "Invite & earn $200/month",
                }),
              ],
            }),
            (0, t.jsxs)(s.ModalContent, {
              children: [
                (0, t.jsx)("div", {
                  className: "mb-2",
                  children: (0, t.jsxs)("div", {
                    className: "relative",
                    children: [
                      (0, t.jsxs)("div", {
                        className: "relative h-8 rounded-full p-0.5",
                        style: {
                          background: `linear-gradient(0deg, var(--v0-Background-100), var(--v0-Background-100),
                        linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.05) 100%)`,
                          border:
                            "1px solid var(--v0-alpha-300, rgba(0, 0, 0, 0.1))",
                          boxShadow:
                            "0px 6px 14px 0px rgba(0, 0, 0, 0.08) inset",
                        },
                        children: [
                          (0, t.jsxs)("div", {
                            className: "h-full w-full relative",
                            children: [
                              (0, t.jsx)(w.Progress, {
                                value: O,
                                className: "h-full [&>div]:!bg-transparent",
                              }),
                              (0, t.jsx)("div", {
                                className: `absolute inset-0 ${F >= _ ? "rounded-full" : "rounded-l-full"}`,
                                style: {
                                  background: `linear-gradient(0deg, var(--V0-Blue-700, #0070F3), var(--V0-Blue-700, #0070F3)),
                            linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.1) 63.46%, rgba(0, 0, 0, 0.2) 100%)`,
                                  border: "1px solid var(rgba(0, 0, 0, 0.1))",
                                  boxShadow: `0px -4px 20px 0px rgba(0, 0, 0, 0.25) inset,
                            0px 3px 12px 0px rgba(255, 255, 255, 0.5) inset,
                            0px -1px 2px 0px rgba(0, 0, 0, 0.25) inset`,
                                  width: `${O}%`,
                                  transition: "width 500ms ease-out",
                                },
                              }),
                            ],
                          }),
                          (0, t.jsx)("div", {
                            className: `absolute inset-0 flex items-center ${O < 33.33 ? "justify-center" : O < 66.67 ? "justify-end pr-4" : "justify-start pl-4"}`,
                            children:
                              F > 0
                                ? (0, t.jsxs)("span", {
                                    className: `text-sm font-mono font-normal ${O >= 66.67 ? "text-white" : "text-v0-gray-900"}`,
                                    children: [
                                      "$",
                                      Math.max(_ - F, 0),
                                      " to go",
                                    ],
                                  })
                                : (0, t.jsx)("span", {
                                    className:
                                      "text-xs font-mono font-normal text-zinc-500 dark:text-zinc-400",
                                    children:
                                      "Track your monthly progress here",
                                  }),
                          }),
                        ],
                      }),
                      (0, t.jsxs)("div", {
                        className: "flex justify-between mt-2 relative",
                        children: [
                          (0, t.jsx)("span", {
                            className:
                              "text-sm font-medium font-mono text-v0-gray-1000",
                            children: "$0",
                          }),
                          (0, t.jsxs)("span", {
                            className:
                              "text-sm font-medium font-mono text-v0-gray-1000",
                            children: ["$", _],
                          }),
                          F > 0 &&
                            O > 15 &&
                            O < 85 &&
                            (0, t.jsxs)("div", {
                              className:
                                "absolute transform -translate-x-1/2 transition-all duration-500",
                              style: { left: `${O}%` },
                              children: [
                                (0, t.jsx)("div", {
                                  className:
                                    "w-0 h-0 border-l-[4px] border-r-[4px] border-b-[3px] border-transparent border-b-v0-blue-800 mx-auto -top-0.5 relative",
                                }),
                                (0, t.jsxs)("div", {
                                  className:
                                    "text-v0-blue-800 text-sm font-medium font-mono text-center -mt-1",
                                  children: ["$", Math.min(F, _)],
                                }),
                              ],
                            }),
                        ],
                      }),
                    ],
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "rounded-xl bg-v0-gray-200/50 p-3 sm:p-4",
                  children: [
                    (0, t.jsx)(o.Label, {
                      className: "text-v0-gray-900",
                      children: "Share your link",
                    }),
                    (0, t.jsxs)("div", {
                      className: "mt-2 relative",
                      children: [
                        (0, t.jsx)(a.Input, {
                          readOnly: !0,
                          value: e,
                          size: "xl",
                          wrapperClassName: "rounded-lg",
                        }),
                        (0, t.jsxs)(i.Button, {
                          onClick: R,
                          size: "sm",
                          className:
                            "absolute right-1 top-1/2 -translate-y-1/2 h-10 px-2 bg-v0-gray-1000 rounded-sm",
                          children: [
                            (0, t.jsx)(x.Copy, {
                              className: "mr-1 h-3 w-3 shrink-0 text-[14px]",
                            }),
                            "Copy",
                          ],
                        }),
                      ],
                    }),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className: "mt-6 text-v0-gray-900",
                  children: [
                    (0, t.jsx)("h3", {
                      className: "text-sm font-medium mb-3",
                      children: "How it works:",
                    }),
                    (0, t.jsxs)("div", {
                      className: "space-y-3",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-3",
                          children: [
                            (0, t.jsx)(y.Link, {
                              className: "h-4 w-4 shrink-0",
                            }),
                            (0, t.jsx)("p", {
                              className: "text-sm",
                              children: p
                                ? "Share your links"
                                : "Copy your link and invite friends",
                            }),
                          ],
                        }),
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-3",
                          children: [
                            (0, t.jsx)(v.Envelope, {
                              className: "h-4 w-4 shrink-0",
                            }),
                            (0, t.jsx)("p", {
                              className: "text-sm",
                              children: p
                                ? "Earn $5 cash per sign-up, they get $5 credits"
                                : (0, t.jsxs)(t.Fragment, {
                                    children: [
                                      "Each ",
                                      (0, t.jsx)("span", {
                                        className: "font-semibold",
                                        children: "signup",
                                      }),
                                      " earns you both $5 credits",
                                    ],
                                  }),
                            }),
                          ],
                        }),
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-3",
                          children: [
                            (0, t.jsx)(b.User, {
                              className: "h-4 w-4 shrink-0",
                            }),
                            (0, t.jsx)("p", {
                              className: "text-sm",
                              children: p
                                ? "Earn 30% per sub, they get $20 credits"
                                : (0, t.jsxs)(t.Fragment, {
                                    children: [
                                      "When they ",
                                      (0, t.jsx)("span", {
                                        className: "font-semibold",
                                        children: "subscribe",
                                      }),
                                      ", you both earn $20 credits",
                                    ],
                                  }),
                            }),
                          ],
                        }),
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-3",
                          children: [
                            (0, t.jsx)(g.Coins, {
                              className: "h-4 w-4 shrink-0",
                            }),
                            (0, t.jsx)("p", {
                              className: "text-sm",
                              children: p
                                ? "Track in Dub.co, users get credits in personal scope"
                                : "Credits apply to your personal scope",
                            }),
                          ],
                        }),
                      ],
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "flex justify-center mt-4",
                  children: (0, t.jsxs)(i.Button, {
                    variant: "ghost",
                    className: "text-v0-gray-900 hover:text-v0-gray-1000",
                    onClick: (e) => {
                      (e.preventDefault(), C("calc"));
                    },
                    children: [
                      (0, t.jsx)(f.Calculator, { className: "h-4 w-4" }),
                      "Run the numbers",
                    ],
                  }),
                }),
              ],
            }),
          ],
        }),
        V = (0, t.jsxs)(t.Fragment, {
          children: [
            (0, t.jsxs)(s.ModalHeader, {
              className: "relative",
              children: [
                (0, t.jsx)("button", {
                  onClick: (e) => {
                    (e.preventDefault(), C("share"));
                  },
                  className:
                    "absolute left-3 top-3 z-20 flex h-8 w-8 items-center justify-center rounded-full hover:bg-v0-gray-alpha-100 transition-colors",
                  "aria-label": "Back to share",
                  children: (0, t.jsx)(m.ArrowLeft, {
                    className: "h-5 w-5 text-v0-gray-1000",
                  }),
                }),
                (0, t.jsxs)("div", {
                  className:
                    "relative w-full h-40 md:h-48 overflow-hidden rounded-md -mt-12 -mb-16 flex items-center justify-center",
                  children: [
                    (0, t.jsx)(r.default, {
                      src: "/chat-static/assets/referrals/calculator.png",
                      alt: "Calculator",
                      width: 95,
                      height: 95,
                      unoptimized: !0,
                      className: "mx-auto dark:hidden",
                    }),
                    (0, t.jsx)(r.default, {
                      src: "/chat-static/assets/referrals/calculator-dark.png",
                      alt: "Calculator",
                      width: 95,
                      height: 95,
                      unoptimized: !0,
                      className: "mx-auto hidden dark:block",
                    }),
                  ],
                }),
                (0, t.jsx)(s.ModalTitle, {
                  className:
                    "relative z-10 text-center sm:!text-[32px] min-h-[40px] flex items-center justify-center",
                  children: "See your credits stack",
                }),
              ],
            }),
            (0, t.jsxs)(s.ModalContent, {
              children: [
                (0, t.jsx)("div", {
                  className: "rounded-xl p-4 mb-8",
                  style: {
                    background:
                      "var(--V0-Background-100, rgba(255, 255, 255, 1))",
                    boxShadow:
                      "0px -2px 11px 0px rgba(0, 0, 0, 0.14) inset, 0px -1px 1px 0px rgba(0, 0, 0, 0.25) inset, 0px 12px 20px 0px rgba(0, 0, 0, 0.12)",
                  },
                  children: (0, t.jsxs)("div", {
                    className:
                      "rounded-lg px-4 py-4 text-center text-5xl font-medium relative font-mono",
                    style: {
                      color: "rgba(0, 0, 0, 0.9)",
                      background: `radial-gradient(circle, rgba(0,0,0,0.15) 1px, transparent 1px),
                            linear-gradient(0deg, #D5F7F1, #D5F7F1),
                            linear-gradient(95.9deg, rgba(255, 255, 255, 0) 15.92%, rgba(255, 255, 255, 0.4) 17.3%, rgba(255, 255, 255, 0.4) 22.99%, rgba(255, 255, 255, 0) 25.61%),
                            linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.05) 100%)`,
                      backgroundSize: "12px 12px, 100%, 100%, 100%",
                      boxShadow: "0px 2px 2px 0px rgba(0, 0, 0, 0.16) inset",
                    },
                    children: ["$", L],
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "space-y-4",
                  children: [
                    (0, t.jsxs)("div", {
                      className:
                        "grid grid-cols-[80px_1fr_40px_20px_50px] items-center gap-3 mx-4",
                      children: [
                        (0, t.jsx)(o.Label, {
                          className: "text-v0-gray-1000 text-left",
                          children: "Signups",
                        }),
                        (0, t.jsx)(l.Slider, {
                          value: [D],
                          onValueChange: (e) => {
                            let t = e[0] ?? 0;
                            (I(t), M > t && T(t));
                          },
                          min: 0,
                          max: 40,
                          step: 1,
                          className:
                            "[&>span:first-child]:bg-v0-gray-200 [&>span:first-child>span]:bg-v0-gray-1000",
                        }),
                        (0, t.jsx)(a.Input, {
                          type: "text",
                          inputMode: "numeric",
                          pattern: "[0-9]*",
                          value: D,
                          onChange: (e) => {
                            let t = N(S(e.target.value), 0, 40);
                            (I(t), M > t && T(t));
                          },
                          className: "w-10 h-8 text-center text-sm font-mono",
                          style: { textAlign: "center" },
                        }),
                        (0, t.jsx)("div", {
                          className: "text-center text-v0-gray-600",
                          children: "=",
                        }),
                        (0, t.jsxs)("div", {
                          className: "text-right font-medium text-v0-gray-1000",
                          children: ["$", D * E],
                        }),
                      ],
                    }),
                    (0, t.jsxs)("div", {
                      className:
                        "grid grid-cols-[80px_1fr_40px_20px_50px] items-center gap-3 mx-4",
                      children: [
                        (0, t.jsx)(o.Label, {
                          className: "text-v0-gray-1000 text-left",
                          children: "Subscribers",
                        }),
                        (0, t.jsx)(l.Slider, {
                          value: [Math.min(M, D)],
                          onValueChange: (e) => {
                            T(Math.min(e[0] ?? 0, D, 20));
                          },
                          min: 0,
                          max: 20,
                          step: 1,
                          className:
                            "[&>span:first-child]:bg-v0-gray-200 [&>span:first-child>span]:bg-v0-gray-1000",
                        }),
                        (0, t.jsx)(a.Input, {
                          type: "text",
                          inputMode: "numeric",
                          pattern: "[0-9]*",
                          value: M,
                          onChange: (e) => {
                            T(N(S(e.target.value), 0, Math.min(D, 20)));
                          },
                          className: "w-10 h-8 text-sm font-mono",
                          style: { textAlign: "center" },
                          wrapperClassName: "rounded-md",
                        }),
                        (0, t.jsx)("div", {
                          className: "text-center text-v0-gray-600",
                          children: "=",
                        }),
                        (0, t.jsxs)("div", {
                          className: "text-right font-medium text-v0-gray-1000",
                          children: ["$", M * A],
                        }),
                      ],
                    }),
                    (0, t.jsxs)("p", {
                      className: "text-center text-sm text-v0-gray-900 mt-8",
                      children: [
                        "Offer is for new users only: Signups add $",
                        E,
                        " in credits, subscriptions add $",
                        A,
                        " in credits. Earn a maximum of $200 credits per month.",
                      ],
                    }),
                  ],
                }),
              ],
            }),
          ],
        });
      return (0, t.jsx)(c.AtomicDialog, {
        type: "referral",
        className: "md:!w-[460px] transition-all duration-200",
        children: "share" === j ? B : V,
      });
    }
    function A({ className: e }) {
      return (0, t.jsxs)(i.Button, {
        size: "sm",
        variant: "secondary",
        className: (0, C.cn)("h-7 rounded-md", e),
        onClick: () => (0, p.openDialog)({ type: "referral" }),
        children: [(0, t.jsx)(j.GiftIcon, {}), "Refer"],
      });
    }
    e.s(["ReferralButton", () => A, "ReferralDialog", () => E]);
  },
  93089,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(`<g clip-path="url(#clip0_872_3147)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>
  </g>
  <defs>
  <clipPath id="clip0_872_3147">
  <rect width="16" height="16" fill="white"/>
  </clipPath>
  </defs>`);
    e.s(["LogoGithub", 0, t]);
  },
  700376,
  158518,
  170116,
  621013,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(763480),
      i = e.i(93089),
      s = e.i(441384);
    e.i(472428);
    var a = e.i(296900),
      o = e.i(230766),
      l = e.i(707974),
      c = e.i(576191),
      u = t,
      d = i,
      h = e.i(459522),
      p = e.i(538553),
      m = e.i(592258),
      f = e.i(297239),
      g = c,
      x = e.i(667660),
      v = c;
    e.i(563948);
    var y = e.i(407562),
      b = e.i(674725),
      j = e.i(758057),
      w = a,
      C = f;
    function k() {
      let e = (0, C.useT)(),
        [t, n] = (0, v.useState)(null),
        { data: r } = (0, w.useServerQuerySWR)(["scoped", "gitNamespaces"], {}),
        { revalidate: i } = (0, w.useServerQuerySWR)(
          ["scoped", "gitNamespaces"],
          {},
          { stopFetch: !0 },
        ),
        s = "/chat/git/connected",
        a = window.location.origin + "/chat/git/callback",
        o = `https://vercel.com/api/registration/login-with-github?next=${encodeURIComponent(a)}`,
        l = { next: window.location.origin + "/github/installed" },
        c = (0, b.encodeBase64URL)(JSON.stringify(l)),
        u =
          r?.ok && r.value.verifiedGitHubUser
            ? `https://github.com/apps/vercel/installations/select_target?state=${encodeURIComponent(c)}`
            : "",
        d = (0, v.useCallback)(
          async (e) => {
            (await i(), e());
          },
          [i],
        ),
        { open: h } = (0, j.usePopupWindow)({
          url: o,
          onPoll: (e) => {
            e.location.pathname === s &&
              d(() => {
                (e.close(), n(null));
              });
          },
          onClose: () => {
            (n(null), i());
          },
        }),
        { open: p } = (0, j.usePopupWindow)({
          url: u,
          onPoll: (e) => {
            e.location.pathname === s &&
              d(() => {
                (e.close(), n(null));
              });
          },
          onClose: () => {
            (n(null), i());
          },
        }),
        m = (0, v.useCallback)(() => {
          "sign-in" === t
            ? y.toast.error(e("gitSync.toast.signInInProgress"))
            : (n("sign-in"), h());
        }, [h, t, e]),
        f = (0, v.useCallback)(() => {
          "install-app" === t
            ? y.toast.error(e("gitSync.toast.appInstallationInProgress"))
            : (n("install-app"), p());
        }, [p, t, e]);
      return { action: t, handleSignInToGitHub: m, handleConnectAppGitHub: f };
    }
    function S({ namespaces: e, value: t, onValueChange: n, disabled: r }) {
      let i = (0, f.useT)(),
        { hasVercelWritePermission: s } = (0, x.useActiveScope)(),
        { handleConnectAppGitHub: a } = k(),
        o = (0, g.useMemo)(
          () => e.reduce((e, t) => (e.set(t.id.toString(), t), e), new Map()),
          [e],
        ),
        l = (0, g.useCallback)(
          (e) => {
            let t = o.get(e);
            t && n(t);
          },
          [o, n],
        );
      return (0, u.jsxs)(m.Select, {
        value: t?.id.toString(),
        onValueChange: l,
        disabled: r || !s,
        children: [
          (0, u.jsx)(p.RbacTooltip, {
            show: !s,
            requiredRole: "V0Builder",
            children: (0, u.jsx)(m.SelectTrigger, {
              className: "transition-colors hover:bg-v0-gray-100 px-2",
              children: (0, u.jsxs)("div", {
                className: "flex flex-row items-center gap-2",
                children: [
                  (0, u.jsx)(d.LogoGithub, {}),
                  t?.name ?? i("gitSync.createRepo.selectGitScope"),
                ],
              }),
            }),
          }),
          (0, u.jsxs)(m.SelectContent, {
            children: [
              e
                .filter((e) => !!e.name)
                .map((e) =>
                  (0, u.jsx)(
                    m.SelectItem,
                    {
                      value: e.id.toString(),
                      iconOnRight: !0,
                      className: "pl-2",
                      children: (0, u.jsxs)("div", {
                        className: "flex items-center gap-2",
                        children: [
                          (0, u.jsx)(d.LogoGithub, { className: "h-4 w-4" }),
                          (0, u.jsx)("span", { children: e.name ?? e.slug }),
                        ],
                      }),
                    },
                    e.id,
                  ),
                ),
              (0, u.jsx)(m.SelectSeparator, {}),
              (0, u.jsx)("div", {
                className:
                  "relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-hidden hover:bg-v0-gray-100 hover:text-accent-foreground",
                onClick: () => {
                  a();
                },
                children: (0, u.jsxs)("div", {
                  className: "flex items-center gap-2",
                  children: [
                    (0, u.jsx)(h.Plus, { size: 14 }),
                    "Add GitHub Account",
                  ],
                }),
              }),
            ],
          }),
        ],
      });
    }
    var N = e.i(607391),
      E = f,
      A = e.i(418625),
      D = e.i(762585),
      I = e.i(931289),
      M = e.i(403055),
      T = e.i(230902),
      L = e.i(304649),
      P = e.i(908431);
    let R = P.z
      .string()
      .trim()
      .transform((e, t) => {
        let n,
          r = e.trim();
        (/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//.test(r) ||
          (r = "https://" + r.replace(/^\/+/, "")),
          (r = r.replace(/^http:\/\//i, "https://")));
        try {
          n = new URL(r);
        } catch {
          return (
            t.issues.push({
              code: "custom",
              message: "Invalid URL.",
              input: e,
            }),
            P.z.NEVER
          );
        }
        if ("github.com" !== n.hostname.replace(/^www\./i, "").toLowerCase())
          return (
            t.issues.push({
              code: "custom",
              message: "URL must be on github.com.",
              input: e,
            }),
            P.z.NEVER
          );
        ((n.search = ""), (n.hash = ""));
        let i = n.pathname.split("/").filter(Boolean);
        if (2 !== i.length)
          return (
            t.issues.push({
              code: "custom",
              message:
                "URL must be of the form github.com/<org>/<repo> with no extra path.",
              input: e,
            }),
            P.z.NEVER
          );
        let [s, a] = i;
        return s && a
          ? ((n.protocol = "https:"),
            (n.hostname = "github.com"),
            (n.port = ""),
            (n.pathname = `/${s}/${a}`),
            n.toString())
          : (t.issues.push({
              code: "custom",
              message: "Both org and repo are required.",
              input: e,
            }),
            P.z.NEVER);
      });
    e.s(["GitHubRepoUrlSchema", 0, R], 158518);
    var F = e.i(211976),
      _ = y,
      O = e.i(686832);
    function B({ repoUrl: e, onImport: n }) {
      let [r, i] = (0, c.useState)(!1),
        s = (0, c.useCallback)(
          async (e, t, s) => {
            if (!r) {
              i(!0);
              try {
                let r = await fetch(
                  `/api/git/projects?${new URLSearchParams({ namespace: e, repo: t }).toString()}`,
                );
                if (!r.ok) {
                  (_.toast.error(
                    "Unable to fetch Vercel projects for repository",
                  ),
                    i(!1));
                  return;
                }
                let a = await r.json();
                n(e, t, a, s);
              } finally {
                i(!1);
              }
            }
          },
          [r, n],
        ),
        a = (0, c.useCallback)((e, t) => s(e, t, "url"), [s]),
        o = (0, c.useCallback)((e, t) => s(e, t, "search"), [s]);
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsx)(O.ModalHeader, {
            children: (0, t.jsx)(O.ModalTitle, {
              children: "Import from GitHub",
            }),
          }),
          (0, t.jsxs)(O.ModalContent, {
            className: "flex flex-col gap-4",
            children: [
              (0, t.jsxs)("div", {
                className: "flex flex-col gap-2",
                children: [
                  (0, t.jsx)(l.Label, {
                    className: "text-[13px] font-normal",
                    children: "Import from a URL",
                  }),
                  (0, t.jsx)(V, { defaultValue: e, onImport: a, disabled: r }),
                ],
              }),
              (0, t.jsxs)("div", {
                className: "flex flex-col gap-2",
                children: [
                  (0, t.jsx)(l.Label, {
                    className: "text-[13px] font-normal",
                    children: "Select a Repository",
                  }),
                  (0, t.jsx)(z, { onImport: o, disabled: r }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function V({ defaultValue: e, onImport: n, disabled: i }) {
      let [s, a] = (0, c.useState)(e ?? ""),
        [o, l] = (0, c.useState)(""),
        [u, d] = (0, c.useState)(!1),
        h = (0, c.useCallback)((e) => {
          (a(e.target.value), l(""));
        }, []),
        p = (0, c.useCallback)(
          async (e) => {
            if ((e.preventDefault(), u)) return;
            (d(!0), l(""));
            let t = R.safeParse(s);
            if (!t.success) {
              (d(!1), l(t.error.issues.at(0)?.message ?? "Invalid repo URL"));
              return;
            }
            let [, r, i] = new URL(t.data).pathname.split("/");
            if (!r || !i) {
              (d(!1), l("Invalid repo URL"));
              return;
            }
            try {
              await n(r, i);
            } finally {
              d(!1);
            }
          },
          [u, s, n],
        );
      return (0, t.jsxs)("form", {
        className: "space-y-1",
        onSubmit: p,
        children: [
          (0, t.jsxs)("div", {
            className: "flex",
            children: [
              (0, t.jsx)(r.Input, {
                value: s,
                onChange: h,
                placeholder: "https://github.com/myorg/myrepo",
                wrapperClassName: "rounded-r-none border-r-0",
                size: "lg",
              }),
              (0, t.jsx)(F.SpinnerButton, {
                type: "submit",
                className: "rounded-l-none",
                size: "default",
                pending: u,
                disabled: i,
                hideTextWhenPending: !0,
                children: "Import",
              }),
            ],
          }),
          o &&
            (0, t.jsx)("div", {
              className: "text-destructive text-sm",
              children: o,
            }),
        ],
      });
    }
    function z({ onImport: e, disabled: o }) {
      let l = (0, E.useT)(),
        { data: u } = (0, a.useServerQuerySWR)(["scoped", "gitNamespaces"], {}),
        { handleSignInToGitHub: d, action: h } = k(),
        [p, m] = (0, c.useState)(""),
        f = (0, I.useDebouncedValue)(p, 250),
        g = (0, c.useMemo)(
          () =>
            u?.ok
              ? u.value.userNamespace
                ? [u.value.userNamespace, ...u.value.orgNamespaces]
                : u.value.orgNamespaces
              : [],
          [u],
        ),
        [x = g.at(0), v] = (0, c.useState)();
      return u && "ok" in u
        ? u.ok
          ? u.value.verifiedGitHubUser
            ? (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsxs)("div", {
                    className: "flex gap-2",
                    children: [
                      (0, t.jsx)(S, {
                        namespaces: g,
                        value: x,
                        onValueChange: v,
                      }),
                      (0, t.jsx)(r.Input, {
                        value: p,
                        onChange: (e) => m(e.target.value),
                        size: "lg",
                        prefix: (0, t.jsx)(s.MagnifyingGlass, {}),
                        placeholder: "Search repos",
                        disabled: !x,
                      }),
                    ],
                  }),
                  (0, t.jsx)($, {
                    selectedNamespace: x,
                    search: f,
                    onImport: e,
                    disabled: o,
                  }),
                ],
              })
            : (0, t.jsx)("div", {
                className:
                  "min-h-[288px] border rounded-md overflow-hidden flex items-center justify-center bg-v0-background-200",
                children: (0, t.jsx)(n.Button, {
                  variant: "secondary",
                  onClick: d,
                  disabled: "sign-in" === h,
                  children: (0, t.jsxs)(N.ActionStatus, {
                    isLoading: "sign-in" === h,
                    loading: l("gitSync.signIn.signingIn"),
                    children: [(0, t.jsx)(i.LogoGithub, {}), " Connect GitHub"],
                  }),
                }),
              })
          : (0, t.jsx)("div", {
              className:
                "min-h-[288px] border rounded-md overflow-hidden flex items-center justify-center bg-v0-background-200",
              children: (0, t.jsxs)("div", {
                className: "text-center text-sm",
                children: [
                  (0, t.jsx)("div", {
                    className: "font-medium",
                    children: "Error fetching GitHub connection",
                  }),
                  (0, t.jsx)("div", {
                    className: "text-v0-gray-800",
                    children: "Please try again later.",
                  }),
                ],
              }),
            })
        : (0, t.jsx)(D.Skeleton, { className: "w-full h-10" });
    }
    let H = "border rounded-md overflow-hidden min-h-[240px]";
    function $({ selectedNamespace: e, search: n, onImport: r, disabled: i }) {
      let {
        data: s,
        error: a,
        isLoading: o,
      } = (0, A.default)(
        e &&
          `/api/git/${e.id}/repos?${new URLSearchParams({ search: n }).toString()}`,
        M.fetcher,
      );
      return !e || o
        ? (0, t.jsx)("div", {
            className: (0, L.cn)(H, "max-h-[240px] overflow-y-auto"),
            children: ["w-20", "w-12", "w-14", "w-16", "w-18"].map((e, n) =>
              (0, t.jsxs)(
                "div",
                {
                  className: "p-3 flex items-center justify-between",
                  children: [
                    (0, t.jsxs)("div", {
                      className: "flex items-center gap-2",
                      children: [
                        (0, t.jsx)(D.Skeleton, {
                          className: "size-6 rounded-full",
                        }),
                        " ",
                        (0, t.jsxs)("div", {
                          className: "text-sm flex items-center gap-1",
                          children: [
                            (0, t.jsx)(D.Skeleton, {
                              className: (0, L.cn)("h-5", e),
                            }),
                            (0, t.jsx)("span", { children: "" }),
                            (0, t.jsx)(D.Skeleton, { className: "h-5 w-12" }),
                          ],
                        }),
                      ],
                    }),
                    (0, t.jsx)(D.Skeleton, { className: "h-7 w-[70px]" }),
                  ],
                },
                n,
              ),
            ),
          })
        : a
          ? (0, t.jsx)("div", {
              className: H,
              children: (0, t.jsxs)("div", {
                className:
                  "h-[240px] flex flex-col items-center justify-center gap-2 px-6 text-center text-sm bg-v0-background-200",
                children: [
                  (0, t.jsx)("div", {
                    className: "font-medium",
                    children: "Error loading GitHub repositories",
                  }),
                  (0, t.jsx)("div", {
                    className: "text-v0-gray-800",
                    children: "Please try again later.",
                  }),
                ],
              }),
            })
          : s?.length
            ? (0, t.jsx)("div", {
                className: (0, L.cn)(H, "max-h-[240px] overflow-y-auto"),
                children: (0, t.jsx)("div", {
                  className: "divide-y",
                  children: s.map((n) =>
                    (0, t.jsx)(
                      U,
                      {
                        selectedNamespace: e,
                        repository: n,
                        onImport: r,
                        disabled: i,
                      },
                      n.name,
                    ),
                  ),
                }),
              })
            : (0, t.jsx)("div", {
                className: H,
                children: (0, t.jsxs)("div", {
                  className:
                    "h-[240px] flex flex-col items-center justify-center gap-2 px-6 text-center text-sm bg-v0-background-200",
                  children: [
                    (0, t.jsx)("div", {
                      className: "font-medium",
                      children: "No Results Found",
                    }),
                    (0, t.jsxs)("div", {
                      className: "text-v0-gray-800",
                      children: [
                        "Your search for ",
                        (0, t.jsxs)("span", { children: ['"', n, '"'] }),
                        " did not return any results.",
                        (0, t.jsx)("br", {}),
                        (0, t.jsx)("br", {}),
                        "Try selecting a different Git account or organization above, or check that your",
                        " ",
                        (0, t.jsx)("a", {
                          href: "https://github.com/settings/installations",
                          target: "_blank",
                          className: "underline",
                          children: "Vercel GitHub App",
                        }),
                        " ",
                        "has access.",
                      ],
                    }),
                  ],
                }),
              });
    }
    function U({
      selectedNamespace: e,
      repository: n,
      onImport: r,
      disabled: i,
    }) {
      let [s, a] = (0, c.useState)(!1),
        { data: l } = (0, A.default)(
          `/api/git/${e.name}/${n.name}/projects`,
          M.fetcher,
          { revalidateOnFocus: !1, revalidateOnReconnect: !1 },
        ),
        u = (0, c.useMemo)(() => {
          if (l)
            return l.find((e) => "next" === e.framework)
              ? "https://api-frameworks.vercel.sh/framework-logos/next.svg"
              : "https://api-frameworks.vercel.sh/framework-logos/other.svg";
        }, [l]),
        d = (0, c.useCallback)(async () => {
          if (!s && !i) {
            a(!0);
            try {
              await r(e.name ?? "", n.name);
            } finally {
              a(!1);
            }
          }
        }, [s, i, r, e.name, n.name]);
      return (0, t.jsxs)("div", {
        className: "p-3 flex items-center justify-between",
        children: [
          (0, t.jsxs)("div", {
            className: "flex items-center gap-2",
            children: [
              (0, t.jsx)(o.Avatar, {
                rounded: !0,
                size: "sm",
                className: (0, L.cn)("bg-v0-background", !u && "animate-pulse"),
                children: (0, t.jsx)(o.AvatarImage, { src: u }),
              }),
              (0, t.jsxs)("div", {
                className: "text-sm",
                children: [
                  (0, t.jsx)("span", {
                    className: "font-medium",
                    children: n.name,
                  }),
                  (0, t.jsxs)("span", {
                    className: "text-v0-gray-900",
                    children: [
                      " ",
                      " ",
                      (0, T.format)(new Date(n.updatedAt), "MMM dd"),
                    ],
                  }),
                ],
              }),
            ],
          }),
          (0, t.jsx)(F.SpinnerButton, {
            size: "sm",
            variant: "outline",
            onClick: d,
            pending: s,
            disabled: i,
            className: "h-7 rounded-md px-2",
            children: "Import",
          }),
        ],
      });
    }
    (e.s(["InitialContent", () => B], 700376),
      e.s(["ImportNew", () => eC], 621013));
    var G = t,
      W = e.i(226368),
      q = c,
      Z = I,
      K = e.i(32170),
      Y = x,
      J = e.i(906261),
      Q = A,
      X = M,
      ee = e.i(919012),
      et = (0, ee.createServerReference)(
        "40b82c37e9303f86a8c12df6329e9e88a9da3bee02",
        ee.callServer,
        void 0,
        ee.findSourceMapURL,
        "startChatFromGitHubRepository",
      );
    e.s(["startChatFromGitHubRepository", () => et], 170116);
    var en = y;
    e.i(904347);
    var er = e.i(37737),
      ei = n,
      es = e.i(602544),
      ea = e.i(751231),
      eo = e.i(227152),
      el = e.i(654335),
      ec = e.i(710958),
      eu = l,
      ed = o,
      eh = r,
      ep = e.i(574768),
      em = e.i(480187),
      ef = e.i(940393),
      eg = L,
      ex = D,
      ev = m,
      ey = F,
      eb = O,
      ej = e.i(973817),
      ew = e.i(996174);
    function eC({ onBack: e, namespace: t, repo: n, source: r }) {
      let i = (0, W.useRouter)(),
        [s, a] = (0, q.useState)(!1),
        [o, l] = (0, q.useState)(""),
        c = (0, Z.useDebouncedValue)(o, 200),
        [u, d] = (0, q.useTransition)(),
        [h, p] = (0, q.useState)(n),
        { user: m } = (0, K.useUser)(),
        { activeScope: f } = (0, Y.useActiveScope)(),
        g = (0, q.useMemo)(
          () =>
            f
              ? (0, J.isUserScope)(f)
                ? m?.name || "Personal"
                : f.name
              : "Personal",
          [f, m?.name],
        ),
        x = !f || (0, J.isUserScope)(f),
        { data: v } = (0, Q.default)(`/api/git/${t}/${n}`, X.fetcher),
        { data: y } = (0, Q.default)(
          `/api/git/${t}/${n}/branches?${new URLSearchParams({ search: c }).toString()}`,
          X.fetcher,
          { keepPreviousData: !0 },
        ),
        b = (0, q.useMemo)(() => {
          if (v)
            return y
              ? Array.from(new Set([v.defaultBranch].concat(...y)))
              : [v.defaultBranch];
        }, [v, y]),
        [j = b?.at(0), w] = (0, q.useState)(),
        { data: C } = (0, Q.default)(
          j &&
            `/api/git/${t}/${n}/projects?${new URLSearchParams({ branch: j }).toString()}`,
          X.fetcher,
          { revalidateOnFocus: !1, revalidateOnReconnect: !1 },
        ),
        [k = C?.at(0)?.path || "./", S] = (0, q.useState)(),
        N = (0, q.useMemo)(() => {
          if (C)
            return C.find((e) => (e.path || "./") === k)?.framework ?? "other";
        }, [C, k]),
        E = (0, q.useCallback)(() => {
          !u &&
            j &&
            d(async () => {
              let e = await et({
                namespace: t,
                repo: n,
                baseBranch: j,
                rootDirectory: "./" === k ? void 0 : k,
                source: r,
              });
              e.ok
                ? (i.push(`/chat/${e.value.chatId}`), (0, er.closeDialog)())
                : en.toast.error(e.error);
            });
        }, [u, d, t, n, j, k, r, i]);
      return (0, G.jsxs)(G.Fragment, {
        children: [
          (0, G.jsx)(eb.ModalHeader, {
            children: (0, G.jsx)(eb.ModalTitle, {
              children: "Create a New Project",
            }),
          }),
          (0, G.jsxs)(eb.ModalContent, {
            className: "flex flex-col gap-4",
            children: [
              (0, G.jsxs)("div", {
                className:
                  "bg-v0-background-300 p-3 rounded-md flex flex-col gap-1 shadow-sm",
                children: [
                  (0, G.jsx)("div", {
                    className: "text-sm text-v0-gray-900",
                    children: "Importing from GitHub",
                  }),
                  (0, G.jsxs)(el.default, {
                    href: `https://github.com/${t}/${n}`,
                    target: "_blank",
                    className: "flex items-center gap-2 hover:underline",
                    children: [
                      (0, G.jsx)(ec.GithubIcon, {
                        className: "[&_path]:!fill-v0-gray-1000",
                      }),
                      (0, G.jsxs)("div", {
                        className: "font-medium text-sm",
                        children: [t, "/", n],
                      }),
                    ],
                  }),
                ],
              }),
              (0, G.jsxs)("div", {
                className: "flex gap-2 items-end",
                children: [
                  (0, G.jsxs)("div", {
                    className: "flex-1 flex flex-col gap-1 min-w-0",
                    children: [
                      (0, G.jsx)(eu.Label, {
                        className: "text-[13px] font-normal",
                        children: "Team",
                      }),
                      (0, G.jsxs)("div", {
                        className:
                          "flex items-center gap-2 h-10 px-3 rounded-md border bg-v0-gray-100",
                        children: [
                          (0, G.jsx)(ed.AvatarUser, {
                            size: "xs",
                            rounded: !0,
                            teamId: x ? void 0 : f?.id,
                            userId: m?.id,
                            avatarSha: m?.avatarSha,
                          }),
                          (0, G.jsx)("span", {
                            className: "text-sm text-v0-gray-900",
                            children: g,
                          }),
                        ],
                      }),
                    ],
                  }),
                  (0, G.jsx)(ej.HeaderSlash, { className: "mb-2" }),
                  (0, G.jsxs)("div", {
                    className: "flex-1 flex flex-col gap-1 min-w-0",
                    children: [
                      (0, G.jsx)(eu.Label, {
                        className: "text-[13px] font-normal",
                        children: "Project Name",
                      }),
                      (0, G.jsx)(eh.Input, {
                        value: h,
                        onChange: (e) => p(e.target.value),
                        size: "lg",
                      }),
                    ],
                  }),
                ],
              }),
              (0, G.jsxs)("div", {
                className: "flex flex-col gap-1",
                children: [
                  (0, G.jsxs)("div", {
                    className: "flex items-center gap-1",
                    children: [
                      (0, G.jsx)(eu.Label, {
                        className: "text-[13px] font-normal",
                        children: "Base Branch",
                      }),
                      (0, G.jsx)(ew.Tooltip, {
                        content:
                          "Select the branch that you want to start a chat with. This will be the base branch for your new changes.",
                        children: (0, G.jsx)(eo.InformationFillSmall, {
                          className: "text-v0-gray-900",
                        }),
                      }),
                    ],
                  }),
                  b
                    ? (0, G.jsxs)(ep.Popover, {
                        open: s,
                        onOpenChange: a,
                        children: [
                          (0, G.jsx)(ep.PopoverTrigger, {
                            asChild: !0,
                            children: (0, G.jsxs)(ei.Button, {
                              variant: "secondary",
                              role: "combobox",
                              "aria-expanded": s,
                              className: "justify-between font-mono rounded-md",
                              disabled: !y,
                              children: [
                                (0, G.jsxs)("span", {
                                  className: "flex items-center gap-2",
                                  children: [
                                    (0, G.jsx)(em.GitBranchSmall, {
                                      className: "size-4 text-v0-gray-900",
                                    }),
                                    j ??
                                      (0, G.jsx)("span", {
                                        children: "Select branch",
                                      }),
                                  ],
                                }),
                                (0, G.jsx)(ea.ChevronUpDown, {
                                  className: "ml-2 h-4 w-4 shrink-0 opacity-50",
                                }),
                              ],
                            }),
                          }),
                          (0, G.jsx)(ep.PopoverContent, {
                            className:
                              "p-0 w-[var(--radix-popover-trigger-width)]",
                            children: (0, G.jsxs)(ef.Command, {
                              children: [
                                (0, G.jsx)(ef.CommandInput, {
                                  placeholder: "Search branches...",
                                  value: o,
                                  onValueChange: l,
                                }),
                                (0, G.jsxs)(ef.CommandList, {
                                  children: [
                                    (0, G.jsx)(ef.CommandEmpty, {
                                      children: "No branches found.",
                                    }),
                                    (0, G.jsx)(ef.CommandGroup, {
                                      children: b.map((e) =>
                                        (0, G.jsxs)(
                                          ef.CommandItem,
                                          {
                                            value: e,
                                            onSelect: () => {
                                              (w(e), a(!1));
                                            },
                                            className: "font-mono",
                                            children: [
                                              (0, G.jsx)(es.Check, {
                                                className: (0, eg.cn)(
                                                  "mr-2 h-4 w-4",
                                                  j === e
                                                    ? "opacity-100"
                                                    : "opacity-0",
                                                ),
                                              }),
                                              e,
                                            ],
                                          },
                                          e,
                                        ),
                                      ),
                                    }),
                                  ],
                                }),
                              ],
                            }),
                          }),
                        ],
                      })
                    : (0, G.jsx)(ex.Skeleton, { className: "h-10 rounded-md" }),
                ],
              }),
              (0, G.jsxs)("div", {
                className: "flex flex-col gap-1",
                children: [
                  (0, G.jsxs)("div", {
                    className: "flex items-center gap-1",
                    children: [
                      (0, G.jsx)(eu.Label, {
                        className: "text-[13px] font-normal",
                        children: "Root Directory",
                      }),
                      (0, G.jsx)(ew.Tooltip, {
                        content:
                          "For monorepos, select the root directory of your project. This is the directory that will be previewed in the chat.",
                        children: (0, G.jsx)(eo.InformationFillSmall, {
                          className: "text-v0-gray-900",
                        }),
                      }),
                    ],
                  }),
                  C
                    ? (0, G.jsxs)(ev.Select, {
                        value: k,
                        onValueChange: S,
                        children: [
                          (0, G.jsx)(ev.SelectTrigger, {
                            children: (0, G.jsx)(ev.SelectValue, {
                              className: "font-mono",
                              children: (0, G.jsxs)("div", {
                                className: "font-mono flex items-center gap-2",
                                children: [
                                  N &&
                                    (0, G.jsx)(ed.Avatar, {
                                      rounded: !0,
                                      size: "xs",
                                      className: "bg-v0-background",
                                      children: (0, G.jsx)(ed.AvatarImage, {
                                        src: `https://api-frameworks.vercel.sh/framework-logos/${N}.svg`,
                                      }),
                                    }),
                                  (0, G.jsx)("span", { children: k }),
                                ],
                              }),
                            }),
                          }),
                          (0, G.jsx)(ev.SelectContent, {
                            children: C.length
                              ? C.map((e) =>
                                  (0, G.jsx)(
                                    ev.SelectItem,
                                    {
                                      value: e.path || "./",
                                      children: (0, G.jsxs)("div", {
                                        className:
                                          "font-mono flex items-center gap-2",
                                        children: [
                                          (0, G.jsx)(ed.Avatar, {
                                            rounded: !0,
                                            size: "xs",
                                            className: "bg-v0-background",
                                            children: (0, G.jsx)(
                                              ed.AvatarImage,
                                              {
                                                src: `https://api-frameworks.vercel.sh/framework-logos/${e.framework}.svg`,
                                              },
                                            ),
                                          }),
                                          (0, G.jsx)("span", {
                                            children: e.path || "./",
                                          }),
                                        ],
                                      }),
                                    },
                                    e.path,
                                  ),
                                )
                              : (0, G.jsx)(ev.SelectItem, {
                                  value: "./",
                                  children: (0, G.jsxs)("div", {
                                    className:
                                      "font-mono flex items-center gap-2",
                                    children: [
                                      (0, G.jsx)(ed.Avatar, {
                                        rounded: !0,
                                        size: "xs",
                                        className: "bg-v0-background",
                                        children: (0, G.jsx)(ed.AvatarImage, {
                                          src: "https://api-frameworks.vercel.sh/framework-logos/other.svg",
                                        }),
                                      }),
                                      (0, G.jsx)("span", { children: "./" }),
                                    ],
                                  }),
                                }),
                          }),
                        ],
                      })
                    : (0, G.jsx)(ex.Skeleton, { className: "h-10 rounded-md" }),
                ],
              }),
            ],
          }),
          (0, G.jsxs)(eb.ModalFooter, {
            className: "bg-v0-background-200 border-t border-v0-alpha-400",
            children: [
              (0, G.jsx)(ei.Button, {
                size: "sm",
                variant: "secondary",
                onClick: e,
                className: "rounded-md",
                children: "Back",
              }),
              (0, G.jsx)(ey.SpinnerButton, {
                size: "sm",
                className: "rounded-md",
                pending: u,
                onClick: E,
                disabled: !j || !C,
                children: "Create Project",
              }),
            ],
          }),
        ],
      });
    }
  },
  520234,
  (e) => {
    "use strict";
    let t = Symbol.for("@ts-pattern/matcher"),
      n = Symbol.for("@ts-pattern/isVariadic"),
      r = "@ts-pattern/anonymous-select-key",
      i = (e) => !!(e && "object" == typeof e),
      s = (e) => e && !!e[t],
      a = (e, r, o) => {
        if (s(e)) {
          let { matched: n, selections: i } = e[t]().match(r);
          return (n && i && Object.keys(i).forEach((e) => o(e, i[e])), n);
        }
        if (i(e)) {
          if (!i(r)) return !1;
          if (Array.isArray(e)) {
            if (!Array.isArray(r)) return !1;
            let t = [],
              i = [],
              l = [];
            for (let r of e.keys()) {
              let a = e[r];
              s(a) && a[n] ? l.push(a) : l.length ? i.push(a) : t.push(a);
            }
            if (l.length) {
              if (l.length > 1)
                throw Error(
                  "Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.",
                );
              if (r.length < t.length + i.length) return !1;
              let e = r.slice(0, t.length),
                n = 0 === i.length ? [] : r.slice(-i.length),
                s = r.slice(t.length, 0 === i.length ? 1 / 0 : -i.length);
              return (
                t.every((t, n) => a(t, e[n], o)) &&
                i.every((e, t) => a(e, n[t], o)) &&
                (0 === l.length || a(l[0], s, o))
              );
            }
            return e.length === r.length && e.every((e, t) => a(e, r[t], o));
          }
          return Reflect.ownKeys(e).every((n) => {
            var i;
            let l = e[n];
            return (
              (n in r || (s((i = l)) && "optional" === i[t]().matcherType)) &&
              a(l, r[n], o)
            );
          });
        }
        return Object.is(r, e);
      },
      o = (e) => {
        var n, r, a;
        return i(e)
          ? s(e)
            ? null !=
              (n =
                null == (r = (a = e[t]()).getSelectionKeys)
                  ? void 0
                  : r.call(a))
              ? n
              : []
            : Array.isArray(e)
              ? l(e, o)
              : l(Object.values(e), o)
          : [];
      },
      l = (e, t) => e.reduce((e, n) => e.concat(t(n)), []);
    function c(e) {
      return Object.assign(e, {
        optional: () => u(e),
        and: (t) => d(e, t),
        or: (t) => h(e, t),
        select: (t) => (void 0 === t ? m(e) : m(t, e)),
      });
    }
    function u(e) {
      return c({
        [t]: () => ({
          match: (t) => {
            let n = {},
              r = (e, t) => {
                n[e] = t;
              };
            return void 0 === t
              ? (o(e).forEach((e) => r(e, void 0)),
                { matched: !0, selections: n })
              : { matched: a(e, t, r), selections: n };
          },
          getSelectionKeys: () => o(e),
          matcherType: "optional",
        }),
      });
    }
    function d(...e) {
      return c({
        [t]: () => ({
          match: (t) => {
            let n = {},
              r = (e, t) => {
                n[e] = t;
              };
            return { matched: e.every((e) => a(e, t, r)), selections: n };
          },
          getSelectionKeys: () => l(e, o),
          matcherType: "and",
        }),
      });
    }
    function h(...e) {
      return c({
        [t]: () => ({
          match: (t) => {
            let n = {},
              r = (e, t) => {
                n[e] = t;
              };
            return (
              l(e, o).forEach((e) => r(e, void 0)),
              { matched: e.some((e) => a(e, t, r)), selections: n }
            );
          },
          getSelectionKeys: () => l(e, o),
          matcherType: "or",
        }),
      });
    }
    function p(e) {
      return { [t]: () => ({ match: (t) => ({ matched: !!e(t) }) }) };
    }
    function m(...e) {
      let n = "string" == typeof e[0] ? e[0] : void 0,
        i = 2 === e.length ? e[1] : "string" == typeof e[0] ? void 0 : e[0];
      return c({
        [t]: () => ({
          match: (e) => {
            let t = { [null != n ? n : r]: e };
            return {
              matched:
                void 0 === i ||
                a(i, e, (e, n) => {
                  t[e] = n;
                }),
              selections: t,
            };
          },
          getSelectionKeys: () =>
            [null != n ? n : r].concat(void 0 === i ? [] : o(i)),
        }),
      });
    }
    function f(e) {
      return !0;
    }
    function g(e) {
      return "number" == typeof e;
    }
    function x(e) {
      return "string" == typeof e;
    }
    function v(e) {
      return "bigint" == typeof e;
    }
    (c(p(f)), c(p(f)));
    let y = (e) =>
        Object.assign(c(e), {
          startsWith: (t) => {
            var n;
            return y(d(e, ((n = t), p((e) => x(e) && e.startsWith(n)))));
          },
          endsWith: (t) => {
            var n;
            return y(d(e, ((n = t), p((e) => x(e) && e.endsWith(n)))));
          },
          minLength: (t) => {
            let n;
            return y(d(e, ((n = t), p((e) => x(e) && e.length >= n))));
          },
          length: (t) => {
            let n;
            return y(d(e, ((n = t), p((e) => x(e) && e.length === n))));
          },
          maxLength: (t) => {
            let n;
            return y(d(e, ((n = t), p((e) => x(e) && e.length <= n))));
          },
          includes: (t) => {
            var n;
            return y(d(e, ((n = t), p((e) => x(e) && e.includes(n)))));
          },
          regex: (t) => {
            var n;
            return y(d(e, ((n = t), p((e) => x(e) && !!e.match(n)))));
          },
        }),
      b =
        (y(p(x)),
        (e) =>
          Object.assign(c(e), {
            between: (t, n) => {
              let r, i;
              return b(
                d(e, ((r = t), (i = n), p((e) => g(e) && r <= e && i >= e))),
              );
            },
            lt: (t) => {
              let n;
              return b(d(e, ((n = t), p((e) => g(e) && e < n))));
            },
            gt: (t) => {
              let n;
              return b(d(e, ((n = t), p((e) => g(e) && e > n))));
            },
            lte: (t) => {
              let n;
              return b(d(e, ((n = t), p((e) => g(e) && e <= n))));
            },
            gte: (t) => {
              let n;
              return b(d(e, ((n = t), p((e) => g(e) && e >= n))));
            },
            int: () =>
              b(
                d(
                  e,
                  p((e) => g(e) && Number.isInteger(e)),
                ),
              ),
            finite: () =>
              b(
                d(
                  e,
                  p((e) => g(e) && Number.isFinite(e)),
                ),
              ),
            positive: () =>
              b(
                d(
                  e,
                  p((e) => g(e) && e > 0),
                ),
              ),
            negative: () =>
              b(
                d(
                  e,
                  p((e) => g(e) && e < 0),
                ),
              ),
          })),
      j =
        (b(p(g)),
        (e) =>
          Object.assign(c(e), {
            between: (t, n) => {
              let r, i;
              return j(
                d(e, ((r = t), (i = n), p((e) => v(e) && r <= e && i >= e))),
              );
            },
            lt: (t) => {
              let n;
              return j(d(e, ((n = t), p((e) => v(e) && e < n))));
            },
            gt: (t) => {
              let n;
              return j(d(e, ((n = t), p((e) => v(e) && e > n))));
            },
            lte: (t) => {
              let n;
              return j(d(e, ((n = t), p((e) => v(e) && e <= n))));
            },
            gte: (t) => {
              let n;
              return j(d(e, ((n = t), p((e) => v(e) && e >= n))));
            },
            positive: () =>
              j(
                d(
                  e,
                  p((e) => v(e) && e > 0),
                ),
              ),
            negative: () =>
              j(
                d(
                  e,
                  p((e) => v(e) && e < 0),
                ),
              ),
          }));
    (j(p(v)),
      c(
        p(function (e) {
          return "boolean" == typeof e;
        }),
      ),
      c(
        p(function (e) {
          return "symbol" == typeof e;
        }),
      ),
      c(
        p(function (e) {
          return null == e;
        }),
      ),
      c(
        p(function (e) {
          return null != e;
        }),
      ));
    class w extends Error {
      constructor(e) {
        let t;
        try {
          t = JSON.stringify(e);
        } catch (n) {
          t = e;
        }
        (super(`Pattern matching error: no pattern matches value ${t}`),
          (this.input = void 0),
          (this.input = e));
      }
    }
    let C = { matched: !1, value: void 0 };
    function k(e) {
      return new S(e, C);
    }
    class S {
      constructor(e, t) {
        ((this.input = void 0),
          (this.state = void 0),
          (this.input = e),
          (this.state = t));
      }
      with(...e) {
        let t;
        if (this.state.matched) return this;
        let n = e[e.length - 1],
          i = [e[0]];
        3 === e.length && "function" == typeof e[1]
          ? (t = e[1])
          : e.length > 2 && i.push(...e.slice(1, e.length - 1));
        let s = !1,
          o = {},
          l = (e, t) => {
            ((s = !0), (o[e] = t));
          },
          c =
            i.some((e) => a(e, this.input, l)) && (!t || t(this.input))
              ? {
                  matched: !0,
                  value: n(s ? (r in o ? o[r] : o) : this.input, this.input),
                }
              : C;
        return new S(this.input, c);
      }
      when(e, t) {
        if (this.state.matched) return this;
        let n = !!e(this.input);
        return new S(
          this.input,
          n ? { matched: !0, value: t(this.input, this.input) } : C,
        );
      }
      otherwise(e) {
        return this.state.matched ? this.state.value : e(this.input);
      }
      exhaustive(e = N) {
        return this.state.matched ? this.state.value : e(this.input);
      }
      run() {
        return this.exhaustive();
      }
      returnType() {
        return this;
      }
      narrow() {
        return this;
      }
    }
    function N(e) {
      throw new w(e);
    }
    e.s(["match", () => k]);
  },
  446095,
  328454,
  (e) => {
    "use strict";
    e.s(["GitImportDialog", () => _], 446095);
    var t = e.i(324834),
      n = e.i(120945),
      r = e.i(576191),
      i = e.i(700376),
      s = e.i(621013),
      a = t,
      o = e.i(176248),
      l = e.i(763480),
      c = e.i(602544),
      u = e.i(751231),
      d = e.i(227152),
      h = e.i(686832),
      p = e.i(973817),
      m = e.i(996174),
      f = e.i(480187),
      g = e.i(667660),
      x = e.i(906261),
      v = e.i(230766),
      y = r,
      b = e.i(418625),
      j = e.i(762585),
      w = e.i(931289),
      C = e.i(403055),
      k = e.i(304649),
      S = e.i(211976);
    e.i(563948);
    var N = e.i(407562),
      E = e.i(226368),
      A = e.i(170116);
    e.i(904347);
    var D = e.i(37737),
      I = e.i(574768),
      M = e.i(940393),
      T = e.i(592258),
      L = e.i(707974),
      P = e.i(338157),
      R = e.i(520234);
    function F({ onBack: e, namespace: t, repo: n, source: r, projects: i }) {
      let {
          activeScope: s,
          isTeam: F,
          setActiveScope: _,
          scopes: O,
          user: B,
        } = (0, g.useActiveScope)(),
        [V, z] = (0, y.useState)("existing"),
        H = (0, y.useMemo)(
          () =>
            i.reduce((e, t) => {
              let n = e.get(t.accountId) ?? [];
              return (n.push(t), e.set(t.accountId, n), e);
            }, new Map()),
          [i],
        ),
        $ = !!(s && H.get(s.id)),
        U = (0, y.useMemo)(() => {
          let e = new Set(i.map((e) => e.accountId));
          return s && e.has(s.id) ? e.size - 1 : e.size;
        }, [i, s]),
        [G, W] = (0, y.useState)(() =>
          $ ? s?.id : Array.from(H.keys()).at(0),
        ),
        q = O?.find((e) => e.id === G),
        Z = (0, y.useMemo)(
          () =>
            O
              ? Array.from(new Set(i.map((e) => e.accountId))).reduce(
                  (e, t) => {
                    let n = O.find((e) => e.id === t);
                    return (
                      e.set(
                        t,
                        n?.name ||
                          ((0, x.isUserScope)(n) ? "Personal" : "Team"),
                      ),
                      e
                    );
                  },
                  new Map(),
                )
              : null,
          [O, i],
        ),
        [K, Y] = (0, y.useState)(G ? H.get(G)?.at(0) : void 0),
        J = (0, E.useRouter)(),
        [Q, X] = (0, y.useState)(!1),
        [ee, et] = (0, y.useState)(""),
        en = (0, w.useDebouncedValue)(ee, 200),
        [er, ei] = (0, y.useTransition)(),
        { data: es } = (0, b.default)(`/api/git/${t}/${n}`, C.fetcher),
        { data: ea } = (0, b.default)(
          `/api/git/${t}/${n}/branches?${new URLSearchParams({ search: en }).toString()}`,
          C.fetcher,
          { keepPreviousData: !0 },
        ),
        eo = (0, y.useMemo)(() => {
          if (es)
            return ea
              ? Array.from(new Set([es.defaultBranch].concat(...ea)))
              : [es.defaultBranch];
        }, [es, ea]),
        [el = eo?.at(0), ec] = (0, y.useState)(),
        { data: eu } = (0, b.default)(
          el &&
            `/api/git/${t}/${n}/projects?${new URLSearchParams({ branch: el }).toString()}`,
          C.fetcher,
          { revalidateOnFocus: !1, revalidateOnReconnect: !1 },
        ),
        [ed = eu?.at(0)?.path || "./", eh] = (0, y.useState)(),
        ep = (0, y.useMemo)(() => {
          if (eu) return eu.find((e) => (e.path || "./") === ed)?.framework;
        }, [eu, ed]);
      (0, y.useEffect)(() => {
        G && Y(H.get(G)?.at(0));
      }, [G, H]);
      let [em, ef] = (0, y.useState)(`v0-${K?.name || "project"}`);
      (0, y.useEffect)(() => {
        ef(`v0-${K?.name || "project"}`);
      }, [K]);
      let eg = "existing" === V && (F ? G !== s?.id : G !== B?.defaultTeamId),
        ex = (0, y.useCallback)(() => {
          er ||
            !el ||
            ("existing" === V && !K) ||
            (("new" !== V || em.trim()) &&
              ei(async () => {
                if (eg && O && G) {
                  let e = O.find((e) => e.id === G);
                  if (e)
                    return void (await _(e.id === B?.defaultTeamId ? B : e));
                }
                let e = await (0, A.startChatFromGitHubRepository)({
                  namespace: t,
                  repo: n,
                  baseBranch: el,
                  rootDirectory:
                    "new" === V ? ("./" === ed ? void 0 : ed) : void 0,
                  vercelProjectId: "existing" === V ? K?.id : void 0,
                  newProjectName: "new" === V ? em : void 0,
                  source: r,
                });
                e.ok
                  ? (J.push(`/chat/${e.value.chatId}`), (0, D.closeDialog)())
                  : N.toast.error(e.error);
              }));
        }, [er, ei, t, n, el, K, V, em, ed, r, J, eg, O, G, _]),
        ev = (0, y.useMemo)(
          () =>
            "existing" === V
              ? eg
                ? "Switch and Continue"
                : "Continue"
              : "Create New Project",
          [V, eg, s, G],
        );
      return (0, a.jsxs)(a.Fragment, {
        children: [
          (0, a.jsxs)(h.ModalHeader, {
            children: [
              (0, a.jsx)(h.ModalTitle, { children: "Existing Project Found" }),
              (0, a.jsxs)(h.ModalDescription, {
                children: [
                  "The ",
                  (0, a.jsx)("span", {
                    className: "font-medium text-v0-gray-1000",
                    children: n,
                  }),
                  " ",
                  "repository is already connected to a Vercel project",
                  (0, R.match)([$, U])
                    .with([!0, 0], () => "")
                    .with([!1, 1], () =>
                      (0, a.jsxs)(a.Fragment, {
                        children: [
                          " ",
                          "in",
                          " ",
                          (0, a.jsx)("span", {
                            className: "font-medium text-v0-gray-1000",
                            children: O?.find(
                              (e) => e.id === Array.from(H.keys()).at(0),
                            )?.name,
                          }),
                        ],
                      }),
                    )
                    .otherwise(() => " in another team"),
                  ". You can make changes in the existing project, or create a new project.",
                ],
              }),
            ],
          }),
          (0, a.jsxs)(h.ModalContent, {
            className: "flex flex-col gap-4",
            children: [
              (0, a.jsxs)(P.RadioGroup, {
                value: V,
                onValueChange: (e) => z(e),
                className: "gap-2 text-sm",
                children: [
                  (0, a.jsxs)("label", {
                    className: (0, k.cn)(
                      "flex cursor-pointer items-center justify-between gap-3 rounded-lg border p-3 transition-colors border-v0-alpha-400 hover:border-v0-alpha-600",
                      "existing" === V && "border-v0-gray-1000 bg-v0-gray-200",
                    ),
                    children: [
                      (0, a.jsxs)("div", {
                        className: "flex flex-col justify-around gap-1",
                        children: [
                          (0, a.jsx)("div", {
                            className: "font-medium",
                            children: "Use Existing Project (recommended)",
                          }),
                          (0, a.jsx)("div", {
                            className: "text-v0-gray-900",
                            children: "Start a chat in the existing project.",
                          }),
                        ],
                      }),
                      (0, a.jsx)(P.RadioGroupItem, { value: "existing" }),
                    ],
                  }),
                  (0, a.jsxs)("label", {
                    className: (0, k.cn)(
                      "flex cursor-pointer items-center justify-between gap-3 rounded-lg border p-3 transition-colors border-v0-alpha-400 hover:border-v0-alpha-600",
                      "new" === V && "border-v0-gray-1000 bg-v0-gray-200",
                    ),
                    children: [
                      (0, a.jsxs)("div", {
                        className: "flex flex-col justify-around gap-1",
                        children: [
                          (0, a.jsx)("div", {
                            className: "font-medium",
                            children: "Create New Project",
                          }),
                          (0, a.jsx)("div", {
                            className: "text-v0-gray-900",
                            children:
                              "Create a brand new project connected to this repo.",
                          }),
                        ],
                      }),
                      (0, a.jsx)(P.RadioGroupItem, { value: "new" }),
                    ],
                  }),
                ],
              }),
              (0, a.jsxs)("div", {
                className: "flex gap-2 items-end",
                children: [
                  "existing" === V &&
                    (0, a.jsxs)(a.Fragment, {
                      children: [
                        (0, a.jsxs)("div", {
                          className: "flex-1 flex flex-col gap-1 min-w-0",
                          children: [
                            (0, a.jsx)(L.Label, {
                              className: "text-[13px] font-normal",
                              children: "Team",
                            }),
                            ($ && U > 0) || U > 1
                              ? (0, a.jsxs)(T.Select, {
                                  value: G,
                                  onValueChange: W,
                                  children: [
                                    (0, a.jsx)(T.SelectTrigger, {
                                      children: (0, a.jsx)(T.SelectValue, {
                                        children: (0, a.jsxs)("div", {
                                          className:
                                            "flex items-center gap-2 min-w-0",
                                          children: [
                                            (0, a.jsx)(v.AvatarUser, {
                                              size: "xs",
                                              rounded: !0,
                                              teamId: O?.find(
                                                (e) =>
                                                  e.id === G &&
                                                  !(0, x.isUserScope)(e),
                                              )?.id,
                                              userId: O?.find(
                                                (e) =>
                                                  e.id === G &&
                                                  (0, x.isUserScope)(e),
                                              )?.id,
                                            }),
                                            (0, a.jsx)("span", {
                                              className:
                                                "text-sm text-left truncate",
                                              children:
                                                (G && Z?.get(G)) || "Team",
                                            }),
                                          ],
                                        }),
                                      }),
                                    }),
                                    (0, a.jsx)(T.SelectContent, {
                                      children: Array.from(H.keys()).map(
                                        (e) => {
                                          let t = O?.find((t) => t.id === e);
                                          return t
                                            ? (0, a.jsx)(
                                                T.SelectItem,
                                                {
                                                  value: e,
                                                  iconOnRight: !0,
                                                  className: "pl-2 pr-8",
                                                  children: (0, a.jsxs)("div", {
                                                    className:
                                                      "flex items-center gap-2",
                                                    children: [
                                                      (0, a.jsx)(v.AvatarUser, {
                                                        size: "xs",
                                                        rounded: !0,
                                                        teamId: (0,
                                                        x.isUserScope)(t)
                                                          ? void 0
                                                          : t.id,
                                                        userId: (0,
                                                        x.isUserScope)(t)
                                                          ? t.id
                                                          : void 0,
                                                      }),
                                                      (0, a.jsx)("span", {
                                                        className: "text-sm",
                                                        children: t.name,
                                                      }),
                                                    ],
                                                  }),
                                                },
                                                e,
                                              )
                                            : null;
                                        },
                                      ),
                                    }),
                                  ],
                                })
                              : (0, a.jsxs)("div", {
                                  className:
                                    "flex items-center gap-2 h-10 px-3 rounded-md border bg-v0-gray-100 min-w-0",
                                  children: [
                                    (0, a.jsx)(v.AvatarUser, {
                                      size: "xs",
                                      rounded: !0,
                                      teamId: (0, x.isUserScope)(q)
                                        ? void 0
                                        : q?.id,
                                      userId: (0, x.isUserScope)(q)
                                        ? q.id
                                        : void 0,
                                    }),
                                    (0, a.jsx)("span", {
                                      className:
                                        "text-sm text-v0-gray-900 truncate",
                                      children: G && Z?.get(G),
                                    }),
                                  ],
                                }),
                          ],
                        }),
                        (0, a.jsx)(p.HeaderSlash, { className: "mb-1.5" }),
                      ],
                    }),
                  (0, a.jsxs)("div", {
                    className: (0, k.cn)(
                      "flex flex-col gap-1 min-w-0",
                      "flex-1",
                    ),
                    children: [
                      (0, a.jsx)(L.Label, {
                        className: "text-[13px] font-normal",
                        children: "new" === V ? "Project Name" : "Project",
                      }),
                      "new" === V
                        ? (0, a.jsx)(l.Input, {
                            value: em,
                            onChange: (e) => ef(e.target.value),
                            size: "lg",
                          })
                        : G && H.get(G)?.length
                          ? (0, a.jsxs)(T.Select, {
                              value: K?.name,
                              onValueChange: (e) => {
                                G && Y(H.get(G)?.find((t) => t.name === e));
                              },
                              children: [
                                (0, a.jsx)(T.SelectTrigger, {
                                  children: (0, a.jsx)(T.SelectValue, {
                                    children: (0, a.jsxs)("div", {
                                      className:
                                        "flex items-center gap-2 min-w-0",
                                      children: [
                                        K?.framework &&
                                          (0, a.jsx)(v.Avatar, {
                                            rounded: !0,
                                            size: "xs",
                                            className: "bg-v0-background",
                                            children: (0, a.jsx)(
                                              v.AvatarImage,
                                              {
                                                src: `https://api-frameworks.vercel.sh/framework-logos/${"nextjs" === K.framework ? "next" : K.framework}.svg`,
                                              },
                                            ),
                                          }),
                                        (0, a.jsx)("span", {
                                          className:
                                            "text-sm text-left truncate",
                                          children: K?.name,
                                        }),
                                      ],
                                    }),
                                  }),
                                }),
                                G &&
                                  (0, a.jsx)(T.SelectContent, {
                                    children: H.get(G)?.map((e) =>
                                      (0, a.jsx)(
                                        T.SelectItem,
                                        {
                                          value: e.name,
                                          iconOnRight: !0,
                                          className: "pl-2 pr-8",
                                          children: (0, a.jsxs)("div", {
                                            className:
                                              "flex items-center gap-2",
                                            children: [
                                              (0, a.jsx)(v.Avatar, {
                                                rounded: !0,
                                                size: "xs",
                                                className: "bg-v0-background",
                                                children: (0, a.jsx)(
                                                  v.AvatarImage,
                                                  {
                                                    src: `https://api-frameworks.vercel.sh/framework-logos/${"nextjs" === e.framework ? "next" : e.framework}.svg`,
                                                  },
                                                ),
                                              }),
                                              (0, a.jsx)("span", {
                                                className: "text-sm",
                                                children: e.name,
                                              }),
                                            ],
                                          }),
                                        },
                                        e.id,
                                      ),
                                    ),
                                  }),
                              ],
                            })
                          : (0, a.jsxs)("div", {
                              className:
                                "flex items-center gap-2 h-10 px-3 rounded-md border bg-v0-gray-100 min-w-0",
                              children: [
                                K?.framework &&
                                  (0, a.jsx)(v.Avatar, {
                                    rounded: !0,
                                    size: "xs",
                                    className: "bg-v0-background",
                                    children: (0, a.jsx)(v.AvatarImage, {
                                      src: `https://api-frameworks.vercel.sh/framework-logos/${"nextjs" === K.framework ? "next" : K.framework}.svg`,
                                    }),
                                  }),
                                (0, a.jsx)("span", {
                                  className:
                                    "text-sm text-v0-gray-900 truncate",
                                  children: K?.name,
                                }),
                              ],
                            }),
                    ],
                  }),
                ],
              }),
              (0, a.jsxs)("div", {
                className: "flex flex-col gap-1",
                children: [
                  (0, a.jsxs)("div", {
                    className: "flex items-center gap-1",
                    children: [
                      (0, a.jsx)(L.Label, {
                        className: "text-[13px] font-normal",
                        children: "Base Branch",
                      }),
                      (0, a.jsx)(m.Tooltip, {
                        content:
                          "Select the branch that you want to start a chat with. This will be the base branch for your new changes.",
                        children: (0, a.jsx)(d.InformationFillSmall, {
                          className: "text-v0-gray-900",
                        }),
                      }),
                    ],
                  }),
                  eo
                    ? (0, a.jsxs)(I.Popover, {
                        open: Q,
                        onOpenChange: X,
                        children: [
                          (0, a.jsx)(I.PopoverTrigger, {
                            asChild: !0,
                            children: (0, a.jsxs)(o.Button, {
                              variant: "secondary",
                              role: "combobox",
                              "aria-expanded": Q,
                              className: "justify-between font-mono rounded-md",
                              disabled: !ea,
                              children: [
                                (0, a.jsxs)("span", {
                                  className: "flex items-center gap-2",
                                  children: [
                                    (0, a.jsx)(f.GitBranchSmall, {
                                      className: "size-4 text-v0-gray-900",
                                    }),
                                    el ??
                                      (0, a.jsx)("span", {
                                        children: "Select branch",
                                      }),
                                  ],
                                }),
                                (0, a.jsx)(u.ChevronUpDown, {
                                  className: "ml-2 h-4 w-4 shrink-0 opacity-50",
                                }),
                              ],
                            }),
                          }),
                          (0, a.jsx)(I.PopoverContent, {
                            className:
                              "p-0 w-[var(--radix-popover-trigger-width)]",
                            children: (0, a.jsxs)(M.Command, {
                              children: [
                                (0, a.jsx)(M.CommandInput, {
                                  placeholder: "Search branches...",
                                  value: ee,
                                  onValueChange: et,
                                }),
                                (0, a.jsxs)(M.CommandList, {
                                  children: [
                                    (0, a.jsx)(M.CommandEmpty, {
                                      children: "No branches found.",
                                    }),
                                    (0, a.jsx)(M.CommandGroup, {
                                      children: eo.map((e) =>
                                        (0, a.jsxs)(
                                          M.CommandItem,
                                          {
                                            value: e,
                                            onSelect: () => {
                                              (ec(e), X(!1));
                                            },
                                            className: "font-mono",
                                            children: [
                                              (0, a.jsx)(c.Check, {
                                                className: (0, k.cn)(
                                                  "mr-2 h-4 w-4",
                                                  el === e
                                                    ? "opacity-100"
                                                    : "opacity-0",
                                                ),
                                              }),
                                              e,
                                            ],
                                          },
                                          e,
                                        ),
                                      ),
                                    }),
                                  ],
                                }),
                              ],
                            }),
                          }),
                        ],
                      })
                    : (0, a.jsx)(j.Skeleton, { className: "h-10 rounded-md" }),
                ],
              }),
              "new" === V &&
                (0, a.jsxs)("div", {
                  className: "flex flex-col gap-1",
                  children: [
                    (0, a.jsxs)("div", {
                      className: "flex items-center gap-1",
                      children: [
                        (0, a.jsx)(L.Label, {
                          className: "text-[13px] font-normal",
                          children: "Root Directory",
                        }),
                        (0, a.jsx)(m.Tooltip, {
                          content:
                            "For monorepos, select the root directory of your project. This is the directory that will be previewed in the chat.",
                          children: (0, a.jsx)(d.InformationFillSmall, {
                            className: "text-v0-gray-900",
                          }),
                        }),
                      ],
                    }),
                    eu
                      ? (0, a.jsxs)(T.Select, {
                          value: ed,
                          onValueChange: eh,
                          children: [
                            (0, a.jsx)(T.SelectTrigger, {
                              children: (0, a.jsx)(T.SelectValue, {
                                className: "font-mono",
                                children: (0, a.jsxs)("div", {
                                  className:
                                    "font-mono flex items-center gap-2",
                                  children: [
                                    ep &&
                                      (0, a.jsx)(v.Avatar, {
                                        rounded: !0,
                                        size: "xs",
                                        className: "bg-v0-background",
                                        children: (0, a.jsx)(v.AvatarImage, {
                                          src: `https://api-frameworks.vercel.sh/framework-logos/${ep}.svg`,
                                        }),
                                      }),
                                    (0, a.jsx)("span", { children: ed }),
                                  ],
                                }),
                              }),
                            }),
                            (0, a.jsx)(T.SelectContent, {
                              children: eu.map((e) =>
                                (0, a.jsx)(
                                  T.SelectItem,
                                  {
                                    value: e.path || "./",
                                    children: (0, a.jsxs)("div", {
                                      className:
                                        "font-mono flex items-center gap-2",
                                      children: [
                                        (0, a.jsx)(v.Avatar, {
                                          rounded: !0,
                                          size: "xs",
                                          className: "bg-v0-background",
                                          children: (0, a.jsx)(v.AvatarImage, {
                                            src: `https://api-frameworks.vercel.sh/framework-logos/${e.framework}.svg`,
                                          }),
                                        }),
                                        (0, a.jsx)("span", {
                                          children: e.path || "./",
                                        }),
                                      ],
                                    }),
                                  },
                                  e.path,
                                ),
                              ),
                            }),
                          ],
                        })
                      : (0, a.jsx)(j.Skeleton, {
                          className: "h-10 rounded-md",
                        }),
                  ],
                }),
            ],
          }),
          (0, a.jsxs)(h.ModalFooter, {
            className: "bg-v0-background-200 border-t border-v0-alpha-400",
            children: [
              (0, a.jsx)(o.Button, {
                size: "sm",
                variant: "secondary",
                onClick: e,
                className: "rounded-md",
                children: "Back",
              }),
              (0, a.jsx)(S.SpinnerButton, {
                size: "sm",
                className: "rounded-md",
                pending: er,
                onClick: ex,
                disabled: !el || ("existing" === V ? !K : !em.trim() || !eu),
                children: ev,
              }),
            ],
          }),
        ],
      });
    }
    function _({ repoUrl: e }) {
      let [a, o] = (0, r.useState)({ status: "initial" }),
        l = (0, r.useCallback)((e, t, n, r) => {
          o({
            status: "import",
            namespace: e,
            repo: t,
            projects: n,
            source: r,
          });
        }, []),
        c = (0, r.useCallback)(() => o({ status: "initial" }), []),
        u = (0, r.useMemo)(() => {
          switch (a.status) {
            case "initial":
              return (0, t.jsx)(i.InitialContent, { repoUrl: e, onImport: l });
            case "import":
              return a.projects.length
                ? (0, t.jsx)(F, {
                    onBack: c,
                    namespace: a.namespace,
                    repo: a.repo,
                    projects: a.projects,
                    source: a.source,
                  })
                : (0, t.jsx)(s.ImportNew, {
                    onBack: c,
                    namespace: a.namespace,
                    repo: a.repo,
                    source: a.source,
                  });
          }
        }, [a, e, l, c]);
      return (0, t.jsx)(n.AtomicDialog, { type: "gitImport", children: u });
    }
    e.s(["CreateVercelProjectDialog", () => q], 328454);
    var O = t,
      B = r,
      V = o,
      z = h,
      H = l,
      $ = S,
      U = n,
      G = D,
      W = e.i(333095);
    function q({ onProjectCreated: e }) {
      let [t, n] = (0, B.useState)(""),
        r = (0, W.useVercelProjectApi)(),
        i = () => {
          ((0, G.closeDialog)(), n(""));
        };
      return (0, O.jsx)(U.AtomicDialog, {
        type: "createVercelProject",
        children: (0, O.jsxs)("form", {
          action: async () => {
            let n = await r.createProject?.(t);
            n?.id && (e?.({ id: n.id, name: n.name }), i());
          },
          children: [
            (0, O.jsx)(z.ModalHeader, {
              children: (0, O.jsx)(z.ModalTitle, {
                children: "Create New Vercel Project",
              }),
            }),
            (0, O.jsx)(z.ModalContent, {
              children: (0, O.jsx)(H.Input, {
                autoFocus: !0,
                onChange: (e) => n(e.target.value),
                placeholder: "Project Name",
                required: !0,
                value: t,
              }),
            }),
            (0, O.jsxs)(z.ModalFooter, {
              children: [
                (0, O.jsx)(V.Button, {
                  onClick: i,
                  size: "sm",
                  variant: "secondary",
                  children: "Cancel",
                }),
                (0, O.jsx)($.FormSpinnerButton, {
                  size: "sm",
                  variant: "default",
                  disabled: !t.trim() || "loading" === r.status,
                  children: "Create",
                }),
              ],
            }),
          ],
        }),
      });
    }
  },
  102603,
  (e) => {
    "use strict";
    var t = e.i(576191);
    function n() {
      let [e, n] = (0, t.useState)(!1);
      return (
        (0, t.useEffect)(() => {
          n(
            navigator.userAgent.toLocaleLowerCase().includes("safari") &&
              !navigator.userAgent.toLocaleLowerCase().includes("chrome"),
          );
        }, []),
        e
      );
    }
    e.s(["useSafari", () => n]);
  },
  425511,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(686832),
      r = e.i(120945),
      i = e.i(176248),
      s = e.i(576191),
      a = e.i(763480),
      o = e.i(707974),
      l = e.i(37737),
      c = e.i(102603);
    function u({ path: e }) {
      let [u, d] = (0, s.useState)(""),
        h = (0, c.useSafari)();
      function p() {
        if (!u.trim()) return;
        let t = window.location.origin,
          n = new URL(`${t}${e}`);
        n.searchParams.set("scope", u.trim());
        let r = n.toString();
        (h
          ? window.open(r, "_blank", "width=1200,height=800")
          : window.open(r, "_blank"),
          (0, l.closeDialog)());
      }
      return (0, t.jsxs)(r.AtomicDialog, {
        type: "snowflakeRole",
        children: [
          (0, t.jsxs)(n.ModalHeader, {
            children: [
              (0, t.jsx)(n.ModalTitle, { children: "Snowflake Role" }),
              (0, t.jsx)(n.ModalDescription, {
                className: "text-sm text-v0-gray-1000",
                children: "Enter the Snowflake role you want to connect with",
              }),
            ],
          }),
          (0, t.jsx)(n.ModalContent, {
            className: "flex flex-col gap-4",
            children: (0, t.jsxs)("div", {
              className: "space-y-2",
              children: [
                (0, t.jsx)(o.Label, {
                  htmlFor: "snowflake-role",
                  children: "Role",
                }),
                (0, t.jsx)(a.Input, {
                  id: "snowflake-role",
                  placeholder: "Enter Snowflake role",
                  value: u,
                  onChange: (e) => d(e.target.value),
                  onKeyDown: (e) => {
                    "Enter" === e.key && p();
                  },
                  autoFocus: !0,
                }),
              ],
            }),
          }),
          (0, t.jsxs)(n.ModalFooter, {
            className: "bg-v0-background-200 border-v0-alpha-400 border-t",
            children: [
              (0, t.jsx)(n.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(i.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: "Cancel",
                }),
              }),
              (0, t.jsx)(i.Button, {
                size: "sm",
                disabled: !u.trim(),
                onClick: p,
                children: "Connect",
              }),
            ],
          }),
        ],
      });
    }
    e.s(["SnowflakeRoleDialog", () => u]);
  },
  128297,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.53033 4.46967L5 3.93934L3.93934 5L4.46967 5.53033L10.4697 11.5303L11 12.0607L12.0607 11L11.5303 10.4697L5.53033 4.46967Z" fill="currentColor"/>',
    );
    e.s(["Slash", 0, t]);
  },
  985005,
  (e) => {
    "use strict";
    e.s([
      "ConnectIntegration",
      () => $,
      "createForbiddenIntegrationState",
      () => V,
      "useConnectIntegrationAtoms",
      () => M,
    ]);
    var t = e.i(324834),
      n = e.i(44337),
      r = e.i(142219),
      i = e.i(576191),
      s = e.i(667660),
      a = e.i(538553),
      o = e.i(556355),
      l = e.i(431141),
      c = e.i(176248),
      u = e.i(304649),
      d = e.i(222431),
      h = e.i(389140),
      p = e.i(227152),
      m = e.i(910427),
      f = e.i(707827),
      g = e.i(102603),
      x = e.i(407562),
      v = e.i(686832),
      y = e.i(502398),
      b = e.i(748819),
      j = e.i(996174),
      w = e.i(53223),
      C = e.i(794593),
      k = e.i(32170),
      S = e.i(323194),
      N = e.i(9654),
      E = e.i(37737),
      A = e.i(643312),
      D = e.i(762585);
    let I = (0, N.atom)(null);
    function M() {
      return {
        atoms: { pendingIntegrationCheck: I },
        actions: {
          maybeClearPendingIntegration: (e) => {
            let t = r.store.get(I);
            t &&
              (Date.now() - t.startedAt > 3e5
                ? r.store.set(I, null)
                : !e ||
                  (e.some((e) => e.name === t.name && e.isConnected) &&
                    r.store.set(I, null)));
          },
          setPendingIntegrationCheck: (e) => {
            r.store.set(I, { name: e, startedAt: Date.now() });
          },
        },
      };
    }
    let T = (0, i.createContext)(null),
      L = () => {
        let e = (0, i.useContext)(T);
        if (!e)
          throw Error(
            "useConnectIntegration must be used within a ConnectIntegrationProvider",
          );
        return e;
      };
    function P() {
      let {
        state: { acceptPoliciesModalData: e, isConnecting: n },
        actions: {
          setAcceptPoliciesModalData: r,
          handleAcceptIntegrationPolicies: i,
        },
      } = L();
      if (!e) return null;
      let s = null;
      e.eulaLink &&
        (s = (0, t.jsx)("li", {
          children: (0, t.jsxs)(y.Link, {
            className: "inline-flex items-center gap-2",
            href: e.eulaLink.url,
            target: "_blank",
            prefetch: !1,
            children: [
              e.eulaLink.text,
              (0, t.jsx)(h.External, { className: "h-3 w-3" }),
            ],
          }),
        }));
      let a = null;
      e.privacyLink &&
        (a = (0, t.jsx)("li", {
          children: (0, t.jsxs)(y.Link, {
            className: "inline-flex items-center gap-2",
            href: e.privacyLink.url,
            target: "_blank",
            prefetch: !1,
            children: [
              e.privacyLink.text,
              (0, t.jsx)(h.External, { className: "h-3 w-3" }),
            ],
          }),
        }));
      let o = (0, t.jsxs)(v.ModalHeader, {
          children: [
            (0, t.jsx)(v.ModalTitle, { children: e.title }),
            (0, t.jsx)(v.ModalDescription, { children: e.description }),
          ],
        }),
        l = (0, t.jsx)(v.ModalContent, {
          children: (0, t.jsxs)("div", {
            className: "space-y-4 p-2",
            children: [
              (0, t.jsxs)("ul", {
                className: "list-disc pl-5 space-y-1",
                children: [
                  (0, t.jsx)("li", {
                    children: (0, t.jsxs)(y.Link, {
                      className: "inline-flex items-center gap-2",
                      href: e.addendumLink.url,
                      target: "_blank",
                      prefetch: !1,
                      children: [
                        e.addendumLink.text,
                        (0, t.jsx)(h.External, { className: "h-3 w-3" }),
                      ],
                    }),
                  }),
                  s,
                  a,
                ],
              }),
              (0, t.jsx)("div", {
                children: (0, t.jsx)(b.MemodMarkdown, { children: e.footerMD }),
              }),
            ],
          }),
        }),
        u = (0, t.jsxs)(v.ModalFooter, {
          children: [
            (0, t.jsx)(c.Button, {
              variant: "outline",
              onClick: () => r(null),
              children: "Cancel",
            }),
            (0, t.jsx)(c.Button, {
              disabled: n,
              onClick: () => {
                i();
              },
              children: e.actionButtonText,
            }),
          ],
        });
      return (0, t.jsxs)(v.Modal, {
        open: !0,
        onOpenChange: (e) => {
          e || r(null);
        },
        children: [o, l, u],
      });
    }
    function R({ existingInstance: e }) {
      let {
        state: { hasVercelWritePermission: n, integration: r },
        actions: { handleConnectExistingInstance: i },
      } = L();
      return (0, t.jsx)(
        a.RbacTooltip,
        {
          show: !n,
          requiredRole: "V0Builder",
          children: (0, t.jsxs)(o.DropdownMenuItem, {
            className: (0, u.cn)("gap-3 px-3"),
            onClick: () => i(e.id),
            disabled: !n,
            children: [
              (0, t.jsx)("div", {
                className:
                  "relative size-4 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400",
                children: (0, t.jsx)(l.default, {
                  src: r.lightIconUrl,
                  alt: e.name,
                  className: "select-none object-cover",
                  fill: !0,
                }),
              }),
              (0, t.jsx)("span", { children: e.name || "Unnamed Instance" }),
            ],
          }),
        },
        e.id,
      );
    }
    function F() {
      let {
        state: { hasVercelWritePermission: e, integration: n, isDisabled: r },
        actions: { handleConnectNewInstance: i },
      } = L();
      return n.existingInstances.length
        ? (0, t.jsxs)(o.DropdownMenu, {
            children: [
              (0, t.jsx)(a.RbacTooltip, {
                show: !e,
                requiredRole: "V0Builder",
                children: (0, t.jsx)(o.DropdownMenuTrigger, {
                  asChild: !0,
                  children: (0, t.jsx)(c.Button, {
                    size: "sm",
                    variant: "secondary",
                    className: (0, u.cn)(
                      "w-[28px] rounded-md rounded-l-none px-2 size-7",
                    ),
                    disabled: !e || r,
                    children: (0, t.jsx)(d.ChevronDown, {
                      className: "h-4 w-4",
                    }),
                  }),
                }),
              }),
              (0, t.jsx)(o.DropdownMenuContent, {
                className: "max-h-[200px] overflow-y-auto",
                align: "start",
                children: (0, t.jsxs)(o.DropdownMenuGroup, {
                  children: [
                    (0, t.jsx)(a.RbacTooltip, {
                      show: !e,
                      requiredRole: "V0Builder",
                      children: (0, t.jsxs)(o.DropdownMenuItem, {
                        onClick: () => {
                          i();
                        },
                        className: "gap-3 px-3",
                        disabled: !e,
                        children: [
                          (0, t.jsx)(m.PlusCircle, { className: "size-4" }),
                          (0, t.jsx)("span", { children: "Create new" }),
                        ],
                      }),
                    }),
                    n.existingInstances.map((e) =>
                      (0, t.jsx)(R, { existingInstance: e }, e.id),
                    ),
                  ],
                }),
              }),
            ],
          })
        : null;
    }
    function _({ claimFlow: e }) {
      let {
          actions: { handleClaimClick: n },
          state: { className: r },
        } = L(),
        [s, a] = (0, i.useState)(!1);
      return (0, t.jsx)(j.Tooltip, {
        className: (0, u.cn)("max-w-[200px] pointer-events-auto"),
        open: s,
        onOpenChange: a,
        content: (0, t.jsxs)("div", {
          children: [
            e.description,
            " ",
            (0, t.jsxs)("a", {
              className: "text-v0-blue-700 cursor-pointer hover:underline",
              href: e.learnMoreUrl,
              target: "_blank",
              rel: "noopener noreferrer",
              children: [
                (0, t.jsx)(h.External, {
                  className: "inline h-3 w-3 mr-1 mb-0.5",
                }),
                "Learn more",
              ],
            }),
          ],
        }),
        disableHoverableContent: !1,
        children: (0, t.jsx)(c.Button, {
          variant: "secondary",
          className: r,
          size: "sm",
          onClick: () => n(e),
          children: "Claim",
        }),
      });
    }
    function O() {
      let {
        state: { className: e },
      } = L();
      return (0, t.jsxs)(c.Button, {
        disabled: !0,
        size: "sm",
        variant: "secondary",
        className: e,
        children: [(0, t.jsx)(f.Spinner, { size: 14 }), "Connecting"],
      });
    }
    function B() {
      let {
        state: { className: e, integration: n },
      } = L();
      if (n.claimFlow) return (0, t.jsx)(_, { claimFlow: n.claimFlow });
      if (n.manageUrls?.length) {
        let r = n.manageUrls.at(0);
        return 1 === n.manageUrls.length && r
          ? (0, t.jsx)(c.Button, {
              size: "sm",
              variant: "secondary",
              className: e,
              onClick: () =>
                (0, E.openDialog)({
                  type: "manageIntegration",
                  data: { integration: n },
                }),
              children: r.title,
            })
          : (0, t.jsxs)(o.DropdownMenu, {
              children: [
                (0, t.jsx)(o.DropdownMenuTrigger, {
                  asChild: !0,
                  children: (0, t.jsx)(c.Button, {
                    size: "sm",
                    variant: "secondary",
                    className: e,
                    children: "Manage",
                  }),
                }),
                (0, t.jsx)(o.DropdownMenuContent, {
                  align: "start",
                  children: (0, t.jsx)(o.DropdownMenuGroup, {
                    children: n.manageUrls.map((e) =>
                      (0, t.jsx)(
                        o.DropdownMenuItem,
                        {
                          asChild: !0,
                          children: (0, t.jsxs)("a", {
                            href: e.url,
                            target: "_blank",
                            rel: "noreferrer noopener",
                            children: [
                              (0, t.jsx)(h.External, { className: "size-4" }),
                              e.title,
                            ],
                          }),
                        },
                        e.url,
                      ),
                    ),
                  }),
                }),
              ],
            });
      }
      return (0, t.jsx)(c.Button, {
        disabled: !0,
        size: "sm",
        variant: "secondary",
        className: e,
        children: "Connected",
      });
    }
    function V(e) {
      let t = n.INTEGRATION_NAME_TO_SVG[e] || "/placeholder.svg";
      return {
        integration: {
          id: e,
          metadata: {},
          claimFlow: null,
          slug: n.INTEGRATION_NAME_TO_SLUG[e],
          category: n.INTEGRATION_NAME_TO_CATEGORY[e],
          connectedInstanceName: null,
          manageUrls: [],
          existingInstances: [],
          lightIconUrl: t,
          darkIconUrl: t,
          isConnected: !1,
          tooltip: null,
          description: "",
          name: e,
          isBeta: (0, n.isIntegrationInBeta)(e),
          supportsMcp: !1,
          mcpPermission: null,
        },
        isForbidden: !0,
        isDisabled: !0,
        isConnecting: !1,
      };
    }
    function z() {
      let { expectUser: e } = (0, k.useUser)(),
        { setShowSignInDialog: n } = (0, S.useSignInDialog)(),
        {
          state: { className: r },
        } = L();
      return e
        ? (0, t.jsx)(c.Button, {
            disabled: !0,
            size: "sm",
            variant: "secondary",
            className: r,
            children: "Install",
          })
        : (0, t.jsx)(c.Button, {
            size: "sm",
            variant: "secondary",
            className: r,
            onClick: () => n({ content: !1 }),
            children: "Log in",
          });
    }
    function H({ className: e, children: n }) {
      return (0, t.jsx)("div", {
        className: (0, u.cn)(
          "relative size-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400",
          e,
        ),
        children: n,
      });
    }
    let $ = {
      Button: function () {
        let {
          state: {
            integration: e,
            hasVercelWritePermission: n,
            isConnecting: r,
            isDisabled: i,
            isForbidden: s,
            className: o,
            installClassName: l,
          },
          actions: { handleConnectNewInstance: d },
        } = L();
        if (s) return (0, t.jsx)(z, {});
        if (r) return (0, t.jsx)(O, {});
        if (e.isConnected) return (0, t.jsx)(B, {});
        let h = "Snowflake" === e.name ? "Connect" : "Install";
        return (0, t.jsxs)("div", {
          className: "flex",
          children: [
            (0, t.jsx)(P, {}),
            (0, t.jsx)(a.RbacTooltip, {
              show: !n,
              requiredRole: "V0Builder",
              children: (0, t.jsx)(c.Button, {
                disabled: !n || i,
                size: "sm",
                variant: "secondary",
                className: (0, u.cn)(
                  o,
                  e.existingInstances.length > 0 &&
                    "w-[calc(114px-28px)] rounded-r-none border-r-0",
                  l,
                ),
                onClick: () => {
                  d();
                },
                children: h,
              }),
            }),
            (0, t.jsx)(F, {}),
          ],
        });
      },
      Provider: ({ children: e, state: n, actions: r }) => {
        let { hasVercelWritePermission: a } = (0, s.useActiveScope)(),
          {
            integration: o,
            isConnecting: l,
            isDisabled: c,
            className: d,
            installClassName: h,
            isForbidden: p,
          } = n,
          { handleConnect: m } = r,
          f = (0, g.useSafari)(),
          [v, y] = (0, i.useState)(null),
          { actions: b } = M();
        function j(e) {
          "Snowflake" === o.name
            ? (0, E.openDialog)({ type: "snowflakeRole", data: { path: e } })
            : (b.setPendingIntegrationCheck(o.name), f)
              ? window.open(e, "_blank", "width=1200,height=800")
              : window.open(e, "_blank");
        }
        let C = (e) => {
          try {
            ((0, w.track)("ClickClaimSandbox", {
              integrationId: e.integrationConfigurationId,
              resourceId: e.resourceId,
            }),
              window.open(e.url, "_blank"));
          } catch (e) {
            console.error("Error opening claim URL:", e);
          }
        };
        function k(e) {
          if ("error" === e.status) return (x.toast.error(e.message), e);
          let t = e.connectedIntegrations.at(0);
          return (
            t &&
              ("error" === t.status
                ? x.toast.error(t.message || "An error occurred")
                : t.redirectUrl
                  ? j(t.redirectUrl)
                  : t.acceptPolicies
                    ? y(t.acceptPolicies)
                    : y(null)),
            e
          );
        }
        async function S(e) {
          return m
            ? k(
                await m({
                  connectIntegrations: [
                    {
                      integrationId: o.id,
                      name: o.name,
                      existingInstanceId: e,
                    },
                  ],
                }),
              )
            : void x.toast.error("Cannot connect integration at this time");
        }
        async function N() {
          return o.pendingRedirect && o.pendingRedirect.expiresAt > Date.now()
            ? k({
                status: "success",
                connectedIntegrations: [
                  {
                    status: "success",
                    integrationId: o.id,
                    integrationName: o.name,
                    redirectUrl: o.pendingRedirect.url,
                    isPending: !0,
                  },
                ],
                createdV0Project: null,
                createdVercelProjectId: null,
              })
            : m
              ? k(
                  await m({
                    connectIntegrations: [
                      { integrationId: o.id, name: o.name },
                    ],
                  }),
                )
              : void x.toast.error("Cannot connect integration at this time");
        }
        async function A() {
          return v
            ? m
              ? k(
                  await m({
                    connectIntegrations: [
                      {
                        integrationId: o.id,
                        name: o.name,
                        acceptedLinks: {
                          eulaLink: !!v.eulaLink,
                          privacyLink: !!v.privacyLink,
                        },
                      },
                    ],
                  }),
                )
              : void x.toast.error("Cannot connect integration at this time")
            : void x.toast.error("No policies to accept");
        }
        return (0, t.jsx)(T.Provider, {
          value: {
            state: {
              hasVercelWritePermission: a,
              acceptPoliciesModalData: v,
              integration: o,
              isForbidden: p,
              isConnecting: l,
              isDisabled: c,
              className: (0, u.cn)("w-[114px] rounded-md h-7", d),
              installClassName: h,
            },
            actions: {
              setAcceptPoliciesModalData: y,
              handleConnectNewInstance: N,
              handleClaimClick: C,
              handleConnectExistingInstance: S,
              handleAcceptIntegrationPolicies: A,
              openRedirectUrl: j,
            },
          },
          children: e,
        });
      },
      Icon: function ({ containerClassName: e, iconClassName: n }) {
        let {
            state: { integration: r },
          } = L(),
          { integrationIcons: i, isLoadingIcons: s } = (0,
          A.useIntegrationIcons)(),
          { lightIconUrl: a, name: o } = r,
          c = i.get(o) || a;
        return s
          ? (0, t.jsx)(H, {
              className: e,
              children: (0, t.jsx)(D.Skeleton, {
                className: (0, u.cn)("select-none object-cover size-full", n),
              }),
            })
          : (0, t.jsx)(H, {
              className: e,
              children: (0, t.jsx)(l.default, {
                src: c,
                alt: r.name,
                className: (0, u.cn)("select-none object-cover", n),
                fill: !0,
              }),
            });
      },
      Tooltip: function () {
        let {
          state: { integration: e },
        } = L();
        return e.tooltip
          ? (0, t.jsx)(j.Tooltip, {
              content: e.tooltip,
              side: "top",
              children: (0, t.jsx)(p.InformationFillSmall, {
                className: "size-4 text-v0-gray-900",
              }),
            })
          : null;
      },
      Badge: function () {
        let {
          state: { integration: e },
        } = L();
        return e.isBeta
          ? (0, t.jsx)(C.Badge, {
              contrast: "subtle",
              size: "small",
              children: "Beta",
            })
          : null;
      },
      ForbiddenButton: z,
    };
  },
  605624,
  (e) => {
    "use strict";
    e.s(["ManageIntegrationDialog", () => D, "useMcpPermissions", () => g]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(176248),
      s = e.i(794593),
      a = e.i(235009),
      o = e.i(996174),
      l = e.i(886002),
      c = e.i(389140),
      u = e.i(128297),
      d = e.i(198737),
      h = e.i(44337);
    e.i(563948);
    var p = e.i(407562),
      m = e.i(37737),
      f = e.i(985005);
    function g({ integration: e }) {
      let [t, r] = (0, n.useState)(
          e.mcpPermission?.currentPermission || "manual",
        ),
        [i, s] = (0, n.useTransition)();
      return {
        mcpPermission: t,
        isLoadingPermission: i,
        onPermissionChange: (t) => {
          s(async () => {
            if (!e.name) return void p.toast.error("Integration not found");
            let n = e.name + " MCP permissions";
            try {
              let i = (0, h.isIntegrationName)(e.name)
                  ? {
                      type: "integration",
                      integrationName: e.name,
                      permission: t,
                    }
                  : { type: "mcp", mcpName: e.name, permission: t },
                s = await fetch("/chat/api/integrations/mcp/permissions", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify(i),
                });
              if (!s.ok) {
                let e = await s.json().catch(() => ({}));
                throw Error(e.error || "Failed to update permission");
              }
              (r(t),
                p.toast.success(`${n} updated`, {
                  description: `${n} set to ${t}`,
                }));
            } catch (e) {
              (console.error(`Failed to update ${n}:`, e),
                p.toast.error(`Failed to update ${n}`, {
                  description:
                    e instanceof Error
                      ? e.message
                      : "An unexpected error occurred",
                }));
            }
          });
        },
      };
    }
    let x = (0, n.createContext)(null);
    function v() {
      let e = (0, n.useContext)(x);
      if (!e)
        throw Error(
          "useManageIntegration must be used within a ManageIntegrationProvider",
        );
      return e;
    }
    function y({ className: e }) {
      return (0, t.jsx)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: (0, t.jsx)("path", {
          d: "M7.24852 4V7.25M7.24852 4V2C7.24852 1.30964 7.80812 0.75 8.49852 0.75C9.18882 0.75 9.74852 1.30964 9.74852 2V7.25M7.24852 4C7.24852 3.30964 6.68882 2.75 5.99852 2.75C5.30815 2.75 4.74851 3.30964 4.74851 4V9.25L3.14475 7.3273C2.53286 6.5937 1.41586 6.5731 0.752918 7.2609M0.752918 7.2609L2.73177 12.1319C3.4976 14.017 5.32938 15.25 7.36412 15.25H11.2485C13.4576 15.25 14.7482 13.4591 14.7482 11.25V5C14.7482 4.30964 14.1885 3.75 13.4982 3.75C12.8078 3.75 12.2482 4.30964 12.2482 5M0.752918 7.2609C0.750238 7.2543 0.747978 7.266 0.752918 7.2609ZM9.74818 5V3C9.74818 2.30964 10.3078 1.75 10.9982 1.75C11.6885 1.75 12.2482 2.30964 12.2482 3V7.25",
          stroke: "currentColor",
          strokeWidth: "1.5",
          strokeLinecap: "round",
          strokeLinejoin: "round",
        }),
      });
    }
    function b() {
      let {
        mcpPermission: e,
        onPermissionChange: n,
        isLoadingPermission: r,
      } = v();
      return (0, t.jsxs)(a.TabsToggle, {
        value: e,
        onValueChange: (e) => {
          e && ["disabled", "manual", "auto"].includes(e) && n(e);
        },
        children: [
          (0, t.jsx)(o.Tooltip, {
            content: "Disable",
            children: (0, t.jsx)(a.TabsToggleTrigger, {
              value: "disabled",
              square: !0,
              disabled: r,
              children: (0, t.jsx)(u.Slash, { className: "size-4" }),
            }),
          }),
          (0, t.jsx)(o.Tooltip, {
            content: "Ask for approval",
            children: (0, t.jsx)(a.TabsToggleTrigger, {
              value: "manual",
              square: !0,
              disabled: r,
              children: (0, t.jsx)(y, { className: "size-4" }),
            }),
          }),
          (0, t.jsx)(o.Tooltip, {
            content: "Always run",
            children: (0, t.jsx)(a.TabsToggleTrigger, {
              value: "auto",
              square: !0,
              disabled: r,
              children: (0, t.jsx)(d.CheckCircle, { className: "size-4" }),
            }),
          }),
        ],
      });
    }
    function j() {
      let { mcpPermission: e } = v();
      return "disabled" === e
        ? null
        : (0, t.jsx)(l.Note, {
            variant: "info",
            children:
              "Enabling remote MCP for an integration may increase per-message costs and could potentially execute destructive actions.",
          });
    }
    function w() {
      let e,
        { mcpPermission: n } = v();
      switch (n) {
        case "disabled":
          e = "v0 will not use toolcalls when generating responses.";
          break;
        case "manual":
          e = "v0 will ask for approval before using toolcalls in responses.";
          break;
        case "auto":
          e = "v0 will automatically run toolcalls in its responses.";
          break;
        default:
          console.error("Unhandled MCP permission state:", n);
      }
      return (0, t.jsx)("p", {
        className: "text-sm text-v0-gray-900",
        children: e,
      });
    }
    function C() {
      let { integration: e } = v();
      return e.manageUrls?.[0]?.url
        ? (0, t.jsx)(f.ConnectIntegration.Provider, {
            state: (0, f.createForbiddenIntegrationState)(e.name),
            actions: { handleConnect: null },
            children: (0, t.jsx)(f.ConnectIntegration.Icon, {
              containerClassName: "size-9",
            }),
          })
        : null;
    }
    function k() {
      let { integration: e } = v(),
        n = e.manageUrls?.[0]?.url;
      return n
        ? (0, t.jsx)(i.Button, {
            variant: "secondary",
            size: "sm",
            asChild: !0,
            className: "rounded-md px-2.5",
            children: (0, t.jsxs)("a", {
              href: n,
              target: "_blank",
              rel: "noopener noreferrer",
              children: [
                "Configure",
                (0, t.jsx)(c.External, { className: "size-4" }),
              ],
            }),
          })
        : null;
    }
    let S = ({ children: e, integration: n }) => {
        let r = g({ integration: n });
        return (0, t.jsx)(x.Provider, {
          value: { integration: n, ...r },
          children: e,
        });
      },
      N = function () {
        let { integration: e } = v();
        return (0, t.jsxs)("div", {
          className: "flex items-start justify-between gap-4",
          children: [
            (0, t.jsxs)("div", {
              className: "flex items-center gap-3",
              children: [
                (0, t.jsx)(C, {}),
                (0, t.jsxs)("div", {
                  className: "flex flex-col",
                  children: [
                    (0, t.jsx)("h3", {
                      className: "text-label-14 font-medium",
                      children: e.name,
                    }),
                    (0, t.jsx)("p", {
                      className: "text-label-14 text-v0-gray-900",
                      children: e.description,
                    }),
                  ],
                }),
              ],
            }),
            (0, t.jsx)(k, {}),
          ],
        });
      },
      E = function () {
        let { integration: e } = v(),
          n = [
            e.connectedInstanceName && {
              label: "Instance Name",
              value: e.connectedInstanceName,
            },
            { label: "Category", value: e.category },
            {
              label: "Documentation",
              value: (0, t.jsx)(i.Button, {
                variant: "ghost",
                size: "sm",
                className: "h-auto p-0 hover:bg-transparent",
                asChild: !0,
                children: (0, t.jsx)("a", {
                  href: `https://vercel.com/marketplace/${e.slug}`,
                  target: "_blank",
                  rel: "noopener noreferrer",
                  children: (0, t.jsx)(c.External, { className: "size-4" }),
                }),
              }),
            },
          ].filter(Boolean);
        return (0, t.jsx)("div", {
          className:
            "flex flex-col gap-1 rounded-lg border border-v0-alpha-400 bg-v0-background-300 p-2",
          children: n.map((e, n) =>
            (0, t.jsxs)(
              "div",
              {
                className:
                  "flex justify-between items-center h-9 p-2 rounded even:bg-v0-background-200",
                children: [
                  (0, t.jsx)("div", {
                    className: "text-label-14 text-v0-gray-900 font-medium",
                    children: e.label,
                  }),
                  (0, t.jsx)("div", {
                    className: "text-label-14",
                    children: e.value,
                  }),
                ],
              },
              n,
            ),
          ),
        });
      },
      A = function () {
        let { integration: e } = v();
        return e.supportsMcp
          ? (0, t.jsxs)(t.Fragment, {
              children: [
                (0, t.jsx)("div", { className: "h-px bg-v0-alpha-400" }),
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-4",
                  children: [
                    (0, t.jsxs)("div", {
                      className: "flex items-center justify-between",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex flex-col gap-1.5",
                          children: [
                            (0, t.jsxs)("span", {
                              className: "flex items-center gap-2",
                              children: [
                                (0, t.jsx)("span", {
                                  className: "text-label-14 font-medium",
                                  children: "Remote MCP",
                                }),
                                (0, t.jsx)(s.Badge, {
                                  size: "small",
                                  variant: "blue",
                                  children: "New",
                                }),
                              ],
                            }),
                            (0, t.jsx)(w, {}),
                          ],
                        }),
                        (0, t.jsx)(b, {}),
                      ],
                    }),
                    (0, t.jsx)(j, {}),
                  ],
                }),
              ],
            })
          : null;
      };
    function D({ integration: e }) {
      return (0, t.jsxs)(r.Modal, {
        open: !0,
        onOpenChange: (e) => !e && (0, m.closeDialog)(),
        children: [
          (0, t.jsx)(r.ModalHeader, {
            children: (0, t.jsx)(r.ModalTitle, {
              children: "Manage Integration",
            }),
          }),
          (0, t.jsx)(S, {
            integration: e,
            children: (0, t.jsxs)(r.ModalContent, {
              className: "space-y-6",
              children: [
                (0, t.jsx)(N, {}),
                (0, t.jsx)(E, {}),
                (0, t.jsx)(A, {}),
              ],
            }),
          }),
          (0, t.jsx)(r.ModalFooter, {
            className: "bg-v0-background-200 p-3 border-t border-v0-alpha-400",
            children: (0, t.jsx)(r.ModalClose, {
              asChild: !0,
              children: (0, t.jsx)(i.Button, {
                variant: "secondary",
                size: "sm",
                className: "rounded-md px-2.5",
                children: "Dismiss",
              }),
            }),
          }),
        ],
      });
    }
  },
  782742,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M5.51324 3.62367L3.76375 8.34731C3.61845 8.7396 3.24433 8.99999 2.826 8.99999H0.75H0V7.49999H0.75H2.47799L4.56666 1.86057C4.88684 0.996097 6.10683 0.988493 6.43776 1.84891L10.5137 12.4463L12.2408 8.1286C12.3926 7.74894 12.7604 7.49999 13.1693 7.49999H15.25H16V8.99999H15.25H13.5078L11.433 14.1868C11.0954 15.031 9.8976 15.023 9.57122 14.1744L5.51324 3.62367Z" fill="currentColor"/>',
    );
    e.s(["ChartActivity", 0, t]);
  },
  676069,
  (e) => {
    "use strict";
    function t(e) {
      return "string" == typeof e ? "v0-level0" === e : "v0-level0" === e.slug;
    }
    e.s(["isFreePlan", () => t]);
  },
  174890,
  334548,
  (e) => {
    "use strict";
    e.s(["BuiltWithV0Provider", () => m, "useBuiltWithV0", () => f], 174890);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(183673),
      i = e.i(32170),
      s = e.i(676069);
    e.i(904347);
    var a = e.i(37737);
    e.i(563948);
    var o = e.i(407562),
      l = e.i(53223),
      c = e.i(297239),
      u = e.i(919012),
      d = (0, u.createServerReference)(
        "604cb9465ffb7b19f3a1329369c97a0cca51044e0b",
        u.callServer,
        void 0,
        u.findSourceMapURL,
        "updateChatShowV0Button",
      ),
      h = e.i(209819);
    let p = (0, n.createContext)(void 0);
    function m({ children: e }) {
      let u = (0, c.useT)(),
        { project: m, chatId: f } = (0, h.useChatMetadata)();
      m?.projectId;
      let {
          showV0Button: g,
          mutate: x,
          isLoading: v,
        } = (0, r.useChatShowV0Button)(f),
        { user: y } = (0, i.useUser)(),
        b = (0, n.useMemo)(
          () => (0, s.isFreePlan)(y?.v0plan ?? ""),
          [y?.v0plan],
        ),
        j = (0, n.useMemo)(() => !!b || g, [b, g]),
        w = (0, n.useCallback)(async () => {
          if (!f) return;
          if (b) return void (0, a.openDialog)({ type: "upgradePlan" });
          let e = !j;
          (x(e),
            (0, l.track)("ToggleBuiltWithV0Button", { chatId: f, value: e }));
          try {
            let t = await d(f, e);
            if ("object" == typeof t && "error" in t) throw Error(t.error);
            o.toast.success(
              u("projectSettings.showV0Button.success")(
                e
                  ? u("projectSettings.showV0Button.success.shown")
                  : u("projectSettings.showV0Button.success.hidden"),
              ),
            );
          } catch (t) {
            (x(!e), o.toast.error(u("projectSettings.showV0Button.error")));
          }
        }, [j, b, x, u, f]),
        C = (0, n.useMemo)(
          () => ({ checked: j, isFreeUser: b, isLoading: v, handleToggle: w }),
          [j, b, v, w],
        );
      return f ? (0, t.jsx)(p.Provider, { value: C, children: e }) : null;
    }
    function f() {
      let e = (0, n.useContext)(p);
      if (void 0 === e)
        throw Error("useBuiltWithV0 must be used within a BuiltWithV0Provider");
      return e;
    }
    e.s(["ToggleSwitch", () => b], 334548);
    var g = t,
      x = e.i(707974),
      v = e.i(990453),
      y = c;
    function b() {
      let e = (0, y.useT)(),
        { checked: t, handleToggle: n } = f();
      return (0, g.jsxs)("div", {
        className:
          "bg-v0-background-300 border-v0-alpha-400 flex items-center gap-2 justify-between rounded-lg border p-3",
        children: [
          (0, g.jsxs)(x.Label, {
            className: "flex cursor-pointer flex-col gap-1",
            htmlFor: "show-v0-button-switch",
            children: [
              (0, g.jsx)("span", {
                className:
                  "flex gap-2 font-medium leading-[16px] text-v0-gray-1000",
                children: e("projectSettings.showV0Button.label"),
              }),
              (0, g.jsx)("span", {
                className: "leading-[16px] text-v0-gray-900 font-normal",
                children: e("projectSettings.showV0Button.description"),
              }),
            ],
          }),
          (0, g.jsx)(v.Switch, {
            id: "show-v0-button-switch",
            checked: t,
            onCheckedChange: n,
          }),
        ],
      });
    }
  },
  749709,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(996174),
      r = e.i(494266);
    let i = ({
      title: e,
      icon: i,
      onClick: s,
      label: a,
      disabled: o,
      disabledReason: l,
      badge: c,
      trailing: u,
    }) =>
      (0, t.jsx)(n.Tooltip, {
        content: o && l ? l : void 0,
        disableHoverableContent: (!o || !l) && void 0,
        side: "left",
        children: (0, t.jsxs)("button", {
          className:
            "group disabled:cursor-not-allowed disabled:opacity-65 w-full flex flex-row justify-between items-center disabled:hover:bg-transparent hover:bg-v0-gray-100 rounded-[6px] transition-all duration-200 px-2 h-9",
          onClick: s,
          disabled: o,
          type: "button",
          children: [
            (0, t.jsxs)("div", {
              className: "flex flex-row items-center gap-2",
              children: [
                i,
                (0, t.jsx)("span", { className: "text-label-14", children: e }),
                (0, t.jsx)("div", { className: "mb-0.5", children: c }),
              ],
            }),
            u
              ? (0, t.jsx)("div", {
                  className: "flex flex-row items-center gap-x-1",
                  children: u,
                })
              : (0, t.jsxs)("div", {
                  className:
                    "flex flex-row justify-center items-center gap-x-1",
                  children: [
                    a &&
                      (0, t.jsx)("span", {
                        className: "text-label-14",
                        children: a,
                      }),
                    (0, t.jsx)(r.ChevronRightSmall, { className: "size-4" }),
                  ],
                }),
          ],
        }),
      });
    e.s(["default", 0, i]);
  },
  624424,
  539338,
  (e) => {
    "use strict";
    e.s([], 624424);
    var t = e.i(174890);
    (e.i(334548), e.s(["ToggleMenuItem", () => u], 539338));
    var n = e.i(324834),
      r = e.i(749709),
      i = n;
    function s({ className: e }) {
      return (0, i.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: [
          (0, i.jsx)("path", {
            d: "M2.80273 10.1533L0.820312 8.1709V8.16992C0.775339 8.12478 0.75 8.06373 0.75 8C0.75 7.93627 0.775339 7.87522 0.820312 7.83008V7.8291L2.80273 5.84668V3.04395C2.8027 3.01228 2.80822 2.98043 2.82031 2.95117C2.83242 2.9219 2.85065 2.89545 2.87305 2.87305C2.89545 2.85065 2.9219 2.83242 2.95117 2.82031C2.98043 2.80822 3.01228 2.8027 3.04395 2.80273H5.84766L7.83008 0.820312C7.87522 0.775339 7.93627 0.75 8 0.75C8.06373 0.75 8.12478 0.775339 8.16992 0.820312H8.1709L10.1533 2.80273H12.9561C12.9877 2.8027 13.0196 2.80822 13.0488 2.82031C13.0781 2.83242 13.1046 2.85065 13.127 2.87305C13.1494 2.89545 13.1676 2.9219 13.1797 2.95117C13.1918 2.98044 13.1973 3.01229 13.1973 3.04395V5.84766L15.1797 7.83008C15.2247 7.87522 15.25 7.93627 15.25 8L15.2451 8.04688C15.2359 8.09314 15.2135 8.13602 15.1797 8.16992V8.1709L13.1973 10.1533V12.9561C13.1973 12.9877 13.1918 13.0196 13.1797 13.0488C13.1676 13.0781 13.1494 13.1046 13.127 13.127C13.1046 13.1494 13.0781 13.1676 13.0488 13.1797C13.0196 13.1918 12.9877 13.1973 12.9561 13.1973H10.1533L8.1709 15.1797H8.16992C8.12478 15.2247 8.06373 15.25 8 15.25L7.95312 15.2451C7.90686 15.2359 7.86398 15.2135 7.83008 15.1797H7.8291L5.84668 13.1973H3.04492C2.91113 13.1973 2.80273 13.0889 2.80273 12.9551V10.1533Z",
            stroke: "currentColor",
            strokeWidth: "1.5",
          }),
          (0, i.jsx)("path", {
            d: "M5.875 8.53125L6.9375 9.59375L10.125 6.40625",
            stroke: "currentColor",
            strokeWidth: "1.5",
            strokeLinecap: "square",
            strokeLinejoin: "round",
          }),
        ],
      });
    }
    var a = e.i(996174),
      o = e.i(227152),
      l = e.i(990453),
      c = t;
    function u() {
      let { checked: e, handleToggle: t } = (0, c.useBuiltWithV0)();
      return (0, n.jsx)(r.default, {
        title: "Show v0 Branding",
        icon: (0, n.jsx)(s, { className: "!text-v0-gray-900 size-4" }),
        badge: (0, n.jsx)(a.Tooltip, {
          content: 'Display "Built with v0" button on your published app',
          children: (0, n.jsx)("span", {
            onClick: (e) => e.stopPropagation(),
            children: (0, n.jsx)(o.InformationFillSmall, {
              className: "size-4 text-v0-gray-900 -mb-[3px] -ml-[4px]",
            }),
          }),
        }),
        onClick: t,
        trailing: (0, n.jsx)("div", {
          className: "cursor-pointer pointer-events-none",
          onClick: (e) => {
            e.stopPropagation();
          },
          children: (0, n.jsx)(l.Switch, {
            id: "show-v0-button-switch",
            checked: e,
            className: "cursor-pointer",
          }),
        }),
      });
    }
  },
  534962,
  (e) => {
    "use strict";
    e.s(["VercelProjectProvider", () => l, "useVercelProject", () => c]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(333095),
      i = e.i(667660),
      s = e.i(92479);
    e.i(904347);
    var a = e.i(37737);
    let o = (0, n.createContext)(void 0);
    function l({ children: e }) {
      let l = (0, s.assertChatId)((0, s.useChatId)().chatId),
        c = (0, r.useVercelProjectApi)(),
        { hasVercelWritePermission: u } = (0, i.useActiveScope)(),
        [d, h] = (0, n.useState)(""),
        p = (0, n.useCallback)((e) => {
          h(e);
        }, []),
        m = (0, n.useCallback)((e) => {
          (0, a.openDialog)({
            type: "createVercelProject",
            data: { onProjectCreated: (t) => e?.(t.id) },
          });
        }, []),
        f = (0, n.useMemo)(
          () => ({
            vercelProject: c.vercelProject,
            isLoading: "loading" === c.status,
            linkProject: c.linkProject,
            unlinkProject: c.unlinkProject,
            isPending: c.isPending,
            searchQuery: d,
            setSearchQuery: p,
            hasVercelWritePermission: u,
            createProject: m,
            vercelProjects: c.vercelProjects,
            chatId: l,
            filteredVercelProjects:
              c.vercelProjects?.filter((e) =>
                e.name.toLowerCase().includes(d.toLowerCase()),
              ) ?? null,
            isValidating: c.isValidating,
          }),
          [
            c.vercelProject,
            c.status,
            c.linkProject,
            c.unlinkProject,
            c.isPending,
            c.vercelProjects,
            d,
            p,
            u,
            m,
            l,
            c.isValidating,
          ],
        );
      return (0, t.jsx)(o.Provider, { value: f, children: e });
    }
    function c() {
      let e = (0, n.useContext)(o);
      if (void 0 === e)
        throw Error(
          "useVercelProject must be used within a VercelProjectProvider",
        );
      return e;
    }
  },
  651836,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Link2", [
      ["path", { d: "M9 17H7A5 5 0 0 1 7 7h2", key: "8i5ue5" }],
      ["path", { d: "M15 7h2a5 5 0 1 1 0 10h-2", key: "1b9ql8" }],
      ["line", { x1: "8", x2: "16", y1: "12", y2: "12", key: "1jonct" }],
    ]);
    e.s(["default", () => t]);
  },
  388334,
  324416,
  781670,
  (e) => {
    "use strict";
    e.s(["ConnectVercelProjectButton", () => k], 388334);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(692581),
      s = e.i(183673),
      a = t,
      o = e.i(32170),
      l = e.i(602544),
      c = e.i(459522),
      u = r,
      d = e.i(651836),
      d = d,
      h = e.i(304649),
      p = e.i(534962),
      m = e.i(762585),
      f = e.i(940393),
      g = e.i(574768),
      x = e.i(538553),
      v = n,
      y = e.i(211976);
    function b() {
      let { user: e } = (0, o.useUser)(),
        [t, n] = (0, v.useState)(!1),
        {
          createProject: r,
          filteredVercelProjects: i,
          linkProject: s,
          isLoading: m,
          vercelProject: b,
          hasVercelWritePermission: w,
          isPending: C,
          isValidating: k,
        } = (0, p.useVercelProject)(),
        S = e?.v0plan === "v0-enterprise",
        N = (0, v.useCallback)(
          (e) => {
            (s?.(e), n(!1));
          },
          [s],
        );
      return (0, a.jsxs)(g.Popover, {
        onOpenChange: (e) => {
          n(e);
        },
        open: t,
        children: [
          (0, a.jsx)(x.RbacTooltip, {
            show: !w,
            requiredRole: "V0Builder",
            children: (0, a.jsx)(g.PopoverTrigger, {
              asChild: !0,
              disabled: C || k || !w,
              children: (0, a.jsx)(y.SpinnerButton, {
                pending: C || k,
                variant: "secondary",
                size: "sm",
                className: "w-full rounded-md h-7",
                children: "Connect",
              }),
            }),
          }),
          (0, a.jsx)(g.PopoverContent, {
            align: "center",
            className: "p-0",
            side: "bottom",
            style: { width: "max(var(--radix-popper-anchor-width), 250px)" },
            children: (0, a.jsxs)("div", {
              className: "flex size-full flex-col",
              children: [
                (0, a.jsxs)(f.Command, {
                  onWheel: (e) => {
                    e.stopPropagation();
                  },
                  onTouchMove: (e) => {
                    e.stopPropagation();
                  },
                  children: [
                    !S &&
                      (0, a.jsx)(f.CommandInput, {
                        placeholder: "Search projects...",
                      }),
                    (0, a.jsxs)(f.CommandList, {
                      className: "max-h-[225px]",
                      children: [
                        !S &&
                          (0, a.jsxs)(a.Fragment, {
                            children: [
                              (0, a.jsx)(f.CommandEmpty, {
                                children: (0, a.jsx)("div", {
                                  className: "text-v0-gray-900 text-sm py-4",
                                  children: "No Projects Found",
                                }),
                              }),
                              (0, a.jsx)(f.CommandGroup, {
                                className: "p-2",
                                children: m
                                  ? (0, a.jsx)(j, {})
                                  : i?.map((e) =>
                                      (0, a.jsxs)(
                                        f.CommandItem,
                                        {
                                          value: e.name,
                                          onSelect: () => N(e.id),
                                          className: (0, h.cn)(
                                            "group flex items-center justify-between p-2",
                                            "w-full rounded-md hover:bg-v0-gray-100 cursor-pointer",
                                          ),
                                          children: [
                                            (0, a.jsxs)("span", {
                                              className:
                                                "flex min-w-0 flex-1 items-center gap-2",
                                              children: [
                                                (0, a.jsx)(d.default, {
                                                  className: "size-4 shrink-0",
                                                }),
                                                (0, a.jsx)("span", {
                                                  className:
                                                    "max-w-[200px] truncate",
                                                  children: e.name,
                                                }),
                                              ],
                                            }),
                                            b?.project.id === e.id
                                              ? (0, a.jsxs)("span", {
                                                  className:
                                                    "flex shrink-0 items-center text-v0-gray-900",
                                                  children: [
                                                    (0, a.jsx)(l.Check, {
                                                      className:
                                                        "h-4 w-4 group-hover:hidden",
                                                    }),
                                                    (0, a.jsx)("span", {
                                                      className:
                                                        "hidden group-hover:inline",
                                                      children: "Unlink",
                                                    }),
                                                  ],
                                                })
                                              : (0, a.jsx)("span", {
                                                  className:
                                                    "hidden shrink-0 font-medium text-v0-gray-900 group-hover:inline",
                                                  children: "Link",
                                                }),
                                          ],
                                        },
                                        e.id,
                                      ),
                                    ),
                              }),
                            ],
                          }),
                        S &&
                          (0, a.jsx)("div", {
                            className:
                              "flex flex-col gap-2 p-4 text-center text-sm",
                            children: (0, a.jsx)("span", {
                              className: "font-medium text-v0-gray-900",
                              children:
                                "Enterprise customers can't connect existing Vercel projects at the moment.",
                            }),
                          }),
                      ],
                    }),
                  ],
                }),
                (0, a.jsx)("div", {
                  className: "sticky bottom-0 w-full border-t p-1.5",
                  children: (0, a.jsxs)(u.Button, {
                    onClick: () => {
                      r();
                    },
                    className: "w-full gap-1 flex items-center justify-center",
                    variant: "secondary",
                    size: "sm",
                    children: [
                      (0, a.jsx)(c.Plus, { className: "shrink-0" }),
                      "New Project",
                    ],
                  }),
                }),
              ],
            }),
          }),
        ],
      });
    }
    function j() {
      return (0, a.jsx)(a.Fragment, {
        children: Array.from({ length: 10 }).map((e, t) =>
          (0, a.jsx)(
            f.CommandItem,
            {
              disabled: !0,
              className: (0, h.cn)(
                "group flex items-center justify-between p-2",
                "w-full rounded-md",
              ),
              children: (0, a.jsxs)("span", {
                className: "flex min-w-0 flex-1 items-center gap-2",
                children: [
                  (0, a.jsx)(d.default, { className: "size-4 shrink-0" }),
                  (0, a.jsx)(m.Skeleton, { className: "h-4 w-full" }),
                ],
              }),
            },
            t,
          ),
        ),
      });
    }
    var w = x,
      C = p;
    function k() {
      let {
          isPending: e,
          hasVercelWritePermission: a,
          createProject: o,
        } = (0, C.useVercelProject)(),
        { projects: l, isReady: c } = (0, i.useVercelProjects)(),
        { setSelectedProjectId: u } = (0, s.useProjectsForUser)(),
        d = (0, n.useMemo)(() => l?.length && l.length > 0, [l]),
        h = (0, n.useCallback)(() => {
          o((e) => {
            u(e);
          });
        }, [o, u]);
      return d
        ? (0, t.jsx)(b, {})
        : (0, t.jsx)(w.RbacTooltip, {
            show: !a,
            requiredRole: "V0Builder",
            children: (0, t.jsx)(r.Button, {
              variant: "secondary",
              className: "w-full rounded-md h-7",
              size: "sm",
              disabled: e || !c || !a,
              onClick: h,
              children: "Connect",
            }),
          });
    }
    e.s(["ConnectedVercelProjectButton", () => H], 781670);
    var S = t,
      N = n,
      E = r,
      A = e.i(556355),
      D = e.i(969372),
      I = e.i(389140),
      M = e.i(741006),
      T = e.i(903500);
    let L = (0, e.i(877318).withNewIcon)(
      '<path d="M12 8C12 10.2091 10.2091 12 8 12C5.79086 12 4 10.2091 4 8C4 5.79086 5.79086 4 8 4C10.2091 4 12 5.79086 12 8Z" fill="currentColor"/>',
    );
    e.s(["StatusSmall", 0, L], 324416);
    var P = e.i(383790),
      R = s,
      F = e.i(297239),
      _ = e.i(242759),
      O = e.i(654335);
    e.i(904347);
    var B = e.i(37737),
      V = e.i(646805),
      z = p;
    function H() {
      let {
          vercelProject: e,
          unlinkProject: t,
          isPending: n,
          hasVercelWritePermission: r,
          chatId: i,
        } = (0, z.useVercelProject)(),
        s = (0, F.useT)(),
        a = (0, _.useFlags)(),
        o = (0, R.useCanMakeProjectUpdates)(),
        {
          project: l,
          gitLink: c,
          blockId: u,
        } = (0, N.useMemo)(
          () =>
            e
              ? {
                  project: e.project,
                  gitLink: e.dashboardProject?.link,
                  blockId:
                    e.dashboardProject?.productionDeployment?.meta.v0BlockId,
                }
              : { project: null, gitLink: null, blockId: null },
          [e],
        ),
        d = (0, N.useCallback)(() => {
          t && t();
        }, [t]),
        h = (0, N.useCallback)(() => {
          u &&
            (0, B.openDialog)({
              type: "forkBlock",
              data: {
                blockId: u,
                page: "chat",
                canWriteToChat: !0,
                actionType: "duplicate",
              },
            });
        }, [u]);
      return l
        ? (0, S.jsxs)(A.DropdownMenu, {
            children: [
              (0, S.jsx)(A.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, S.jsxs)(E.Button, {
                  variant: "secondary",
                  size: "sm",
                  className: "w-full rounded-md h-7",
                  children: [
                    (0, S.jsx)(L, { className: "text-v0-green-700!" }),
                    "Connected",
                    (0, S.jsx)(D.ChevronDownSmall, {}),
                  ],
                }),
              }),
              (0, S.jsx)(A.DropdownMenuContent, {
                align: "end",
                side: "bottom",
                sideOffset: 8,
                children: (0, S.jsxs)(A.DropdownMenuGroup, {
                  children: [
                    a.ppe && u && i
                      ? (0, S.jsx)(O.default, {
                          href: `/chat/${i}?b=${u}&f=0`,
                          children: (0, S.jsxs)(A.DropdownMenuItem, {
                            children: [
                              (0, S.jsx)(M.Eye, {}),
                              (0, S.jsx)("span", {
                                children: s("blockActions.openInChat"),
                              }),
                            ],
                          }),
                        })
                      : null,
                    !c && u
                      ? (0, S.jsxs)(A.DropdownMenuItem, {
                          onSelect: h,
                          children: [
                            (0, S.jsx)(V.Duplicate, {}),
                            (0, S.jsx)("span", {
                              children: s("blockActions.fork"),
                            }),
                          ],
                        })
                      : null,
                    (0, S.jsx)(A.DropdownMenuItem, {
                      asChild: !0,
                      children: (0, S.jsxs)("a", {
                        href: l.url,
                        target: "_blank",
                        rel: "noopener noreferrer",
                        className: "flex items-center gap-2",
                        children: [
                          (0, S.jsx)(I.External, { className: "size-3" }),
                          (0, S.jsx)("span", {
                            children: s("projectSettings.viewOnVercel"),
                          }),
                        ],
                      }),
                    }),
                    a.ppe && o && r
                      ? (0, S.jsx)(A.DropdownMenuItem, {
                          asChild: !0,
                          children: (0, S.jsxs)("a", {
                            href: `${l.url}/settings/domains`,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            className: "flex items-center gap-2",
                            children: [
                              (0, S.jsx)(T.Globe, { className: "size-3" }),
                              (0, S.jsx)("span", {
                                children: s("projectSettings.setCustomDomain"),
                              }),
                            ],
                          }),
                        })
                      : null,
                    o &&
                      r &&
                      (0, S.jsxs)(A.DropdownMenuItem, {
                        variant: "destructive",
                        disabled: n,
                        onClick: d,
                        children: [
                          (0, S.jsx)(P.Trash, {}),
                          (0, S.jsx)("span", {
                            children: s("projectSettings.unlinkVercelProject"),
                          }),
                        ],
                      }),
                  ],
                }),
              }),
            ],
          })
        : null;
    }
  },
  681893,
  (e) => {
    "use strict";
    e.s(["VercelProjectContent", () => u]);
    var t = e.i(324834),
      n = e.i(180367),
      r = e.i(209819);
    e.i(624424);
    var i = e.i(174890),
      s = e.i(990453),
      a = e.i(762585),
      o = e.i(534962),
      l = e.i(388334),
      c = e.i(781670);
    function u() {
      let { vercelProject: e, isLoading: n } = (0, o.useVercelProject)(),
        { chatId: s } = (0, r.useChatMetadata)();
      if (n) return (0, t.jsx)(p, {});
      let a = e && s;
      return (0, t.jsxs)("div", {
        className: "flex flex-col gap-4",
        children: [
          a ? (0, t.jsx)(d, {}) : (0, t.jsx)(h, {}),
          (0, t.jsx)("div", { className: "h-px bg-v0-alpha-400" }),
          (0, t.jsx)(i.BuiltWithV0Provider, {
            children: (0, t.jsx)(m, { disabled: !a }),
          }),
        ],
      });
    }
    let d = () => {
        let { vercelProject: e } = (0, o.useVercelProject)();
        return e
          ? (0, t.jsxs)("div", {
              className:
                "flex items-center border border-v0-alpha-400 rounded-md gap-3 p-3",
              children: [
                (0, t.jsx)("div", {
                  className:
                    "relative h-8 w-8 overflow-hidden rounded-full border border-v0-alpha-400 bg-[#000000]",
                  children: (0, t.jsx)(n.LogoVercel, {
                    className:
                      "absolute inset-0 m-auto size-3.5 !text-v0-universal-white",
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-0.5 flex-col text-label-14 flex-1",
                  children: [
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-1000 font-medium",
                      children: e.project.name,
                    }),
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children: "Connected",
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "w-32",
                  children: (0, t.jsx)(c.ConnectedVercelProjectButton, {}),
                }),
              ],
            })
          : null;
      },
      h = () =>
        (0, t.jsxs)("div", {
          className:
            "flex items-center justify-between border border-v0-alpha-400 rounded-md gap-3 p-3",
          children: [
            (0, t.jsxs)("div", {
              className: "flex items-center gap-3 flex-1",
              children: [
                (0, t.jsx)("div", {
                  className:
                    "relative h-8 w-8 overflow-hidden rounded-full border border-v0-alpha-400 bg-[#000000]",
                  children: (0, t.jsx)(n.LogoVercel, {
                    className:
                      "absolute inset-0 m-auto size-3.5 !text-v0-universal-white",
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-0.5 flex-col text-label-14",
                  children: [
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-1000 font-medium",
                      children: "No Vercel project connected",
                    }),
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children:
                        "Connect a Vercel Project to deploy changes to.",
                    }),
                  ],
                }),
              ],
            }),
            (0, t.jsx)("div", {
              className: "w-24",
              children: (0, t.jsx)(l.ConnectVercelProjectButton, {}),
            }),
          ],
        }),
      p = () =>
        (0, t.jsx)("div", {
          className: "flex flex-col gap-4",
          children: (0, t.jsxs)("div", {
            className:
              "flex items-center border border-v0-alpha-400 rounded-md gap-3 p-3",
            children: [
              (0, t.jsx)("div", {
                className:
                  "relative h-8 w-8 overflow-hidden rounded-full border border-v0-alpha-400 bg-[#000000]",
                children: (0, t.jsx)(n.LogoVercel, {
                  className:
                    "absolute inset-0 m-auto size-3.5 !text-v0-universal-white",
                }),
              }),
              (0, t.jsxs)("div", {
                className: "flex gap-0.5 flex-col text-label-14 flex-1",
                children: [
                  (0, t.jsx)(a.Skeleton, { className: "h-5 w-32" }),
                  (0, t.jsx)(a.Skeleton, { className: "h-5 w-24" }),
                ],
              }),
              (0, t.jsx)(a.Skeleton, { className: "h-7 w-16 rounded-md" }),
            ],
          }),
        }),
      m = ({ disabled: e }) => {
        let { checked: n, handleToggle: r } = (0, i.useBuiltWithV0)();
        return (0, t.jsxs)("div", {
          className: "flex justify-between gap-3 items-center",
          children: [
            (0, t.jsxs)("div", {
              className: "flex flex-col gap-0.5 text-label-14",
              children: [
                (0, t.jsx)("span", {
                  className: `font-medium ${e ? "text-v0-gray-700" : "text-v0-gray-1000"}`,
                  children: "Built with v0 Button",
                }),
                (0, t.jsx)("span", {
                  className: e ? "text-v0-gray-700" : "text-v0-gray-900",
                  children: "Show the built with v0 branding on your project.",
                }),
              ],
            }),
            (0, t.jsx)(s.Switch, {
              checked: n,
              onCheckedChange: r,
              disabled: e,
            }),
          ],
        });
      };
  },
  666425,
  (e) => {
    "use strict";
    e.s(
      [
        "Git",
        () => N,
        "GitConnectionButton",
        () => E,
        "UnconnectedGitButton",
        () => D,
      ],
      666425,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(376346),
      s = e.i(690733);
    e.i(563948);
    var a = e.i(407562),
      o = e.i(969372),
      l = e.i(389140),
      c = e.i(639090),
      u = e.i(802008),
      d = e.i(93089),
      h = e.i(324416),
      p = e.i(762585),
      m = e.i(297239),
      f = e.i(556355),
      g = e.i(919012),
      x = (0, g.createServerReference)(
        "409eac97fd5ada349009317fc518dd4797826b350f",
        g.callServer,
        void 0,
        g.findSourceMapURL,
        "startChatFromGit",
      ),
      v = g,
      y = (0, v.createServerReference)(
        "406d3c02e927d6727d66b1d06c9fda919bf8c0af8f",
        v.callServer,
        void 0,
        v.findSourceMapURL,
        "startChatFromGitConnectedVercelProject",
      ),
      b = e.i(226368);
    e.i(904347);
    var j = e.i(37737),
      w = e.i(667660),
      C = e.i(538553),
      k = e.i(120485),
      S = e.i(242759);
    function N({
      vercelProjectWithDashboard: e,
      isLoading: n,
      v0ProjectId: r,
      closeSettingsSheet: i,
      chatId: s,
      latestBlockId: a,
    }) {
      return n
        ? (0, t.jsx)(M, {})
        : e?.dashboardProject?.link
          ? (0, t.jsx)(A, {
              dashboardProject: e.dashboardProject,
              vercelProjectUrl: e.project.url,
              link: e.dashboardProject.link,
              v0ProjectId: r,
              closeSettingsSheet: i,
              chatId: s,
            })
          : (0, t.jsx)(I, {
              vercelProjectWithDashboard: e,
              chatId: s,
              latestBlockId: a,
            });
    }
    function E({
      dashboardProject: e,
      vercelProjectUrl: i,
      link: s,
      v0ProjectId: u,
      closeSettingsSheet: d,
      chatId: p,
    }) {
      let g = (0, m.useT)(),
        [v, j] = (0, n.useTransition)(),
        w = e.link,
        C = (0, b.useRouter)(),
        { gwe: N } = (0, S.useFlags)(),
        E = (0, n.useCallback)(() => {
          w &&
            j(async () => {
              let t = N
                ? await y({ vercelProjectId: e.id })
                : await x({ projectId: u, chatId: p });
              if (!t.ok) {
                (0, k.handleChatError)(t.error) || a.toast.error(t.error);
                return;
              }
              (C.push(`/chat/${t.value.chatId}`), d());
            });
        }, [w, N, e.id, u, C, d, p]);
      return (0, t.jsxs)(f.DropdownMenu, {
        children: [
          (0, t.jsx)(f.DropdownMenuTrigger, {
            asChild: !0,
            disabled: v,
            children: (0, t.jsxs)(r.Button, {
              variant: "secondary",
              size: "sm",
              className: "rounded-md h-7",
              children: [
                (0, t.jsx)(h.StatusSmall, { className: "text-v0-green-700!" }),
                "Connected",
                (0, t.jsx)(o.ChevronDownSmall, {}),
              ],
            }),
          }),
          (0, t.jsx)(f.DropdownMenuContent, {
            align: "end",
            side: "bottom",
            sideOffset: 8,
            children: (0, t.jsxs)(f.DropdownMenuGroup, {
              children: [
                w
                  ? (0, t.jsxs)(f.DropdownMenuItem, {
                      onSelect: E,
                      children: [
                        (0, t.jsx)(c.GitBranch, {}),
                        (0, t.jsx)("span", {
                          children: g("projectSettings.forkDefaultBranch"),
                        }),
                      ],
                    })
                  : null,
                (0, t.jsx)(f.DropdownMenuItem, {
                  asChild: !0,
                  children: (0, t.jsx)("a", {
                    href: `https://github.com/${s.org}/${s.repo}`,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "flex items-center justify-between",
                    children: (0, t.jsxs)("span", {
                      className: "flex items-center gap-3",
                      children: [
                        (0, t.jsx)(l.External, { className: "size-3" }),
                        (0, t.jsx)("span", {
                          children: g("projectSettings.viewOnGitHub"),
                        }),
                      ],
                    }),
                  }),
                }),
                (0, t.jsx)(f.DropdownMenuItem, {
                  asChild: !0,
                  children: (0, t.jsx)("a", {
                    href: `${i}/settings/git`,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "flex items-center justify-between",
                    children: (0, t.jsxs)("span", {
                      className: "flex items-center gap-3",
                      children: [
                        (0, t.jsx)(l.External, { className: "size-3" }),
                        (0, t.jsx)("span", {
                          children: g("projectSettings.manageGit"),
                        }),
                      ],
                    }),
                  }),
                }),
              ],
            }),
          }),
        ],
      });
    }
    function A({
      dashboardProject: e,
      vercelProjectUrl: n,
      link: r,
      v0ProjectId: s,
      closeSettingsSheet: a,
      chatId: o,
    }) {
      return (0, t.jsx)(i.Card, {
        className: "shadow-none border border-v0-alpha-400",
        children: (0, t.jsxs)(i.CardContent, {
          className: "flex flex-col gap-3 p-3",
          children: [
            (0, t.jsx)("div", {
              className: "flex items-center justify-between",
              children: (0, t.jsx)("div", {
                className:
                  "relative h-8 w-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400 bg-v0-white",
                children: (0, t.jsx)(d.LogoGithub, {
                  className: "absolute inset-0 m-auto",
                }),
              }),
            }),
            (0, t.jsxs)("div", {
              className: "flex flex-col gap-0.5",
              children: [
                (0, t.jsx)("h3", {
                  className: "font-medium text-sm",
                  children: (0, t.jsx)("span", {
                    className: "truncate",
                    children: "GitHub",
                  }),
                }),
                (0, t.jsx)("p", {
                  className: "text-xs text-v0-gray-900 truncate",
                  children: r.repo,
                }),
              ],
            }),
            (0, t.jsx)(E, {
              dashboardProject: e,
              vercelProjectUrl: n,
              link: r,
              v0ProjectId: s,
              closeSettingsSheet: a,
              chatId: o,
            }),
          ],
        }),
      });
    }
    function D({ vercelProjectConnected: e, chatId: n, latestBlockId: i }) {
      let { hasVercelWritePermission: a } = (0, w.useActiveScope)();
      return (0, t.jsx)(s.TooltipProvider, {
        children: (0, t.jsxs)(s.Tooltip, {
          children: [
            (0, t.jsx)(s.TooltipTrigger, {
              asChild: !0,
              children: (0, t.jsx)("span", {
                className: "flex items-center justify-center",
                tabIndex: -1,
                children: (0, t.jsx)(C.RbacTooltip, {
                  show: !a,
                  requiredRole: "V0Builder",
                  children: (0, t.jsx)(r.Button, {
                    type: "button",
                    variant: "secondary",
                    className: "rounded-md h-7",
                    size: "sm",
                    disabled: !e || !a,
                    onClick: () => {
                      e &&
                        a &&
                        (0, j.openDialog)({
                          type: "connectRepo",
                          data: { chatId: n, latestBlockId: i },
                        });
                    },
                    children: (0, t.jsxs)("div", {
                      className: "flex items-center gap-2",
                      children: [
                        !e && (0, t.jsx)(u.LockClosed, {}),
                        (0, t.jsx)("span", { children: "Connect" }),
                      ],
                    }),
                  }),
                }),
              }),
            }),
            !e &&
              (0, t.jsx)(s.TooltipContent, {
                children: "Connect to Vercel to enable GitHub Integration.",
              }),
          ],
        }),
      });
    }
    function I({ vercelProjectWithDashboard: e, chatId: n, latestBlockId: r }) {
      let s = !!e?.project;
      return (0, t.jsx)(i.Card, {
        className: "shadow-none border border-v0-alpha-400",
        children: (0, t.jsxs)(i.CardContent, {
          className: "flex flex-col gap-3 p-3",
          children: [
            (0, t.jsx)("div", {
              className: "flex items-center justify-between",
              children: (0, t.jsx)("div", {
                className:
                  "relative h-8 w-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400 bg-v0-white",
                children: (0, t.jsx)(d.LogoGithub, {
                  className: "absolute inset-0 m-auto",
                }),
              }),
            }),
            (0, t.jsxs)("div", {
              className: "flex flex-col gap-0.5",
              children: [
                (0, t.jsx)("h3", {
                  className: "font-medium text-sm",
                  children: (0, t.jsx)("span", {
                    className: "truncate",
                    children: "GitHub",
                  }),
                }),
                (0, t.jsx)("p", {
                  className: "text-xs text-v0-gray-900 truncate",
                  children: "Not connected",
                }),
              ],
            }),
            (0, t.jsx)(D, {
              vercelProjectConnected: s,
              chatId: n,
              latestBlockId: r,
            }),
          ],
        }),
      });
    }
    function M() {
      return (0, t.jsx)(i.Card, {
        className: "shadow-none border border-v0-alpha-400",
        children: (0, t.jsxs)(i.CardContent, {
          className: "flex flex-col gap-3 p-3",
          children: [
            (0, t.jsx)("div", {
              className: "flex items-center justify-between",
              children: (0, t.jsx)("div", {
                className:
                  "relative h-8 w-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400 bg-v0-white",
                children: (0, t.jsx)(d.LogoGithub, {
                  className: "absolute inset-0 m-auto",
                }),
              }),
            }),
            (0, t.jsxs)("div", {
              className: "flex flex-col gap-0.5",
              children: [
                (0, t.jsx)("h3", {
                  className: "font-medium text-sm",
                  children: (0, t.jsx)("span", {
                    className: "truncate",
                    children: "GitHub",
                  }),
                }),
                (0, t.jsx)(p.Skeleton, { className: "h-3 w-36" }),
              ],
            }),
            (0, t.jsx)(p.Skeleton, { className: "h-7 w-full" }),
          ],
        }),
      });
    }
  },
  866108,
  665793,
  415334,
  603179,
  (e) => {
    "use strict";
    e.s(["GitHubRepositoryContent", () => u], 866108);
    var t = e.i(324834),
      n = e.i(93089),
      r = e.i(900511),
      i = e.i(209819),
      s = e.i(762585),
      a = e.i(534962),
      o = e.i(666425),
      l = e.i(301331),
      c = e.i(576191);
    function u() {
      let { chatId: e, project: n } = (0, i.useChatMetadata)(),
        { vercelProject: r, isLoading: s } = (0, a.useVercelProject)(),
        { allBlocks: o } = (0, l.useBlockHistory)({ searchAll: !1 }),
        u = (0, c.useMemo)(
          () => o.findLast((e) => "code-project" === e.type)?.id,
          [o],
        );
      if (s) return (0, t.jsx)(p, {});
      let m = r?.dashboardProject?.link;
      return m
        ? (0, t.jsx)("div", {
            className: "flex flex-col gap-4",
            children: (0, t.jsx)(d, {
              org: m.org,
              repo: m.repo,
              vercelProject: r,
              v0ProjectId: n?.projectId,
              chatId: e,
            }),
          })
        : (0, t.jsx)(h, {
            chatId: e,
            vercelProjectConnected: !!r,
            latestBlockId: u,
          });
    }
    let d = ({
        org: e,
        repo: i,
        vercelProject: s,
        v0ProjectId: a,
        chatId: l,
      }) => {
        let c = `${e}/${i}`,
          u = s?.dashboardProject,
          d = u?.link;
        return u && d && a && l
          ? (0, t.jsxs)("div", {
              className:
                "flex items-center border border-v0-alpha-400 rounded-md gap-3 p-3",
              children: [
                (0, t.jsx)(n.LogoGithub, {
                  className: "size-6 text-v0-gray-1000",
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-0.5 flex-col text-label-14",
                  children: [
                    (0, t.jsxs)("span", {
                      className:
                        "text-v0-gray-1000 font-medium flex items-center gap-1",
                      children: [c, (0, t.jsx)(r.ExternalSmall, {})],
                    }),
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children: "Connected",
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "ml-auto",
                  children: (0, t.jsx)(o.GitConnectionButton, {
                    dashboardProject: u,
                    vercelProjectUrl: s.project.url,
                    link: d,
                    v0ProjectId: a,
                    closeSettingsSheet: () => {},
                    chatId: l,
                  }),
                }),
              ],
            })
          : (0, t.jsxs)("div", {
              className:
                "flex items-center border border-v0-alpha-400 rounded-md gap-3 p-3",
              children: [
                (0, t.jsx)(n.LogoGithub, {
                  className: "size-6 text-v0-gray-1000",
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-0.5 flex-col text-label-14",
                  children: [
                    (0, t.jsxs)("span", {
                      className:
                        "text-v0-gray-1000 font-medium flex items-center gap-1",
                      children: [c, (0, t.jsx)(r.ExternalSmall, {})],
                    }),
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children: "Connected",
                    }),
                  ],
                }),
              ],
            });
      },
      h = ({ chatId: e, vercelProjectConnected: r, latestBlockId: i }) =>
        (0, t.jsxs)("div", {
          className:
            "flex items-center justify-between border border-v0-alpha-400 rounded-md gap-3 p-3",
          children: [
            (0, t.jsxs)("div", {
              className: "flex items-center gap-3",
              children: [
                (0, t.jsx)(n.LogoGithub, {
                  className: "size-6 text-v0-gray-1000",
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-0.5 flex-col text-label-14",
                  children: [
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-1000 font-medium",
                      children: "No GitHub repository connected",
                    }),
                    (0, t.jsx)("span", {
                      className: "text-v0-gray-900",
                      children:
                        "Connect a GitHub repository to sync your code.",
                    }),
                  ],
                }),
              ],
            }),
            (0, t.jsx)(o.UnconnectedGitButton, {
              vercelProjectConnected: r,
              chatId: e,
              latestBlockId: i,
            }),
          ],
        }),
      p = () =>
        (0, t.jsxs)("div", {
          className:
            "flex items-center border border-v0-alpha-400 rounded-md gap-3 p-3",
          children: [
            (0, t.jsx)(n.LogoGithub, { className: "size-6 text-v0-gray-1000" }),
            (0, t.jsxs)("div", {
              className: "flex gap-1.5 flex-col text-label-14 flex-1",
              children: [
                (0, t.jsx)(s.Skeleton, { className: "h-5 w-32" }),
                (0, t.jsx)(s.Skeleton, { className: "h-4 w-24" }),
              ],
            }),
            (0, t.jsx)(s.Skeleton, { className: "h-7 w-20 rounded-md" }),
          ],
        });
    var m = c,
      f = e.i(99474),
      g = e.i(999817),
      x = e.i(841953),
      v = e.i(964652),
      y = e.i(15916),
      b = e.i(387575),
      j = e.i(775962),
      w = e.i(199352),
      C = e.i(731487),
      k = e.i(845027),
      S = e.i(860913),
      N = e.i(936413),
      E = e.i(179918),
      A = e.i(984379),
      D = e.i(62554),
      I = e.i(781242),
      M = e.i(495812),
      T = e.i(812053),
      L = e.i(234132),
      P = e.i(663917),
      R = e.i(556854),
      R = R;
    let F =
        m.default.use ||
        ((e) => {
          switch (e.status) {
            case "pending":
              throw e;
            case "fulfilled":
              return e.value;
            case "rejected":
              throw e.reason;
            default:
              throw (
                (e.status = "pending"),
                e.then(
                  (t) => {
                    ((e.status = "fulfilled"), (e.value = t));
                  },
                  (t) => {
                    ((e.status = "rejected"), (e.reason = t));
                  },
                ),
                e
              );
          }
        }),
      _ = { dedupe: !0 },
      O = (e, t, n) => {
        let {
            cache: r,
            compare: i,
            suspense: s,
            fallbackData: a,
            revalidateOnMount: o,
            revalidateIfStale: l,
            refreshInterval: c,
            refreshWhenHidden: u,
            refreshWhenOffline: d,
            keepPreviousData: h,
          } = n,
          [p, g, x, v] = b.SWRGlobalState.get(r),
          [R, O] = (0, j.serialize)(e),
          B = (0, m.useRef)(!1),
          V = (0, m.useRef)(!1),
          z = (0, m.useRef)(R),
          H = (0, m.useRef)(t),
          $ = (0, m.useRef)(n),
          U = () => $.current,
          G = () => U().isVisible() && U().isOnline(),
          [W, q, Z, K] = (0, w.createCacheHelper)(r, R),
          Y = (0, m.useRef)({}).current,
          J = (0, C.isUndefined)(a)
            ? (0, C.isUndefined)(n.fallback)
              ? k.UNDEFINED
              : n.fallback[R]
            : a;
        J && (0, S.isPromiseLike)(J) && (J = F(J));
        let Q = (e, t) => {
            for (let n in Y) {
              let r = n;
              if ("data" === r) {
                if (
                  !i(e[r], t[r]) &&
                  (!(0, C.isUndefined)(e[r]) || !i(eo, t[r]))
                )
                  return !1;
              } else if (t[r] !== e[r]) return !1;
            }
            return !0;
          },
          X = (0, m.useMemo)(() => {
            let e =
                !!R &&
                !!t &&
                ((0, C.isUndefined)(o) ? !U().isPaused() && !s && !1 !== l : o),
              n = (t) => {
                let n = (0, P.mergeObjects)(t);
                return (delete n._k, e)
                  ? { isValidating: !0, isLoading: !0, ...n }
                  : n;
              },
              r = W(),
              i = K(),
              a = n(r),
              c = r === i ? a : n(i),
              u = a;
            return [
              () => {
                let e = n(W());
                return Q(e, u)
                  ? ((u.data = e.data),
                    (u.isLoading = e.isLoading),
                    (u.isValidating = e.isValidating),
                    (u.error = e.error),
                    u)
                  : ((u = e), e);
              },
              () => c,
            ];
          }, [r, R]),
          ee = (0, f.useSyncExternalStore)(
            (0, m.useCallback)(
              (e) =>
                Z(R, (t, n) => {
                  Q(n, t) || e();
                }),
              [r, R],
            ),
            X[0],
            X[1],
          ),
          et = !B.current,
          en = p[R] && p[R].length > 0,
          er = ee.data,
          ei = (0, C.isUndefined)(er) ? J : er,
          es = ee.error,
          ea = (0, m.useRef)(ei),
          eo = h ? ((0, C.isUndefined)(er) ? ea.current : er) : ei,
          el =
            (!en || !!(0, C.isUndefined)(es)) &&
            (et && !(0, C.isUndefined)(o)
              ? o
              : !U().isPaused() &&
                (s
                  ? !(0, C.isUndefined)(ei) && l
                  : (0, C.isUndefined)(ei) || l)),
          ec = !!(R && t && et && el),
          eu = (0, C.isUndefined)(ee.isValidating) ? ec : ee.isValidating,
          ed = (0, C.isUndefined)(ee.isLoading) ? ec : ee.isLoading,
          eh = (0, m.useCallback)(
            async (e) => {
              let t,
                r,
                s = H.current;
              if (!R || !s || V.current || U().isPaused()) return !1;
              let a = !0,
                o = e || {},
                l = !x[R] || !o.dedupe,
                c = () =>
                  L.IS_REACT_LEGACY
                    ? !V.current && R === z.current && B.current
                    : R === z.current,
                u = { isValidating: !1, isLoading: !1 },
                d = () => {
                  q(u);
                },
                h = () => {
                  let e = x[R];
                  e && e[1] === r && delete x[R];
                },
                m = { isValidating: !0 };
              (0, C.isUndefined)(W().data) && (m.isLoading = !0);
              try {
                if (
                  (l &&
                    (q(m),
                    n.loadingTimeout &&
                      (0, C.isUndefined)(W().data) &&
                      setTimeout(() => {
                        a && c() && U().onLoadingSlow(R, n);
                      }, n.loadingTimeout),
                    (x[R] = [s(O), (0, N.getTimestamp)()])),
                  ([t, r] = x[R]),
                  (t = await t),
                  l && setTimeout(h, n.dedupingInterval),
                  !x[R] || x[R][1] !== r)
                )
                  return (l && c() && U().onDiscarded(R), !1);
                u.error = k.UNDEFINED;
                let e = g[R];
                if (
                  !(0, C.isUndefined)(e) &&
                  (r <= e[0] || r <= e[1] || 0 === e[1])
                )
                  return (d(), l && c() && U().onDiscarded(R), !1);
                let o = W().data;
                ((u.data = i(o, t) ? o : t),
                  l && c() && U().onSuccess(t, R, n));
              } catch (n) {
                h();
                let e = U(),
                  { shouldRetryOnError: t } = e;
                !e.isPaused() &&
                  ((u.error = n),
                  l &&
                    c() &&
                    (e.onError(n, R, e),
                    (!0 === t || ((0, E.isFunction)(t) && t(n))) &&
                      (!U().revalidateOnFocus ||
                        !U().revalidateOnReconnect ||
                        G()) &&
                      e.onErrorRetry(
                        n,
                        R,
                        e,
                        (e) => {
                          let t = p[R];
                          t &&
                            t[0] &&
                            t[0](A.revalidateEvents.ERROR_REVALIDATE_EVENT, e);
                        },
                        { retryCount: (o.retryCount || 0) + 1, dedupe: !0 },
                      )));
              }
              return ((a = !1), d(), !0);
            },
            [R, r],
          ),
          ep = (0, m.useCallback)(
            (...e) => (0, D.internalMutate)(r, z.current, ...e),
            [],
          );
        if (
          ((0, I.useIsomorphicLayoutEffect)(() => {
            ((H.current = t),
              ($.current = n),
              (0, C.isUndefined)(er) || (ea.current = er));
          }),
          (0, I.useIsomorphicLayoutEffect)(() => {
            if (!R) return;
            let e = eh.bind(k.UNDEFINED, _),
              t = 0,
              n = (n, r = {}) => {
                if (n == A.revalidateEvents.FOCUS_EVENT) {
                  let n = Date.now();
                  U().revalidateOnFocus &&
                    n > t &&
                    G() &&
                    ((t = n + U().focusThrottleInterval), e());
                } else if (n == A.revalidateEvents.RECONNECT_EVENT)
                  U().revalidateOnReconnect && G() && e();
                else if (n == A.revalidateEvents.MUTATE_EVENT) return eh();
                else if (n == A.revalidateEvents.ERROR_REVALIDATE_EVENT)
                  return eh(r);
              },
              r = (0, y.subscribeCallback)(R, p, n);
            return (
              (V.current = !1),
              (z.current = R),
              (B.current = !0),
              q({ _k: O }),
              el &&
                ((0, C.isUndefined)(ei) || M.IS_SERVER ? e() : (0, T.rAF)(e)),
              () => {
                ((V.current = !0), r());
              }
            );
          }, [R]),
          (0, I.useIsomorphicLayoutEffect)(() => {
            let e;
            function t() {
              let t = (0, E.isFunction)(c) ? c(W().data) : c;
              t && -1 !== e && (e = setTimeout(n, t));
            }
            function n() {
              !W().error && (u || U().isVisible()) && (d || U().isOnline())
                ? eh(_).then(t)
                : t();
            }
            return (
              t(),
              () => {
                e && (clearTimeout(e), (e = -1));
              }
            );
          }, [c, u, d, R]),
          (0, m.useDebugValue)(eo),
          s && (0, C.isUndefined)(ei) && R)
        ) {
          if (!L.IS_REACT_LEGACY && M.IS_SERVER)
            throw Error(
              "Fallback data is required when using Suspense in SSR.",
            );
          ((H.current = t), ($.current = n), (V.current = !1));
          let e = v[R];
          if (((0, C.isUndefined)(e) || F(ep(e)), (0, C.isUndefined)(es))) {
            let e = eh(_);
            ((0, C.isUndefined)(eo) ||
              ((e.status = "fulfilled"), (e.value = !0)),
              F(e));
          } else throw es;
        }
        return {
          mutate: ep,
          get data() {
            return ((Y.data = !0), eo);
          },
          get error() {
            return ((Y.error = !0), es);
          },
          get isValidating() {
            return ((Y.isValidating = !0), eu);
          },
          get isLoading() {
            return ((Y.isLoading = !0), ed);
          },
        };
      };
    g.OBJECT.defineProperty(x.SWRConfig, "defaultValue", {
      value: v.defaultConfig,
    });
    let B = (0, y.withArgs)(O),
      V = (e) => (0, j.serialize)(e ? e(0, null) : null)[0],
      z = Promise.resolve(),
      H = (e) => (t, n, r) => {
        let i,
          s = (0, m.useRef)(!1),
          {
            cache: a,
            initialSize: o = 1,
            revalidateAll: l = !1,
            persistSize: c = !1,
            revalidateFirstPage: u = !0,
            revalidateOnMount: d = !1,
            parallel: h = !1,
          } = r,
          [, , , p] = b.SWRGlobalState.get(R.c);
        try {
          (i = V(t)) && (i = y.INFINITE_PREFIX + i);
        } catch (e) {}
        let [g, x, v] = (0, w.createCacheHelper)(a, i),
          S = (0, m.useCallback)(
            () => ((0, C.isUndefined)(g()._l) ? o : g()._l),
            [a, i, o],
          );
        (0, f.useSyncExternalStore)(
          (0, m.useCallback)(
            (e) =>
              i
                ? v(i, () => {
                    e();
                  })
                : () => {},
            [a, i],
          ),
          S,
          S,
        );
        let N = (0, m.useCallback)(() => {
            let e = g()._l;
            return (0, C.isUndefined)(e) ? o : e;
          }, [i, o]),
          A = (0, m.useRef)(N());
        (0, I.useIsomorphicLayoutEffect)(() => {
          if (!s.current) {
            s.current = !0;
            return;
          }
          i && x({ _l: c ? A.current : N() });
        }, [i, a]);
        let D = d && !s.current,
          M = e(
            i,
            async (e) => {
              let i = g()._i,
                s = g()._r;
              x({ _r: k.UNDEFINED });
              let o = [],
                c = N(),
                [d] = (0, w.createCacheHelper)(a, e),
                m = d().data,
                f = [],
                v = null;
              for (let e = 0; e < c; ++e) {
                let [c, d] = (0, j.serialize)(t(e, h ? null : v));
                if (!c) break;
                let [g, x] = (0, w.createCacheHelper)(a, c),
                  y = g().data,
                  b =
                    l ||
                    i ||
                    (0, C.isUndefined)(y) ||
                    (u && !e && !(0, C.isUndefined)(m)) ||
                    D ||
                    (m && !(0, C.isUndefined)(m[e]) && !r.compare(m[e], y));
                if (n && ("function" == typeof s ? s(y, d) : b)) {
                  let t = async () => {
                    if (c in p) {
                      let e = p[c];
                      (delete p[c], (y = await e));
                    } else y = await n(d);
                    (x({ data: y, _k: d }), (o[e] = y));
                  };
                  h ? f.push(t) : await t();
                } else o[e] = y;
                h || (v = y);
              }
              return (
                h && (await Promise.all(f.map((e) => e()))),
                x({ _i: k.UNDEFINED }),
                o
              );
            },
            r,
          ),
          T = (0, m.useCallback)(
            function (e, t) {
              let n = "boolean" == typeof t ? { revalidate: t } : t || {},
                r = !1 !== n.revalidate;
              return i
                ? (r &&
                    ((0, C.isUndefined)(e)
                      ? x({ _i: !0, _r: n.revalidate })
                      : x({ _i: !1, _r: n.revalidate })),
                  arguments.length
                    ? M.mutate(e, { ...n, revalidate: r })
                    : M.mutate())
                : z;
            },
            [i, a],
          ),
          L = (0, m.useCallback)(
            (e) => {
              let n;
              if (!i) return z;
              let [, r] = (0, w.createCacheHelper)(a, i);
              if (
                ((0, E.isFunction)(e)
                  ? (n = e(N()))
                  : "number" == typeof e && (n = e),
                "number" != typeof n)
              )
                return z;
              (r({ _l: n }), (A.current = n));
              let s = [],
                [o] = (0, w.createCacheHelper)(a, i),
                l = null;
              for (let e = 0; e < n; ++e) {
                let [n] = (0, j.serialize)(t(e, l)),
                  [r] = (0, w.createCacheHelper)(a, n),
                  i = n ? r().data : k.UNDEFINED;
                if ((0, C.isUndefined)(i)) return T(o().data);
                (s.push(i), (l = i));
              }
              return T(s);
            },
            [i, a, T, N],
          );
        return {
          size: N(),
          setSize: L,
          mutate: T,
          get data() {
            return M.data;
          },
          get error() {
            return M.error;
          },
          get isValidating() {
            return M.isValidating;
          },
          get isLoading() {
            return M.isLoading;
          },
        };
      },
      $ = (0, y.withMiddleware)(B, H);
    var U = e.i(403055);
    let G = 20;
    function W(e) {
      let {
          data: t,
          error: n,
          isLoading: r,
          isValidating: i,
          setSize: s,
          size: a,
          mutate: o,
        } = $(
          (t, n) => {
            if (!e || (n && !n.ok) || (n && n.ok && !n.value.pagination.next))
              return null;
            if (0 === t)
              return `/api/chat/deployment/project-domains?projectId=${e}&limit=${G}`;
            let r = n?.ok ? n.value.pagination.next : null;
            return r
              ? `/api/chat/deployment/project-domains?projectId=${e}&limit=${G}&until=${r}`
              : null;
          },
          U.fetcher,
          { revalidateFirstPage: !1, revalidateOnFocus: !1 },
        ),
        l = t
          ?.filter((e) => e.ok)
          .flatMap((e) => (e.ok ? e.value.domains : [])),
        c = t?.at(-1);
      return {
        domains: l,
        error: n,
        isLoading: r,
        isValidating: i,
        hasMore: !!(c?.ok && null !== c.value.pagination.next),
        loadMore: () => s(a + 1),
        refresh: o,
      };
    }
    e.s(["useProjectDomains", () => W], 665793);
    var q = c;
    function Z({ hasMore: e, isValidating: t, loadMore: n }) {
      let r = (0, q.useRef)(null),
        i = (0, q.useRef)(null);
      return (
        (0, q.useEffect)(() => {
          let s = r.current,
            a = i.current;
          if (!s || !a) return;
          let o = new IntersectionObserver(
            (r) => {
              let [i] = r;
              i?.isIntersecting && !t && e && n();
            },
            { root: s, rootMargin: "200px 0px", threshold: 0 },
          );
          return (o.observe(a), () => o.disconnect());
        }, [t, e, n]),
        { containerRef: r, sentinelRef: i }
      );
    }
    e.s(["useLazyLoad", () => Z], 415334);
    let K = (0, e.i(877318).withNewIcon)(
      '<path d="M8 0C8.26264 0 8.5144 0.104413 8.7002 0.290039L10.4639 2.05273H12.9551C13.0853 2.05258 13.2146 2.07819 13.335 2.12793C13.4554 2.17773 13.5651 2.25063 13.6572 2.34277C13.7494 2.43492 13.8223 2.54461 13.8721 2.66504C13.9218 2.7854 13.9474 2.91468 13.9473 3.04492V5.53711L15.71 7.2998C15.8956 7.4856 16 7.73736 16 8C16 8.26264 15.8956 8.5144 15.71 8.7002L13.9473 10.4639V12.9551C13.9474 13.0853 13.9218 13.2146 13.8721 13.335C13.8223 13.4554 13.7494 13.5651 13.6572 13.6572C13.5651 13.7494 13.4554 13.8223 13.335 13.8721C13.2146 13.9218 13.0853 13.9474 12.9551 13.9473H10.4639L8.7002 15.71C8.5144 15.8956 8.26264 16 8 16C7.73736 16 7.4856 15.8956 7.2998 15.71L5.53613 13.9473H3.04492C2.49748 13.9473 2.05273 13.5037 2.05273 12.9551V10.4639L0.290039 8.7002C0.104413 8.5144 0 8.26264 0 8C0 7.73736 0.104413 7.4856 0.290039 7.2998L2.05273 5.53613V3.04492C2.05258 2.91468 2.07819 2.7854 2.12793 2.66504C2.17773 2.54461 2.25063 2.43492 2.34277 2.34277C2.43492 2.25063 2.54461 2.17773 2.66504 2.12793C2.7854 2.07819 2.91468 2.05258 3.04492 2.05273H5.53711L7.2998 0.290039C7.4856 0.104413 7.73736 0 8 0ZM6.9375 8.5332L5.875 7.4707L4.81445 8.53125L6.40723 10.124C6.70012 10.4169 7.17488 10.4169 7.46777 10.124L11.1855 6.40625L10.125 5.3457L6.9375 8.5332Z" fill="currentColor" />',
    );
    e.s(["VerifiedCheckFill", 0, K], 603179);
  },
  724560,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "404158156c11710c567fabbbe36935be8a9fca8f24",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "configureDeploymentProtectionAction",
      );
    e.s(["configureDeploymentProtectionAction", () => n]);
  },
  259112,
  133955,
  (e) => {
    "use strict";
    class t {
      constructor(e) {
        ((this.selfOptions = e || {}), (this.pipes = {}));
      }
      options(e) {
        return (e && (this.selfOptions = e), this.selfOptions);
      }
      pipe(e, t) {
        let n = t;
        if ("string" == typeof e)
          if (void 0 === n) return this.pipes[e];
          else this.pipes[e] = n;
        if (e && e.name) {
          if ((n = e).processor === this) return n;
          this.pipes[n.name] = n;
        }
        return ((n.processor = this), n);
      }
      process(e, t) {
        let n,
          r = e;
        r.options = this.options();
        let i = t || e.pipe || "default";
        for (; i; )
          (void 0 !== r.nextAfterChildren &&
            ((r.next = r.nextAfterChildren), (r.nextAfterChildren = null)),
            "string" == typeof i && (i = this.pipe(i)),
            i.process(r),
            (n = i),
            (i = null),
            r && r.next && (i = (r = r.next).pipe || n));
        return r.hasResult ? r.result : void 0;
      }
    }
    let n = t;
    class r {
      constructor(e) {
        ((this.name = e), (this.filters = []));
      }
      process(e) {
        if (!this.processor)
          throw Error("add this pipe to a processor before using it");
        let t = this.debug,
          n = this.filters.length,
          r = e;
        for (let e = 0; e < n; e++) {
          let n = this.filters[e];
          if (
            (t && this.log(`filter: ${n.filterName}`),
            n(r),
            "object" == typeof r && r.exiting)
          ) {
            r.exiting = !1;
            break;
          }
        }
        !r.next && this.resultCheck && this.resultCheck(r);
      }
      log(e) {
        console.log(`[jsondiffpatch] ${this.name} pipe, ${e}`);
      }
      append(...e) {
        return (this.filters.push(...e), this);
      }
      prepend(...e) {
        return (this.filters.unshift(...e), this);
      }
      indexOf(e) {
        if (!e) throw Error("a filter name is required");
        for (let t = 0; t < this.filters.length; t++)
          if (this.filters[t].filterName === e) return t;
        throw Error(`filter not found: ${e}`);
      }
      list() {
        return this.filters.map((e) => e.filterName);
      }
      after(e, ...t) {
        let n = this.indexOf(e);
        return (this.filters.splice(n + 1, 0, ...t), this);
      }
      before(e, ...t) {
        let n = this.indexOf(e);
        return (this.filters.splice(n, 0, ...t), this);
      }
      replace(e, ...t) {
        let n = this.indexOf(e);
        return (this.filters.splice(n, 1, ...t), this);
      }
      remove(e) {
        let t = this.indexOf(e);
        return (this.filters.splice(t, 1), this);
      }
      clear() {
        return ((this.filters.length = 0), this);
      }
      shouldHaveResult(e) {
        if (!1 === e) {
          this.resultCheck = null;
          return;
        }
        if (!this.resultCheck)
          return (
            (this.resultCheck = (e) => {
              if (!e.hasResult) {
                console.log(e);
                let t = Error(`${this.name} failed`);
                throw ((t.noResult = !0), t);
              }
            }),
            this
          );
      }
    }
    let i = r;
    class s {
      setResult(e) {
        return ((this.result = e), (this.hasResult = !0), this);
      }
      exit() {
        return ((this.exiting = !0), this);
      }
      push(e, t) {
        return (
          (e.parent = this),
          void 0 !== t && (e.childName = t),
          (e.root = this.root || this),
          (e.options = e.options || this.options),
          this.children
            ? ((this.children[this.children.length - 1].next = e),
              this.children.push(e))
            : ((this.children = [e]),
              (this.nextAfterChildren = this.next || null),
              (this.next = e)),
          (e.next = this),
          this
        );
      }
    }
    function a(e) {
      let t = /^\/(.*)\/([gimyu]*)$/.exec(e.toString());
      return new RegExp(t[1], t[2]);
    }
    function o(e) {
      if ("object" != typeof e) return e;
      if (null === e) return null;
      if (Array.isArray(e)) return e.map(o);
      if (e instanceof Date) return new Date(e.getTime());
      if (e instanceof RegExp) return a(e);
      let t = {};
      for (let n in e)
        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = o(e[n]));
      return t;
    }
    class l extends s {
      constructor(e, t) {
        (super(), (this.left = e), (this.right = t), (this.pipe = "diff"));
      }
      setResult(e) {
        if (this.options.cloneDiffValues && "object" == typeof e) {
          let t =
            "function" == typeof this.options.cloneDiffValues
              ? this.options.cloneDiffValues
              : o;
          ("object" == typeof e[0] && (e[0] = t(e[0])),
            "object" == typeof e[1] && (e[1] = t(e[1])));
        }
        return super.setResult(e);
      }
    }
    let c = l;
    class u extends s {
      constructor(e, t) {
        (super(), (this.left = e), (this.delta = t), (this.pipe = "patch"));
      }
    }
    let d = u;
    class h extends s {
      constructor(e) {
        (super(), (this.delta = e), (this.pipe = "reverse"));
      }
    }
    let p = h,
      m = function (e) {
        if (e.left === e.right) return void e.setResult(void 0).exit();
        if (void 0 === e.left) {
          if ("function" == typeof e.right)
            throw Error("functions are not supported");
          e.setResult([e.right]).exit();
          return;
        }
        if (void 0 === e.right) return void e.setResult([e.left, 0, 0]).exit();
        if ("function" == typeof e.left || "function" == typeof e.right)
          throw Error("functions are not supported");
        ((e.leftType = null === e.left ? "null" : typeof e.left),
        (e.rightType = null === e.right ? "null" : typeof e.right),
        e.leftType !== e.rightType ||
          "boolean" === e.leftType ||
          "number" === e.leftType ||
          ("object" === e.leftType && (e.leftIsArray = Array.isArray(e.left)),
          "object" === e.rightType && (e.rightIsArray = Array.isArray(e.right)),
          e.leftIsArray !== e.rightIsArray))
          ? e.setResult([e.left, e.right]).exit()
          : e.left instanceof RegExp &&
            (e.right instanceof RegExp
              ? e.setResult([e.left.toString(), e.right.toString()]).exit()
              : e.setResult([e.left, e.right]).exit());
      };
    m.filterName = "trivial";
    let f = function (e) {
      if (void 0 === e.delta) return void e.setResult(e.left).exit();
      if (((e.nested = !Array.isArray(e.delta)), e.nested)) return;
      let t = e.delta;
      if (1 === t.length) return void e.setResult(t[0]).exit();
      if (2 === t.length) {
        if (e.left instanceof RegExp) {
          let n = /^\/(.*)\/([gimyu]+)$/.exec(t[1]);
          if (n) return void e.setResult(new RegExp(n[1], n[2])).exit();
        }
        e.setResult(t[1]).exit();
        return;
      }
      3 === t.length && 0 === t[2] && e.setResult(void 0).exit();
    };
    f.filterName = "trivial";
    let g = function (e) {
      if (void 0 === e.delta) return void e.setResult(e.delta).exit();
      if (((e.nested = !Array.isArray(e.delta)), e.nested)) return;
      let t = e.delta;
      1 === t.length
        ? e.setResult([t[0], 0, 0]).exit()
        : 2 === t.length
          ? e.setResult([t[1], t[0]]).exit()
          : 3 === t.length && 0 === t[2] && e.setResult([t[0]]).exit();
    };
    g.filterName = "trivial";
    let x = (e) => {
      let t;
      if (!e || !e.children) return;
      let n = e.children.length,
        r = e.result;
      for (let i = 0; i < n; i++)
        void 0 !== (t = e.children[i]).result &&
          ((r = r || {})[t.childName] = t.result);
      (r && e.leftIsArray && (r._t = "a"), e.setResult(r).exit());
    };
    x.filterName = "collectChildren";
    let v = (e) => {
      let t, n;
      if (e.leftIsArray || "object" !== e.leftType) return;
      let r = e.left,
        i = e.right,
        s = e.options.propertyFilter;
      for (t in r)
        Object.prototype.hasOwnProperty.call(r, t) &&
          (!s || s(t, e)) &&
          ((n = new c(r[t], i[t])), e.push(n, t));
      for (t in i)
        Object.prototype.hasOwnProperty.call(i, t) &&
          (!s || s(t, e)) &&
          void 0 === r[t] &&
          ((n = new c(void 0, i[t])), e.push(n, t));
      e.children && 0 !== e.children.length
        ? e.exit()
        : e.setResult(void 0).exit();
    };
    v.filterName = "objects";
    let y = function (e) {
      let t, n;
      if (!e.nested) return;
      let r = e.delta;
      if (r._t) return;
      let i = r;
      for (t in i) ((n = new d(e.left[t], i[t])), e.push(n, t));
      e.exit();
    };
    y.filterName = "objects";
    let b = function (e) {
      let t;
      if (!e || !e.children || e.delta._t) return;
      let n = e.left,
        r = e.children.length;
      for (let i = 0; i < r; i++) {
        let r = (t = e.children[i]).childName;
        Object.prototype.hasOwnProperty.call(e.left, r) && void 0 === t.result
          ? delete n[r]
          : n[r] !== t.result && (n[r] = t.result);
      }
      e.setResult(n).exit();
    };
    b.filterName = "collectChildren";
    let j = function (e) {
      let t, n;
      if (!e.nested || e.delta._t) return;
      let r = e.delta;
      for (t in r) ((n = new p(r[t])), e.push(n, t));
      e.exit();
    };
    j.filterName = "objects";
    let w = (e) => {
      let t;
      if (!e || !e.children || e.delta._t) return;
      let n = e.children.length,
        r = {};
      for (let i = 0; i < n; i++) {
        let n = (t = e.children[i]).childName;
        r[n] !== t.result && (r[n] = t.result);
      }
      e.setResult(r).exit();
    };
    w.filterName = "collectChildren";
    let C = function (e, t, n, r) {
        return e[n] === t[r];
      },
      k = function (e, t, n, r) {
        let i,
          s,
          a = e.length,
          o = t.length,
          l = Array(a + 1);
        for (i = 0; i < a + 1; i++)
          for (s = 0, l[i] = Array(o + 1); s < o + 1; s++) l[i][s] = 0;
        for (i = 1, l.match = n; i < a + 1; i++)
          for (s = 1; s < o + 1; s++)
            n(e, t, i - 1, s - 1, r)
              ? (l[i][s] = l[i - 1][s - 1] + 1)
              : (l[i][s] = Math.max(l[i - 1][s], l[i][s - 1]));
        return l;
      },
      S = function (e, t, n, r) {
        let i = t.length,
          s = n.length,
          a = { sequence: [], indices1: [], indices2: [] };
        for (; 0 !== i && 0 !== s; )
          e.match(t, n, i - 1, s - 1, r)
            ? (a.sequence.unshift(t[i - 1]),
              a.indices1.unshift(i - 1),
              a.indices2.unshift(s - 1),
              --i,
              --s)
            : e[i][s - 1] > e[i - 1][s]
              ? --s
              : --i;
        return a;
      },
      N = function (e, t, n, r) {
        let i = r || {};
        return S(k(e, t, n || C, i), e, t, i);
      },
      E = 3;
    function A(e, t, n, r) {
      for (let i = 0; i < n; i++) {
        let n = e[i];
        for (let e = 0; e < r; e++) {
          let r = t[e];
          if (i !== e && n === r) return !0;
        }
      }
    }
    function D(e, t, n, r, i) {
      let s = e[n],
        a = t[r];
      if (s === a) return !0;
      if ("object" != typeof s || "object" != typeof a) return !1;
      let o = i.objectHash;
      if (!o) return i.matchByPosition && n === r;
      i.hashCache1 = i.hashCache1 || [];
      let l = i.hashCache1[n];
      if ((void 0 === l && (i.hashCache1[n] = l = o(s, n)), void 0 === l))
        return !1;
      i.hashCache2 = i.hashCache2 || [];
      let c = i.hashCache2[r];
      return (
        void 0 === c && (i.hashCache2[r] = c = o(a, r)),
        void 0 !== c && l === c
      );
    }
    let I = function (e) {
      let t, n, r, i, s;
      if (!e.leftIsArray) return;
      let a = {
          objectHash: e.options && e.options.objectHash,
          matchByPosition: e.options && e.options.matchByPosition,
        },
        o = 0,
        l = 0,
        u = e.left,
        d = e.right,
        h = u.length,
        p = d.length;
      for (
        h > 0 &&
        p > 0 &&
        !a.objectHash &&
        "boolean" != typeof a.matchByPosition &&
        (a.matchByPosition = !A(u, d, h, p));
        o < h && o < p && D(u, d, o, o, a);

      )
        ((i = new c(u[(t = o)], d[t])), e.push(i, t), o++);
      for (; l + o < h && l + o < p && D(u, d, h - 1 - l, p - 1 - l, a); )
        ((n = h - 1 - l),
          (r = p - 1 - l),
          (i = new c(u[n], d[r])),
          e.push(i, r),
          l++);
      if (o + l === h) {
        if (h === p) return void e.setResult(void 0).exit();
        for (s = s || { _t: "a" }, t = o; t < p - l; t++) s[t] = [d[t]];
        return void e.setResult(s).exit();
      }
      if (o + l === p) {
        for (s = s || { _t: "a" }, t = o; t < h - l; t++)
          s[`_${t}`] = [u[t], 0, 0];
        e.setResult(s).exit();
        return;
      }
      (delete a.hashCache1, delete a.hashCache2);
      let m = u.slice(o, h - l),
        f = d.slice(o, p - l),
        g = N(m, f, D, a),
        x = [];
      for (s = s || { _t: "a" }, t = o; t < h - l; t++)
        0 > g.indices1.indexOf(t - o) &&
          ((s[`_${t}`] = [u[t], 0, 0]), x.push(t));
      let v = !0;
      e.options &&
        e.options.arrays &&
        !1 === e.options.arrays.detectMove &&
        (v = !1);
      let y = !1;
      e.options &&
        e.options.arrays &&
        e.options.arrays.includeValueOnMove &&
        (y = !0);
      let b = x.length;
      for (t = o; t < p - l; t++) {
        let l = g.indices2.indexOf(t - o);
        if (l < 0) {
          let l = !1;
          if (v && b > 0) {
            for (let h = 0; h < b; h++)
              if (D(m, f, (n = x[h]) - o, t - o, a)) {
                (s[`_${n}`].splice(1, 2, t, E),
                  y || (s[`_${n}`][0] = ""),
                  (r = t),
                  (i = new c(u[n], d[r])),
                  e.push(i, r),
                  x.splice(h, 1),
                  (l = !0));
                break;
              }
          }
          l || (s[t] = [d[t]]);
        } else
          ((n = g.indices1[l] + o),
            (r = g.indices2[l] + o),
            (i = new c(u[n], d[r])),
            e.push(i, r));
      }
      e.setResult(s).exit();
    };
    I.filterName = "arrays";
    let M = (e, t) => e - t,
      T = (e) => (t, n) => t[e] - n[e],
      L = function (e) {
        let t, n, r;
        if (!e.nested) return;
        let i = e.delta;
        if ("a" !== i._t) return;
        let s = i,
          a = e.left,
          o = [],
          l = [],
          c = [];
        for (t in s)
          if ("_t" !== t)
            if ("_" === t[0]) {
              let e = t;
              if (0 === s[e][2] || s[e][2] === E)
                o.push(parseInt(t.slice(1), 10));
              else
                throw Error(
                  `only removal or move can be applied at original array indices, invalid diff type: ${s[e][2]}`,
                );
            } else {
              let e = t;
              1 === s[e].length
                ? l.push({ index: parseInt(e, 10), value: s[e][0] })
                : c.push({ index: parseInt(e, 10), delta: s[e] });
            }
        for (t = (o = o.sort(M)).length - 1; t >= 0; t--) {
          n = o[t];
          let e = s[`_${n}`],
            r = a.splice(n, 1)[0];
          e[2] === E && l.push({ index: e[1], value: r });
        }
        let u = (l = l.sort(T("index"))).length;
        for (t = 0; t < u; t++) {
          let e = l[t];
          a.splice(e.index, 0, e.value);
        }
        let h = c.length;
        if (h > 0)
          for (t = 0; t < h; t++) {
            let n = c[t];
            ((r = new d(a[n.index], n.delta)), e.push(r, n.index));
          }
        e.children ? e.exit() : e.setResult(a).exit();
      };
    L.filterName = "arrays";
    let P = function (e) {
      let t;
      if (!e || !e.children || "a" !== e.delta._t) return;
      let n = e.left,
        r = e.children.length;
      for (let i = 0; i < r; i++) n[(t = e.children[i]).childName] = t.result;
      e.setResult(n).exit();
    };
    P.filterName = "arraysCollectChildren";
    let R = function (e) {
      let t, n;
      if (!e.nested) {
        let t = e.delta;
        if (t[2] === E) {
          let n = t;
          ((e.newName = `_${n[1]}`),
            e
              .setResult([n[0], parseInt(e.childName.substring(1), 10), E])
              .exit());
        }
        return;
      }
      let r = e.delta;
      if ("a" !== r._t) return;
      let i = r;
      for (t in i) "_t" !== t && ((n = new p(i[t])), e.push(n, t));
      e.exit();
    };
    R.filterName = "arrays";
    let F = (e, t, n) => {
        if ("string" == typeof t && "_" === t[0])
          return parseInt(t.substring(1), 10);
        if (Array.isArray(n) && 0 === n[2]) return `_${t}`;
        let r = +t;
        for (let n in e) {
          let i = e[n];
          if (Array.isArray(i))
            if (i[2] === E) {
              let e = parseInt(n.substring(1), 10),
                s = i[1];
              if (s === +t) return e;
              e <= r && s > r ? r++ : e >= r && s < r && r--;
            } else
              0 === i[2]
                ? parseInt(n.substring(1), 10) <= r && r++
                : 1 === i.length && parseInt(n, 10) <= r && r--;
        }
        return r;
      },
      _ = (e) => {
        let t;
        if (!e || !e.children) return;
        let n = e.delta;
        if ("a" !== n._t) return;
        let r = n,
          i = e.children.length,
          s = { _t: "a" };
        for (let n = 0; n < i; n++) {
          let i = (t = e.children[n]).newName;
          (void 0 === i && (i = F(r, t.childName, t.result)),
            s[i] !== t.result && (s[i] = t.result));
        }
        e.setResult(s).exit();
      };
    _.filterName = "arraysCollectChildren";
    let O = function (e) {
      e.left instanceof Date
        ? (e.right instanceof Date
            ? e.left.getTime() !== e.right.getTime()
              ? e.setResult([e.left, e.right])
              : e.setResult(void 0)
            : e.setResult([e.left, e.right]),
          e.exit())
        : e.right instanceof Date && e.setResult([e.left, e.right]).exit();
    };
    O.filterName = "dates";
    let B = 2,
      V = 60,
      z = null;
    function H(e, t) {
      var n;
      if (!z) {
        let r;
        if (
          null == (n = null == e ? void 0 : e.textDiff)
            ? void 0
            : n.diffMatchPatch
        )
          r = new e.textDiff.diffMatchPatch();
        else {
          if (!t) return null;
          let e = Error(
            "The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.",
          );
          throw ((e.diff_match_patch_not_found = !0), e);
        }
        z = {
          diff: function (e, t) {
            return r.patch_toText(r.patch_make(e, t));
          },
          patch: function (e, t) {
            let n = r.patch_apply(r.patch_fromText(t), e);
            for (let e = 0; e < n[1].length; e++)
              n[1][e] || (Error("text patch failed").textPatchFailed = !0);
            return n[0];
          },
        };
      }
      return z;
    }
    let $ = function (e) {
      if ("string" !== e.leftType) return;
      let t = e.left,
        n = e.right,
        r =
          (e.options && e.options.textDiff && e.options.textDiff.minLength) ||
          V;
      if (t.length < r || n.length < r) return void e.setResult([t, n]).exit();
      let i = H(e.options);
      if (!i) return void e.setResult([t, n]).exit();
      let s = i.diff;
      e.setResult([s(t, n), 0, B]).exit();
    };
    $.filterName = "texts";
    let U = function (e) {
      if (e.nested) return;
      let t = e.delta;
      if (t[2] !== B) return;
      let n = t,
        r = H(e.options, !0).patch;
      e.setResult(r(e.left, n[0])).exit();
    };
    U.filterName = "texts";
    let G = function (e) {
        let t,
          n,
          r,
          i,
          s = null,
          a = /^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,
          o = e.split("\n");
        for (t = 0, n = o.length; t < n; t++) {
          let e = (r = o[t]).slice(0, 1);
          "@" === e
            ? ((s = a.exec(r)),
              (o[t] =
                "@@ -" + s[3] + "," + s[4] + " +" + s[1] + "," + s[2] + " @@"))
            : "+" === e
              ? ((o[t] = "-" + o[t].slice(1)),
                "+" === o[t - 1].slice(0, 1) &&
                  ((i = o[t]), (o[t] = o[t - 1]), (o[t - 1] = i)))
              : "-" === e && (o[t] = "+" + o[t].slice(1));
        }
        return o.join("\n");
      },
      W = function (e) {
        if (e.nested) return;
        let t = e.delta;
        if (t[2] !== B) return;
        let n = t;
        e.setResult([G(n[0]), 0, B]).exit();
      };
    W.filterName = "texts";
    class q {
      constructor(e) {
        ((this.processor = new n(e)),
          this.processor.pipe(
            new i("diff").append(x, m, O, $, v, I).shouldHaveResult(),
          ),
          this.processor.pipe(
            new i("patch").append(b, P, f, U, y, L).shouldHaveResult(),
          ),
          this.processor.pipe(
            new i("reverse").append(w, _, g, W, j, R).shouldHaveResult(),
          ));
      }
      options(e) {
        return this.processor.options(e);
      }
      diff(e, t) {
        return this.processor.process(new c(e, t));
      }
      patch(e, t) {
        return this.processor.process(new d(e, t));
      }
      reverse(e) {
        return this.processor.process(new p(e));
      }
      unpatch(e, t) {
        return this.patch(e, this.reverse(t));
      }
      clone(e) {
        return o(e);
      }
    }
    let Z = q,
      K = (function (e) {
        return new Z(e);
      })({});
    function Y(e, t) {
      let n = K.clone(e);
      if (Array.isArray(t) && 9 === t[1] && 9 === t[2]) {
        let e = t[0].slice(0, -1),
          r = t[0].slice(-1),
          i = n;
        for (let t of e) {
          if ("string" == typeof i[t]) return ((i[t] += r), n);
          i = i[t];
        }
      }
      return (K.patch(n, t), n);
    }
    e.s(["patch", () => Y], 259112);
    var J = e.i(919012),
      Q = (0, J.createServerReference)(
        "00f901aced90c0dd331e98992e51c7ff5c5ea3b76e",
        J.callServer,
        void 0,
        J.findSourceMapURL,
        "invalidateRouterCache",
      );
    e.s(["invalidateRouterCache", () => Q], 133955);
  },
  230869,
  (e) => {
    "use strict";
    var t = e.i(696871);
    function n(e) {
      let n = { isLlmError: !1, isRetried: !1, errorCategory: void 0 };
      if ("string" == typeof e)
        ((n.isLlmError = e.startsWith(t.LLM_ERROR_PREFIX)),
          (n.isRetried = e.endsWith(t.LLM_ERROR_RETRY_SUFFIX)),
          (n.errorCategory = e.split(":")[1] ?? "default"));
      else if (e.finishReason?.includes("provider_server_error")) {
        let t = e.finishReason.startsWith("retry_provider_server_error"),
          r = t || !!e.finishReason.startsWith("provider_server_error");
        ((n.isLlmError = r),
          (n.isRetried = t),
          r && (n.errorCategory = e.finishReason.split(":")[1] ?? "default"));
      }
      return n;
    }
    e.s(["isLlmError", () => n]);
  },
  85989,
  306244,
  967122,
  709448,
  (e) => {
    "use strict";
    async function t(e) {
      return new Promise((t, n) => {
        let r = new FileReader();
        ((r.onload = (e) => {
          t(e.target?.result);
        }),
          (r.onerror = (e) => n(e)),
          r.readAsDataURL(e));
      });
    }
    e.s(["readFileAsDataURL", () => t], 85989);
    let n = new Map();
    function r(e, t) {
      let r = n.get(e);
      r && r.abort();
      let i = new AbortController();
      n.set(e, i);
      let s = i.signal;
      return (
        (s.onabort = () => {
          (n.delete(e), t?.());
        }),
        s
      );
    }
    function i(e) {
      let t = n.get(e);
      t && (t.abort(), n.delete(e));
    }
    function s(e) {
      n.delete(e);
    }
    (e.s(
      [
        "abortKey",
        () => i,
        "createNewAbortSignalForKey",
        () => r,
        "removeAbortController",
        () => s,
      ],
      306244,
    ),
      e.s(["useActiveBlockIdRef", () => h], 967122));
    var a = e.i(449381),
      o = e.i(576191),
      l = o,
      c = e.i(418625);
    function u(e) {
      let t = (0, l.useRef)(void 0),
        { data: n, mutate: r } = (0, c.default)(e);
      return (
        (0, l.useEffect)(() => {
          n || r(t);
        }, [n, r]),
        n
      );
    }
    function d(e, t) {
      let n = u(e);
      return (
        (0, o.useEffect)(() => {
          n && (n.current = t);
        }, [n, t]),
        n
      );
    }
    function h() {
      let e = (0, a.useActiveBlockState)();
      return d("activeBlockIdRef", e?.id);
    }
    function p(e) {
      if (!e || /[^0-9-\s]+/.test(e) || "0000000000000000" === e) return !1;
      let t = 0,
        n = !1;
      e = e.replace(/\D/g, "");
      for (let r = e.length - 1; r >= 0; r--) {
        let i = parseInt(e.charAt(r), 10);
        (n && (i *= 2) > 9 && (i -= 9), (t += i), (n = !n));
      }
      return t % 10 == 0;
    }
    function m(e) {
      let t = /\b(?:\d{4}[-\s]?){3}\d{4}\b/g,
        n = /\b\d{4}[-\s]?\d{6}[-\s]?\d{5}\b/g;
      return (
        [...(e.match(t) || []), ...(e.match(n) || [])].filter(p).length > 0
      );
    }
    function f(e) {
      let t = /\bsk-(?:proj-)?[a-zA-Z0-9_-]{32,}/g;
      if (e.match(t)) return !0;
      let n = /\bsk-ant-api\d{2}-[a-zA-Z0-9_-]{40,}/g;
      if (e.match(n)) return !0;
      let r = /\bAIza[a-zA-Z0-9_-]{35}/g;
      if (e.match(r)) return !0;
      let i = /\bhf_[a-zA-Z0-9]{32,}/g;
      if (e.match(i)) return !0;
      let s = /\beyJ[a-zA-Z0-9_-]{100,}/g;
      if (e.match(s)) return !0;
      let a = /\bsk-or-v1-[a-zA-Z0-9_-]{64,}/g;
      if (e.match(a)) return !0;
      let o = /\b[rs]k_(?:live|test)_[a-zA-Z0-9_-]{20,}/g;
      if (e.match(o)) return !0;
      let l = /\bgh[prso]_[a-zA-Z0-9_-]{36,}/g;
      if (e.match(l)) return !0;
      let c = /\bAKIA[A-Z0-9]{16}\b/g;
      if (e.match(c)) return !0;
      let u =
        /(?:api[_-]?key|apikey)\s*[=:]\s*['"]?([a-zA-Z0-9_\-+=/.]{16,})['"]?/gi;
      if (
        Array.from(e.matchAll(u), (e) => e[1]).some(
          (e) =>
            e &&
            !e.includes("process.env") &&
            !e.toUpperCase().includes("API_KEY") &&
            !e.toUpperCase().includes("SECRET") &&
            !e.toUpperCase().includes("EXAMPLE") &&
            !e.includes("getEnv") &&
            !e.includes("config."),
        )
      )
        return !0;
      let d =
        /(?:secret|token|auth[_-]?key)(?:[_-]?key)?\s*[=:]\s*['"]?([a-zA-Z0-9_\-+=/.]{16,})['"]?/gi;
      return !!Array.from(e.matchAll(d), (e) => e[1]).some(
        (e) =>
          e &&
          !e.includes("process.env") &&
          !e.includes("getEnv") &&
          !e.includes("config."),
      );
    }
    function g(e) {
      let t =
          /\beyJ[A-Za-z0-9_-]{10,}\.[A-Za-z0-9_-]{10,}\.[A-Za-z0-9_-]{10,}/g,
        n = e.match(t);
      if (n?.some((e) => e.length > 50)) return !0;
      let r = /\bbearer\s+([a-zA-Z0-9_\-+=/.]{20,})/gi;
      if (e.match(r)) return !0;
      let i = /access[_-]?token\s*[=:]\s*['"]?([a-zA-Z0-9_\-+=/.]{20,})['"]?/gi;
      if (e.match(i)) return !0;
      let s =
        /refresh[_-]?token\s*[=:]\s*['"]?([a-zA-Z0-9_\-+=/.]{20,})['"]?/gi;
      return !!e.match(s);
    }
    function x(e) {
      return !!(
        /-----BEGIN RSA PRIVATE KEY-----[\s\S]{50,}-----END RSA PRIVATE KEY-----/.test(
          e,
        ) ||
        /-----BEGIN PRIVATE KEY-----[\s\S]{50,}-----END PRIVATE KEY-----/.test(
          e,
        ) ||
        /-----BEGIN OPENSSH PRIVATE KEY-----[\s\S]{50,}-----END OPENSSH PRIVATE KEY-----/.test(
          e,
        ) ||
        /\bssh-(?:rsa|ed25519|dss)\s+[A-Za-z0-9+/]{50,}[=]{0,2}/.test(e) ||
        /-----BEGIN EC PRIVATE KEY-----[\s\S]{50,}-----END EC PRIVATE KEY-----/.test(
          e,
        )
      );
    }
    e.s(
      [
        "hasApiKeys",
        () => f,
        "hasAuthTokens",
        () => g,
        "hasCreditCards",
        () => m,
        "hasPrivateKeys",
        () => x,
      ],
      709448,
    );
  },
  282931,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(754853),
      r = e.i(996174),
      i = e.i(304649),
      s = e.i(745197),
      a = e.i(297239);
    let o = "scroll-down-button";
    function l({ scrollToBottom: e, hidden: l, className: c, ...u }) {
      let d = (0, a.useT)(),
        { showBannerLimit: h, showBannerGeneral: p } = (0,
        s.useShowUpgradeBanner)(),
        m = h || p;
      return (0, t.jsx)("div", {
        id: o,
        "aria-hidden": l,
        className: (0, i.cn)(
          "animate-in fade-in slide-in-from-bottom absolute inset-x-0 -top-12 z-10 m-auto flex w-fit items-center justify-center group-has-data-[slot=prompt-actions-container]/form-container:-top-20",
          l &&
            "animate-out fade-out slide-out-to-bottom fill-mode-forwards pointer-events-none",
          m && "-top-16",
          c,
        ),
        ...u,
        children: (0, t.jsx)(r.Tooltip, {
          content:
            !l &&
            (0, t.jsx)(r.TooltipContent, {
              side: "top",
              sideOffset: 14,
              children: d("scrollDownButton.scrollToBottom"),
            }),
          children: (0, t.jsx)("button", {
            className: (0, i.cn)(
              "animate-slow-bounce shadow-base bg-v0-background-100 hover:bg-v0-background-200 flex size-7 items-center justify-center rounded-full text-v0-gray-900 drop-shadow-md",
              l && "hidden",
            ),
            onClick: (t) => {
              (t.stopPropagation(), e());
            },
            type: "button",
            children: (0, t.jsx)(n.ChevronDownIcon, { className: "size-5" }),
          }),
        }),
      });
    }
    e.s(["SCROLL_DOWN_BUTTON_ID", 0, o, "ScrollDownButton", () => l]);
  },
  440226,
  (e, t, n) => {
    !(function (n, r) {
      t.exports = r(e.r(576191));
    })(e.e, (e) =>
      (() => {
        "use strict";
        var t = {
            729: (e) => {
              var t = Object.prototype.hasOwnProperty,
                n = "~";
              function r() {}
              function i(e, t, n) {
                ((this.fn = e), (this.context = t), (this.once = n || !1));
              }
              function s(e, t, r, s, a) {
                if ("function" != typeof r)
                  throw TypeError("The listener must be a function");
                var o = new i(r, s || e, a),
                  l = n ? n + t : t;
                return (
                  e._events[l]
                    ? e._events[l].fn
                      ? (e._events[l] = [e._events[l], o])
                      : e._events[l].push(o)
                    : ((e._events[l] = o), e._eventsCount++),
                  e
                );
              }
              function a(e, t) {
                0 == --e._eventsCount
                  ? (e._events = new r())
                  : delete e._events[t];
              }
              function o() {
                ((this._events = new r()), (this._eventsCount = 0));
              }
              (Object.create &&
                ((r.prototype = Object.create(null)),
                new r().__proto__ || (n = !1)),
                (o.prototype.eventNames = function () {
                  var e,
                    r,
                    i = [];
                  if (0 === this._eventsCount) return i;
                  for (r in (e = this._events))
                    t.call(e, r) && i.push(n ? r.slice(1) : r);
                  return Object.getOwnPropertySymbols
                    ? i.concat(Object.getOwnPropertySymbols(e))
                    : i;
                }),
                (o.prototype.listeners = function (e) {
                  var t = n ? n + e : e,
                    r = this._events[t];
                  if (!r) return [];
                  if (r.fn) return [r.fn];
                  for (var i = 0, s = r.length, a = Array(s); i < s; i++)
                    a[i] = r[i].fn;
                  return a;
                }),
                (o.prototype.listenerCount = function (e) {
                  var t = n ? n + e : e,
                    r = this._events[t];
                  return r ? (r.fn ? 1 : r.length) : 0;
                }),
                (o.prototype.emit = function (e, t, r, i, s, a) {
                  var o = n ? n + e : e;
                  if (!this._events[o]) return !1;
                  var l,
                    c,
                    u = this._events[o],
                    d = arguments.length;
                  if (u.fn) {
                    switch (
                      (u.once && this.removeListener(e, u.fn, void 0, !0), d)
                    ) {
                      case 1:
                        return (u.fn.call(u.context), !0);
                      case 2:
                        return (u.fn.call(u.context, t), !0);
                      case 3:
                        return (u.fn.call(u.context, t, r), !0);
                      case 4:
                        return (u.fn.call(u.context, t, r, i), !0);
                      case 5:
                        return (u.fn.call(u.context, t, r, i, s), !0);
                      case 6:
                        return (u.fn.call(u.context, t, r, i, s, a), !0);
                    }
                    for (c = 1, l = Array(d - 1); c < d; c++)
                      l[c - 1] = arguments[c];
                    u.fn.apply(u.context, l);
                  } else {
                    var h,
                      p = u.length;
                    for (c = 0; c < p; c++)
                      switch (
                        (u[c].once &&
                          this.removeListener(e, u[c].fn, void 0, !0),
                        d)
                      ) {
                        case 1:
                          u[c].fn.call(u[c].context);
                          break;
                        case 2:
                          u[c].fn.call(u[c].context, t);
                          break;
                        case 3:
                          u[c].fn.call(u[c].context, t, r);
                          break;
                        case 4:
                          u[c].fn.call(u[c].context, t, r, i);
                          break;
                        default:
                          if (!l)
                            for (h = 1, l = Array(d - 1); h < d; h++)
                              l[h - 1] = arguments[h];
                          u[c].fn.apply(u[c].context, l);
                      }
                  }
                  return !0;
                }),
                (o.prototype.on = function (e, t, n) {
                  return s(this, e, t, n, !1);
                }),
                (o.prototype.once = function (e, t, n) {
                  return s(this, e, t, n, !0);
                }),
                (o.prototype.removeListener = function (e, t, r, i) {
                  var s = n ? n + e : e;
                  if (!this._events[s]) return this;
                  if (!t) return (a(this, s), this);
                  var o = this._events[s];
                  if (o.fn)
                    o.fn !== t ||
                      (i && !o.once) ||
                      (r && o.context !== r) ||
                      a(this, s);
                  else {
                    for (var l = 0, c = [], u = o.length; l < u; l++)
                      (o[l].fn !== t ||
                        (i && !o[l].once) ||
                        (r && o[l].context !== r)) &&
                        c.push(o[l]);
                    c.length
                      ? (this._events[s] = 1 === c.length ? c[0] : c)
                      : a(this, s);
                  }
                  return this;
                }),
                (o.prototype.removeAllListeners = function (e) {
                  var t;
                  return (
                    e
                      ? ((t = n ? n + e : e), this._events[t] && a(this, t))
                      : ((this._events = new r()), (this._eventsCount = 0)),
                    this
                  );
                }),
                (o.prototype.off = o.prototype.removeListener),
                (o.prototype.addListener = o.prototype.on),
                (o.prefixed = n),
                (o.EventEmitter = o),
                (e.exports = o));
            },
            639: (t) => {
              t.exports = e;
            },
          },
          n = {};
        function r(e) {
          var i = n[e];
          if (void 0 !== i) return i.exports;
          var s = (n[e] = { exports: {} });
          return (t[e](s, s.exports, r), s.exports);
        }
        ((r.n = (e) => {
          var t = e && e.__esModule ? () => e.default : () => e;
          return (r.d(t, { a: t }), t);
        }),
          (r.d = (e, t) => {
            for (var n in t)
              r.o(t, n) &&
                !r.o(e, n) &&
                Object.defineProperty(e, n, { enumerable: !0, get: t[n] });
          }),
          (r.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t)),
          (r.r = (e) => {
            ("undefined" != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
              Object.defineProperty(e, "__esModule", { value: !0 }));
          }));
        var i = {};
        return (
          (() => {
            function e(e, t, n) {
              return (
                t in e
                  ? Object.defineProperty(e, t, {
                      value: n,
                      enumerable: !0,
                      configurable: !0,
                      writable: !0,
                    })
                  : (e[t] = n),
                e
              );
            }
            (r.r(i), r.d(i, { createEvent: () => A }));
            var t,
              n = r(729),
              s = r.n(n),
              a = r(639),
              o = !(
                "undefined" == typeof window ||
                null == (t = window.document) ||
                !t.createElement
              ),
              l = o ? a.useLayoutEffect : a.useEffect,
              c = function (e) {
                var t = (0, a.useRef)(function () {
                  throw Error(
                    "Cannot call an event handler during the first render.",
                  );
                });
                return (
                  l(function () {
                    t.current = e;
                  }),
                  (0, a.useCallback)(function () {
                    for (
                      var e, n = arguments.length, r = Array(n), i = 0;
                      i < n;
                      i++
                    )
                      r[i] = arguments[i];
                    return null == (e = t.current) ? void 0 : e.apply(null, r);
                  }, [])
                );
              },
              u = function (e) {
                var t = c(e);
                l(
                  function () {
                    return (
                      window.addEventListener("storage", t),
                      function () {
                        window.removeEventListener("storage", t);
                      }
                    );
                  },
                  [t],
                );
              },
              d = function (e) {
                return Object.prototype.toString
                  .call(e)
                  .slice(8, -1)
                  .toLowerCase();
              },
              h = "react-event-hook:undefined",
              p = Error("The input value could not be serialized"),
              m = function e(t) {
                try {
                  var n = d(t),
                    r = JSON.stringify(t, function (e, t) {
                      return void 0 === t ? h : t;
                    }),
                    i = f(r);
                  if (d(i) !== n) throw p;
                  return (
                    "object" === n &&
                      Object.values(t).forEach(function (t) {
                        return e(t);
                      }),
                    "array" === n &&
                      t.forEach(function (t) {
                        return e(t);
                      }),
                    r
                  );
                } catch (e) {
                  throw p;
                }
              },
              f = function (e) {
                return JSON.parse(e, function (e, t) {
                  if (t !== h) return t;
                });
              },
              g = function () {
                return ""
                  .concat(Date.now(), ":")
                  .concat(
                    parseInt(Math.random().toString().replace(".", ""), 10),
                  );
              },
              x = function (e, t) {
                return m({ id: g(), name: e, payload: t });
              },
              v = function (e) {
                var t = f(e);
                return { name: t.name, payload: t.payload };
              },
              y = "react-event-hook";
            function b(e, t) {
              (null == t || t > e.length) && (t = e.length);
              for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
              return r;
            }
            function j(e, t) {
              return (
                (function (e) {
                  if (Array.isArray(e)) return e;
                })(e) ||
                (function (e, t) {
                  var n =
                    null == e
                      ? null
                      : ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                        e["@@iterator"];
                  if (null != n) {
                    var r,
                      i,
                      s = [],
                      a = !0,
                      o = !1;
                    try {
                      for (
                        n = n.call(e);
                        !(a = (r = n.next()).done) &&
                        (s.push(r.value), !t || s.length !== t);
                        a = !0
                      );
                    } catch (e) {
                      ((o = !0), (i = e));
                    } finally {
                      try {
                        a || null == n.return || n.return();
                      } finally {
                        if (o) throw i;
                      }
                    }
                    return s;
                  }
                })(e, t) ||
                (function (e, t) {
                  if (e) {
                    if ("string" == typeof e) return b(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return (
                      "Object" === n &&
                        e.constructor &&
                        (n = e.constructor.name),
                      "Map" === n || "Set" === n
                        ? Array.from(e)
                        : "Arguments" === n ||
                            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                          ? b(e, t)
                          : void 0
                    );
                  }
                })(e, t) ||
                (function () {
                  throw TypeError(
                    "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
                  );
                })()
              );
            }
            var w = function (e) {
                var t;
                return [
                  null == (t = e[0]) ? void 0 : t.toUpperCase(),
                  e.slice(1),
                ].join("");
              },
              C = ["-", "_", ":", "/", ".", " "],
              k = function (e) {
                return w(e.toLowerCase());
              },
              S = function e(t) {
                var n = j(
                    t.split(new RegExp("[".concat(C.join(""), "](.*)"))),
                    2,
                  ),
                  r = n[0],
                  i = n[1];
                return void 0 !== r && void 0 !== i
                  ? "".concat(k(r)).concat(e(i))
                  : !(function (e) {
                        return e.toUpperCase() === e && e.toLowerCase() !== e;
                      })(t)
                    ? w(t)
                    : k(t);
              },
              N = new (s())(),
              E = new Map(),
              A = function (t) {
                return function () {
                  var n,
                    r =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : {},
                    i = r.crossTab,
                    s = void 0 !== i && i,
                    a = t.trim(),
                    d = S(a),
                    h = "use".concat(d, "Listener"),
                    p = "emit".concat(d),
                    m = g(),
                    f = function () {
                      (E.has(a) && E.get(a), E.set(a, m));
                    },
                    b = function (e) {
                      var t = c(e);
                      (u(function (t) {
                        if (s && t.newValue && t.key === y) {
                          var n = v(t.newValue);
                          n.name === a && e(n.payload);
                        }
                      }),
                        l(
                          function () {
                            return (
                              N.addListener(a, t),
                              function () {
                                N.removeListener(a, t);
                              }
                            );
                          },
                          [t],
                        ));
                    },
                    j = function (e) {
                      var t =
                          arguments.length > 1 && void 0 !== arguments[1]
                            ? arguments[1]
                            : {},
                        n = t.broadcast,
                        r = void 0 !== n && n;
                      if (o && (f(), r || N.emit(a, e), s))
                        try {
                          var i = x(a, e);
                          try {
                            window.localStorage.setItem(y, i);
                          } catch (e) {}
                        } catch (e) {
                          throw Error(
                            'Could not emit "'.concat(
                              a,
                              '" event. The event payload might contain values that cannot be serialized.',
                            ),
                          );
                        }
                    },
                    w = function (e) {
                      return j(e);
                    };
                  return (
                    (w.broadcast = function (e) {
                      return j(e, { broadcast: !0 });
                    }),
                    e((n = {}), h, b),
                    e(n, p, w),
                    n
                  );
                };
              };
          })(),
          i
        );
      })(),
    );
  },
  18547,
  (e) => {
    "use strict";
    let { useChatMessageFinishedListener: t, emitChatMessageFinished: n } = (0,
    e.i(440226).createEvent)("chatMessageFinished")();
    e.s([
      "emitChatMessageFinished",
      0,
      n,
      "useChatMessageFinishedListener",
      0,
      t,
    ]);
  },
  646851,
  (e) => {
    "use strict";
    var t = e.i(407562);
    function n() {
      let e, t;
      return {
        promise: new Promise((n, r) => {
          ((e = n), (t = r));
        }),
        resolve: e,
        reject: t,
      };
    }
    async function r() {
      try {
        return (
          await fetch("/chat/api/chat/resume/ping", {
            method: "HEAD",
            cache: "no-store",
          })
        ).ok;
      } catch (e) {
        return !1;
      }
    }
    class i {
      promise;
      resolve;
      handleOffline = () => {
        (window.removeEventListener("offline", this.handleOffline),
          this.resolve());
      };
      constructor() {
        const { promise: e, resolve: t } = n();
        ((this.promise = e),
          (this.resolve = t),
          window.addEventListener("offline", this.handleOffline));
      }
      cleanupOfflineListener = () => {
        window.removeEventListener("offline", this.handleOffline);
      };
      resetPromises = () => {
        let { promise: e, resolve: t } = n();
        ((this.promise = e), (this.resolve = t));
      };
    }
    class s {
      toastOpts;
      toastId = null;
      loadingToastTimeout = null;
      constructor(e) {
        if (((this.toastOpts = e), !e)) return;
        const n = Math.max(5e3 - (Date.now() - e.lastReconnectedAt), 0);
        this.loadingToastTimeout = setTimeout(() => {
          this.toastId = t.toast.loading(e.loadingMessage, { duration: 36e5 });
        }, n);
      }
      clearLoadingToastTimeout() {
        this.loadingToastTimeout &&
          (clearTimeout(this.loadingToastTimeout),
          (this.loadingToastTimeout = null));
      }
      dismissLoadingToast() {
        this.toastId && (t.toast.dismiss(this.toastId), (this.toastId = null));
      }
      showSuccessToast() {
        !this.toastId ||
          (this.dismissLoadingToast(),
          this.toastOpts && t.toast.success(this.toastOpts.successMessage));
      }
    }
    async function a(e) {
      let { promise: t, resolve: r } = n(),
        i = () => r();
      (e.defaultValue ? r() : window.addEventListener(e.eventKey, i),
        await Promise.race([
          t,
          new Promise((t) => setTimeout(t, e.durationMs)),
        ]),
        window.removeEventListener(e.eventKey, i));
    }
    async function o() {
      let e = 0;
      for (; e++ < 5; )
        if (
          (await a({
            defaultValue: "visible" === document.visibilityState,
            eventKey: "visibilitychange",
            durationMs: 36e5,
          }),
          await a({
            defaultValue: await r(),
            eventKey: "online",
            durationMs: 3e5,
          }),
          "visible" === document.visibilityState)
        )
          return !0;
      return !1;
    }
    async function l(e, t) {
      let n = new URLSearchParams({ messageId: e }),
        r = await fetch(`/chat/api/chat/resume?${n.toString()}`, {
          method: "GET",
          cache: "no-store",
          signal: t,
        });
      if (!r.ok) throw Error(`Failed to fetch resume stream: ${r.statusText}`);
      if ("application/json" === r.headers.get("Content-Type")) {
        let e = await r.json();
        return {
          type: "finished-message",
          message: e.message,
          activeBlock: e.activeBlock ?? null,
        };
      }
      let i = r.body?.getReader();
      if (!i) throw Error("Response body is not readable");
      return { type: "stream", reader: i };
    }
    let c = async ({ messageId: e, signal: t, toastOpts: n }) => {
      let r = new s(n);
      try {
        let n = await o();
        if ((r.clearLoadingToastTimeout(), !n)) return null;
        let i = 500,
          s = 0;
        for (; s++ < 3; ) {
          await new Promise((e) => setTimeout(e, i * Math.min(1, s - 1)));
          try {
            let n = await l(e, t);
            return (r.showSuccessToast(), n);
          } catch (e) {
            (console.error(`Resume attempt ${s} failed:`, e), (i *= 2));
          }
        }
        return null;
      } catch (e) {
        return (console.error("Failed to resume stream:", e), null);
      } finally {
        r.dismissLoadingToast();
      }
    };
    e.s(["OfflineHandler", () => i, "fetchResumeStream", 0, c], 646851);
  },
  572934,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(199929),
      r = e.i(990453),
      i = e.i(610726);
    let s = () => {
      let [e, t] = (0, i.useLocalStorage)("v0:sg", !0);
      return [e, t];
    };
    function a() {
      let [e, i] = s();
      return (0, t.jsxs)(n.SettingsItem, {
        children: [
          (0, t.jsxs)(n.SettingsItemContent, {
            children: [
              (0, t.jsx)(n.SettingsItemTitle, { children: "Suggestions" }),
              (0, t.jsx)(n.SettingsItemDescription, {
                children:
                  "Get relevant in-chat suggestions to refine your project.",
              }),
            ],
          }),
          (0, t.jsx)(n.SettingsItemAction, {
            children: (0, t.jsx)(r.Switch, {
              checked: e,
              onCheckedChange: i,
              "aria-label": "Toggle Suggestions",
            }),
          }),
        ],
      });
    }
    e.s(["SuggestionsSetting", () => a, "useSuggestionsSetting", 0, s]);
  },
  436311,
  (e) => {
    "use strict";
    var t = e.i(296900),
      n = e.i(457456),
      r = e.i(393799),
      i = e.i(242759),
      s = e.i(265814);
    function a() {
      let e = (0, n.getGlobalAtoms)(),
        { ffw0: a } = (0, i.useFlags)(),
        o = (0, r.useAtomValue)(e.freeFixWithV0RateLimit),
        { updateFreeFixWithV0Usage: l } = (0, n.getGlobalActions)(),
        { isValidating: c } = (0, t.useServerQuerySWR)(
          ["global", "freeFixWithV0Usage"],
          {},
          { noRevalidate: !0, revalidateOnFocus: !1 },
        );
      return {
        isValidating: c,
        updateFreeFixWithV0Usage: a ? l : (e) => {},
        ...(!a
          ? {
              remaining: s.FREE_FIX_WITH_V0_LIMIT,
              usage: 0,
              limit: s.FREE_FIX_WITH_V0_LIMIT,
              hasRemaining: !0,
            }
          : { ...o, hasRemaining: o.remaining > 0 }),
      };
    }
    e.s(["useFreeFixWithV0Usage", () => a]);
  },
  207815,
  (e) => {
    "use strict";
    async function t(e) {
      let t = await fetch("/chat/api/stop-agent", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(e),
      });
      if (!t.ok) throw Error("Failed to stop agent");
      return await t.json();
    }
    e.s(["stopAgent", () => t]);
  },
  284627,
  (e) => {
    "use strict";
    var t = e.i(753533),
      n = e.i(92479),
      r = e.i(9654),
      i = e.i(142219);
    let s = [
        "task-read-files-v1",
        "task-search-web-v1",
        "task-search-repo-v1",
        "task-diagnostics-v1",
        "task-coding-v1",
        "task-thinking-v1",
        "task-read-file-v1",
      ],
      a = new Map(),
      o = (0, t.cacheResultById)(a, () => ({
        isVisible: (0, r.atom)(!1),
        fullscreenIntent: (0, r.atom)(!1),
        lastPartUpdate: (0, r.atom)(null),
        lastPartUpdatedAt: (0, r.atom)(0),
        currentPartKey: (0, r.atom)(null),
        dismissedLoaderIds: (0, r.atom)([]),
      })),
      l = new Map(),
      c = (0, t.cacheResultById)(l, (e) => {
        let t = o(e);
        return {
          ...t,
          loaderType: (0, r.atom)((e) => {
            let n = e(t.lastPartUpdate);
            return n ? n.type : null;
          }),
          heading: (0, r.atom)((e) => {
            let n = e(t.lastPartUpdate);
            if (!n) return "Working...";
            let r = h(n.type),
              { taskNameActive: i } = n;
            return i || r;
          }),
        };
      });
    function u(e) {
      let t = o(e);
      return {
        setLastPartUpdate: function (e) {
          i.store.set(t.lastPartUpdate, e);
        },
        dismissLoaderId: function (e) {
          let n = i.store.get(t.dismissedLoaderIds);
          n.includes(e) || i.store.set(t.dismissedLoaderIds, [...n, e]);
        },
        clearLastPartUpdate: function () {
          (i.store.set(t.lastPartUpdate, null),
            i.store.set(t.lastPartUpdatedAt, 0),
            i.store.set(t.currentPartKey, null));
        },
        setPartKey: function (e) {
          (i.store.set(t.currentPartKey, e),
            i.store.set(t.lastPartUpdatedAt, Date.now()));
        },
        setIsVisible: function (e) {
          i.store.set(t.isVisible, e);
        },
        setFullscreenIntent: function (e) {
          i.store.set(t.fullscreenIntent, e);
        },
        hide: function () {
          i.store.set(t.isVisible, !1);
        },
        show: function () {
          i.store.set(t.isVisible, !0);
        },
        toggleFullscreenIntent: function () {
          let e = i.store.get(t.fullscreenIntent);
          i.store.set(t.fullscreenIntent, !e);
        },
      };
    }
    function d() {
      let e = (0, n.assertChatId)((0, n.useChatId)().chatId);
      return { atoms: c(e), actions: u(e) };
    }
    function h(e) {
      switch (e) {
        case "task-read-files-v1":
          return "Reading Files...";
        case "task-search-web-v1":
          return "Searching the Web...";
        case "task-search-repo-v1":
          return "Searching Repository...";
        case "task-diagnostics-v1":
          return "Running Diagnostics...";
        case "task-coding-v1":
          return "Coding...";
        case "task-thinking-v1":
          return "Thinking...";
        case "task-read-file-v1":
          return "Reading File...";
        default:
          return "Working...";
      }
    }
    e.s([
      "LOADABLE_RICH_PART_TYPES",
      0,
      s,
      "getLoaderActions",
      () => u,
      "useCurrentChatLoader",
      () => d,
    ]);
  },
  521598,
  (e) => {
    "use strict";
    var t = e.i(32170),
      n = e.i(667660),
      r = e.i(206037);
    function i() {
      let { user: e } = (0, t.useUser)(),
        { activeScope: i } = (0, n.useActiveScope)(),
        { planSlug: s } = (0, r.usePlanInfo)(!0, i?.id);
      return { userOnFree: "v0-level0" === s && !e?.isAdminMode };
    }
    function s() {
      let { activeScope: e } = (0, n.useActiveScope)(),
        { planSlug: t } = (0, r.usePlanInfo)(!0, e?.id);
      return { userPlanSlug: t };
    }
    e.s(["useUserOnFree", () => i, "useUserPlanSlug", () => s]);
  },
  270737,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(576191);
    let r = [
      " `eslint` configuration in next.config",
      " metadataBase property in metadata export is",
      " Found a change in next.config.mjs. Restarting the server to ",
      " Cross origin request detected from",
      "Lit is in dev mode. Not recommended for production!",
      "Multiple versions of Lit loaded.",
      "[baseline-browser-mapping]",
    ];
    function i(e) {
      let i = (0, n.useRef)(0);
      (0, n.useEffect)(() => {
        i.current = 0;
      }, [e]);
      let s = e ? ["logs", e] : null,
        { data: a } = (0, t.default)(
          s,
          async () => {
            if (!e) return [];
            let t = await fetch(
              `/chat/api/vm/logs?cid=${e}&since=${i.current}`,
            );
            if (!t.ok) throw Error("Failed to fetch logs");
            let { logs: n } = await t.json(),
              s = [];
            for (let e of n || [])
              !(e.timestamp <= i.current) &&
                (r.some((t) => e.message.trim().startsWith(t.trim())) ||
                  ((i.current = Math.max(i.current, e.timestamp)),
                  s.push({
                    type: "console",
                    method: "stderr" === e.stream ? "error" : "log",
                    message: e.message,
                    isServer: !0,
                    timestamp: new Date(e.timestamp).toISOString(),
                  })));
            return s;
          },
          {
            refreshInterval: 2e3,
            revalidateOnFocus: !1,
            revalidateOnReconnect: !1,
            dedupingInterval: 0,
          },
        );
      return { events: a || [] };
    }
    e.s(["useVMConsoleEvents", () => i]);
  },
  298450,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(418625);
    function r(e) {
      let { data: r, mutate: i } = (0, n.default)(["block:consoleEvents", e], {
        fallbackData: {},
      });
      return {
        blockStatus: r ?? {},
        flagNewEvent: (0, t.useCallback)(
          (t) => i((n) => ({ ...n, [e]: n && "error" === n[e] ? "error" : t })),
          [e, i],
        ),
        clearEvents: (0, t.useCallback)(
          () =>
            i((t) => {
              let n = { ...t };
              return ((n[e] = null), n);
            }),
          [e, i],
        ),
      };
    }
    e.s(["useNewConsoleEvents", () => r]);
  },
  197069,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "40118f41786f34e8a34378e72b42e07f0fc945b970",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "saveAgentLogs",
      );
    e.s(["saveAgentLogs", () => n]);
  },
  647027,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(9654),
      r = e.i(393799),
      i = e.i(686832),
      s = e.i(176248);
    let a = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.55846 0.5C9.13413 0.5 9.65902 0.829456 9.90929 1.34788L15.8073 13.5653C16.1279 14.2293 15.6441 15 14.9068 15H1.09316C0.355835 15 -0.127943 14.2293 0.192608 13.5653L6.09065 1.34787C6.34092 0.829454 6.86581 0.5 7.44148 0.5H8.55846ZM8.74997 4.75V5.5V8V8.75H7.24997V8V5.5V4.75H8.74997ZM7.99997 12C8.55226 12 8.99997 11.5523 8.99997 11C8.99997 10.4477 8.55226 10 7.99997 10C7.44769 10 6.99997 10.4477 6.99997 11C6.99997 11.5523 7.44769 12 7.99997 12Z" fill="currentColor"/>',
    );
    var o = e.i(53223),
      l = e.i(576191);
    let c = (0, n.atom)({ open: !1, type: null }),
      u = {
        verification: {
          title: "Verification Required",
          message: (0, t.jsxs)(t.Fragment, {
            children: [
              "Add a credit card to verify your account and continue using the",
              " ",
              (0, t.jsx)("a", {
                href: "https://vercel.com/ai-gateway",
                target: "_blank",
                rel: "noopener noreferrer",
                className:
                  "text-v0-blue-600 hover:text-v0-blue-800 underline whitespace-nowrap",
                children: "Vercel AI Gateway",
              }),
              ".",
            ],
          }),
          buttonText: "Add Credit Card",
          url: "https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dadd-credit-card",
        },
        topup: {
          title: "Insufficient Funds",
          message: (0, t.jsxs)(t.Fragment, {
            children: [
              "v0 uses the",
              " ",
              (0, t.jsx)("a", {
                href: "https://vercel.com/ai-gateway",
                target: "_blank",
                rel: "noopener noreferrer",
                className:
                  "text-v0-blue-600 hover:text-v0-blue-800 underline whitespace-nowrap",
                children: "Vercel AI Gateway",
              }),
              " ",
              "to access AI models. Your credits have been depleted.",
            ],
          }),
          buttonText: "Top Up Credits",
          url: "https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dtop-up",
        },
      };
    function d() {
      let [e, n] = (0, r.useAtom)(c),
        d = e.type ? u[e.type] : null;
      (0, l.useEffect)(() => {
        e.open &&
          e.type &&
          (0, o.track)("AIGatewayErrorModalShown", { errorType: e.type });
      }, [e.open, e.type]);
      let h = () => {
          (d &&
            e.type &&
            (0, o.track)("AIGatewayErrorModalAction", {
              errorType: e.type,
              action: "primary",
            }),
            d && window.open(d.url, "_blank"),
            n({ open: !1, type: null }));
        },
        p = () => {
          (e.type &&
            (0, o.track)("AIGatewayErrorModalAction", {
              errorType: e.type,
              action: "dismiss",
            }),
            n({ open: !1, type: null }));
        };
      return d
        ? (0, t.jsxs)(i.Modal, {
            open: e.open,
            onOpenChange: (t) => n({ ...e, open: t }),
            children: [
              (0, t.jsxs)(i.ModalHeader, {
                children: [
                  (0, t.jsxs)(i.ModalTitle, {
                    className: "flex items-center gap-2",
                    children: [
                      (0, t.jsx)(a, { className: "h-5 w-5 text-yellow-500" }),
                      d.title,
                    ],
                  }),
                  (0, t.jsx)(i.ModalDescription, { children: d.message }),
                ],
              }),
              (0, t.jsxs)(i.ModalFooter, {
                children: [
                  (0, t.jsx)(s.Button, {
                    variant: "outline",
                    onClick: p,
                    size: "sm",
                    children: "Dismiss",
                  }),
                  (0, t.jsx)(s.Button, {
                    onClick: h,
                    size: "sm",
                    children: d.buttonText,
                  }),
                ],
              }),
            ],
          })
        : null;
    }
    e.s(
      ["AIGatewayErrorModal", () => d, "aiGatewayErrorModalAtom", 0, c],
      647027,
    );
  },
  554912,
  (e) => {
    "use strict";
    e.s([
      "useConsoleNextLite",
      () => m,
      "useConsoleVM",
      () => p,
      "useUploadActiveBlockLogs",
      () => h,
    ]);
    var t = e.i(576191),
      n = e.i(418625),
      r = e.i(393799),
      i = e.i(270737),
      s = e.i(298450),
      a = e.i(449381),
      o = e.i(53223),
      l = e.i(197069),
      c = e.i(647027);
    function u(e, t, n) {
      return (
        !!e.includes("https://ai-gateway.vercel.sh") &&
        (e.includes("rate_limit_exceeded")
          ? ((0, o.track)("AIGatewayErrorEncountered", {
              errorType: "rate_limit",
            }),
            t({
              type: "console",
              method: "warn",
              message:
                " Rate Limit Exceeded\n\nYou have reached your Vercel AI Gateway rate limit. Add a credit card to continue:\nhttps://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dtop-up",
              timestamp: new Date().toISOString(),
              isServer: !1,
            }),
            !0)
          : e.includes("no_providers_available")
            ? ((0, o.track)("AIGatewayErrorEncountered", {
                errorType: "no_providers",
              }),
              t({
                type: "console",
                method: "warn",
                message:
                  " Model Restricted\n\nIncluded AI Gateway credits cannot use this model. Add paid credits to continue:\nhttps://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dtop-up",
                timestamp: new Date().toISOString(),
                isServer: !1,
              }),
              !0)
            : e.includes("customer_verification_required")
              ? ((0, o.track)("AIGatewayErrorEncountered", {
                  errorType: "verification",
                }),
                n("verification"),
                !0)
              : !!e.includes("insufficient_funds") &&
                ((0, o.track)("AIGatewayErrorEncountered", {
                  errorType: "topup",
                }),
                n("topup"),
                !0))
      );
    }
    function d() {
      let e = (0, a.useActiveBlockState)(),
        { consoleEvents: n } = m(e?.id || "");
      return {
        logs: (0, t.useMemo)(() => {
          if (!e || 0 === n.length) return null;
          let t = n
            .filter((e) => "console" === e.type)
            .filter((e) => e.message.startsWith("[v0]") || "error" === e.method)
            .map((e) => {
              let t = e.message
                .split(/\r?\n/)
                .map((e) => (e.length > 500 ? e.slice(0, 500) + "..." : e));
              return `\
---
${e.isServer ? "[SERVER]" : "[CLIENT]"}
---
${t.join("\n")}`;
            })
            .join("\n");
          return t.length < 1e4
            ? t
            : t.slice(-1e4) + "\n\n[...truncated to last 10K characters...]";
        }, [n, e]),
        activeBlockId: e?.id || "",
      };
    }
    function h() {
      let { logs: e, activeBlockId: n } = d();
      return {
        uploadActiveBlockLogs: (0, t.useCallback)(
          async ({ chatId: t, userMessageId: r, logs: i }) => {
            let s = [e || "", i || ""];
            if (!s.every((e) => !e.trim()))
              try {
                (await (0, l.saveAgentLogs)({
                  chatId: t,
                  userMessageId: r,
                  logs: s.join("\n\n"),
                }),
                  (0, o.track)("DebugLogsAttachment", { blockId: n }));
              } catch {
                (0, o.track)("DebugLogsAttachmentError", { blockId: n });
              }
          },
          [e, n],
        ),
      };
    }
    function p(e, r) {
      let { data: s = [], mutate: a } = (0, n.default)(["consoleEvents", e], {
          fallbackData: [],
        }),
        { data: o, mutate: l } = (0, n.default)(["expandConsole", e], {
          fallbackData: null,
        }),
        c = (0, t.useCallback)(() => {
          (a([]),
            fetch(`/chat/api/vm/logs?cid=${r}`, { method: "DELETE" }).catch(
              (e) => {
                console.error("Failed to clear VM logs:", e);
              },
            ));
        }, [a, r]),
        { events: u } = (0, i.useVMConsoleEvents)(r);
      return (
        (0, t.useEffect)(() => {
          u.length && a((e) => [...(e || []), ...u]);
        }, [u, a]),
        {
          consoleEvents: s,
          clearConsoleEvents: c,
          expandConsole: o,
          setExpandConsole: l,
        }
      );
    }
    function m(e) {
      let { data: i = [], mutate: a } = (0, n.default)(["consoleEvents", e], {
          fallbackData: [],
        }),
        { data: o, mutate: l } = (0, n.default)(["expandConsole", e], {
          fallbackData: null,
        }),
        { flagNewEvent: d } = (0, s.useNewConsoleEvents)(e),
        h = (0, r.useSetAtom)(c.aiGatewayErrorModalAtom),
        p = (0, t.useCallback)(
          (e) => {
            ("message" in e &&
              "error" === e.method &&
              u(
                e.message,
                (e) => {
                  a((t) => [...(t || []), e]);
                },
                (e) => h({ open: !0, type: e }),
              )) ||
              (a((t) => [...(t || []), e]),
              ("message" in e && e.message.includes("[Fast Refresh]")) ||
                ("error" === e.method || "stderr" === e.method
                  ? d("error")
                  : d("log")));
          },
          [a, d, h],
        );
      return {
        consoleEvents: i,
        appendConsoleEvent: p,
        appendCodeOutputEvents: (0, t.useCallback)(
          (e) => {
            let t = !1;
            for (let n of e) {
              let e = ("message" in n && n.message) || n.content;
              if (
                e &&
                "stderr" === n.method &&
                u(
                  e,
                  (e) => {
                    a((t) => [...(t || []), e]);
                  },
                  (e) => h({ open: !0, type: e }),
                )
              ) {
                t = !0;
                break;
              }
            }
            if (!t) {
              if (
                (a((t) => [...(t || []), ...e]),
                e.some((e) => "stderr" === e.method))
              )
                return void d("error");
              d("log");
            }
          },
          [a, d, h],
        ),
        clearConsoleEvents: (0, t.useCallback)(() => {
          a([]);
        }, [a]),
        expandConsole: o,
        setExpandConsole: l,
      };
    }
  },
  519738,
  (e) => {
    "use strict";
    e.s(["useBlockVersionInfo", () => i]);
    var t = e.i(576191),
      n = e.i(301331),
      r = e.i(381434);
    function i(e) {
      let { history: i, currentBlockIndex: s } = (0, n.useBlockHistory)({
          blockId: e,
          searchAll: !0,
        }),
        a = (0, t.useMemo)(() => (0, r.isLatestBlock)(e, i), [e, i]),
        o = (0, t.useMemo)(() => s + 1, [s]),
        l = (0, t.useMemo)(() => i.length, [i]);
      return {
        isLatest: a,
        currentVersion: o,
        latestVersion: l,
        totalVersions: i.length,
        versionsBehind: a ? 0 : l - o,
      };
    }
  },
  824920,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(972287);
    let i = (0, n.cacheResult)(null, () => {
      let e = (0, r.getScopedAtoms)();
      return {
        customInstructions: (0, t.atom)((t) => {
          let n = t(e.customInstructions);
          return n.ok ? n.value.data : [];
        }),
      };
    });
    e.s(["getCustomInstructionsAtoms", 0, i]);
  },
  135080,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(972287);
    let i = null,
      s = (0, n.cacheResult)(i, () => ({
        mcpServers: (0, t.atom)((e) => {
          let t = e((0, r.getScopedAtoms)().mcpServers);
          return t.ok ? t.value.data : [];
        }),
      }));
    e.s(["getMcpServersAtoms", 0, s]);
  },
  472166,
  (e) => {
    "use strict";
    e.s(["OPT_RETRY_ID", () => er, "useV0Chat", () => eo]);
    var t = e.i(439235),
      n = e.i(576191),
      r = e.i(259112),
      i = e.i(133955),
      s = e.i(246300),
      a = e.i(92479);
    e.i(563948);
    var o = e.i(407562),
      l = e.i(818273),
      c = e.i(449381),
      u = e.i(295224),
      d = e.i(226368),
      h = e.i(209819),
      p = e.i(767373),
      m = e.i(230869),
      f = e.i(745197),
      g = e.i(470259),
      x = e.i(120485),
      v = e.i(53223),
      y = e.i(654225),
      b = e.i(663963),
      j = e.i(667660),
      w = e.i(906261),
      C = e.i(85989),
      k = e.i(306244),
      S = e.i(967122),
      N = e.i(276302),
      E = e.i(709448),
      A = e.i(370912),
      D = e.i(696871),
      I = e.i(282931),
      M = e.i(18547),
      T = e.i(393799),
      L = e.i(646851),
      P = e.i(572934),
      R = e.i(577483),
      F = e.i(418929),
      _ = e.i(254211);
    e.i(168204);
    var O = e.i(225695);
    e.i(904347);
    var B = e.i(37737),
      V = e.i(525258),
      z = e.i(436311),
      H = e.i(297239),
      $ = e.i(242759),
      U = e.i(207815),
      G = e.i(284627),
      W = e.i(204575),
      q = e.i(521598),
      Z = e.i(554912),
      K = e.i(76866),
      Y = e.i(519738);
    e.i(472428);
    var J = e.i(296900),
      Q = e.i(819969),
      X = e.i(824920),
      ee = e.i(135080),
      et = e.i(643312),
      en = e.i(583965);
    let er = "opt-retry-message",
      ei = [
        {
          name: "creditCardDetector",
          action: E.hasCreditCards,
          confirm:
            "We've detected a credit card number in your message. Are you sure you want to continue?",
        },
        {
          name: "apiKeyDetector",
          action: E.hasApiKeys,
          confirm:
            "We've detected what appears to be an API key or secret in your message. Please use Vars for sensitive keys instead. Are you sure you want to continue?",
        },
        {
          name: "authTokenDetector",
          action: E.hasAuthTokens,
          confirm:
            "We've detected what appears to be an authentication token in your message. Please use Vars for sensitive tokens instead. Are you sure you want to continue?",
        },
        {
          name: "privateKeyDetector",
          action: E.hasPrivateKeys,
          confirm:
            "We've detected what appears to be a private key in your message. Please use Vars for sensitive keys instead. Are you sure you want to continue?",
        },
      ];
    async function es(e) {
      let t = [];
      if (e)
        if (e instanceof FileList)
          for (let n of Array.from(e)) {
            let { name: e, type: r, size: i } = n,
              s = await (0, C.readFileAsDataURL)(n);
            t.push({ name: e, contentType: r, url: s, size: i });
          }
        else if (Array.isArray(e))
          for (let n of e) {
            let {
              name: e,
              url: r,
              contentType: i,
              size: s,
              v0Type: a,
              content: o,
            } = n;
            t.push({
              name: e,
              contentType: i,
              v0Type: a,
              url: r,
              size: s,
              content: o,
            });
          }
        else throw Error(g.INVALID_ATTACHMENT_TYPE);
      return t;
    }
    function ea(e, t) {
      let n = e["x-v0-project-id"],
        r = e["x-v0-project-name-base64"],
        i = e["x-v0-project-color"],
        s = e["x-v0-project-icon"],
        a = e["x-v0-project-creator-id"],
        o = e["x-v0-project-vercel-project-id"] || null;
      if (n && r)
        return {
          projectId: n,
          name: atob(r),
          settings: { color: i || null, icon: s || null },
          vercelProjectId: o,
          isCreator: t === a,
        };
    }
    function eo({ onSubmit: e } = {}) {
      let { activeScope: p, user: b } = (0, j.useActiveScope)(),
        C = b,
        E = (0, c.useSetActiveBlockState)(),
        er = (0, c.useSetActiveBlockView)(),
        {
          messages: ec,
          activeForkKey: ed,
          chatId: eh,
        } = (0, a.useChatMessages)(),
        { isLoading: ep, isSyncing: em } = (0, a.useChatLoadingState)(),
        { undo: ef } = (0, a.useChatUndoState)(),
        eg = (0, H.useT)(),
        { actions: ex, atoms: ev } = (0, F.useCurrentChatPrompt)(),
        { startEditingMessage: ey } = ex,
        eb = (0, a.useSetChatState)(),
        {
          setMetadata: ej,
          project: ew,
          vercelProjectId: eC,
        } = (0, h.useChatMetadata)(),
        ek = (0, y.localDraftController)(eh, !1),
        { quote: eS, setQuote: eN } = (0, h.useChatQuote)(),
        { revalidate: eE, setData: eA } = (0, s.useChatHistory)(),
        { revalidate: eD } = (0, J.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: eh },
          { stopFetch: !0 },
        ),
        { revalidate: eI } = (0, J.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: eh },
          { stopFetch: !0 },
        ),
        eM = (0, u.useLatest)(eD),
        eT = (0, u.useLatest)(eI),
        [eL] = (0, P.useSuggestionsSetting)(),
        eP = (0, u.useLatest)(e),
        eR = (0, u.useLatest)(ec),
        [, eF] = (0, f.useRateLimit)(),
        { usage: e_, updateDailyModelUsage: eO } = (0, V.useDailyModelUsage)(),
        { usage: eB, updateFreeFixWithV0Usage: eV } = (0,
        z.useFreeFixWithV0Usage)(),
        { pipl: ez, dmule: eH, ffw0: e$ } = (0, $.useFlags)(),
        { userPlanSlug: eU } = (0, q.useUserPlanSlug)(),
        eG = (0, S.useActiveBlockIdRef)(),
        { setBlockCreatedAt: eW } = (0, A.useBlockCreatedAt)(),
        eq = (0, d.useRouter)(),
        eZ = (0, n.useMemo)(() => (0, N.getAnonId)(), []),
        {
          data: eK,
          envVars: eY,
          isValidating: eJ,
          status: eQ,
        } = (0, et.useIntegrationsApi)(),
        eX = !eJ && "ready" === eQ,
        e0 = (0, u.useLatest)(eX),
        e1 = (0, u.useLatest)(eK),
        e2 = (0, u.useLatest)(eY),
        { uploadActiveBlockLogs: e5 } = (0, Z.useUploadActiveBlockLogs)(),
        e3 = (0, c.useActiveBlockState)(),
        { exitToLatest: e4 } = (0, K.useRestoreBlockVersion)(e3?.id),
        { isLatest: e9 } = (0, Y.useBlockVersionInfo)(e3?.id),
        { refresh: e7 } = (0, en.useRefreshBrowserFrame)(),
        e6 = (0, T.useAtomValue)(ev.isThinking),
        e8 = (0, T.useAtomValue)(ev.isImageGenerations),
        te = (0, T.useAtomValue)(ev.toolConfiguration);
      te.designSystemId;
      let tt = te.vercelProjectId,
        tn = (0, X.getCustomInstructionsAtoms)(),
        tr = (0, T.useAtomValue)(tn.customInstructions),
        { atoms: ti } = (0, Q.useCurrentChat)(),
        ts = (0, T.useAtomValue)(ti.chatCreationDate),
        ta = (0, n.useMemo)(
          () => tr.filter((e) => te.customInstructionIds.includes(e.id)),
          [tr, te.customInstructionIds],
        ),
        to = (0, ee.getMcpServersAtoms)(),
        tl = (0, T.useAtomValue)(to.mcpServers),
        tc = (0, n.useMemo)(
          () => tl.filter((e) => te.mcpServerIds.includes(e.mcpServerId)),
          [tl, te.mcpServerIds],
        ),
        tu = (0, _.getDurableRootAtoms)("root"),
        td = (0, T.useAtomValue)(tu.modelConfiguration).modelId,
        th = (0, n.useCallback)(
          async (e, n, s) => {
            if (em) return;
            for (let t of (e3 && !e9 && "new" === e.action && e4(e3), ei))
              if (
                "content" in e &&
                e.content &&
                t.action((0, O.stringifyMessageContent)(e.content)) &&
                ((0, v.track)("ClientSideValidatorTriggered", {
                  validatorName: t.name,
                }),
                !confirm(t.confirm))
              )
                return;
            if (
              (!C?.id &&
                eZ &&
                (C = {
                  id: eZ,
                  avatarSha: void 0,
                  stripeCustomerId: void 0,
                  username: "anon",
                  avatar: "",
                  plan: "anon",
                  email: "",
                  name: "Anonymous",
                  teams: [],
                  createdAt: "1970-01-01T00:00:00.000Z",
                }),
              !C?.id)
            )
              return;
            let a = C.id,
              c = s ? s.messages : eR.current,
              u = s ? s.activeForkKey : ed,
              d = u,
              h = [...c],
              f = !1,
              b = (e) => {
                (e.preventDefault(), (e.returnValue = ""));
              };
            try {
              let h, F;
              await eF();
              let _ = (0, k.createNewAbortSignalForKey)(eh, () =>
                  eb({ isLoading: !1, isStreaming: !1 }),
                ),
                V = n?.type === "resumed",
                z = n?.type === "initial",
                H = 0 === c.length || z;
              (n || eP.current?.(),
                eb({ isLoading: !0 }),
                H &&
                  (window.history.pushState(null, "", `/chat/${eh}`),
                  (0, R.mutate)("chat:id", eh, !1),
                  (0, Q.getChatActions)(eh).initializeNewChatState(),
                  (0, y.localDraftController)(eh, !0).deleteLocalDraft()));
              let $ = el({
                  content:
                    "content" in e && e.content
                      ? e.content
                      : { version: 1, parts: [] },
                  chatSubmitData: e,
                  quote: eS,
                  isResumingStream: V,
                  messages: c,
                  activeForkKey: u,
                  authorId: a,
                }),
                U = Promise.resolve(null);
              if (
                (!H &&
                  $?.newUserMessage?.id &&
                  (U = e5({
                    chatId: eh,
                    userMessageId: $.newUserMessage.id,
                    logs: "fix-with-v0" === e.action ? e.logs : void 0,
                  })),
                !$)
              )
                return void eb({ isLoading: !1, isStreaming: !1 });
              (eN(null),
                eb({
                  prefillOptions: {
                    query: void 0,
                    projectId: void 0,
                    vercelProjectId: void 0,
                    designSystemId: void 0,
                  },
                  isLoading: !0,
                  isStreaming: !1,
                  undo: {
                    messages: c,
                    forkKey: d,
                    editingUserMessageId:
                      "edit" === e.action ? e.userMessageId : null,
                  },
                }));
              let q = await es("attachments" in e ? e.attachments : void 0);
              "new" !== e.action &&
                "edit" !== e.action &&
                ($.newUserMessage?.attachments?.length || 0) > 0 &&
                q.push(...$.newUserMessage.attachments);
              let {
                  action: Z,
                  continueAssistantMessage: K,
                  newUserMessage: Y,
                  newActiveForkKey: J,
                } = $,
                X = [...c];
              ("type" in e && Y && (Y.type = e.type),
                Y && !$.isFromQParam && X.push(Y),
                eb({ messages: X, activeForkKey: J }));
              let ee = document.getElementById(I.SCROLL_DOWN_BUTTON_ID);
              ee && ee.click();
              let et = {};
              if (n?.type === "resumed") {
                let e = await (0, L.fetchResumeStream)({
                  messageId: n.responseMessageId,
                  signal: _,
                  toastOpts: null,
                });
                if (!e) throw Error("Failed to resume stream");
                ((h = e), (et = n.headers));
              } else {
                let t = [];
                n?.type === "initial" && (t = n.connectedIntegrations);
                let r = [
                    ...t,
                    ...(e1.current || [])
                      .filter((e) => null !== e.connectedInstanceName)
                      .map((e) => ({
                        integrationName: e.name,
                        instanceName: e.connectedInstanceName,
                      })),
                  ],
                  i = e0.current || !!n?.connectedIntegrations,
                  s = [];
                "envVars" in e && e.envVars
                  ? (s = e.envVars)
                  : n?.envVars && (s = n.envVars);
                let a = e0.current || !!n?.envVars,
                  o = [
                    ...Object.values(e2.current || []).map((e) => ({
                      id: e.id,
                      key: e.key,
                    })),
                    ...s,
                  ],
                  l = {};
                n?.projectId && (l = { projectId: n.projectId });
                let c = {};
                n?.messageAttachments
                  ? (c = { attachments: n.messageAttachments })
                  : q.length > 0 && (c = { attachments: q });
                let u = p && !(0, w.isUserScope)(p) ? p.slug : void 0;
                window.addEventListener("beforeunload", b);
                let d = H ? te.designSystemId : null;
                function j() {
                  return n?.type === "initial"
                    ? n.templateId
                    : "templateId" in e && e.templateId
                      ? e.templateId
                      : void 0;
                }
                (V ||
                  (0, v.track)("PromptSent", {
                    planSlug: eU || null,
                    promptId: $.userMessageId,
                    isImageGeneration: e8,
                    origin: Z?.type || null,
                    promptText: Y
                      ? (0, O.stringifyMessageContent)(Y.content).slice(0, 1e3)
                      : null,
                    startedAt: Date.now(),
                    attachments: q.map((e) => ({
                      name: e.name || null,
                      contentType: e.contentType || null,
                    })),
                    projectId: ew?.projectId || null,
                    designSystemId: d || null,
                  }),
                  await U);
                let m = await fetch("/chat/api/chat", {
                  method: "POST",
                  body: JSON.stringify({
                    messageContent: Y?.content,
                    templateId: j(),
                    messageId: Y?.id,
                    forceResponse:
                      "forceResponse" in e ? e.forceResponse : void 0,
                    chatId: eh,
                    isNew: H,
                    figmaContext: "figmaContext" in e ? e.figmaContext : void 0,
                    userMessageType: "type" in e ? e.type : void 0,
                    forkKey: J?.slice(0, -1),
                    ...l,
                    action: Z,
                    ...c,
                    team: u,
                    ...("workflowState" in e
                      ? { workflowState: e.workflowState }
                      : {}),
                    ...("new" === e.action && void 0 !== e.autopilot
                      ? { autopilot: e.autopilot }
                      : {}),
                    optimisticConnectedIntegrations: i ? r : void 0,
                    optimisticEnvVarKeys: a ? o : void 0,
                    modelConfiguration: {
                      modelId: td,
                      imageGenerations: e8,
                      thinking: e6,
                    },
                    suggestedActionsEnabled: eL,
                    ...("new" === e.action && null !== d
                      ? { designSystemId: d }
                      : {}),
                    ...("new" === e.action && null !== tt
                      ? { vercelProjectId: tt }
                      : {}),
                    ...(ta.length > 0
                      ? {
                          customInstructions: ta.map((e) => ({
                            id: e.id,
                            title: e.title,
                            rule: e.rule,
                          })),
                        }
                      : {}),
                    ...(tc.length > 0
                      ? {
                          mcpServers: tc.map((e) => ({
                            id: e.mcpServerId,
                            name: e.name,
                            url: e.url,
                            enabled: e.enabled,
                            auth: e.auth,
                          })),
                        }
                      : {}),
                    ...(te.marketplaceMcpIds.length > 0
                      ? { marketplaceMcpIds: te.marketplaceMcpIds }
                      : {}),
                    agentPermissions: te.autoAllowMcpTools
                      ? [{ type: "ALLOW_ALL_DYNAMIC_TOOLS" }]
                      : void 0,
                    chatCreationTime: ts ?? Date.now(),
                  }),
                  headers: { "Content-Type": "application/json" },
                  signal: _,
                });
                if (
                  (window.removeEventListener("beforeunload", b),
                  !m.ok || !m.body)
                ) {
                  if (402 === m.status) throw Error(g.OUT_OF_CREDITS);
                  let e = await m.text();
                  throw Error(e);
                }
                if (eH && "v0-level0" === C.v0plan) {
                  let e = e_ + 1;
                  (eO(e),
                    !H &&
                      e >= D.DAILY_MODEL_USAGE_LIMIT &&
                      (0, B.openDialog)({
                        type: "upgradePlan",
                        data: {
                          customTitle: eg("rateLimit.daily.upgradeTitle"),
                        },
                      }));
                }
                if (e$ && "fix-with-v0" === e.action) {
                  let e = eB + 1;
                  eV(e);
                }
                ((0, y.localDraftController)(eh, !1).deleteLocalDraft(),
                  (et = Object.fromEntries(m.headers.entries())),
                  (h = { type: "stream", reader: m.body.getReader() }));
              }
              let en = et["x-v0-url-attachments"]
                ? JSON.parse(atob(et["x-v0-url-attachments"]))
                : void 0;
              en &&
                void 0 !== Y &&
                ((X[X.length - 1].attachments = [
                  ...(X[X.length - 1].attachments || []),
                  ...(en || []),
                ]),
                eb({ messages: X }));
              let ei = ea(et, p?.id);
              ei && ej({ project: ei });
              let eo = et["x-v0-user-message-id"];
              if (!eo) throw Error(g.MISSING_USER_MESSAGE_ID);
              K &&
                (X = X.filter((e) => "assistant" !== e.role || e.id !== K.id));
              let ec = !1,
                ed = new TextDecoder(),
                ep = et["x-v0-response-message-id"];
              if (!ep) throw Error(g.MISSING_ASSISTANT_MESSAGE_ID);
              let em = eu({
                  responseMessageId: ep,
                  action: Z,
                  newActiveForkKey: J,
                  userMessageServerId: eo,
                }),
                ef = [],
                ex = () => ({ type: "message-binary-format", value: ef }),
                ev = null,
                ey = {},
                eC = !1;
              function S() {
                if (!ez) return;
                if (eC) {
                  (eD.setFullscreenIntent(!1), (eC = !1));
                  return;
                }
                if (!ev) return;
                let e = ey[ev.id] || ev;
                T(!0, e);
              }
              function N(e) {
                if (ez && ev && (0, l.isFetchingDiagnostics)(e)) {
                  if (!eG?.current || eG.current === ev.id) return void S();
                  (0, W.preloadIframeForBlock)(eG.current, ev.id, () => S());
                }
              }
              function A(n) {
                _.throwIfAborted();
                try {
                  n.includes("finished-dynamic-tool-execution") && e7();
                  let t = JSON.parse(n);
                  ((ef = (0, r.patch)(ef, t)),
                    (0, l.didRunOutOfCredits)(ef) &&
                      (0, x.openOutOfCreditsDialog)(
                        C?.v0plan || "v0-level0",
                        eq,
                      ),
                    N(ef));
                  let i = (0, l.getBlocksFromState)(
                      { type: "message-binary-format", value: ef },
                      ep,
                    ),
                    s = (0, l.getMetadataFromState)(ef);
                  if (
                    (!ec &&
                      "string" == typeof s.title &&
                      s.title &&
                      ((ec = !0),
                      ej({
                        title: s.title,
                        project: ew || {
                          isCreator: !0,
                          name: s.title,
                          projectId: "",
                          settings: { color: null, icon: null },
                        },
                      }),
                      (0, Q.getChatActions)(eh).setChatTitle(s.title),
                      H &&
                        s.title &&
                        eA(
                          (e) => [
                            {
                              title: s.title,
                              chatId: eh,
                              updatedAt: new Date(),
                              shareable: !1,
                              privacy: "private",
                              favorite: !1,
                              optimistic: !0,
                              authorId: a,
                            },
                            ...e.filter((e) => e.chatId !== eh),
                          ],
                          !1,
                        )),
                    (F = {
                      parentId: eo,
                      role: "assistant",
                      content: ex(),
                      id: ep,
                      blocks: i.map((e) => e.id),
                      streaming: !0,
                      finishReason: s.finishReason || null,
                      usage: s.usage,
                      modelId: s.modelId,
                      continuingMessageId: K?.id,
                      type:
                        "type" in e && "added-integration" === e.type
                          ? "added-integration"
                          : "message",
                      createdAt: F.createdAt || new Date(),
                    }),
                    eb({ messages: [...X, F], isLoading: !1, isStreaming: !0 }),
                    i.length >= 1)
                  ) {
                    let e = i[i.length - 1];
                    ((!ez || eC) &&
                      (e.id !== eG?.current ||
                        D.INLINE_BLOCK_TYPES.includes(e.type) ||
                        E(e)),
                      (ey[e.id] = e));
                  }
                  return i;
                } catch (e) {
                  ((0, v.track)("ChatHookError", {
                    chatId: eh,
                    errorCode: g.FAILED_TO_READ_ROW,
                    errorMsg: `Failed to read row: ${n}`,
                  }),
                    "production" !== t.default.env.VERCEL_ENV &&
                      console.error(e, "Error reading row:", n));
                  return;
                }
              }
              ((F = {
                parentId: eo,
                role: "assistant",
                content: ex(),
                id: ep,
                streaming: void 0 === K,
                finishReason: null,
                continuingMessageId: K?.id,
                type: "message",
                createdAt: new Date(),
              }),
                eb({
                  messages: [...X, F],
                  activeForkKey: em,
                  saveLeafMessageId: !0,
                }),
                (f = !0));
              let ek = new L.OfflineHandler(),
                eD = (0, G.getLoaderActions)(eh),
                eI = !1,
                eR = () => {
                  if (eI) return !0;
                  let e = s ? s.messages : c,
                    t = s ? s.activeForkKey : u;
                  for (let n of e.filter((e) => t?.includes(e.id)))
                    if ((0, l.getBlocksFromState)(n.content, n.id).length > 0)
                      return ((eI = !0), !0);
                  return !1;
                };
              function T(...e) {
                if (s?.avoidAutoSwitchingBlock) {
                  let t = e[1];
                  if (!t) return;
                  o.toast.default("New message is ready to preview", {
                    duration: 5e3,
                    action: {
                      children: "View",
                      onClick: () => {
                        let e = ey[t.id];
                        e && er(!0, e);
                      },
                    },
                  });
                  return;
                }
                er(...e);
              }
              async function P(e) {
                if ("finished-message" === e.type) {
                  ((F = e.message),
                    eb({ messages: [...X, e.message], activeForkKey: em }),
                    e.activeBlock && T(!0, e.activeBlock));
                  return;
                }
                let t = "",
                  n = null;
                for (ef = []; ; ) {
                  _.throwIfAborted();
                  let r = await Promise.race([e.reader.read(), ek.promise]);
                  if (!r) throw Error("network error");
                  let { value: i, done: s } = r;
                  if (s) break;
                  let a = t + (i instanceof Uint8Array ? ed.decode(i) : i),
                    {
                      isLlmError: o,
                      isRetried: l,
                      errorCategory: c = "default",
                    } = (0, m.isLlmError)(a),
                    u = l
                      ? `retry_provider_server_error:${c}`
                      : `provider_server_error:${c}`;
                  if (o)
                    throw (
                      eb({ messages: [...X, { ...F, finishReason: u }] }),
                      Error(g.LLM_CALL_ERROR)
                    );
                  let d = a.split("\n");
                  for (let e = 0; e < d.length - 1; e++) {
                    let t = A(d[e]),
                      r = t?.length && t[t.length - 1].id !== n;
                    (!n || eG?.current === n || ev?.id) &&
                      r &&
                      (eW(t[t.length - 1].id, new Date().toISOString()),
                      (n = t[t.length - 1].id),
                      D.INLINE_BLOCK_TYPES.includes(t[t.length - 1].type) ||
                        (ez
                          ? (eR()
                              ? "svelte" === t[t.length - 1].language &&
                                (eD.setFullscreenIntent(!0), (eC = !0))
                              : ((eI = !0),
                                eD.setFullscreenIntent(!0),
                                (eC = !0)),
                            eC && T(!0, t[t.length - 1]),
                            (ev = t[t.length - 1] || null))
                          : T(!0, t[t.length - 1])));
                  }
                  t = d[d.length - 1];
                }
                t && A(t);
              }
              let eZ = 0,
                eK = 0;
              for (;;)
                try {
                  await P(h);
                  break;
                } catch (t) {
                  if (
                    (t instanceof Error && "AbortError" === t.name) ||
                    eZ++ > 10
                  )
                    throw t;
                  let e = await (0, L.fetchResumeStream)({
                    messageId: ep,
                    signal: _,
                    toastOpts: {
                      loadingMessage: "Reconnecting",
                      successMessage: "Reconnected",
                      lastReconnectedAt: eK,
                    },
                  });
                  if (!e) throw t;
                  ((eK = Date.now()), (h = e), ek.resetPromises());
                } finally {
                  ek.cleanupOfflineListener();
                }
              (eb({
                messages: [...X, { ...F, streaming: !1 }],
                isStreaming: !1,
                initialStreamPromise: void 0,
              }),
                S(),
                (0, M.emitChatMessageFinished)(),
                H &&
                  (await (0, i.invalidateRouterCache)(),
                  "id" !== eh && eh
                    ? (eE(), eM.current(), eT.current())
                    : console.warn(
                        "Skipping client side revalidations for chatId 'id'",
                      )),
                (0, k.removeAbortController)(eh));
            } catch (t) {
              if (
                (window.removeEventListener("beforeunload", b),
                t instanceof Error && "AbortError" === t.name)
              )
                return;
              ((0, M.emitChatMessageFinished)(),
                !f && "onFailToPrompt" in e && e.onFailToPrompt?.(),
                eb({
                  isLoading: !1,
                  undo: null,
                  isStreaming: !1,
                  initialStreamPromise: void 0,
                  prefillOptions: {
                    query: void 0,
                    projectId: void 0,
                    vercelProjectId: void 0,
                    designSystemId: void 0,
                  },
                  ...(!f ? { activeForkKey: d, messages: h } : {}),
                }),
                (0, k.abortKey)(eh),
                (0, x.handleChatError)(
                  t,
                  eq,
                  "Failed to submit message. Start a new chat, retry, or edit your message.",
                  {
                    scopeSlug: (0, w.isUserScope)(p) ? void 0 : p?.slug,
                    chatId: eh,
                    projectId: ew?.projectId || void 0,
                    userPlan: C.v0plan || "v0-level0",
                  },
                ) ||
                  o.toast.error(
                    "An unexpected error occurred. Please refresh the page and try again.",
                  ),
                f || 0 !== h.length || eq.push("/chat"));
            }
          },
          [
            C,
            ed,
            eR,
            eF,
            eh,
            eb,
            ek,
            eS,
            eN,
            eP,
            ej,
            p,
            ew,
            eA,
            eG,
            E,
            em,
            er,
            eq,
            eE,
            e7,
          ],
        ),
        tp = (0, n.useCallback)(() => {
          let e = eR.current;
          (0, k.abortKey)(eh);
          let t = e[e.length - 1];
          if (
            (t &&
              "assistant" === t.role &&
              t.id &&
              (0, U.stopAgent)({ assistantMessageId: t.id, chatId: eh }).catch(
                (e) => {
                  (0, v.track)("StopAgentError", {
                    assistantMessageId: t.id,
                    error: e instanceof Error ? e.message : String(e),
                  });
                },
              ),
            ep && ef)
          ) {
            if (
              (eb({ activeForkKey: ef.forkKey, messages: ef.messages }),
              ef.editingUserMessageId)
            ) {
              let e = ef.messages.find(
                (e) => e.id === ef.editingUserMessageId && "user" === e.role,
              );
              e && "user" === e.role && ey({ ...e });
            }
          } else if (e.length > 0) {
            let t = e[e.length - 1];
            "assistant" === t.role &&
              eb({ messages: [...e.slice(0, -1), { ...t, streaming: !1 }] });
          }
          setTimeout(() => eb({ isStreaming: !1, isLoading: !1 }), 0);
        }, [eh, eR, ef, eb, ep, ey]),
        tm = (0, n.useRef)(th),
        tf = (0, n.useRef)(eb),
        tg = (0, n.useRef)(tp);
      ((tm.current = th), (tf.current = eb), (tg.current = tp));
      let tx = (0, n.useCallback)((...e) => tm.current(...e), []),
        tv = (0, n.useCallback)((...e) => tf.current(...e), []);
      return {
        submit: tx,
        stopLlmResponse: (0, n.useCallback)((...e) => tg.current(...e), []),
        setChatState: tv,
      };
    }
    function el({
      content: e,
      chatSubmitData: t,
      isResumingStream: n,
      quote: r,
      messages: i,
      activeForkKey: s,
      authorId: a,
    }) {
      switch (t.action) {
        case "retry": {
          if (!s) throw Error(g.MISSING_FORK_KEY_FOR_CONTINUE_RETRY);
          let e = t.assistantMessageId,
            n = i.find(
              (t) => "id" in t && t.id === e && "assistant" === t.role,
            );
          if (!n || "assistant" !== n.role || !n.parentId)
            throw Error(g.NOT_FOUND);
          let r = (0, p.replaceIdInForkKey)(
            s,
            e,
            er + (0, b.generateMessageId)(),
          );
          return {
            action: {
              type: t.action,
              userMessageId: n.parentId,
              assistantMessageId: e,
            },
            newActiveForkKey: r,
            userMessageId: n.parentId,
          };
        }
        case "edit": {
          if (!e.parts.length) throw Error(g.EMPTY_MESSAGE_ERROR);
          if (!s) throw Error(g.MISSING_FORK_KEY_FOR_EDIT);
          ec(e, r);
          let n = t.userMessageId,
            a = i.find((e) => e.id === n);
          if (a?.role !== "user") throw Error(g.NOT_FOUND);
          let o = (0, b.generateMessageId)();
          return {
            newUserMessage: {
              role: "user",
              content: { ...e, type: "parts" },
              id: o,
              attachments: t.attachments,
              parentId: a.parentId,
              type: "message",
              authorId: a.authorId,
              createdAt: new Date(),
            },
            userMessageId: a.id,
            action: { type: "edit", userMessageId: a.id },
            newActiveForkKey: (0, p.replaceIdInForkKey)(s, a.id, o),
          };
        }
        case "fix-with-v0": {
          if ((ec(e, r), !e.parts.length)) throw Error(g.EMPTY_MESSAGE_ERROR);
          let t = (0, b.generateMessageId)(),
            n = (0, p.addMessageIdToForkKey)(s, t),
            i = {
              role: "user",
              content: { ...e, type: "parts" },
              id: t,
              attachments: [],
              parentId: (0, p.getLeafMessageIdFromForkKey)(s),
              type: "fix-with-v0",
              authorId: a,
              createdAt: new Date(),
            };
          return {
            newUserMessage: i,
            userMessageId: i.id,
            newActiveForkKey: n,
            action: { type: "fix-with-v0" },
          };
        }
        case "new": {
          ec(e, r);
          let o = i[0];
          if (1 === i.length && o?.role === "user")
            return {
              isFromQParam: !0,
              userMessageId: o.id,
              newUserMessage: o,
              newActiveForkKey: (0, p.addMessageIdToForkKey)(void 0, o.id),
            };
          if (
            !e.parts.length &&
            !n &&
            (!t.attachments || 0 === t.attachments.length)
          )
            throw Error(g.EMPTY_MESSAGE_ERROR);
          if (n)
            return {
              newUserMessage: void 0,
              userMessageId: "",
              newActiveForkKey: s,
            };
          let l = (0, b.generateMessageId)(),
            c = (0, p.addMessageIdToForkKey)(s, l),
            u = {
              role: "user",
              content: { ...e, type: "parts" },
              id: l,
              attachments: t.attachments,
              parentId: (0, p.getLeafMessageIdFromForkKey)(s),
              type: "message",
              authorId: a,
              createdAt: new Date(),
            };
          return {
            newUserMessage: u,
            userMessageId: u.id,
            newActiveForkKey: c,
          };
        }
        default:
          throw Error(g.UNEXPECTED_ERROR);
      }
    }
    function ec(e, t) {
      if (t) {
        for (let n of e.parts)
          if ("mdx" === n.type) {
            n.content = `${t
              .split("\n")
              .map((e) => "> " + e)
              .join("\n")}

${n.content}`;
            return;
          }
        e.parts.unshift({
          type: "mdx",
          content: t
            .split("\n")
            .map((e) => "> " + e)
            .join("\n"),
        });
      }
    }
    function eu({
      responseMessageId: e,
      action: t,
      newActiveForkKey: n,
      userMessageServerId: r,
    }) {
      if (t?.type === "retry") return (0, p.createSiblingForkKey)(n, e);
      let i = (0, p.createSiblingForkKey)(n, r);
      return (0, p.addMessageIdToForkKey)(i, e);
    }
  },
  894221,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "40f777ac8e65ed8123f2bfa9159a04b9449612a617",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "assignVercelAlias",
      );
    e.s(["assignVercelAlias", () => n]);
  },
  369218,
  (e) => {
    "use strict";
    let t = "LOADING_SKELETON";
    e.s(["LOADING_SKELETON", 0, t]);
  },
  315331,
  (e) => {
    "use strict";
    async function t({
      blockId: e,
      skipDeploy: t,
      skippedDeployWarning: n,
      branch: r,
    }) {
      try {
        return fetch("/chat/api/git/push", {
          method: "POST",
          body: JSON.stringify({
            blockId: e,
            skipDeploy: t,
            skippedDeployWarning: n,
            branch: r,
            from: "manual-push",
          }),
        });
      } catch (e) {
        throw e;
      }
    }
    e.s(["pushChanges", () => t]);
  },
  348327,
  980970,
  280419,
  (e) => {
    "use strict";
    let t, n;
    e.s(["useAsyncChatDeploymentActions", () => F], 348327);
    var r = e.i(393799),
      i = e.i(576191),
      s = e.i(226368),
      a = e.i(724560),
      o = e.i(472166);
    e.i(563948);
    var l = e.i(407562);
    e.i(472428);
    var c = e.i(296900),
      u = e.i(894221),
      d = e.i(696871),
      h = e.i(53223),
      p = e.i(373998),
      m = e.i(449381),
      f = e.i(144019),
      g = e.i(32170),
      x = e.i(369218);
    e.i(904347);
    var v = e.i(37737),
      y = e.i(315331),
      b = e.i(242759),
      j = e.i(209819),
      w = e.i(667660);
    e.i(168204);
    var C = e.i(225695);
    e.s(["usePrewarmDeployWarnings", () => L], 280419);
    var k = r,
      S = i,
      N = p,
      E = g,
      A = m,
      D = e.i(919012),
      I = (0, D.createServerReference)(
        "4037343fc951da76e8e527b0f81799286a823648a5",
        D.callServer,
        void 0,
        D.findSourceMapURL,
        "collectBlockDeployWarnings",
      );
    e.s(["collectBlockDeployWarnings", () => I], 980970);
    var M = e.i(819969),
      T = e.i(92479);
    function L({ chatId: e }) {
      let r = (0, N.getChatDeploymentAtoms)(e),
        i = (0, k.useAtomValue)(r.deployWarning),
        { setDeployWarning: s } = (0, N.getChatDeploymentActions)(e),
        { user: a } = (0, E.useUser)(),
        o = (0, A.useActiveBlockState)(),
        l = (0, M.getChatAtoms)(e),
        c = (0, k.useAtomValue)(l.isStreaming),
        { messagesLength: u } = (0, T.useChatMessagesLength)(),
        d = (0, S.useCallback)(
          async ({ blockId: r, fromGitProject: a }) => {
            let o = `${e}-${r}-${a}`;
            return (o !== n && ((t = void 0), (n = o)), i)
              ? { set: !1, skippedDeployWarning: i.commonDeployError }
              : t ||
                  (t = (async () => {
                    try {
                      let e = await I({ blockId: r, fromGitProject: a });
                      if (!("warning" in e)) return { set: !1 };
                      return (s({ ...e, from: "deploy" }), { set: !0 });
                    } catch {
                      return { set: !1, skippedDeployWarning: void 0 };
                    }
                  })());
          },
          [i, s, e],
        );
      return {
        prewarmDeployWarning: (0, S.useCallback)(
          (e) => {
            let t = o?.id,
              n = c && u <= 2;
            t && a && !n && d({ blockId: t, fromGitProject: e });
          },
          [o?.id, c, u, a, d],
        ),
        maybeSetDeployWarning: d,
      };
    }
    var P = e.i(387040),
      R = e.i(643312);
    function F({ chatId: e }) {
      let t = (0, s.useRouter)(),
        n = (0, p.getChatDeploymentAtoms)(e),
        x = (0, r.useAtomValue)(n.externalMeta),
        { user: y } = (0, g.useUser)(),
        { mutate: k } = (0, c.useServerQuerySWR)(["chat", "externalMeta"], {
          chatId: e,
        }),
        { submit: S } = (0, o.useV0Chat)(),
        N = (0, m.useActiveBlockState)(),
        E = (0, f.useAutoCreateProject)({ chatId: e, activeBlock: N }),
        {
          isTeam: A,
          isNewV0Rbac: D,
          hasVercelWritePermission: I,
        } = (0, w.useActiveScope)(),
        M = !!(D ? I : y && ["OWNER", "MEMBER"].includes(y.teamRole ?? "")),
        { data: T } = (0, c.useServerQuerySWR)(
          ["scoped", "team"],
          {},
          { stopFetch: !A, revalidateNever: !0 },
        ),
        F =
          !!A &&
          !!T?.ok &&
          T.value.enabledInvoiceItems?.passwordProtection?.enabled,
        {
          setIsOpenForLocation: U,
          setStageIntent: G,
          setNewDomain: W,
          setDeployWarning: q,
          setDomainError: Z,
          setDomainErrorRedirect: K,
          setAsyncActionLoading: Y,
          setDeployButtonClickedAtTimestamp: J,
          setDeployCreationStartTimestamp: Q,
          setDeployCreationEndTimestamp: X,
        } = (0, p.getChatDeploymentActions)(e),
        ee = (0, r.useAtomValue)(n.asyncActionLoading),
        et = (0, r.useAtomValue)(n.isAbleToDeploy),
        en = (0, r.useAtomValue)(n.isAbleToPushChanges),
        er = (0, r.useAtomValue)(n.isNewDomainValid),
        ei = (0, r.useAtomValue)(n.newDomain),
        es = (0, r.useAtomValue)(n.newBranchName),
        ea = (0, r.useAtomValue)(n.deployWarning),
        { project: eo, vercelProjectId: el } = (0, j.useChatMetadata)(),
        { deployment: ec, git: eu } = x.ok ? x.value : {},
        { dpe: ed } = (0, b.useFlags)(),
        eh = (0, r.useAtomValue)(n.protection),
        ep = (0, r.useAtomValue)(n.protectionPassword),
        { maybeSetDeployWarning: em } = L({ chatId: e }),
        ef = (0, R.useRefetchIntegrationsApi)(),
        eg = (0, i.useMemo)(() => es ?? eu?.ref ?? "main", [es, eu]),
        ex = (0, i.useMemo)(() => ({ ...V, ...ec, ...B(y) }), [ec, y]),
        ev = (0, i.useMemo)(() => ({ ...H, ...eu, ...z(eg) }), [eu, eg]),
        ey = async () => {
          let e = await E();
          return (
            e.ok ||
              l.toast.error(`Unable to create project. Error: ${e.error}`),
            e
          );
        },
        eb = async () => {
          try {
            J(Date.now());
            let t = N?.id;
            if (!et || !t || !y) return void l.toast.error("Unable to deploy");
            let n = await em({ blockId: t, fromGitProject: !1 });
            if (n.set) return;
            if (ed && "public" !== eh && "password" === eh) {
              if (!F)
                return void l.toast.error(
                  "Your plan does not include Password-Protected Deployments",
                );
              if (M && !ep?.trim())
                return void l.toast.error("Please enter a password");
            }
            await k({
              serverMutate: (async () => {
                if (
                  (await ey(), "password" === eh && M && eo?.projectId && ed)
                ) {
                  let t = await (0, a.configureDeploymentProtectionAction)({
                    projectId: eo.projectId,
                    chatId: e,
                    kind: "password",
                    password: ep.trim(),
                  });
                  if (!0 !== t)
                    throw Error("Failed to configure password protection");
                }
                if ("team" === eh && M && eo?.projectId && ed) {
                  let t = await (0, a.configureDeploymentProtectionAction)({
                    projectId: eo.projectId,
                    kind: "sso",
                    chatId: e,
                    enabled: !0,
                  });
                  if (!0 !== t)
                    throw Error("Failed to configure team protection");
                }
                Q(Date.now());
                let r = await _({
                  blockId: t,
                  skippedDeployWarning: n.skippedDeployWarning,
                });
                ("error" in r &&
                  l.toast.error(
                    `An error occurred while deploying: ${r.error}`,
                  ),
                  X(Date.now()),
                  q(null),
                  ef());
              })(),
              optimisticData: (0, P.ok)({ git: void 0, deployment: ex }),
            });
          } catch (e) {
            l.toast.error("An error occurred while deploying");
          }
        },
        ej = async () => {
          try {
            let t = N?.id;
            if (!en || !t || !y)
              return void l.toast.error("Unable to push changes");
            let n = await em({ blockId: t, fromGitProject: !0 });
            if (n.set) return;
            if (ed && "public" !== eh && "password" === eh) {
              if (!F)
                return void l.toast.error(
                  "Your plan does not include Password-Protected Deployments",
                );
              if (M && !ep?.trim())
                return void l.toast.error("Please enter a password");
            }
            await k({
              serverMutate: (async () => {
                if (
                  (await ey(), "password" === eh && M && eo?.projectId && ed)
                ) {
                  let t = await (0, a.configureDeploymentProtectionAction)({
                    projectId: eo.projectId,
                    kind: "password",
                    chatId: e,
                    password: ep.trim(),
                  });
                  if (!0 !== t)
                    throw Error("Failed to configure password protection");
                }
                if ("team" === eh && M && eo?.projectId && ed) {
                  let t = await (0, a.configureDeploymentProtectionAction)({
                    projectId: eo.projectId,
                    kind: "sso",
                    chatId: e,
                    enabled: !0,
                  });
                  if (!0 !== t)
                    throw Error("Failed to configure team protection");
                }
                (await O({
                  blockId: t,
                  branch: eg,
                  skippedDeployWarning: n.skippedDeployWarning,
                  onProductionBranch: eu?.onProductionBranch,
                }),
                  q(null));
              })(),
              optimisticData: (0, P.ok)({
                deployment: { ...ex, git: ev },
                git: ev,
              }),
            });
          } catch (e) {
            if (e instanceof Error) return void l.toast.error(e.message);
            l.toast.error("An error occurred while pushing changes");
          }
        },
        ew = async () => {
          if (!er || !ei) return void Z("Invalid domain");
          let e = el;
          if (!e) {
            let t = await ey();
            if (!t.ok || !t.value.vercelProjectId)
              return void l.toast.error(
                `An error occurred creating Vercel project: ${!t.ok ? t.error : "An unknown error occurred"}`,
              );
            e = t.value.vercelProjectId;
          }
          try {
            (Z(null),
              K(null),
              await k({
                serverMutate: (async () => {
                  let t = await (0, u.assignVercelAlias)({
                    deploymentId: ec?.id,
                    alias: ei,
                    vercelProjectId: e,
                  });
                  if (!t.ok) {
                    let e = t.error.error.errorCode,
                      n = d.ALIAS_ERROR_MAP[e] || t.error.error.message;
                    (Z(n || "Failed to assign domain"),
                      t.error.redirectTo && K(t.error.redirectTo),
                      l.toast.error(n || "Failed to assign domain"));
                    return;
                  }
                  (l.toast.success("Domain assigned successfully"),
                    G(null),
                    W(null),
                    Z(null),
                    K(null));
                })(),
                optimisticData: (0, P.ok)({
                  ...(x.ok ? x.value : { git: void 0 }),
                  deployment: ec ?? void 0,
                }),
              }));
          } catch (t) {
            let e =
              t instanceof Error
                ? t.message
                : "An error occurred while assigning domain";
            (Z(e), l.toast.error(e));
          }
        },
        eC = (0, i.useCallback)(() => {
          (U(!1, null),
            (0, v.openDialog)({
              type: "feedback",
              data: {
                feedback: `I'm having trouble loading my deployment. 
Chat: ${e}${
                  !x.ok
                    ? ` 
Error: ${x.error.error}`
                    : ""
                }`,
                sentiment: "bad",
              },
            }));
        }, [U, e, x]),
        ek = (0, i.useCallback)(() => {
          t.refresh();
        }, [t]),
        eS = async () => {
          ea &&
            (N &&
              (0, h.track)("FixDeployWarning", {
                blockId: N.id,
                warning: ea.warning,
              }),
            eE(),
            await S({
              action: "fix-with-v0",
              type: "fix-with-v0",
              content: (0,
              C.createMDXMessageContent)(`An error occurred during deployment. Please fix:

${$(ea.prompt)}
`),
            }),
            q(null));
        },
        eN = async (e) => {
          eE();
          let t = e.trim(),
            n = t.split(/\r?\n/);
          (n.length > 10 &&
            (t = n.slice(0, 5).join("\n") + "\n...\n" + n.slice(-5).join("\n")),
            await S({
              action: "fix-with-v0",
              type: "fix-with-v0",
              content: (0,
              C.createMDXMessageContent)(`An error occurred during deployment. Please fix:

${$(t)}`),
              logs: `===

BUILD ERROR===

${$(e)}`,
            }));
        },
        eE = (0, i.useCallback)(() => {
          setTimeout(() => {
            U(!1, null);
          }, 2e3);
        }, [U]);
      function eA(e, t) {
        return async (...n) => {
          if (e === ee)
            return l.toast.error("Unable to perform deployment action");
          Y(e);
          try {
            return await t(...n);
          } finally {
            Y(null);
          }
        };
      }
      return {
        handleRetry: ek,
        handleReport: eC,
        handleDeploy: eA("deploy", eb),
        handlePushChanges: eA("pushing", ej),
        handleAssignDomain: eA("assigning-domain", ew),
        handleFixDeployWarning: eA("auto-fixing-warning", eS),
        handleFixWithV0: eA("auto-fixing-errors", eN),
      };
    }
    async function _({
      blockId: e,
      skippedDeployWarning: t,
      passwordProtection: n,
    }) {
      let r = await fetch(`/chat/b/${e}/deploy`, {
          method: "POST",
          body: JSON.stringify({
            skippedDeployWarning: t,
            passwordProtection: n,
          }),
        }),
        i = await r.json();
      return r.ok ? i : { error: i.errorMsg ?? i.error };
    }
    async function O({
      blockId: e,
      skippedDeployWarning: t,
      branch: n,
      onProductionBranch: r,
    }) {
      let i;
      i = r
        ? await (0, y.pushChanges)({
            blockId: e,
            skippedDeployWarning: t,
            branch: n,
          })
        : await fetch(`/chat/b/${e}/deploy`, {
            method: "POST",
            body: JSON.stringify({
              skippedDeployWarning: t,
              target: r ? "production" : "preview",
            }),
          });
      let s = await i.json();
      if (!i.ok)
        throw Error(s.errorMsg ?? "An error occurred while pushing changes");
      return s;
    }
    let B = (e) => ({
        readyState: "INITIALIZING",
        createdAt: 0,
        creator: e
          ? { uid: e.id, username: e.username, avatar: e.avatar }
          : void 0,
      }),
      V = {
        id: "loading",
        inspectorUrl: "",
        name: "",
        projectId: "",
        customAlias: {
          alias: x.LOADING_SKELETON,
          uid: "",
          created: "",
          redirect: null,
          updatedAt: 0,
        },
        screenshotUrl: null,
        project: void 0,
        automaticAliases: [],
        filteredAliases: [],
        git: void 0,
        meta: {},
        url: x.LOADING_SKELETON,
        ownerId: "",
        readyState: "INITIALIZING",
        createdAt: 0,
        bestDomain: x.LOADING_SKELETON,
      },
      z = (e) => ({
        ref: e,
        sha: x.LOADING_SKELETON,
        commitMessage: x.LOADING_SKELETON,
      }),
      H = {
        ownerName: "",
        repoName: "",
        ref: "",
        sha: "",
        commitMessage: "",
        type: "github",
        prId: null,
        repoId: 0,
        refs: [],
        onProductionBranch: !0,
        gitConnected: !0,
        gitAutoCommitPush: !1,
        gitAutoPull: !1,
      };
    function $(e) {
      return e.includes("```")
        ? e
        : ` \`\`\`
${e}
\`\`\` `;
    }
  },
  441861,
  (e) => {
    "use strict";
    e.s(["DomainsContent", () => b]);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(763480),
      i = e.i(665793),
      s = e.i(415334),
      a = e.i(762585),
      o = e.i(576191),
      l = e.i(707827),
      c = e.i(230902),
      u = e.i(603179),
      d = e.i(667660),
      h = e.i(92479),
      p = e.i(373998),
      m = e.i(393799),
      f = e.i(348327),
      g = e.i(369218),
      x = e.i(654335),
      v = e.i(607391),
      y = e.i(534962);
    function b() {
      let { activeScopeSlug: e } = (0, d.useActiveScope)(),
        n = (0, h.assertChatId)((0, h.useChatId)().chatId),
        { vercelProject: r } = (0, y.useVercelProject)(),
        s = r?.project.id,
        {
          domains: a,
          isLoading: o,
          error: l,
          hasMore: c,
          loadMore: u,
          isValidating: p,
          refresh: m,
        } = (0, i.useProjectDomains)(s);
      return (0, t.jsxs)("div", {
        className: "flex flex-col gap-6",
        children: [
          (0, t.jsx)(j, { chatId: n, onDomainSaved: m }),
          (0, t.jsx)("div", { className: "h-px bg-v0-alpha-400" }),
          (0, t.jsx)(C, {
            domains: a,
            isLoading: o,
            error: l,
            hasMore: c,
            loadMore: u,
            isValidating: p,
            teamSlug: e,
          }),
        ],
      });
    }
    let j = ({ chatId: e, onDomainSaved: i }) => {
      let s = (0, p.getChatDeploymentAtoms)(e),
        { handleAssignDomain: a } = (0, f.useAsyncChatDeploymentActions)({
          chatId: e,
        }),
        {
          setNewDomain: l,
          setDomainError: c,
          setDomainErrorRedirect: u,
        } = (0, p.getChatDeploymentActions)(e),
        h = (0, m.useAtomValue)(s.externalMeta),
        y = h.ok ? h.value.deployment : void 0,
        b = (0, m.useAtomValue)(s.newDomain),
        j = (0, m.useAtomValue)(s.asyncActionLoading),
        C = (0, m.useAtomValue)(s.asyncActionLoadingLabel),
        k = (0, m.useAtomValue)(s.domainError),
        S = (0, m.useAtomValue)(s.domainErrorRedirect),
        { hasVercelWritePermission: N } = (0, d.useActiveScope)(),
        E = "assigning-domain" === j,
        A =
          y?.bestDomain && y.bestDomain !== g.LOADING_SKELETON
            ? w(y.bestDomain)
            : "";
      async function D(e) {
        (e.preventDefault(), N && (await a(), i()));
      }
      let I = (0, o.useMemo)(
        () =>
          k ? (S ? (0, t.jsx)(x.default, { href: S, children: k }) : k) : null,
        [k, S],
      );
      return (0, t.jsxs)("form", {
        onSubmit: D,
        className: "flex flex-col gap-2",
        children: [
          (0, t.jsx)("h3", {
            className: "text-label-14 font-medium text-v0-gray-1000",
            children: "Default Domain",
          }),
          (0, t.jsx)("p", {
            className: "text-label-14 text-v0-gray-900",
            children: "The URL your generation will always be available at.",
          }),
          (0, t.jsxs)("div", {
            className: "flex gap-2",
            children: [
              (0, t.jsx)(r.Input, {
                className: "flex-1",
                placeholder: A || "your-domain",
                value: b ?? "",
                onChange: (e) => {
                  (l(e.target.value), c(null), u(null));
                },
                disabled: E || !N,
                error: I,
                type: "text",
                suffix: ".vercel.app",
              }),
              (0, t.jsx)(n.Button, {
                size: "sm",
                variant: "secondary",
                className: "rounded-md w-12",
                type: "submit",
                disabled: E || !N || !b,
                children: (0, t.jsx)(v.ActionStatus, {
                  isLoading: E,
                  loading: C,
                  children: "Save",
                }),
              }),
            ],
          }),
        ],
      });
    };
    function w(e) {
      return e.replace(/\.vercel\.(app|sh)$/, "");
    }
    let C = ({
        domains: e,
        isLoading: r,
        error: i,
        hasMore: a,
        loadMore: o,
        isValidating: c,
        teamSlug: u,
      }) => {
        let { containerRef: d, sentinelRef: h } = (0, s.useLazyLoad)({
            hasMore: a,
            isValidating: c,
            loadMore: o,
          }),
          { vercelProject: p } = (0, y.useVercelProject)(),
          m = p?.project.id,
          f =
            u && m
              ? `https://vercel.com/${u}/${m}/settings/domains?show-add-domain-modal=true`
              : void 0;
        return (0, t.jsxs)("div", {
          className: "flex flex-col gap-2",
          children: [
            (0, t.jsxs)("div", {
              className: "flex items-center justify-between",
              children: [
                (0, t.jsxs)("div", {
                  children: [
                    (0, t.jsx)("h3", {
                      className: "text-label-14 font-medium text-v0-gray-1000",
                      children: "Connected Domains",
                    }),
                    (0, t.jsx)("p", {
                      className: "text-label-14 text-v0-gray-900",
                      children:
                        "Purchase or connect custom domains to your project.",
                    }),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className: "flex gap-2",
                  children: [
                    u
                      ? (0, t.jsx)(n.Button, {
                          size: "sm",
                          variant: "secondary",
                          className: "rounded-md",
                          asChild: !0,
                          children: (0, t.jsx)("a", {
                            href: `https://vercel.com/domains?teamSlug=${u}`,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: "Buy",
                          }),
                        })
                      : (0, t.jsx)(n.Button, {
                          size: "sm",
                          variant: "secondary",
                          className: "rounded-md",
                          disabled: !0,
                          children: "Buy",
                        }),
                    f
                      ? (0, t.jsx)(n.Button, {
                          size: "sm",
                          variant: "secondary",
                          className: "rounded-md",
                          asChild: !0,
                          children: (0, t.jsx)("a", {
                            href: f,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: "Add",
                          }),
                        })
                      : (0, t.jsx)(n.Button, {
                          size: "sm",
                          variant: "secondary",
                          className: "rounded-md",
                          disabled: !0,
                          children: "Add",
                        }),
                  ],
                }),
              ],
            }),
            (r || !e) && !i && (0, t.jsx)(S, {}),
            i &&
              (0, t.jsx)("div", {
                className:
                  "flex items-center justify-center border border-v0-alpha-400 rounded-md p-16 bg-v0-background-200",
                children: (0, t.jsx)("p", {
                  className: "text-label-14 text-v0-gray-900",
                  children: "Error loading domains",
                }),
              }),
            !r &&
              !i &&
              e &&
              0 === e.length &&
              (0, t.jsx)("div", {
                className:
                  "flex items-center justify-center border border-v0-alpha-400 rounded-md p-16 bg-v0-background-200",
                children: (0, t.jsx)("p", {
                  className: "text-label-14 text-v0-gray-900",
                  children: "No custom domains connected.",
                }),
              }),
            !r &&
              !i &&
              e &&
              e.length > 0 &&
              (0, t.jsxs)("div", {
                className: "border rounded-md overflow-hidden",
                ref: d,
                children: [
                  (0, t.jsx)("div", {
                    className: "divide-y",
                    children: e.map((e) =>
                      (0, t.jsx)(k, { domain: e }, e.name),
                    ),
                  }),
                  c &&
                    a &&
                    (0, t.jsx)("div", {
                      className: "flex justify-center py-2 border-t",
                      children: (0, t.jsx)(l.Spinner, { size: 16 }),
                    }),
                  (0, t.jsx)("div", { ref: h }),
                ],
              }),
          ],
        });
      },
      k = ({ domain: e }) =>
        (0, t.jsx)("div", {
          className: "p-3 flex items-center gap-1 hover:bg-v0-background-200",
          children: (0, t.jsxs)("div", {
            className: "flex flex-col gap-1",
            children: [
              (0, t.jsxs)("div", {
                className:
                  "text-sm font-medium text-v0-gray-1000 flex items-center gap-1.5",
                children: [
                  e.name,
                  e.verified &&
                    (0, t.jsx)(u.VerifiedCheckFill, {
                      className: "text-v0-green-800! shrink-0",
                    }),
                ],
              }),
              (0, t.jsxs)("div", {
                className: "text-xs text-v0-gray-900",
                children: [
                  "Added ",
                  (0, c.format)(new Date(e.createdAt), "MMM dd, yyyy"),
                ],
              }),
            ],
          }),
        }),
      S = () =>
        (0, t.jsx)("div", {
          className: "border rounded-md overflow-hidden",
          children: [1, 2, 3].map((e) =>
            (0, t.jsxs)(
              "div",
              {
                className:
                  "p-3 flex items-center justify-between border-b last:border-b-0",
                children: [
                  (0, t.jsxs)("div", {
                    className: "flex flex-col gap-1 flex-1",
                    children: [
                      (0, t.jsx)(a.Skeleton, { className: "h-5 w-48" }),
                      (0, t.jsx)(a.Skeleton, { className: "h-4 w-32" }),
                    ],
                  }),
                  (0, t.jsx)(a.Skeleton, { className: "h-8 w-20" }),
                ],
              },
              e,
            ),
          ),
        });
  },
  501658,
  (e) => {
    "use strict";
    var t = e.i(418625),
      n = e.i(403055);
    function r(e) {
      let {
        data: r,
        isLoading: i,
        error: s,
      } = (0, t.default)(
        e
          ? `/api/chat/deployment/analytics/aggregate?vercelProjectId=${e}`
          : null,
        n.fetcher,
        {
          refreshInterval: 3e4,
          revalidateOnFocus: !1,
          revalidateOnReconnect: !1,
        },
      );
      return {
        data: r,
        isLoading: i,
        error: s,
        analyticsEnabled: r?.ok && r.value.enabled,
        visitors: r?.ok ? r.value.visitors : 0,
        pageviews: r?.ok ? r.value.pageviews : 0,
      };
    }
    e.s(["useDeploymentAnalytics", () => r]);
  },
  621983,
  (e) => {
    "use strict";
    e.s(["SettingsDialog", () => L], 621983);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(120945);
    e.i(904347);
    var i = e.i(37737),
      s = e.i(304649),
      a = e.i(576191),
      o = e.i(686832),
      l = e.i(62535),
      c = e.i(180367),
      u = e.i(93089),
      d = e.i(903500),
      h = e.i(782742),
      p = e.i(592885),
      m = e.i(494266),
      f = e.i(681893),
      g = e.i(534962),
      x = e.i(866108),
      v = e.i(441861),
      y = t,
      b = n,
      j = e.i(389140),
      w = g,
      C = e.i(501658),
      k = e.i(762585),
      S = e.i(92479),
      N = e.i(373998),
      E = e.i(393799);
    function A() {
      let { vercelProject: e, isLoading: t } = (0, w.useVercelProject)(),
        n = e?.project.id,
        {
          analyticsEnabled: r,
          visitors: i,
          pageviews: s,
          isLoading: a,
        } = (0, C.useDeploymentAnalytics)(n),
        o = (0, S.assertChatId)((0, S.useChatId)().chatId),
        l = (0, E.useAtomValue)(
          (0, N.getChatDeploymentAtoms)(o).deploymentState,
        );
      return t || a
        ? (0, y.jsx)(T, {})
        : e
          ? "deployed" !== l
            ? (0, y.jsx)(M, { type: "not-deployed" })
            : !1 === r
              ? (0, y.jsx)(M, {
                  type: "analytics-disabled",
                  vercelProjectUrl: e.project.url,
                })
              : (0, y.jsx)("div", {
                  className: "flex flex-col gap-4",
                  children:
                    r &&
                    (0, y.jsxs)(y.Fragment, {
                      children: [
                        (0, y.jsxs)("div", {
                          className: "grid grid-cols-2 gap-4",
                          children: [
                            (0, y.jsx)(D, {
                              title: "Visitors",
                              value: i.toString(),
                            }),
                            (0, y.jsx)(D, {
                              title: "Page Views",
                              value: s.toString(),
                            }),
                          ],
                        }),
                        (0, y.jsxs)("div", {
                          className: "relative",
                          children: [
                            (0, y.jsxs)("div", {
                              className:
                                "grid grid-cols-2 gap-4 [mask:linear-gradient(to_bottom,black,transparent)]",
                              children: [(0, y.jsx)(I, {}), (0, y.jsx)(I, {})],
                            }),
                            (0, y.jsx)("div", {
                              className:
                                "absolute inset-0 flex items-center justify-center",
                              children: (0, y.jsx)(b.Button, {
                                size: "sm",
                                variant: "secondary",
                                className: "rounded-md shadow-sm border-none",
                                asChild: !0,
                                children: (0, y.jsxs)("a", {
                                  href: `${e.project.url}/analytics`,
                                  target: "_blank",
                                  rel: "noopener noreferrer",
                                  children: [
                                    "View on Vercel",
                                    (0, y.jsx)(j.External, {}),
                                  ],
                                }),
                              }),
                            }),
                          ],
                        }),
                      ],
                    }),
                })
          : (0, y.jsx)(M, { type: "no-project" });
    }
    let D = ({ title: e, value: t }) =>
        (0, y.jsxs)("div", {
          className:
            "flex flex-col gap-2 border border-v0-alpha-400 rounded-md p-4 bg-v0-background-300",
          children: [
            (0, y.jsx)("span", {
              className: "text-label-14 text-v0-gray-900",
              children: e,
            }),
            (0, y.jsx)("span", {
              className:
                "text-[32px] font-semibold text-v0-gray-1000 leading-none",
              children: t,
            }),
          ],
        }),
      I = () =>
        (0, y.jsxs)("div", {
          className: "flex flex-col gap-2 rounded-md p-4 bg-v0-gray-100",
          children: [
            (0, y.jsx)("div", { className: "bg-v0-gray-200 h-3 w-24" }),
            (0, y.jsx)("div", { className: "bg-v0-gray-200 h-8 w-16" }),
          ],
        }),
      M = ({ type: e, vercelProjectUrl: t }) => {
        let n = (() => {
          switch (e) {
            case "no-project":
              return {
                message:
                  "No Vercel project connected. Create a Vercel project and deploy to view analytics data.",
                showButton: !1,
              };
            case "not-deployed":
              return {
                message:
                  "No deployment found. Deploy your project to Vercel to start collecting analytics data.",
                showButton: !1,
              };
            case "analytics-disabled":
              return {
                message: "Analytics not enabled.",
                showButton: !0,
                buttonText: "Enable on Vercel",
                buttonUrl: t ? `${t}/analytics` : void 0,
              };
          }
        })();
        return (0, y.jsx)("div", {
          className: "flex flex-col gap-4",
          children: (0, y.jsxs)("div", {
            className:
              "flex h-48 flex-col items-center justify-center gap-3 border border-v0-alpha-400 rounded-md px-16 bg-v0-background-200",
            children: [
              (0, y.jsx)("p", {
                className: "text-label-14 text-center text-v0-gray-900",
                children: n.message,
              }),
              n.showButton &&
                n.buttonUrl &&
                (0, y.jsx)(b.Button, {
                  size: "sm",
                  variant: "secondary",
                  className: "rounded-md h-7",
                  asChild: !0,
                  children: (0, y.jsxs)("a", {
                    href: n.buttonUrl,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    children: [n.buttonText, (0, y.jsx)(j.External, {})],
                  }),
                }),
            ],
          }),
        });
      },
      T = () =>
        (0, y.jsx)("div", {
          className: "flex flex-col gap-4",
          children: (0, y.jsxs)("div", {
            className: "grid grid-cols-2 gap-4",
            children: [
              (0, y.jsxs)("div", {
                className:
                  "flex flex-col gap-2 border border-v0-alpha-400 rounded-md p-4 bg-v0-background-300",
                children: [
                  (0, y.jsx)(k.Skeleton, { className: "h-5 w-16" }),
                  (0, y.jsx)(k.Skeleton, { className: "h-10 w-20" }),
                ],
              }),
              (0, y.jsxs)("div", {
                className:
                  "flex flex-col gap-2 border border-v0-alpha-400 rounded-md p-4 bg-v0-background-300",
                children: [
                  (0, y.jsx)(k.Skeleton, { className: "h-5 w-20" }),
                  (0, y.jsx)(k.Skeleton, { className: "h-10 w-20" }),
                ],
              }),
            ],
          }),
        });
    function L({ initialSection: e }) {
      let [y, b] = (0, a.useState)(e ?? "vercel-project"),
        [j, w] = (0, a.useState)(!e),
        C = (e) => {
          (b(e), w(!1));
        },
        k = () => {
          w(!0);
        };
      return (0, t.jsxs)(r.AtomicDialog, {
        type: "settings",
        className: "md:w-[800px]",
        children: [
          (0, t.jsx)(l.Root, {
            children: (0, t.jsx)(o.ModalTitle, { children: "Settings" }),
          }),
          (0, t.jsxs)("div", {
            className: "flex h-[600px] max-h-[80vh]",
            children: [
              (0, t.jsxs)("aside", {
                className: (0, s.cn)(
                  "flex w-full md:w-48 flex-col gap-2 bg-v0-background-200 p-2",
                  !j && "hidden md:flex",
                ),
                children: [
                  (0, t.jsx)("div", {
                    className: "px-2 py-1.5",
                    children: (0, t.jsx)("h2", {
                      className: "text-label-14 font-medium text-v0-gray-900",
                      children: "Settings",
                    }),
                  }),
                  (0, t.jsxs)("nav", {
                    className: "flex flex-col gap-0.5",
                    children: [
                      (0, t.jsx)(P, {
                        active: "vercel-project" === y,
                        onClick: () => C("vercel-project"),
                        icon: (0, t.jsx)("div", {
                          className:
                            "relative h-4 w-4 overflow-hidden rounded-full border border-v0-alpha-400 bg-[#000000] flex items-center justify-center",
                          children: (0, t.jsx)(c.LogoVercel, {
                            className: "size-2 !text-v0-universal-white",
                          }),
                        }),
                        children: "Vercel Project",
                      }),
                      (0, t.jsx)(P, {
                        active: "github-repository" === y,
                        onClick: () => C("github-repository"),
                        icon: (0, t.jsx)(u.LogoGithub, { className: "size-4" }),
                        children: "GitHub Repository",
                      }),
                      (0, t.jsx)(P, {
                        active: "domains" === y,
                        onClick: () => C("domains"),
                        icon: (0, t.jsx)(d.Globe, { className: "size-4" }),
                        children: "Domains",
                      }),
                      (0, t.jsx)(P, {
                        active: "analytics" === y,
                        onClick: () => C("analytics"),
                        icon: (0, t.jsx)(h.ChartActivity, {
                          className: "size-4",
                        }),
                        children: "Analytics",
                      }),
                    ],
                  }),
                ],
              }),
              (0, t.jsxs)("div", {
                className: (0, s.cn)(
                  "flex flex-1 flex-col p-4",
                  j && "hidden md:flex",
                ),
                children: [
                  (0, t.jsxs)("div", {
                    className: "flex items-center justify-between pb-4",
                    children: [
                      (0, t.jsxs)("div", {
                        className: "flex items-center gap-2 min-w-0",
                        children: [
                          (0, t.jsx)("button", {
                            onClick: k,
                            className:
                              "text-label-16 font-medium text-v0-gray-900 hover:text-v0-gray-1000 md:hidden",
                            children: "Settings",
                          }),
                          (0, t.jsx)(m.ChevronRightSmall, {
                            className: "text-v0-gray-900 md:hidden",
                          }),
                          (0, t.jsxs)("h3", {
                            className:
                              "text-label-16 font-medium text-v0-gray-1000",
                            children: [
                              "vercel-project" === y &&
                                (0, t.jsx)("span", {
                                  children: "Vercel Project",
                                }),
                              "github-repository" === y &&
                                (0, t.jsx)("span", {
                                  children: "GitHub Repository",
                                }),
                              "domains" === y &&
                                (0, t.jsx)("span", { children: "Domains" }),
                              "analytics" === y &&
                                (0, t.jsx)("span", { children: "Analytics" }),
                            ],
                          }),
                        ],
                      }),
                      (0, t.jsx)(n.Button, {
                        size: "sm",
                        variant: "ghost",
                        onClick: i.closeDialog,
                        className: "size-8 p-0",
                        children: (0, t.jsx)(p.Cross, {}),
                      }),
                    ],
                  }),
                  (0, t.jsx)("div", {
                    className: "border-v0-gray-alpha-400 border-b",
                  }),
                  (0, t.jsx)(g.VercelProjectProvider, {
                    children: (0, t.jsxs)("div", {
                      className: "flex-1 overflow-y-auto pt-4",
                      children: [
                        "vercel-project" === y &&
                          (0, t.jsx)(f.VercelProjectContent, {}),
                        "github-repository" === y &&
                          (0, t.jsx)(x.GitHubRepositoryContent, {}),
                        "domains" === y && (0, t.jsx)(v.DomainsContent, {}),
                        "analytics" === y && (0, t.jsx)(A, {}),
                      ],
                    }),
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function P({ active: e, onClick: n, children: r, icon: i }) {
      return (0, t.jsx)("button", {
        className: (0, s.cn)(
          "hover:bg-v0-alpha-400 focus-within:bg-v0-alpha-400 active:bg-v0-alpha-400 group relative flex h-8 list-none items-center rounded-md text-v0-gray-900 transition-colors",
          e && "bg-v0-alpha-400",
        ),
        onClick: n,
        type: "button",
        children: (0, t.jsxs)("span", {
          className: (0, s.cn)(
            "flex size-full min-w-0 items-center justify-start gap-2 px-2 text-sm font-normal outline-hidden",
            e
              ? "text-v0-gray-1000"
              : "text-v0-gray-900 group-hover:text-v0-gray-1000 group-focus:text-v0-gray-1000",
          ),
          children: [
            i,
            (0, t.jsx)("span", { className: "truncate", children: r }),
          ],
        }),
      });
    }
  },
  89625,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M4 5.5C3.17157 5.5 2.5 4.82843 2.5 4C2.5 3.17157 3.17157 2.5 4 2.5C4.82843 2.5 5.5 3.17157 5.5 4C5.5 4.82843 4.82843 5.5 4 5.5ZM4.75 6.90549C6.04392 6.57245 7 5.39788 7 4C7 2.34315 5.65685 1 4 1C2.34315 1 1 2.34315 1 4C1 5.39788 1.95608 6.57245 3.25 6.90549V14.25V15H4.75V14.25V6.90549ZM9.5 3.25H8.75V4.75H9.5H11C11.1381 4.75 11.25 4.86193 11.25 5V9.09451C9.95608 9.42754 9 10.6021 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.6021 14.0439 9.42754 12.75 9.09451V5C12.75 4.0335 11.9665 3.25 11 3.25H9.5ZM10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12Z" fill="currentColor"/>',
    );
    e.s(["GitPullRequest", 0, t]);
  },
  684658,
  581435,
  367447,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(520234),
      r = e.i(304649),
      i = e.i(89625);
    function s({ pr: e }) {
      if (!e) return null;
      let s = (0, n.match)(e.state)
        .with("open", () => "bg-v0-green-700")
        .with("closed", () => "bg-v0-red-700")
        .with("merged", () => "bg-v0-purple-700")
        .exhaustive();
      return (0, t.jsxs)("div", {
        className:
          "border border-v0-alpha-300 rounded-[5px] pt-1.5 px-1.5 flex flex-col gap-1.5 w-16 items-start",
        children: [
          (0, t.jsxs)("div", {
            className: (0, r.cn)(
              "flex items-center gap-0.5 rounded-full py-0.5 pr-1.5 pl-1 text-v0-white dark:text-v0-black",
              s,
            ),
            children: [
              (0, t.jsx)(i.GitPullRequest, { size: 8 }),
              " ",
              (0, t.jsxs)("span", {
                className: "text-[7px] mb-[-1px]",
                children: [e.state.at(0)?.toUpperCase(), e.state.slice(1)],
              }),
            ],
          }),
          (0, t.jsx)("div", {
            className: "bg-v0-gray-100 rounded-xs h-[5px] w-[55%]",
          }),
          (0, t.jsx)("div", {
            className: "bg-v0-gray-100 rounded-xs h-[5px] w-full",
          }),
          (0, t.jsx)("div", {
            className: "bg-v0-gray-100 rounded-xs h-[5px] w-1/2",
          }),
          (0, t.jsx)("div", {
            className: "bg-v0-gray-100 rounded-xs h-6 w-full",
          }),
        ],
      });
    }
    e.s(["PullRequestBadge", () => s], 684658);
    var a = t,
      o = e.i(487122);
    function l(e) {
      return (0, o.constructFrom)(e, Date.now());
    }
    var c = e.i(238153),
      u = e.i(492421),
      d = e.i(632713),
      h = e.i(539392),
      p = e.i(516467);
    function m(e, t) {
      let n = (0, p.toDate)(e) - (0, p.toDate)(t);
      return n < 0 ? -1 : n > 0 ? 1 : n;
    }
    var f = e.i(511518),
      g = h,
      x = e.i(731285),
      v = p;
    function y(e, t) {
      let n = (0, v.toDate)(e, t?.in);
      return (n.setHours(23, 59, 59, 999), n);
    }
    var b = e.i(936765),
      j = p;
    function w(e, t) {
      let n = (0, j.toDate)(e, t?.in);
      return +y(n, t) == +(0, b.endOfMonth)(n, t);
    }
    function C(e, t, n) {
      let [r, i, s] = (0, g.normalizeDates)(n?.in, e, e, t),
        a = m(i, s),
        o = Math.abs((0, x.differenceInCalendarMonths)(i, s));
      if (o < 1) return 0;
      (1 === i.getMonth() && i.getDate() > 27 && i.setDate(30),
        i.setMonth(i.getMonth() - a * o));
      let l = m(i, s) === -a;
      w(r) && 1 === o && 1 === m(r, s) && (l = !1);
      let c = a * (o - l);
      return 0 === c ? 0 : c;
    }
    function k(e) {
      return (t) => {
        let n = (e ? Math[e] : Math.trunc)(t);
        return 0 === n ? 0 : n;
      };
    }
    var S = p;
    function N(e, t) {
      return (0, S.toDate)(e) - (0, S.toDate)(t);
    }
    function E(e, t, n) {
      let r = N(e, t) / 1e3;
      return k(n?.roundingMethod)(r);
    }
    function A(e, t, n) {
      let r,
        i = (0, u.getDefaultOptions)(),
        s = n?.locale ?? i.locale ?? c.defaultLocale,
        a = 2520,
        o = m(e, t);
      if (isNaN(o)) throw RangeError("Invalid time value");
      let l = Object.assign({}, n, { addSuffix: n?.addSuffix, comparison: o }),
        [p, g] = (0, h.normalizeDates)(n?.in, ...(o > 0 ? [t, e] : [e, t])),
        x = E(g, p),
        v = Math.round(
          (x -
            ((0, d.getTimezoneOffsetInMilliseconds)(g) -
              (0, d.getTimezoneOffsetInMilliseconds)(p)) /
              1e3) /
            60,
        );
      if (v < 2)
        if (n?.includeSeconds)
          if (x < 5) return s.formatDistance("lessThanXSeconds", 5, l);
          else if (x < 10) return s.formatDistance("lessThanXSeconds", 10, l);
          else if (x < 20) return s.formatDistance("lessThanXSeconds", 20, l);
          else if (x < 40) return s.formatDistance("halfAMinute", 0, l);
          else if (x < 60) return s.formatDistance("lessThanXMinutes", 1, l);
          else return s.formatDistance("xMinutes", 1, l);
        else if (0 === v) return s.formatDistance("lessThanXMinutes", 1, l);
        else return s.formatDistance("xMinutes", v, l);
      if (v < 45) return s.formatDistance("xMinutes", v, l);
      if (v < 90) return s.formatDistance("aboutXHours", 1, l);
      if (v < f.minutesInDay) {
        let e = Math.round(v / 60);
        return s.formatDistance("aboutXHours", e, l);
      }
      if (v < a) return s.formatDistance("xDays", 1, l);
      else if (v < f.minutesInMonth) {
        let e = Math.round(v / f.minutesInDay);
        return s.formatDistance("xDays", e, l);
      } else if (v < 2 * f.minutesInMonth)
        return (
          (r = Math.round(v / f.minutesInMonth)),
          s.formatDistance("aboutXMonths", r, l)
        );
      if ((r = C(g, p)) < 12) {
        let e = Math.round(v / f.minutesInMonth);
        return s.formatDistance("xMonths", e, l);
      }
      {
        let e = r % 12,
          t = Math.trunc(r / 12);
        return e < 3
          ? s.formatDistance("aboutXYears", t, l)
          : e < 9
            ? s.formatDistance("overXYears", t, l)
            : s.formatDistance("almostXYears", t + 1, l);
      }
    }
    function D(e, t) {
      return A(e, l(e), t);
    }
    e.s(["formatDistanceToNow", () => D], 581435);
    var I = e.i(230766);
    function M({ pr: e, gitConnection: t }) {
      return e && t.value.connected
        ? (0, a.jsxs)("div", {
            className: "flex flex-col justify-between",
            children: [
              (0, a.jsxs)("div", {
                className: "flex gap-1 text-sm",
                children: [
                  (0, a.jsx)("div", {
                    className: "font-medium",
                    children: e.title,
                  }),
                  (0, a.jsxs)("div", {
                    className: "text-v0-gray-900",
                    children: ["#", e.id],
                  }),
                ],
              }),
              (0, a.jsxs)("div", {
                className: "flex items-center gap-1",
                children: [
                  (0, a.jsx)("div", {
                    className:
                      "bg-v0-gray-200 text-v0-gray-900 pt-[1px] pb-0.5 px-1 text-xs rounded-[5px]",
                    children: t.value.head,
                  }),
                  (0, a.jsx)("div", {
                    className: "text-v0-gray-900",
                    children: "",
                  }),
                  (0, a.jsx)("div", {
                    className:
                      "bg-v0-gray-200 text-v0-gray-900 pt-[1px] pb-0.5 px-1 text-xs rounded-[5px]",
                    children: t.value.base,
                  }),
                ],
              }),
              (0, a.jsxs)("div", {
                className: "flex items-center gap-1.5",
                children: [
                  e.avatar &&
                    (0, a.jsx)(I.Avatar, {
                      size: "xs",
                      rounded: !0,
                      children: (0, a.jsx)(I.AvatarImage, {
                        src: e.avatar,
                        className: "aspect-auto cover-full",
                      }),
                    }),
                  (0, a.jsxs)("div", {
                    className: "text-label-13 text-v0-gray-1000",
                    children: ["Updated ", D(e.updatedAt), " ago"],
                  }),
                ],
              }),
            ],
          })
        : null;
    }
    e.s(["PullRequestDetails", () => M], 367447);
  },
  633661,
  (e) => {
    "use strict";
    e.s(["PullRequestProvider", () => j, "usePullRequest", () => b], 633661);
    var t = e.i(324834),
      n = e.i(86617);
    e.i(472428);
    var r = e.i(296900),
      i = e.i(576191),
      s = e.i(610726),
      a = e.i(120485),
      o = e.i(919012),
      l = (0, o.createServerReference)(
        "7f0df2018d5566fba9a9f192fe4c7fd545f285fe50",
        o.callServer,
        void 0,
        o.findSourceMapURL,
        "createPullRequest",
      ),
      c = o,
      u = (0, c.createServerReference)(
        "7f18ed2d8c9c912a488e48b83f8bcac7d766855b52",
        c.callServer,
        void 0,
        c.findSourceMapURL,
        "mergePullRequest",
      );
    e.i(904347);
    var d = e.i(37737),
      h = e.i(449381),
      p = e.i(418625),
      m = e.i(403055);
    function f({ chatId: e, sha: t }) {
      let {
        data: n,
        isLoading: r,
        error: i,
        mutate: s,
      } = (0, p.default)(
        t ? `/api/git/deployment?chatId=${e}&sha=${t}` : null,
        { fetcher: m.fetcher },
      );
      return { data: n, isLoading: r, error: i, mutate: s };
    }
    let g = ["READY", "CANCELED", "ERROR"];
    function x(e) {
      return g.includes(e);
    }
    var v = e.i(819969);
    let y = (0, i.createContext)(null);
    function b() {
      let e = (0, i.useContext)(y);
      if (!e)
        throw Error("usePullRequest must be used within a PullRequestProvider");
      return e;
    }
    function j({ children: e, chatId: o }) {
      let {
          data: c,
          error: p,
          mutate: m,
          isLoading: g,
        } = (0, n.useGitConnection)(o),
        {
          data: b,
          revalidate: j,
          mutate: w,
          isValidating: C,
          isLoading: k,
        } = (0, r.useServerQuerySWR)(
          ["chat", "gitStatus"],
          { chatId: o },
          { stopFetch: !c?.ok || !c.value.connected },
        ),
        { actions: S } = (0, v.useCurrentChat)(),
        { setCanWriteToChat: N } = S,
        {
          data: E,
          isLoading: A,
          error: D,
          mutate: I,
        } = f({ chatId: o, sha: b?.ok ? b.value.pr?.head : void 0 }),
        [M, T] = (0, i.useTransition)(),
        [L, P] = (0, i.useTransition)();
      ((0, s.useInterval)(
        () => {
          k || C || j();
        },
        (b?.ok &&
          b.value.pr?.state === "open" &&
          null === b.value.pr.mergeable) ||
          (b?.ok && b.value.githubBranchStatus?.status === "identical")
          ? 1e3
          : null,
      ),
        (0, s.useInterval)(
          () => {
            A || I();
          },
          E?.ok && !x(E.value.deployment.readyState) ? 5e3 : null,
        ));
      let R = (0, i.useCallback)(() => {
          !L &&
            b?.ok &&
            P(async () => {
              try {
                let e = await l({ chatId: o });
                if (!e.ok) {
                  let t = e.error.error;
                  (0, a.handleChatError)(t);
                  return;
                }
                await w({
                  serverMutate: Promise.resolve(e),
                  optimisticData: {
                    ok: !0,
                    value: { ...b.value, pr: e.value },
                  },
                });
              } catch (t) {
                let e = t instanceof Error ? t.message : void 0;
                (0, a.handleChatError)(e);
              }
            });
        }, [L, o, b, w]),
        F = (0, i.useCallback)(() => {
          M ||
            T(async () => {
              if (b?.ok && b.value.pr)
                try {
                  let e = await u({ chatId: o });
                  if (!e.ok) {
                    let t = e.error.error;
                    (0, a.handleChatError)(t);
                    return;
                  }
                  (await w({
                    serverMutate: Promise.resolve(e),
                    optimisticData: {
                      ok: !0,
                      value: {
                        ...b.value,
                        pr: { ...b.value.pr, state: "merged" },
                      },
                    },
                  }),
                    N(!1));
                } catch (t) {
                  let e = t instanceof Error ? t.message : void 0;
                  (0, a.handleChatError)(e);
                }
            });
        }, [M, o, b, w, N]),
        _ = (0, i.useCallback)(() => {
          g || m();
        }, [g, m]),
        O = (0, h.useActiveBlockState)(),
        B = (0, i.useCallback)(() => {
          O &&
            (0, d.openDialog)({
              type: "duplicateChat",
              data: { chatId: o, blockId: O.id },
            });
        }, [O, o]);
      return (0, t.jsx)(y.Provider, {
        value: {
          connection: { data: c ?? null, error: p ?? null, refetch: _ },
          status: { data: b?.ok ? b.value : null, isLoading: k },
          deployment: {
            data: E?.ok ? E.value.deployment : null,
            isLoading: A,
            error: D ?? null,
          },
          actions: { createPullRequest: R, merge: F, duplicateChat: B },
          state: { isCreating: L, isMerging: M },
          chatId: o,
        },
        children: e,
      });
    }
  },
  43900,
  398857,
  (e) => {
    "use strict";
    e.s(["DuplicateChatButton", () => s], 43900);
    var t = e.i(324834),
      n = e.i(633661),
      r = e.i(176248),
      i = e.i(605177);
    function s() {
      let { actions: e, status: s } = (0, n.usePullRequest)(),
        { pr: a } = s.data ?? { pr: null };
      return a && "merged" === a.state
        ? (0, t.jsxs)("div", {
            className: "flex flex-col gap-3 p-3 rounded-lg bg-v0-blue-100",
            children: [
              (0, t.jsx)("div", {
                className: "text-label-14 text-v0-blue-900",
                children:
                  "This chat has entered a read-only state since its branch was merged/deleted. Duplicate this chat to make changes.",
              }),
              (0, t.jsxs)(r.Button, {
                size: "sm",
                variant: "blue",
                className: "h-7 rounded-md",
                onClick: e.duplicateChat,
                children: [(0, t.jsx)(i.Copy, {}), "Duplicate Chat"],
              }),
            ],
          })
        : null;
    }
    e.s(["VisitPreviewMenuLink", () => m], 398857);
    var a = t,
      o = n,
      l = e.i(264050),
      c = e.i(654796),
      u = e.i(749709),
      d = e.i(520234),
      h = e.i(304649);
    function p({ state: e }) {
      let t = (0, d.match)(e)
        .with("BUILDING", () => ({
          bg: "bg-v0-amber-300",
          text: "text-v0-amber-900",
          label: "Building",
          icon: (0, a.jsx)(c.Spinner, {
            size: 12,
            color: "var(--v0-amber-900)",
          }),
        }))
        .with("QUEUED", () => ({
          bg: "bg-v0-gray-300",
          text: "text-v0-gray-900",
          label: "Queued",
          icon: null,
        }))
        .with("ERROR", () => ({
          bg: "bg-v0-red-300",
          text: "text-v0-red-900",
          label: "Error",
          icon: null,
        }))
        .with("CANCELED", () => ({
          bg: "bg-v0-gray-300",
          text: "text-v0-gray-900",
          label: "Canceled",
          icon: null,
        }))
        .with("READY", () => ({
          bg: "bg-v0-green-300",
          text: "text-v0-green-900",
          label: "Ready",
          icon: null,
        }))
        .otherwise(() => null);
      if (!t) return null;
      let { bg: n, text: r, label: i, icon: s } = t;
      return (0, a.jsxs)("span", {
        className: (0, h.cn)(
          "rounded-full px-1.5 py-0.5 text-[11px] font-medium flex items-center gap-1",
          n,
          r,
        ),
        children: [s, i],
      });
    }
    function m() {
      let { deployment: e } = (0, o.usePullRequest)(),
        t = e.data;
      return t
        ? (0, a.jsx)(u.default, {
            title: "Visit Preview",
            icon: (0, a.jsx)(l.PreviewEye, {
              className: "!text-v0-gray-800 size-4",
            }),
            badge: (0, a.jsx)(p, { state: t.readyState }),
            onClick: () => {
              t.url && window.open(`https://${t.url}`, "_blank");
            },
          })
        : null;
    }
  },
  262194,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1 1V12.75C1 13.9926 2.00736 15 3.25 15H15V13.5H3.25C2.83579 13.5 2.5 13.1642 2.5 12.75V1H1ZM14.2971 6.01303L14.8101 5.46596L13.716 4.43989L13.2029 4.98697L9.98259 8.42099L7.707 6.14629C7.31646 5.75589 6.6834 5.75595 6.29293 6.14642L4.21967 8.21967L3.68934 8.75L4.75 9.81066L5.28033 9.28033L7.0001 7.56057L9.28723 9.84681C9.68667 10.2461 10.3373 10.2356 10.7236 9.82361L14.2971 6.01303Z" fill="currentColor"/>',
    );
    e.s(["Analytics", 0, t]);
  },
  751660,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191);
    let r = 16,
      i = "__ADD_ID__",
      s = `0 0 ${r} ${r}`,
      a = "round",
      o = {
        top: "text-top",
        bottom: "text-bottom",
        middle: "middle",
        initial: null,
      },
      l = (e, l = {}) => {
        let {
          color: c = "currentColor",
          size: u,
          width: d,
          height: h,
          viewBox: p = s,
        } = l;
        return function (s) {
          let l = (0, n.useId)().replace(/[^a-zA-Z0-9-_]/g, ""),
            {
              size: m,
              color: f = c || "currentColor",
              align: g = "initial",
              className: x,
              width: v,
              height: y,
              style: b,
              ...j
            } = s,
            w = o[g],
            C = u || r,
            k = d || v,
            S = h || y,
            N = e.replace(RegExp(i, "g"), l);
          return (0, t.jsx)(
            "svg",
            {
              className: x,
              dangerouslySetInnerHTML: { __html: N },
              "data-testid": "geist-icon",
              height: C,
              strokeLinejoin: a,
              style: {
                ...b,
                verticalAlign: w || void 0,
                width: k || m,
                height: S || m,
                color: f,
              },
              viewBox: p,
              width: C,
              ...j,
            },
            l,
          );
        };
      };
    e.s(["withNewIcon", 0, l]);
  },
  72058,
  (e) => {
    "use strict";
    e.s([
      "EnvironmentIdea2",
      () => k,
      "SuspendingDeploymentActions",
      () => w,
      "renderTemplateStatus",
      () => C,
    ]);
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(452703),
      i = e.i(675120),
      s = e.i(373998),
      a = e.i(749709);
    e.i(472428);
    var o = e.i(296900);
    e.i(904347);
    var l = e.i(37737),
      c = e.i(749299),
      u = e.i(903500),
      d = e.i(741006),
      h = e.i(262194),
      p = e.i(242759),
      m = e.i(996174),
      f = e.i(751660),
      g = e.i(794593),
      x = e.i(762585);
    e.i(624424);
    var v = e.i(174890),
      y = e.i(539338),
      b = e.i(643312),
      j = e.i(501658);
    function w({ deploymentId: e, chatId: m }) {
      let f = (0, r.getDeploymentAtoms)(e),
        w = (0, n.useAtomValue)(f.status),
        S = w.ok ? w.value.deployment : void 0,
        N = (0, s.getChatDeploymentAtoms)(m),
        E = (0, n.useAtomValue)(N.deploymentState),
        A = (0, n.useAtomValue)(N.externalMeta),
        D = A.ok ? A.value.git : void 0,
        { setTemplateAction: I, setStageIntent: M } = (0,
        s.getChatDeploymentActions)(m),
        { data: T } = (0, o.useServerQuerySWR)(
          ["chat", "template"],
          { chatId: m },
          { suspense: !0 },
        ),
        { data: L } = (0, o.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: m },
          { suspense: !0 },
        ),
        P = L.ok ? L.value.project : null,
        { vercelProject: R } = (0, b.useIntegrationsApi)(),
        F = R?.project.id,
        _ = D?.onProductionBranch || !D,
        { dpe: O } = (0, p.useFlags)(),
        {
          data: B,
          isLoading: V,
          visitors: z,
        } = (0, j.useDeploymentAnalytics)(F);
      if (
        ![
          "deployed",
          "not-deployed",
          "queued",
          "deploying",
          "building",
        ].includes(E)
      )
        return null;
      let H = T.ok && T.value;
      return (0, t.jsx)(i.TransitionNode, {
        ...i.PRESETS.fade,
        renderKey: e,
        childClassName: "overflow-hidden",
        children: (0, t.jsxs)("div", {
          className: "flex flex-col gap-1 p-3",
          children: [
            (0, t.jsx)(a.default, {
              title: "Customize Domain",
              disabled: !_,
              icon: (0, t.jsx)(c.PencilEdit, {
                className: "!text-v0-gray-900 size-4",
              }),
              onClick: () => {
                (0, l.openDialog)({
                  type: "settings",
                  data: { initialSection: "domains" },
                });
              },
            }),
            (0, t.jsx)(a.default, {
              title: "Publish as Template",
              icon: (0, t.jsx)(u.Globe, {
                className: "!text-v0-gray-900 size-4",
              }),
              badge: C(
                T.ok ? T.value?.templateVersion.publishedToCommunity : void 0,
              ),
              onClick: () => {
                let e;
                (T.ok && T.value
                  ? (I("updated"), (e = "publish-template-changes"))
                  : (I("created"), (e = "template-entry")),
                  (0, l.openDialog)({
                    type: "templateWizard",
                    data: { chatId: m, initialStage: e },
                  }));
              },
              label: H ? "Update" : void 0,
            }),
            (0, t.jsx)(a.default, {
              title: "Visibility",
              icon: (0, t.jsx)(d.Eye, {
                className: "!text-v0-gray-900 size-4",
              }),
              onClick: () => {
                M("password-protection");
              },
              label:
                P?.vercelProject?.project.passwordProtection?.deploymentType ===
                "all"
                  ? "Password Protected"
                  : P?.vercelProject?.project.ssoProtection?.deploymentType ===
                      "all"
                    ? "SSO Protected"
                    : "Public",
              disabled: !O,
            }),
            (0, t.jsx)(a.default, {
              title: "Inspect on Vercel",
              icon: (0, t.jsx)(k, { className: "!text-v0-gray-900 size-4" }),
              disabled: !S,
              onClick: () => (S ? window.open(S.inspectorUrl, "_blank") : null),
            }),
            (0, t.jsx)(a.default, {
              title: "Analytics",
              badge:
                (B?.ok && B.value.enabled) || V
                  ? (0, t.jsx)(g.Badge, {
                      variant: z > 0 ? "blue" : "gray",
                      children: V
                        ? (0, t.jsx)(x.Skeleton, {})
                        : `${z} ${1 === z ? "visitor" : "visitors"}`,
                    })
                  : void 0,
              icon: (0, t.jsx)(h.Analytics, {
                className: "!text-v0-gray-900 size-4",
              }),
              disabled: !S,
              onClick: () => {
                let e = S?.inspectorUrl
                  ? S.inspectorUrl.replace(/\/[^\/]*$/, "/analytics")
                  : null;
                return e ? window.open(e, "_blank") : null;
              },
            }),
            (0, t.jsx)(v.BuiltWithV0Provider, {
              children: (0, t.jsx)(y.ToggleMenuItem, {}),
            }),
          ],
        }),
      });
    }
    let C = (e) => {
        let n = ({ children: e, content: n }) =>
          (0, t.jsx)(m.Tooltip, {
            delayDuration: 0,
            content: (0, t.jsx)("div", {
              className: "max-w-[300px]",
              children: n,
            }),
            children: e,
          });
        switch (e) {
          case "approved":
            return (0, t.jsx)(n, {
              content: "Your generation is live as a v0 Template.",
              children: (0, t.jsx)(g.Badge, {
                variant: "blue",
                children: "Live",
              }),
            });
          case "pending":
            return (0, t.jsx)(n, {
              content:
                "Your template submission is under approval. Once approved, it will be live.",
              children: (0, t.jsx)(g.Badge, {
                variant: "amber",
                children: "Pending",
              }),
            });
          case "rejected":
            return (0, t.jsx)(n, {
              content:
                "Your template submission was rejected. Please update your submission and resubmit.",
              children: (0, t.jsx)(g.Badge, {
                variant: "red",
                children: "Rejected",
              }),
            });
          case "private":
            return (0, t.jsx)(n, {
              content:
                "Your template submission is private. It will not be visible to the public.",
              children: (0, t.jsx)(g.Badge, {
                variant: "gray",
                children: "Private",
              }),
            });
          default:
            return (0, t.jsx)(n, {
              content:
                "Featuring your app as a v0 template will allow people to view the generation and fork it.",
              children: (0, t.jsx)(g.Badge, {
                variant: "gray",
                children: "Not Featured",
              }),
            });
        }
      },
      k = (0, f.withNewIcon)(
        '<path d="M2.5 11.25C2.5 12.4926 3.50736 13.5 4.75 13.5H6.5V15H4.75C2.67893 15 1 13.3211 1 11.25V9.5H2.5V11.25ZM15 11.25C15 13.3211 13.3211 15 11.25 15H9.5V13.5H11.25C12.4926 13.5 13.5 12.4926 13.5 11.25V9.5H15V11.25ZM11 4C11.5523 4 12 4.44772 12 5V11C12 11.5523 11.5523 12 11 12H5C4.44772 12 4 11.5523 4 11V5C4 4.44772 4.44772 4 5 4H11ZM5.5 10.5H10.5V5.5H5.5V10.5ZM6.5 2.5H4.75C3.50736 2.5 2.5 3.50736 2.5 4.75V6.5H1V4.75C1 2.67893 2.67893 1 4.75 1H6.5V2.5ZM11.25 1C13.3211 1 15 2.67893 15 4.75V6.5H13.5V4.75C13.5 3.50736 12.4926 2.5 11.25 2.5H9.5V1H11.25Z" fill="currentColor"/>',
      );
  },
  840981,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 5.5C11.7165 5.5 12.5 4.7165 12.5 3.75C12.5 2.7835 11.7165 2 10.75 2C9.7835 2 9 2.7835 9 3.75C9 4.7165 9.7835 5.5 10.75 5.5ZM10.75 0.75C12.1479 0.75 13.3225 1.70608 13.6555 3H15.25H16V4.5H15.25H13.6555C13.3225 5.79392 12.1479 6.75 10.75 6.75C9.35212 6.75 8.17754 5.79392 7.84451 4.5H0.75H0V3H0.75H7.84451C8.17754 1.70608 9.35212 0.75 10.75 0.75ZM15.25 13H16V11.5H15.25L8.15549 11.5C7.82245 10.2061 6.64788 9.25 5.25 9.25C3.85212 9.25 2.67755 10.2061 2.34451 11.5H0.75H0V13H0.75H2.34451C2.67755 14.2939 3.85212 15.25 5.25 15.25C6.64788 15.25 7.82246 14.2939 8.15549 13L15.25 13ZM7 12.2513C7 12.2509 7 12.2504 7 12.25C7 12.2496 7 12.2491 7 12.2487C6.99929 11.2828 6.21606 10.5 5.25 10.5C4.2835 10.5 3.5 11.2835 3.5 12.25C3.5 13.2165 4.2835 14 5.25 14C6.21606 14 6.99929 13.2172 7 12.2513Z" fill="currentColor"/>',
    );
    e.s(["SettingsSliders", 0, t]);
  },
  290151,
  (e) => {
    "use strict";
    e.s(["OpenPRPopoverContent", () => U], 290151);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(794593),
      i = e.i(900511),
      s = e.i(89625),
      a = e.i(691701),
      o = e.i(654335),
      l = e.i(211976),
      c = e.i(996174),
      u = e.i(684658),
      d = e.i(367447),
      h = e.i(633661),
      p = e.i(43900),
      m = e.i(576191),
      f = e.i(675120),
      g = t,
      x = e.i(398857),
      v = t;
    e.i(904347);
    var y = e.i(37737),
      b = e.i(749709),
      j = e.i(903500),
      w = e.i(72058),
      C = e.i(373998);
    e.i(472428);
    var k = e.i(296900),
      S = h;
    function N() {
      let { chatId: e } = (0, S.usePullRequest)(),
        { data: t } = (0, k.useServerQuerySWR)(
          ["chat", "template"],
          { chatId: e },
          { suspense: !1 },
        ),
        { setTemplateAction: n } = (0, C.getChatDeploymentActions)(e),
        r = t?.ok && t.value;
      return (0, v.jsx)(b.default, {
        title: "Publish as Template",
        icon: (0, v.jsx)(j.Globe, { className: "!text-v0-gray-800 size-4" }),
        badge: (0, w.renderTemplateStatus)(
          t?.ok ? t.value?.templateVersion.publishedToCommunity : void 0,
        ),
        onClick: () => {
          let r;
          (t?.ok && t.value
            ? (n("updated"), (r = "publish-template-changes"))
            : (n("created"), (r = "template-entry")),
            (0, y.openDialog)({
              type: "templateWizard",
              data: { chatId: e, initialStage: r },
            }));
        },
        label: r ? "Update" : void 0,
      });
    }
    var E = t,
      A = b,
      D = w,
      I = h;
    function M() {
      let { deployment: e } = (0, I.usePullRequest)(),
        t = e.data;
      return t
        ? (0, E.jsx)(A.default, {
            title: "Inspect on Vercel",
            icon: (0, E.jsx)(D.EnvironmentIdea2, {
              className: "!text-v0-gray-800 size-4",
            }),
            onClick: () => {
              window.open(t.inspectorUrl, "_blank");
            },
          })
        : null;
    }
    var T = t,
      L = e.i(840981),
      P = y,
      R = b;
    function F() {
      let e = () => {
        (0, P.openDialog)({
          type: "settings",
          data: { initialSection: "vercel-project" },
        });
      };
      return (0, T.jsx)(R.default, {
        title: "Additional Settings",
        icon: (0, T.jsx)(L.SettingsSliders, {
          className: "!text-v0-gray-800 size-4",
        }),
        onClick: () => {
          e();
        },
      });
    }
    var _ = h,
      O = e.i(762585),
      B = e.i(304649);
    function V({ className: e }) {
      return (0, g.jsx)("div", {
        className: "h-9 w-full",
        children: (0, g.jsx)(O.Skeleton, {
          className: (0, B.cn)("h-7 w-full", e),
        }),
      });
    }
    function z() {
      let { status: e, deployment: t } = (0, _.usePullRequest)(),
        n = e.data?.pr;
      return n && "merged" !== n.state
        ? !t.data || t.isLoading
          ? (0, g.jsxs)("div", {
              className: "flex flex-col gap-0.5 mt-3",
              children: [
                (0, g.jsx)(V, { className: "opacity-40" }),
                (0, g.jsx)(V, { className: "opacity-20" }),
                (0, g.jsx)(V, { className: "opacity-10" }),
                (0, g.jsx)(V, { className: "opacity-4" }),
              ],
            })
          : (0, g.jsxs)("div", {
              className: "flex flex-col gap-0.5 mt-3",
              children: [
                (0, g.jsx)(x.VisitPreviewMenuLink, {}),
                (0, g.jsx)(N, {}),
                (0, g.jsx)(M, {}),
                (0, g.jsx)(F, {}),
              ],
            })
        : null;
    }
    var H = e.i(548866);
    let $ = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M2.72876 6.42462C3.40596 4.15488 5.51032 2.5 8.00002 2.5C10.0902 2.5 11.9092 3.66566 12.8405 5.38592L13.1975 6.04548L14.5166 5.33138L14.1596 4.67183C12.9767 2.48677 10.6625 1 8.00002 1C5.05453 1 2.53485 2.81872 1.50122 5.39447V3.75V3H0.0012207V3.75V7.17462C0.0012207 7.58883 0.337007 7.92462 0.751221 7.92462H4.17584H4.92584V6.42462H4.17584H2.72876ZM13.2713 9.57538H11.8243H11.0743V8.07538H11.8243H15.2489C15.6631 8.07538 15.9989 8.41117 15.9989 8.82538V12.25V13H14.4989V12.25V10.6053C13.4653 13.1812 10.9456 15 8.00002 15C5.35065 15 3.04619 13.5279 1.85809 11.3605L1.49757 10.7029L2.8129 9.98181L3.17342 10.6395C4.10882 12.3458 5.92017 13.5 8.00002 13.5C10.4897 13.5 12.5941 11.8451 13.2713 9.57538Z" fill="currentColor"/>',
    );
    function U() {
      let {
          connection: e,
          status: g,
          state: x,
          actions: v,
        } = (0, h.usePullRequest)(),
        y = e.data,
        b = g.data,
        j = (0, m.useMemo)(() => {
          if (!y?.ok || !y.value.connected || e.error)
            return {
              status: "error-git-connection",
              content: (0, t.jsx)("div", {
                className: "p-4",
                children: (0, t.jsx)(H.EmptyState, {
                  title: "There was an error fetching PR information",
                  variant: "error",
                  icon: (0, t.jsx)(a.Stop, {
                    className: "text-v0-red-800 size-4",
                  }),
                  className: "min-h-[350px]",
                  children: (0, t.jsxs)("div", {
                    className: "flex flex-col gap-4",
                    children: [
                      (0, t.jsx)("span", {
                        className: "text-v0-gray-900",
                        children:
                          "Try again, or contact support if this issue persists.",
                      }),
                      (0, t.jsxs)("button", {
                        className:
                          "flex items-center gap-1 text-v0-gray-1000 text-label-14 font-medium bg-background-100 max-w-fit mx-auto p-2 rounded-md",
                        onClick: e.refetch,
                        children: [
                          (0, t.jsx)($, {
                            className: "text-v0-gray-100 size-4",
                          }),
                          "Refresh",
                        ],
                      }),
                    ],
                  }),
                }),
              }),
            };
          if (!b || null === b.pr)
            return {
              status: "create-pr",
              content: (0, t.jsxs)("div", {
                children: [
                  (0, t.jsxs)("div", {
                    className: "p-4 flex flex-col gap-3",
                    children: [
                      (0, t.jsxs)("div", {
                        className: "flex flex-col gap-1",
                        children: [
                          (0, t.jsx)("div", {
                            className: "text-label-16 font-medium",
                            children: "Publish a Pull Request",
                          }),
                          (0, t.jsxs)("div", {
                            className: "text-sm text-v0-gray-900",
                            children: [
                              "Publish your changes as a pull request in the",
                              " ",
                              (0, t.jsxs)("span", {
                                className: "font-medium",
                                children: [y.value.repo, " repository"],
                              }),
                              ". Once ready, you can merge the PR on GitHub to update your app.",
                            ],
                          }),
                        ],
                      }),
                      (0, t.jsx)("div", {
                        className:
                          "bg-v0-blue-100 rounded-lg h-44 pt-5 px-5 overflow-hidden",
                        children: (0, t.jsxs)("div", {
                          className:
                            "bg-v0-background-300 border-t border-x border-v0-alpha-400 rounded-t-xl p-3 flex flex-col gap-3",
                          children: [
                            (0, t.jsx)("div", {
                              className: "text-sm font-medium",
                              children: "feat: implement changes",
                            }),
                            (0, t.jsxs)("div", {
                              className: "flex items-center gap-1.5",
                              children: [
                                (0, t.jsxs)(r.Badge, {
                                  variant: "green",
                                  contrast: "prominent",
                                  children: [
                                    (0, t.jsx)(s.GitPullRequest, {}),
                                    " Open",
                                  ],
                                }),
                                (0, t.jsx)("div", {
                                  className:
                                    "bg-v0-gray-100 h-2.5 basis-7/12 rounded-full",
                                }),
                                (0, t.jsx)("div", {
                                  className:
                                    "bg-v0-gray-100 h-2.5 basis-2/12 rounded-full",
                                }),
                                (0, t.jsx)("div", {
                                  className:
                                    "bg-v0-gray-100 h-2.5 basis-3/12 rounded-full",
                                }),
                              ],
                            }),
                            (0, t.jsxs)("div", {
                              className:
                                "border border-v0-alpha-400 rounded-lg p-2 flex flex-col gap-2",
                              children: [
                                (0, t.jsx)("div", {
                                  className:
                                    "bg-v0-gray-100 h-2.5 w-11/12 rounded-full",
                                }),
                                (0, t.jsx)("div", {
                                  className:
                                    "bg-v0-gray-100 h-2.5 w-1/2 rounded-full",
                                }),
                              ],
                            }),
                            (0, t.jsxs)("div", {
                              className:
                                "border border-v0-alpha-400 rounded-t-lg overflow-hidden",
                              children: [
                                (0, t.jsxs)("div", {
                                  className:
                                    "border-b border-v0-alpha-400 flex h-4",
                                  children: [
                                    (0, t.jsx)("div", {
                                      className: "basis-1/8 bg-v0-green-300",
                                    }),
                                    (0, t.jsx)("div", {
                                      className: "grow bg-v0-green-100",
                                    }),
                                  ],
                                }),
                                (0, t.jsxs)("div", {
                                  className: "flex h-4",
                                  children: [
                                    (0, t.jsx)("div", {
                                      className: "basis-1/8 bg-v0-red-300",
                                    }),
                                    (0, t.jsx)("div", {
                                      className: "grow bg-v0-red-100",
                                    }),
                                  ],
                                }),
                              ],
                            }),
                          ],
                        }),
                      }),
                    ],
                  }),
                  (0, t.jsx)("div", {
                    className: "p-3 border-t border-v0-alpha-400",
                    children:
                      g.isLoading || !b
                        ? (0, t.jsx)("div", {
                            className:
                              "h-8 w-full bg-v0-gray-100 rounded-md animate-pulse",
                          })
                        : (0, t.jsx)(c.Tooltip, {
                            content:
                              y.value.base === y.value.head
                                ? "Duplicate chat to create a new branch"
                                : b.githubBranchStatus?.status ===
                                    "identical" && "No changes yet!",
                            children: (0, t.jsx)(l.SpinnerButton, {
                              size: "sm",
                              className: "w-full",
                              disabled:
                                y.value.base === y.value.head ||
                                b.githubBranchStatus?.status === "identical",
                              onClick: v.createPullRequest,
                              pending: x.isCreating,
                              children: "Publish Pull Request",
                            }),
                          }),
                  }),
                ],
              }),
            };
          let { pr: h } = b;
          return {
            status: "pr-created",
            content: (0, t.jsxs)("div", {
              className: "flex flex-col",
              children: [
                (0, t.jsxs)("div", {
                  className: "flex flex-col p-4 pb-3",
                  children: [
                    (0, t.jsxs)("div", {
                      className: "pb-3 flex gap-3 border-b border-v0-alpha-100",
                      children: [
                        (0, t.jsx)(u.PullRequestBadge, { pr: h }),
                        (0, t.jsx)(d.PullRequestDetails, {
                          pr: h,
                          gitConnection: y,
                        }),
                      ],
                    }),
                    (0, t.jsx)(z, {}),
                    "merged" !== h.state && (0, t.jsx)("div", {}),
                    (0, t.jsx)(p.DuplicateChatButton, {}),
                  ],
                }),
                (0, t.jsxs)("div", {
                  className: "p-3 flex gap-2 border-t border-v0-alpha-100",
                  children: [
                    (0, t.jsxs)(o.default, {
                      href: `https://github.com/${y.value.org}/${y.value.repo}/pull/${h.id}`,
                      target: "_blank",
                      className: (0, n.buttonVariants)({
                        variant: "outline",
                        size: "sm",
                        className: "grow shrink-0",
                      }),
                      children: ["View PR ", (0, t.jsx)(i.ExternalSmall, {})],
                    }),
                    "open" === h.state &&
                      (0, t.jsx)(l.SpinnerButton, {
                        pending: x.isMerging,
                        disabled: !h.mergeable,
                        onClick: v.merge,
                        className:
                          "grow shrink-0 bg-v0-green-800! text-v0-background-100! hover:bg-v0-green-900! border-v0-green-800!",
                        children: "Merge PR",
                      }),
                  ],
                }),
              ],
            }),
          };
        }, [e, g, x, v, y, b]);
      return (0, t.jsx)(f.TransitionNode, {
        renderKey: j.status,
        children: j.content,
      });
    }
  },
  549024,
  (e) => {
    "use strict";
    e.s(["CreatePullRequestDialog", () => a]);
    var t = e.i(324834),
      n = e.i(120945),
      r = e.i(290151),
      i = e.i(92479),
      s = e.i(633661);
    function a() {
      let { chatId: e } = (0, i.useChatId)();
      return e
        ? (0, t.jsx)(n.AtomicDialog, {
            type: "createPullRequest",
            className: "max-w-[440px]",
            children: (0, t.jsx)(s.PullRequestProvider, {
              chatId: e,
              children: (0, t.jsx)(r.OpenPRPopoverContent, {}),
            }),
          })
        : null;
    }
  },
  82839,
  (e) => {
    "use strict";
    e.s(["useOAuthStatus", () => r]);
    var t = e.i(576191),
      n = e.i(643312);
    function r({ provider: e, enabled: r = !0 }) {
      let i = (0, n.useIntegrationsApi)(),
        {
          status: s,
          expiresAt: a,
          isLoading: o,
        } = (0, t.useMemo)(() => {
          if (!r)
            return { status: "disconnected", expiresAt: void 0, isLoading: !1 };
          if ("loading" === i.status)
            return { status: "disconnected", expiresAt: void 0, isLoading: !0 };
          if ("ready" !== i.status)
            return { status: "disconnected", expiresAt: void 0, isLoading: !1 };
          let t = e.startsWith("mcp:") ? e.slice(4) : e,
            n = i.mcps?.find((e) => e.id === t);
          if (!n)
            return { status: "disconnected", expiresAt: void 0, isLoading: !1 };
          let s = "disconnected";
          return {
            status: (s = n.isConnected
              ? n.isExpired
                ? "expired"
                : n.expiresSoon
                  ? "expires-soon"
                  : "connected"
              : "disconnected"),
            expiresAt: n.expiresAt,
            isLoading: !1,
          };
        }, [r, i, e]);
      return { status: s, isLoading: o, expiresAt: a };
    }
  },
  117141,
  (e) => {
    "use strict";
    let t = (e) => {
        try {
          let t = new URL(e).hostname.split("."),
            n = t.length >= 2 ? t[t.length - 2] : t[0];
          return n ? n.charAt(0).toUpperCase() + n.slice(1) : "";
        } catch {
          return "";
        }
      },
      n = (e) => {
        try {
          let t = new URL(e);
          return (t.origin + t.pathname).replace(/\/$/, "").toLowerCase();
        } catch {
          return e.toLowerCase().trim();
        }
      },
      r = (e, t) => n(e) === n(t);
    e.s(["extractNameFromUrl", 0, t, "urlsMatch", 0, r]);
  },
  382889,
  (e) => {
    "use strict";
    var t = e.i(324834);
    function n({ logo: e, name: n, size: r = "md", hasDarkModeLogo: i = !1 }) {
      let s = "sm" === r ? "size-4" : "size-[40px]",
        a = "sm" === r ? "size-4" : "size-8",
        o = "sm" === r ? "p-0" : "p-1",
        l = "sm" === r ? "text-[8px]" : "text-base",
        c = (e) => {
          let t = e.lastIndexOf(".");
          if (-1 === t) return null;
          let n = e.substring(0, t),
            r = e.substring(t);
          return `${n}-dark${r}`;
        },
        u = e && i ? c(e) : null,
        d = n.charAt(0).toUpperCase();
      return (0, t.jsx)("div", {
        className: `bg-v0-background-300 border border-v0-alpha-400 rounded-[6px] shrink-0 ${s} flex items-center justify-center overflow-clip ${o}`,
        children: e
          ? (0, t.jsxs)(t.Fragment, {
              children: [
                (0, t.jsx)("img", {
                  src: e,
                  alt: n,
                  className: `shrink-0 ${a} ${u ? "dark:hidden" : ""}`,
                }),
                u &&
                  (0, t.jsx)("img", {
                    src: u,
                    alt: n,
                    className: `shrink-0 ${a} hidden dark:block`,
                  }),
              ],
            })
          : (0, t.jsx)("div", {
              className: `text-v0-gray-900 font-semibold ${l}`,
              children: d,
            }),
      });
    }
    e.s(["McpLogo", () => n]);
  },
  182473,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(365670),
      i = e.i(900511),
      s = e.i(763480),
      a = e.i(117141),
      o = e.i(382889);
    let l = [
      {
        id: "linear",
        name: "Linear",
        description: "Project management and issue tracking",
        url: "https://mcp.linear.app/mcp",
        authType: "oauth",
        logo: "/chat-static/assets/mcp/logo-linear.svg",
        documentationUrl: "https://linear.app/docs/mcp",
      },
      {
        id: "notion",
        name: "Notion",
        description: "Search and modify your Notion workspace",
        url: "https://mcp.notion.com/mcp",
        authType: "oauth",
        logo: "/chat-static/assets/mcp/logo-notion.svg",
        documentationUrl: "https://developers.notion.com/docs/mcp",
      },
      {
        id: "context7",
        name: "Context7",
        description: "Documentation and context tools",
        url: "https://mcp.context7.com/mcp",
        authType: "none",
        logo: "/chat-static/assets/mcp/logo-context7.png",
        documentationUrl: "https://context7.com/docs/overview",
      },
      {
        id: "sentry",
        name: "Sentry",
        description: "Error tracking and performance monitoring",
        url: "https://mcp.sentry.dev/mcp",
        authType: "oauth",
        logo: "/chat-static/assets/mcp/logo-sentry.svg",
        hasDarkModeLogo: !0,
        documentationUrl: "https://docs.sentry.io/product/sentry-mcp/",
      },
      {
        id: "zapier",
        name: "Zapier",
        description: "Workflow automation and app integration",
        url: "",
        authType: "none",
        documentationUrl: "https://actions.zapier.com/docs/platform/mcp",
        logo: "/chat-static/assets/mcp/logo-zapier.svg",
        setupGuide: (0, t.jsxs)("div", {
          className: "space-y-4",
          children: [
            (0, t.jsxs)("div", {
              children: [
                (0, t.jsx)("h4", {
                  className: "font-semibold text-sm mb-2",
                  children: "Before you begin",
                }),
                (0, t.jsx)("p", {
                  className: "text-sm text-v0-gray-700",
                  children:
                    "You'll need to generate a unique MCP server URL from your Zapier account.",
                }),
              ],
            }),
            (0, t.jsxs)("div", {
              children: [
                (0, t.jsx)("h4", {
                  className: "font-semibold text-sm mb-2",
                  children: "Steps",
                }),
                (0, t.jsxs)("ol", {
                  className:
                    "list-decimal list-inside space-y-2 text-sm text-v0-gray-700",
                  children: [
                    (0, t.jsxs)("li", {
                      children: [
                        "Go to",
                        " ",
                        (0, t.jsx)("a", {
                          href: "https://mcp.zapier.com/mcp",
                          target: "_blank",
                          rel: "noopener noreferrer",
                          className: "text-v0-blue-600 hover:underline",
                          children: "Zapier MCP Setup",
                        }),
                      ],
                    }),
                    (0, t.jsx)("li", {
                      children: "Sign in to your Zapier account",
                    }),
                    (0, t.jsx)("li", { children: 'Click "+ New MCP Server"' }),
                    (0, t.jsx)("li", {
                      children:
                        "In the MCP Client dropdown, select Other at the bottom",
                    }),
                    (0, t.jsxs)("li", {
                      children: [
                        "Click ",
                        (0, t.jsx)("strong", { children: "Create MCP Server" }),
                      ],
                    }),
                    (0, t.jsxs)("li", {
                      children: [
                        "In the top menu bar, select the ",
                        (0, t.jsx)("strong", { children: "Connect" }),
                        " tab",
                      ],
                    }),
                    (0, t.jsx)("li", {
                      children:
                        "Paste the URL provided into the URL field on the next screen",
                    }),
                  ],
                }),
              ],
            }),
          ],
        }),
      },
      {
        id: "glean",
        name: "Glean",
        description: "Knowledge management and search platform",
        url: "",
        authType: "oauth",
        logo: "/chat-static/assets/mcp/logo-glean.svg",
        documentationUrl: "https://developers.glean.com/guides/mcp/",
        setupGuide: (0, t.jsxs)("div", {
          className: "space-y-4",
          children: [
            (0, t.jsxs)("div", {
              children: [
                (0, t.jsx)("h4", {
                  className: "font-semibold text-sm mb-2",
                  children: "Before you begin",
                }),
                (0, t.jsx)("p", {
                  className: "text-sm text-v0-gray-700",
                  children:
                    "Your Glean workspace administrator must enable the MCP connector before you can connect. If its already been enabled you can skip this screen.",
                }),
              ],
            }),
            (0, t.jsxs)("div", {
              children: [
                (0, t.jsx)("h4", {
                  className: "font-semibold text-sm mb-2",
                  children: "Admin setup required",
                }),
                (0, t.jsxs)("ol", {
                  className:
                    "list-decimal list-inside space-y-2 text-sm text-v0-gray-700",
                  children: [
                    (0, t.jsxs)("li", {
                      children: [
                        "Ask your Glean admin to visit the",
                        " ",
                        (0, t.jsx)("a", {
                          href: "https://docs.glean.com/administration/platform/mcp/enable-mcp-servers",
                          target: "_blank",
                          rel: "noopener noreferrer",
                          className: "text-v0-blue-600 hover:underline",
                          children:
                            "Setting up Glean MCP Servers documentation",
                        }),
                      ],
                    }),
                    (0, t.jsx)("li", {
                      children: 'Enable the "MCP Server" connector',
                    }),
                    (0, t.jsx)("li", {
                      children:
                        "Once enabled, you can proceed with OAuth authorization and provide the URL your administrator has.",
                    }),
                  ],
                }),
              ],
            }),
            (0, t.jsx)("div", {
              className:
                "p-3 bg-v0-blue-50 border border-v0-blue-200 rounded-lg",
              children: (0, t.jsxs)("p", {
                className: "text-xs text-v0-blue-900",
                children: [
                  (0, t.jsx)("strong", { children: "Note:" }),
                  " If you're a Glean admin, you can enable this yourself. Otherwise, please contact your workspace administrator.",
                ],
              }),
            }),
          ],
        }),
      },
      {
        id: "hex",
        name: "Hex",
        description: "Data science and analytics platform",
        logo: "/chat-static/assets/mcp/logo-hex.svg",
        hasDarkModeLogo: !0,
        url: "https://app.hex.tech/mcp",
        authType: "oauth",
        documentationUrl:
          "https://learn.hex.tech/docs/administration/mcp-server",
      },
    ];
    function c({
      onSelectPreset: e,
      onSelectCustom: c,
      connectedServers: u = [],
    }) {
      let [d, h] = (0, n.useState)(""),
        p = (e) => u.some((t) => (0, a.urlsMatch)(t.url, e.url)),
        m = (0, n.useMemo)(() => {
          let e = d.toLowerCase().trim();
          return (
            e
              ? l.filter(
                  (t) =>
                    t.name.toLowerCase().includes(e) ||
                    t.description.toLowerCase().includes(e) ||
                    t.url.toLowerCase().includes(e),
                )
              : l
          ).sort((e, t) => {
            let n = u.some((t) => (0, a.urlsMatch)(t.url, e.url));
            return n !== u.some((e) => (0, a.urlsMatch)(e.url, t.url))
              ? n
                ? 1
                : -1
              : e.name.localeCompare(t.name);
          });
        }, [d, u]);
      return (0, t.jsxs)("div", {
        className: "flex flex-col h-full",
        children: [
          (0, t.jsx)("div", {
            className: "mb-2",
            children: (0, t.jsx)(s.Input, {
              type: "text",
              placeholder: "Search providers...",
              value: d,
              onChange: (e) => h(e.target.value),
              className: "w-full h-11",
              prefixStyling: !0,
              prefix: (0, t.jsx)(r.MagnifyingGlassSmall, { size: 16 }),
            }),
          }),
          (0, t.jsx)("div", {
            className: "flex-1 min-h-0 flex flex-col",
            children: (0, t.jsx)("div", {
              className: "flex-1 overflow-y-auto -mx-2 px-2",
              children: (0, t.jsxs)("div", {
                className: "space-y-1",
                children: [
                  m.map((n) => {
                    let r = p(n);
                    return (0, t.jsxs)(
                      "button",
                      {
                        type: "button",
                        onClick: () => !r && e(n),
                        disabled: r,
                        className: `w-full flex items-start gap-3 p-2 rounded-lg transition-colors text-left group ${r ? "opacity-50 cursor-not-allowed" : "hover:bg-v0-gray-100"}`,
                        children: [
                          (0, t.jsx)(o.McpLogo, {
                            logo: n.logo,
                            name: n.name,
                            hasDarkModeLogo: n.hasDarkModeLogo,
                          }),
                          (0, t.jsxs)("div", {
                            className: "flex-1 min-w-0",
                            children: [
                              (0, t.jsxs)("div", {
                                className: "flex items-center gap-2 mb-1",
                                children: [
                                  (0, t.jsx)("div", {
                                    className:
                                      "font-semibold text-base text-v0-gray-1000",
                                    children: n.name,
                                  }),
                                  n.documentationUrl &&
                                    (0, t.jsxs)("a", {
                                      href: n.documentationUrl,
                                      target: "_blank",
                                      rel: "noopener noreferrer",
                                      onClick: (e) => e.stopPropagation(),
                                      className:
                                        "text-v0-gray-900 hover:text-v0-gray-1000 transition-colors flex items-center gap-1 text-sm",
                                      title: "View documentation",
                                      children: [
                                        "Docs",
                                        (0, t.jsx)(i.ExternalSmall, {
                                          size: 14,
                                        }),
                                      ],
                                    }),
                                  r
                                    ? (0, t.jsx)("div", {
                                        className:
                                          "text-xs px-2 py-0.5 rounded-full bg-v0-green-100 text-v0-green-700 font-medium",
                                        children: "Connected",
                                      })
                                    : null,
                                ],
                              }),
                              (0, t.jsx)("div", {
                                className:
                                  "text-sm text-v0-gray-900 line-clamp-1",
                                children: n.description,
                              }),
                            ],
                          }),
                          !r &&
                            (0, t.jsx)("div", {
                              className:
                                "shrink-0 self-center opacity-0 group-hover:opacity-100 transition-opacity",
                              children: (0, t.jsx)("div", {
                                className: "text-base text-v0-gray-900",
                                children: "",
                              }),
                            }),
                        ],
                      },
                      n.id,
                    );
                  }),
                  0 === m.length &&
                    (0, t.jsxs)("div", {
                      className: "py-8 text-center",
                      children: [
                        (0, t.jsx)("div", {
                          className: "text-sm text-v0-gray-600 mb-1",
                          children: "No providers found",
                        }),
                        (0, t.jsx)("div", {
                          className: "text-xs text-v0-gray-500",
                          children:
                            "Try a different search or connect a custom server",
                        }),
                      ],
                    }),
                ],
              }),
            }),
          }),
          (0, t.jsx)("div", {
            className: "pt-3 mt-3 border-t border-v0-gray-200",
            children: (0, t.jsxs)("button", {
              type: "button",
              onClick: c,
              className:
                "w-full flex items-center gap-3 p-3 border border-v0-gray-200 border-dashed rounded-lg hover:border-v0-gray-400 hover:bg-v0-gray-50 transition-all text-left",
              children: [
                (0, t.jsxs)("div", {
                  className: "flex-1 min-w-0",
                  children: [
                    (0, t.jsx)("div", {
                      className: "font-medium text-sm text-v0-gray-1000 mb-0.5",
                      children: "Custom MCP Server",
                    }),
                    (0, t.jsx)("div", {
                      className: "text-xs text-v0-gray-900",
                      children: "Enter server details manually",
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "text-xs text-v0-gray-900",
                  children: "",
                }),
              ],
            }),
          }),
        ],
      });
    }
    e.s(["McpServerPresetView", () => c, "PRESET_PROVIDERS", 0, l]);
  },
  589332,
  162664,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(763480),
      r = e.i(707974),
      i = e.i(996174),
      s = e.i(227152);
    function a({
      oauthConfig: e,
      setOauthConfig: a,
      discoveryError: o,
      showManualConfig: l,
      hasOAuthConfig: c,
      needsAuthorization: u,
      isOAuthConnected: d,
      isEditing: h,
    }) {
      return l
        ? (0, t.jsxs)("div", {
            className: "flex flex-col gap-4 min-h-[50px]",
            children: [
              o &&
                (0, t.jsxs)("div", {
                  className: "text-sm text-v0-red-600",
                  children: [
                    (0, t.jsx)("div", {
                      className: "font-medium",
                      children: "Auto-discovery failed",
                    }),
                    (0, t.jsx)("div", { className: "mt-1", children: o }),
                    (0, t.jsx)("div", {
                      className: "text-xs mt-2",
                      children:
                        "Please configure OAuth settings manually below.",
                    }),
                  ],
                }),
              e &&
                (0, t.jsxs)("div", {
                  className: "flex flex-col gap-3",
                  children: [
                    (0, t.jsx)("div", {
                      className: "text-sm font-medium",
                      children: "Manual OAuth Configuration",
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-1.5",
                          children: [
                            (0, t.jsx)(r.Label, {
                              htmlFor: "authUrl",
                              children: "Authorization URL",
                            }),
                            (0, t.jsx)(i.Tooltip, {
                              content:
                                "The OAuth endpoint where users are redirected to authenticate and grant permissions",
                              children: (0, t.jsx)(s.InformationFillSmall, {
                                className:
                                  "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                                size: 16,
                              }),
                            }),
                          ],
                        }),
                        (0, t.jsx)(n.Input, {
                          id: "authUrl",
                          placeholder: "https://auth.example.com/authorize",
                          value: e.authorizationUrl || "",
                          onChange: (t) =>
                            a({ ...e, authorizationUrl: t.target.value }),
                          required: !0,
                        }),
                      ],
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-1.5",
                          children: [
                            (0, t.jsx)(r.Label, {
                              htmlFor: "tokenUrl",
                              children: "Token URL",
                            }),
                            (0, t.jsx)(i.Tooltip, {
                              content:
                                "The OAuth endpoint where authorization codes are exchanged for access tokens",
                              children: (0, t.jsx)(s.InformationFillSmall, {
                                className:
                                  "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                                size: 16,
                              }),
                            }),
                          ],
                        }),
                        (0, t.jsx)(n.Input, {
                          id: "tokenUrl",
                          placeholder: "https://auth.example.com/token",
                          value: e.tokenUrl || "",
                          onChange: (t) =>
                            a({ ...e, tokenUrl: t.target.value }),
                          required: !0,
                        }),
                      ],
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-1.5",
                          children: [
                            (0, t.jsx)(r.Label, {
                              htmlFor: "clientId",
                              children: "Client ID",
                            }),
                            (0, t.jsx)(i.Tooltip, {
                              content:
                                "The public identifier for your OAuth application",
                              children: (0, t.jsx)(s.InformationFillSmall, {
                                className:
                                  "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                                size: 16,
                              }),
                            }),
                          ],
                        }),
                        (0, t.jsx)(n.Input, {
                          id: "clientId",
                          placeholder: "your-client-id",
                          value: e.clientId || "",
                          onChange: (t) =>
                            a({ ...e, clientId: t.target.value }),
                          required: !0,
                        }),
                      ],
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-1.5",
                          children: [
                            (0, t.jsx)(r.Label, {
                              htmlFor: "clientSecret",
                              children: "Client Secret (optional)",
                            }),
                            (0, t.jsx)(i.Tooltip, {
                              content:
                                "The secret key for your OAuth application. Required for confidential clients, not needed for PKCE",
                              children: (0, t.jsx)(s.InformationFillSmall, {
                                className:
                                  "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                                size: 16,
                              }),
                            }),
                          ],
                        }),
                        (0, t.jsx)(n.Input, {
                          id: "clientSecret",
                          type: "password",
                          placeholder: "your-client-secret",
                          value: e.clientSecret || "",
                          onChange: (t) =>
                            a({ ...e, clientSecret: t.target.value }),
                        }),
                      ],
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-1.5",
                          children: [
                            (0, t.jsx)(r.Label, {
                              htmlFor: "scopes",
                              children: "Scopes (comma-separated)",
                            }),
                            (0, t.jsx)(i.Tooltip, {
                              content:
                                "The OAuth permissions your application needs. Separate multiple scopes with commas",
                              children: (0, t.jsx)(s.InformationFillSmall, {
                                className:
                                  "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                                size: 16,
                              }),
                            }),
                          ],
                        }),
                        (0, t.jsx)(n.Input, {
                          id: "scopes",
                          placeholder: "read, write",
                          value: e.scopes.join(", ") || "",
                          onChange: (t) =>
                            a({
                              ...e,
                              scopes: t.target.value
                                .split(",")
                                .map((e) => e.trim())
                                .filter(Boolean),
                            }),
                        }),
                      ],
                    }),
                  ],
                }),
            ],
          })
        : c
          ? (0, t.jsxs)("div", {
              className: "flex flex-col gap-2 min-h-[50px]",
              children: [
                u &&
                  (0, t.jsx)("div", {
                    className: "text-sm text-v0-gray-800",
                    children: (0, t.jsxs)("span", {
                      children: [
                        (0, t.jsx)("span", {
                          children:
                            "Note: You'll be redirected to authorize after",
                        }),
                        " ",
                        (0, t.jsx)("span", {
                          children: h ? "saving" : "adding",
                        }),
                        (0, t.jsx)("span", { children: " this MCP." }),
                      ],
                    }),
                  }),
                d &&
                  (0, t.jsx)("div", {
                    className: "text-sm text-v0-green-700 px-3 py-2",
                    children: "OAuth is connected",
                  }),
              ],
            })
          : (0, t.jsx)("div", {
              className: "flex flex-col gap-2 min-h-[50px]",
              children: (0, t.jsx)("div", {
                className: "text-sm text-v0-gray-800",
                children:
                  "Note: you will be re-directed to authorize after saving this MCP.",
              }),
            });
    }
    e.s(["McpServerOAuthConfig", () => a], 589332);
    var o = t,
      l = e.i(176248),
      c = n,
      u = r,
      d = e.i(672001);
    function h({
      customHeaders: e,
      onAddHeader: t,
      onRemoveHeader: n,
      onHeaderChange: r,
      isSaving: i,
    }) {
      return (0, o.jsxs)("div", {
        className: "flex flex-col gap-2 min-h-[50px]",
        children: [
          (0, o.jsx)(u.Label, { children: "Custom Headers" }),
          (0, o.jsxs)("div", {
            className: "flex flex-col gap-2",
            children: [
              e.map((t, s) =>
                (0, o.jsxs)(
                  "div",
                  {
                    className: "flex gap-2 items-center",
                    children: [
                      (0, o.jsx)(c.Input, {
                        placeholder: "Header Key (e.g. X-API-Key)",
                        value: t.key,
                        onChange: (e) => r(s, "key", e.target.value),
                        disabled: i,
                        className: "flex-1",
                      }),
                      (0, o.jsx)(c.Input, {
                        placeholder: "Header Value",
                        type: "password",
                        value: t.value,
                        onChange: (e) => r(s, "value", e.target.value),
                        disabled: i,
                        className: "flex-1",
                      }),
                      e.length > 1 &&
                        (0, o.jsx)(l.Button, {
                          type: "button",
                          variant: "ghost",
                          size: "xs",
                          onClick: () => n(s),
                          disabled: i,
                          className: "size-8 shrink-0",
                          children: (0, o.jsx)(d.CrossSmall, {
                            className: "size-4",
                          }),
                        }),
                    ],
                  },
                  s,
                ),
              ),
              (0, o.jsx)(l.Button, {
                type: "button",
                variant: "ghost",
                size: "xs",
                onClick: t,
                disabled: i || e.length >= 10,
                className: "w-fit",
                title: "Add Header",
                children: (0, o.jsx)("span", {
                  className: "text-base leading-none",
                  children: "+",
                }),
              }),
            ],
          }),
        ],
      });
    }
    e.s(["McpServerCustomHeaders", () => h], 162664);
  },
  884336,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "7f130f4c0aea59d334bf4f316fdc7ce937e2c197b4",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "deleteMcpServerAction",
      );
    e.s(["deleteMcpServerAction", () => n]);
  },
  731721,
  (e) => {
    "use strict";
    e.s(["McpServerModal", () => x]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(686832),
      i = e.i(176248),
      s = e.i(763480),
      a = e.i(707974),
      o = e.i(710825),
      l = e.i(996174),
      c = e.i(644471),
      u = e.i(82839),
      d = e.i(117141),
      h = e.i(182473),
      p = e.i(589332),
      m = e.i(162664),
      f = e.i(884336);
    function g({
      server: e,
      allServers: g = [],
      initialPreset: x,
      onSave: v,
      onDelete: y,
      onOpenChange: b,
    }) {
      let [j, w] = (0, n.useState)(e?.name || ""),
        [C, k] = (0, n.useState)(e?.url || ""),
        [S, N] = (0, n.useState)(e?.description || ""),
        [E, A] = (0, n.useState)(e?.auth.type || "none"),
        [D, I] = (0, n.useState)(e?.auth.type === "bearer" ? e.auth.token : ""),
        [M, T] = (0, n.useState)(() =>
          e?.auth.type === "custom-headers"
            ? Object.entries(e.auth.headers).map(([e, t]) => ({
                key: e,
                value: t,
              }))
            : [{ key: "", value: "" }],
        ),
        [L, P] = (0, n.useState)(() =>
          e?.auth.type === "oauth" && e.auth.config ? e.auth.config : null,
        ),
        [R, F] = (0, n.useState)(!1),
        [_, O] = (0, n.useState)(null),
        [B, V] = (0, n.useState)(!1),
        [z, H] = (0, n.useState)(!1),
        [$, U] = (0, n.useState)(!1),
        [G, W] = (0, n.useState)(!1),
        [q, Z] = (0, n.useState)(!1),
        [K, Y] = (0, n.useState)(!1),
        [J, Q] = (0, n.useState)(null),
        X = !!e;
      (0, n.useEffect)(() => {
        x && !X && es(x);
      }, [x, X]);
      let ee = e?.auth.type === "oauth",
        { status: et } = (0, u.useOAuthStatus)({
          provider: e ? `mcp:${e.mcpServerId}` : "",
          enabled: ee,
        }),
        en = "connected" === et,
        er = (e) => {
          if ((k(e), !j || q)) {
            let t = (0, d.extractNameFromUrl)(e);
            t && (w(t), Z(!0));
          }
        },
        ei = (e) => {
          (w(e), Z(!1));
        },
        es = (e) => {
          e.setupGuide
            ? (Q(e), Y(!0))
            : (w(e.name),
              k(e.url),
              N(e.description),
              A(e.authType),
              Z(!1),
              W(!0));
        },
        ea = () => {
          J &&
            (w(J.name),
            k(J.url),
            N(J.description),
            A(J.authType),
            Z(!1),
            Y(!1),
            W(!0));
        },
        eo = () => {
          W(!0);
        },
        el = () => {
          T([...M, { key: "", value: "" }]);
        },
        ec = (e) => {
          T(M.filter((t, n) => n !== e));
        },
        eu = (e, t, n) => {
          let r = [...M];
          ((r[e][t] = n), T(r));
        },
        ed = (e) => {
          if ("bearer" === E) return { type: "bearer", token: D.trim() };
          if ("custom-headers" === E) {
            let e = {};
            return (
              M.forEach((t) => {
                t.key.trim() &&
                  t.value.trim() &&
                  (e[t.key.trim()] = t.value.trim());
              }),
              { type: "custom-headers", headers: e }
            );
          }
          if ("oauth" === E) {
            let t = e || L;
            if (t) return { type: "oauth", config: t, connected: !1 };
          }
          return { type: "none" };
        },
        eh = async (t) => {
          if ((t.preventDefault(), !j.trim() || !C.trim())) return;
          let n = C.trim(),
            r = g.find(
              (t) =>
                (!X || !e || t.mcpServerId !== e.mcpServerId) &&
                (0, d.urlsMatch)(t.url, n),
            );
          if (r)
            return void O(
              `This MCP server is already connected as "${r.name}"`,
            );
          let i = null;
          if ("oauth" === E && !L) {
            (F(!0), O(null));
            try {
              let e = await fetch("/api/chat/integrations/oauth/discover", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  mcpServerUrl: C.trim(),
                  performRegistration: !0,
                }),
              });
              if (!e.ok) throw Error("Failed to discover OAuth configuration");
              let t = await e.json();
              if (!t.requiresOAuth) {
                (O("This MCP server does not require OAuth"), V(!0), F(!1));
                return;
              }
              if (t.error || !t.config) {
                (O(t.error || "Failed to discover OAuth configuration"),
                  V(!0),
                  P({
                    authorizationUrl: "",
                    tokenUrl: "",
                    clientId: "",
                    clientSecret: "",
                    scopes: [],
                    usePKCE: !0,
                    resource: C.trim(),
                  }),
                  F(!1));
                return;
              }
              ((i = t.config), P(t.config));
            } catch (e) {
              (O(e instanceof Error ? e.message : "Discovery failed"),
                V(!0),
                P({
                  authorizationUrl: "",
                  tokenUrl: "",
                  clientId: "",
                  clientSecret: "",
                  scopes: [],
                  usePKCE: !0,
                  resource: C.trim(),
                }),
                F(!1));
              return;
            } finally {
              F(!1);
            }
          }
          let s = i || L;
          if (
            ("bearer" !== E || D.trim()) &&
            ("custom-headers" !== E ||
              M.some((e) => e.key.trim() && e.value.trim())) &&
            ("oauth" !== E || s)
          ) {
            H(!0);
            try {
              let t = ed(s),
                n =
                  (await v({
                    name: j.trim(),
                    url: C.trim(),
                    description: S.trim() || void 0,
                    enabled: !0,
                    auth: t,
                  })) || e?.mcpServerId;
              if (n && "oauth" === t.type && t.config?.clientId && !en)
                try {
                  let e = await fetch("/api/chat/integrations/oauth/initiate", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                      provider: `mcp:${n}`,
                      config: t.config,
                      returnPath: window.location.pathname,
                    }),
                  });
                  if (e.ok) {
                    let { url: t } = await e.json();
                    window.location.href = t;
                    return;
                  }
                  {
                    let t = await e.text();
                    if (
                      (console.error("Failed to initiate OAuth:", t), n && !X)
                    )
                      try {
                        (await (0, f.deleteMcpServerAction)({ id: n }),
                          console.log(
                            `Cleaned up MCP server ${n} after OAuth initiation failed`,
                          ));
                      } catch (e) {
                        console.error("Failed to cleanup MCP server:", e);
                      }
                    (O(`Failed to start authorization: ${t}`), V(!0));
                    return;
                  }
                } catch (e) {
                  if ((console.error("Error initiating OAuth:", e), n && !X))
                    try {
                      (await (0, f.deleteMcpServerAction)({ id: n }),
                        console.log(
                          `Cleaned up MCP server ${n} after OAuth error`,
                        ));
                    } catch (e) {
                      console.error("Failed to cleanup MCP server:", e);
                    }
                  (O(
                    `Error starting authorization: ${e instanceof Error ? e.message : String(e)}`,
                  ),
                    V(!0));
                  return;
                }
              (b(!1),
                w(""),
                k(""),
                N(""),
                A("none"),
                I(""),
                T([{ key: "", value: "" }]),
                P(null),
                V(!1),
                O(null));
            } finally {
              H(!1);
            }
          }
        },
        ep = async () => {
          if (y) {
            U(!0);
            try {
              (await y(), b(!1));
            } finally {
              U(!1);
            }
          }
        },
        em = !!(L && L.clientId),
        ef = "oauth" === E && !(X && en),
        eg = () =>
          R
            ? "Discovering..."
            : z
              ? "Saving..."
              : "oauth" === E
                ? X && en
                  ? "Save Changes"
                  : "Authorize"
                : X
                  ? "Save Changes"
                  : "Add",
        ex = () => {
          (V(!1), O(null));
        };
      return (0, t.jsxs)("form", {
        onSubmit: eh,
        children: [
          (0, t.jsxs)(r.ModalHeader, {
            className: "flex flex-row items-center gap-2 !pb-3",
            children: [
              (0, t.jsx)(r.ModalTitle, {
                className: "flex-1 pb-1",
                children: X ? "Edit MCP Server" : "Add MCP Server",
              }),
              (0, t.jsx)(l.Tooltip, {
                content:
                  "MCP (Model Context Protocol) servers provide additional tools and context to enhance your chat experience. Connect servers to access external data, APIs, and specialized functionality.",
                children: (0, t.jsx)("div", {
                  className:
                    "p-1.5 rounded hover:bg-v0-gray-200 text-v0-gray-800 hover:text-v0-gray-1000 transition-colors cursor-help flex items-center justify-center",
                  children: (0, t.jsx)(o.Information, {
                    className: "size-[18px]",
                  }),
                }),
              }),
            ],
          }),
          (0, t.jsx)(r.ModalContent, {
            className: "max-h-[90vh] md:max-h-[75vh] overflow-hidden",
            children:
              X || G || K
                ? !X && K && J
                  ? (0, t.jsx)("div", {
                      children: (0, t.jsxs)("div", {
                        className: "flex flex-col gap-4",
                        children: [
                          (0, t.jsxs)("div", {
                            children: [
                              (0, t.jsxs)("h3", {
                                className:
                                  "text-lg font-semibold text-v0-gray-1000 mb-2",
                                children: ["Setup ", J.name],
                              }),
                              (0, t.jsxs)("p", {
                                className: "text-sm text-v0-gray-700",
                                children: [
                                  "Follow these steps to set up your ",
                                  J.name,
                                  " ",
                                  "connection.",
                                ],
                              }),
                            ],
                          }),
                          J.setupGuide,
                        ],
                      }),
                    })
                  : (0, t.jsx)("div", {
                      className: "overflow-y-auto max-h-full",
                      children: (0, t.jsxs)("div", {
                        className: "flex flex-col gap-4",
                        children: [
                          (0, t.jsxs)("div", {
                            className: "flex flex-col gap-2",
                            children: [
                              (0, t.jsx)(a.Label, {
                                htmlFor: "url",
                                children: "URL",
                              }),
                              (0, t.jsx)(s.Input, {
                                id: "url",
                                type: "url",
                                prefixStyling: !0,
                                value: C,
                                placeholder: "https://mcp.website.com/mcp",
                                onChange: (e) => er(e.target.value),
                                disabled: z,
                                required: !0,
                              }),
                            ],
                          }),
                          (0, t.jsxs)("div", {
                            className: "flex flex-col gap-2",
                            children: [
                              (0, t.jsx)(a.Label, {
                                htmlFor: "name",
                                children: "Name",
                              }),
                              (0, t.jsx)(s.Input, {
                                id: "name",
                                placeholder: "Ex. My Custom MCP",
                                value: j,
                                onChange: (e) => ei(e.target.value),
                                disabled: z,
                                required: !0,
                              }),
                            ],
                          }),
                          (0, t.jsxs)("div", {
                            className: "flex flex-col gap-3",
                            children: [
                              (0, t.jsx)(a.Label, {
                                children: "Authentication",
                              }),
                              (0, t.jsx)(c.Tabs, {
                                variant: "secondary",
                                value: E,
                                onValueChange: (e) => A(e),
                                children: (0, t.jsxs)(c.TabsList, {
                                  className: "grid w-full grid-cols-4 h-[28px]",
                                  children: [
                                    (0, t.jsx)(c.TabsTrigger, {
                                      value: "none",
                                      disabled: z,
                                      className: "h-[28px]",
                                      children: "None",
                                    }),
                                    (0, t.jsx)(c.TabsTrigger, {
                                      value: "bearer",
                                      disabled: z,
                                      className: "h-[28px]",
                                      children: "Bearer",
                                    }),
                                    (0, t.jsx)(c.TabsTrigger, {
                                      value: "custom-headers",
                                      disabled: z,
                                      className: "h-[28px]",
                                      children: "Headers",
                                    }),
                                    (0, t.jsx)(c.TabsTrigger, {
                                      value: "oauth",
                                      disabled: z,
                                      className: "h-[28px]",
                                      children: "OAuth",
                                    }),
                                  ],
                                }),
                              }),
                            ],
                          }),
                          _ &&
                            (0, t.jsx)("div", {
                              className:
                                "text-sm text-v0-red-600 px-3 py-2 bg-v0-red-50 rounded-md border border-v0-red-200",
                              children: (0, t.jsx)("div", {
                                className: "font-medium",
                                children: _,
                              }),
                            }),
                          (0, t.jsxs)("div", {
                            className: "min-h-[100px]",
                            children: [
                              "none" === E &&
                                (0, t.jsx)("div", { className: "py-4" }),
                              "oauth" === E &&
                                (0, t.jsx)(p.McpServerOAuthConfig, {
                                  oauthConfig: L,
                                  setOauthConfig: P,
                                  discoveryError: _,
                                  showManualConfig: B,
                                  hasOAuthConfig: em,
                                  needsAuthorization: ef,
                                  isOAuthConnected: en,
                                  isEditing: X,
                                }),
                              "bearer" === E &&
                                (0, t.jsxs)("div", {
                                  className: "flex flex-col gap-2",
                                  children: [
                                    (0, t.jsx)(a.Label, {
                                      htmlFor: "bearerToken",
                                      children: "Bearer Token",
                                    }),
                                    (0, t.jsx)(s.Input, {
                                      id: "bearerToken",
                                      type: "password",
                                      placeholder: "Enter your bearer token",
                                      value: D,
                                      onChange: (e) => I(e.target.value),
                                      disabled: z,
                                      required: !0,
                                    }),
                                  ],
                                }),
                              "custom-headers" === E &&
                                (0, t.jsx)(m.McpServerCustomHeaders, {
                                  customHeaders: M,
                                  onAddHeader: el,
                                  onRemoveHeader: ec,
                                  onHeaderChange: eu,
                                  isSaving: z,
                                }),
                            ],
                          }),
                        ],
                      }),
                    })
                : (0, t.jsx)("div", {
                    className: "h-[540px] md:h-[480px]",
                    children: (0, t.jsx)(h.McpServerPresetView, {
                      onSelectPreset: es,
                      onSelectCustom: eo,
                      connectedServers: g,
                    }),
                  }),
          }),
          K && J
            ? (0, t.jsxs)(r.ModalFooter, {
                children: [
                  (0, t.jsx)(i.Button, {
                    type: "button",
                    onClick: () => {
                      (Y(!1), Q(null));
                    },
                    variant: "outline",
                    children: "Back",
                  }),
                  (0, t.jsx)(i.Button, {
                    type: "button",
                    onClick: ea,
                    children: "Next",
                  }),
                ],
              })
            : (X || G) &&
              (0, t.jsxs)(r.ModalFooter, {
                children: [
                  X && y && !B
                    ? (0, t.jsx)(i.Button, {
                        type: "button",
                        variant: "ghost",
                        onClick: ep,
                        disabled: z || $,
                        className:
                          "text-v0-red-700 hover:text-v0-red-800 hover:bg-v0-red-100 mr-auto",
                        children: $ ? "Deleting..." : "Delete Server",
                      })
                    : null,
                  B &&
                    (0, t.jsx)(i.Button, {
                      type: "button",
                      variant: "ghost",
                      size: "sm",
                      onClick: ex,
                      disabled: z || $,
                      className: "mr-auto",
                      children: " Back",
                    }),
                  (0, t.jsx)(r.ModalClose, {
                    asChild: !0,
                    children: (0, t.jsx)(i.Button, {
                      type: "button",
                      variant: "secondary",
                      size: "sm",
                      disabled: z || $ || R,
                      children: "Cancel",
                    }),
                  }),
                  (0, t.jsx)(i.Button, {
                    type: "submit",
                    size: "sm",
                    disabled: z || $ || R || !j.trim() || !C.trim(),
                    children: eg(),
                  }),
                ],
              }),
        ],
      });
    }
    function x({
      open: e,
      onOpenChange: n,
      server: i,
      allServers: s,
      initialPreset: a,
      onSave: o,
      onDelete: l,
    }) {
      return (0, t.jsx)(r.Modal, {
        open: e,
        onOpenChange: n,
        children: (0, t.jsx)(
          g,
          {
            allServers: s,
            server: i,
            initialPreset: a,
            onSave: o,
            onDelete: l,
            onOpenChange: n,
          },
          i?.mcpServerId || a?.id || "new",
        ),
      });
    }
  },
  81967,
  890623,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "7fb8f455f01791783c6b3f2cf2e787285f6729ec7f",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "createMcpServerAction",
      );
    e.s(["createMcpServerAction", () => n], 81967);
    var r = t,
      i = (0, r.createServerReference)(
        "7f294d04c67758b920b227abdee3451a1c2a2ff9b3",
        r.callServer,
        void 0,
        r.findSourceMapURL,
        "updateMcpServerAction",
      );
    e.s(["updateMcpServerAction", () => i], 890623);
  },
  116844,
  (e) => {
    "use strict";
    var t = e.i(576191);
    e.i(563948);
    var n = e.i(407562);
    e.i(472428);
    var r = e.i(296900),
      i = e.i(81967),
      s = e.i(890623),
      a = e.i(884336),
      o = e.i(53223),
      l = e.i(387040);
    function c({ onClose: e }) {
      let [c, u] = (0, t.useState)(!1),
        [d, h] = (0, t.useState)(null),
        { mutate: p, data: m } = (0, r.useServerQuerySWR)(
          ["scoped", "mcpServers"],
          {},
          { stopFetch: !0 },
        ),
        f = (0, t.useCallback)(
          async (e) => {
            let t = {
                mcpServerId: `temp-${Date.now()}`,
                name: e.name,
                url: e.url,
                description: e.description,
                enabled: e.enabled ?? !0,
                auth: e.auth,
                scope: "user",
                createdAt: Date.now(),
                updatedAt: Date.now(),
              },
              r = await p({
                serverMutate: (0, i.createMcpServerAction)(e),
                optimisticData: m?.ok
                  ? (0, l.ok)({ ...m, data: [...m.value.data, t] })
                  : void 0,
              });
            if (!r.ok)
              return (
                console.error("Failed to create MCP server:", r.error),
                n.toast.error("Failed to create MCP server"),
                null
              );
            let s = r.value.server.mcpServerId;
            return (
              (0, o.track)("CreateMcpServer", { serverId: s, name: e.name }),
              "oauth" !== e.auth.type && n.toast.success("MCP server created"),
              s
            );
          },
          [p, m],
        ),
        g = (0, t.useCallback)(
          async (e, t) => {
            let r = await p({
              serverMutate: (0, s.updateMcpServerAction)({ id: e, ...t }),
              optimisticData: m?.ok
                ? (0, l.ok)({
                    ...m.value,
                    data: m.value.data.map((n) =>
                      n.mcpServerId === e ? { ...n, ...t } : n,
                    ),
                  })
                : void 0,
            });
            if (!r.ok) {
              (console.error("Failed to update MCP server:", r.error),
                n.toast.error("Failed to update MCP server"));
              return;
            }
            ((0, o.track)("UpdateMcpServer", {
              serverId: e,
              name: t.name || "",
            }),
              n.toast.success("MCP server updated"));
          },
          [p, m],
        ),
        x = (0, t.useCallback)(
          async (e) => {
            let t = await p({
              serverMutate: (0, a.deleteMcpServerAction)({ id: e }),
              optimisticData: m?.ok
                ? (0, l.ok)({
                    ...m.value,
                    data: m.value.data.filter((t) => t.mcpServerId !== e),
                  })
                : void 0,
            });
            if (!t.ok) {
              (console.error("Failed to delete MCP server:", t.error),
                n.toast.error("Failed to delete MCP server"));
              return;
            }
            ((0, o.track)("DeleteMcpServer", { serverId: e }),
              n.toast.success("MCP server deleted"));
          },
          [p, m],
        ),
        v = (0, t.useCallback)(() => {
          (h(null),
            u(!0),
            (0, o.track)("OpenMcpServerModal", { mode: "create" }));
        }, []),
        y = (0, t.useCallback)((e) => {
          (h(e),
            u(!0),
            (0, o.track)("OpenMcpServerModal", {
              mode: "edit",
              serverId: e.mcpServerId,
            }));
        }, []),
        b = (0, t.useCallback)(() => {
          (u(!1), h(null), e());
        }, [e]),
        j = (0, t.useCallback)(
          async (e) => (d ? (await g(d.mcpServerId, e), null) : await f(e)),
          [d, f, g],
        ),
        w = (0, t.useCallback)(async () => {
          d && (await x(d.mcpServerId));
        }, [d, x]);
      return {
        isModalOpen: c,
        editingServer: d,
        openCreateModal: v,
        openEditModal: y,
        closeModal: b,
        handleSave: j,
        handleDelete: w,
      };
    }
    e.s(["useMcpServers", () => c]);
  },
  627100,
  310107,
  (e) => {
    "use strict";
    e.s(["ConnectMcpServerDialog", () => l], 627100);
    var t = e.i(324834),
      n = e.i(731721),
      r = e.i(116844),
      i = e.i(393799),
      s = e.i(135080),
      a = e.i(37737),
      o = e.i(576191);
    function l({ preset: e, onConnected: l }) {
      let [c, u] = (0, o.useState)(!0),
        d = (0, s.getMcpServersAtoms)(),
        h = (0, i.useAtomValue)(d.mcpServers),
        { handleSave: p } = (0, r.useMcpServers)({
          onClose: () => {
            (0, a.closeDialog)();
          },
        }),
        m = async (e) => {
          let t = await p(e);
          return (t && l && l(t), t);
        },
        f = (e) => {
          (e || (0, a.closeDialog)(), u(e));
        };
      return (0, t.jsx)(n.McpServerModal, {
        open: c,
        onOpenChange: f,
        server: null,
        allServers: h,
        initialPreset: e,
        onSave: m,
      });
    }
    e.s(["CreateMcpServerDialog", () => g], 310107);
    var c = t,
      u = n,
      d = r,
      h = i,
      p = s,
      m = a,
      f = o;
    function g({ onCreated: e }) {
      let [t, n] = (0, f.useState)(!0),
        r = (0, p.getMcpServersAtoms)(),
        i = (0, h.useAtomValue)(r.mcpServers),
        { handleSave: s } = (0, d.useMcpServers)({
          onClose: () => {
            (0, m.closeDialog)();
          },
        }),
        a = async (t) => {
          let n = await s(t);
          return (n && e && e(n), n);
        },
        o = (e) => {
          (e || (0, m.closeDialog)(), n(e));
        };
      return (0, c.jsx)(u.McpServerModal, {
        open: t,
        onOpenChange: o,
        server: null,
        allServers: i,
        onSave: a,
      });
    }
  },
  265266,
  545102,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(919012),
      r = (0, n.createServerReference)(
        "700f323fe63ef18cbfa59066630a3547bc7bd83e30",
        n.callServer,
        void 0,
        n.findSourceMapURL,
        "updateProjectSettingsIcon",
      ),
      i = e.i(535050),
      s = t,
      a = e.i(304649),
      o = e.i(802094);
    function l({
      icon: e,
      size: t = "sm",
      variant: n = "default",
      className: r,
    }) {
      return (0, s.jsx)("div", {
        className: (0, a.cn)(
          "bg-v0-background-300 relative flex size-8 shrink-0 items-center justify-center text-v0-gray-900 after:absolute after:inset-0 after:mix-blend-darken dark:after:mix-blend-lighten",
          {
            "size-5 rounded-sm after:rounded-sm [&>svg]:size-2.5 text-base after:border":
              "xs" === t,
            "size-8 rounded-lg after:rounded-lg [&>svg]:size-4 text-base after:border":
              "sm" === t,
            "size-12 rounded-xl after:rounded-xl [&>svg]:size-4 text-xl shadow-sm":
              "lg" === t,
          },
          "menu-item" === n &&
            "size-4 bg-transparent text-v0-gray-900 after:hidden group-hover:text-v0-gray-1000 group-focus:text-v0-gray-1000 [&>svg]:size-4",
          r,
        ),
        children: (0, s.jsx)(o.IconPickerIcon, { name: e }),
      });
    }
    e.s(["ProjectIcon", () => l], 545102);
    var c = e.i(176248),
      u = e.i(762585),
      d = a,
      h = e.i(563261),
      p = e.i(576191),
      m = e.i(118376);
    let f = (0, h.default)(() => e.A(343828).then((e) => e.IconPicker), {
        loadableGenerated: { modules: [970863] },
        loading: () =>
          (0, t.jsx)(u.Skeleton, { className: "size-12 rounded-xl" }),
      }),
      g = (0, h.default)(() => e.A(343828).then((e) => e.IconPickerContent), {
        loadableGenerated: { modules: [970863] },
        loading: () => (0, t.jsx)(i.IconPickerSkeleton, {}),
      });
    function x({
      projectId: e,
      icon: n,
      color: i,
      size: s = "lg",
      readOnly: a,
      isNewPage: o = !1,
      onSelect: u,
      random: h,
    }) {
      let [x, v] = (0, p.useState)(!1),
        [y, b] = (0, p.useState)(!1),
        [j, w] = (0, p.useState)({
          name: (0, m.cleanIconName)(n),
          color: i ?? "",
        });
      return (
        (0, p.useEffect)(() => {
          w({ name: (0, m.cleanIconName)(n), color: i ?? "" });
        }, [n, i]),
        (0, t.jsx)(f, {
          random: h,
          icon: j,
          onValueChange: (t) => {
            (u && u(t.name),
              w(t),
              b(!0),
              o ||
                (0, p.startTransition)(() => {
                  r(e, t.name, t.color);
                }));
          },
          trigger: (0, t.jsx)(c.Button, {
            className: (0, d.cn)(
              "aspect-square p-0",
              "xs" === s && "size-5 rounded-sm",
              "sm" === s && "size-8 rounded-lg",
              "lg" === s && "size-12 rounded-xl",
            ),
            "data-testid": "project-icon-picker",
            disabled: a,
            onFocus: () => b(!!y),
            onMouseEnter: () => b(!1),
            tooltip: a
              ? void 0
              : { open: !y && x, onOpenChange: v, content: "Change icon" },
            variant: "ghost",
            children: (0, t.jsx)(l, {
              color: j.color,
              icon: j.name,
              size: "lg",
            }),
          }),
          children: (0, t.jsx)(g, {}),
        })
      );
    }
    e.s(["ProjectIconPicker", () => x], 265266);
  },
  912821,
  582105,
  (e) => {
    "use strict";
    e.s(["ProjectPageTitle", () => f], 912821);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(403055),
      i = e.i(602544),
      s = e.i(592885),
      a = e.i(73600),
      o = e.i(176248);
    e.i(563948);
    var l = e.i(407562),
      c = e.i(120485),
      u = e.i(919012),
      d = (0, u.createServerReference)(
        "404da5783474cc34cfe8e7b4da740f8bca74280baa",
        u.callServer,
        void 0,
        u.findSourceMapURL,
        "renameProject",
      );
    e.s(["renameProject", () => d], 582105);
    var h = e.i(226368),
      p = e.i(183673),
      m = e.i(365290);
    function f({
      initialTitle: e,
      projectId: u,
      canEditProjectName: f,
      isFolder: g,
    }) {
      let { projectName: x, updateProjectName: v } = (0, p.useProjectName)(),
        [y, b] = (0, n.useState)(x || e),
        [j, w] = (0, n.useState)(!1),
        [C, k] = (0, n.useState)(!1),
        [S, N] = (0, n.useState)(!1),
        E = (0, h.useRouter)(),
        A = (0, n.useRef)(x || e),
        D = (0, n.useRef)(null);
      ((0, n.useEffect)(() => {
        j || (b(x || e), (A.current = x || e));
      }, [x, e, j]),
        (0, n.useEffect)(() => {
          j && D.current?.focus();
        }, [j]));
      let I = () => {
          f && (w(!0), N(!1), (A.current = y));
        },
        M = () => {
          (w(!1), N(!1), b(A.current));
        };
      async function T(e) {
        k(!0);
        let t = e.get("name"),
          n = A.current;
        if ((w(!1), b(t), t === n)) return void k(!1);
        (v(t), l.toast.success("Renamed project"));
        try {
          let e = await d({ projectId: u, name: t });
          if (!("success" in e) && e.error) throw Error(e.error);
        } catch (e) {
          (v(n),
            b(n),
            w(!0),
            (0, c.handleChatError)(e, E, "Failed to rename project") ||
              l.toast.error("Failed to rename project"));
        }
        k(!1);
      }
      let L = (0, t.jsxs)("div", {
          className: (0, r.cn)("relative z-10 min-w-4", g ? "h-10" : "h-8"),
          children: [
            (0, t.jsx)("input", {
              autoComplete: "off",
              className: (0, r.cn)(
                "absolute inset-0 max-w-96 whitespace-pre border-b font-semibold leading-relaxed tracking-tight focus:border-v0-gray-900! focus:outline-hidden",
                !j && "hidden",
                j && "translate-y-[-1px]",
                g ? "text-heading-32 h-10 " : "text-xl h-8",
              ),
              "data-1p-ignore": !0,
              disabled: !j,
              id: "name",
              name: "name",
              onChange: (e) => b(e.target.value),
              onKeyDown: (e) => {
                "Escape" === e.key && M();
              },
              ref: D,
              value: y,
              maxLength: 100,
            }),
            (0, t.jsx)("button", {
              type: "button",
              disabled: !f,
              onClick: I,
              className: (0, r.cn)(
                "size-fit min-w-0 max-w-72 overflow-hidden truncate text-left text-xl font-semibold leading-relaxed tracking-tight sm:max-w-96",
                f ? "cursor-pointer" : "pointer-events-none",
                j && "invisible",
                g && "text-heading-32 font-semibold",
              ),
              id: "name",
              children: (0, t.jsx)("h1", {
                className: (0, r.cn)(
                  "truncate whitespace-pre tracking-tight",
                  !f && "pointer-event-auto",
                  g && "text-heading-32 font-semibold",
                ),
                children: y,
              }),
            }),
          ],
        }),
        P = j
          ? (0, t.jsx)("div", {
              className: "mb-0.5 mt-px flex gap-2",
              style: {
                ...(0, m.transitionStyles)(["transform", "opacity"]),
                transform: "translateX(0)",
                opacity: 1,
              },
              children: (0, t.jsx)("div", {
                className: (0, r.cn)("relative w-0", g ? "h-10" : "h-8"),
                children: (0, t.jsx)("div", {
                  className: "absolute left-0 top-0 bottom-0",
                  children: (0, t.jsxs)("div", {
                    className: "flex flex-row justify-start",
                    children: [
                      (0, t.jsx)(o.Button, {
                        "aria-label": "Update",
                        className: (0, r.cn)(g ? "size-9" : "size-7"),
                        disabled: C,
                        type: "submit",
                        variant: "ghost",
                        children: (0, t.jsx)(i.Check, {
                          className: (0, r.cn)(g ? "size-5" : "size-4"),
                        }),
                      }),
                      (0, t.jsx)("div", {
                        className: (0, r.cn)(
                          g ? "h-10" : "h-8",
                          "relative w-0",
                        ),
                        children: (0, t.jsx)("div", {
                          className: "absolute left-0 top-0 bottom-0",
                          children: (0, t.jsx)("div", {
                            children: (0, t.jsx)(o.Button, {
                              "aria-label": "Cancel",
                              className: (0, r.cn)(g ? "size-9" : "size-7"),
                              onClick: M,
                              onTouchStart: M,
                              type: "button",
                              variant: "ghost",
                              children: (0, t.jsx)(s.Cross, {
                                className: (0, r.cn)(g ? "size-5" : "size-4"),
                              }),
                            }),
                          }),
                        }),
                      }),
                    ],
                  }),
                }),
              }),
            })
          : (0, t.jsx)("div", {
              className: (0, r.cn)(g ? "h-10" : "h-8"),
              children: (0, t.jsx)(o.Button, {
                "aria-label": "Edit Project Name",
                className: (0, r.cn)(
                  "absolute mb-0.5 mt-px",
                  g ? "size-9" : "size-7",
                  g ? "-right-9" : "-right-7",
                  !S && "pointer-events-none",
                ),
                onClick: I,
                type: "button",
                variant: "ghost",
                inert: !S,
                style: {
                  ...(0, m.transitionStyles)(["opacity", "transform"]),
                  opacity: +!!S,
                  transform: `translateX(${S ? 0 : -28}px)`,
                },
                children: (0, t.jsx)(a.Pencil, {
                  className: (0, r.cn)(g ? "size-4.5" : "size-3.5"),
                }),
              }),
            });
      return (0, t.jsx)("form", {
        "data-is-editing": j,
        className: (0, r.cn)("peer", S && "pr-9", g && "pr-12"),
        onSubmit: async (e) => {
          e.preventDefault();
          let t = new FormData(e.currentTarget);
          await T(t);
        },
        onBlur: (e) => {
          !e.currentTarget.contains(e.relatedTarget) &&
            j &&
            e.currentTarget.requestSubmit();
        },
        onMouseEnter: () => {
          f && N(!0);
        },
        onMouseLeave: () => N(!1),
        children: (0, t.jsxs)("div", {
          className: (0, r.cn)(
            "relative flex items-center gap-2",
            !j && "mb-[3px]",
          ),
          children: [L, P],
        }),
      });
    }
  },
  27e3,
  (e) => {
    "use strict";
    e.s(["ProjectNameInput", () => D, "default", () => L], 27e3);
    var t = e.i(324834),
      n = e.i(576191),
      r = t,
      i = e.i(176248),
      s = e.i(654335),
      a = e.i(576949),
      o = e.i(66990),
      l = e.i(265266),
      c = e.i(118376),
      u = e.i(230766),
      d = e.i(912821);
    function h({ project: e, canMakeProjectUpdates: t, projectAuthorData: n }) {
      return e && n
        ? (0, r.jsx)("header", {
            className: "w-full px-4 pb-2 pt-9",
            children: (0, r.jsx)("div", {
              className: "mx-auto w-full max-w-(--breakpoint-md)",
              children: (0, r.jsxs)("div", {
                className: "flex flex-col items-start gap-3",
                children: [
                  (0, r.jsx)(l.ProjectIconPicker, {
                    color: e.color,
                    readOnly: !t,
                    icon: (0, c.cleanIconName)(e.icon),
                    projectId: e.projectId,
                  }),
                  (0, r.jsxs)("div", {
                    className: "flex flex-col items-start gap-1",
                    children: [
                      (0, r.jsx)(d.ProjectPageTitle, {
                        canEditProjectName: t,
                        initialTitle: e.name,
                        projectId: e.projectId,
                      }),
                      (0, r.jsxs)("div", {
                        className: "flex items-center gap-1",
                        children: [
                          (0, r.jsx)(u.AvatarUser, {
                            size: "xs",
                            userId: n.id,
                          }),
                          (0, r.jsx)("span", {
                            className: "text-sm font-medium text-v0-gray-900",
                            children: n.username ?? "Vercel User",
                          }),
                        ],
                      }),
                    ],
                  }),
                ],
              }),
            }),
          })
        : (0, r.jsx)(p, {});
    }
    function p() {
      return (0, r.jsx)("header", {
        className:
          "bg-v0-background-100 grid auto-rows-min gap-4 border-b p-4 sm:p-6",
        children: (0, r.jsxs)("div", {
          className: "mx-auto w-full",
          children: [
            (0, r.jsxs)("div", {
              className: "flex h-8 items-center gap-2 sm:h-auto",
              children: [
                (0, r.jsx)(o.Separator, {
                  className: "bg-v0-alpha-400 mr-2 h-6 sm:hidden",
                  orientation: "vertical",
                }),
                (0, r.jsx)(i.Button, {
                  asChild: !0,
                  className: "font-normal text-v0-gray-900",
                  size: "sm",
                  variant: "link",
                  children: (0, r.jsxs)(s.default, {
                    href: "/chat/projects",
                    prefetch: !0,
                    children: [
                      (0, r.jsx)(a.ArrowLeft, { className: "size-4" }),
                      (0, r.jsx)("span", { children: "All Projects" }),
                    ],
                  }),
                }),
              ],
            }),
            (0, r.jsxs)("div", {
              className: "flex flex-col items-start justify-center gap-3 pt-4",
              children: [
                (0, r.jsx)("h1", {
                  className: "text-xl font-semibold",
                  children: "New Project",
                }),
                (0, r.jsx)("p", {
                  className: "text-sm text-v0-gray-900",
                  children:
                    "You can attach resources and files to a project after it's been created.",
                }),
              ],
            }),
          ],
        }),
      });
    }
    var m = e.i(763480),
      f = e.i(216445),
      g = e.i(707974),
      x = e.i(226368),
      v = e.i(304649),
      y = e.i(908431);
    let b = y.z.object({
      name: y.z
        .string()
        .min(2, "Name must be at least 2 characters")
        .max(32, "Name cannot be longer than 32 characters"),
      description: y.z
        .string()
        .max(5e3, "Description cannot be longer than 5000 characters")
        .optional(),
      instructions: y.z
        .string()
        .max(5e3, "Context cannot be longer than 5000 characters")
        .optional(),
    });
    var j = e.i(589910),
      w = e.i(854329);
    e.i(563948);
    var C = e.i(407562),
      k = e.i(211976),
      S = l,
      N = e.i(51940),
      E = e.i(667660),
      A = e.i(538553);
    let D = ({
        name: e,
        onChange: n,
        errors: r,
        placeholder: i = "New sidebar",
        disabled: s = !1,
      }) =>
        (0, t.jsx)("div", {
          className: "grid gap-2",
          children: (0, t.jsx)(m.Input, {
            label: "Name",
            autoComplete: "off",
            disabled: s,
            id: "name",
            maxLength: 32,
            minLength: 2,
            name: "name",
            onChange: n,
            placeholder: i,
            required: !0,
            value: e,
            error: r?.name?.[0],
            showErrorMessage: !1,
          }),
        }),
      I = ({ description: e, onChange: n, errors: r, disabled: i }) =>
        (0, t.jsxs)("div", {
          className: "grid gap-2",
          children: [
            (0, t.jsx)(g.Label, {
              className: (0, v.cn)(r?.description && "text-v0-red-700"),
              htmlFor: "description",
              children: "Description (optional)",
            }),
            (0, t.jsxs)("div", {
              className: "relative",
              children: [
                (0, t.jsx)(f.Textarea, {
                  asChild: !0,
                  children: (0, t.jsx)(N.ResizableTextArea, {
                    autoComplete: "off",
                    className: (0, v.cn)(
                      "pb-8",
                      r?.description && "border-v0-red-700",
                    ),
                    id: "description",
                    maxLength: 5e3,
                    name: "description",
                    onChange: n,
                    placeholder:
                      "Describe what this project is going to be used for...",
                    value: e,
                    minHeight: 120,
                    maxHeight: 384,
                    disabled: i,
                  }),
                }),
                (0, t.jsx)(j.InputCounter, {
                  className: "absolute inset-x-1 bottom-2.5",
                  count: e.length,
                  max: 5e3,
                  message: "Description cannot be longer than 500 characters",
                  messageThreshold: 5e3,
                }),
              ],
            }),
            r?.description &&
              (0, t.jsx)("p", {
                className: "text-xs text-v0-red-700",
                children: r.description[0],
              }),
          ],
        }),
      M = ({ instructions: e, onChange: n, errors: r, disabled: i }) =>
        (0, t.jsxs)("div", {
          children: [
            (0, t.jsxs)("div", {
              className: "grid gap-2",
              children: [
                (0, t.jsx)("div", {
                  className: "flex items-center gap-2",
                  children: (0, t.jsx)(g.Label, {
                    className: (0, v.cn)(r?.instructions && "text-v0-red-700"),
                    htmlFor: "instructions",
                    children: "Context (optional)",
                  }),
                }),
                (0, t.jsxs)("div", {
                  className: "relative",
                  children: [
                    (0, t.jsx)(f.Textarea, {
                      asChild: !0,
                      children: (0, t.jsx)(N.ResizableTextArea, {
                        autoComplete: "off",
                        className: (0, v.cn)(
                          "pb-4",
                          r?.instructions && "border-v0-red-700",
                        ),
                        id: "instructions",
                        maxLength: 5e3,
                        name: "instructions",
                        onChange: n,
                        placeholder: "We're building a new sidebar for...",
                        value: e,
                        minHeight: 120,
                        maxHeight: 384,
                        disabled: i,
                      }),
                    }),
                    (0, t.jsx)(j.InputCounter, {
                      className: "absolute inset-x-1 bottom-2.5",
                      count: e.length,
                      max: 5e3,
                      message:
                        "For larger context, consider using sources on the project page.",
                      messageThreshold: 5e3,
                    }),
                  ],
                }),
                r?.instructions &&
                  (0, t.jsx)("p", {
                    className: "text-xs text-v0-red-700",
                    children: r.instructions[0],
                  }),
              ],
            }),
            (0, t.jsx)(g.Label, {
              className: "text-v0-gray-900",
              children:
                "Guidelines or instructions the model will use to generate better responses to prompts.",
            }),
          ],
        }),
      T = ({ formData: e, disabled: n }) => {
        let r = e.name.trim().length > 0;
        return (0, t.jsx)(k.FormSpinnerButton, {
          className: "self-start",
          disabled: !r || n,
          size: "sm",
          type: "submit",
          "data-testid": "create-project-button",
          children: "Create Project",
        });
      };
    function L({ randomIcon: e }) {
      let { hasVercelWritePermission: r } = (0, E.useActiveScope)(),
        [i, s] = (0, n.useState)({}),
        [a, o] = (0, n.useState)({
          name: "",
          description: "",
          instructions: "",
          icon: e,
        }),
        [l, c] = (0, n.useTransition)(),
        u = (0, x.useRouter)(),
        d = (0, n.useCallback)((e) => {
          let { name: t, value: n } = e.target;
          o((e) => ({ ...e, [t]: n }));
        }, []),
        p = (0, n.useCallback)(
          (e) => {
            if ((e.preventDefault(), !r)) return;
            s({});
            let { name: t, description: n, instructions: i, icon: o } = a,
              l = b.safeParse({
                name: t,
                description: n,
                instructions: i,
                icon: o,
              });
            l.success
              ? c(async () => {
                  let e = await (0, w.newProjectAction)({
                    name: t,
                    description: n,
                    instructions: i,
                    icon: o,
                  });
                  e.ok
                    ? (C.toast.success("Project created successfully"),
                      u.push(`/chat/projects/${e.value.id}`))
                    : s(
                        "fieldErrors" in e.error
                          ? e.error.fieldErrors
                          : { name: [e.error.message] },
                      );
                })
              : s(l.error.flatten().fieldErrors);
          },
          [a, u, r],
        );
      return (0, t.jsxs)("div", {
        className: "bg-v0-background-100 flex min-h-screen flex-col",
        children: [
          (0, t.jsx)(h, { canMakeProjectUpdates: !0 }),
          (0, t.jsx)("main", {
            className:
              "bg-v0-background-100 flex flex-1 flex-col overflow-auto p-4 sm:p-6",
            children: (0, t.jsx)("div", {
              className:
                "grid flex-1 auto-rows-min gap-4 lg:grid-cols-[600px_1fr] lg:gap-x-6 xl:gap-x-9",
              children: (0, t.jsxs)("form", {
                className: "flex flex-col gap-6",
                onSubmit: p,
                children: [
                  (0, t.jsx)(A.RbacTooltip, {
                    show: !r,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(S.ProjectIconPicker, {
                      onSelect: (e) => o((t) => ({ ...t, icon: e })),
                      isNewPage: !0,
                      color: null,
                      readOnly: !r,
                      icon: e,
                      projectId: "",
                    }),
                  }),
                  (0, t.jsx)(A.RbacTooltip, {
                    show: !r,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(D, {
                      errors: i,
                      name: a.name,
                      onChange: d,
                      disabled: !r,
                    }),
                  }),
                  (0, t.jsx)(A.RbacTooltip, {
                    show: !r,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(I, {
                      description: a.description,
                      errors: i,
                      onChange: d,
                      disabled: !r,
                    }),
                  }),
                  (0, t.jsx)(A.RbacTooltip, {
                    show: !r,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(M, {
                      errors: i,
                      instructions: a.instructions,
                      onChange: d,
                      disabled: !r,
                    }),
                  }),
                  (0, t.jsx)(A.RbacTooltip, {
                    show: !r,
                    requiredRole: "V0Builder",
                    children: (0, t.jsx)(T, {
                      formData: a,
                      isPending: l,
                      disabled: !r,
                    }),
                  }),
                ],
              }),
            }),
          }),
        ],
      });
    }
  },
  904347,
  626119,
  443148,
  (e) => {
    "use strict";
    e.s(["SuspendingDialogs", () => tC], 904347);
    var t = e.i(324834),
      n = e.i(37737),
      r = e.i(393799),
      i = e.i(576191),
      s = e.i(261825),
      a = e.i(228520),
      o = e.i(3156),
      l = e.i(867751),
      c = e.i(652461),
      u = e.i(368387),
      d = e.i(329046),
      h = e.i(5894),
      p = e.i(561200),
      m = e.i(388769),
      f = e.i(886058),
      g = e.i(741888),
      x = e.i(688371),
      v = e.i(926923),
      y = e.i(632393),
      b = e.i(851658),
      j = e.i(511969),
      w = e.i(642969),
      C = e.i(485614),
      k = e.i(146179),
      S = e.i(226368),
      N = e.i(32170),
      E = e.i(648096);
    e.i(563948);
    var A = e.i(407562),
      D = e.i(323194),
      I = e.i(70772),
      M = e.i(199814),
      T = e.i(331193),
      L = e.i(443283),
      P = e.i(565135),
      R = e.i(687639),
      F = e.i(175807),
      _ = e.i(292750),
      O = e.i(625815),
      B = e.i(477306),
      V = e.i(41569),
      z = e.i(416577),
      H = e.i(55437),
      $ = e.i(255707),
      U = e.i(166867),
      G = e.i(494563),
      W = e.i(775846),
      q = e.i(446095),
      Z = e.i(328454),
      K = e.i(425511),
      Y = e.i(605624),
      J = e.i(621983),
      Q = e.i(549024),
      X = e.i(627100),
      ee = e.i(310107);
    e.s(["QuickProjectCreateModal", () => eg], 626119);
    var et = t,
      en = e.i(176248),
      er = i,
      ei = e.i(297239),
      es = e.i(307778),
      ea = e.i(27e3),
      eo = e.i(686832),
      el = e.i(921),
      ec = e.i(92479),
      eu = e.i(316808),
      ed = S,
      eh = e.i(667660),
      ep = e.i(538553),
      em = n,
      ef = e.i(120945);
    function eg({ onProjectCreated: e } = {}) {
      let { hasVercelWritePermission: t } = (0, eh.useActiveScope)(),
        { chatId: n } = (0, ec.useChatId)(),
        r = (0, ed.useRouter)(),
        [i, s] = (0, er.useState)({}),
        [a, o] = (0, er.useState)(""),
        [l, c] = (0, er.useState)(!1),
        u = (0, ei.useT)(),
        d = (0, er.useCallback)(
          (e) => {
            n
              ? (0, eu.assignProjectToChat)({ chatId: n, projectId: e })
              : r.push(`/chat/projects/${e}`);
          },
          [n, r],
        ),
        h = (0, er.useCallback)(
          async (r) => {
            if ((r.preventDefault(), !t)) return;
            (s({}), c(!0));
            let i = await (0, el.createProject)({
              projectName: a,
              chatId: n,
              onSuccess: (t) => {
                (d(t), e?.({ id: t, name: a }), (0, em.closeDialog)(), o(""));
              },
            });
            (i.ok || s({ name: [i.error] }), c(!1));
          },
          [a, n, d, e, t],
        );
      return (0, et.jsxs)(ef.AtomicDialog, {
        type: "quickProjectCreate",
        children: [
          (0, et.jsx)(eo.ModalHeader, {
            children: (0, et.jsx)(eo.ModalTitle, {
              children: u("quickProjectCreateDialog.title"),
            }),
          }),
          (0, et.jsx)(eo.ModalContent, {
            children: (0, et.jsx)("form", {
              className: "flex flex-col gap-6",
              onSubmit: h,
              children: (0, et.jsx)(ep.RbacTooltip, {
                show: !t,
                requiredRole: "V0Builder",
                children: (0, et.jsx)(ea.ProjectNameInput, {
                  name: a,
                  onChange: (e) => o(e.target.value),
                  errors: i,
                  placeholder: u("quickProjectCreateDialog.inputPlaceholder"),
                  disabled: l || !t,
                }),
              }),
            }),
          }),
          (0, et.jsxs)(eo.ModalFooter, {
            children: [
              (0, et.jsx)(eo.ModalClose, {
                asChild: !0,
                children: (0, et.jsx)(en.Button, {
                  size: "sm",
                  variant: "secondary",
                  onClick: em.closeDialog,
                  children: u("quickProjectCreateDialog.cancel"),
                }),
              }),
              (0, et.jsx)(ep.RbacTooltip, {
                show: !t,
                requiredRole: "V0Builder",
                children: (0, et.jsx)(en.Button, {
                  "data-testid": "confirm-delete-message",
                  disabled: l || !t,
                  onClick: h,
                  size: "sm",
                  children: l
                    ? (0, et.jsxs)(et.Fragment, {
                        children: [
                          (0, et.jsx)(es.IconSpinner, { className: "size-4" }),
                          u("quickProjectCreateDialog.creating"),
                        ],
                      })
                    : u("quickProjectCreateDialog.create"),
                }),
              }),
            ],
          }),
        ],
      });
    }
    var ex = t,
      ev = i,
      ey = ef,
      eb = n,
      ej = en,
      ew = t,
      eC = t,
      ek = e.i(278875),
      eS = e.i(70165),
      eN = eo;
    function eE({ children: e, staticImageLight: t, staticImageDark: n }) {
      let r = (0, eS.useIsMobile)(),
        i = (0, ek.useReducedMotion)(),
        s = (r || i) && t && n;
      return (0, eC.jsx)("div", {
        className: "flex p-6",
        children: (0, eC.jsx)("div", {
          className:
            "w-full bg-v0-alpha-100 rounded-lg border border-v0-alpha-200 overflow-hidden relative",
          style: { aspectRatio: "492 / 320" },
          children: s
            ? (0, eC.jsxs)(eC.Fragment, {
                children: [
                  (0, eC.jsx)("img", {
                    src: t,
                    alt: "",
                    className:
                      "w-full h-full object-cover absolute inset-0 dark:hidden",
                  }),
                  (0, eC.jsx)("img", {
                    src: n,
                    alt: "",
                    className:
                      "w-full h-full object-cover absolute inset-0 hidden dark:block",
                  }),
                ],
              })
            : e,
        }),
      });
    }
    function eA({ children: e }) {
      return (0, eC.jsx)(eN.ModalHeader, {
        className: "flex flex-col gap-3 items-start !pt-0",
        children: e,
      });
    }
    function eD({ children: e }) {
      return (0, eC.jsx)(eN.ModalTitle, {
        className: "!text-heading-24",
        children: e,
      });
    }
    function eI({ children: e }) {
      return (0, eC.jsx)(eN.ModalDescription, {
        className: "text-start !text-label-14 text-v0-gray-1000",
        children: e,
      });
    }
    var eM = t,
      eT = i,
      eL = e.i(657736),
      eP = e.i(93089),
      eR = e.i(244008),
      eF = e.i(6644);
    let e_ = (0, e.i(751660).withNewIcon)(`
<path fill="none" d="M4.43164 1.79968C4.46934 1.73921 4.55747 1.73978 4.59473 1.80066L7.22852 6.10437C7.24138 6.12549 7.24413 6.14064 7.24414 6.15222C7.24415 6.16629 7.24019 6.1837 7.23047 6.20105C7.22078 6.2183 7.20824 6.23083 7.19629 6.23816C7.18636 6.24422 7.17142 6.24988 7.14648 6.24988H1.85938C1.83436 6.24988 1.81948 6.24422 1.80957 6.23816C1.79764 6.23083 1.78507 6.21831 1.77539 6.20105C1.76573 6.18374 1.76172 6.16625 1.76172 6.15222C1.76176 6.14061 1.76421 6.12469 1.77734 6.10339L4.43164 1.79968Z" stroke="currentColor" stroke-width="1.5"/>
<path fill="none" d="M7 11.75C7 10.3693 5.88071 9.25 4.5 9.25C3.11929 9.25 2 10.3693 2 11.75C2 13.1307 3.11929 14.25 4.5 14.25C5.88071 14.25 7 13.1307 7 11.75Z" stroke="currentColor" stroke-width="1.5"/>
<path fill="none" d="M13.4969 1.75466H10.5031C10.0898 1.75466 9.75467 2.08975 9.75467 2.50311V5.49689C9.75467 5.91025 10.0898 6.24534 10.5031 6.24534H13.4969C13.9103 6.24534 14.2453 5.91025 14.2453 5.49689V2.50311C14.2453 2.08975 13.9103 1.75466 13.4969 1.75466Z" stroke="currentColor" stroke-width="1.5"/>
<path fill="none" d="M12 12L15 10.5L9 9L10.5 15L12 12ZM12 12L14 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
`);
    e.s(["DesignSystemsIcon", 0, e_], 443148);
    var eO = e.i(877318);
    let eB = (0, eO.withNewIcon)(`
    <g clip-path="url(#clip0_2228_4371)" fill="none">
      <path d="M2.19418 11.0392C2.29711 11.2988 2.32003 11.5833 2.25998 11.8561L1.51448 14.1591C1.49046 14.2759 1.49667 14.3969 1.53253 14.5106C1.56838 14.6243 1.63269 14.727 1.71935 14.8089C1.80601 14.8908 1.91216 14.9492 2.02772 14.9785C2.14329 15.0079 2.26444 15.0073 2.37968 14.9767L4.76878 14.2781C5.02618 14.227 5.29275 14.2493 5.53808 14.3425C7.03285 15.0405 8.72613 15.1882 10.3192 14.7595C11.9122 14.3307 13.3027 13.3531 14.2452 11.9991C15.1877 10.6451 15.6217 9.00176 15.4706 7.35896C15.3195 5.71616 14.5931 4.17951 13.4194 3.02012C12.2458 1.86073 10.7004 1.15311 9.05584 1.02211C7.41132 0.891114 5.77337 1.34515 4.43099 2.30412C3.08861 3.26309 2.12805 4.66536 1.71881 6.26353C1.30956 7.86169 1.47792 9.55304 2.19418 11.0392Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </g>
    <defs>
      <clipPath id="clip0_2228_4371">
        <rect width="16" height="16" fill="currentColor" transform="translate(0.5)"/>
      </clipPath>
    </defs>`);
    function eV({ pulse: e, className: t }) {
      return (0, eM.jsx)(eL.motion.div, {
        className: t,
        animate: {
          backgroundColor: e ? "var(--v0-gray-700)" : "var(--v0-gray-500)",
        },
        transition: { duration: 0.3 },
      });
    }
    function ez() {
      let [e, t] = (0, eT.useState)(!1),
        [n, r] = (0, eT.useState)(!1);
      return (
        (0, eT.useEffect)(() => {
          let e = null,
            n = setTimeout(() => {
              (t(!0), r(!0), (e = setTimeout(() => r(!1), 400)));
            }, 500);
          return () => {
            (clearTimeout(n), e && clearTimeout(e));
          };
        }, []),
        (0, eM.jsxs)("div", {
          className: "flex flex-col h-full",
          children: [
            (0, eM.jsx)("div", {
              className: "flex flex-col bg-v0-background-200",
              children: (0, eM.jsxs)("div", {
                className: "p-1.5 flex justify-between items-center",
                children: [
                  (0, eM.jsxs)("svg", {
                    width: "24",
                    height: "20",
                    viewBox: "0 0 24 20",
                    fill: "none",
                    xmlns: "http://www.w3.org/2000/svg",
                    className: "text-v0-gray-1000",
                    children: [
                      (0, eM.jsx)("path", {
                        d: "M9.61905 12.0685V7.14286H11.5238V13.4226C11.5238 14.1623 10.9242 14.7619 10.1845 14.7619C9.83136 14.7619 9.48275 14.6258 9.23214 14.3751L2 7.14286H4.69345L9.61905 12.0685Z",
                        fill: "currentColor",
                      }),
                      (0, eM.jsx)("path", {
                        d: "M22 12.8571H20.0952V8.49703L15.7351 12.8571H20.0952V14.7619H15.1548C13.6754 14.7619 12.4762 13.5627 12.4762 12.0833V7.14286H14.381V11.5179L18.756 7.14286H14.381V5.2381H19.3214C20.8008 5.2381 22 6.43734 22 7.91667V12.8571Z",
                        fill: "currentColor",
                      }),
                    ],
                  }),
                  (0, eM.jsxs)("div", {
                    className: "flex gap-1 items-center",
                    children: [
                      (0, eM.jsx)("div", {
                        className: "w-10 h-4 rounded-sm bg-v0-gray-200",
                      }),
                      (0, eM.jsx)("div", {
                        className: "w-10 h-4 rounded-sm bg-v0-gray-200",
                      }),
                    ],
                  }),
                ],
              }),
            }),
            (0, eM.jsxs)("div", {
              className: "flex flex-1 bg-v0-background-200 pl-1 pr-1.5 h-full",
              children: [
                (0, eM.jsxs)("div", {
                  className: "flex flex-col gap-3 h-full p-1",
                  children: [
                    (0, eM.jsx)("button", {
                      className:
                        "flex size-5 items-center justify-center rounded-sm hover:bg-v0-gray-100 text-v0-gray-600",
                      children: (0, eM.jsx)(eB, { className: "size-3.5" }),
                    }),
                    (0, eM.jsx)("button", {
                      className:
                        "flex size-5 items-center justify-center rounded-sm hover:bg-v0-gray-100 text-v0-gray-600",
                      children: (0, eM.jsx)(e_, { className: "size-3.5" }),
                    }),
                    (0, eM.jsx)("button", {
                      className: `flex size-5 items-center justify-center rounded-sm hover:bg-v0-gray-100 ${e ? "bg-v0-alpha-400 text-v0-gray-1000" : "text-v0-gray-600"}`,
                      children: (0, eM.jsx)(eP.LogoGithub, {
                        className: "size-3.5",
                      }),
                    }),
                    (0, eM.jsx)("button", {
                      className:
                        "flex size-5 items-center justify-center rounded-sm hover:bg-v0-gray-100 text-v0-gray-600",
                      children: (0, eM.jsx)(eF.SecureConnection, {
                        className: "size-3.5",
                      }),
                    }),
                    (0, eM.jsx)("button", {
                      className:
                        "flex size-5 items-center justify-center rounded-sm hover:bg-v0-gray-100 text-v0-gray-600",
                      children: (0, eM.jsx)(eR.SettingsGear, {
                        className: "size-3.5",
                      }),
                    }),
                  ],
                }),
                e &&
                  (0, eM.jsxs)(eL.motion.div, {
                    className:
                      "rounded-t-md bg-v0-background-300 h-full ml-0.5 overflow-hidden border-t border-l border-r",
                    initial: { width: 0, opacity: 0 },
                    animate: {
                      width: 150,
                      opacity: 1,
                      borderColor: n
                        ? "var(--v0-blue-600)"
                        : "var(--v0-gray-300)",
                    },
                    transition: { duration: 0.15, ease: [0.22, 1, 0.36, 1] },
                    children: [
                      (0, eM.jsxs)("div", {
                        className: "p-2 flex flex-col gap-3",
                        children: [
                          (0, eM.jsxs)("div", {
                            className: "flex flex-col gap-2",
                            children: [
                              (0, eM.jsxs)("div", {
                                className: "flex justify-between items-center",
                                children: [
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-[25px]",
                                  }),
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-11",
                                  }),
                                ],
                              }),
                              (0, eM.jsxs)("div", {
                                className: "flex justify-between items-center",
                                children: [
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-[25px]",
                                  }),
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-[54px]",
                                  }),
                                ],
                              }),
                              (0, eM.jsxs)("div", {
                                className: "flex justify-between items-center",
                                children: [
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-[25px]",
                                  }),
                                  (0, eM.jsx)(eV, {
                                    pulse: n,
                                    className: "rounded-full h-1.5 w-5",
                                  }),
                                ],
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex flex-col gap-2",
                            children: [
                              (0, eM.jsx)("div", {
                                className:
                                  "bg-v0-background-300 border border-v0-gray-300 rounded-sm h-4 w-full",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-sm h-4 w-full",
                              }),
                            ],
                          }),
                        ],
                      }),
                      (0, eM.jsxs)("div", {
                        className:
                          "p-2 flex flex-col gap-2 border-t border-v0-gray-300 relative",
                        children: [
                          (0, eM.jsx)(eV, {
                            pulse: n,
                            className: "rounded-full h-1.5 w-6",
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[42px]",
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[78px]",
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[39px]",
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[73px]",
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[87px]",
                              }),
                            ],
                          }),
                          (0, eM.jsxs)("div", {
                            className: "flex gap-1",
                            children: [
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full size-1.5",
                              }),
                              (0, eM.jsx)(eV, {
                                pulse: n,
                                className: "rounded-full h-1.5 w-[74px]",
                              }),
                            ],
                          }),
                          (0, eM.jsx)("div", {
                            className:
                              "absolute inset-x-0 bottom-0 h-16 bg-gradient-to-t from-v0-background-300 to-transparent pointer-events-none",
                          }),
                        ],
                      }),
                    ],
                  }),
                (0, eM.jsx)(eL.motion.div, {
                  className:
                    "rounded-t-md bg-v0-background-300 shadow-sm h-full ml-1.5",
                  layout: !0,
                  initial: { width: "100%" },
                  animate: { width: e ? "calc(100% - 126px - 6px)" : "100%" },
                  transition: { duration: 0.15, ease: [0.22, 1, 0.36, 1] },
                }),
              ],
            }),
          ],
        })
      );
    }
    function eH({ onNext: e }) {
      return (0, ew.jsxs)(ew.Fragment, {
        children: [
          (0, ew.jsx)(eE, {
            staticImageLight:
              "/chat-static/assets/new-feature/git-tutorial/step-1-light.png",
            staticImageDark:
              "/chat-static/assets/new-feature/git-tutorial/step-1-dark.png",
            children: (0, ew.jsx)(ez, {}),
          }),
          (0, ew.jsxs)(eA, {
            children: [
              (0, ew.jsx)(eD, { children: "A new, more powerful git panel." }),
              (0, ew.jsx)(eI, {
                children:
                  "The GitHub connection button has moved from the header to the sidebar. Connect your project to GitHub, monitor your target branch, pull changes from remote, and view activity in the new sidepanel.",
              }),
            ],
          }),
        ],
      });
    }
    var e$ = t,
      eU = t,
      eG = i,
      eW = eL,
      eq = e.i(480187);
    function eZ() {
      let [e, t] = (0, eG.useState)(!1);
      return (
        (0, eG.useEffect)(() => {
          let e = setTimeout(() => t(!0), 300);
          return () => clearTimeout(e);
        }, []),
        (0, eU.jsxs)("div", {
          className: "flex flex-col mt-10 border-t border-v0-alpha-400 h-full",
          children: [
            (0, eU.jsxs)("div", {
              className:
                "flex items-center justify-center p-3 bg-v0-background-200 h-12 gap-2 relative",
              children: [
                (0, eU.jsxs)("div", {
                  className: "flex items-center gap-1.5",
                  children: [
                    (0, eU.jsx)(eq.VercelProjectIcon, {
                      className:
                        "size-4 border border-v0-alpha-400 rounded-full",
                    }),
                    (0, eU.jsx)("span", {
                      className:
                        "text-v0-gray-900 text-sm font-medium text-label-14",
                      children: "acme-marketing",
                    }),
                  ],
                }),
                e &&
                  (0, eU.jsx)(eW.motion.div, {
                    className: "absolute top-10 left-12",
                    initial: { opacity: 0, y: -10 },
                    animate: { opacity: 1, y: 0 },
                    transition: { duration: 0.3 },
                    children: (0, eU.jsx)(eY, {
                      className: "text-v0-gray-1000",
                    }),
                  }),
                (0, eU.jsx)(eK, { className: "text-v0-alpha-400" }),
                (0, eU.jsxs)("div", {
                  className: "flex items-center gap-1.5",
                  children: [
                    (0, eU.jsx)(eq.GitBranchSmall, {
                      className: "size-4 !text-v0-gray-900",
                    }),
                    (0, eU.jsx)("span", {
                      className:
                        "text-v0-gray-900 text-sm font-medium text-label-14",
                      children: "your-branch",
                    }),
                  ],
                }),
                e &&
                  (0, eU.jsx)(eW.motion.div, {
                    className: "absolute top-10 right-12",
                    initial: { opacity: 0, y: -10 },
                    animate: { opacity: 1, y: 0 },
                    transition: { duration: 0.3, delay: 0.15 },
                    children: (0, eU.jsx)(eJ, {
                      className: "text-v0-gray-1000",
                    }),
                  }),
              ],
            }),
            (0, eU.jsx)("div", {
              className:
                "bg-v0-background-300 h-full w-full border-t border-v0-alpha-400",
            }),
          ],
        })
      );
    }
    function eK({ className: e }) {
      return (0, eU.jsxs)("svg", {
        width: "8",
        height: "15",
        viewBox: "0 0 8 15",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: [
          (0, eU.jsx)("g", {
            clipPath: "url(#clip0_672_2347)",
            children: (0, eU.jsx)("path", {
              d: "M7.00833 0.875L1.375 13.594",
              stroke: "currentColor",
              strokeWidth: "1.5",
              strokeLinecap: "square",
              strokeLinejoin: "round",
            }),
          }),
          (0, eU.jsx)("defs", {
            children: (0, eU.jsx)("clipPath", {
              id: "clip0_672_2347",
              children: (0, eU.jsx)("rect", {
                width: "8",
                height: "15",
                fill: "currentColor",
              }),
            }),
          }),
        ],
      });
    }
    function eY({ className: e } = {}) {
      return (0, eU.jsx)("svg", {
        width: "143",
        height: "85",
        viewBox: "0 0 143 85",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: (0, eU.jsx)("path", {
          d: "M71.4268 64.0352C71.953 64.0352 72.2158 64.298 72.2158 64.8242C72.2158 65.0709 72.0515 65.3586 71.7227 65.6875C71.3938 65.9999 70.9746 66.3703 70.4648 66.7979C69.9549 67.2255 69.4116 67.7111 68.8359 68.2539C68.2602 68.7803 67.7169 69.3803 67.207 70.0547C66.6972 70.7126 66.2782 71.4531 65.9492 72.2754C65.6202 73.0814 65.4561 73.97 65.4561 74.9404C65.4561 75.9274 65.859 76.4209 66.665 76.4209C67.4051 76.4209 68.1616 76.2806 68.9346 76.001C69.7241 75.7214 70.4973 75.3601 71.2539 74.916C72.027 74.4554 72.7673 73.9778 73.4746 73.4844C74.1818 72.991 74.8238 72.5222 75.3994 72.0781C75.9749 71.6177 76.4598 71.2473 76.8545 70.9678C77.249 70.6884 77.5288 70.549 77.6934 70.5488C78.0223 70.5488 78.1875 70.7299 78.1875 71.0918C78.1873 71.3714 77.9983 71.7418 77.6201 72.2021C77.2418 72.6627 76.7313 73.1642 76.0898 73.707C75.4484 74.2498 74.7328 74.8011 73.9434 75.3604C73.1539 75.9031 72.3557 76.4047 71.5498 76.8652C70.7439 77.3093 69.9706 77.6706 69.2305 77.9502C68.5068 78.2134 67.8818 78.3457 67.3555 78.3457C66.5497 78.3457 65.8508 78.1644 65.2588 77.8027C64.6831 77.4244 64.2383 76.9388 63.9258 76.3467C63.6134 75.7547 63.4571 75.1463 63.457 74.5215C63.457 74.0799 63.4852 73.651 63.5371 73.2354C63.4431 73.3082 63.3473 73.3842 63.2471 73.46C62.5727 73.9534 61.8155 74.4639 60.9766 74.9902C60.1377 75.5165 59.2659 76.0102 58.3613 76.4707C57.4732 76.9312 56.6093 77.3005 55.7705 77.5801C54.9481 77.8597 54.2078 78 53.5498 78C52.6947 78 52.0287 77.6793 51.5518 77.0381C51.0922 76.4201 50.8557 75.4736 50.8389 74.1992C50.3457 74.7666 49.7045 75.3349 48.9131 75.9023C48.0413 76.5109 47.0711 77.112 46.002 77.7041C44.9328 78.2798 43.8302 78.8311 42.6953 79.3574C42.2677 80.7882 41.8158 81.8821 41.3389 82.6387C40.8783 83.4118 40.335 83.9381 39.71 84.2178C39.1014 84.5138 38.3778 84.6621 37.5391 84.6621C36.7331 84.6621 36.0664 84.3984 35.54 83.8721C35.0139 83.3458 34.751 82.7126 34.751 81.9727C34.751 81.397 35.0387 80.9034 35.6143 80.4922C36.1899 80.0975 36.9712 79.7103 37.958 79.332C38.9285 78.9702 39.9981 78.5592 41.166 78.0986C41.4292 77.1282 41.6929 75.96 41.9561 74.5947C42.2192 73.2132 42.5068 71.5849 42.8193 69.71C42.9345 68.756 43.041 68.0156 43.1396 67.4893C43.2383 66.9464 43.3369 66.5594 43.4355 66.3291C43.5342 66.0989 43.6417 65.9595 43.7568 65.9102C43.8883 65.8609 44.0279 65.836 44.1758 65.8359C44.3238 65.8359 44.5139 65.9096 44.7441 66.0576C44.9908 66.2057 45.2128 66.4117 45.4102 66.6748C45.6075 66.938 45.7061 67.2345 45.7061 67.5635C45.706 67.7773 45.6652 68.09 45.583 68.501C45.5172 68.912 45.3937 69.3642 45.2129 69.8574C45.0484 70.3508 44.8095 70.8197 44.4971 71.2637C44.2668 72.448 44.0529 73.5345 43.8555 74.5215C43.6581 75.5083 43.461 76.413 43.2637 77.2354C44.2505 76.7913 45.2208 76.3056 46.1748 75.7793C47.1288 75.253 48.0085 74.6688 48.8145 74.0273C49.6203 73.3695 50.3031 72.6379 50.8623 71.832C50.9488 71.7109 51.0355 71.6209 51.1221 71.5635C51.141 71.4802 51.1608 71.3968 51.1816 71.3135C51.4283 70.3925 51.7569 69.5126 52.168 68.6738C52.5956 67.8185 53.0643 67.0613 53.5742 66.4033C54.1006 65.7289 54.6519 65.2025 55.2275 64.8242C55.8032 64.4295 56.3625 64.2325 56.9053 64.2324C57.9416 64.2324 58.7565 64.52 59.3486 65.0957C59.9407 65.6714 60.2363 66.4287 60.2363 67.3662C60.2362 67.8923 60.0719 68.4102 59.7432 68.9199C59.4142 69.4134 58.9784 69.891 58.4355 70.3516C57.8927 70.7957 57.2917 71.2146 56.6338 71.6094C55.9759 72.0041 55.318 72.3495 54.6602 72.6455C54.0023 72.9415 53.4021 73.1804 52.8594 73.3613C52.7278 74.0027 52.6621 74.5701 52.6621 75.0635C52.6621 75.376 52.7357 75.5989 52.8838 75.7305C53.0318 75.8619 53.2621 75.9277 53.5742 75.9277C54.265 75.9277 54.9975 75.8043 55.7705 75.5576C56.5436 75.3109 57.3336 74.9895 58.1396 74.5947C58.9455 74.2 59.7189 73.781 60.459 73.3369C61.199 72.8929 61.8729 72.4728 62.4814 72.0781C63.1065 71.6834 63.6249 71.3629 64.0361 71.1162C64.051 71.1073 64.0656 71.0984 64.0801 71.0898C64.1028 71.0328 64.1245 70.9754 64.1484 70.9189C64.609 69.8169 65.1841 68.8457 65.875 68.0068C66.5823 67.1516 67.3067 66.4281 68.0469 65.8359C68.8034 65.2439 69.4862 64.7999 70.0947 64.5039C70.7197 64.1914 71.1636 64.0352 71.4268 64.0352ZM40.5 80.2949C39.7598 80.591 39.0354 80.8537 38.3281 81.084C37.6211 81.3306 37.0047 81.5367 36.4785 81.7012C36.6101 82.1122 36.7992 82.392 37.0459 82.54C37.2761 82.7043 37.5801 82.787 37.958 82.7871C38.4679 82.7871 38.9286 82.6219 39.3398 82.293C39.7346 81.964 40.1217 81.2982 40.5 80.2949ZM83.7568 58.2607C83.987 58.2608 84.1682 58.3603 84.2998 58.5576C84.4477 58.7549 84.5215 58.977 84.5215 59.2236C84.5215 59.3552 84.4966 59.4866 84.4473 59.6182C84.1183 60.5393 83.765 61.6746 83.3867 63.0234C83.0084 64.3721 82.6054 65.8441 82.1777 67.4395C83.691 67.1927 85.2045 66.93 86.7178 66.6504C88.231 66.3708 89.5306 66.116 90.6162 65.8857C90.9285 65.7543 91.1666 65.7784 91.3311 65.959C91.5119 66.1399 91.6025 66.3211 91.6025 66.502C91.6025 66.7322 91.5369 66.9054 91.4053 67.0205C91.2902 67.1356 91.1667 67.2342 91.0352 67.3164L91.0107 67.3408C90.6818 67.4724 90.1882 67.6286 89.5303 67.8096C88.8724 67.974 88.1159 68.1552 87.2607 68.3525C86.4054 68.5335 85.492 68.7146 84.5215 68.8955C83.5676 69.0764 82.622 69.2407 81.6846 69.3887C81.3063 70.8361 80.9192 72.3249 80.5244 73.8545C80.1461 75.3676 79.7679 76.8565 79.3896 78.3203C79.2253 78.9121 79.0359 79.2824 78.8223 79.4307C78.6249 79.5951 78.4109 79.6777 78.1807 79.6777C77.9175 79.6777 77.6866 79.5792 77.4893 79.3818C77.3084 79.1844 77.2845 78.7813 77.416 78.1729L79.2168 69.7588C78.2299 69.9068 77.3582 70.0143 76.6016 70.0801C75.8614 70.1459 75.343 70.1538 75.0469 70.1045C74.6029 70.0716 74.3969 69.7838 74.4297 69.2412C74.4461 69.1097 74.5369 68.9533 74.7012 68.7725C74.8656 68.5752 75.0549 68.4677 75.2686 68.4512C75.7785 68.4018 76.4043 68.3282 77.1445 68.2295C77.901 68.1144 78.7314 67.9829 79.6357 67.835C79.8002 67.029 79.9982 66.1812 80.2285 65.293C80.4588 64.4048 80.7136 63.541 80.9932 62.7021C81.2728 61.8469 81.5693 61.0736 81.8818 60.3828C82.1942 59.6923 82.5229 59.1496 82.8682 58.7549C83.0491 58.5739 83.2143 58.4506 83.3623 58.3848C83.5102 58.3026 83.6418 58.2607 83.7568 58.2607ZM27.4736 62.3818C27.9505 62.3819 28.296 62.4804 28.5098 62.6777C28.74 62.8587 28.8555 63.0646 28.8555 63.2949C28.8554 63.6073 28.7231 63.8543 28.46 64.0352C28.2132 64.1996 27.7771 64.3968 27.1523 64.627C26.4287 64.9066 25.7628 65.236 25.1543 65.6143C24.5621 65.9761 23.994 66.4528 23.4512 67.0449C22.925 67.637 22.4072 68.3936 21.8975 69.3145C21.3875 70.2191 20.8771 71.3385 20.3672 72.6709C19.8574 74.0031 19.3149 75.6066 18.7393 77.4814C18.6406 77.8433 18.5082 78.099 18.3438 78.2471C18.1959 78.3948 18.0152 78.4687 17.8018 78.4688C17.5386 78.4688 17.3157 78.3623 17.1348 78.1484C16.9538 77.9346 16.8643 77.6381 16.8643 77.2598C16.8643 76.9801 16.921 76.5194 17.0361 75.8779C17.1677 75.22 17.308 74.4548 17.4561 73.583C17.6205 72.7113 17.7599 71.8066 17.875 70.8691C17.9901 69.9153 18.0478 69.0025 18.0479 68.1309C18.0479 67.7032 18.1553 67.3907 18.3691 67.1934C18.5994 66.9795 18.8542 66.8721 19.1338 66.8721C19.397 66.8721 19.594 67.0372 19.7256 67.3662C19.8571 67.6953 19.882 68.3532 19.7998 69.3398C20.5565 67.662 21.3873 66.3128 22.292 65.293C23.213 64.2568 24.1257 63.5164 25.0303 63.0723C25.935 62.6117 26.7499 62.3818 27.4736 62.3818ZM34.3975 63.6396C35.5324 63.6396 36.4538 64.0516 37.1611 64.874C37.8683 65.68 38.2217 66.914 38.2217 68.5752C38.2216 69.4468 38.0903 70.3348 37.8271 71.2393C37.5804 72.1438 37.2351 73.0157 36.791 73.8545C36.3633 74.6934 35.8618 75.4426 35.2861 76.1006C34.7269 76.7585 34.1259 77.2849 33.4844 77.6797C32.8595 78.0578 32.2263 78.247 31.585 78.2471C30.6145 78.2471 29.8493 77.8768 29.29 77.1367C28.7308 76.3966 28.4512 75.4342 28.4512 74.25C28.4512 73.8223 28.5089 73.3696 28.624 72.8926C28.7556 72.3993 28.9199 71.9552 29.1172 71.5605C29.0021 71.4454 28.9115 71.2891 28.8457 71.0918C28.7799 70.878 28.7471 70.6143 28.7471 70.3018C28.7471 69.3313 28.9122 68.4427 29.2412 67.6367C29.5702 66.8309 30.0061 66.1321 30.5488 65.54C31.0916 64.9315 31.6917 64.4628 32.3496 64.1338C33.024 63.8048 33.7066 63.6397 34.3975 63.6396ZM9.54883 58.1133C10.5358 58.1133 11.3835 58.3849 12.0908 58.9277C12.7979 59.4541 13.3405 60.2025 13.7188 61.1729C14.0971 62.1433 14.2861 63.2867 14.2861 64.6025C14.2861 66.4612 13.8343 67.8514 12.9297 68.7725C12.025 69.6936 10.7334 70.1543 9.05566 70.1543C8.1017 70.1543 7.13936 70.0309 6.16895 69.7842C5.19846 69.521 4.31787 69.1917 3.52832 68.7969C3.26516 69.7344 3.01835 70.7624 2.78809 71.8809C2.5578 72.9994 2.34485 74.2004 2.14746 75.4834C1.96659 76.4042 1.78536 77.0044 1.60449 77.2842C1.42355 77.5638 1.19272 77.7041 0.913086 77.7041C0.633677 77.704 0.411489 77.5725 0.24707 77.3096C0.0825929 77.03 1.2222e-05 76.5114 0 75.7549C0 75.6069 0.0418073 75.2614 0.124023 74.7188C0.206268 74.1759 0.312744 73.5093 0.444336 72.7197C0.592371 71.9138 0.748603 71.05 0.913086 70.1289C1.07756 69.1914 1.24275 68.2539 1.40723 67.3164C1.01246 66.8887 0.814465 66.4857 0.814453 66.1074C0.814453 65.9265 0.864197 65.7534 0.962891 65.5889C1.06161 65.4083 1.26703 65.3175 1.5791 65.3174C1.62839 65.3174 1.68625 65.3264 1.75195 65.3428C1.93289 64.3558 2.08115 63.4753 2.19629 62.7021C2.32785 61.9128 2.40152 61.3454 2.41797 61C2.45085 60.4081 2.56643 59.9969 2.76367 59.7666C2.96106 59.5199 3.19189 59.3965 3.45508 59.3965C3.66876 59.3966 3.84113 59.4871 3.97266 59.668C4.10418 59.8325 4.16991 60.2516 4.16992 60.9258C4.16992 61.3535 4.13709 61.9296 4.07129 62.6533C4.87723 61.0086 5.71617 59.8403 6.58789 59.1494C7.47607 58.4586 8.4633 58.1133 9.54883 58.1133ZM34.7432 65.8359C34.1674 65.8359 33.5665 66.033 32.9414 66.4277C32.3329 66.806 31.8233 67.3246 31.4121 67.9824C31.0009 68.6404 30.7949 69.3807 30.7949 70.2031C30.7949 70.3841 30.779 70.5572 30.7461 70.7217C30.8446 70.8532 30.8935 71.0257 30.8936 71.2393C30.8936 71.4859 30.8447 71.7328 30.7461 71.9795C30.6639 72.2262 30.5733 72.5636 30.4746 72.9912C30.3759 73.4189 30.3262 74.0278 30.3262 74.8174C30.3262 75.6066 30.6389 76.0008 31.2637 76.001C31.9545 76.001 32.5964 75.7302 33.1885 75.1875C33.7806 74.6283 34.307 73.9127 34.7676 73.041C35.2281 72.1693 35.5824 71.2398 35.8291 70.2529C36.0923 69.2495 36.2236 68.3033 36.2236 67.415C36.2236 66.8393 36.1162 66.4363 35.9023 66.2061C35.6885 65.9595 35.3022 65.836 34.7432 65.8359ZM57.0293 66.1074C56.6182 66.1074 56.1821 66.3704 55.7217 66.8965C55.2776 67.4064 54.8497 68.0731 54.4385 68.8955C54.0273 69.718 53.673 70.5737 53.377 71.4619C53.8868 71.1494 54.4133 70.82 54.9561 70.4746C55.4989 70.1292 56.0013 69.7759 56.4619 69.4141C56.9224 69.0522 57.2917 68.6731 57.5713 68.2783C57.8673 67.8672 58.0156 67.4481 58.0156 67.0205C58.0156 66.412 57.687 66.1075 57.0293 66.1074ZM9.74609 60.0625C8.77579 60.0626 7.80526 60.6051 6.83496 61.6904C5.86447 62.7596 4.97592 64.4462 4.16992 66.749C4.79498 67.1109 5.49448 67.4482 6.26758 67.7607C7.04064 68.0568 7.83873 68.2051 8.66113 68.2051C9.99333 68.205 10.9637 67.9085 11.5723 67.3164C12.1973 66.7078 12.5098 65.7287 12.5098 64.3799C12.5097 62.8176 12.2628 61.7077 11.7695 61.0498C11.2761 60.3918 10.6014 60.0625 9.74609 60.0625ZM45.3604 59.6924C45.8207 59.6924 46.1991 59.8319 46.4951 60.1113C46.8076 60.3909 46.9638 60.7532 46.9639 61.1973C46.9639 61.5754 46.8492 61.8961 46.6191 62.1592C46.3889 62.4059 46.0923 62.5293 45.7305 62.5293C45.6483 62.5293 45.5825 62.5213 45.5332 62.5049C45.3029 62.7352 45.1218 62.8834 44.9902 62.9492C44.8587 63.015 44.7103 63.0479 44.5459 63.0479C44.2336 63.0478 43.9706 62.9492 43.7568 62.752C43.543 62.5546 43.4355 62.2252 43.4355 61.7646C43.4356 61.2219 43.6336 60.7452 44.0283 60.334C44.4395 59.9064 44.8834 59.6924 45.3604 59.6924ZM141.661 0C142.213 0 142.661 0.447715 142.661 1C142.661 1.09249 142.662 8.71416 142.614 20.6338C142.598 24.6829 141.899 28.2409 140.157 31.9355C138.426 35.6087 135.684 39.3747 131.649 43.8711C123.494 52.9587 113.205 57.2931 108.441 59.6377C107.465 60.1181 106.687 60.4608 106.075 60.6572C106.055 60.6637 106.034 60.6684 106.014 60.6748C107.225 60.7791 109.019 60.7284 111.468 60.543C114.47 60.3157 118.273 59.9011 122.795 59.373C123.343 59.309 123.84 59.7016 123.904 60.25C123.968 60.7985 123.576 61.2953 123.027 61.3594C118.505 61.8873 114.666 62.3074 111.619 62.5381C108.612 62.7657 106.317 62.8203 104.854 62.5361C104.16 62.4015 103.264 62.1133 102.814 61.3125C102.335 60.4565 102.608 59.4865 103.084 58.623C103.319 58.1965 103.552 57.7793 103.781 57.3721C104.38 55.3634 105.696 52.3242 107.037 49.3154C107.213 48.92 107.404 48.5675 107.629 48.3203C107.737 48.2007 107.932 48.0175 108.221 47.9268C108.578 47.8144 108.963 47.883 109.258 48.1172C109.495 48.3058 109.603 48.5444 109.652 48.6777C109.708 48.8282 109.737 48.9778 109.753 49.1025C109.785 49.3536 109.779 49.6244 109.751 49.8711C109.696 50.3609 109.509 50.9078 109.275 51.4561C109.036 52.0195 108.714 52.6574 108.344 53.3496C107.622 54.6981 106.654 56.3498 105.639 58.1484C105.574 58.3778 105.525 58.5754 105.49 58.7432C105.955 58.5913 106.619 58.3055 107.559 57.8428C112.43 55.4452 122.318 51.2762 130.161 42.5361C134.139 38.1038 136.735 34.5038 138.348 31.083C139.95 27.6836 140.599 24.4191 140.614 20.626C140.662 8.70961 140.661 1.09054 140.661 1C140.661 0.447874 141.109 0.000257614 141.661 0Z",
          fill: "currentColor",
        }),
      });
    }
    function eJ({ className: e } = {}) {
      return (0, eU.jsx)("svg", {
        width: "160",
        height: "80",
        viewBox: "0 0 160 80",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: (0, eU.jsx)("path", {
          d: "M145.105 55.7939C145.319 55.7939 145.5 55.8597 145.648 55.9912C145.813 56.1063 145.895 56.3036 145.896 56.583C145.896 56.6817 145.788 57.0031 145.574 57.5459C145.377 58.0887 145.097 58.8043 144.735 59.6924C144.39 60.5806 144.004 61.5758 143.576 62.6777C143.149 63.7797 142.713 64.9392 142.269 66.1562C141.824 67.3735 141.405 68.5993 141.01 69.833C140.615 71.0502 140.278 72.2184 139.998 73.3369C139.718 74.4553 139.529 75.4585 139.431 76.3467C139.825 75.8697 140.278 75.2616 140.788 74.5215C141.298 73.7814 141.84 72.9832 142.416 72.1279C142.992 71.2726 143.576 70.4248 144.168 69.5859C144.76 68.7472 145.344 67.9827 145.92 67.292C146.496 66.6012 147.03 66.0499 147.523 65.6387C148.033 65.211 148.478 64.9971 148.856 64.9971C149.481 64.9971 149.983 65.1943 150.361 65.5889C150.756 65.9672 150.953 66.593 150.953 67.4648C150.953 67.9582 150.855 68.5505 150.657 69.2412C150.476 69.932 150.262 70.6556 150.016 71.4121C149.769 72.1686 149.547 72.8923 149.35 73.583C149.169 74.2739 149.078 74.8669 149.078 75.3604C149.078 76.0344 149.333 76.371 149.843 76.3711C150.632 76.3711 151.422 76.1989 152.212 75.8535C153.018 75.5081 153.783 75.0802 154.507 74.5703C155.23 74.044 155.896 73.5175 156.505 72.9912C157.113 72.4484 157.632 71.9877 158.06 71.6094C158.52 71.1984 158.906 70.9933 159.219 70.9932C159.613 70.9932 159.811 71.1983 159.812 71.6094C159.812 71.7244 159.787 71.856 159.737 72.0039C159.688 72.1519 159.557 72.342 159.343 72.5723C159.08 72.8683 158.7 73.2544 158.207 73.7314C157.73 74.2084 157.171 74.719 156.529 75.2617C155.904 75.8044 155.221 76.3141 154.481 76.791C153.758 77.268 153.009 77.6631 152.236 77.9756C151.48 78.2716 150.739 78.4199 150.016 78.4199C149.029 78.4199 148.263 78.1393 147.721 77.5801C147.195 77.0044 146.932 76.215 146.932 75.2119C146.932 74.587 147.03 73.8304 147.228 72.9424C147.425 72.0541 147.672 71.1158 147.968 70.1289C148.28 69.1257 148.593 68.1472 148.905 67.1934C148.379 67.5552 147.804 68.0978 147.179 68.8213C146.57 69.5285 145.928 70.3346 145.254 71.2393C144.58 72.1274 143.905 73.0321 143.23 73.9531C142.573 74.8743 141.931 75.73 141.306 76.5195C140.697 77.2925 140.13 77.9176 139.604 78.3945C139.077 78.8716 138.624 79.1104 138.246 79.1104C137.884 79.1103 137.605 79.0037 137.407 78.79C137.21 78.5927 137.111 78.0902 137.111 77.2842C137.111 76.544 137.243 75.5816 137.506 74.3975C137.699 73.5176 137.94 72.5671 138.23 71.5459C138.136 71.7389 137.99 71.9584 137.79 72.2021C137.412 72.6626 136.902 73.1644 136.261 73.707C135.619 74.2498 134.904 74.8011 134.114 75.3604C133.325 75.9032 132.527 76.4047 131.721 76.8652C130.915 77.3093 130.142 77.6706 129.401 77.9502C128.678 78.2133 128.053 78.3457 127.526 78.3457C126.72 78.3457 126.021 78.1646 125.429 77.8027C124.853 77.4244 124.409 76.9388 124.097 76.3467C123.784 75.7547 123.628 75.1464 123.628 74.5215C123.628 74.3697 123.632 74.219 123.638 74.0703C123.542 74.1763 123.44 74.2852 123.332 74.3975C122.921 74.8251 122.444 75.245 121.901 75.6562C121.375 76.051 120.807 76.3794 120.198 76.6426C119.606 76.9057 119.006 77.0381 118.397 77.0381C117.262 77.0381 116.333 76.8152 115.609 76.3711C114.902 75.927 114.376 75.1954 114.03 74.1758C113.701 73.156 113.537 71.7906 113.537 70.0801C113.537 69.1427 113.504 68.4599 113.438 68.0322C113.373 67.5881 113.208 67.2916 112.944 67.1436C112.747 67.489 112.484 67.9826 112.155 68.624C111.843 69.2491 111.481 69.9486 111.069 70.7217C110.675 71.4947 110.247 72.276 109.786 73.0654C109.326 73.8384 108.857 74.554 108.38 75.2119C107.903 75.8533 107.426 76.3798 106.949 76.791C106.472 77.1858 106.019 77.3828 105.592 77.3828C105.312 77.3828 105.024 77.2353 104.729 76.9395C104.433 76.627 104.186 76.2238 103.988 75.7305C103.791 75.2206 103.692 74.6773 103.692 74.1016C103.692 73.7234 103.7 73.3699 103.717 73.041C103.042 73.9949 102.335 74.8827 101.595 75.7051C100.855 76.5111 100.114 77.1608 99.374 77.6543C98.6339 78.1477 97.9432 78.3945 97.3018 78.3945C96.7919 78.3945 96.3152 78.2134 95.8711 77.8516C95.427 77.4732 95.0648 76.8403 94.7852 75.9521C94.522 75.0475 94.3737 73.8216 94.3408 72.2754C93.6171 73.2952 92.8519 74.2007 92.0459 74.9902C91.2401 75.7795 90.4427 76.4047 89.6533 76.8652C88.8639 77.3093 88.1234 77.5312 87.4326 77.5312C86.8076 77.5312 86.2891 77.2435 85.8779 76.668C85.4832 76.0758 85.2861 75.3106 85.2861 74.373C85.2861 73.5506 85.4911 72.7606 85.9023 72.0039C86.3135 71.2309 86.857 70.4914 87.5312 69.7842C88.222 69.077 88.9865 68.427 89.8252 67.835C90.6641 67.2263 91.5118 66.6751 92.3672 66.1816C93.2389 65.6882 94.061 65.2683 94.834 64.9229C95.6234 64.5775 96.2982 64.3147 96.8574 64.1338C97.4167 63.9364 97.8037 63.8379 98.0176 63.8379C98.3792 63.838 98.5596 64.035 98.5596 64.4297C98.5595 64.7751 98.4202 65.0796 98.1406 65.3428C97.8775 65.6058 97.5569 65.8279 97.1787 66.0088C96.4879 66.3542 95.6978 66.7652 94.8096 67.2422C93.9378 67.7028 93.0492 68.2212 92.1445 68.7969C91.2566 69.356 90.4262 69.9563 89.6533 70.5977C88.8967 71.2391 88.2877 71.9138 87.8271 72.6211C87.3666 73.312 87.1357 74.0194 87.1357 74.7432C87.1358 74.9569 87.1776 75.1212 87.2598 75.2363C87.3584 75.3515 87.5227 75.4092 87.7529 75.4092C88.0489 75.4092 88.4273 75.2697 88.8877 74.9902C89.3647 74.6942 89.8831 74.3071 90.4424 73.8301C91.018 73.3367 91.5854 72.7941 92.1445 72.2021C92.7202 71.61 93.2556 71.009 93.749 70.4004C94.2424 69.7754 94.6455 69.1912 94.958 68.6484C95.1389 68.3525 95.344 68.1055 95.5742 67.9082C95.8044 67.6944 96.0514 67.588 96.3145 67.5879C96.6763 67.5879 96.8574 67.8018 96.8574 68.2295C96.8574 68.3612 96.8086 68.6987 96.71 69.2412C96.6277 69.784 96.5372 70.4418 96.4385 71.2148C96.3398 71.9715 96.29 72.7695 96.29 73.6084C96.2901 75.4012 96.7179 76.2979 97.5732 76.2979C98.0502 76.2978 98.5438 76.1167 99.0537 75.7549C99.58 75.393 100.09 74.9322 100.583 74.373C101.093 73.7973 101.562 73.1884 101.989 72.5469C102.417 71.9055 102.779 71.2973 103.075 70.7217C103.371 70.146 103.577 69.6853 103.692 69.3398C103.956 67.4976 104.326 66.1732 104.803 65.3672C105.296 64.5613 105.798 64.1582 106.308 64.1582C106.636 64.1582 106.899 64.2489 107.097 64.4297C107.294 64.5942 107.394 64.9643 107.394 65.54C107.394 65.9348 107.237 66.527 106.925 67.3164C106.612 68.106 106.192 68.9696 105.666 69.9072C105.518 70.7461 105.435 71.6098 105.419 72.498C105.403 73.3862 105.493 74.2003 105.69 74.9404C106.118 74.7266 106.546 74.3404 106.974 73.7812C107.401 73.2055 107.837 72.5389 108.281 71.7822C108.725 71.0256 109.161 70.2444 109.589 69.4385C110.033 68.6325 110.469 67.8921 110.896 67.2178C111.341 66.527 111.768 65.9677 112.18 65.54C112.607 65.1124 113.027 64.8984 113.438 64.8984C113.965 64.8985 114.401 65.0627 114.746 65.3916C115.091 65.7041 115.354 66.2635 115.535 67.0693C115.716 67.8588 115.807 68.9775 115.807 70.4248C115.807 71.1979 115.881 71.9223 116.029 72.5967C116.194 73.2709 116.449 73.8135 116.794 74.2246C117.156 74.6194 117.617 74.8174 118.176 74.8174C119.015 74.8173 119.763 74.6691 120.421 74.373C121.079 74.0606 121.646 73.7152 122.123 73.3369C122.616 72.9423 123.028 72.5968 123.356 72.3008C123.611 72.0588 123.822 71.911 123.988 71.8564C124.081 71.5352 124.19 71.2223 124.318 70.9189C124.779 69.8169 125.355 68.8457 126.046 68.0068C126.753 67.1517 127.477 66.428 128.217 65.8359C128.973 65.2439 129.656 64.8 130.265 64.5039C130.89 64.1914 131.334 64.0352 131.598 64.0352C132.124 64.0353 132.387 64.2981 132.387 64.8242C132.387 65.0709 132.222 65.3587 131.894 65.6875C131.565 66 131.145 66.3702 130.635 66.7979C130.125 67.2255 129.582 67.7112 129.007 68.2539C128.431 68.7802 127.888 69.3804 127.378 70.0547C126.868 70.7125 126.449 71.4531 126.12 72.2754C125.791 73.0814 125.626 73.97 125.626 74.9404C125.626 75.9272 126.029 76.4208 126.835 76.4209C127.575 76.4209 128.332 76.2806 129.105 76.001C129.895 75.7214 130.668 75.3601 131.425 74.916C132.198 74.4555 132.938 73.9778 133.646 73.4844C134.353 72.991 134.994 72.5221 135.569 72.0781C136.145 71.6176 136.631 71.2474 137.025 70.9678C137.42 70.6882 137.7 70.5488 137.864 70.5488C138.193 70.5488 138.357 70.7299 138.357 71.0918C138.357 71.1012 138.355 71.1105 138.354 71.1201C138.423 70.884 138.494 70.6438 138.567 70.4004C139.011 68.9365 139.513 67.4229 140.072 65.8604C140.632 64.2813 141.216 62.7349 141.824 61.2217C142.449 59.692 143.049 58.2938 143.625 57.0273C143.839 56.5668 144.062 56.2464 144.292 56.0654C144.522 55.8847 144.793 55.794 145.105 55.7939ZM61.7637 58.582C62.9642 58.5821 63.8939 58.9025 64.5518 59.5439C65.2261 60.1854 65.5624 61.115 65.5625 62.332C65.5625 63.1708 65.4151 64.0428 65.1191 64.9473C64.8231 65.8355 64.3872 66.6504 63.8115 67.3906C64.2555 67.3084 64.6916 67.2507 65.1191 67.2178C65.5465 67.1685 65.9411 67.1436 66.3027 67.1436C67.5529 67.1436 68.524 67.3495 69.2148 67.7607C69.9054 68.1719 70.2509 68.7802 70.251 69.5859C70.251 70.5235 69.9873 71.4041 69.4609 72.2266C68.951 73.0489 68.2683 73.7974 67.4131 74.4717C66.5742 75.146 65.6617 75.7551 64.6748 76.2979C63.6879 76.8242 62.7256 77.268 61.7881 77.6299C60.8505 77.9918 60.0197 78.2634 59.2959 78.4443C58.5888 78.6417 58.0871 78.7402 57.791 78.7402C57.2482 78.7402 56.8034 78.6577 56.458 78.4932C56.1128 78.3287 55.8578 78.1395 55.6934 77.9258C55.5456 77.7122 55.4718 77.5397 55.4717 77.4082C55.4717 77.0135 55.5702 76.7418 55.7676 76.5938C55.9649 76.4457 56.3761 76.3711 57.001 76.3711C57.3628 76.3711 57.8645 76.3054 58.5059 76.1738C59.1638 76.0258 59.8882 75.8208 60.6777 75.5576C61.4673 75.278 62.2733 74.9407 63.0957 74.5459C63.9181 74.1511 64.6833 73.6984 65.3906 73.1885C66.0978 72.6786 66.6901 72.1193 67.167 71.5107C67.6603 70.8858 67.9729 70.2198 68.1045 69.5127C67.6275 69.414 67.1419 69.3474 66.6484 69.3145C66.1716 69.2651 65.6946 69.2412 65.2178 69.2412C63.7703 69.2412 62.2976 69.3974 60.8008 69.71C59.304 70.006 57.7904 70.3434 56.2607 70.7217C56.2114 71.182 56.1706 71.6013 56.1377 71.9795C56.1048 72.3578 56.0799 72.7609 56.0635 73.1885C56.0141 74.2412 55.8907 74.9407 55.6934 75.2861C55.5126 75.6147 55.3072 75.7791 55.0771 75.7793C54.7153 75.7793 54.4357 75.5653 54.2383 75.1377C54.0409 74.71 53.9414 74.0274 53.9414 73.0898C53.9414 70.0963 54.238 67.514 54.8301 65.3428C55.4222 63.1717 56.302 61.5019 57.4697 60.334C58.6376 59.1661 60.0694 58.582 61.7637 58.582ZM84.7764 62.3818C85.2532 62.3818 85.5986 62.4805 85.8125 62.6777C86.0428 62.8587 86.1582 63.0646 86.1582 63.2949C86.1581 63.6073 86.0268 63.8543 85.7637 64.0352C85.5169 64.1996 85.081 64.3967 84.4561 64.627C83.7323 64.9066 83.0656 65.2359 82.457 65.6143C81.865 65.9761 81.2976 66.4529 80.7549 67.0449C80.2286 67.637 79.7101 68.3934 79.2002 69.3145C78.6903 70.2191 78.1808 71.3385 77.6709 72.6709C77.161 74.0031 76.6176 75.6065 76.042 77.4814C75.9433 77.8433 75.812 78.099 75.6475 78.2471C75.4994 78.395 75.3183 78.4688 75.1045 78.4688C74.8415 78.4687 74.6193 78.3621 74.4385 78.1484C74.2575 77.9346 74.167 77.6381 74.167 77.2598C74.167 76.9801 74.2247 76.5194 74.3398 75.8779C74.4714 75.22 74.6108 74.4547 74.7588 73.583C74.9233 72.7113 75.0636 71.8066 75.1787 70.8691C75.2938 69.9153 75.3516 69.0025 75.3516 68.1309C75.3516 67.7034 75.4582 67.3908 75.6719 67.1934C75.902 66.9796 76.1571 66.8722 76.4365 66.8721C76.6997 66.8721 76.8977 67.0372 77.0293 67.3662C77.1607 67.6953 77.1857 68.3534 77.1035 69.3398C77.8601 67.6621 78.6901 66.3128 79.5947 65.293C80.5159 64.2567 81.4293 63.5164 82.334 63.0723C83.2385 62.6118 84.0527 62.3819 84.7764 62.3818ZM61.4922 60.8027C60.1434 60.8027 59.0578 61.4197 58.2354 62.6533C57.4294 63.887 56.8453 65.8691 56.4834 68.5996C58.3089 68.2707 59.7232 67.8347 60.7266 67.292C61.73 66.7492 62.4294 66.1154 62.8242 65.3916C63.2189 64.6515 63.416 63.8205 63.416 62.8994C63.416 62.6036 63.3671 62.2995 63.2686 61.9873C63.1699 61.6585 62.9806 61.3787 62.7012 61.1484C62.4216 60.9182 62.0184 60.8028 61.4922 60.8027ZM1.00098 0C1.55282 0.000521226 2.00098 0.448037 2.00098 1C2.00098 1.09054 2.00052 8.70961 2.04785 20.626C2.06295 24.4191 2.71222 27.6836 4.31445 31.083C5.92685 34.5038 8.52367 38.1039 12.501 42.5361C20.344 51.276 30.2324 55.4453 35.1035 57.8428C36.0434 58.3054 36.7072 58.5913 37.1719 58.7432C37.1375 58.5755 37.0879 58.3777 37.0234 58.1484C36.0085 56.3499 35.0406 54.6981 34.3184 53.3496C33.9477 52.6575 33.6265 52.0195 33.3867 51.4561C33.1534 50.9078 32.9664 50.3609 32.9111 49.8711C32.8833 49.6244 32.8774 49.3536 32.9092 49.1025C32.925 48.9778 32.954 48.8282 33.0098 48.6777C33.0592 48.5443 33.1671 48.3057 33.4043 48.1172C33.6991 47.8832 34.084 47.8145 34.4414 47.9268C34.7295 48.0175 34.9247 48.2008 35.0332 48.3203C35.2576 48.5675 35.4488 48.9201 35.625 49.3154C36.9659 52.3241 38.2818 55.3634 38.8809 57.3721C39.11 57.7792 39.3432 58.1966 39.5781 58.623C40.0537 59.4864 40.3272 60.4566 39.8477 61.3125C39.3987 62.1131 38.5018 62.4014 37.8086 62.5361C36.3456 62.8203 34.0498 62.7657 31.043 62.5381C27.9958 62.3074 24.1565 61.8873 19.6348 61.3594C19.0863 61.2953 18.6938 60.7985 18.7578 60.25C18.822 59.7016 19.3187 59.309 19.8672 59.373C24.3893 59.901 28.1922 60.3157 31.1943 60.543C33.6433 60.7284 35.4375 60.7791 36.6484 60.6748C36.6282 60.6685 36.6069 60.6636 36.5869 60.6572C35.9751 60.4609 35.1966 60.118 34.2207 59.6377C29.4572 57.2931 19.1676 52.9586 11.0127 43.8711C6.97788 39.3748 4.23616 35.6086 2.50488 31.9355C0.763498 28.2409 0.0639536 24.6829 0.0478516 20.6338C0.000507355 8.71416 0 1.09249 0 1C0 0.447715 0.448692 0 1.00098 0Z",
          fill: "currentColor",
        }),
      });
    }
    function eQ({ onNext: e }) {
      return (0, e$.jsxs)(e$.Fragment, {
        children: [
          (0, e$.jsx)(eE, {
            staticImageLight:
              "/chat-static/assets/new-feature/git-tutorial/step-2-light.png",
            staticImageDark:
              "/chat-static/assets/new-feature/git-tutorial/step-2-dark.png",
            children: (0, e$.jsx)(eZ, {}),
          }),
          (0, e$.jsxs)(eA, {
            children: [
              (0, e$.jsx)(eD, {
                children: "Every chat works on a new branch.",
              }),
              (0, e$.jsx)(eI, {
                children:
                  "Chats will no longer work directly on the main branch. Every chat targets its own branch so that changes can be tested in isolation. You can check this branch out locally to make changes from your IDE.",
              }),
            ],
          }),
        ],
      });
    }
    var eX = t,
      e0 = t,
      e1 = i,
      e2 = eL,
      e5 = e.i(589654),
      e3 = eq;
    let e4 = [
      { type: "close", text: "Branch deleted  Just Now" },
      { type: "merge", text: "PR #1234 merged  Just Now" },
      { type: "commit", text: "a1b2c3d  Just Now" },
      { type: "commit", text: "f4e5d6c  Just Now" },
      { type: "pr", text: "PR #1234 was created" },
      { type: "commit", text: "4ddd3d3  Just Now" },
      { type: "branch", text: "Branch created  Just Now" },
      {
        type: "user",
        text: "shadcn created the chat",
        avatar: "/avatars/shadcn.png",
      },
    ];
    function e9({ type: e }) {
      switch (e) {
        case "pr":
          return (0, e0.jsx)(e3.GitPRSmall, {
            className: "size-4 text-v0-gray-900",
          });
        case "commit":
          return (0, e0.jsx)(e3.GitCommitSmall, {
            className: "size-4 text-v0-gray-900",
          });
        case "branch":
          return (0, e0.jsx)(e3.GitBranchSmall, {
            className: "size-4 text-v0-gray-900",
          });
        case "merge":
          return (0, e0.jsx)(e3.GitMergeSmall, {
            className: "size-4 text-v0-gray-900",
          });
        case "close":
          return (0, e0.jsx)(e3.CrossCircleSmall, {
            className: "size-4 text-v0-gray-900",
          });
        case "user":
          return (0, e0.jsx)("img", {
            src: "https://avatars.githubusercontent.com/u/124599?v=4",
            alt: "",
            className: "size-4 rounded-full",
          });
      }
    }
    function e7({ activity: e }) {
      return (0, e0.jsxs)("div", {
        className: "flex items-center gap-2 text-label-13 text-v0-gray-900",
        children: [
          (0, e0.jsx)(e9, { type: e.type }),
          (0, e0.jsx)("span", { children: e.text }),
        ],
      });
    }
    function e6() {
      return (0, e0.jsx)("div", {
        className: "w-[1.5px] ml-[7px] h-2.5 bg-v0-alpha-400",
      });
    }
    function e8() {
      let [e, t] = (0, e1.useState)(0);
      (0, e1.useEffect)(() => {
        if (e >= e4.length) return;
        let n = setTimeout(() => {
          t((e) => e + 1);
        }, 350);
        return () => clearTimeout(n);
      }, [e]);
      let n = e4.slice(e4.length - e),
        r = e >= 4;
      return (0, e0.jsxs)("div", {
        className: "relative h-full w-full",
        children: [
          (0, e0.jsxs)("div", {
            className:
              "absolute top-8 left-8 w-[250px] h-[170px] bg-v0-background-100 rounded-lg shadow-sm p-3 flex flex-col justify-end gap-3",
            children: [
              (0, e0.jsx)("div", {
                className: "flex justify-end",
                children: (0, e0.jsx)(te, { className: "text-v0-blue-800" }),
              }),
              (0, e0.jsx)("div", {
                className: "flex justify-start",
                children: (0, e0.jsx)(tt, { className: "text-v0-gray-200" }),
              }),
            ],
          }),
          (0, e0.jsxs)("div", {
            className:
              "absolute bottom-8 right-8 w-[250px] h-[170px] bg-v0-background-100 rounded-lg shadow-sm p-3 flex flex-col overflow-hidden",
            children: [
              (0, e0.jsx)("div", {
                className:
                  "text-label-13 font-medium text-v0-gray-900 mb-3 relative z-10",
                children: "Activity",
              }),
              (0, e0.jsx)("div", {
                className:
                  "absolute top-9 left-3 right-3 h-2 bg-gradient-to-b from-v0-background-100 to-transparent pointer-events-none z-10",
              }),
              (0, e0.jsxs)("div", {
                className:
                  "flex flex-col gap-1 flex-1 overflow-hidden relative",
                children: [
                  (0, e0.jsx)(e5.AnimatePresence, {
                    initial: !1,
                    children: n.map((e, t) =>
                      (0, e0.jsxs)(
                        e2.motion.div,
                        {
                          layout: !0,
                          initial: { opacity: 0, y: -8 },
                          animate: { opacity: 1, y: 0 },
                          transition: {
                            opacity: { duration: 0.15, ease: "easeOut" },
                            y: { duration: 0.15, ease: "easeOut" },
                            layout: {
                              duration: 0.2,
                              ease: [0.25, 0.1, 0.25, 1],
                            },
                          },
                          className: "flex flex-col gap-1",
                          children: [
                            (0, e0.jsx)(e7, { activity: e }),
                            t < n.length - 1 && (0, e0.jsx)(e6, {}),
                          ],
                        },
                        e.text,
                      ),
                    ),
                  }),
                  r &&
                    (0, e0.jsx)("div", {
                      className:
                        "absolute inset-x-0 bottom-0 h-8 bg-gradient-to-t from-v0-background-100 to-transparent pointer-events-none",
                    }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function te({ className: e }) {
      return (0, e0.jsxs)("svg", {
        width: "109",
        height: "31",
        viewBox: "0 0 109 31",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: [
          (0, e0.jsx)("rect", {
            width: "106",
            height: "27",
            rx: "13.5",
            fill: "currentColor",
          }),
          (0, e0.jsx)("path", {
            d: "M104.675 15.4687C103.134 22.3319 105.348 27.0142 108.658 30.6062C103.069 30.4578 96.9124 28.147 93.3047 25.859L104.675 15.4687Z",
            fill: "currentColor",
          }),
        ],
      });
    }
    function tt({ className: e }) {
      return (0, e0.jsxs)("svg", {
        width: "148",
        height: "68",
        viewBox: "0 0 148 68",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: e,
        children: [
          (0, e0.jsx)("rect", {
            width: "145",
            height: "64",
            rx: "16",
            transform: "matrix(-1 0 0 1 147.658 0)",
            fill: "currentColor",
          }),
          (0, e0.jsx)("path", {
            d: "M3.98235 52.4687C5.52323 59.3319 3.3095 64.0142 0 67.6062C5.58822 67.4578 11.7453 65.147 15.353 62.859L3.98235 52.4687Z",
            fill: "currentColor",
          }),
        ],
      });
    }
    function tn({ onNext: e }) {
      return (0, eX.jsxs)(eX.Fragment, {
        children: [
          (0, eX.jsx)(eE, {
            staticImageLight:
              "/chat-static/assets/new-feature/git-tutorial/step-3-light.png",
            staticImageDark:
              "/chat-static/assets/new-feature/git-tutorial/step-3-dark.png",
            children: (0, eX.jsx)(e8, {}),
          }),
          (0, eX.jsxs)(eA, {
            children: [
              (0, eX.jsx)(eD, {
                children: "All changes are automatically committed.",
              }),
              (0, eX.jsx)(eI, {
                children:
                  "As you chat with v0 to create new versions, use design mode, or edit the code manually, we automatically commit your changes to the branch to ensure that you're always up to date.",
              }),
            ],
          }),
        ],
      });
    }
    var tr = t,
      ti = t,
      ts = i,
      ta = eL,
      to = en,
      tl = e.i(794593),
      tc = e.i(89625),
      tu = e.i(264050),
      td = e.i(494266),
      th = e.i(654796),
      tp = eO;
    let tm = (0, ta.motion)(to.Button);
    function tf() {
      let [e, t] = (0, ts.useState)("publish");
      return (
        (0, ts.useEffect)(() => {
          let e = setTimeout(() => t("press"), 500),
            n = setTimeout(() => t("card"), 800);
          return () => {
            (clearTimeout(e), clearTimeout(n));
          };
        }, []),
        (0, ti.jsx)("div", {
          className: "flex h-full w-full items-center justify-center",
          children:
            "card" === e
              ? (0, ti.jsx)(ta.motion.div, {
                  initial: { opacity: 0, y: 3, scale: 0.9 },
                  animate: { opacity: 1, y: 0, scale: 1 },
                  transition: { duration: 0.18, ease: "easeOut" },
                  children: (0, ti.jsx)(tx, {}),
                })
              : (0, ti.jsx)(tg, { phase: e }),
        })
      );
    }
    function tg({ phase: e }) {
      let t = "publish" !== e;
      return (0, ti.jsxs)("div", {
        className: "relative flex h-full w-full items-center justify-center",
        children: [
          (0, ti.jsxs)(tm, {
            variant: "default",
            size: "sm",
            className: "gap-1.5 h-8 px-3 shadow-sm rounded-md",
            initial: { scale: 1 },
            animate: { scale: t ? 0.94 : 1 },
            transition: { duration: 0.12, ease: "easeOut" },
            children: [
              (0, ti.jsx)(tc.GitPullRequest, { className: "size-3.5" }),
              (0, ti.jsx)("span", { children: "Publish" }),
            ],
          }),
          "publish" !== e &&
            (0, ti.jsx)(ta.motion.div, {
              className: "absolute",
              initial: { opacity: 0, x: 40, y: 32 },
              animate: { opacity: 1, x: 18, y: 10 },
              transition: { duration: 0.18, ease: "easeOut" },
              children: (0, ti.jsx)(ty, {}),
            }),
        ],
      });
    }
    function tx() {
      return (0, ti.jsxs)("div", {
        className: "bg-v0-background-100 rounded-lg shadow-sm w-[420px]",
        children: [
          (0, ti.jsx)("div", {
            className: "flex flex-col",
            children: (0, ti.jsxs)("div", {
              className:
                "flex gap-3 p-3 border-b border-v0-gray-200 items-center",
              children: [
                (0, ti.jsxs)("div", {
                  className:
                    "shadow-sm rounded-[5px] pt-1.5 px-1.5 flex flex-col gap-1.5 w-16 items-start",
                  children: [
                    (0, ti.jsxs)("div", {
                      className:
                        "flex items-center gap-0.5 rounded-full py-0.5 pr-1.5 pl-1 text-v0-universal-white bg-v0-green-700",
                      children: [
                        (0, ti.jsx)(tc.GitPullRequest, { size: 8 }),
                        (0, ti.jsx)("span", {
                          className: "text-[7px] mb-[-1px]",
                          children: "Open",
                        }),
                      ],
                    }),
                    (0, ti.jsx)("div", {
                      className: "bg-v0-gray-100 rounded-xs h-[5px] w-[55%]",
                    }),
                    (0, ti.jsx)("div", {
                      className: "bg-v0-gray-100 rounded-xs h-[5px] w-full",
                    }),
                    (0, ti.jsx)("div", {
                      className: "bg-v0-gray-100 rounded-xs h-[5px] w-1/2",
                    }),
                    (0, ti.jsx)("div", {
                      className: "bg-v0-gray-100 rounded-xs h-6 w-full",
                    }),
                  ],
                }),
                (0, ti.jsxs)("div", {
                  className: "flex flex-col gap-2",
                  children: [
                    (0, ti.jsxs)("div", {
                      className: "flex gap-1 text-sm",
                      children: [
                        (0, ti.jsx)("div", {
                          className: "font-medium",
                          children: "feat: create new header",
                        }),
                        (0, ti.jsx)("div", {
                          className: "text-v0-gray-900",
                          children: "#2435",
                        }),
                      ],
                    }),
                    (0, ti.jsxs)("div", {
                      className: "flex items-center gap-1",
                      children: [
                        (0, ti.jsx)("div", {
                          className:
                            "bg-v0-gray-200 text-v0-gray-900 pt-[1px] pb-0.5 px-1 text-xs rounded-[5px] font-mono",
                          children: "shadcn-new-header",
                        }),
                        (0, ti.jsx)("div", {
                          className: "text-v0-gray-900",
                          children: "",
                        }),
                        (0, ti.jsx)("div", {
                          className:
                            "bg-v0-gray-200 text-v0-gray-900 pt-[1px] pb-0.5 px-1 text-xs rounded-[5px] font-mono",
                          children: "main",
                        }),
                      ],
                    }),
                    (0, ti.jsxs)("div", {
                      className: "flex items-center gap-1.5",
                      children: [
                        (0, ti.jsx)("img", {
                          src: "https://avatars.githubusercontent.com/u/124599?v=4",
                          alt: "",
                          className: "size-4 rounded-full",
                        }),
                        (0, ti.jsx)("div", {
                          className: "text-label-13 text-v0-gray-1000",
                          children: "Updated 2m ago",
                        }),
                      ],
                    }),
                  ],
                }),
              ],
            }),
          }),
          (0, ti.jsxs)("div", {
            className: "p-3 flex flex-col gap-0.5 border-b border-v0-alpha-100",
            children: [
              (0, ti.jsxs)("div", {
                className:
                  "flex justify-between items-center w-full h-9 px-2 rounded-md hover:bg-v0-alpha-100",
                children: [
                  (0, ti.jsxs)("div", {
                    className: "flex gap-2 items-center",
                    children: [
                      (0, ti.jsx)(tu.PreviewEye, {
                        className: "size-4 !text-v0-gray-900",
                      }),
                      (0, ti.jsx)("span", {
                        className: "text-label-14",
                        children: "Visit Preview",
                      }),
                      (0, ti.jsx)(tl.Badge, {
                        variant: "amber",
                        prefix: (0, ti.jsx)(th.Spinner, {
                          size: 12,
                          color: "var(--v0-amber-900)",
                        }),
                        children: "Building",
                      }),
                    ],
                  }),
                  (0, ti.jsx)(td.ChevronRightSmall, {
                    className: "size-4 !text-v0-gray-900",
                  }),
                ],
              }),
              (0, ti.jsxs)("div", {
                className:
                  "flex justify-between items-center w-full h-9 px-2 rounded-md hover:bg-v0-alpha-100",
                children: [
                  (0, ti.jsxs)("div", {
                    className: "flex gap-2 items-center",
                    children: [
                      (0, ti.jsx)(tv, {
                        className: "size-4 !text-v0-gray-900",
                      }),
                      (0, ti.jsx)("span", {
                        className: "text-label-14",
                        children: "Inspect on Vercel",
                      }),
                    ],
                  }),
                  (0, ti.jsx)(td.ChevronRightSmall, {
                    className: "size-4 !text-v0-gray-900",
                  }),
                ],
              }),
            ],
          }),
          (0, ti.jsxs)("div", {
            className: "p-3 flex gap-2",
            children: [
              (0, ti.jsx)(to.Button, {
                variant: "secondary",
                size: "sm",
                className: "flex-1 h-7 rounded-md",
                children: "View PR",
              }),
              (0, ti.jsx)(to.Button, {
                variant: "blue",
                size: "sm",
                className:
                  "flex-1 h-7 rounded-md bg-v0-green-800 hover:bg-v0-green-800/90",
                children: "Merge",
              }),
            ],
          }),
        ],
      });
    }
    let tv = (0, tp.withNewIcon)(`
<path d="M2.5 11.25C2.5 12.4926 3.50736 13.5 4.75 13.5H6.5V15H4.75C2.67893 15 1 13.3211 1 11.25V9.5H2.5V11.25ZM15 11.25C15 13.3211 13.3211 15 11.25 15H9.5V13.5H11.25C12.4926 13.5 13.5 12.4926 13.5 11.25V9.5H15V11.25ZM11 4C11.5523 4 12 4.44772 12 5V11C12 11.5523 11.5523 12 11 12H5C4.44772 12 4 11.5523 4 11V5C4 4.44772 4.44772 4 5 4H11ZM5.5 10.5H10.5V5.5H5.5V10.5ZM6.5 2.5H4.75C3.50736 2.5 2.5 3.50736 2.5 4.75V6.5H1V4.75C1 2.67893 2.67893 1 4.75 1H6.5V2.5ZM11.25 1C13.3211 1 15 2.67893 15 4.75V6.5H13.5V4.75C13.5 3.50736 12.4926 2.5 11.25 2.5H9.5V1H11.25Z" fill="currentColor"/>
`);
    function ty() {
      return (0, ti.jsxs)("svg", {
        width: "39",
        height: "40",
        viewBox: "0 0 39 40",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, ti.jsxs)("g", {
            filter: "url(#filter0_d_682_5420)",
            children: [
              (0, ti.jsx)("path", {
                fillRule: "evenodd",
                clipRule: "evenodd",
                d: "M11.0165 26.0545C10.4833 25.3805 9.83559 24.0024 8.68283 22.3296C8.02947 21.3833 6.40922 19.6016 5.92671 18.6967C5.50804 17.8969 5.55309 17.5383 5.6526 16.8755C5.82908 15.6965 7.03817 14.7784 8.32799 14.9023C9.30239 14.9943 10.1285 15.6383 10.872 16.2466C11.3207 16.6127 11.8726 17.3243 12.205 17.726C12.511 18.094 12.5861 18.2461 12.9128 18.6817C13.3446 19.258 13.4797 19.5434 13.3145 18.9088C13.1812 17.9776 12.9634 16.3874 12.648 14.9812C12.4077 13.9148 12.3495 13.7477 12.1205 12.9291C11.8783 12.058 11.7544 11.4478 11.5272 10.5241C11.3695 9.87072 11.086 8.53584 11.009 7.78486C10.902 6.75789 10.8457 5.08319 11.5047 4.31343C12.021 3.71076 13.2056 3.52865 13.9397 3.90039C14.901 4.38665 15.4473 5.78348 15.697 6.34109C16.1457 7.34365 16.4236 8.50205 16.6658 10.0228C16.9737 11.9585 17.5407 14.6451 17.5595 15.2102C17.6045 14.5174 17.4318 13.0587 17.552 12.394C17.6609 11.7914 18.1678 11.0911 18.8024 10.9014C19.3393 10.7419 19.9683 10.6837 20.5221 10.7982C21.1098 10.9183 21.7293 11.3389 21.9603 11.735C22.6399 12.9066 22.653 15.3003 22.6812 15.1727C22.8427 14.4668 22.8145 12.8653 23.2144 12.1988C23.4772 11.7595 24.1475 11.3633 24.5042 11.2995C25.0562 11.2018 25.734 11.1718 26.3141 11.2845C26.7816 11.3764 27.4143 11.9322 27.5851 12.1988C27.9944 12.8446 28.2272 14.6714 28.2967 15.3116C28.3249 15.5763 28.4356 14.5756 28.8468 13.9298C29.609 12.7301 32.307 12.4973 32.4102 15.1295C32.4572 16.3574 32.4478 16.301 32.4478 17.1271C32.4478 18.0978 32.4252 18.6817 32.3727 19.3838C32.3145 20.1348 32.153 21.832 31.9183 22.6544C31.7569 23.2195 31.2218 24.4905 30.6942 25.2528C30.6942 25.2528 28.6778 27.5996 28.4582 28.6566C28.2366 29.7118 28.3098 29.7193 28.2667 30.4684C28.2235 31.2156 28.4938 32.1994 28.4938 32.1994C28.4938 32.1994 26.9881 32.3947 26.177 32.2651C25.4429 32.1468 24.5343 30.6862 24.2996 30.2393C23.9766 29.6235 23.2876 29.7418 23.0191 30.1961C22.5967 30.9152 21.688 32.205 21.0459 32.2858C19.7918 32.4435 17.1896 32.344 15.1526 32.3233C15.1526 32.3233 15.4999 30.4252 14.7264 29.7737C14.1538 29.2875 13.1681 28.3018 12.5786 27.7836L11.0165 26.0545Z",
                fill: "white",
              }),
              (0, ti.jsx)("path", {
                fillRule: "evenodd",
                clipRule: "evenodd",
                d: "M11.0165 26.0545C10.4833 25.3805 9.83559 24.0024 8.68283 22.3296C8.02947 21.3833 6.40922 19.6016 5.92671 18.6967C5.50804 17.8969 5.55309 17.5383 5.6526 16.8755C5.82908 15.6965 7.03817 14.7784 8.32799 14.9023C9.30239 14.9943 10.1285 15.6383 10.872 16.2466C11.3207 16.6127 11.8726 17.3243 12.205 17.726C12.511 18.094 12.5861 18.2461 12.9128 18.6817C13.3446 19.258 13.4797 19.5434 13.3145 18.9088C13.1812 17.9776 12.9634 16.3874 12.648 14.9812C12.4077 13.9148 12.3495 13.7477 12.1205 12.9291C11.8783 12.058 11.7544 11.4478 11.5272 10.5241C11.3695 9.87072 11.086 8.53584 11.009 7.78486C10.902 6.75789 10.8457 5.08319 11.5047 4.31343C12.021 3.71076 13.2056 3.52865 13.9397 3.90039C14.901 4.38665 15.4473 5.78348 15.697 6.34109C16.1457 7.34365 16.4236 8.50205 16.6658 10.0228C16.9737 11.9585 17.5407 14.6451 17.5595 15.2102C17.6045 14.5174 17.4318 13.0587 17.552 12.394C17.6609 11.7914 18.1678 11.0911 18.8024 10.9014C19.3393 10.7419 19.9683 10.6837 20.5221 10.7982C21.1098 10.9183 21.7293 11.3389 21.9603 11.735C22.6399 12.9066 22.653 15.3003 22.6812 15.1727C22.8427 14.4668 22.8145 12.8653 23.2144 12.1988C23.4772 11.7595 24.1475 11.3633 24.5042 11.2995C25.0562 11.2018 25.734 11.1718 26.3141 11.2845C26.7816 11.3764 27.4143 11.9322 27.5851 12.1988C27.9944 12.8446 28.2272 14.6714 28.2967 15.3116C28.3249 15.5763 28.4356 14.5756 28.8468 13.9298C29.609 12.7301 32.307 12.4973 32.4102 15.1295C32.4572 16.3574 32.4478 16.301 32.4478 17.1271C32.4478 18.0978 32.4252 18.6817 32.3727 19.3838C32.3145 20.1348 32.153 21.832 31.9183 22.6544C31.7569 23.2195 31.2218 24.4905 30.6942 25.2528C30.6942 25.2528 28.6778 27.5996 28.4582 28.6566C28.2366 29.7118 28.3098 29.7193 28.2667 30.4684C28.2235 31.2156 28.4938 32.1994 28.4938 32.1994C28.4938 32.1994 26.9881 32.3947 26.177 32.2651C25.4429 32.1468 24.5343 30.6862 24.2996 30.2393C23.9766 29.6235 23.2876 29.7418 23.0191 30.1961C22.5967 30.9152 21.688 32.205 21.0459 32.2858C19.7918 32.4435 17.1896 32.344 15.1526 32.3233C15.1526 32.3233 15.4999 30.4252 14.7264 29.7737C14.1538 29.2875 13.1681 28.3018 12.5786 27.7836L11.0165 26.0545Z",
                stroke: "black",
                strokeWidth: "1.4081",
                strokeLinecap: "round",
                strokeLinejoin: "round",
              }),
              (0, ti.jsx)("path", {
                d: "M26.4773 26.72V20.2258",
                stroke: "black",
                strokeWidth: "1.4081",
                strokeLinecap: "round",
              }),
              (0, ti.jsx)("path", {
                d: "M22.6934 26.742L22.6633 20.2216",
                stroke: "black",
                strokeWidth: "1.4081",
                strokeLinecap: "round",
              }),
              (0, ti.jsx)("path", {
                d: "M18.9456 20.2809L18.985 26.7131",
                stroke: "black",
                strokeWidth: "1.4081",
                strokeLinecap: "round",
              }),
            ],
          }),
          (0, ti.jsx)("defs", {
            children: (0, ti.jsxs)("filter", {
              id: "filter0_d_682_5420",
              x: "-0.0332623",
              y: "-0.0592405",
              width: "39.8021",
              height: "41.6797",
              filterUnits: "userSpaceOnUse",
              colorInterpolationFilters: "sRGB",
              children: [
                (0, ti.jsx)("feFlood", {
                  floodOpacity: "0",
                  result: "BackgroundImageFix",
                }),
                (0, ti.jsx)("feColorMatrix", {
                  in: "SourceAlpha",
                  type: "matrix",
                  values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",
                  result: "hardAlpha",
                }),
                (0, ti.jsx)("feOffset", { dy: "1.87746" }),
                (0, ti.jsx)("feGaussianBlur", { stdDeviation: "2.4407" }),
                (0, ti.jsx)("feColorMatrix", {
                  type: "matrix",
                  values: "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.32 0",
                }),
                (0, ti.jsx)("feBlend", {
                  mode: "normal",
                  in2: "BackgroundImageFix",
                  result: "effect1_dropShadow_682_5420",
                }),
                (0, ti.jsx)("feBlend", {
                  mode: "normal",
                  in: "SourceGraphic",
                  in2: "effect1_dropShadow_682_5420",
                  result: "shape",
                }),
              ],
            }),
          }),
        ],
      });
    }
    function tb({ onNext: e }) {
      return (0, tr.jsxs)(tr.Fragment, {
        children: [
          (0, tr.jsx)(eE, {
            staticImageLight:
              "/chat-static/assets/new-feature/git-tutorial/step-4-light.png",
            staticImageDark:
              "/chat-static/assets/new-feature/git-tutorial/step-4-dark.png",
            children: (0, tr.jsx)(tf, {}),
          }),
          (0, tr.jsxs)(eA, {
            children: [
              (0, tr.jsx)(eD, { children: "Publish a PR, merge, and deploy." }),
              (0, tr.jsx)(eI, {
                children:
                  "We've enabled the full git workflow by allowing you to publish and merge PRs directly from v0. For projects connected to GitHub, merge a PR into your main branch to update your project's main deployment.",
              }),
            ],
          }),
        ],
      });
    }
    var tj = e.i(67914);
    function tw() {
      let [e, t] = (0, ev.useState)(1),
        n = (0, ev.useCallback)(() => {
          4 === e ? (0, eb.closeDialog)() : t((e) => e + 1);
        }, [e]),
        r = () => {
          switch (e) {
            case 1:
              return (0, ex.jsx)(eH, { onNext: n });
            case 2:
              return (0, ex.jsx)(eQ, { onNext: n });
            case 3:
              return (0, ex.jsx)(tn, { onNext: n });
            case 4:
              return (0, ex.jsx)(tb, { onNext: n });
          }
        };
      return (0, ex.jsxs)(ey.AtomicDialog, {
        type: "gitTutorial",
        children: [
          r(),
          (0, ex.jsxs)("div", {
            className:
              "flex justify-between items-center border-t border-v0-alpha-400 bg-v0-background-200 p-3 pl-6 ",
            children: [
              (0, ex.jsx)("div", {
                className: "flex gap-2",
                children: [1, 2, 3, 4].map((n) =>
                  (0, ex.jsx)(
                    "button",
                    {
                      onClick: () => t(n),
                      className: `h-2 rounded-full transition-all ${n === e ? "w-6 bg-v0-alpha-900" : "w-2 bg-v0-alpha-500 hover:bg-v0-alpha-600"}`,
                    },
                    n,
                  ),
                ),
              }),
              (0, ex.jsxs)(ej.Button, {
                onClick: n,
                size: "sm",
                className: "h-8 rounded-md px-2.5",
                children: [
                  (0, ex.jsx)("span", {
                    children: 4 === e ? "Get started" : "Next",
                  }),
                  4 === e
                    ? null
                    : (0, ex.jsx)(tj.ArrowRight, { className: "size-4" }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function tC() {
      let e = (0, r.useAtomValue)((0, n.getDialogsAtoms)().dialogOpen),
        S = (0, i.useMemo)(() => {
          if (!e) return null;
          switch (e.type) {
            case "createTeam":
              return (0, t.jsx)(s.TeamCreateDialog, {});
            case "joinedNewTeams":
              return (0, t.jsx)(L.JoinedTeams, { ...e.data });
            case "requestAccess":
              return (0, t.jsx)(a.TeamRequestAccessDialog, { ...e.data });
            case "upgradeTeam":
              return (0, t.jsx)(o.TeamUpgradeDialog, { ...e.data });
            case "transferChat":
              return (0, t.jsx)(P.TransferChat, { ...e.data });
            case "reassignProject":
              return (0, t.jsx)(R.ReassignProject, { ...e.data });
            case "deleteChat":
              return (0, t.jsx)(c.ChatDeleteDialog, { ...e.data });
            case "undoChanges":
              return (0, t.jsx)(u.ChatUndoChangesDialog, { ...e.data });
            case "updateChatTitle":
              return (0, t.jsx)(l.SuspendingChatRenameDialog, { ...e.data });
            case "messageDownvote":
              return (0, t.jsx)(d.ChatMessageDownvoteDialog, { ...e.data });
            case "flagBlock":
              return (0, t.jsx)(h.ChatFlagBlockDialog, { ...e.data });
            case "forkBlock":
              return (0, t.jsx)(M.ChatForkBlockDialog, { ...e.data });
            case "duplicateChat":
              return (0, t.jsx)(p.DuplicateChatDialog, { ...e.data });
            case "templateEdit":
              return (0, t.jsx)(m.TemplateEditDialog, { ...e.data });
            case "templateDelete":
              return (0, t.jsx)(f.TemplateDeleteDialog, { ...e.data });
            case "templateWizard":
              return (0, t.jsx)(g.TemplateWizardDialog, { ...e.data });
            case "createDesignSystem":
              return (0, t.jsx)(O.CreateDesignSystemDialog, { ...e.data });
            case "deleteDesignSystem":
              return (0, t.jsx)(B.DeleteDesignSystemDialog, { ...e.data });
            case "renameDesignSystem":
              return (0, t.jsx)(V.SuspendingRenameDesignSystemDialog, {
                ...e.data,
              });
            case "importDesignSystem":
              return (0, t.jsx)(G.ImportDesignSystemDialog, { ...e.data });
            case "feedback":
              return (0, t.jsx)(x.FeedbackDialog, { ...e.data });
            case "connectRepo":
              return (0, t.jsx)(v.ConnectRepoDialog, { ...e.data });
            case "createPullRequest":
            case "createPullRequest":
              return (0, t.jsx)(Q.CreatePullRequestDialog, {});
            case "buyMoreCredits":
              return (0, t.jsx)(y.BuyMoreCreditsTwoStepDialog, { ...e.data });
            case "cancelPlan":
              return (0, t.jsx)(b.CancelPlanDialog, { ...e.data });
            case "upgradePlan":
              return (0, t.jsx)(j.UpgradePlanDialog, { ...e.data });
            case "addPaymentMethod":
              return (0, t.jsx)(w.AddPaymentMethodDialog, { ...e.data });
            case "redeemCode":
              return (0, t.jsx)(C.RedeemCodeDialog, { ...e.data });
            case "studentVerificationSuccess":
              return (0, t.jsx)(k.StudentVerificationSuccessDialog, {
                ...e.data,
              });
            case "passwordProtection":
              return (0, t.jsx)(T.PasswordProtection, { ...e.data });
            case "attachmentPreview":
              return (0, t.jsx)(F.AttachmentPreviewDialog, { ...e.data });
            case "newFeatureDialog":
              return (0, t.jsx)(_.NewFeatureDialog, { ...e.data });
            case "envVarDetails":
              return (0, t.jsx)(z.EnvVarDetailsDialog, { ...e.data });
            case "createEnvVar":
              return (0, t.jsx)(H.CreateEnvVarDialog, { ...e.data });
            case "editEnvVar":
              return (0, t.jsx)($.EditEnvVarDialog, { ...e.data });
            case "deleteEnvVar":
              return (0, t.jsx)(U.DeleteEnvVarDialog, { ...e.data });
            case "referral":
              return (0, t.jsx)(W.ReferralDialog, {});
            case "gitImport":
              return (0, t.jsx)(q.GitImportDialog, { ...e.data });
            case "createVercelProject":
              return (0, t.jsx)(Z.CreateVercelProjectDialog, { ...e.data });
            case "snowflakeRole":
              return (0, t.jsx)(K.SnowflakeRoleDialog, { ...e.data });
            case "manageIntegration":
              return (0, t.jsx)(Y.ManageIntegrationDialog, { ...e.data });
            case "settings":
              return (0, t.jsx)(J.SettingsDialog, {
                initialSection: e.data?.initialSection,
              });
            case "connectMcpServer":
              return (0, t.jsx)(X.ConnectMcpServerDialog, { ...e.data });
            case "createMcpServer":
              return (0, t.jsx)(ee.CreateMcpServerDialog, {
                ...(e.data || {}),
              });
            case "quickProjectCreate":
              return (0, t.jsx)(eg, { ...(e.data || {}) });
            case "gitTutorial":
              return (0, t.jsx)(tw, {});
            default:
              return null;
          }
        }, [e]);
      return (0, t.jsxs)(t.Fragment, { children: [(0, t.jsx)(tS, {}), S] });
    }
    function tk(e, t, n) {
      let r = new URLSearchParams(e);
      null === n ? r.delete(t) : r.set(t, n);
      let i = `${window.location.pathname}${r.toString() ? "?" : ""}${r.toString()}`;
      window.history.replaceState({}, "", i);
    }
    function tS() {
      let e = (0, S.useSearchParams)(),
        t = (0, S.useRouter)(),
        { user: r } = (0, N.useUser)(),
        { setShowSignInDialog: s } = (0, D.useSignInDialog)(),
        { setPaymentDialogPlan: a } = (0, I.usePaymentDialog)(),
        o = e.get("premium") ? "v0-level3" : null,
        l = e.get("buyMore") && "0" !== e.get("buyMore"),
        c = e.get("redeemCode"),
        u = e.get("studentVerification"),
        d = e.get("showReferral") && "1" === e.get("showReferral"),
        h = e.get("upgrade") && "1" === e.get("upgrade");
      return (
        (0, i.useEffect)(() => {
          "true" === e.get("oauth_success") &&
            (A.toast.success("MCP connected successfully"),
            tk(e, "oauth_success", null));
        }, [e]),
        (0, i.useEffect)(() => {
          if (o)
            return r
              ? (r.realv0Plan ?? r.v0plan) === "v0-level3"
                ? void tk(e, "premium", null)
                : (a(o), void tk(e, "premium", null))
              : void s({
                  content: !1,
                  customMessage: "Create an account to subscribe to Premium",
                });
          if (c) {
            ((0, n.openDialog)({
              type: "redeemCode",
              data: { prefilledCode: c },
            }),
              tk(e, "redeemCode", null));
            return;
          }
          if (u) {
            (tk(e, "studentVerification", null),
              (0, E.verifyStudentCode)(u).then((e) => {
                e.ok
                  ? ((0, n.openDialog)({
                      type: "studentVerificationSuccess",
                      data: {
                        email: e.value.email,
                        alreadyVerified: e.value.alreadyVerified,
                      },
                    }),
                    (0, i.startTransition)(() => t.refresh()))
                  : A.toast.error(e.error);
              }));
            return;
          }
          (l &&
            ((0, n.openDialog)({
              type: "buyMoreCredits",
              data: { onSuccess: () => (0, i.startTransition)(t.refresh) },
            }),
            tk(e, "buyMore", null)),
            d &&
              ((0, n.openDialog)({ type: "referral" }),
              tk(e, "showReferral", null)),
            h &&
              ((0, n.openDialog)({ type: "upgradePlan" }),
              tk(e, "upgrade", null)));
        }, [o, l, r, t, c, u, a, e, s, d]),
        null
      );
    }
  },
  60520,
  (e) => {
    e.v({
      shimmer: "shimmer-children-module__Q2XpNG__shimmer",
      shimmerAnimation: "shimmer-children-module__Q2XpNG__shimmerAnimation",
    });
  },
  919409,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(675120),
      r = e.i(403055),
      i = e.i(60520);
    function s({
      children: e,
      duration: s = 0.65,
      shimmer: a,
      justify: o = "start",
      autoTransitionKey: l = !1,
    }) {
      return (0, t.jsx)(n.TransitionNode, {
        childClassName: "truncate",
        duration: 0.35,
        delay: 0.35 * 0.66,
        justify: o,
        renderKey: l ? void 0 : a ? "shimmer" : "text",
        children: a
          ? (0, t.jsx)(
              "div",
              {
                className: (0, r.cn)(
                  i.default.shimmer,
                  "[--shimmer-base:theme(colors.gray.900)] [--shimmer-highlight:theme(colors.gray.300)]",
                ),
                style: { animationDuration: `${s}s` },
                children: e,
              },
              "shimmer",
            )
          : (0, t.jsx)(
              "div",
              {
                className: "transition-colors duration-100 truncate",
                children: e,
              },
              "text",
            ),
      });
    }
    e.s(["ShimmerChildren", () => s]);
  },
  104720,
  (e) => {
    e.v({
      "bg-close": "primitives-module__gWXxya__bg-close",
      "bg-open": "primitives-module__gWXxya__bg-open",
      content: "primitives-module__gWXxya__content",
      renderedParts: "primitives-module__gWXxya__renderedParts",
      timelineLine: "primitives-module__gWXxya__timelineLine",
    });
  },
  737374,
  (e) => {
    e.v({ overflowMessage: "messages-module__LvwksW__overflowMessage" });
  },
  397036,
  424725,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(758118),
      r = e.i(365290),
      i = t,
      s = e.i(230766),
      a = e.i(576191),
      o = e.i(754853),
      l = e.i(32170),
      c = e.i(819969),
      u = e.i(393799);
    function d({ messageAuthorId: e, rounded: t, size: n = "sm" }) {
      let { user: r } = (0, l.useUser)(),
        { atoms: a } = (0, c.useCurrentChat)(),
        d = (0, u.useAtomValue)(a.authorId),
        h = e || d || r?.id;
      return h
        ? (0, i.jsx)(s.AvatarUser, { size: n, userId: h, rounded: t })
        : (0, i.jsx)(s.Avatar, {
            size: n,
            rounded: t,
            children: (0, i.jsx)(o.AvatarIcon, {}),
          });
    }
    let h = a.default.memo(d);
    var p = e.i(3401),
      m = e.i(304649),
      f = a,
      g = e.i(610726),
      x = e.i(657736),
      v = e.i(753533),
      y = u,
      b = e.i(9654),
      j = e.i(142219),
      w = e.i(737374);
    let C = (0, f.memo)(function ({ ...e }) {
        let {
            id: i,
            children: s,
            className: a,
            effect: o,
            onEffectClick: l,
            actions: c,
            hoverActions: u,
            align: d,
            hideActions: h = !1,
          } = e,
          [p, x] = (0, f.useState)(!1),
          v = (0, f.useRef)(null);
        (0, g.useOnClickOutside)(v, () => x(!1), "touchstart");
        let y = { "data-touch-active": p, onTouchStart: () => x(!0), ref: v },
          b = (0, f.useRef)(!1);
        (0, f.useEffect)(() => {
          b.current = !0;
        }, []);
        let j = (0, f.useMemo)(
          () =>
            (0, t.jsx)("div", {
              className:
                "flex items-center gap-1 group-hover:opacity-100 group-focus-within:opacity-100 opacity-0",
              style: { ...(0, r.transitionStyles)(["opacity"]) },
              children: u,
            }),
          [u],
        );
        return (0, t.jsxs)(
          "div",
          {
            id: i,
            className: (0, m.cn)(
              "@container/message group w-full [&_code]:break-all break-words flex flex-col gap-2",
              a,
              {
                "opacity-50": "dimmed" === o,
                "origin-right items-end": "end" === d,
                "origin-left": "start" === d,
              },
            ),
            style: { ...e.style, ...(0, r.transitionStyles)(["opacity"]) },
            "data-testid": "message",
            role: "listitem",
            onClick: l,
            ...y,
            children: [
              s,
              c || u
                ? (0, t.jsxs)("div", {
                    ...(0, n.a11yHideIf)(h),
                    className: (0, m.cn)("flex items-center gap-1", {
                      "justify-end flex-row-reverse": "end" === d,
                      "justify-start": "start" === d,
                      "ml-[-2px]": "start" === d,
                      "mr-[-2px]": "end" === d,
                    }),
                    style: {
                      ...(0, n.visibleStylesIf)(!h),
                      transform: `translateY(${8 * !!h}px)`,
                      ...(0, r.transitionStyles)(["opacity", "transform"], {
                        duration: 400,
                      }),
                    },
                    children: [c, j],
                  })
                : null,
            ],
          },
          i,
        );
      }),
      k = (0, f.memo)(function ({ ...e }) {
        return (0, t.jsx)(C, {
          ...e,
          align: "start",
          className: (0, m.cn)("w-full group bot-message", e.className),
          style: e.style,
          children: e.children,
        });
      }),
      S = (0, f.memo)(function ({
        messageAuthorId: e,
        attachments: n,
        awaitingResponse: i,
        messageLength: s,
        ...a
      }) {
        let o = (0, y.useAtomValue)(M).has(a.id),
          l = !!s && s > 500 && !o,
          c = () => {
            T(a.id);
          };
        return (0, t.jsxs)(C, {
          ...a,
          align: "end",
          children: [
            (0, t.jsx)("div", {
              className: "flex items-center gap-1.5 pr-1",
              children: e
                ? (0, t.jsx)(p.UserPreviewLink, {
                    userId: e,
                    children: (0, t.jsx)(h, {
                      rounded: !0,
                      size: "xs",
                      messageAuthorId: e,
                    }),
                  })
                : (0, t.jsx)(h, {
                    rounded: !0,
                    size: "xs",
                    messageAuthorId: e,
                  }),
            }),
            (0, t.jsx)(x.motion.div, {
              ...A(i, 0.3),
              className:
                "flex items-end sm:max-w-[min(fit-content,80%)] max-w-[90%] origin-top-right",
              children: (0, t.jsxs)("div", {
                className: (0, m.cn)(
                  "border border-v0-gray-200 text-left relative rounded-[16px] bg-v0-gray-200 px-3 py-1.5 min-w-0 break-words",
                  "group/message-bubble",
                  {
                    "bg-v0-background-100 border-v0-blue-500 border-dashed animate-pulse":
                      "pulse" === a.effect,
                    "cursor-pointer": l,
                  },
                ),
                style: {
                  ...(0, r.transitionStyles)(["border-color", "background"], {
                    duration: 300,
                  }),
                  animationDuration: "0.8s",
                },
                onClick: c,
                children: [
                  (0, t.jsx)(L, {
                    className: (0, m.cn)("absolute -top-[6px] right-0", {
                      "scale-0": "pulse" === a.effect,
                    }),
                    style: {
                      ...(0, r.transitionStyles)(["scale", "fill"], {
                        duration: 300,
                      }),
                    },
                  }),
                  (0, t.jsx)("div", {
                    className: (0, m.cn)("relative", {
                      "max-h-[400px] overflow-hidden": l,
                      [w.default.overflowMessage || ""]: l,
                    }),
                    children: a.children,
                  }),
                  l &&
                    (0, t.jsx)("span", {
                      className:
                        "text-v0-gray-900 justify-center text-label-14 flex inset-x-0 items-center h-9 absolute bottom-0 cursor-pointer group-hover/message-bubble:text-gray-900",
                      style: { ...(0, r.transitionStyles)(["color"]) },
                      children: "Show full message",
                    }),
                ],
              }),
            }),
            n,
          ],
        });
      }),
      N = { duration: 0.6, type: "spring", bounce: 0.4 };
    function E(e, t = 0) {
      return {
        animate: { opacity: 1, scale: 1, y: 0 },
        initial: e ? { opacity: 0, scale: 0.93, y: -12 } : {},
        transition: { ...N, delay: t },
      };
    }
    let A = (0, v.cacheFunctionResult)(E),
      D = (e, t = 0) => ({
        animate: { opacity: 1, y: 0 },
        initial: e ? { opacity: 0, y: 6 } : {},
        transition: { ...N, delay: t },
      }),
      I = (0, v.cacheFunctionResult)(D),
      M = (0, b.atom)(new Set()),
      T = (e) => {
        let t = new Set(j.store.get(M)).add(e);
        j.store.set(M, t);
      };
    function L({ className: e, style: n }) {
      return (0, t.jsx)("svg", {
        width: "16",
        height: "16",
        className: e,
        style: n,
        fill: "var(--v0-gray-200)",
        children: (0, t.jsx)("path", {
          d: "M-2.70729e-07 6.19355C8 6.19355 12 4.12903 16 6.99382e-07C16 6.70968 16 13.5 10 16L-2.70729e-07 6.19355Z",
        }),
      });
    }
    e.s(
      [
        "BotMessageLayout",
        0,
        k,
        "UserMessageLayout",
        0,
        S,
        "motionReplyAnimationIf",
        0,
        I,
      ],
      397036,
    );
    var P = t,
      R = m,
      F = e.i(672001),
      _ = e.i(89440),
      O = t,
      B = a,
      V = e.i(251875),
      z = e.i(403055);
    let H = ({ openDelay: e = 100, closeDelay: t = 150, ...n }) =>
      (0, O.jsx)(V.Root, { openDelay: e, closeDelay: t, ...n });
    H.displayName = V.Root.displayName;
    let $ = V.Trigger,
      U = V.Portal,
      G = B.forwardRef(
        ({ className: e, align: t = "center", sideOffset: n = 4, ...r }, i) =>
          (0, O.jsx)(U, {
            children: (0, O.jsx)(V.Content, {
              ref: i,
              align: t,
              sideOffset: n,
              style: {
                transformOrigin:
                  "var(--radix-hover-card-content-transform-origin)",
              },
              className: (0, z.cn)(
                "bg-v0-background-100 z-50 w-84 overflow-hidden rounded-xl shadow-md outline-hidden",
                "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",
                "data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",
                "data-[side=bottom]:slide-out-to-top-1 data-[side=left]:slide-out-to-left-1 data-[side=right]:slide-out-to-right-1 data-[side=top]:slide-out-to-bottom-1",
                e,
              ),
              ...r,
            }),
          }),
      );
    G.displayName = V.Content.displayName;
    var W = e.i(654335);
    let q = (0, _.cva)(
      "text-[13px] border-v0-alpha-400 group relative max-w-[200px] inline-flex h-[24px] overflow-hidden items-center rounded-[6px] border transition-colors",
      {
        variants: {
          variant: {
            default: "bg-v0-gray-100 [--hover-color:theme(colors.gray.200)]",
            refinement:
              "bg-v0-blue-300 text-v0-blue-900 [--hover-color:theme(colors.blue.200)]",
            warning:
              "bg-v0-amber-200 text-v0-amber-700 [--hover-color:theme(colors.amber.200)]",
          },
          hasHover: {
            true: "hover:bg-[var(--hover-color)] cursor-pointer",
            false: "cursor-text",
          },
        },
      },
    );
    function Z({
      prefix: e,
      children: t,
      variant: n = "default",
      onClick: r,
      onRemove: i,
      hoverContent: s,
      canRemove: a,
      href: o,
      className: l,
      ...c
    }) {
      let u = a && i,
        d = !!(s || r || o),
        h = o ? W.default : "span";
      return (0, P.jsxs)(H, {
        closeDelay: 50,
        openDelay: 100,
        children: [
          (0, P.jsxs)("span", {
            ...c,
            "data-context-pill": "true",
            className: (0, R.cn)(q({ variant: n, hasHover: d, className: l })),
            children: [
              (0, P.jsxs)(h, {
                href: o,
                className: (0, R.cn)(
                  "flex items-center gap-1.5 overflow-hidden h-full pl-1 !no-underline font-normal",
                  e ? "pl-1" : "pl-2",
                ),
                onClick: r,
                children: [
                  e
                    ? (0, P.jsx)("div", {
                        className:
                          "relative flex h-4 min-w-4 items-center justify-center [&_svg]:scale-90",
                        children: e,
                      })
                    : null,
                  (0, P.jsx)($, {
                    asChild: !0,
                    children: (0, P.jsx)("span", {
                      className: (0, R.cn)(
                        "truncate inline overflow-hidden pr-1.5 transition-all",
                        u &&
                          "group-hover:[mask-image:linear-gradient(to_right,black_calc(100%-32px),transparent_calc(100%-20px),transparent_100%)]",
                      ),
                      children: t,
                    }),
                  }),
                ],
              }),
              u
                ? (0, P.jsx)("button", {
                    "aria-label": "Remove context item",
                    type: "button",
                    onClick: i,
                    className:
                      "absolute right-1 z-10 text-v0-gray-900 opacity-0 group-hover:opacity-100 focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-v0-caveat-focus-ring-tab focus-visible:bg-v0-gray-100 focus-visible:ring-offset-background rounded-sm",
                    children: (0, P.jsx)(F.CrossSmall, {}),
                  })
                : null,
            ],
          }),
          s
            ? (0, P.jsx)(G, {
                side: "top",
                sideOffset: 8,
                className:
                  "border-none material-menu min-w-[var(--radix-hover-card-trigger-width)] w-auto",
                children: s,
              })
            : null,
        ],
      });
    }
    function K({ children: e, className: t }) {
      return (0, P.jsx)("div", {
        className: (0, R.cn)("text-v0-gray-900", t),
        children: e,
      });
    }
    e.s(["ContextPill", () => Z, "PillIcon", () => K], 424725);
  },
  454471,
  2072,
  407021,
  653168,
  (e) => {
    "use strict";
    var t = e.i(877318),
      n = e.i(886195),
      r = e.i(175865),
      i = e.i(654935);
    let s = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 6.5V13.5C13.5 14.0523 13.0523 14.5 12.5 14.5H9V12.5H7V10.5H9V8.5H7V6.5H5V8.5H7V10.5H5V12.5H7V14.5H4.5C3.94772 14.5 3.5 14.0523 3.5 13.5V1.5H8V5V6.5H9.5H13.5ZM12.8787 5L9.5 1.62132V5H12.8787ZM8 0H9.58579C9.851 0 10.1054 0.105357 10.2929 0.292893L14.7071 4.70711C14.8946 4.89464 15 5.149 15 5.41421V13.5C15 14.8807 13.8807 16 12.5 16H4.5C3.11929 16 2 14.8807 2 13.5V1.5V0H3.5H8Z" fill="currentColor"/>',
    );
    e.s(["FileZip", 0, s], 2072);
    let a = (0,
      t.withNewIcon)(`<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
`),
      o = (0,
      t.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>`);
    var l = e.i(268375),
      c = e.i(802008),
      u = e.i(591412),
      d = e.i(847396);
    let h = (0,
      t.withNewIcon)(`<path d="M6.71709 5.81132H8.67935C9.8869 5.81132 9.8869 7.01887 8.67935 7.01887H6.71709V5.81132ZM2.03784 11.3962H8.07558V9.73585H6.71709V8.5283H8.22652C9.8869 8.5283 8.98124 11.3962 10.3397 11.3962H14.1133V8.5283H13.2077V8.83019C13.2077 10.0377 11.8492 9.88679 11.6982 9.13208C11.5473 8.37736 10.9435 7.77359 10.7926 7.77359C13.0567 6.56604 11.6982 4.15094 9.8869 4.15094H2.79256V5.81132H4.30199V9.73585H2.03784V11.3962Z" fill="currentColor" stroke="currentColor" stroke-width="0.150943" stroke-linejoin="round"/>
  <path d="M8.00009 14.4906C11.5847 14.4906 14.4907 11.5846 14.4907 8C14.4907 4.41536 11.5847 1.50943 8.00009 1.50943C4.41545 1.50943 1.50952 4.41536 1.50952 8C1.50952 11.5846 4.41545 14.4906 8.00009 14.4906Z" stroke="currentColor" stroke-width="1.35849" fill="transparent" />
  <path d="M14.9436 8.45283L15.6983 8L14.9436 7.54717V8.45283Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.7218 9.79872L15.5503 9.50183L14.8984 8.91046L14.7218 9.79872Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.2418 11.0755L15.1124 10.9459L14.5884 10.2388L14.2418 11.0755Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.5217 12.2341L14.4008 12.2768L14.0249 11.481L13.5217 12.2341Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.5896 13.2299L13.4434 13.4434L13.23 12.5895L12.5896 13.2299Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.4811 14.0248L12.2769 14.4007L12.2341 13.5216L11.4811 14.0248Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M10.239 14.5882L10.9461 15.1121L11.0757 14.2416L10.239 14.5882Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.91057 14.8983L9.50194 15.5502L9.79883 14.7216L8.91057 14.8983Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.54722 14.9434L8.00005 15.6981L8.45288 14.9434H7.54722Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.20134 14.7216L6.49823 15.5502L7.0896 14.8983L6.20134 14.7216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.92475 14.2416L5.0543 15.1121L5.76147 14.5882L4.92475 14.2416Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.76601 13.5216L3.72323 14.4007L4.51904 14.0248L3.76601 13.5216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.77025 12.5895L2.55678 13.4434L3.41064 13.2299L2.77025 12.5895Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.97536 11.481L1.59941 12.2768L2.47852 12.2341L1.97536 11.481Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.41196 10.2388L0.887987 10.9459L1.75854 11.0755L1.41196 10.2388Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.10188 8.91046L0.450006 9.50183L1.27856 9.79872L1.10188 8.91046Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.05664 7.54717L0.301924 8L1.05664 8.45284V7.54717Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.27849 6.20128L0.449934 6.49817L1.10181 7.08954L1.27849 6.20128Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.75845 4.92452L0.887888 5.05406L1.41187 5.76124L1.75845 4.92452Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.4785 3.76594L1.5994 3.72316L1.97534 4.51897L2.4785 3.76594Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.41066 2.77008L2.5568 2.55661L2.77026 3.41048L3.41066 2.77008Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.51914 1.9752L3.72333 1.59925L3.76611 2.47836L4.51914 1.9752Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M5.76128 1.41185L5.0541 0.887872L4.92456 1.75843L5.76128 1.41185Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.08967 1.10168L6.49831 0.449804L6.20142 1.27836L7.08967 1.10168Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.45302 1.05661L8.00019 0.301889L7.54736 1.05661L8.45302 1.05661Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M9.7989 1.27836L9.50201 0.449804L8.91064 1.10168L9.7989 1.27836Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.0755 1.75843L10.9459 0.887873L10.2388 1.41185L11.0755 1.75843Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.2342 2.47835L12.277 1.59925L11.4812 1.9752L12.2342 2.47835Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.23 3.41048L13.4435 2.55661L12.5896 2.77008L13.23 3.41048Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.0249 4.51897L14.4008 3.72316L13.5217 3.76594L14.0249 4.51897Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.5883 5.76124L15.1123 5.05406L14.2417 4.92452L14.5883 5.76124Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.8984 7.08954L15.5502 6.49817L14.7217 6.20128L14.8984 7.08954Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.94336 1.66038L7.99996 2.71698L9.05657 1.66038H6.94336Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M13.7026 5.03606L13.0243 6.36746L14.3557 7.04584L13.7026 5.03606Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M12.5811 12.5078L11.1052 12.2741L10.8714 13.7499L12.5811 12.5078Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M5.12842 13.7499L4.89466 12.274L3.4188 12.5078L5.12842 13.7499Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M1.64404 7.04584L2.97544 6.36746L2.29706 5.03606L1.64404 7.04584Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>`),
      p = (0, t.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.25 1H5.5V1.75V9.40135C5.05874 9.14609 4.54643 9 4 9C2.34315 9 1 10.3431 1 12C1 13.6569 2.34315 15 4 15C5.65685 15 7 13.6569 7 12C7 11.9158 6.99653 11.8324 6.98973 11.75H7V11V2.5H13.5V6.90135C13.0587 6.64609 12.5464 6.5 12 6.5C10.3431 6.5 9 7.84315 9 9.5C9 11.1569 10.3431 12.5 12 12.5C13.6569 12.5 15 11.1569 15 9.5C15 9.41581 14.9965 9.33243 14.9897 9.25H15V8.5V1.75V1H14.25H6.25ZM10.5 9.5C10.5 10.3284 11.1716 11 12 11C12.8284 11 13.5 10.3284 13.5 9.5C13.5 8.67157 12.8284 8 12 8C11.1716 8 10.5 8.67157 10.5 9.5ZM2.5 12C2.5 12.8284 3.17157 13.5 4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12Z" fill="currentColor"/>',
      );
    e.s(["MusicalNotes", 0, p], 407021);
    let m = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM4 11.1339L4.44194 10.6919L6.51516 8.61872C6.85687 8.27701 6.85687 7.72299 6.51517 7.38128L4.44194 5.30806L4 4.86612L3.11612 5.75L3.55806 6.19194L5.36612 8L3.55806 9.80806L3.11612 10.25L4 11.1339ZM8 9.75494H8.6225H11.75H12.3725V10.9999H11.75H8.6225H8V9.75494Z" fill="currentColor"/>',
    );
    e.s(["TerminalWindow", 0, m], 653168);
    let f = (0, t.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V2.5ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1ZM6.745 6.76445L9.2161 8L6.745 9.23555V6.76445ZM11.1056 7.55279C11.4741 7.73705 11.4741 8.26295 11.1056 8.44721L6.22361 10.8882C5.89116 11.0544 5.5 10.8127 5.5 10.441L5.5 5.55902C5.5 5.18733 5.89116 4.94558 6.22361 5.1118L11.1056 7.55279Z" fill="currentColor"/>',
      ),
      g = [
        [
          (0, t.withNewIcon)(
            '<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM4.5498 9.71387C5.06006 9.19321 6 9.53835 6 10.3174V15H4.5V12.3789L4.11426 12.9297L3.5 13.8076L2.88574 12.9297L2.5 12.3789V15H1V10.3174C1 9.48634 2.06931 9.14928 2.5459 9.83008L3.5 11.1924L4.4541 9.83008L4.5498 9.71387ZM9.75 9.5C10.9926 9.5 12 10.5074 12 11.75V12.75C12 13.9926 10.9926 15 9.75 15H7.5V9.5H9.75ZM9 11V13.5H9.75C10.1642 13.5 10.5 13.1642 10.5 12.75V11.75C10.5 11.3358 10.1642 11 9.75 11H9ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["md", "markdown"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 10.5H3.75V15H2.25V10.5H1V9H5V10.5ZM9.25 10.5H7.875C7.66789 10.5 7.5 10.6679 7.5 10.875C7.5 11.0821 7.66789 11.25 7.875 11.25C8.91053 11.25 9.75 12.0895 9.75 13.125C9.75 14.1605 8.91053 15 7.875 15H6.25V13.5H7.875C8.08211 13.5 8.25 13.3321 8.25 13.125C8.25 12.9179 8.08211 12.75 7.875 12.75C6.83947 12.75 6 11.9105 6 10.875C6 9.83947 6.83947 9 7.875 9H9.25V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["ts"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V16H13V6.5H8V1.5H3V6.5H1.5V0H9.08594L9.18457 0.00488281ZM5 9V13.125C5 14.1605 4.16053 15 3.125 15C2.08947 15 1.25 14.1605 1.25 13.125V12.75H2.75V13.125C2.75 13.3321 2.91789 13.5 3.125 13.5C3.33211 13.5 3.5 13.3321 3.5 13.125V9H5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["js"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M5.25 10.5H3.75C3.33579 10.5 3 10.8358 3 11.25V12.75C3 13.1642 3.33579 13.5 3.75 13.5H5.25V15H3.75C2.50736 15 1.5 13.9926 1.5 12.75V11.25C1.5 10.0074 2.50736 9 3.75 9H5.25V10.5ZM9.5 10.5H8.125C7.91789 10.5 7.75 10.6679 7.75 10.875C7.75 11.0821 7.91789 11.25 8.125 11.25C9.16053 11.25 10 12.0895 10 13.125C10 14.1605 9.16053 15 8.125 15H6.5V13.5H8.125C8.33211 13.5 8.5 13.3321 8.5 13.125C8.5 12.9179 8.33211 12.75 8.125 12.75C7.08947 12.75 6.25 11.9105 6.25 10.875C6.25 9.83947 7.08947 9 8.125 9H9.5V10.5ZM14 10.5H12.625C12.4179 10.5 12.25 10.6679 12.25 10.875C12.25 11.0821 12.4179 11.25 12.625 11.25C13.6605 11.25 14.5 12.0895 14.5 13.125C14.5 14.1605 13.6605 15 12.625 15H11V13.5H12.625C12.8321 13.5 13 13.3321 13 13.125C13 12.9179 12.8321 12.75 12.625 12.75C11.5895 12.75 10.75 11.9105 10.75 10.875C10.75 9.83947 11.5895 9 12.625 9H14V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["css"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M7.50293 12.9111L8.48242 9H10.0283L8.77344 14.0127C8.44217 15.3348 6.56364 15.3349 6.23242 14.0127L4.97754 9H6.52344L7.50293 12.9111ZM4.25 10.5H2.875C2.66789 10.5 2.5 10.6679 2.5 10.875C2.5 11.0821 2.66789 11.25 2.875 11.25C3.91053 11.25 4.75 12.0895 4.75 13.125C4.75 14.1605 3.91053 15 2.875 15H1.25V13.5H2.875C3.08211 13.5 3.25 13.3321 3.25 13.125C3.25 12.9179 3.08211 12.75 2.875 12.75C1.83947 12.75 1 11.9105 1 10.875C1 9.83947 1.83947 9 2.875 9H4.25V10.5ZM14.25 10.5H12.75C12.3358 10.5 12 10.8358 12 11.25V12.75C12 13.1642 12.3358 13.5 12.75 13.5C13.1642 13.5 13.5 13.1642 13.5 12.75H13V11.25H15V12.75C15 13.9926 13.9926 15 12.75 15C11.5074 15 10.5 13.9926 10.5 12.75V11.25C10.5 10.0074 11.5074 9 12.75 9H14.25V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["svg"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M12.5254 12.9111L13.5049 9H15.0508L13.7959 14.0127C13.4646 15.3348 11.5861 15.3349 11.2549 14.0127L10 9H11.5459L12.5254 12.9111ZM5 10.5H3.5C3.08579 10.5 2.75 10.8358 2.75 11.25V12.75C2.75 13.1642 3.08579 13.5 3.5 13.5H5V15H3.5C2.25736 15 1.25 13.9926 1.25 12.75V11.25C1.25 10.0074 2.25736 9 3.5 9H5V10.5ZM9 10.5H7.625C7.41789 10.5 7.25 10.6679 7.25 10.875C7.25 11.0821 7.41789 11.25 7.625 11.25C8.66053 11.25 9.5 12.0895 9.5 13.125C9.5 14.1605 8.66053 15 7.625 15H6V13.5H7.625C7.83211 13.5 8 13.3321 8 13.125C8 12.9179 7.83211 12.75 7.625 12.75C6.58947 12.75 5.75 11.9105 5.75 10.875C5.75 9.83947 6.58947 9 7.625 9H9V10.5ZM9.18457 0.00488281C9.41351 0.0276021 9.62886 0.128861 9.79297 0.292969L14.207 4.70703C14.3945 4.89453 14.5 5.1489 14.5 5.41406V7.5H13V6.5H8V1.5H3V7.5H1.5V0H9.08594L9.18457 0.00488281ZM9.5 5H12.3789L9.5 2.12109V5Z" fill="currentColor" />',
          ),
          ["csv"],
        ],
        [
          (0, t.withNewIcon)(
            '<path d="M6.5 2.5H5.5C4.94772 2.5 4.5 2.94772 4.5 3.5V6.29492C4.49985 7.03976 4.1208 7.61099 3.64941 8C4.1208 8.38901 4.49986 8.96024 4.5 9.70508V12.5C4.5 13.0523 4.94772 13.5 5.5 13.5H6.5V15H5.5C4.11929 15 3 13.8807 3 12.5V9.70508C2.99985 9.49298 2.88477 9.2728 2.58398 9.07227C2.2769 8.86759 1.86075 8.75 1.5 8.75V7.25L1.6377 7.24414C1.96313 7.21875 2.31533 7.10679 2.58398 6.92773C2.88476 6.72721 2.99984 6.50702 3 6.29492V3.5C3 2.11929 4.11929 1 5.5 1H6.5V2.5ZM10.25 1C11.6307 1 12.75 2.11929 12.75 3.5V6.29492C12.7502 6.44568 12.8551 6.67125 13.2529 6.90332C13.5892 7.09949 14.0098 7.21767 14.3564 7.24414L14.5 7.25V8.75C14.1317 8.75 13.6372 8.87249 13.2529 9.09668C12.8551 9.32876 12.7502 9.55432 12.75 9.70508V12.5C12.75 13.8807 11.6307 15 10.25 15H9.25V13.5H10.25C10.8023 13.5 11.25 13.0523 11.25 12.5V9.70508C11.2502 8.93162 11.7016 8.3696 12.2002 8C11.7016 7.6304 11.2502 7.06838 11.25 6.29492V3.5C11.25 2.94772 10.8023 2.5 10.25 2.5H9.25V1H10.25Z" fill="currentColor" />',
          ),
          ["json"],
        ],
        [d.LogoReact, ["jsx", "tsx"]],
        [u.LogoPython, ["py"]],
        [h, ["rs"]],
        [a, ["go"]],
        [o, ["rb"]],
        [l.Image, ["jpg", "jpeg", "png", "gif", "ico", "webp"]],
        [f, ["mp4", "mov", "avi"]],
        [p, ["mp3", "wav", "ogg"]],
        [
          i.FileText,
          [
            "txt",
            "pdf",
            "doc",
            "docx",
            "xls",
            "xlsx",
            "ppt",
            "pptx",
            "yml",
            "yaml",
          ],
        ],
        [s, ["zip"]],
        [c.LockClosed, ["lock"]],
        [n.Code, ["html", "scss", "less", "c", "cpp", "h", "hpp"]],
      ];
    function x(e) {
      if ("console logs" === e.toLowerCase()) return m;
      let t = e.split(".").pop()?.toLowerCase();
      if (!t) return r.File;
      for (let [e, n] of g) if (n.includes(t)) return e;
      return r.File;
    }
    e.s(["filePathToIcon", () => x], 454471);
  },
  516870,
  (e) => {
    "use strict";
    var t = e.i(576191);
    function n({ active: e, scrollRef: n, scrollInterval: r = 600 }) {
      let i = (0, t.useRef)(!1);
      (0, t.useEffect)(() => {
        let t = n.current;
        if (!t || !e) return;
        i.current = !1;
        let s = () => {
            t.scrollTo({ top: t.scrollTop, behavior: "auto" });
          },
          a = (e) => {
            e.deltaY < 0 && ((i.current = !0), s());
          },
          o = () => {
            ((i.current = !0), s());
          },
          l = (e) => {
            ["ArrowUp", "PageUp", "Home", "Space"].includes(e.code) &&
              ((i.current = !0), s());
          },
          c = () => {
            t.scrollTop >= t.scrollHeight - t.clientHeight - 50 &&
              (i.current = !1);
          };
        (t.addEventListener("wheel", a, { passive: !0 }),
          t.addEventListener("touchstart", o, { passive: !0 }),
          t.addEventListener("keydown", l),
          t.addEventListener("scroll", c, { passive: !0 }));
        let u = setInterval(() => {
          i.current || t.scrollTo({ top: t.scrollHeight, behavior: "smooth" });
        }, r);
        return () => {
          (t.removeEventListener("wheel", a),
            t.removeEventListener("touchstart", o),
            t.removeEventListener("keydown", l),
            t.removeEventListener("scroll", c),
            clearInterval(u));
        };
      }, [n, e, r]);
      let s = (0, t.useCallback)(() => {
          let e = n.current;
          e && e.scrollTo({ top: e.scrollHeight, behavior: "auto" });
        }, [n]),
        a = (0, t.useCallback)(() => {
          i.current = !1;
          let e = n.current;
          e && e.scrollTo({ top: e.scrollHeight, behavior: "auto" });
        }, [n]),
        o = (0, t.useCallback)(() => {
          let e = n.current;
          e &&
            ((i.current = !0),
            e.scrollTo({ top: e.scrollTop, behavior: "auto" }));
        }, [n]);
      return {
        forceUserControlRef: i,
        scrollToBottom: s,
        reenableAutoscroll: a,
        cancelAutoscrollNow: o,
      };
    }
    e.s(["useAutoScroll", () => n]);
  },
  745587,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(418625);
    function r({ blockId: e, loadingPath: r, files: i }) {
      let { data: s, mutate: a } = (0, n.default)(["block:activeFile", e]),
        { data: o, mutate: l } = (0, n.default)(["block:autoSwitch", e]),
        c = void 0 === o || o,
        u = (0, t.useMemo)(() => {
          let e = i?.findLast((e) => !e.isMerged)?.meta.file;
          return e || i?.[0]?.meta.file;
        }, [i, e]),
        d = s;
      return (
        c && r && (d = r),
        d || (d = u),
        {
          activeFilePath: d,
          setActiveFilePath: a,
          autoSwitch: c,
          setAutoSwitch: l,
        }
      );
    }
    function i({ blockId: e }) {
      let { mutate: t } = (0, n.default)(["block:activeFile", e]);
      return t;
    }
    e.s(["useActiveFile", () => r, "useSetActiveFile", () => i]);
  },
  493218,
  (e, t, n) => {
    !(function () {
      "use strict";
      var e = {
          114: function (e) {
            function t(e) {
              if ("string" != typeof e)
                throw TypeError(
                  "Path must be a string. Received " + JSON.stringify(e),
                );
            }
            function n(e, t) {
              for (
                var n, r = "", i = 0, s = -1, a = 0, o = 0;
                o <= e.length;
                ++o
              ) {
                if (o < e.length) n = e.charCodeAt(o);
                else if (47 === n) break;
                else n = 47;
                if (47 === n) {
                  if (s === o - 1 || 1 === a);
                  else if (s !== o - 1 && 2 === a) {
                    if (
                      r.length < 2 ||
                      2 !== i ||
                      46 !== r.charCodeAt(r.length - 1) ||
                      46 !== r.charCodeAt(r.length - 2)
                    ) {
                      if (r.length > 2) {
                        var l = r.lastIndexOf("/");
                        if (l !== r.length - 1) {
                          (-1 === l
                            ? ((r = ""), (i = 0))
                            : (i =
                                (r = r.slice(0, l)).length -
                                1 -
                                r.lastIndexOf("/")),
                            (s = o),
                            (a = 0));
                          continue;
                        }
                      } else if (2 === r.length || 1 === r.length) {
                        ((r = ""), (i = 0), (s = o), (a = 0));
                        continue;
                      }
                    }
                    t && (r.length > 0 ? (r += "/..") : (r = ".."), (i = 2));
                  } else
                    (r.length > 0
                      ? (r += "/" + e.slice(s + 1, o))
                      : (r = e.slice(s + 1, o)),
                      (i = o - s - 1));
                  ((s = o), (a = 0));
                } else 46 === n && -1 !== a ? ++a : (a = -1);
              }
              return r;
            }
            function r(e, t) {
              var n = t.dir || t.root,
                r = t.base || (t.name || "") + (t.ext || "");
              return n ? (n === t.root ? n + r : n + e + r) : r;
            }
            var i = {
              resolve: function () {
                for (
                  var e, r, i = "", s = !1, a = arguments.length - 1;
                  a >= -1 && !s;
                  a--
                )
                  (a >= 0
                    ? (r = arguments[a])
                    : (void 0 === e && (e = ""), (r = e)),
                    t(r),
                    0 !== r.length &&
                      ((i = r + "/" + i), (s = 47 === r.charCodeAt(0))));
                if (((i = n(i, !s)), s))
                  if (i.length > 0) return "/" + i;
                  else return "/";
                return i.length > 0 ? i : ".";
              },
              normalize: function (e) {
                if ((t(e), 0 === e.length)) return ".";
                var r = 47 === e.charCodeAt(0),
                  i = 47 === e.charCodeAt(e.length - 1);
                return (0 !== (e = n(e, !r)).length || r || (e = "."),
                e.length > 0 && i && (e += "/"),
                r)
                  ? "/" + e
                  : e;
              },
              isAbsolute: function (e) {
                return (t(e), e.length > 0 && 47 === e.charCodeAt(0));
              },
              join: function () {
                if (0 == arguments.length) return ".";
                for (var e, n = 0; n < arguments.length; ++n) {
                  var r = arguments[n];
                  (t(r),
                    r.length > 0 && (void 0 === e ? (e = r) : (e += "/" + r)));
                }
                return void 0 === e ? "." : i.normalize(e);
              },
              relative: function (e, n) {
                if (
                  (t(e),
                  t(n),
                  e === n || (e = i.resolve(e)) === (n = i.resolve(n)))
                )
                  return "";
                for (var r = 1; r < e.length && 47 === e.charCodeAt(r); ++r);
                for (
                  var s = e.length, a = s - r, o = 1;
                  o < n.length && 47 === n.charCodeAt(o);
                  ++o
                );
                for (
                  var l = n.length - o, c = a < l ? a : l, u = -1, d = 0;
                  d <= c;
                  ++d
                ) {
                  if (d === c) {
                    if (l > c) {
                      if (47 === n.charCodeAt(o + d)) return n.slice(o + d + 1);
                      else if (0 === d) return n.slice(o + d);
                    } else
                      a > c &&
                        (47 === e.charCodeAt(r + d)
                          ? (u = d)
                          : 0 === d && (u = 0));
                    break;
                  }
                  var h = e.charCodeAt(r + d);
                  if (h !== n.charCodeAt(o + d)) break;
                  47 === h && (u = d);
                }
                var p = "";
                for (d = r + u + 1; d <= s; ++d)
                  (d === s || 47 === e.charCodeAt(d)) &&
                    (0 === p.length ? (p += "..") : (p += "/.."));
                return p.length > 0
                  ? p + n.slice(o + u)
                  : ((o += u), 47 === n.charCodeAt(o) && ++o, n.slice(o));
              },
              _makeLong: function (e) {
                return e;
              },
              dirname: function (e) {
                if ((t(e), 0 === e.length)) return ".";
                for (
                  var n = e.charCodeAt(0),
                    r = 47 === n,
                    i = -1,
                    s = !0,
                    a = e.length - 1;
                  a >= 1;
                  --a
                )
                  if (47 === (n = e.charCodeAt(a))) {
                    if (!s) {
                      i = a;
                      break;
                    }
                  } else s = !1;
                return -1 === i
                  ? r
                    ? "/"
                    : "."
                  : r && 1 === i
                    ? "//"
                    : e.slice(0, i);
              },
              basename: function (e, n) {
                if (void 0 !== n && "string" != typeof n)
                  throw TypeError('"ext" argument must be a string');
                t(e);
                var r,
                  i = 0,
                  s = -1,
                  a = !0;
                if (void 0 !== n && n.length > 0 && n.length <= e.length) {
                  if (n.length === e.length && n === e) return "";
                  var o = n.length - 1,
                    l = -1;
                  for (r = e.length - 1; r >= 0; --r) {
                    var c = e.charCodeAt(r);
                    if (47 === c) {
                      if (!a) {
                        i = r + 1;
                        break;
                      }
                    } else
                      (-1 === l && ((a = !1), (l = r + 1)),
                        o >= 0 &&
                          (c === n.charCodeAt(o)
                            ? -1 == --o && (s = r)
                            : ((o = -1), (s = l))));
                  }
                  return (
                    i === s ? (s = l) : -1 === s && (s = e.length),
                    e.slice(i, s)
                  );
                }
                for (r = e.length - 1; r >= 0; --r)
                  if (47 === e.charCodeAt(r)) {
                    if (!a) {
                      i = r + 1;
                      break;
                    }
                  } else -1 === s && ((a = !1), (s = r + 1));
                return -1 === s ? "" : e.slice(i, s);
              },
              extname: function (e) {
                t(e);
                for (
                  var n = -1, r = 0, i = -1, s = !0, a = 0, o = e.length - 1;
                  o >= 0;
                  --o
                ) {
                  var l = e.charCodeAt(o);
                  if (47 === l) {
                    if (!s) {
                      r = o + 1;
                      break;
                    }
                    continue;
                  }
                  (-1 === i && ((s = !1), (i = o + 1)),
                    46 === l
                      ? -1 === n
                        ? (n = o)
                        : 1 !== a && (a = 1)
                      : -1 !== n && (a = -1));
                }
                return -1 === n ||
                  -1 === i ||
                  0 === a ||
                  (1 === a && n === i - 1 && n === r + 1)
                  ? ""
                  : e.slice(n, i);
              },
              format: function (e) {
                if (null === e || "object" != typeof e)
                  throw TypeError(
                    'The "pathObject" argument must be of type Object. Received type ' +
                      typeof e,
                  );
                return r("/", e);
              },
              parse: function (e) {
                t(e);
                var n,
                  r = { root: "", dir: "", base: "", ext: "", name: "" };
                if (0 === e.length) return r;
                var i = e.charCodeAt(0),
                  s = 47 === i;
                s ? ((r.root = "/"), (n = 1)) : (n = 0);
                for (
                  var a = -1, o = 0, l = -1, c = !0, u = e.length - 1, d = 0;
                  u >= n;
                  --u
                ) {
                  if (47 === (i = e.charCodeAt(u))) {
                    if (!c) {
                      o = u + 1;
                      break;
                    }
                    continue;
                  }
                  (-1 === l && ((c = !1), (l = u + 1)),
                    46 === i
                      ? -1 === a
                        ? (a = u)
                        : 1 !== d && (d = 1)
                      : -1 !== a && (d = -1));
                }
                return (
                  -1 === a ||
                  -1 === l ||
                  0 === d ||
                  (1 === d && a === l - 1 && a === o + 1)
                    ? -1 !== l &&
                      (0 === o && s
                        ? (r.base = r.name = e.slice(1, l))
                        : (r.base = r.name = e.slice(o, l)))
                    : (0 === o && s
                        ? ((r.name = e.slice(1, a)), (r.base = e.slice(1, l)))
                        : ((r.name = e.slice(o, a)), (r.base = e.slice(o, l))),
                      (r.ext = e.slice(a, l))),
                  o > 0 ? (r.dir = e.slice(0, o - 1)) : s && (r.dir = "/"),
                  r
                );
              },
              sep: "/",
              delimiter: ":",
              win32: null,
              posix: null,
            };
            ((i.posix = i), (e.exports = i));
          },
        },
        n = {};
      function r(t) {
        var i = n[t];
        if (void 0 !== i) return i.exports;
        var s = (n[t] = { exports: {} }),
          a = !0;
        try {
          (e[t](s, s.exports, r), (a = !1));
        } finally {
          a && delete n[t];
        }
        return s.exports;
      }
      ((r.ab =
        "/ROOT/node_modules/.pnpm/next@https+++files-e95biqys9-ztanner.vercel.app+next-16.0.2-canary.24.tgz_patch_hash=gcu3wxnu_c6mie5ak246pw2lztcfqxnslvm/node_modules/next/dist/compiled/path-browserify/"),
        (t.exports = r(114)));
    })();
  },
  431843,
  (e) => {
    "use strict";
    class t {
      diff(e, t, n = {}) {
        let r;
        "function" == typeof n
          ? ((r = n), (n = {}))
          : "callback" in n && (r = n.callback);
        let i = this.castInput(e, n),
          s = this.castInput(t, n),
          a = this.removeEmpty(this.tokenize(i, n)),
          o = this.removeEmpty(this.tokenize(s, n));
        return this.diffWithOptionsObj(a, o, n, r);
      }
      diffWithOptionsObj(e, t, n, r) {
        var i;
        let s = (e) =>
            ((e = this.postProcess(e, n)), r)
              ? void setTimeout(function () {
                  r(e);
                }, 0)
              : e,
          a = t.length,
          o = e.length,
          l = 1,
          c = a + o;
        null != n.maxEditLength && (c = Math.min(c, n.maxEditLength));
        let u = null != (i = n.timeout) ? i : 1 / 0,
          d = Date.now() + u,
          h = [{ oldPos: -1, lastComponent: void 0 }],
          p = this.extractCommon(h[0], t, e, 0, n);
        if (h[0].oldPos + 1 >= o && p + 1 >= a)
          return s(this.buildValues(h[0].lastComponent, t, e));
        let m = -1 / 0,
          f = 1 / 0,
          g = () => {
            for (let r = Math.max(m, -l); r <= Math.min(f, l); r += 2) {
              let i,
                l = h[r - 1],
                c = h[r + 1];
              l && (h[r - 1] = void 0);
              let u = !1;
              if (c) {
                let e = c.oldPos - r;
                u = c && 0 <= e && e < a;
              }
              let d = l && l.oldPos + 1 < o;
              if (!u && !d) {
                h[r] = void 0;
                continue;
              }
              if (
                ((i =
                  !d || (u && l.oldPos < c.oldPos)
                    ? this.addToPath(c, !0, !1, 0, n)
                    : this.addToPath(l, !1, !0, 1, n)),
                (p = this.extractCommon(i, t, e, r, n)),
                i.oldPos + 1 >= o && p + 1 >= a)
              )
                return s(this.buildValues(i.lastComponent, t, e)) || !0;
              ((h[r] = i),
                i.oldPos + 1 >= o && (f = Math.min(f, r - 1)),
                p + 1 >= a && (m = Math.max(m, r + 1)));
            }
            l++;
          };
        if (r)
          !(function e() {
            setTimeout(function () {
              if (l > c || Date.now() > d) return r(void 0);
              g() || e();
            }, 0);
          })();
        else
          for (; l <= c && Date.now() <= d; ) {
            let e = g();
            if (e) return e;
          }
      }
      addToPath(e, t, n, r, i) {
        let s = e.lastComponent;
        return s && !i.oneChangePerToken && s.added === t && s.removed === n
          ? {
              oldPos: e.oldPos + r,
              lastComponent: {
                count: s.count + 1,
                added: t,
                removed: n,
                previousComponent: s.previousComponent,
              },
            }
          : {
              oldPos: e.oldPos + r,
              lastComponent: {
                count: 1,
                added: t,
                removed: n,
                previousComponent: s,
              },
            };
      }
      extractCommon(e, t, n, r, i) {
        let s = t.length,
          a = n.length,
          o = e.oldPos,
          l = o - r,
          c = 0;
        for (; l + 1 < s && o + 1 < a && this.equals(n[o + 1], t[l + 1], i); )
          (l++,
            o++,
            c++,
            i.oneChangePerToken &&
              (e.lastComponent = {
                count: 1,
                previousComponent: e.lastComponent,
                added: !1,
                removed: !1,
              }));
        return (
          c &&
            !i.oneChangePerToken &&
            (e.lastComponent = {
              count: c,
              previousComponent: e.lastComponent,
              added: !1,
              removed: !1,
            }),
          (e.oldPos = o),
          l
        );
      }
      equals(e, t, n) {
        return n.comparator
          ? n.comparator(e, t)
          : e === t || (!!n.ignoreCase && e.toLowerCase() === t.toLowerCase());
      }
      removeEmpty(e) {
        let t = [];
        for (let n = 0; n < e.length; n++) e[n] && t.push(e[n]);
        return t;
      }
      castInput(e, t) {
        return e;
      }
      tokenize(e, t) {
        return Array.from(e);
      }
      join(e) {
        return e.join("");
      }
      postProcess(e, t) {
        return e;
      }
      get useLongestToken() {
        return !1;
      }
      buildValues(e, t, n) {
        let r,
          i = [];
        for (; e; )
          (i.push(e),
            (r = e.previousComponent),
            delete e.previousComponent,
            (e = r));
        i.reverse();
        let s = i.length,
          a = 0,
          o = 0,
          l = 0;
        for (; a < s; a++) {
          let e = i[a];
          if (e.removed)
            ((e.value = this.join(n.slice(l, l + e.count))), (l += e.count));
          else {
            if (!e.added && this.useLongestToken) {
              let r = t.slice(o, o + e.count);
              ((r = r.map(function (e, t) {
                let r = n[l + t];
                return r.length > e.length ? r : e;
              })),
                (e.value = this.join(r)));
            } else e.value = this.join(t.slice(o, o + e.count));
            ((o += e.count), e.added || (l += e.count));
          }
        }
        return i;
      }
    }
    class n extends t {
      constructor() {
        (super(...arguments), (this.tokenize = s));
      }
      equals(e, t, n) {
        return (
          n.ignoreWhitespace
            ? ((n.newlineIsToken && e.includes("\n")) || (e = e.trim()),
              (n.newlineIsToken && t.includes("\n")) || (t = t.trim()))
            : n.ignoreNewlineAtEof &&
              !n.newlineIsToken &&
              (e.endsWith("\n") && (e = e.slice(0, -1)),
              t.endsWith("\n") && (t = t.slice(0, -1))),
          super.equals(e, t, n)
        );
      }
    }
    let r = new n();
    function i(e, t, n) {
      return r.diff(e, t, n);
    }
    function s(e, t) {
      t.stripTrailingCr && (e = e.replace(/\r\n/g, "\n"));
      let n = [],
        r = e.split(/(\n|\r\n)/);
      r[r.length - 1] || r.pop();
      for (let e = 0; e < r.length; e++) {
        let i = r[e];
        e % 2 && !t.newlineIsToken ? (n[n.length - 1] += i) : n.push(i);
      }
      return n;
    }
    e.s(["diffLines", () => i], 431843);
  },
  638041,
  (e) => {
    "use strict";
    var t = e.i(431843);
    let n = (e, n) => {
      if (!e && !n) return { diffs: [], addedCount: 0, removedCount: 0 };
      if (!e) {
        let e = s(n);
        return {
          diffs: [{ added: !0, removed: !1, count: e, value: n }],
          addedCount: e,
          removedCount: 0,
        };
      }
      if (!n) {
        let t = s(e);
        return {
          diffs: [{ added: !1, removed: !0, count: t, value: e }],
          addedCount: 0,
          removedCount: t,
        };
      }
      let a = e.trim(),
        o = n.trim();
      if (a === o) return { diffs: [], addedCount: 0, removedCount: 0 };
      let l = r(e),
        c = r(n);
      if (l > 2e3 || c > 2e3) {
        let t = s(e),
          r = s(n);
        return {
          diffs: [],
          addedCount: Math.max(r - t, 0),
          removedCount: Math.max(t - r, 0),
        };
      }
      let u = t.diffLines(a, o);
      return { ...i(u), diffs: u };
    };
    function r(e) {
      if (!e || "\n" === e) return 0;
      let t = 1;
      for (let n = 0; n < e.length; n++) "\n" === e[n] && t++;
      return ("\n" === e[e.length - 1] && t--, t);
    }
    function i(e) {
      return {
        addedCount: e
          .filter((e) => e.added)
          .reduce((e, t) => e + (t.count || 0), 0),
        removedCount: e
          .filter((e) => e.removed)
          .reduce((e, t) => e + (t.count || 0), 0),
      };
    }
    let s = (e) => {
      if (!e || "\n" === e) return 0;
      let t = e.split(/\r?\n/);
      return "" === t.at(-1) ? t.length - 1 : t.length;
    };
    e.s(["countContentLines", 0, s, "getDiffExact", 0, n]);
  },
  718755,
  266007,
  (e) => {
    "use strict";
    e.s(["useOpenFileInActiveBlock", () => a], 718755);
    var t = e.i(576191),
      n = e.i(926224),
      r = e.i(745587),
      i = e.i(449381),
      s = e.i(385671);
    function a() {
      let e = (0, i.useActiveBlockState)(),
        {
          actions: { setActiveTabIntent: a },
        } = (0, s.useChatLayout)(),
        o = (0, r.useSetActiveFile)({ blockId: e?.id || "" });
      return {
        getOpenFileHandler: (0, t.useCallback)(
          (t) => {
            if (
              e &&
              "code-project" === e.type &&
              (0, n.parseMultiFileSource)({
                source: e.source,
                blockType: "code-project",
                blockId: e.id,
              })
                .filter((e) => !e.isDeleted)
                .find((e) => e.meta.file === t)
            )
              return () => {
                (a("code"), o(t));
              };
          },
          [e, a, o],
        ),
      };
    }
    e.i(168204);
    var o = e.i(225695);
    let l = "user_read_only_context",
      c = [
        "text_attachments",
        "project_sources",
        "image_attachments",
        "integration_examples",
        "examples",
        "tool_content",
      ],
      u = 5;
    var d = e.i(439235);
    e.i(493218);
    var h = d;
    let p = (e, t, n) => {
        let r = e instanceof RegExp ? m(e, n) : e,
          i = t instanceof RegExp ? m(t, n) : t,
          s = null !== r && null != i && f(r, i, n);
        return (
          s && {
            start: s[0],
            end: s[1],
            pre: n.slice(0, s[0]),
            body: n.slice(s[0] + r.length, s[1]),
            post: n.slice(s[1] + i.length),
          }
        );
      },
      m = (e, t) => {
        let n = t.match(e);
        return n ? n[0] : null;
      },
      f = (e, t, n) => {
        let r,
          i,
          s,
          a,
          o,
          l = n.indexOf(e),
          c = n.indexOf(t, l + 1),
          u = l;
        if (l >= 0 && c > 0) {
          if (e === t) return [l, c];
          for (r = [], s = n.length; u >= 0 && !o; ) {
            if (u === l) (r.push(u), (l = n.indexOf(e, u + 1)));
            else if (1 === r.length) {
              let e = r.pop();
              void 0 !== e && (o = [e, c]);
            } else
              (void 0 !== (i = r.pop()) && i < s && ((s = i), (a = c)),
                (c = n.indexOf(t, u + 1)));
            u = l < c && l >= 0 ? l : c;
          }
          r.length && void 0 !== a && (o = [s, a]);
        }
        return o;
      },
      g = "\0SLASH" + Math.random() + "\0",
      x = "\0OPEN" + Math.random() + "\0",
      v = "\0CLOSE" + Math.random() + "\0",
      y = "\0COMMA" + Math.random() + "\0",
      b = "\0PERIOD" + Math.random() + "\0",
      j = RegExp(g, "g"),
      w = RegExp(x, "g"),
      C = RegExp(v, "g"),
      k = RegExp(y, "g"),
      S = RegExp(b, "g"),
      N = /\\\\/g,
      E = /\\{/g,
      A = /\\}/g,
      D = /\\,/g,
      I = /\\./g;
    function M(e) {
      return isNaN(e) ? e.charCodeAt(0) : parseInt(e, 10);
    }
    function T(e) {
      return e
        .replace(N, g)
        .replace(E, x)
        .replace(A, v)
        .replace(D, y)
        .replace(I, b);
    }
    function L(e) {
      return e
        .replace(j, "\\")
        .replace(w, "{")
        .replace(C, "}")
        .replace(k, ",")
        .replace(S, ".");
    }
    function P(e) {
      if (!e) return [""];
      let t = [],
        n = p("{", "}", e);
      if (!n) return e.split(",");
      let { pre: r, body: i, post: s } = n,
        a = r.split(",");
      a[a.length - 1] += "{" + i + "}";
      let o = P(s);
      return (
        s.length && ((a[a.length - 1] += o.shift()), a.push.apply(a, o)),
        t.push.apply(t, a),
        t
      );
    }
    function R(e) {
      return e
        ? ("{}" === e.slice(0, 2) && (e = "\\{\\}" + e.slice(2)),
          V(T(e), !0).map(L))
        : [];
    }
    function F(e) {
      return "{" + e + "}";
    }
    function _(e) {
      return /^-?0\d/.test(e);
    }
    function O(e, t) {
      return e <= t;
    }
    function B(e, t) {
      return e >= t;
    }
    function V(e, t) {
      let n = [],
        r = p("{", "}", e);
      if (!r) return [e];
      let i = r.pre,
        s = r.post.length ? V(r.post, !1) : [""];
      if (/\$$/.test(r.pre))
        for (let e = 0; e < s.length; e++) {
          let t = i + "{" + r.body + "}" + s[e];
          n.push(t);
        }
      else {
        let a,
          o,
          l = /^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),
          c = /^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),
          u = l || c,
          d = r.body.indexOf(",") >= 0;
        if (!u && !d)
          return r.post.match(/,(?!,).*\}/)
            ? V((e = r.pre + "{" + r.body + v + r.post))
            : [e];
        if (u) a = r.body.split(/\.\./);
        else if (
          1 === (a = P(r.body)).length &&
          void 0 !== a[0] &&
          1 === (a = V(a[0], !1).map(F)).length
        )
          return s.map((e) => r.pre + a[0] + e);
        if (u && void 0 !== a[0] && void 0 !== a[1]) {
          let e = M(a[0]),
            t = M(a[1]),
            n = Math.max(a[0].length, a[1].length),
            r = 3 === a.length && void 0 !== a[2] ? Math.abs(M(a[2])) : 1,
            i = O;
          t < e && ((r *= -1), (i = B));
          let s = a.some(_);
          o = [];
          for (let a = e; i(a, t); a += r) {
            let e;
            if (c) "\\" === (e = String.fromCharCode(a)) && (e = "");
            else if (((e = String(a)), s)) {
              let t = n - e.length;
              if (t > 0) {
                let n = Array(t + 1).join("0");
                e = a < 0 ? "-" + n + e.slice(1) : n + e;
              }
            }
            o.push(e);
          }
        } else {
          o = [];
          for (let e = 0; e < a.length; e++) o.push.apply(o, V(a[e], !1));
        }
        for (let e = 0; e < o.length; e++)
          for (let r = 0; r < s.length; r++) {
            let a = i + o[e] + s[r];
            (!t || u || a) && n.push(a);
          }
      }
      return n;
    }
    let z = 65536,
      H = (e) => {
        if ("string" != typeof e) throw TypeError("invalid pattern");
        if (e.length > z) throw TypeError("pattern is too long");
      },
      $ = {
        "[:alnum:]": ["\\p{L}\\p{Nl}\\p{Nd}", !0],
        "[:alpha:]": ["\\p{L}\\p{Nl}", !0],
        "[:ascii:]": ["\\x00-\\x7f", !1],
        "[:blank:]": ["\\p{Zs}\\t", !0],
        "[:cntrl:]": ["\\p{Cc}", !0],
        "[:digit:]": ["\\p{Nd}", !0],
        "[:graph:]": ["\\p{Z}\\p{C}", !0, !0],
        "[:lower:]": ["\\p{Ll}", !0],
        "[:print:]": ["\\p{C}", !0],
        "[:punct:]": ["\\p{P}", !0],
        "[:space:]": ["\\p{Z}\\t\\r\\n\\v\\f", !0],
        "[:upper:]": ["\\p{Lu}", !0],
        "[:word:]": ["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}", !0],
        "[:xdigit:]": ["A-Fa-f0-9", !1],
      },
      U = (e) => e.replace(/[[\]\\-]/g, "\\$&"),
      G = (e) => e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"),
      W = (e) => e.join(""),
      q = (e, t) => {
        let n = t;
        if ("[" !== e.charAt(n)) throw Error("not in a brace expression");
        let r = [],
          i = [],
          s = n + 1,
          a = !1,
          o = !1,
          l = !1,
          c = !1,
          u = n,
          d = "";
        r: for (; s < e.length; ) {
          let t = e.charAt(s);
          if (("!" === t || "^" === t) && s === n + 1) {
            ((c = !0), s++);
            continue;
          }
          if ("]" === t && a && !l) {
            u = s + 1;
            break;
          }
          if (((a = !0), "\\" === t && !l)) {
            ((l = !0), s++);
            continue;
          }
          if ("[" === t && !l) {
            for (let [t, [a, l, c]] of Object.entries($))
              if (e.startsWith(t, s)) {
                if (d) return ["$.", !1, e.length - n, !0];
                ((s += t.length), c ? i.push(a) : r.push(a), (o = o || l));
                continue r;
              }
          }
          if (((l = !1), d)) {
            (t > d ? r.push(U(d) + "-" + U(t)) : t === d && r.push(U(t)),
              (d = ""),
              s++);
            continue;
          }
          if (e.startsWith("-]", s + 1)) {
            (r.push(U(t + "-")), (s += 2));
            continue;
          }
          if (e.startsWith("-", s + 1)) {
            ((d = t), (s += 2));
            continue;
          }
          (r.push(U(t)), s++);
        }
        if (u < s) return ["", !1, 0, !1];
        if (!r.length && !i.length) return ["$.", !1, e.length - n, !0];
        if (0 === i.length && 1 === r.length && /^\\?.$/.test(r[0]) && !c)
          return [G(2 === r[0].length ? r[0].slice(-1) : r[0]), !1, u - n, !1];
        let h = "[" + (c ? "^" : "") + W(r) + "]",
          p = "[" + (c ? "" : "^") + W(i) + "]";
        return [
          r.length && i.length ? "(" + h + "|" + p + ")" : r.length ? h : p,
          o,
          u - n,
          !0,
        ];
      },
      Z = (e, { windowsPathsNoEscape: t = !1 } = {}) =>
        t
          ? e.replace(/\[([^\/\\])\]/g, "$1")
          : e
              .replace(/((?!\\).|^)\[([^\/\\])\]/g, "$1$2")
              .replace(/\\([^\/])/g, "$1"),
      K = new Set(["!", "?", "+", "*", "@"]),
      Y = (e) => K.has(e),
      J = "(?!(?:^|/)\\.\\.?(?:$|/))",
      Q = "(?!\\.)",
      X = new Set(["[", "."]),
      ee = new Set(["..", "."]),
      et = new Set("().*{}+?[]^$\\!"),
      en = (e) => e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"),
      er = "[^/]",
      ei = er + "*?",
      es = er + "+?";
    class ea {
      type;
      #e;
      #t;
      #n = !1;
      #r = [];
      #i;
      #s;
      #a;
      #o = !1;
      #l;
      #c;
      #u = !1;
      constructor(e, t, n = {}) {
        ((this.type = e),
          e && (this.#t = !0),
          (this.#i = t),
          (this.#e = this.#i ? this.#i.#e : this),
          (this.#l = this.#e === this ? n : this.#e.#l),
          (this.#a = this.#e === this ? [] : this.#e.#a),
          "!" !== e || this.#e.#o || this.#a.push(this),
          (this.#s = this.#i ? this.#i.#r.length : 0));
      }
      get hasMagic() {
        if (void 0 !== this.#t) return this.#t;
        for (let e of this.#r)
          if ("string" != typeof e && (e.type || e.hasMagic))
            return (this.#t = !0);
        return this.#t;
      }
      toString() {
        return void 0 !== this.#c
          ? this.#c
          : this.type
            ? (this.#c =
                this.type + "(" + this.#r.map((e) => String(e)).join("|") + ")")
            : (this.#c = this.#r.map((e) => String(e)).join(""));
      }
      #d() {
        let e;
        if (this !== this.#e) throw Error("should only call on root");
        if (this.#o) return this;
        for (this.toString(), this.#o = !0; (e = this.#a.pop()); ) {
          if ("!" !== e.type) continue;
          let t = e,
            n = t.#i;
          for (; n; ) {
            for (let r = t.#s + 1; !n.type && r < n.#r.length; r++)
              for (let t of e.#r) {
                if ("string" == typeof t)
                  throw Error("string part in extglob AST??");
                t.copyIn(n.#r[r]);
              }
            n = (t = n).#i;
          }
        }
        return this;
      }
      push(...e) {
        for (let t of e)
          if ("" !== t) {
            if ("string" != typeof t && !(t instanceof ea && t.#i === this))
              throw Error("invalid part: " + t);
            this.#r.push(t);
          }
      }
      toJSON() {
        let e =
          null === this.type
            ? this.#r
                .slice()
                .map((e) => ("string" == typeof e ? e : e.toJSON()))
            : [this.type, ...this.#r.map((e) => e.toJSON())];
        return (
          this.isStart() && !this.type && e.unshift([]),
          this.isEnd() &&
            (this === this.#e || (this.#e.#o && this.#i?.type === "!")) &&
            e.push({}),
          e
        );
      }
      isStart() {
        if (this.#e === this) return !0;
        if (!this.#i?.isStart()) return !1;
        if (0 === this.#s) return !0;
        let e = this.#i;
        for (let t = 0; t < this.#s; t++) {
          let n = e.#r[t];
          if (!(n instanceof ea && "!" === n.type)) return !1;
        }
        return !0;
      }
      isEnd() {
        if (this.#e === this || this.#i?.type === "!") return !0;
        if (!this.#i?.isEnd()) return !1;
        if (!this.type) return this.#i?.isEnd();
        let e = this.#i ? this.#i.#r.length : 0;
        return this.#s === e - 1;
      }
      copyIn(e) {
        "string" == typeof e ? this.push(e) : this.push(e.clone(this));
      }
      clone(e) {
        let t = new ea(this.type, e);
        for (let e of this.#r) t.copyIn(e);
        return t;
      }
      static #h(e, t, n, r) {
        let i = !1,
          s = !1,
          a = -1,
          o = !1;
        if (null === t.type) {
          let l = n,
            c = "";
          for (; l < e.length; ) {
            let n = e.charAt(l++);
            if (i || "\\" === n) {
              ((i = !i), (c += n));
              continue;
            }
            if (s) {
              (l === a + 1
                ? ("^" === n || "!" === n) && (o = !0)
                : "]" !== n || (l === a + 2 && o) || (s = !1),
                (c += n));
              continue;
            }
            if ("[" === n) {
              ((s = !0), (a = l), (o = !1), (c += n));
              continue;
            }
            if (!r.noext && Y(n) && "(" === e.charAt(l)) {
              (t.push(c), (c = ""));
              let i = new ea(n, t);
              ((l = ea.#h(e, i, l, r)), t.push(i));
              continue;
            }
            c += n;
          }
          return (t.push(c), l);
        }
        let l = n + 1,
          c = new ea(null, t),
          u = [],
          d = "";
        for (; l < e.length; ) {
          let n = e.charAt(l++);
          if (i || "\\" === n) {
            ((i = !i), (d += n));
            continue;
          }
          if (s) {
            (l === a + 1
              ? ("^" === n || "!" === n) && (o = !0)
              : "]" !== n || (l === a + 2 && o) || (s = !1),
              (d += n));
            continue;
          }
          if ("[" === n) {
            ((s = !0), (a = l), (o = !1), (d += n));
            continue;
          }
          if (Y(n) && "(" === e.charAt(l)) {
            (c.push(d), (d = ""));
            let t = new ea(n, c);
            (c.push(t), (l = ea.#h(e, t, l, r)));
            continue;
          }
          if ("|" === n) {
            (c.push(d), (d = ""), u.push(c), (c = new ea(null, t)));
            continue;
          }
          if (")" === n)
            return (
              "" === d && 0 === t.#r.length && (t.#u = !0),
              c.push(d),
              (d = ""),
              t.push(...u, c),
              l
            );
          d += n;
        }
        return (
          (t.type = null),
          (t.#t = void 0),
          (t.#r = [e.substring(n - 1)]),
          l
        );
      }
      static fromGlob(e, t = {}) {
        let n = new ea(null, void 0, t);
        return (ea.#h(e, n, 0, t), n);
      }
      toMMPattern() {
        if (this !== this.#e) return this.#e.toMMPattern();
        let e = this.toString(),
          [t, n, r, i] = this.toRegExpSource();
        return r ||
          this.#t ||
          (this.#l.nocase &&
            !this.#l.nocaseMagicOnly &&
            e.toUpperCase() !== e.toLowerCase())
          ? Object.assign(
              RegExp(`^${t}$`, (this.#l.nocase ? "i" : "") + (i ? "u" : "")),
              { _src: t, _glob: e },
            )
          : n;
      }
      get options() {
        return this.#l;
      }
      toRegExpSource(e) {
        let t = e ?? !!this.#l.dot;
        if ((this.#e === this && this.#d(), !this.type)) {
          let n = this.isStart() && this.isEnd(),
            r = this.#r
              .map((t) => {
                let [r, i, s, a] =
                  "string" == typeof t
                    ? ea.#p(t, this.#t, n)
                    : t.toRegExpSource(e);
                return ((this.#t = this.#t || s), (this.#n = this.#n || a), r);
              })
              .join(""),
            i = "";
          if (
            this.isStart() &&
            "string" == typeof this.#r[0] &&
            !(1 === this.#r.length && ee.has(this.#r[0]))
          ) {
            let n = X,
              s =
                (t && n.has(r.charAt(0))) ||
                (r.startsWith("\\.") && n.has(r.charAt(2))) ||
                (r.startsWith("\\.\\.") && n.has(r.charAt(4))),
              a = !t && !e && n.has(r.charAt(0));
            i = s ? J : a ? Q : "";
          }
          let s = "";
          return (
            this.isEnd() &&
              this.#e.#o &&
              this.#i?.type === "!" &&
              (s = "(?:$|\\/)"),
            [i + r + s, Z(r), (this.#t = !!this.#t), this.#n]
          );
        }
        let n = "*" === this.type || "+" === this.type,
          r = "!" === this.type ? "(?:(?!(?:" : "(?:",
          i = this.#m(t);
        if (this.isStart() && this.isEnd() && !i && "!" !== this.type) {
          let e = this.toString();
          return (
            (this.#r = [e]),
            (this.type = null),
            (this.#t = void 0),
            [e, Z(this.toString()), !1, !1]
          );
        }
        let s = !n || e || t || !Q ? "" : this.#m(!0);
        (s === i && (s = ""), s && (i = `(?:${i})(?:${s})*?`));
        let a = "";
        return [
          (a =
            "!" === this.type && this.#u
              ? (this.isStart() && !t ? Q : "") + es
              : r +
                i +
                ("!" === this.type
                  ? "))" + (!this.isStart() || t || e ? "" : Q) + ei + ")"
                  : "@" === this.type
                    ? ")"
                    : "?" === this.type
                      ? ")?"
                      : "+" === this.type && s
                        ? ")"
                        : "*" === this.type && s
                          ? ")?"
                          : `)${this.type}`)),
          Z(i),
          (this.#t = !!this.#t),
          this.#n,
        ];
      }
      #m(e) {
        return this.#r
          .map((t) => {
            if ("string" == typeof t)
              throw Error("string type in extglob ast??");
            let [n, r, i, s] = t.toRegExpSource(e);
            return ((this.#n = this.#n || s), n);
          })
          .filter((e) => !(this.isStart() && this.isEnd()) || !!e)
          .join("|");
      }
      static #p(e, t, n = !1) {
        let r = !1,
          i = "",
          s = !1;
        for (let a = 0; a < e.length; a++) {
          let o = e.charAt(a);
          if (r) {
            ((r = !1), (i += (et.has(o) ? "\\" : "") + o));
            continue;
          }
          if ("\\" === o) {
            a === e.length - 1 ? (i += "\\\\") : (r = !0);
            continue;
          }
          if ("[" === o) {
            let [n, r, o, l] = q(e, a);
            if (o) {
              ((i += n), (s = s || r), (a += o - 1), (t = t || l));
              continue;
            }
          }
          if ("*" === o) {
            (n && "*" === e ? (i += es) : (i += ei), (t = !0));
            continue;
          }
          if ("?" === o) {
            ((i += er), (t = !0));
            continue;
          }
          i += en(o);
        }
        return [i, Z(e), !!t, s];
      }
    }
    let eo = (e, { windowsPathsNoEscape: t = !1 } = {}) =>
        t ? e.replace(/[?*()[\]]/g, "[$&]") : e.replace(/[?*()[\]\\]/g, "\\$&"),
      el = (e, t, n = {}) => (
        H(t),
        (!!n.nocomment || "#" !== t.charAt(0)) && new eH(t, n).match(e)
      ),
      ec = /^\*+([^+@!?\*\[\(]*)$/,
      eu = (e) => (t) => !t.startsWith(".") && t.endsWith(e),
      ed = (e) => (t) => t.endsWith(e),
      eh = (e) => (
        (e = e.toLowerCase()),
        (t) => !t.startsWith(".") && t.toLowerCase().endsWith(e)
      ),
      ep = (e) => ((e = e.toLowerCase()), (t) => t.toLowerCase().endsWith(e)),
      em = /^\*+\.\*+$/,
      ef = (e) => !e.startsWith(".") && e.includes("."),
      eg = (e) => "." !== e && ".." !== e && e.includes("."),
      ex = /^\.\*+$/,
      ev = (e) => "." !== e && ".." !== e && e.startsWith("."),
      ey = /^\*+$/,
      eb = (e) => 0 !== e.length && !e.startsWith("."),
      ej = (e) => 0 !== e.length && "." !== e && ".." !== e,
      ew = /^\?+([^+@!?\*\[\(]*)?$/,
      eC = ([e, t = ""]) => {
        let n = eE([e]);
        return t
          ? ((t = t.toLowerCase()), (e) => n(e) && e.toLowerCase().endsWith(t))
          : n;
      },
      ek = ([e, t = ""]) => {
        let n = eA([e]);
        return t
          ? ((t = t.toLowerCase()), (e) => n(e) && e.toLowerCase().endsWith(t))
          : n;
      },
      eS = ([e, t = ""]) => {
        let n = eA([e]);
        return t ? (e) => n(e) && e.endsWith(t) : n;
      },
      eN = ([e, t = ""]) => {
        let n = eE([e]);
        return t ? (e) => n(e) && e.endsWith(t) : n;
      },
      eE = ([e]) => {
        let t = e.length;
        return (e) => e.length === t && !e.startsWith(".");
      },
      eA = ([e]) => {
        let t = e.length;
        return (e) => e.length === t && "." !== e && ".." !== e;
      },
      eD =
        "object" == typeof h.default && h.default
          ? ("object" == typeof h.default.env &&
              h.default.env &&
              h.default.env.__MINIMATCH_TESTING_PLATFORM__) ||
            h.default.platform
          : "posix",
      eI = "\\",
      eM = "/";
    el.sep = "win32" === eD ? eI : eM;
    let eT = Symbol("globstar **");
    el.GLOBSTAR = eT;
    let eL = "[^/]*?",
      eP = "(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",
      eR = "(?:(?!(?:\\/|^)\\.).)*?",
      eF =
        (e, t = {}) =>
        (n) =>
          el(n, e, t);
    el.filter = eF;
    let e_ = (e, t = {}) => Object.assign({}, e, t),
      eO = (e) => {
        if (!e || "object" != typeof e || !Object.keys(e).length) return el;
        let t = el;
        return Object.assign((n, r, i = {}) => t(n, r, e_(e, i)), {
          Minimatch: class extends t.Minimatch {
            constructor(t, n = {}) {
              super(t, e_(e, n));
            }
            static defaults(n) {
              return t.defaults(e_(e, n)).Minimatch;
            }
          },
          AST: class extends t.AST {
            constructor(t, n, r = {}) {
              super(t, n, e_(e, r));
            }
            static fromGlob(n, r = {}) {
              return t.AST.fromGlob(n, e_(e, r));
            }
          },
          unescape: (n, r = {}) => t.unescape(n, e_(e, r)),
          escape: (n, r = {}) => t.escape(n, e_(e, r)),
          filter: (n, r = {}) => t.filter(n, e_(e, r)),
          defaults: (n) => t.defaults(e_(e, n)),
          makeRe: (n, r = {}) => t.makeRe(n, e_(e, r)),
          braceExpand: (n, r = {}) => t.braceExpand(n, e_(e, r)),
          match: (n, r, i = {}) => t.match(n, r, e_(e, i)),
          sep: t.sep,
          GLOBSTAR: eT,
        });
      };
    el.defaults = eO;
    let eB = (e, t = {}) =>
      (H(e), t.nobrace || !/\{(?:(?!\{).)*\}/.test(e)) ? [e] : R(e);
    ((el.braceExpand = eB),
      (el.makeRe = (e, t = {}) => new eH(e, t).makeRe()),
      (el.match = (e, t, n = {}) => {
        let r = new eH(t, n);
        return (
          (e = e.filter((e) => r.match(e))),
          r.options.nonull && !e.length && e.push(t),
          e
        );
      }));
    let eV = /[?*]|[+@!]\(.*?\)|\[|\]/,
      ez = (e) => e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    class eH {
      options;
      set;
      pattern;
      windowsPathsNoEscape;
      nonegate;
      negate;
      comment;
      empty;
      preserveMultipleSlashes;
      partial;
      globSet;
      globParts;
      nocase;
      isWindows;
      platform;
      windowsNoMagicRoot;
      regexp;
      constructor(e, t = {}) {
        (H(e),
          (t = t || {}),
          (this.options = t),
          (this.pattern = e),
          (this.platform = t.platform || eD),
          (this.isWindows = "win32" === this.platform),
          (this.windowsPathsNoEscape =
            !!t.windowsPathsNoEscape || !1 === t.allowWindowsEscape),
          this.windowsPathsNoEscape &&
            (this.pattern = this.pattern.replace(/\\/g, "/")),
          (this.preserveMultipleSlashes = !!t.preserveMultipleSlashes),
          (this.regexp = null),
          (this.negate = !1),
          (this.nonegate = !!t.nonegate),
          (this.comment = !1),
          (this.empty = !1),
          (this.partial = !!t.partial),
          (this.nocase = !!this.options.nocase),
          (this.windowsNoMagicRoot =
            void 0 !== t.windowsNoMagicRoot
              ? t.windowsNoMagicRoot
              : !!(this.isWindows && this.nocase)),
          (this.globSet = []),
          (this.globParts = []),
          (this.set = []),
          this.make());
      }
      hasMagic() {
        if (this.options.magicalBraces && this.set.length > 1) return !0;
        for (let e of this.set)
          for (let t of e) if ("string" != typeof t) return !0;
        return !1;
      }
      debug() {}
      make() {
        let e = this.pattern,
          t = this.options;
        if (!t.nocomment && "#" === e.charAt(0)) {
          this.comment = !0;
          return;
        }
        if (!e) {
          this.empty = !0;
          return;
        }
        (this.parseNegate(),
          (this.globSet = [...new Set(this.braceExpand())]),
          t.debug && (this.debug = (...e) => console.error(...e)),
          this.debug(this.pattern, this.globSet));
        let n = this.globSet.map((e) => this.slashSplit(e));
        ((this.globParts = this.preprocess(n)),
          this.debug(this.pattern, this.globParts));
        let r = this.globParts.map((e, t, n) => {
          if (this.isWindows && this.windowsNoMagicRoot) {
            let t =
                "" === e[0] &&
                "" === e[1] &&
                ("?" === e[2] || !eV.test(e[2])) &&
                !eV.test(e[3]),
              n = /^[a-z]:/i.test(e[0]);
            if (t)
              return [
                ...e.slice(0, 4),
                ...e.slice(4).map((e) => this.parse(e)),
              ];
            if (n) return [e[0], ...e.slice(1).map((e) => this.parse(e))];
          }
          return e.map((e) => this.parse(e));
        });
        if (
          (this.debug(this.pattern, r),
          (this.set = r.filter((e) => -1 === e.indexOf(!1))),
          this.isWindows)
        )
          for (let e = 0; e < this.set.length; e++) {
            let t = this.set[e];
            "" === t[0] &&
              "" === t[1] &&
              "?" === this.globParts[e][2] &&
              "string" == typeof t[3] &&
              /^[a-z]:$/i.test(t[3]) &&
              (t[2] = "?");
          }
        this.debug(this.pattern, this.set);
      }
      preprocess(e) {
        if (this.options.noglobstar)
          for (let t = 0; t < e.length; t++)
            for (let n = 0; n < e[t].length; n++)
              "**" === e[t][n] && (e[t][n] = "*");
        let { optimizationLevel: t = 1 } = this.options;
        return (
          t >= 2
            ? ((e = this.firstPhasePreProcess(e)),
              (e = this.secondPhasePreProcess(e)))
            : (e =
                t >= 1
                  ? this.levelOneOptimize(e)
                  : this.adjascentGlobstarOptimize(e)),
          e
        );
      }
      adjascentGlobstarOptimize(e) {
        return e.map((e) => {
          let t = -1;
          for (; -1 !== (t = e.indexOf("**", t + 1)); ) {
            let n = t;
            for (; "**" === e[n + 1]; ) n++;
            n !== t && e.splice(t, n - t);
          }
          return e;
        });
      }
      levelOneOptimize(e) {
        return e.map((e) =>
          0 ===
          (e = e.reduce((e, t) => {
            let n = e[e.length - 1];
            return (
              ("**" === t && "**" === n) ||
                (".." === t && n && ".." !== n && "." !== n && "**" !== n
                  ? e.pop()
                  : e.push(t)),
              e
            );
          }, [])).length
            ? [""]
            : e,
        );
      }
      levelTwoFileOptimize(e) {
        Array.isArray(e) || (e = this.slashSplit(e));
        let t = !1;
        do {
          if (((t = !1), !this.preserveMultipleSlashes)) {
            for (let n = 1; n < e.length - 1; n++) {
              let r = e[n];
              (1 !== n || "" !== r || "" !== e[0]) &&
                ("." === r || "" === r) &&
                ((t = !0), e.splice(n, 1), n--);
            }
            "." === e[0] &&
              2 === e.length &&
              ("." === e[1] || "" === e[1]) &&
              ((t = !0), e.pop());
          }
          let n = 0;
          for (; -1 !== (n = e.indexOf("..", n + 1)); ) {
            let r = e[n - 1];
            r &&
              "." !== r &&
              ".." !== r &&
              "**" !== r &&
              ((t = !0), e.splice(n - 1, 2), (n -= 2));
          }
        } while (t);
        return 0 === e.length ? [""] : e;
      }
      firstPhasePreProcess(e) {
        let t = !1;
        do
          for (let n of ((t = !1), e)) {
            let r = -1;
            for (; -1 !== (r = n.indexOf("**", r + 1)); ) {
              let i = r;
              for (; "**" === n[i + 1]; ) i++;
              i > r && n.splice(r + 1, i - r);
              let s = n[r + 1],
                a = n[r + 2],
                o = n[r + 3];
              if (
                ".." !== s ||
                !a ||
                "." === a ||
                ".." === a ||
                !o ||
                "." === o ||
                ".." === o
              )
                continue;
              ((t = !0), n.splice(r, 1));
              let l = n.slice(0);
              ((l[r] = "**"), e.push(l), r--);
            }
            if (!this.preserveMultipleSlashes) {
              for (let e = 1; e < n.length - 1; e++) {
                let r = n[e];
                (1 !== e || "" !== r || "" !== n[0]) &&
                  ("." === r || "" === r) &&
                  ((t = !0), n.splice(e, 1), e--);
              }
              "." === n[0] &&
                2 === n.length &&
                ("." === n[1] || "" === n[1]) &&
                ((t = !0), n.pop());
            }
            let i = 0;
            for (; -1 !== (i = n.indexOf("..", i + 1)); ) {
              let e = n[i - 1];
              if (e && "." !== e && ".." !== e && "**" !== e) {
                t = !0;
                let e = 1 === i && "**" === n[i + 1] ? ["."] : [];
                (n.splice(i - 1, 2, ...e),
                  0 === n.length && n.push(""),
                  (i -= 2));
              }
            }
          }
        while (t);
        return e;
      }
      secondPhasePreProcess(e) {
        for (let t = 0; t < e.length - 1; t++)
          for (let n = t + 1; n < e.length; n++) {
            let r = this.partsMatch(e[t], e[n], !this.preserveMultipleSlashes);
            if (r) {
              ((e[t] = []), (e[n] = r));
              break;
            }
          }
        return e.filter((e) => e.length);
      }
      partsMatch(e, t, n = !1) {
        let r = 0,
          i = 0,
          s = [],
          a = "";
        for (; r < e.length && i < t.length; )
          if (e[r] === t[i]) (s.push("b" === a ? t[i] : e[r]), r++, i++);
          else if (n && "**" === e[r] && t[i] === e[r + 1]) (s.push(e[r]), r++);
          else if (n && "**" === t[i] && e[r] === t[i + 1]) (s.push(t[i]), i++);
          else if (
            "*" === e[r] &&
            t[i] &&
            (this.options.dot || !t[i].startsWith(".")) &&
            "**" !== t[i]
          ) {
            if ("b" === a) return !1;
            ((a = "a"), s.push(e[r]), r++, i++);
          } else {
            if (
              "*" !== t[i] ||
              !e[r] ||
              (!this.options.dot && e[r].startsWith(".")) ||
              "**" === e[r] ||
              "a" === a
            )
              return !1;
            ((a = "b"), s.push(t[i]), r++, i++);
          }
        return e.length === t.length && s;
      }
      parseNegate() {
        if (this.nonegate) return;
        let e = this.pattern,
          t = !1,
          n = 0;
        for (let r = 0; r < e.length && "!" === e.charAt(r); r++)
          ((t = !t), n++);
        (n && (this.pattern = e.slice(n)), (this.negate = t));
      }
      matchOne(e, t, n = !1) {
        let r = this.options;
        if (this.isWindows) {
          let n = "string" == typeof e[0] && /^[a-z]:$/i.test(e[0]),
            r =
              !n &&
              "" === e[0] &&
              "" === e[1] &&
              "?" === e[2] &&
              /^[a-z]:$/i.test(e[3]),
            i = "string" == typeof t[0] && /^[a-z]:$/i.test(t[0]),
            s =
              !i &&
              "" === t[0] &&
              "" === t[1] &&
              "?" === t[2] &&
              "string" == typeof t[3] &&
              /^[a-z]:$/i.test(t[3]),
            a = r ? 3 : n ? 0 : void 0,
            o = s ? 3 : i ? 0 : void 0;
          if ("number" == typeof a && "number" == typeof o) {
            let [n, r] = [e[a], t[o]];
            n.toLowerCase() === r.toLowerCase() &&
              ((t[o] = n),
              o > a ? (t = t.slice(o)) : a > o && (e = e.slice(a)));
          }
        }
        let { optimizationLevel: i = 1 } = this.options;
        (i >= 2 && (e = this.levelTwoFileOptimize(e)),
          this.debug("matchOne", this, { file: e, pattern: t }),
          this.debug("matchOne", e.length, t.length));
        for (
          var s = 0, a = 0, o = e.length, l = t.length;
          s < o && a < l;
          s++, a++
        ) {
          let i;
          this.debug("matchOne loop");
          var c = t[a],
            u = e[s];
          if ((this.debug(t, c, u), !1 === c)) return !1;
          if (c === eT) {
            this.debug("GLOBSTAR", [t, c, u]);
            var d = s,
              h = a + 1;
            if (h === l) {
              for (this.debug("** at the end"); s < o; s++)
                if (
                  "." === e[s] ||
                  ".." === e[s] ||
                  (!r.dot && "." === e[s].charAt(0))
                )
                  return !1;
              return !0;
            }
            for (; d < o; ) {
              var p = e[d];
              if (
                (this.debug("\nglobstar while", e, d, t, h, p),
                this.matchOne(e.slice(d), t.slice(h), n))
              )
                return (this.debug("globstar found match!", d, o, p), !0);
              if ("." === p || ".." === p || (!r.dot && "." === p.charAt(0))) {
                this.debug("dot detected!", e, d, t, h);
                break;
              }
              (this.debug("globstar swallow a segment, and continue"), d++);
            }
            if (
              n &&
              (this.debug("\n>>> no match, partial?", e, d, t, h), d === o)
            )
              return !0;
            return !1;
          }
          if (
            ("string" == typeof c
              ? ((i = u === c), this.debug("string match", c, u, i))
              : ((i = c.test(u)), this.debug("pattern match", c, u, i)),
            !i)
          )
            return !1;
        }
        if (s === o && a === l) return !0;
        if (s === o) return n;
        if (a === l) return s === o - 1 && "" === e[s];
        throw Error("wtf?");
      }
      braceExpand() {
        return eB(this.pattern, this.options);
      }
      parse(e) {
        let t;
        H(e);
        let n = this.options;
        if ("**" === e) return eT;
        if ("" === e) return "";
        let r = null;
        (t = e.match(ey))
          ? (r = n.dot ? ej : eb)
          : (t = e.match(ec))
            ? (r = (n.nocase ? (n.dot ? ep : eh) : n.dot ? ed : eu)(t[1]))
            : (t = e.match(ew))
              ? (r = (n.nocase ? (n.dot ? ek : eC) : n.dot ? eS : eN)(t))
              : (t = e.match(em))
                ? (r = n.dot ? eg : ef)
                : (t = e.match(ex)) && (r = ev);
        let i = ea.fromGlob(e, this.options).toMMPattern();
        return (
          r &&
            "object" == typeof i &&
            Reflect.defineProperty(i, "test", { value: r }),
          i
        );
      }
      makeRe() {
        if (this.regexp || !1 === this.regexp) return this.regexp;
        let e = this.set;
        if (!e.length) return ((this.regexp = !1), this.regexp);
        let t = this.options,
          n = t.noglobstar ? eL : t.dot ? eP : eR,
          r = new Set(t.nocase ? ["i"] : []),
          i = e
            .map((e) => {
              let t = e.map((e) => {
                if (e instanceof RegExp)
                  for (let t of e.flags.split("")) r.add(t);
                return "string" == typeof e ? ez(e) : e === eT ? eT : e._src;
              });
              return (
                t.forEach((e, r) => {
                  let i = t[r + 1],
                    s = t[r - 1];
                  e === eT &&
                    s !== eT &&
                    (void 0 === s
                      ? void 0 !== i && i !== eT
                        ? (t[r + 1] = "(?:\\/|" + n + "\\/)?" + i)
                        : (t[r] = n)
                      : void 0 === i
                        ? (t[r - 1] = s + "(?:\\/|" + n + ")?")
                        : i !== eT &&
                          ((t[r - 1] = s + "(?:\\/|\\/" + n + "\\/)" + i),
                          (t[r + 1] = eT)));
                }),
                t.filter((e) => e !== eT).join("/")
              );
            })
            .join("|"),
          [s, a] = e.length > 1 ? ["(?:", ")"] : ["", ""];
        ((i = "^" + s + i + a + "$"), this.negate && (i = "^(?!" + i + ").+$"));
        try {
          this.regexp = new RegExp(i, [...r].join(""));
        } catch (e) {
          this.regexp = !1;
        }
        return this.regexp;
      }
      slashSplit(e) {
        return this.preserveMultipleSlashes
          ? e.split("/")
          : this.isWindows && /^\/\/[^\/]+/.test(e)
            ? ["", ...e.split(/\/+/)]
            : e.split(/\/+/);
      }
      match(e, t = this.partial) {
        if ((this.debug("match", e, this.pattern), this.comment)) return !1;
        if (this.empty) return "" === e;
        if ("/" === e && t) return !0;
        let n = this.options;
        this.isWindows && (e = e.split("\\").join("/"));
        let r = this.slashSplit(e);
        this.debug(this.pattern, "split", r);
        let i = this.set;
        this.debug(this.pattern, "set", i);
        let s = r[r.length - 1];
        if (!s) for (let e = r.length - 2; !s && e >= 0; e--) s = r[e];
        for (let e = 0; e < i.length; e++) {
          let a = i[e],
            o = r;
          if (
            (n.matchBase && 1 === a.length && (o = [s]), this.matchOne(o, a, t))
          ) {
            if (n.flipNegate) return !0;
            return !this.negate;
          }
        }
        return !n.flipNegate && this.negate;
      }
      static defaults(e) {
        return el.defaults(e).Minimatch;
      }
    }
    ((el.AST = ea),
      (el.Minimatch = eH),
      (el.escape = eo),
      (el.unescape = Z),
      e.i(638041));
    var e$ = e.i(540364);
    let eU = "v0_debug_logs";
    function eG(e, t, n) {
      let r =
          "string" != typeof e &&
          e[0] === o.AssistantMessagePartTagName &&
          !eW(e, "task-start-v1"),
        i =
          "string" != typeof e &&
          "Codeblock" === e[0] &&
          Array.isArray(e) &&
          e.length >= 2 &&
          e[1]?.blockId &&
          e[1]?.meta?.type &&
          !["inline-sql"].includes(e[1]?.meta?.type || "");
      if (!r && !i) return !1;
      for (let e = t - 1; e >= 0; e--) {
        let t = n[e];
        if (!t || "string" == typeof t) break;
        if (t[0] === o.AssistantMessagePartTagName) {
          if (!eW(t, "task-start-v1") && !eW(t, "task-waiting-v1")) return !0;
          continue;
        }
        if (
          "Codeblock" === t[0] &&
          Array.isArray(t) &&
          t.length >= 2 &&
          t[1]?.blockId &&
          t[1]?.meta?.type &&
          !["inline-sql"].includes(t[1]?.meta?.type || "")
        )
          return !0;
        break;
      }
      return !1;
    }
    function eW(e, t) {
      if (
        "string" != typeof e &&
        Array.isArray(e) &&
        e[0] === o.AssistantMessagePartTagName
      ) {
        let n = e,
          r = n[1]?.part;
        return !!r && (Array.isArray(t) ? t : [t]).includes(r.type);
      }
      return !1;
    }
    function eq(e) {
      if (e.includes(l) && e.includes(eU)) return "Console logs";
      let t = c.map((e) => `${l}/${e}/`),
        n = e,
        r = !1;
      for (let e of t)
        n.length !== (n = n.replace(e, () => "")).length && (r = !0);
      i: if (r && n.includes("-")) {
        let e = n.split("-").pop()?.split(".")[0];
        if (!e || e.length !== u) break i;
        n = n.replace(`-${e}`, "");
      }
      return n;
    }
    (e$.default.discriminatedUnion("type", [
      e$.default.object({
        type: e$.default.literal("text"),
        content: e$.default.string(),
      }),
      e$.default.object({
        type: e$.default.literal("blob"),
        blobUrl: e$.default.string(),
      }),
    ]),
      e.s(
        [
          "cleanAgentFilePath",
          () => eq,
          "getIsConsecutiveAssistantPart",
          () => eG,
        ],
        266007,
      ));
  },
  626693,
  (e, t, n) => {
    "use strict";
    t.exports = function e(t, n) {
      if (t === n) return !0;
      if (t && n && "object" == typeof t && "object" == typeof n) {
        if (t.constructor !== n.constructor) return !1;
        if (Array.isArray(t)) {
          if ((r = t.length) != n.length) return !1;
          for (i = r; 0 != i--; ) if (!e(t[i], n[i])) return !1;
          return !0;
        }
        if (t instanceof Map && n instanceof Map) {
          if (t.size !== n.size) return !1;
          for (i of t.entries()) if (!n.has(i[0])) return !1;
          for (i of t.entries()) if (!e(i[1], n.get(i[0]))) return !1;
          return !0;
        }
        if (t instanceof Set && n instanceof Set) {
          if (t.size !== n.size) return !1;
          for (i of t.entries()) if (!n.has(i[0])) return !1;
          return !0;
        }
        if (ArrayBuffer.isView(t) && ArrayBuffer.isView(n)) {
          if ((r = t.length) != n.length) return !1;
          for (i = r; 0 != i--; ) if (t[i] !== n[i]) return !1;
          return !0;
        }
        if (t.constructor === RegExp)
          return t.source === n.source && t.flags === n.flags;
        if (t.valueOf !== Object.prototype.valueOf)
          return t.valueOf() === n.valueOf();
        if (t.toString !== Object.prototype.toString)
          return t.toString() === n.toString();
        if ((r = (s = Object.keys(t)).length) !== Object.keys(n).length)
          return !1;
        for (i = r; 0 != i--; )
          if (!Object.prototype.hasOwnProperty.call(n, s[i])) return !1;
        for (i = r; 0 != i--; ) {
          var r,
            i,
            s,
            a = s[i];
          if (("_owner" !== a || !t.$$typeof) && !e(t[a], n[a])) return !1;
        }
        return !0;
      }
      return t != t && n != n;
    };
  },
  249492,
  (e, t, n) => {
    "use strict";
    var r = e.r(576191),
      i = e.r(986772);
    function s(e, t) {
      return (e === t && (0 !== e || 1 / e == 1 / t)) || (e != e && t != t);
    }
    var a = "function" == typeof Object.is ? Object.is : s,
      o = i.useSyncExternalStore,
      l = r.useRef,
      c = r.useEffect,
      u = r.useMemo,
      d = r.useDebugValue;
    n.useSyncExternalStoreWithSelector = function (e, t, n, r, i) {
      var s = l(null);
      if (null === s.current) {
        var h = { hasValue: !1, value: null };
        s.current = h;
      } else h = s.current;
      var p = o(
        e,
        (s = u(
          function () {
            function e(e) {
              if (!l) {
                if (
                  ((l = !0), (s = e), (e = r(e)), void 0 !== i && h.hasValue)
                ) {
                  var t = h.value;
                  if (i(t, e)) return (o = t);
                }
                return (o = e);
              }
              if (((t = o), a(s, e))) return t;
              var n = r(e);
              return void 0 !== i && i(t, n)
                ? ((s = e), t)
                : ((s = e), (o = n));
            }
            var s,
              o,
              l = !1,
              c = void 0 === n ? null : n;
            return [
              function () {
                return e(t());
              },
              null === c
                ? void 0
                : function () {
                    return e(c());
                  },
            ];
          },
          [t, n, r, i],
        ))[0],
        s[1],
      );
      return (
        c(
          function () {
            ((h.hasValue = !0), (h.value = p));
          },
          [p],
        ),
        d(p),
        p
      );
    };
  },
  10718,
  (e, t, n) => {
    "use strict";
    t.exports = e.r(249492);
  },
  827887,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(142219);
    function i({ children: e }) {
      return (0, t.jsx)(n.Provider, { store: r.store, children: e });
    }
    e.s(["JotaiProvider", () => i]);
  },
  626085,
  (e) => {
    "use strict";
    var t = e.i(576191);
    function n(e) {
      let n = (0, t.useRef)(void 0);
      return (
        (0, t.useEffect)(() => {
          n.current = e;
        }),
        n.current
      );
    }
    e.s(["usePrevious", () => n]);
  },
  748819,
  236808,
  453655,
  222348,
  416190,
  57851,
  752715,
  730191,
  (e) => {
    "use strict";
    e.s(
      [
        "MemodMarkdown",
        () => tZ,
        "MessageContent",
        () => tY,
        "MessageContentPartsMemodMarkdown",
        () => tK,
      ],
      748819,
    );
    var t = e.i(324834),
      n = e.i(849402),
      r = e.i(396735),
      i = e.i(219732),
      s = e.i(694686),
      a = e.i(818273),
      o = e.i(430957),
      l = e.i(576191),
      c = e.i(304649),
      u = e.i(85830),
      d = e.i(661535);
    e.i(168204);
    var h = e.i(225695),
      p = t,
      m = l,
      f = h,
      g = e.i(92479);
    e.i(904347);
    var x = e.i(37737);
    e.s(
      [
        "AGENT_BLOCK_CLASS",
        () => Z,
        "AGENT_BLOCK_MAX_WIDTH_CLASS",
        () => q,
        "AgentCitationPill",
        () => en,
        "AgentNote",
        () => ed,
        "BlockRing",
        () => eb,
        "Command",
        () => el,
        "CommandOutput",
        () => ec,
        "ConsecutiveTimelineLine",
        () => ep,
        "File",
        () => ea,
        "FileList",
        () => eo,
        "RichPart",
        () => X,
        "RichTask",
        () => Q,
        "TaskName",
        () => ee,
        "Terminal",
        () => es,
        "TimelineCorner20",
        () => ef,
        "TimelineLine",
        () => em,
        "WebsiteScreenshot",
        () => ei,
        "indexAndLengthToAlign",
        () => ev,
        "readableUrl",
        () => ex,
        "useReportAgentError",
        () => ej,
      ],
      236808,
    );
    var v = t,
      y = e.i(919409);
    e.i(686695);
    var b = e.i(584379),
      j = e.i(27684),
      w = e.i(969372),
      C = e.i(900511),
      k = e.i(147675),
      S = e.i(438119),
      N = e.i(89440),
      E = e.i(657736),
      A = l,
      D = e.i(104720),
      I = e.i(758118),
      M = e.i(365290),
      T = e.i(397036),
      L = e.i(424725),
      P = e.i(454471),
      R = e.i(516870),
      F = e.i(997974),
      _ = e.i(762585),
      O = e.i(654335),
      B = e.i(7967),
      V = e.i(176248),
      z = x,
      H = g;
    e.i(563948);
    var $ = e.i(407562),
      U = e.i(718755),
      G = e.i(266007),
      W = e.i(985005);
    let q = "max-w-[360px]",
      Z = (0, S.cn)(
        "material-medium border-gray-300 bg-background-subtle p-2 flex items-center rounded-[8px] m-[-1px] relative overflow-visible [&>*]:max-w-full [&>*]:w-full [&>*]:overflow-hidden",
        q,
      ),
      K = 500,
      Y = "active",
      J = { duration: 150 };
    function Q({
      children: e,
      renderedParts: t,
      isActive: n,
      onClick: r,
      onToggle: i,
      maxHeight: s = 200,
      autoCloseDelay: a = K,
      integration: o,
      isFirst: l,
      createdAt: c,
      error: u,
      finishedAt: d,
      Icon: h,
      hideTimeSpent: p,
      className: m,
      hideTimelineLine: f,
      headerChildrenEnd: g,
      style: x,
    }) {
      let b = (0, A.useMemo)(
          () =>
            (!t && !u) || (Array.isArray(t) && 0 === t.length)
              ? null
              : (0, v.jsx)(j.Content, {
                  className: (0, S.cn)(
                    D.default.content,
                    "data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up",
                  ),
                  children: (0, v.jsxs)("div", {
                    className: (0, S.cn)(
                      "grid grid-cols-[min-content_minmax(0,1fr)] items-start max-w-full min-w-0",
                      D.default.renderedParts,
                    ),
                    children: [
                      (0, v.jsx)(em, { fadeEnd: n, hidden: f, animate: n }),
                      (0, v.jsx)(ey, {
                        maxHeight: s,
                        autoScrollActive: n,
                        children: (0, v.jsxs)("div", {
                          className:
                            "flex flex-col gap-2 pt-2 max-w-full min-w-0",
                          children: [
                            t,
                            u ? (0, v.jsx)(et, { error: u }) : null,
                          ],
                        }),
                      }),
                    ],
                  }),
                }),
          [t, u, f, n, s],
        ),
        C = (0, A.useRef)(!1),
        [N, I] = (0, A.useState)(n ? Y : void 0),
        L = (0, A.useMemo)(() => !!(b || r) && !n, [b, r, n]);
      (0, A.useEffect)(() => {
        C.current || n || I(void 0);
      }, [n, a]);
      let P = (0, A.useCallback)(
          (e) => {
            ((C.current = !0), I(e), i?.(e ? "open" : "closed"));
          },
          [i],
        ),
        R = (0, A.useCallback)(
          (e) => {
            r?.(e);
          },
          [r],
        ),
        F = (0, A.useMemo)(() => {
          s: if (u) {
            if (
              "HANDLED_EXECUTION_ERROR" === u.type &&
              "AGENT_GUIDANCE" === u.code
            )
              break s;
            return (0, v.jsx)(k.Warning, {
              style: { ...(0, M.transitionStyles)(["color"], J) },
            });
          }
          return o
            ? (0, v.jsx)(W.ConnectIntegration.Provider, {
                state: (0, W.createForbiddenIntegrationState)(o),
                actions: { handleConnect: null },
                children: (0, v.jsx)(W.ConnectIntegration.Icon, {
                  containerClassName: "size-4 border-none",
                  iconClassName: "mt-0 mb-0",
                }),
              })
            : (0, v.jsx)(h, {
                style: { ...(0, M.transitionStyles)(["color"], J) },
              });
        }, [u, o, h]);
      return (0, v.jsx)(j.Root, {
        "data-rich-task": "true",
        type: "single",
        className: "w-full",
        collapsible: !0,
        value: N,
        onValueChange: P,
        children: (0, v.jsx)(E.motion.div, {
          ...(0, T.motionReplyAnimationIf)(!l && n),
          children: (0, v.jsxs)(j.Item, {
            value: "active",
            children: [
              (0, v.jsxs)("div", {
                className: "flex items-center gap-2",
                children: [
                  (0, v.jsxs)(j.Trigger, {
                    className: (0, S.cn)(
                      "group/trigger w-full flex items-center gap-2 text-[14px] text-v0-gray-900 rounded-[6px] min-h-6 truncate min-w-0",
                      "focus-visible:ring-offset-background outline-hidden has-focus-visible:ring-2 ring-v0-blue-700 transition focus-visible:ring-2 focus-visible:ring-offset-1",
                      L ? "cursor-pointer" : "cursor-default",
                      m,
                    ),
                    style: x,
                    tabIndex: L ? 0 : -1,
                    onClick: R,
                    children: [
                      (0, v.jsxs)("span", {
                        className: (0, S.cn)(
                          "min-w-4 min-h-4 place-items-center place-content-center grid text-v0-gray-700",
                          {
                            "[&>*]:grid-stack group-hover/trigger:text-gray-900 group-focus-visible/trigger:text-gray-900":
                              L,
                          },
                        ),
                        style: { ...(0, M.transitionStyles)(["color"], J) },
                        children: [
                          (0, v.jsx)("div", {
                            className: (0, S.cn)(
                              "grid place-items-center [&>*]:grid-stack",
                              L
                                ? (0, S.cn)(
                                    "group-hover/trigger:opacity-0 group-hover/trigger:scale-80 opacity-100 scale-100",
                                    "group-data-[state=open]/trigger:opacity-0 group-data-[state=open]/trigger:scale-80",
                                    "group-focus-visible/trigger:opacity-0 group-focus-visible/trigger:scale-80",
                                  )
                                : null,
                              {
                                "text-v0-amber-500": u,
                                "text-v0-gray-700":
                                  u?.type === "HANDLED_EXECUTION_ERROR" &&
                                  "AGENT_GUIDANCE" === u.code,
                              },
                            ),
                            style: {
                              ...(0, M.transitionStyles)(
                                ["opacity", "scale"],
                                J,
                              ),
                            },
                            children: F,
                          }),
                          b
                            ? (0, v.jsx)(w.ChevronDownSmall, {
                                className: (0, S.cn)(
                                  "absolute",
                                  "rotate-[-90deg] group-data-[state=open]/trigger:rotate-0 duration-100 opacity-0",
                                  L
                                    ? (0, S.cn)(
                                        "group-hover/trigger:opacity-100 group-hover/trigger:scale-100 scale-80",
                                        "group-data-[state=open]/trigger:opacity-100 group-data-[state=open]/trigger:scale-100",
                                        "group-focus-visible/trigger:opacity-100 group-focus-visible/trigger:scale-100",
                                      )
                                    : null,
                                ),
                                style: {
                                  ...(0, M.transitionStyles)(
                                    ["opacity", "rotate"],
                                    J,
                                  ),
                                },
                              })
                            : null,
                        ],
                      }),
                      (0, v.jsx)(y.ShimmerChildren, {
                        shimmer: n,
                        children: (0, v.jsxs)("div", {
                          className: (0, S.cn)(
                            "flex items-center gap-2 min-w-0",
                            {
                              "group-hover/trigger:text-v0-gray-900 group-focus-visible/trigger:text-v0-gray-900":
                                L,
                            },
                          ),
                          style: { ...(0, M.transitionStyles)(["color"], J) },
                          children: [
                            e,
                            n && !p
                              ? (0, v.jsx)(eg, { start: c, end: d })
                              : null,
                          ],
                        }),
                      }),
                    ],
                  }),
                  g,
                ],
              }),
              b,
            ],
          }),
        }),
      });
    }
    function X({ children: e, isActive: t }) {
      return (0, v.jsx)(E.motion.div, {
        "data-rich-part": "true",
        className:
          "flex items-center gap-2 text-[13px] text-v0-gray-900 max-w-full min-w-0",
        ...(0, T.motionReplyAnimationIf)(t),
        children: e,
      });
    }
    function ee({
      isActive: e,
      textActive: t,
      textComplete: n,
      taskNameActive: r,
      taskNameComplete: i,
    }) {
      return e ? (r ?? t) : (i ?? n);
    }
    function et({ error: e }) {
      let {
        title: t,
        message: n,
        variant: r,
      } = (0, A.useMemo)(() => {
        switch (e.type) {
          case "INPUT_SCHEMA_ERROR":
            return {
              title: "Invalid input schema provided",
              message:
                "An error occurred while validating the input schema. Retrying...",
              variant: "error",
            };
          case "HANDLED_EXECUTION_ERROR":
            if ("AGENT_GUIDANCE" === e.code)
              return { message: e.message, variant: null };
            return {
              title: "Agent Error",
              message: `An error occurred while the agent was working, ${e.message}`,
              variant: "error",
            };
          default:
            return {
              title: "Agent Error",
              message: "An unhandled problem occurred. Please try again.",
              variant: "error",
            };
        }
      }, [e]);
      return r ? (0, v.jsx)(ed, { variant: r, title: t, children: n }) : n;
    }
    function en({ image: e, url: t, favicon: n, title: r, publishedDate: i }) {
      let s = (0, A.useMemo)(
          () =>
            (0, v.jsxs)("div", {
              className: "flex flex-col w-[300px]",
              children: [
                (0, v.jsx)(ei, {
                  screenshotUrl: e,
                  url: t,
                  className: "h-[160px]",
                  variant: "none",
                }),
                (0, v.jsxs)("div", {
                  className:
                    "w-full gap-0.5 flex flex-col bg-v0-background-100 min-h-fit max-h-fit p-2 px-2.5 text-v0-gray-1000 text-[13px] z-20 border-t border-v0-gray-200",
                  children: [
                    i
                      ? (0, v.jsx)("span", {
                          className: "text-v0-gray-900 text-[12px]",
                          children: new Date(i).toLocaleDateString(void 0, {
                            year: "numeric",
                            month: "short",
                            day: "numeric",
                          }),
                        })
                      : null,
                    r,
                  ],
                }),
              ],
            }),
          [e, t, i, r],
        ),
        a = (0, A.useMemo)(
          () =>
            n
              ? (0, v.jsxs)("div", {
                  className:
                    "relative size-4 min-w-4 rounded-full overflow-hidden",
                  children: [
                    (0, v.jsx)("img", {
                      className: "rounded-full z-20 w-4 h-4 !m-0",
                      src: n,
                      alt: `Favicon for ${r}`,
                    }),
                    (0, v.jsx)(_.Skeleton, {
                      className: "absolute inset-0 w-full h-full",
                    }),
                  ],
                })
              : null,
          [n, r],
        );
      return (0, v.jsx)(L.ContextPill, {
        href: t,
        prefix: a,
        hoverContent: s,
        variant: "default",
        children: ex({ url: t, omitPath: !0 }),
      });
    }
    let er = (0, N.cva)(
      "flex items-center justify-center shrink relative group/screenshot",
      {
        variants: {
          variant: {
            none: "bg-v0-background-200",
            contained:
              "bg-v0-alpha-400 aspect-[16/9] rounded-[6px] overflow-hidden",
          },
          size: {
            unset: "w-auto",
            small: "min-w-[144px] w-fit",
            medium: "min-w-[320px] w-fit",
            large: "min-w-[440px] w-fit",
          },
        },
        defaultVariants: { variant: "contained", size: "medium" },
      },
    );
    function ei({ screenshotUrl: e, url: t, className: n, ...r }) {
      return (0, v.jsxs)("div", {
        className: er({ className: n, ...r }),
        children: [
          t
            ? (0, v.jsx)(O.default, {
                href: t,
                target: "_blank",
                rel: "noopener noreferrer",
                className:
                  "absolute w-full h-full bg-v0-alpha-400 z-20 flex items-center justify-center transition-opacity no-underline group-hover/screenshot:opacity-100 opacity-0",
                children: (0, v.jsxs)("span", {
                  className:
                    "flex group-hover/screenshot:scale-100 scale-90 items-center gap-1 text-[13px] text-v0-gray-1000 material-small px-2 h-7 !no-underline transition-all",
                  children: ["Visit", (0, v.jsx)(C.ExternalSmall, {})],
                }),
              })
            : null,
          e
            ? (0, v.jsx)(v.Fragment, {
                children: (0, v.jsx)("img", {
                  className: "object-cover absolute z-10 !m-0",
                  src: e,
                  alt: `Screenshot ${t ? ex({ url: t }) : ""}`,
                }),
              })
            : (0, v.jsx)("div", {
                className:
                  "absolute w-full h-full flex items-center justify-center bg-v0-background-200 text-v0-gray-900 z-10",
                children: (0, v.jsx)("span", {
                  className:
                    "group-hover/screenshot:opacity-0 transition-opacity",
                  children: "No preview available",
                }),
              }),
          (0, v.jsx)(_.Skeleton, {
            className: "absolute inset-0 w-full h-full rounded-none",
          }),
        ],
      });
    }
    function es({ children: e }) {
      return (0, v.jsx)("div", {
        className:
          "text-label-13-mono text-v0-gray-900 p-3 bg-v0-background-200 border-v0-gray-200 border rounded-[6px] overflow-x-scroll",
        children: (0, v.jsx)("div", {
          className:
            "whitespace-pre-wrap min-w-[800px] break-all flex flex-col gap-1 ",
          children: e,
        }),
      });
    }
    function ea({ filePath: e, shorten: t, limit: n, offset: r }) {
      let i = (0, A.useMemo)(() => (0, G.cleanAgentFilePath)(e), [e]),
        s = (0, P.filePathToIcon)(i),
        { getOpenFileHandler: a } = (0, U.useOpenFileInActiveBlock)(),
        o = (0, A.useMemo)(() => a(i), [i, a]);
      return (0, v.jsx)(L.ContextPill, {
        prefix: (0, v.jsx)(s, {}),
        onClick: o,
        children: (0, v.jsxs)("div", {
          className: "flex items-center min-w-0 flex-1",
          children: [
            (0, v.jsx)("span", {
              className: "truncate min-w-0",
              children: (0, v.jsx)("span", {
                children: t ? i.split("/").pop() : `~${i}`,
              }),
            }),
            null != r && n
              ? (0, v.jsx)("span", {
                  className: "ml-1 text-v0-gray-500 text-[12px] shrink-0",
                  children: `Line${n > 1 ? "s" : ""} ${r + 1}-${r + n}`,
                })
              : null,
          ],
        }),
      });
    }
    function eo({ label: e, files: t }) {
      return (0, v.jsxs)("span", {
        className: "inline-flex flex-wrap items-center gap-1.5",
        children: [
          e,
          t.map((e, t) =>
            "string" == typeof e
              ? (0, v.jsx)(ea, { filePath: e, shorten: !0 }, t)
              : (0, v.jsx)(ea, { shorten: !0, ...e }, t),
          ),
        ],
      });
    }
    function el({ directory: e, children: t, command: n }) {
      return (0, v.jsxs)("span", {
        children: [
          (0, v.jsxs)("span", {
            className: "text-v0-gray-900",
            children: [
              "~/",
              e || (0, v.jsx)("span", { children: "..." }),
              (0, v.jsx)("span", { children: ">" }),
            ],
          }),
          " ",
          (0, v.jsx)("span", {
            className: "text-v0-gray-1000",
            children: n ?? t,
          }),
        ],
      });
    }
    function ec({ output: e }) {
      return (0, v.jsx)("span", {
        className: "text-v0-gray-900 whitespace-pre-wrap break-words",
        children: e || "No output",
      });
    }
    let eu = (0, N.cva)(
      (0, S.cn)(
        "flex flex-col gap-2 px-3 py-1.5 rounded-[6px] text-[13px] border",
        q,
      ),
      {
        variants: {
          variant: {
            warning: "bg-v0-amber-200 text-v0-amber-700 border-v0-amber-300 ",
            info: "bg-v0-background-200 text-v0-gray-1000 border-v0-gray-200 [&_p]:text-v0-gray-900",
            error: "bg-v0-red-200 text-v0-red-800 border-v0-red-300",
          },
        },
      },
    );
    function ed({
      title: e,
      variant: t,
      children: n,
      primaryAction: r,
      secondaryAction: i,
    }) {
      let s = (0, A.useMemo)(() => {
        if (e) return e;
        switch (t) {
          case "warning":
            return "Warning";
          case "info":
            return "Information";
          case "error":
            return "Error";
        }
      }, [e, t]);
      return (0, v.jsxs)(E.motion.div, {
        className: eu({ variant: t }),
        ...(0, T.motionReplyAnimationIf)(!0),
        children: [
          (0, v.jsxs)("div", {
            className: "flex flex-col",
            children: [
              (0, v.jsx)("span", { className: "font-medium", children: s }),
              (0, v.jsx)("p", { className: "m-0!", children: n }),
            ],
          }),
          i || r
            ? (0, v.jsxs)("div", {
                className: "flex justify-end gap-2",
                children: [
                  i
                    ? (0, v.jsx)(V.Button, {
                        size: "sm",
                        variant: "ghost",
                        onClick: i.onClick,
                        children: i.text,
                      })
                    : null,
                  r
                    ? (0, v.jsx)(V.Button, {
                        size: "sm",
                        variant: "secondary",
                        onClick: r.onClick,
                        children: r.text,
                      })
                    : null,
                ],
              })
            : null,
        ],
      });
    }
    let eh = [0.19, 0.11, 0.1, 0.99];
    function ep({ animate: e }) {
      return (0, v.jsx)(E.motion.div, {
        className: "h-fit w-fit origin-top",
        initial: e ? { scaleY: 0 } : void 0,
        animate: { scaleY: 1 },
        transition: { duration: 0.4, ease: eh },
        children: (0, v.jsx)(em, {}),
      });
    }
    function em({ className: e, animate: t, hidden: n = !1, fadeEnd: r = !1 }) {
      let [i, s] = (0, B.default)(),
        a = (0, A.useMemo)(
          () => (t ? Math.round(s.height) : "100%"),
          [t, s.height],
        );
      return (0, v.jsx)("div", {
        ref: t ? i : void 0,
        className: (0, S.cn)(
          "min-w-0 w-0 mr-0 min-h-3 h-full flex items-start justify-center overflow-hidden relative",
          e,
          { "min-w-4 w-4 mr-2": !n },
        ),
        style: {
          ...(0, I.visibleStylesIf)(!n),
          ...(0, M.transitionStyles)([
            "width",
            "min-width",
            "opacity",
            "margin",
          ]),
        },
        children: (0, v.jsx)("div", {
          className: (0, S.cn)(
            "w-[1px] min-h-3 absolute top-0 [--line-color:theme(colors.gray.300)] ",
            D.default.timelineLine,
          ),
          style: {
            height: a,
            backgroundSize: `100% ${r ? "100%" : "200%"}`,
            ...(0, M.transitionStyles)(["height", "background-size"], {
              duration: 400,
              timingFunction: eh,
            }),
          },
        }),
      });
    }
    function ef({ className: e, hidden: t = !1 }) {
      return (0, v.jsx)("div", {
        className: (0, S.cn)("relative w-5 h-5", e),
        style: {
          ...(0, I.visibleStylesIf)(!t),
          ...(0, M.transitionStyles)(["opacity"]),
        },
        "aria-hidden": !0,
        children: (0, v.jsx)("div", {
          className:
            "absolute left-0 top-0 w-5 h-5 border-l-2 border-b-2 rounded-bl-[8px] border-v0-alpha-400",
        }),
      });
    }
    let eg = (0, A.memo)(function ({ start: e, end: t }) {
      let [n, r] = (0, A.useState)(Date.now());
      (0, A.useEffect)(() => {
        if (t) return;
        let e = setInterval(() => r(Date.now()), 100);
        return () => {
          clearInterval(e);
        };
      }, [t]);
      let i = (((t || n) - e) / 1e3).toFixed(0);
      return (0, v.jsxs)("div", {
        className: "text-label-14 text-v0-gray-900 tabular-nums",
        children: [
          (0, v.jsx)(b.default, {
            value: parseInt(i),
            transformTiming: {
              duration: 200,
              easing: "cubic-bezier(.35,.08,.09,.98)",
            },
          }),
          "s",
        ],
      });
    });
    function ex({ url: e, omitPath: t }) {
      try {
        let { hostname: n, pathname: r } = new URL(e),
          i = n.replace(/^www\./, ""),
          s = r && "/" !== r ? r : "";
        return `${i}${t ? "" : s}`;
      } catch {
        return e || "Invalid URL";
      }
    }
    function ev(e, t) {
      return 0 === e ? "start" : e === t - 1 ? "end" : "center";
    }
    function ey({ children: e, maxHeight: t, autoScrollActive: n }) {
      let {
        containerRef: r,
        topRef: i,
        bottomRef: s,
        showTopFade: a,
        showBottomFade: o,
      } = (0, F.useScrollFade)("vertical");
      return (
        (0, R.useAutoScroll)({ active: n, scrollRef: r }),
        (0, v.jsxs)("div", {
          className: "relative w-full",
          children: [
            (0, v.jsx)(F.ScrollFade, {
              direction: "top",
              color: "muted",
              orientation: "vertical",
              visible: a,
            }),
            (0, v.jsx)(F.ScrollFade, {
              direction: "bottom",
              color: "muted",
              orientation: "vertical",
              visible: o,
            }),
            (0, v.jsx)(F.ScrollArea, {
              ref: r,
              className: "w-full overflow-y-scroll no-scrollbar",
              style: { maxHeight: t },
              tabIndex: -1,
              children: (0, v.jsxs)("div", {
                className: "flex flex-col relative w-full",
                children: [
                  (0, v.jsx)(F.ScrollMarker, {
                    ref: i,
                    side: "top",
                    orientation: "vertical",
                  }),
                  e,
                  (0, v.jsx)(F.ScrollMarker, {
                    ref: s,
                    side: "bottom",
                    orientation: "vertical",
                  }),
                ],
              }),
            }),
          ],
        })
      );
    }
    function eb({ isVisible: e, isActive: t }) {
      return (0, v.jsx)("div", {
        "aria-hidden": !0,
        className: (0, S.cn)(
          "absolute inset-[-5px] border-0 rounded-[12px] pointer-events-none border-v0-gray-200 !max-w-[unset] !w-[unset]",
          { "border-4": e, "border-v0-blue-300": t },
        ),
        style: {
          ...(0, M.transitionStyles)(["border-color", "border-width"], {
            duration: 450,
          }),
        },
      });
    }
    function ej() {
      let { chatId: e } = (0, H.useChatId)();
      return {
        openReportError: (0, A.useCallback)(
          (t) => {
            if (!e)
              return void $.toast.error(
                "Unable to report error, no chat ID found",
              );
            let n = `I'm seeing the following error in my chat: ${e}`;
            (0, z.openDialog)({
              type: "feedback",
              data: {
                sentiment: "bad",
                feedback: `${t || n}, my chat ID is ${e}`,
              },
            });
          },
          [e],
        ),
      };
    }
    function ew({ data: e, components: t }) {
      let n,
        r,
        i,
        { type: s } = e,
        { chatId: a } = (0, g.useChatId)(),
        o = (0, m.useCallback)(() => {
          (0, x.openDialog)({
            type: "feedback",
            data: {
              sentiment: "bad",
              feedback: `I'm seeing a parsing error in my chat: ${a}`,
            },
          });
        }, [a]);
      if (!(0, f.isUserMessageContentRichPartType)(s)) return null;
      switch (s) {
        case "hidden-context":
        case "refinement-element":
          return null;
        case "confirmed-steps":
          return ek(e);
        case "confirmed-permissions":
          return eC(e);
        case "parse-error":
          return (0, p.jsx)(ed, {
            variant: "error",
            primaryAction: { text: "Report", onClick: o },
            children: "Unable to parse message, please notify the team.",
          });
        case "mention-file":
          ((n = e.filePath), (r = e.filePath), (i = "file"));
          break;
        case "mention-url":
          ((n = e.url), (r = e.url), (i = "url"));
          break;
        case "mention-directory":
          ((n = e.directoryPath), (r = e.directoryPath), (i = "directory"));
          break;
        case "prompt-prediction":
          ((n = e.prediction), (r = e.prediction), (i = "prediction"));
          break;
        case "mention-mcp-server":
          ((n = e.serverName), (r = e.serverId), (i = "mcp-server"));
          break;
        default:
          return s;
      }
      return (0, p.jsx)(t.MentionInlineNode, {
        type: i,
        data: { id: `mention-${r}`, title: n, value: r },
      });
    }
    function eC({ permissions: e }) {
      let t = e[0];
      if (!t) return "I accept";
      if ("ALLOW_ALL_DYNAMIC_TOOLS" === t.type)
        return "I accept all MCP tool calls";
      let n = t.toolName
        .split("_")
        .map((e) => e.charAt(0).toUpperCase() + e.slice(1))
        .join(" ");
      return "ALLOW_DYNAMIC_TOOL_LOOSE" === t.type
        ? `I accept ${n} with any parameters`
        : `I accept ${n}`;
    }
    function ek({
      addedEnvVars: e,
      appliedScripts: t,
      connectedIntegrationNames: n,
    }) {
      let r = [];
      return (e.length > 0 && r.push(`added ${eS(e)} environment variables`),
      t.length > 0 && r.push(`applied ${eS(t)} scripts`),
      n.length > 0 && r.push(`connected ${eS(n)}`),
      0 === r.length)
        ? "I don't wish to take any action right now."
        : `Great, I've ${eS(r)}`;
    }
    function eS(e, t = "and") {
      if (0 === e.length) return "";
      if (1 === e.length) return e[0] || "";
      let n = e[e.length - 1],
        r = e.slice(0, -1);
      return `${r.join(", ")} ${t} ${n || ""}`;
    }
    e.s(
      [
        "EditorMentionInlineNode",
        () => tV,
        "EditorMentionItemExtension",
        () => tH,
      ],
      752715,
    );
    var eN = t,
      eE = e.i(548731);
    e.i(439235);
    var eA = l,
      eD = e.i(405193),
      eI = e.i(986772),
      eM = t,
      eT = eE,
      eL = e.i(626693),
      eP = e.i(10718),
      eR =
        (...e) =>
        (t) => {
          e.forEach((e) => {
            "function" == typeof e ? e(t) : e && (e.current = t);
          });
        },
      eF = ({ contentComponent: e }) => {
        let t = (0, eI.useSyncExternalStore)(
          e.subscribe,
          e.getSnapshot,
          e.getServerSnapshot,
        );
        return (0, eM.jsx)(eM.Fragment, { children: Object.values(t) });
      };
    function e_() {
      let e = new Set(),
        t = {};
      return {
        subscribe: (t) => (
          e.add(t),
          () => {
            e.delete(t);
          }
        ),
        getSnapshot: () => t,
        getServerSnapshot: () => t,
        setRenderer(n, r) {
          ((t = {
            ...t,
            [n]: eD.default.createPortal(r.reactElement, r.element, n),
          }),
            e.forEach((e) => e()));
        },
        removeRenderer(n) {
          let r = { ...t };
          (delete r[n], (t = r), e.forEach((e) => e()));
        },
      };
    }
    var eO = class extends eA.default.Component {
        constructor(e) {
          var t;
          (super(e),
            (this.editorContentRef = eA.default.createRef()),
            (this.initialized = !1),
            (this.state = {
              hasContentComponentInitialized: !!(null == (t = e.editor)
                ? void 0
                : t.contentComponent),
            }));
        }
        componentDidMount() {
          this.init();
        }
        componentDidUpdate() {
          this.init();
        }
        init() {
          let e = this.props.editor;
          if (e && !e.isDestroyed && e.options.element) {
            if (e.contentComponent) return;
            let t = this.editorContentRef.current;
            (t.append(e.view.dom),
              e.setOptions({ element: t }),
              (e.contentComponent = e_()),
              this.state.hasContentComponentInitialized ||
                (this.unsubscribeToContentComponent =
                  e.contentComponent.subscribe(() => {
                    (this.setState((e) =>
                      e.hasContentComponentInitialized
                        ? e
                        : { hasContentComponentInitialized: !0 },
                    ),
                      this.unsubscribeToContentComponent &&
                        this.unsubscribeToContentComponent());
                  })),
              e.createNodeViews(),
              (this.initialized = !0));
          }
        }
        componentWillUnmount() {
          var e;
          let t = this.props.editor;
          if (t) {
            ((this.initialized = !1),
              t.isDestroyed || t.view.setProps({ nodeViews: {} }),
              this.unsubscribeToContentComponent &&
                this.unsubscribeToContentComponent(),
              (t.contentComponent = null));
            try {
              if (!(null == (e = t.view.dom) ? void 0 : e.firstChild)) return;
              let n = document.createElement("div");
              (n.append(t.view.dom), t.setOptions({ element: n }));
            } catch {}
          }
        }
        render() {
          let { editor: e, innerRef: t, ...n } = this.props;
          return (0, eM.jsxs)(eM.Fragment, {
            children: [
              (0, eM.jsx)("div", { ref: eR(t, this.editorContentRef), ...n }),
              (null == e ? void 0 : e.contentComponent) &&
                (0, eM.jsx)(eF, { contentComponent: e.contentComponent }),
            ],
          });
        }
      },
      eB = (0, eA.forwardRef)((e, t) => {
        let n = eA.default.useMemo(
          () => Math.floor(0xffffffff * Math.random()).toString(),
          [e.editor],
        );
        return eA.default.createElement(eO, { key: n, innerRef: t, ...e });
      }),
      eV = eA.default.memo(eB),
      ez = "undefined" != typeof window ? eA.useLayoutEffect : eA.useEffect,
      eH = class {
        constructor(e) {
          ((this.transactionNumber = 0),
            (this.lastTransactionNumber = 0),
            (this.subscribers = new Set()),
            (this.editor = e),
            (this.lastSnapshot = { editor: e, transactionNumber: 0 }),
            (this.getSnapshot = this.getSnapshot.bind(this)),
            (this.getServerSnapshot = this.getServerSnapshot.bind(this)),
            (this.watch = this.watch.bind(this)),
            (this.subscribe = this.subscribe.bind(this)));
        }
        getSnapshot() {
          return (
            this.transactionNumber === this.lastTransactionNumber ||
              ((this.lastTransactionNumber = this.transactionNumber),
              (this.lastSnapshot = {
                editor: this.editor,
                transactionNumber: this.transactionNumber,
              })),
            this.lastSnapshot
          );
        }
        getServerSnapshot() {
          return { editor: null, transactionNumber: 0 };
        }
        subscribe(e) {
          return (
            this.subscribers.add(e),
            () => {
              this.subscribers.delete(e);
            }
          );
        }
        watch(e) {
          if (((this.editor = e), this.editor)) {
            let e = () => {
                ((this.transactionNumber += 1),
                  this.subscribers.forEach((e) => e()));
              },
              t = this.editor;
            return (
              t.on("transaction", e),
              () => {
                t.off("transaction", e);
              }
            );
          }
        }
      };
    function e$(e) {
      var t;
      let [n] = (0, eA.useState)(() => new eH(e.editor)),
        r = (0, eP.useSyncExternalStoreWithSelector)(
          n.subscribe,
          n.getSnapshot,
          n.getServerSnapshot,
          e.selector,
          null != (t = e.equalityFn) ? t : eL.default,
        );
      return (
        ez(() => n.watch(e.editor), [e.editor, n]),
        (0, eA.useDebugValue)(r),
        r
      );
    }
    var eU = "undefined" == typeof window,
      eG = eU || !!("undefined" != typeof window && window.next),
      eW = class e {
        constructor(e) {
          ((this.editor = null),
            (this.subscriptions = new Set()),
            (this.isComponentMounted = !1),
            (this.previousDeps = null),
            (this.instanceId = ""),
            (this.options = e),
            (this.subscriptions = new Set()),
            this.setEditor(this.getInitialEditor()),
            this.scheduleDestroy(),
            (this.getEditor = this.getEditor.bind(this)),
            (this.getServerSnapshot = this.getServerSnapshot.bind(this)),
            (this.subscribe = this.subscribe.bind(this)),
            (this.refreshEditorInstance =
              this.refreshEditorInstance.bind(this)),
            (this.scheduleDestroy = this.scheduleDestroy.bind(this)),
            (this.onRender = this.onRender.bind(this)),
            (this.createEditor = this.createEditor.bind(this)));
        }
        setEditor(e) {
          ((this.editor = e),
            (this.instanceId = Math.random().toString(36).slice(2, 9)),
            this.subscriptions.forEach((e) => e()));
        }
        getInitialEditor() {
          return void 0 === this.options.current.immediatelyRender
            ? eU || eG
              ? null
              : this.createEditor()
            : (this.options.current.immediatelyRender,
                this.options.current.immediatelyRender)
              ? this.createEditor()
              : null;
        }
        createEditor() {
          let e = {
            ...this.options.current,
            onBeforeCreate: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onBeforeCreate)
                ? void 0
                : n.call(t, ...e);
            },
            onBlur: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onBlur)
                ? void 0
                : n.call(t, ...e);
            },
            onCreate: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onCreate)
                ? void 0
                : n.call(t, ...e);
            },
            onDestroy: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onDestroy)
                ? void 0
                : n.call(t, ...e);
            },
            onFocus: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onFocus)
                ? void 0
                : n.call(t, ...e);
            },
            onSelectionUpdate: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onSelectionUpdate)
                ? void 0
                : n.call(t, ...e);
            },
            onTransaction: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onTransaction)
                ? void 0
                : n.call(t, ...e);
            },
            onUpdate: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onUpdate)
                ? void 0
                : n.call(t, ...e);
            },
            onContentError: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onContentError)
                ? void 0
                : n.call(t, ...e);
            },
            onDrop: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onDrop)
                ? void 0
                : n.call(t, ...e);
            },
            onPaste: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onPaste)
                ? void 0
                : n.call(t, ...e);
            },
            onDelete: (...e) => {
              var t, n;
              return null == (n = (t = this.options.current).onDelete)
                ? void 0
                : n.call(t, ...e);
            },
          };
          return new eT.Editor(e);
        }
        getEditor() {
          return this.editor;
        }
        getServerSnapshot() {
          return null;
        }
        subscribe(e) {
          return (
            this.subscriptions.add(e),
            () => {
              this.subscriptions.delete(e);
            }
          );
        }
        static compareOptions(e, t) {
          return Object.keys(e).every(
            (n) =>
              !![
                "onCreate",
                "onBeforeCreate",
                "onDestroy",
                "onUpdate",
                "onTransaction",
                "onFocus",
                "onBlur",
                "onSelectionUpdate",
                "onContentError",
                "onDrop",
                "onPaste",
              ].includes(n) ||
              ("extensions" === n && e.extensions && t.extensions
                ? e.extensions.length === t.extensions.length &&
                  e.extensions.every((e, n) => {
                    var r;
                    return e === (null == (r = t.extensions) ? void 0 : r[n]);
                  })
                : e[n] === t[n]),
          );
        }
        onRender(t) {
          return () => (
            (this.isComponentMounted = !0),
            clearTimeout(this.scheduledDestructionTimeout),
            this.editor && !this.editor.isDestroyed && 0 === t.length
              ? e.compareOptions(this.options.current, this.editor.options) ||
                this.editor.setOptions({
                  ...this.options.current,
                  editable: this.editor.isEditable,
                })
              : this.refreshEditorInstance(t),
            () => {
              ((this.isComponentMounted = !1), this.scheduleDestroy());
            }
          );
        }
        refreshEditorInstance(e) {
          if (this.editor && !this.editor.isDestroyed) {
            if (null === this.previousDeps) {
              this.previousDeps = e;
              return;
            }
            if (
              this.previousDeps.length === e.length &&
              this.previousDeps.every((t, n) => t === e[n])
            )
              return;
          }
          (this.editor && !this.editor.isDestroyed && this.editor.destroy(),
            this.setEditor(this.createEditor()),
            (this.previousDeps = e));
        }
        scheduleDestroy() {
          let e = this.instanceId,
            t = this.editor;
          this.scheduledDestructionTimeout = setTimeout(() => {
            if (this.isComponentMounted && this.instanceId === e) {
              t && t.setOptions(this.options.current);
              return;
            }
            t &&
              !t.isDestroyed &&
              (t.destroy(), this.instanceId === e && this.setEditor(null));
          }, 1);
        }
      };
    function eq(e = {}, t = []) {
      let n = (0, eA.useRef)(e);
      n.current = e;
      let [r] = (0, eA.useState)(() => new eW(n)),
        i = (0, eI.useSyncExternalStore)(
          r.subscribe,
          r.getEditor,
          r.getServerSnapshot,
        );
      return (
        (0, eA.useDebugValue)(i),
        (0, eA.useEffect)(r.onRender(t)),
        e$({
          editor: i,
          selector: ({ transactionNumber: t }) =>
            !1 === e.shouldRerenderOnTransaction ||
            void 0 === e.shouldRerenderOnTransaction
              ? null
              : e.immediatelyRender && 0 === t
                ? 0
                : t + 1,
        }),
        i
      );
    }
    (0, eA.createContext)({ editor: null }).Consumer;
    var eZ = (0, eA.createContext)({
        onDragStart: () => {},
        nodeViewContentChildren: void 0,
        nodeViewContentRef: () => {},
      }),
      eK = () => (0, eA.useContext)(eZ),
      eY = eA.default.forwardRef((e, t) => {
        let { onDragStart: n } = eK(),
          r = e.as || "div";
        return (0, eM.jsx)(r, {
          ...e,
          ref: t,
          "data-node-view-wrapper": "",
          onDragStart: n,
          style: { whiteSpace: "normal", ...e.style },
        });
      });
    function eJ(e) {
      return !!(
        "function" == typeof e &&
        e.prototype &&
        e.prototype.isReactComponent
      );
    }
    function eQ(e) {
      return !!(
        "object" == typeof e &&
        e.$$typeof &&
        ("Symbol(react.forward_ref)" === e.$$typeof.toString() ||
          "react.forward_ref" === e.$$typeof.description)
      );
    }
    function eX(e) {
      return !!(
        "object" == typeof e &&
        e.$$typeof &&
        ("Symbol(react.memo)" === e.$$typeof.toString() ||
          "react.memo" === e.$$typeof.description)
      );
    }
    function e0(e) {
      if (eJ(e) || eQ(e)) return !0;
      if (eX(e)) {
        let t = e.type;
        if (t) return eJ(t) || eQ(t);
      }
      return !1;
    }
    function e1() {
      try {
        if (eA.version) return parseInt(eA.version.split(".")[0], 10) >= 19;
      } catch {}
      return !1;
    }
    var e2 = class {
      constructor(
        e,
        { editor: t, props: n = {}, as: r = "div", className: i = "" },
      ) {
        ((this.ref = null),
          (this.id = Math.floor(0xffffffff * Math.random()).toString()),
          (this.component = e),
          (this.editor = t),
          (this.props = n),
          (this.element = document.createElement(r)),
          this.element.classList.add("react-renderer"),
          i && this.element.classList.add(...i.split(" ")),
          this.editor.isInitialized
            ? (0, eD.flushSync)(() => {
                this.render();
              })
            : queueMicrotask(() => {
                this.render();
              }));
      }
      render() {
        var e;
        let t = this.component,
          n = this.props,
          r = this.editor,
          i = e1(),
          s = e0(t),
          a = { ...n };
        (a.ref && !(i || s) && delete a.ref,
          !a.ref &&
            (i || s) &&
            (a.ref = (e) => {
              this.ref = e;
            }),
          (this.reactElement = (0, eM.jsx)(t, { ...a })),
          null == (e = null == r ? void 0 : r.contentComponent) ||
            e.setRenderer(this.id, this));
      }
      updateProps(e = {}) {
        ((this.props = { ...this.props, ...e }), this.render());
      }
      destroy() {
        var e;
        let t = this.editor;
        null == (e = null == t ? void 0 : t.contentComponent) ||
          e.removeRenderer(this.id);
        try {
          this.element &&
            this.element.parentNode &&
            this.element.parentNode.removeChild(this.element);
        } catch {}
      }
      updateAttributes(e) {
        Object.keys(e).forEach((t) => {
          this.element.setAttribute(t, e[t]);
        });
      }
    };
    (eA.default.createContext({ markViewContentRef: () => {} }), eT.MarkView);
    var e5 = class extends eT.NodeView {
      constructor(e, t, n) {
        if ((super(e, t, n), !this.node.isLeaf)) {
          (this.options.contentDOMElementTag
            ? (this.contentDOMElement = document.createElement(
                this.options.contentDOMElementTag,
              ))
            : (this.contentDOMElement = document.createElement(
                this.node.isInline ? "span" : "div",
              )),
            (this.contentDOMElement.dataset.nodeViewContentReact = ""),
            (this.contentDOMElement.dataset.nodeViewWrapper = ""),
            (this.contentDOMElement.style.whiteSpace = "inherit"));
          const e = this.dom.querySelector("[data-node-view-content]");
          if (!e) return;
          e.appendChild(this.contentDOMElement);
        }
      }
      mount() {
        let e = {
          editor: this.editor,
          node: this.node,
          decorations: this.decorations,
          innerDecorations: this.innerDecorations,
          view: this.view,
          selected: !1,
          extension: this.extension,
          HTMLAttributes: this.HTMLAttributes,
          getPos: () => this.getPos(),
          updateAttributes: (e = {}) => this.updateAttributes(e),
          deleteNode: () => this.deleteNode(),
          ref: (0, eA.createRef)(),
        };
        if (!this.component.displayName) {
          let e = (e) => e.charAt(0).toUpperCase() + e.substring(1);
          this.component.displayName = e(this.extension.name);
        }
        let t = {
            onDragStart: this.onDragStart.bind(this),
            nodeViewContentRef: (e) => {
              e &&
                this.contentDOMElement &&
                e.firstChild !== this.contentDOMElement &&
                (e.hasAttribute("data-node-view-wrapper") &&
                  e.removeAttribute("data-node-view-wrapper"),
                e.appendChild(this.contentDOMElement));
            },
          },
          n = this.component,
          r = (0, eA.memo)((e) =>
            (0, eM.jsx)(eZ.Provider, {
              value: t,
              children: (0, eA.createElement)(n, e),
            }),
          );
        r.displayName = "ReactNodeView";
        let i = this.node.isInline ? "span" : "div";
        this.options.as && (i = this.options.as);
        let { className: s = "" } = this.options;
        ((this.handleSelectionUpdate = this.handleSelectionUpdate.bind(this)),
          (this.renderer = new e2(r, {
            editor: this.editor,
            props: e,
            as: i,
            className: `node-${this.node.type.name} ${s}`.trim(),
          })),
          this.editor.on("selectionUpdate", this.handleSelectionUpdate),
          this.updateElementAttributes());
      }
      get dom() {
        var e;
        if (
          this.renderer.element.firstElementChild &&
          !(null == (e = this.renderer.element.firstElementChild)
            ? void 0
            : e.hasAttribute("data-node-view-wrapper"))
        )
          throw Error(
            "Please use the NodeViewWrapper component for your node view.",
          );
        return this.renderer.element;
      }
      get contentDOM() {
        return this.node.isLeaf ? null : this.contentDOMElement;
      }
      handleSelectionUpdate() {
        let { from: e, to: t } = this.editor.state.selection,
          n = this.getPos();
        if ("number" == typeof n)
          if (e <= n && t >= n + this.node.nodeSize) {
            if (this.renderer.props.selected) return;
            this.selectNode();
          } else {
            if (!this.renderer.props.selected) return;
            this.deselectNode();
          }
      }
      update(e, t, n) {
        let r = (e) => {
          (this.renderer.updateProps(e),
            "function" == typeof this.options.attrs &&
              this.updateElementAttributes());
        };
        if (e.type !== this.node.type) return !1;
        if ("function" == typeof this.options.update) {
          let i = this.node,
            s = this.decorations,
            a = this.innerDecorations;
          return (
            (this.node = e),
            (this.decorations = t),
            (this.innerDecorations = n),
            this.options.update({
              oldNode: i,
              oldDecorations: s,
              newNode: e,
              newDecorations: t,
              oldInnerDecorations: a,
              innerDecorations: n,
              updateProps: () =>
                r({ node: e, decorations: t, innerDecorations: n }),
            })
          );
        }
        return (
          (e === this.node &&
            this.decorations === t &&
            this.innerDecorations === n) ||
          ((this.node = e),
          (this.decorations = t),
          (this.innerDecorations = n),
          r({ node: e, decorations: t, innerDecorations: n }),
          !0)
        );
      }
      selectNode() {
        (this.renderer.updateProps({ selected: !0 }),
          this.renderer.element.classList.add("ProseMirror-selectednode"));
      }
      deselectNode() {
        (this.renderer.updateProps({ selected: !1 }),
          this.renderer.element.classList.remove("ProseMirror-selectednode"));
      }
      destroy() {
        (this.renderer.destroy(),
          this.editor.off("selectionUpdate", this.handleSelectionUpdate),
          (this.contentDOMElement = null));
      }
      updateElementAttributes() {
        if (this.options.attrs) {
          let e = {};
          if ("function" == typeof this.options.attrs) {
            let t = this.editor.extensionManager.attributes,
              n = (0, eT.getRenderedAttributes)(this.node, t);
            e = this.options.attrs({ node: this.node, HTMLAttributes: n });
          } else e = this.options.attrs;
          this.renderer.updateAttributes(e);
        }
      }
    };
    function e3(e, t) {
      return (n) => (n.editor.contentComponent ? new e5(e, n, t) : {});
    }
    e.s(
      [
        "EditorContent",
        () => eV,
        "NodeViewWrapper",
        () => eY,
        "ReactNodeViewRenderer",
        () => e3,
        "useEditor",
        () => eq,
      ],
      453655,
    );
    var e4 = e.i(73687),
      e9 = t,
      e7 = c;
    function e6({
      children: e,
      className: t,
      onClick: n,
      mono: r,
      rounded: i,
      ...s
    }) {
      return (0, e9.jsxs)("span", {
        "data-context-mention": "true",
        className: (0, e7.cn)(
          "inline-flex px-1 relative text-[13px] mr-[1px] group",
          r ? "font-mono text-[12px]" : "",
          n ? "cursor-pointer" : "",
          t,
        ),
        onClick: n,
        ...s,
        children: [
          (0, e9.jsx)("span", {
            className: (0, e7.cn)(
              "absolute inset-y-[-0.5px] inset-x-0 bg-v0-gray-100 z-0 transition-colors",
              n ? "group-hover:bg-v0-gray-200" : "",
              i ? "rounded-full" : "rounded-[4px]",
            ),
          }),
          (0, e9.jsx)("span", { className: "relative z-10", children: e }),
        ],
      });
    }
    e.s(["ContextInlinePill", () => e6], 222348);
    var e8 = t,
      te = eE;
    e.i(653270);
    var tt = e.i(187195);
    e.i(732674);
    var tn = e.i(445231),
      tr = e.i(904921),
      ti = e4,
      ts = e.i(805022),
      ta = e.i(827887),
      to = e.i(393799),
      tl = e.i(9654),
      tc = e.i(753533),
      tu = e.i(142219),
      td = g,
      th = ts,
      tp = e.i(457456),
      tm = e.i(418929);
    let tf = new Map(),
      tg = (0, tc.cacheResultById)(tf, () => ({ isLoading: (0, tl.atom)(!1) })),
      tx = new Map(),
      tv = (0, tc.cacheResultById)(tx, (e) => {
        let t = tg(e),
          n = (0, tp.getWritableGlobalAtoms)(),
          r = (0, tm.getPromptAtoms)(e),
          i = (0, tl.atom)((e) => {
            let t = e(n.promptPredictions),
              i = t.ok ? t.value.predictions : null,
              s = e(r.uniquePredictions);
            if (i && s.length > 0) {
              let e = new Set();
              for (let t of s) {
                let n = (0, th.getPromptPredictionDimension)(t);
                n && e.add(n);
              }
              return i.filter((t) => {
                let n = (0, th.getPromptPredictionDimension)(t);
                return null !== n && !e.has(n);
              });
            }
            return i ?? [];
          }),
          s = (0, tl.atom)((e) => {
            let i = e(r.contentText);
            if (e(t.isLoading)) return !1;
            let s = e(n.promptPredictions),
              a = s.ok ? s.value.promptPredicted : "";
            return i?.trim() === a.trim();
          });
        return { ...t, predictionsStillValid: s, predictionOptions: i };
      }),
      ty = (e) => {
        let t = tg(e);
        return {
          setIsLoading: (e) => {
            tu.store.set(t.isLoading, e);
          },
        };
      };
    function tb() {
      let e = (0, td.assertChatId)((0, td.useChatId)().chatId);
      return { atoms: tv(e), actions: ty(e), chatId: e };
    }
    e.s(
      [
        "getPredictionsAtoms",
        0,
        tv,
        "useCurrentChatPromptPredictions",
        () => tb,
      ],
      416190,
    );
    var tj = N,
      tw = e.i(403055),
      tC = e.i(877318),
      tk = M,
      tS = l,
      tN = e.i(996174),
      tE = E,
      tA = tm,
      tD = e.i(626085),
      tI = e.i(242759),
      tM = e.i(53223);
    let tT = (0, tj.cva)(
      (0, tw.cn)(
        "translate-y-[-1px]",
        "hover:bg-v0-gray-100 hover:border-v0-gray-600 hover:text-v0-gray-900",
        "focus-visible:border-v0-blue-700 focus-visible:bg-v0-blue-100 focus-visible:text-v0-blue-700 focus-visible:ring-none focus-visible:outline-none",
        "relative inline-flex items-center justify-center border border-dashed border-v0-gray-500 text-v0-gray-900 rounded-full pr-1.5 pl-0.5 h-[20px] mx-0.5 text-[11px] font-medium cursor-pointer align-middle",
      ),
    );
    function tL({ chatId: e, notAtEnd: t, onPredictionClick: n, editor: r }) {
      let [i, s] = (0, tS.useState)(null),
        a = tv(e),
        o = (0, tA.getPromptAtoms)(e),
        l = (0, to.useAtomValue)(a.predictionOptions),
        c = (0, to.useAtomValue)(a.predictionsStillValid),
        u = (0, to.useAtomValue)(o.isPromptFocused) || null !== i,
        d = l.length,
        h = (e, t, r, i) => {
          (e?.preventDefault(),
            e?.stopPropagation(),
            s(null),
            n(t),
            (0, tM.track)("PromptPredictionSelected", {
              prediction: t,
              dimension: (0, ts.getPromptPredictionDimension)(t),
              method: i,
              index: r,
              totalPredictions: d,
            }));
        },
        p = (e, t, n) => {
          if ("Enter" === e.key) h(e, t, n, "enter");
          else if ("Tab" === e.key) {
            let r = e.shiftKey ? "backward" : "forward",
              i = e.shiftKey ? n - 1 >= 0 : n + 1 < d;
            (0, tM.track)("PromptPredictionTabbed", {
              prediction: t,
              dimension: (0, ts.getPromptPredictionDimension)(t),
              direction: r,
              index: n,
              totalPredictions: d,
              hasNextWithinPredictions: i,
            });
          } else if ("Shift" === e.key);
          else {
            (e.preventDefault(), e.stopPropagation(), s(null));
            let t = r.state.doc.content.size;
            if (!r.view) return;
            (r.chain().focus().setTextSelection(t).run(),
              requestAnimationFrame(() => {
                if (!r.view) return;
                let t = new KeyboardEvent("keydown", {
                  key: e.key,
                  code: e.code,
                  keyCode: e.keyCode,
                  which: e.which,
                  shiftKey: e.shiftKey,
                  ctrlKey: e.ctrlKey,
                  altKey: e.altKey,
                  metaKey: e.metaKey,
                  bubbles: !0,
                  cancelable: !0,
                });
                r.view.dom.dispatchEvent(t);
              }));
          }
        },
        m = l.length > 0 && !t && c,
        f = !(0, tD.usePrevious)(m) && m;
      return m
        ? (0, e8.jsx)(e8.Fragment, {
            children: l.map((e, t) => {
              let n = !!u && (null !== i ? i === t : 0 === t),
                r = { shortcut: "Tab", name: "to focus" };
              return (
                1 === l.length && (r = { shortcut: "Tab", name: "to select" }),
                null !== i && (r = { shortcut: "Enter", name: "to select" }),
                (0, e8.jsxs)(
                  tN.TooltipRoot,
                  {
                    open: n,
                    children: [
                      (0, e8.jsx)(tN.TooltipContent, {
                        side: "bottom",
                        className:
                          "!bg-transparent !shadow-none !border-none p-0 h-[26px] min-h-0 rounded-[6px]",
                        updatePositionStrategy: n ? "always" : "optimized",
                        children: n
                          ? (0, e8.jsxs)(tE.motion.div, {
                              initial: f
                                ? { opacity: 0, scale: 0.9, y: 4 }
                                : { opacity: 1, scale: 1, y: 0 },
                              animate: { opacity: 1, scale: 1 },
                              transition: {
                                delay: 0.2 * !!f,
                                duration: 0.15,
                                ease: [0.4, 0, 0.2, 1],
                              },
                              className:
                                "flex items-center h-[26px] px-1 border border-v0-gray-400 rounded-[6px] justify-center overflow-hidden gap-1 font-medium text-[11px] bg-v0-gray-100 text-v0-gray-900 w-fit whitespace-nowrap",
                              children: [
                                (0, e8.jsx)("span", {
                                  className:
                                    "rounded-sm bg-v0-background-100 border border-v0-gray-300 px-1 h-4 flex items-center justify-center text-v0-gray-1000",
                                  children: r.shortcut,
                                }),
                                r.name,
                              ],
                            })
                          : null,
                      }),
                      (0, e8.jsx)(tN.TooltipTrigger, {
                        asChild: !0,
                        children: (0, e8.jsxs)("span", {
                          className: tT(),
                          onClick: (n) => h(n, e, t, "click"),
                          onKeyDown: (n) => p(n, e, t),
                          onFocus: () => {
                            1 === l.length ? h(null, e, t, "auto-focus") : s(t);
                          },
                          onBlur: (e) => {
                            let t = e.relatedTarget;
                            t?.hasAttribute("data-prediction-pill") ||
                              requestAnimationFrame(() => {
                                let e = document.activeElement;
                                e?.hasAttribute("data-prediction-pill") ||
                                  s(null);
                              });
                          },
                          tabIndex: 0,
                          "data-prediction-pill": !0,
                          style: {
                            ...(0, tk.transitionStyles)(
                              ["background", "border-color", "color"],
                              { duration: 100 },
                            ),
                          },
                          role: "button",
                          children: [(0, e8.jsx)(tR, {}), e],
                        }),
                      }),
                    ],
                  },
                  e,
                )
              );
            }),
          })
        : null;
    }
    let tP = (0, tC.withNewIcon)(
        '<path d="M7.25012 13V10.165C7.25012 9.78014 6.83346 9.53957 6.50012 9.73202L4.04495 11.1495L3.29495 9.85048L5.75006 8.43302C6.08339 8.24057 6.08339 7.75944 5.75006 7.56699L3.29492 6.14952L4.04492 4.85048L6.50012 6.26799C6.83346 6.46044 7.25012 6.21988 7.25012 5.83498V3H8.75012V5.83491C8.75012 6.21981 9.16679 6.46037 9.50012 6.26792L11.9552 4.85048L12.7052 6.14952L10.2501 7.56699C9.91673 7.75944 9.91673 8.24057 10.2501 8.43302L12.7052 9.85048L11.9552 11.1495L9.50012 9.73209C9.16679 9.53964 8.75012 9.78021 8.75012 10.1651V13H7.25012Z" fill="currentColor"/>',
      ),
      tR = (0, tC.withNewIcon)(`
<path d="M8 3C10.7614 3 13 5.23858 13 8C13 10.7614 10.7614 13 8 13C5.23858 13 3 10.7614 3 8C3 5.23858 5.23858 3 8 3ZM8 4.25C5.92893 4.25 4.25 5.92893 4.25 8C4.25 10.0711 5.92893 11.75 8 11.75C10.0711 11.75 11.75 10.0711 11.75 8C11.75 5.92893 10.0711 4.25 8 4.25ZM8.625 7.375H10.375V8.625H8.625V10.375H7.375V8.625H5.625V7.375H7.375V5.625H8.625V7.375Z" fill="currentColor"/>`);
    function tF(e) {
      return te.Extension.create({
        name: "stickyPredictions",
        addProseMirrorPlugins() {
          let t = this.editor;
          return [
            new tt.Plugin({
              key: new tt.PluginKey("stickyPredictions"),
              state: {
                init: () => tn.DecorationSet.empty,
                apply: (e, t, n, r) => t.map(e.mapping, r.doc),
              },
              props: {
                decorations(n) {
                  let { doc: r, selection: i } = n,
                    s = [],
                    a = i.anchor,
                    o = r.content.size;
                  if (t.isEmpty) return tn.DecorationSet.empty;
                  let l = o - 1,
                    c = tn.Decoration.widget(
                      l,
                      () => {
                        let n = (e) => {
                            let n = t.state.doc.content.size;
                            t.view &&
                              t
                                .chain()
                                .focus()
                                .setTextSelection(n)
                                .insertContent([
                                  {
                                    type: ti.MENTION_MENU_ITEM_TYPE,
                                    attrs: {
                                      type: "prediction",
                                      data: { id: e, title: e, value: e },
                                    },
                                  },
                                  { type: "text", text: " " },
                                ])
                                .run();
                          },
                          r = document.createElement("span");
                        r.style.display = "inline";
                        let i = (0, tr.createRoot)(r);
                        r.__reactRoot = i;
                        let s = a >= o - 1;
                        return (
                          i.render(
                            (0, e8.jsx)(ta.JotaiProvider, {
                              children: (0, e8.jsx)(tL, {
                                notAtEnd: !s,
                                chatId: e,
                                onPredictionClick: n,
                                editor: t,
                              }),
                            }),
                          ),
                          r
                        );
                      },
                      {
                        side: 1,
                        key: "predictions",
                        destroy: (e) => {
                          let t = e,
                            n = t.__reactRoot;
                          (n &&
                            requestAnimationFrame(() => {
                              try {
                                n.unmount();
                              } catch {}
                            }),
                            t &&
                              requestAnimationFrame(() => {
                                try {
                                  t.remove();
                                } catch {}
                              }));
                        },
                      },
                    );
                  return (s.push(c), tn.DecorationSet.create(r, s));
                },
              },
            }),
          ];
        },
      });
    }
    function t_(e) {
      let { ppre: t } = (0, tI.useFlags)();
      return t ? [tF(e)] : [];
    }
    e.s(["Star", 0, tP, "useEditorPredictionsExtensions", () => t_], 57851);
    var tO = l,
      tB = U;
    function tV({ type: e, data: t }) {
      let { value: n } = t,
        { getOpenFileHandler: r } = (0, tB.useOpenFileInActiveBlock)(),
        i = (0, tO.useMemo)(() => {
          switch (e) {
            case "file":
              return r(n);
            case "url":
              return () => {
                window.open(n, "_blank", "noopener,noreferrer");
              };
            case "directory":
            case "prediction":
            case "mcp-server":
              return;
            default:
              return e;
          }
        }, [e, n, r]);
      return "prediction" === e
        ? (0, eN.jsxs)("span", {
            className:
              "translate-y-[-1px] inline-flex justify-center items-center align-middle rounded-full bg-v0-blue-300 text-v0-blue-900 h-5 min-h-5 pl-1 pr-1.5 text-[11px] border border-v0-blue-500 font-medium",
            children: [(0, eN.jsx)(tP, {}), t.title],
          })
        : (0, eN.jsxs)(e6, { onClick: i, children: ["@", t.title] });
    }
    function tz(e) {
      let t = e.node.attrs;
      return (0, eN.jsx)(eY, {
        as: "span",
        children: (0, eN.jsx)(tV, { ...t }),
      });
    }
    let tH = eE.Node.create({
      name: e4.MENTION_MENU_ITEM_TYPE,
      group: "inline",
      inline: !0,
      selectable: !1,
      atom: !0,
      addAttributes: () => ({
        data: { default: null },
        type: { default: null },
      }),
      parseHTML: () => [
        { tag: `span[data-type="${e4.MENTION_MENU_ITEM_TYPE}"]` },
      ],
      renderHTML: ({ HTMLAttributes: e }) => [
        "span",
        { "data-type": e4.MENTION_MENU_ITEM_TYPE, ...e },
      ],
      addNodeView: () => e3(tz, { as: "span" }),
    });
    function t$(e) {
      try {
        let t = JSON.stringify(e),
          n = new TextEncoder().encode(t);
        return btoa(String.fromCharCode(...n));
      } catch (e) {
        return (console.error("Error encoding object to base64", e), null);
      }
    }
    function tU(e) {
      try {
        let t = atob(e),
          n = new Uint8Array(t.length);
        for (let e = 0; e < t.length; e++) n[e] = t.charCodeAt(e);
        let r = new TextDecoder().decode(n);
        return JSON.parse(r);
      } catch (e) {
        return (console.error("Error decoding base64 string", e), null);
      }
    }
    e.s(["safeBase64Decode", () => tU, "safeBase64Encode", () => t$], 730191);
    let tG = 1e4,
      tW = "v0MessageContentPart:",
      tq = (0, i.default)(r.default),
      tZ = l.default.memo(function ({ children: e, ...n }) {
        return e.length > tG
          ? (0, t.jsx)("p", { children: e })
          : (0, t.jsx)(tq, {
              allowedLinkPrefixes: s.allowedLinkPrefixes,
              allowedImagePrefixes: s.allowedImagePrefixes,
              defaultOrigin: s.defaultOrigin,
              remarkPlugins: [d.remarkColor],
              ...n,
              components: {
                pre: (e) =>
                  (0, t.jsx)("pre", {
                    ...e,
                    className:
                      "bg-v0-background-100 border-v0-alpha-400 text-v0-gray-1000 rounded-lg border px-2 py-[0.3rem] font-mono text-xs font-normal [&_code]:border-none [&_code]:bg-transparent",
                  }),
                code: ({ children: e, ...n }) => {
                  if ("string" == typeof e && (0, d.isColorCode)(e))
                    return (0, t.jsx)(d.ColorCode, { value: e });
                  if ("string" == typeof e && e.startsWith(tW)) {
                    let n = e.slice(tW.length);
                    try {
                      let e = tU(n),
                        r = h.UserMessageContentRichPart.parse(e);
                      return (0, t.jsx)(ew, {
                        data: r,
                        components: { MentionInlineNode: tV },
                      });
                    } catch (e) {
                      return (0, t.jsx)("div", { children: "ERROR" });
                    }
                  }
                  return (0, t.jsx)("code", {
                    ...n,
                    className:
                      "rounded-[0.375rem] border bg-v0-gray-100 font-mono text-xs font-normal before:hidden after:hidden",
                    children: e,
                  });
                },
                ...(n.components ?? {}),
              },
              children: e,
            });
      });
    function tK({ content: e }) {
      let n = "";
      for (let t of e.parts) {
        if ("mdx" === t.type) {
          n += t.content;
          continue;
        }
        let e = t$(t);
        n += `\`${tW}${e}\``;
      }
      return (0, t.jsx)(tZ, { children: n });
    }
    function tY({ message: e, className: r, isLastMessage: i = !1 }) {
      let s = (0, n.getUIMessageKey)(e);
      return "parts" === e.content.type
        ? (0, t.jsx)(
            o.Prose,
            {
              className: (0, c.cn)("w-full", r),
              children: (0, t.jsx)(tK, { content: e.content }),
            },
            s,
          )
        : (0, u.isMessageEmpty)(e)
          ? null
          : (0, t.jsx)(
              "div",
              {
                className: (0, c.cn)("flex-1 text-sm", r),
                children: (0, t.jsx)(a.Renderer, {
                  isLastMessage: i,
                  messageId: s,
                  role: e.role,
                  rows: e.content.value ?? [],
                  streaming: e.streaming,
                }),
              },
              s,
            );
    }
  },
  242828,
  (e, t, n) => {
    var r = "Expected a function",
      i = 0 / 0,
      s = "[object Symbol]",
      a = /^\s+|\s+$/g,
      o = /^[-+]0x[0-9a-f]+$/i,
      l = /^0b[01]+$/i,
      c = /^0o[0-7]+$/i,
      u = parseInt,
      d = e.g && e.g.Object === Object && e.g,
      h = "object" == typeof self && self && self.Object === Object && self,
      p = d || h || Function("return this")(),
      m = Object.prototype.toString,
      f = Math.max,
      g = Math.min,
      x = function () {
        return p.Date.now();
      };
    function v(e, t, n) {
      var i,
        s,
        a,
        o,
        l,
        c,
        u = 0,
        d = !1,
        h = !1,
        p = !0;
      if ("function" != typeof e) throw TypeError(r);
      function m(t) {
        var n = i,
          r = s;
        return ((i = s = void 0), (u = t), (o = e.apply(r, n)));
      }
      function v(e) {
        return ((u = e), (l = setTimeout(C, t)), d ? m(e) : o);
      }
      function b(e) {
        var n = e - c,
          r = e - u,
          i = t - n;
        return h ? g(i, a - r) : i;
      }
      function j(e) {
        var n = e - c,
          r = e - u;
        return void 0 === c || n >= t || n < 0 || (h && r >= a);
      }
      function C() {
        var e = x();
        if (j(e)) return k(e);
        l = setTimeout(C, b(e));
      }
      function k(e) {
        return ((l = void 0), p && i) ? m(e) : ((i = s = void 0), o);
      }
      function S() {
        return void 0 === l ? o : k(x());
      }
      function N() {
        var e = x(),
          n = j(e);
        if (((i = arguments), (s = this), (c = e), n)) {
          if (void 0 === l) return v(c);
          if (h) return ((l = setTimeout(C, t)), m(c));
        }
        return (void 0 === l && (l = setTimeout(C, t)), o);
      }
      return (
        (t = w(t) || 0),
        y(n) &&
          ((d = !!n.leading),
          (a = (h = "maxWait" in n) ? f(w(n.maxWait) || 0, t) : a),
          (p = "trailing" in n ? !!n.trailing : p)),
        (N.cancel = function () {
          (void 0 !== l && clearTimeout(l), (u = 0), (i = c = s = l = void 0));
        }),
        (N.flush = S),
        N
      );
    }
    function y(e) {
      var t = typeof e;
      return !!e && ("object" == t || "function" == t);
    }
    function b(e) {
      return !!e && "object" == typeof e;
    }
    function j(e) {
      return "symbol" == typeof e || (b(e) && m.call(e) == s);
    }
    function w(e) {
      if ("number" == typeof e) return e;
      if (j(e)) return i;
      if (y(e)) {
        var t = "function" == typeof e.valueOf ? e.valueOf() : e;
        e = y(t) ? t + "" : t;
      }
      if ("string" != typeof e) return 0 === e ? e : +e;
      e = e.replace(a, "");
      var n = l.test(e);
      return n || c.test(e) ? u(e.slice(2), n ? 2 : 8) : o.test(e) ? i : +e;
    }
    t.exports = function (e, t, n) {
      var i = !0,
        s = !0;
      if ("function" != typeof e) throw TypeError(r);
      return (
        y(n) &&
          ((i = "leading" in n ? !!n.leading : i),
          (s = "trailing" in n ? !!n.trailing : s)),
        v(e, t, { leading: i, maxWait: t, trailing: s })
      );
    };
  },
  468318,
  (e, t, n) => {
    "use strict";
    let {
        entries: r,
        setPrototypeOf: i,
        isFrozen: s,
        getPrototypeOf: a,
        getOwnPropertyDescriptor: o,
      } = Object,
      { freeze: l, seal: c, create: u } = Object,
      { apply: d, construct: h } = "undefined" != typeof Reflect && Reflect;
    (l ||
      (l = function (e) {
        return e;
      }),
      c ||
        (c = function (e) {
          return e;
        }),
      d ||
        (d = function (e, t) {
          for (
            var n = arguments.length, r = Array(n > 2 ? n - 2 : 0), i = 2;
            i < n;
            i++
          )
            r[i - 2] = arguments[i];
          return e.apply(t, r);
        }),
      h ||
        (h = function (e) {
          for (
            var t = arguments.length, n = Array(t > 1 ? t - 1 : 0), r = 1;
            r < t;
            r++
          )
            n[r - 1] = arguments[r];
          return new e(...n);
        }));
    let p = E(Array.prototype.forEach),
      m = E(Array.prototype.lastIndexOf),
      f = E(Array.prototype.pop),
      g = E(Array.prototype.push),
      x = E(Array.prototype.splice),
      v = E(String.prototype.toLowerCase),
      y = E(String.prototype.toString),
      b = E(String.prototype.match),
      j = E(String.prototype.replace),
      w = E(String.prototype.indexOf),
      C = E(String.prototype.trim),
      k = E(Object.prototype.hasOwnProperty),
      S = E(RegExp.prototype.test),
      N = A(TypeError);
    function E(e) {
      return function (t) {
        t instanceof RegExp && (t.lastIndex = 0);
        for (
          var n = arguments.length, r = Array(n > 1 ? n - 1 : 0), i = 1;
          i < n;
          i++
        )
          r[i - 1] = arguments[i];
        return d(e, t, r);
      };
    }
    function A(e) {
      return function () {
        for (var t = arguments.length, n = Array(t), r = 0; r < t; r++)
          n[r] = arguments[r];
        return h(e, n);
      };
    }
    function D(e, t) {
      let n =
        arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : v;
      i && i(e, null);
      let r = t.length;
      for (; r--; ) {
        let i = t[r];
        if ("string" == typeof i) {
          let e = n(i);
          e !== i && (s(t) || (t[r] = e), (i = e));
        }
        e[i] = !0;
      }
      return e;
    }
    function I(e) {
      for (let t = 0; t < e.length; t++) k(e, t) || (e[t] = null);
      return e;
    }
    function M(e) {
      let t = u(null);
      for (let [n, i] of r(e))
        k(e, n) &&
          (Array.isArray(i)
            ? (t[n] = I(i))
            : i && "object" == typeof i && i.constructor === Object
              ? (t[n] = M(i))
              : (t[n] = i));
      return t;
    }
    function T(e, t) {
      for (; null !== e; ) {
        let n = o(e, t);
        if (n) {
          if (n.get) return E(n.get);
          if ("function" == typeof n.value) return E(n.value);
        }
        e = a(e);
      }
      return function () {
        return null;
      };
    }
    let L = l([
        "a",
        "abbr",
        "acronym",
        "address",
        "area",
        "article",
        "aside",
        "audio",
        "b",
        "bdi",
        "bdo",
        "big",
        "blink",
        "blockquote",
        "body",
        "br",
        "button",
        "canvas",
        "caption",
        "center",
        "cite",
        "code",
        "col",
        "colgroup",
        "content",
        "data",
        "datalist",
        "dd",
        "decorator",
        "del",
        "details",
        "dfn",
        "dialog",
        "dir",
        "div",
        "dl",
        "dt",
        "element",
        "em",
        "fieldset",
        "figcaption",
        "figure",
        "font",
        "footer",
        "form",
        "h1",
        "h2",
        "h3",
        "h4",
        "h5",
        "h6",
        "head",
        "header",
        "hgroup",
        "hr",
        "html",
        "i",
        "img",
        "input",
        "ins",
        "kbd",
        "label",
        "legend",
        "li",
        "main",
        "map",
        "mark",
        "marquee",
        "menu",
        "menuitem",
        "meter",
        "nav",
        "nobr",
        "ol",
        "optgroup",
        "option",
        "output",
        "p",
        "picture",
        "pre",
        "progress",
        "q",
        "rp",
        "rt",
        "ruby",
        "s",
        "samp",
        "search",
        "section",
        "select",
        "shadow",
        "slot",
        "small",
        "source",
        "spacer",
        "span",
        "strike",
        "strong",
        "style",
        "sub",
        "summary",
        "sup",
        "table",
        "tbody",
        "td",
        "template",
        "textarea",
        "tfoot",
        "th",
        "thead",
        "time",
        "tr",
        "track",
        "tt",
        "u",
        "ul",
        "var",
        "video",
        "wbr",
      ]),
      P = l([
        "svg",
        "a",
        "altglyph",
        "altglyphdef",
        "altglyphitem",
        "animatecolor",
        "animatemotion",
        "animatetransform",
        "circle",
        "clippath",
        "defs",
        "desc",
        "ellipse",
        "enterkeyhint",
        "exportparts",
        "filter",
        "font",
        "g",
        "glyph",
        "glyphref",
        "hkern",
        "image",
        "inputmode",
        "line",
        "lineargradient",
        "marker",
        "mask",
        "metadata",
        "mpath",
        "part",
        "path",
        "pattern",
        "polygon",
        "polyline",
        "radialgradient",
        "rect",
        "slot",
        "stop",
        "style",
        "switch",
        "symbol",
        "text",
        "textpath",
        "title",
        "tref",
        "tspan",
        "view",
        "vkern",
      ]),
      R = l([
        "feBlend",
        "feColorMatrix",
        "feComponentTransfer",
        "feComposite",
        "feConvolveMatrix",
        "feDiffuseLighting",
        "feDisplacementMap",
        "feDistantLight",
        "feDropShadow",
        "feFlood",
        "feFuncA",
        "feFuncB",
        "feFuncG",
        "feFuncR",
        "feGaussianBlur",
        "feImage",
        "feMerge",
        "feMergeNode",
        "feMorphology",
        "feOffset",
        "fePointLight",
        "feSpecularLighting",
        "feSpotLight",
        "feTile",
        "feTurbulence",
      ]),
      F = l([
        "animate",
        "color-profile",
        "cursor",
        "discard",
        "font-face",
        "font-face-format",
        "font-face-name",
        "font-face-src",
        "font-face-uri",
        "foreignobject",
        "hatch",
        "hatchpath",
        "mesh",
        "meshgradient",
        "meshpatch",
        "meshrow",
        "missing-glyph",
        "script",
        "set",
        "solidcolor",
        "unknown",
        "use",
      ]),
      _ = l([
        "math",
        "menclose",
        "merror",
        "mfenced",
        "mfrac",
        "mglyph",
        "mi",
        "mlabeledtr",
        "mmultiscripts",
        "mn",
        "mo",
        "mover",
        "mpadded",
        "mphantom",
        "mroot",
        "mrow",
        "ms",
        "mspace",
        "msqrt",
        "mstyle",
        "msub",
        "msup",
        "msubsup",
        "mtable",
        "mtd",
        "mtext",
        "mtr",
        "munder",
        "munderover",
        "mprescripts",
      ]),
      O = l([
        "maction",
        "maligngroup",
        "malignmark",
        "mlongdiv",
        "mscarries",
        "mscarry",
        "msgroup",
        "mstack",
        "msline",
        "msrow",
        "semantics",
        "annotation",
        "annotation-xml",
        "mprescripts",
        "none",
      ]),
      B = l(["#text"]),
      V = l([
        "accept",
        "action",
        "align",
        "alt",
        "autocapitalize",
        "autocomplete",
        "autopictureinpicture",
        "autoplay",
        "background",
        "bgcolor",
        "border",
        "capture",
        "cellpadding",
        "cellspacing",
        "checked",
        "cite",
        "class",
        "clear",
        "color",
        "cols",
        "colspan",
        "controls",
        "controlslist",
        "coords",
        "crossorigin",
        "datetime",
        "decoding",
        "default",
        "dir",
        "disabled",
        "disablepictureinpicture",
        "disableremoteplayback",
        "download",
        "draggable",
        "enctype",
        "enterkeyhint",
        "exportparts",
        "face",
        "for",
        "headers",
        "height",
        "hidden",
        "high",
        "href",
        "hreflang",
        "id",
        "inert",
        "inputmode",
        "integrity",
        "ismap",
        "kind",
        "label",
        "lang",
        "list",
        "loading",
        "loop",
        "low",
        "max",
        "maxlength",
        "media",
        "method",
        "min",
        "minlength",
        "multiple",
        "muted",
        "name",
        "nonce",
        "noshade",
        "novalidate",
        "nowrap",
        "open",
        "optimum",
        "part",
        "pattern",
        "placeholder",
        "playsinline",
        "popover",
        "popovertarget",
        "popovertargetaction",
        "poster",
        "preload",
        "pubdate",
        "radiogroup",
        "readonly",
        "rel",
        "required",
        "rev",
        "reversed",
        "role",
        "rows",
        "rowspan",
        "spellcheck",
        "scope",
        "selected",
        "shape",
        "size",
        "sizes",
        "slot",
        "span",
        "srclang",
        "start",
        "src",
        "srcset",
        "step",
        "style",
        "summary",
        "tabindex",
        "title",
        "translate",
        "type",
        "usemap",
        "valign",
        "value",
        "width",
        "wrap",
        "xmlns",
        "slot",
      ]),
      z = l([
        "accent-height",
        "accumulate",
        "additive",
        "alignment-baseline",
        "amplitude",
        "ascent",
        "attributename",
        "attributetype",
        "azimuth",
        "basefrequency",
        "baseline-shift",
        "begin",
        "bias",
        "by",
        "class",
        "clip",
        "clippathunits",
        "clip-path",
        "clip-rule",
        "color",
        "color-interpolation",
        "color-interpolation-filters",
        "color-profile",
        "color-rendering",
        "cx",
        "cy",
        "d",
        "dx",
        "dy",
        "diffuseconstant",
        "direction",
        "display",
        "divisor",
        "dur",
        "edgemode",
        "elevation",
        "end",
        "exponent",
        "fill",
        "fill-opacity",
        "fill-rule",
        "filter",
        "filterunits",
        "flood-color",
        "flood-opacity",
        "font-family",
        "font-size",
        "font-size-adjust",
        "font-stretch",
        "font-style",
        "font-variant",
        "font-weight",
        "fx",
        "fy",
        "g1",
        "g2",
        "glyph-name",
        "glyphref",
        "gradientunits",
        "gradienttransform",
        "height",
        "href",
        "id",
        "image-rendering",
        "in",
        "in2",
        "intercept",
        "k",
        "k1",
        "k2",
        "k3",
        "k4",
        "kerning",
        "keypoints",
        "keysplines",
        "keytimes",
        "lang",
        "lengthadjust",
        "letter-spacing",
        "kernelmatrix",
        "kernelunitlength",
        "lighting-color",
        "local",
        "marker-end",
        "marker-mid",
        "marker-start",
        "markerheight",
        "markerunits",
        "markerwidth",
        "maskcontentunits",
        "maskunits",
        "max",
        "mask",
        "media",
        "method",
        "mode",
        "min",
        "name",
        "numoctaves",
        "offset",
        "operator",
        "opacity",
        "order",
        "orient",
        "orientation",
        "origin",
        "overflow",
        "paint-order",
        "path",
        "pathlength",
        "patterncontentunits",
        "patterntransform",
        "patternunits",
        "points",
        "preservealpha",
        "preserveaspectratio",
        "primitiveunits",
        "r",
        "rx",
        "ry",
        "radius",
        "refx",
        "refy",
        "repeatcount",
        "repeatdur",
        "restart",
        "result",
        "rotate",
        "scale",
        "seed",
        "shape-rendering",
        "slope",
        "specularconstant",
        "specularexponent",
        "spreadmethod",
        "startoffset",
        "stddeviation",
        "stitchtiles",
        "stop-color",
        "stop-opacity",
        "stroke-dasharray",
        "stroke-dashoffset",
        "stroke-linecap",
        "stroke-linejoin",
        "stroke-miterlimit",
        "stroke-opacity",
        "stroke",
        "stroke-width",
        "style",
        "surfacescale",
        "systemlanguage",
        "tabindex",
        "tablevalues",
        "targetx",
        "targety",
        "transform",
        "transform-origin",
        "text-anchor",
        "text-decoration",
        "text-rendering",
        "textlength",
        "type",
        "u1",
        "u2",
        "unicode",
        "values",
        "viewbox",
        "visibility",
        "version",
        "vert-adv-y",
        "vert-origin-x",
        "vert-origin-y",
        "width",
        "word-spacing",
        "wrap",
        "writing-mode",
        "xchannelselector",
        "ychannelselector",
        "x",
        "x1",
        "x2",
        "xmlns",
        "y",
        "y1",
        "y2",
        "z",
        "zoomandpan",
      ]),
      H = l([
        "accent",
        "accentunder",
        "align",
        "bevelled",
        "close",
        "columnsalign",
        "columnlines",
        "columnspan",
        "denomalign",
        "depth",
        "dir",
        "display",
        "displaystyle",
        "encoding",
        "fence",
        "frame",
        "height",
        "href",
        "id",
        "largeop",
        "length",
        "linethickness",
        "lspace",
        "lquote",
        "mathbackground",
        "mathcolor",
        "mathsize",
        "mathvariant",
        "maxsize",
        "minsize",
        "movablelimits",
        "notation",
        "numalign",
        "open",
        "rowalign",
        "rowlines",
        "rowspacing",
        "rowspan",
        "rspace",
        "rquote",
        "scriptlevel",
        "scriptminsize",
        "scriptsizemultiplier",
        "selection",
        "separator",
        "separators",
        "stretchy",
        "subscriptshift",
        "supscriptshift",
        "symmetric",
        "voffset",
        "width",
        "xmlns",
      ]),
      $ = l([
        "xlink:href",
        "xml:id",
        "xlink:title",
        "xml:space",
        "xmlns:xlink",
      ]),
      U = c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),
      G = c(/<%[\w\W]*|[\w\W]*%>/gm),
      W = c(/\$\{[\w\W]*/gm),
      q = c(/^data-[\-\w.\u00B7-\uFFFF]+$/),
      Z = c(/^aria-[\-\w]+$/),
      K = c(
        /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,
      ),
      Y = c(/^(?:\w+script|data):/i),
      J = c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),
      Q = c(/^html$/i);
    var X = Object.freeze({
      __proto__: null,
      ARIA_ATTR: Z,
      ATTR_WHITESPACE: J,
      CUSTOM_ELEMENT: c(/^[a-z][.\w]*(-[.\w]+)+$/i),
      DATA_ATTR: q,
      DOCTYPE_NAME: Q,
      ERB_EXPR: G,
      IS_ALLOWED_URI: K,
      IS_SCRIPT_OR_DATA: Y,
      MUSTACHE_EXPR: U,
      TMPLIT_EXPR: W,
    });
    let ee = 1,
      et = 3,
      en = 7,
      er = 8,
      ei = 9,
      es = function () {
        return "undefined" == typeof window ? null : window;
      },
      ea = function (e, t) {
        if ("object" != typeof e || "function" != typeof e.createPolicy)
          return null;
        let n = null,
          r = "data-tt-policy-suffix";
        t && t.hasAttribute(r) && (n = t.getAttribute(r));
        let i = "dompurify" + (n ? "#" + n : "");
        try {
          return e.createPolicy(i, {
            createHTML: (e) => e,
            createScriptURL: (e) => e,
          });
        } catch (e) {
          return (
            console.warn("TrustedTypes policy " + i + " could not be created."),
            null
          );
        }
      },
      eo = function () {
        return {
          afterSanitizeAttributes: [],
          afterSanitizeElements: [],
          afterSanitizeShadowDOM: [],
          beforeSanitizeAttributes: [],
          beforeSanitizeElements: [],
          beforeSanitizeShadowDOM: [],
          uponSanitizeAttribute: [],
          uponSanitizeElement: [],
          uponSanitizeShadowNode: [],
        };
      };
    function el() {
      let e,
        t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : es(),
        n = (e) => el(e);
      if (
        ((n.version = "3.2.7"),
        (n.removed = []),
        !t || !t.document || t.document.nodeType !== ei || !t.Element)
      )
        return ((n.isSupported = !1), n);
      let { document: i } = t,
        s = i,
        a = s.currentScript,
        {
          DocumentFragment: o,
          HTMLTemplateElement: c,
          Node: d,
          Element: h,
          NodeFilter: E,
          NamedNodeMap: A = t.NamedNodeMap || t.MozNamedAttrMap,
          HTMLFormElement: I,
          DOMParser: U,
          trustedTypes: G,
        } = t,
        W = h.prototype,
        q = T(W, "cloneNode"),
        Z = T(W, "remove"),
        Y = T(W, "nextSibling"),
        J = T(W, "childNodes"),
        ec = T(W, "parentNode");
      if ("function" == typeof c) {
        let e = i.createElement("template");
        e.content && e.content.ownerDocument && (i = e.content.ownerDocument);
      }
      let eu = "",
        {
          implementation: ed,
          createNodeIterator: eh,
          createDocumentFragment: ep,
          getElementsByTagName: em,
        } = i,
        { importNode: ef } = s,
        eg = eo();
      n.isSupported =
        "function" == typeof r &&
        "function" == typeof ec &&
        ed &&
        void 0 !== ed.createHTMLDocument;
      let {
          MUSTACHE_EXPR: ex,
          ERB_EXPR: ev,
          TMPLIT_EXPR: ey,
          DATA_ATTR: eb,
          ARIA_ATTR: ej,
          IS_SCRIPT_OR_DATA: ew,
          ATTR_WHITESPACE: eC,
          CUSTOM_ELEMENT: ek,
        } = X,
        { IS_ALLOWED_URI: eS } = X,
        eN = null,
        eE = D({}, [...L, ...P, ...R, ..._, ...B]),
        eA = null,
        eD = D({}, [...V, ...z, ...H, ...$]),
        eI = Object.seal(
          u(null, {
            tagNameCheck: {
              writable: !0,
              configurable: !1,
              enumerable: !0,
              value: null,
            },
            attributeNameCheck: {
              writable: !0,
              configurable: !1,
              enumerable: !0,
              value: null,
            },
            allowCustomizedBuiltInElements: {
              writable: !0,
              configurable: !1,
              enumerable: !0,
              value: !1,
            },
          }),
        ),
        eM = null,
        eT = null,
        eL = !0,
        eP = !0,
        eR = !1,
        eF = !0,
        e_ = !1,
        eO = !0,
        eB = !1,
        eV = !1,
        ez = !1,
        eH = !1,
        e$ = !1,
        eU = !1,
        eG = !0,
        eW = !1,
        eq = "user-content-",
        eZ = !0,
        eK = !1,
        eY = {},
        eJ = null,
        eQ = D({}, [
          "annotation-xml",
          "audio",
          "colgroup",
          "desc",
          "foreignobject",
          "head",
          "iframe",
          "math",
          "mi",
          "mn",
          "mo",
          "ms",
          "mtext",
          "noembed",
          "noframes",
          "noscript",
          "plaintext",
          "script",
          "style",
          "svg",
          "template",
          "thead",
          "title",
          "video",
          "xmp",
        ]),
        eX = null,
        e0 = D({}, ["audio", "video", "img", "source", "image", "track"]),
        e1 = null,
        e2 = D({}, [
          "alt",
          "class",
          "for",
          "id",
          "label",
          "name",
          "pattern",
          "placeholder",
          "role",
          "summary",
          "title",
          "value",
          "style",
          "xmlns",
        ]),
        e5 = "http://www.w3.org/1998/Math/MathML",
        e3 = "http://www.w3.org/2000/svg",
        e4 = "http://www.w3.org/1999/xhtml",
        e9 = e4,
        e7 = !1,
        e6 = null,
        e8 = D({}, [e5, e3, e4], y),
        te = D({}, ["mi", "mo", "mn", "ms", "mtext"]),
        tt = D({}, ["annotation-xml"]),
        tn = D({}, ["title", "style", "font", "a", "script"]),
        tr = null,
        ti = ["application/xhtml+xml", "text/html"],
        ts = "text/html",
        ta = null,
        to = null,
        tl = i.createElement("form"),
        tc = function (e) {
          return e instanceof RegExp || e instanceof Function;
        },
        tu = function () {
          let t =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          if (!to || to !== t) {
            if (
              ((t && "object" == typeof t) || (t = {}),
              (t = M(t)),
              (tr =
                -1 === ti.indexOf(t.PARSER_MEDIA_TYPE)
                  ? ts
                  : t.PARSER_MEDIA_TYPE),
              (ta = "application/xhtml+xml" === tr ? y : v),
              (eN = k(t, "ALLOWED_TAGS") ? D({}, t.ALLOWED_TAGS, ta) : eE),
              (eA = k(t, "ALLOWED_ATTR") ? D({}, t.ALLOWED_ATTR, ta) : eD),
              (e6 = k(t, "ALLOWED_NAMESPACES")
                ? D({}, t.ALLOWED_NAMESPACES, y)
                : e8),
              (e1 = k(t, "ADD_URI_SAFE_ATTR")
                ? D(M(e2), t.ADD_URI_SAFE_ATTR, ta)
                : e2),
              (eX = k(t, "ADD_DATA_URI_TAGS")
                ? D(M(e0), t.ADD_DATA_URI_TAGS, ta)
                : e0),
              (eJ = k(t, "FORBID_CONTENTS")
                ? D({}, t.FORBID_CONTENTS, ta)
                : eQ),
              (eM = k(t, "FORBID_TAGS") ? D({}, t.FORBID_TAGS, ta) : M({})),
              (eT = k(t, "FORBID_ATTR") ? D({}, t.FORBID_ATTR, ta) : M({})),
              (eY = !!k(t, "USE_PROFILES") && t.USE_PROFILES),
              (eL = !1 !== t.ALLOW_ARIA_ATTR),
              (eP = !1 !== t.ALLOW_DATA_ATTR),
              (eR = t.ALLOW_UNKNOWN_PROTOCOLS || !1),
              (eF = !1 !== t.ALLOW_SELF_CLOSE_IN_ATTR),
              (e_ = t.SAFE_FOR_TEMPLATES || !1),
              (eO = !1 !== t.SAFE_FOR_XML),
              (eB = t.WHOLE_DOCUMENT || !1),
              (eH = t.RETURN_DOM || !1),
              (e$ = t.RETURN_DOM_FRAGMENT || !1),
              (eU = t.RETURN_TRUSTED_TYPE || !1),
              (ez = t.FORCE_BODY || !1),
              (eG = !1 !== t.SANITIZE_DOM),
              (eW = t.SANITIZE_NAMED_PROPS || !1),
              (eZ = !1 !== t.KEEP_CONTENT),
              (eK = t.IN_PLACE || !1),
              (eS = t.ALLOWED_URI_REGEXP || K),
              (e9 = t.NAMESPACE || e4),
              (te = t.MATHML_TEXT_INTEGRATION_POINTS || te),
              (tt = t.HTML_INTEGRATION_POINTS || tt),
              (eI = t.CUSTOM_ELEMENT_HANDLING || {}),
              t.CUSTOM_ELEMENT_HANDLING &&
                tc(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck) &&
                (eI.tagNameCheck = t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),
              t.CUSTOM_ELEMENT_HANDLING &&
                tc(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) &&
                (eI.attributeNameCheck =
                  t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),
              t.CUSTOM_ELEMENT_HANDLING &&
                "boolean" ==
                  typeof t.CUSTOM_ELEMENT_HANDLING
                    .allowCustomizedBuiltInElements &&
                (eI.allowCustomizedBuiltInElements =
                  t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),
              e_ && (eP = !1),
              e$ && (eH = !0),
              eY &&
                ((eN = D({}, B)),
                (eA = []),
                !0 === eY.html && (D(eN, L), D(eA, V)),
                !0 === eY.svg && (D(eN, P), D(eA, z), D(eA, $)),
                !0 === eY.svgFilters && (D(eN, R), D(eA, z), D(eA, $)),
                !0 === eY.mathMl && (D(eN, _), D(eA, H), D(eA, $))),
              t.ADD_TAGS && (eN === eE && (eN = M(eN)), D(eN, t.ADD_TAGS, ta)),
              t.ADD_ATTR && (eA === eD && (eA = M(eA)), D(eA, t.ADD_ATTR, ta)),
              t.ADD_URI_SAFE_ATTR && D(e1, t.ADD_URI_SAFE_ATTR, ta),
              t.FORBID_CONTENTS &&
                (eJ === eQ && (eJ = M(eJ)), D(eJ, t.FORBID_CONTENTS, ta)),
              eZ && (eN["#text"] = !0),
              eB && D(eN, ["html", "head", "body"]),
              eN.table && (D(eN, ["tbody"]), delete eM.tbody),
              t.TRUSTED_TYPES_POLICY)
            ) {
              if ("function" != typeof t.TRUSTED_TYPES_POLICY.createHTML)
                throw N(
                  'TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.',
                );
              if ("function" != typeof t.TRUSTED_TYPES_POLICY.createScriptURL)
                throw N(
                  'TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.',
                );
              eu = (e = t.TRUSTED_TYPES_POLICY).createHTML("");
            } else
              (void 0 === e && (e = ea(G, a)),
                null !== e && "string" == typeof eu && (eu = e.createHTML("")));
            (l && l(t), (to = t));
          }
        },
        td = D({}, [...P, ...R, ...F]),
        th = D({}, [..._, ...O]),
        tp = function (e) {
          let t = ec(e);
          (t && t.tagName) || (t = { namespaceURI: e9, tagName: "template" });
          let n = v(e.tagName),
            r = v(t.tagName);
          return (
            !!e6[e.namespaceURI] &&
            (e.namespaceURI === e3
              ? t.namespaceURI === e4
                ? "svg" === n
                : t.namespaceURI === e5
                  ? "svg" === n && ("annotation-xml" === r || te[r])
                  : !!td[n]
              : e.namespaceURI === e5
                ? t.namespaceURI === e4
                  ? "math" === n
                  : t.namespaceURI === e3
                    ? "math" === n && tt[r]
                    : !!th[n]
                : e.namespaceURI === e4
                  ? (t.namespaceURI !== e3 || !!tt[r]) &&
                    (t.namespaceURI !== e5 || !!te[r]) &&
                    !th[n] &&
                    (tn[n] || !td[n])
                  : "application/xhtml+xml" === tr && !!e6[e.namespaceURI])
          );
        },
        tm = function (e) {
          g(n.removed, { element: e });
          try {
            ec(e).removeChild(e);
          } catch (t) {
            Z(e);
          }
        },
        tf = function (e, t) {
          try {
            g(n.removed, { attribute: t.getAttributeNode(e), from: t });
          } catch (e) {
            g(n.removed, { attribute: null, from: t });
          }
          if ((t.removeAttribute(e), "is" === e))
            if (eH || e$)
              try {
                tm(t);
              } catch (e) {}
            else
              try {
                t.setAttribute(e, "");
              } catch (e) {}
        },
        tg = function (t) {
          let n = null,
            r = null;
          if (ez) t = "<remove></remove>" + t;
          else {
            let e = b(t, /^[\r\n\t ]+/);
            r = e && e[0];
          }
          "application/xhtml+xml" === tr &&
            e9 === e4 &&
            (t =
              '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' +
              t +
              "</body></html>");
          let s = e ? e.createHTML(t) : t;
          if (e9 === e4)
            try {
              n = new U().parseFromString(s, tr);
            } catch (e) {}
          if (!n || !n.documentElement) {
            n = ed.createDocument(e9, "template", null);
            try {
              n.documentElement.innerHTML = e7 ? eu : s;
            } catch (e) {}
          }
          let a = n.body || n.documentElement;
          return (t &&
            r &&
            a.insertBefore(i.createTextNode(r), a.childNodes[0] || null),
          e9 === e4)
            ? em.call(n, eB ? "html" : "body")[0]
            : eB
              ? n.documentElement
              : a;
        },
        tx = function (e) {
          return eh.call(
            e.ownerDocument || e,
            e,
            E.SHOW_ELEMENT |
              E.SHOW_COMMENT |
              E.SHOW_TEXT |
              E.SHOW_PROCESSING_INSTRUCTION |
              E.SHOW_CDATA_SECTION,
            null,
          );
        },
        tv = function (e) {
          return (
            e instanceof I &&
            ("string" != typeof e.nodeName ||
              "string" != typeof e.textContent ||
              "function" != typeof e.removeChild ||
              !(e.attributes instanceof A) ||
              "function" != typeof e.removeAttribute ||
              "function" != typeof e.setAttribute ||
              "string" != typeof e.namespaceURI ||
              "function" != typeof e.insertBefore ||
              "function" != typeof e.hasChildNodes)
          );
        },
        ty = function (e) {
          return "function" == typeof d && e instanceof d;
        };
      function tb(e, t, r) {
        p(e, (e) => {
          e.call(n, t, r, to);
        });
      }
      let tj = function (e) {
          let t = null;
          if ((tb(eg.beforeSanitizeElements, e, null), tv(e)))
            return (tm(e), !0);
          let r = ta(e.nodeName);
          if (
            (tb(eg.uponSanitizeElement, e, { tagName: r, allowedTags: eN }),
            (eO &&
              e.hasChildNodes() &&
              !ty(e.firstElementChild) &&
              S(/<[/\w!]/g, e.innerHTML) &&
              S(/<[/\w!]/g, e.textContent)) ||
              e.nodeType === en ||
              (eO && e.nodeType === er && S(/<[/\w]/g, e.data)))
          )
            return (tm(e), !0);
          if (!eN[r] || eM[r]) {
            if (
              !eM[r] &&
              tC(r) &&
              ((eI.tagNameCheck instanceof RegExp && S(eI.tagNameCheck, r)) ||
                (eI.tagNameCheck instanceof Function && eI.tagNameCheck(r)))
            )
              return !1;
            if (eZ && !eJ[r]) {
              let t = ec(e) || e.parentNode,
                n = J(e) || e.childNodes;
              if (n && t) {
                let r = n.length;
                for (let i = r - 1; i >= 0; --i) {
                  let r = q(n[i], !0);
                  ((r.__removalCount = (e.__removalCount || 0) + 1),
                    t.insertBefore(r, Y(e)));
                }
              }
            }
            return (tm(e), !0);
          }
          return (e instanceof h && !tp(e)) ||
            (("noscript" === r || "noembed" === r || "noframes" === r) &&
              S(/<\/no(script|embed|frames)/i, e.innerHTML))
            ? (tm(e), !0)
            : (e_ &&
                e.nodeType === et &&
                ((t = e.textContent),
                p([ex, ev, ey], (e) => {
                  t = j(t, e, " ");
                }),
                e.textContent !== t &&
                  (g(n.removed, { element: e.cloneNode() }),
                  (e.textContent = t))),
              tb(eg.afterSanitizeElements, e, null),
              !1);
        },
        tw = function (e, t, n) {
          if (eG && ("id" === t || "name" === t) && (n in i || n in tl))
            return !1;
          if (eP && !eT[t] && S(eb, t));
          else if (eL && S(ej, t));
          else if (!eA[t] || eT[t]) {
            if (
              !(
                (tC(e) &&
                  ((eI.tagNameCheck instanceof RegExp &&
                    S(eI.tagNameCheck, e)) ||
                    (eI.tagNameCheck instanceof Function &&
                      eI.tagNameCheck(e))) &&
                  ((eI.attributeNameCheck instanceof RegExp &&
                    S(eI.attributeNameCheck, t)) ||
                    (eI.attributeNameCheck instanceof Function &&
                      eI.attributeNameCheck(t, e)))) ||
                ("is" === t &&
                  eI.allowCustomizedBuiltInElements &&
                  ((eI.tagNameCheck instanceof RegExp &&
                    S(eI.tagNameCheck, n)) ||
                    (eI.tagNameCheck instanceof Function &&
                      eI.tagNameCheck(n))))
              )
            )
              return !1;
          } else if (e1[t]);
          else if (S(eS, j(n, eC, "")));
          else if (
            ("src" === t || "xlink:href" === t || "href" === t) &&
            "script" !== e &&
            0 === w(n, "data:") &&
            eX[e]
          );
          else if (eR && !S(ew, j(n, eC, "")));
          else if (n) return !1;
          return !0;
        },
        tC = function (e) {
          return "annotation-xml" !== e && b(e, ek);
        },
        tk = function (t) {
          tb(eg.beforeSanitizeAttributes, t, null);
          let { attributes: r } = t;
          if (!r || tv(t)) return;
          let i = {
              attrName: "",
              attrValue: "",
              keepAttr: !0,
              allowedAttributes: eA,
              forceKeepAttr: void 0,
            },
            s = r.length;
          for (; s--; ) {
            let { name: a, namespaceURI: o, value: l } = r[s],
              c = ta(a),
              u = l,
              d = "value" === a ? u : C(u);
            if (
              ((i.attrName = c),
              (i.attrValue = d),
              (i.keepAttr = !0),
              (i.forceKeepAttr = void 0),
              tb(eg.uponSanitizeAttribute, t, i),
              (d = i.attrValue),
              eW && ("id" === c || "name" === c) && (tf(a, t), (d = eq + d)),
              (eO && S(/((--!?|])>)|<\/(style|title|textarea)/i, d)) ||
                ("attributename" === c && b(d, "href")))
            ) {
              tf(a, t);
              continue;
            }
            if (i.forceKeepAttr) continue;
            if (!i.keepAttr || (!eF && S(/\/>/i, d))) {
              tf(a, t);
              continue;
            }
            e_ &&
              p([ex, ev, ey], (e) => {
                d = j(d, e, " ");
              });
            let h = ta(t.nodeName);
            if (!tw(h, c, d)) {
              tf(a, t);
              continue;
            }
            if (
              e &&
              "object" == typeof G &&
              "function" == typeof G.getAttributeType
            )
              if (o);
              else
                switch (G.getAttributeType(h, c)) {
                  case "TrustedHTML":
                    d = e.createHTML(d);
                    break;
                  case "TrustedScriptURL":
                    d = e.createScriptURL(d);
                }
            if (d !== u)
              try {
                (o ? t.setAttributeNS(o, a, d) : t.setAttribute(a, d),
                  tv(t) ? tm(t) : f(n.removed));
              } catch (e) {
                tf(a, t);
              }
          }
          tb(eg.afterSanitizeAttributes, t, null);
        },
        tS = function e(t) {
          let n = null,
            r = tx(t);
          for (tb(eg.beforeSanitizeShadowDOM, t, null); (n = r.nextNode()); )
            (tb(eg.uponSanitizeShadowNode, n, null),
              tj(n),
              tk(n),
              n.content instanceof o && e(n.content));
          tb(eg.afterSanitizeShadowDOM, t, null);
        };
      return (
        (n.sanitize = function (t) {
          let r =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : {},
            i = null,
            a = null,
            l = null,
            c = null;
          if (((e7 = !t) && (t = "<!-->"), "string" != typeof t && !ty(t)))
            if ("function" == typeof t.toString) {
              if ("string" != typeof (t = t.toString()))
                throw N("dirty is not a string, aborting");
            } else throw N("toString is not a function");
          if (!n.isSupported) return t;
          if (
            (eV || tu(r),
            (n.removed = []),
            "string" == typeof t && (eK = !1),
            eK)
          ) {
            if (t.nodeName) {
              let e = ta(t.nodeName);
              if (!eN[e] || eM[e])
                throw N(
                  "root node is forbidden and cannot be sanitized in-place",
                );
            }
          } else if (t instanceof d)
            ((a = (i = tg("<!---->")).ownerDocument.importNode(t, !0))
              .nodeType === ee &&
              "BODY" === a.nodeName) ||
            "HTML" === a.nodeName
              ? (i = a)
              : i.appendChild(a);
          else {
            if (!eH && !e_ && !eB && -1 === t.indexOf("<"))
              return e && eU ? e.createHTML(t) : t;
            if (!(i = tg(t))) return eH ? null : eU ? eu : "";
          }
          i && ez && tm(i.firstChild);
          let u = tx(eK ? t : i);
          for (; (l = u.nextNode()); )
            (tj(l), tk(l), l.content instanceof o && tS(l.content));
          if (eK) return t;
          if (eH) {
            if (e$)
              for (c = ep.call(i.ownerDocument); i.firstChild; )
                c.appendChild(i.firstChild);
            else c = i;
            return (
              (eA.shadowroot || eA.shadowrootmode) && (c = ef.call(s, c, !0)),
              c
            );
          }
          let h = eB ? i.outerHTML : i.innerHTML;
          return (
            eB &&
              eN["!doctype"] &&
              i.ownerDocument &&
              i.ownerDocument.doctype &&
              i.ownerDocument.doctype.name &&
              S(Q, i.ownerDocument.doctype.name) &&
              (h = "<!DOCTYPE " + i.ownerDocument.doctype.name + ">\n" + h),
            e_ &&
              p([ex, ev, ey], (e) => {
                h = j(h, e, " ");
              }),
            e && eU ? e.createHTML(h) : h
          );
        }),
        (n.setConfig = function () {
          let e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
          (tu(e), (eV = !0));
        }),
        (n.clearConfig = function () {
          ((to = null), (eV = !1));
        }),
        (n.isValidAttribute = function (e, t, n) {
          return (to || tu({}), tw(ta(e), ta(t), n));
        }),
        (n.addHook = function (e, t) {
          "function" == typeof t && g(eg[e], t);
        }),
        (n.removeHook = function (e, t) {
          if (void 0 !== t) {
            let n = m(eg[e], t);
            return -1 === n ? void 0 : x(eg[e], n, 1)[0];
          }
          return f(eg[e]);
        }),
        (n.removeHooks = function (e) {
          eg[e] = [];
        }),
        (n.removeAllHooks = function () {
          eg = eo();
        }),
        n
      );
    }
    t.exports = el();
  },
  84594,
  (e, t, n) => {
    t.exports =
      window.DOMPurify ||
      (window.DOMPurify = e.r(468318).default || e.r(468318));
  },
  218139,
  276221,
  671908,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(563261);
    e.i(563948);
    var i = e.i(407562),
      s = e.i(657736),
      a = e.i(589654),
      o = e.i(147675),
      l = e.i(176248),
      c = e.i(297239),
      u = e.i(707827),
      d = e.i(926788),
      h = e.i(455552),
      p = e.i(926224);
    let m = (0, r.default)(() => e.A(643931).then((e) => e.ConflictEditor), {
      loadableGenerated: { modules: [430433] },
      ssr: !1,
    });
    function f({
      hasUnappliedChanges: e,
      blockId: r,
      source: f,
      onApply: g,
      showFadeOut: x,
    }) {
      let [v, y] = (0, n.useState)(!1),
        [b, j] = (0, n.useState)(!1),
        w = (0, c.useT)(),
        [C, k] = (0, n.useState)(null),
        [S, N] = (0, n.useState)(null),
        E = async () => {
          y(!0);
          let e = await fetch("/chat/api/chat/remote/save", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ bid: r, blockSource: f }),
          });
          if ((y(!1), e.ok)) {
            let t = await e.json();
            (t.success
              ? (j(!0),
                setTimeout(() => j(!1), 2e3),
                i.toast.success(w("unappliedChanges.savedChanges")))
              : (i.toast.error("Local: conflict detected. Check your console"),
                k(t.conflicts)),
              g());
          } else i.toast.error(w("unappliedChanges.failedToApplyChanges"));
        },
        A = async () => {
          if (S)
            try {
              let e = [
                ...(0, p.parseMultiFileSource)({
                  source: f,
                  blockType: "local",
                  blockId: r,
                }),
              ];
              for (let t of S) {
                let n = e.find((e) => e.meta.file === t.file);
                n && (n.source = t.content);
              }
              let t = (0, h.createMultiFileSource)({
                  files: e,
                  blockType: "local",
                }),
                n = await fetch("/chat/api/chat/remote/save", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({
                    bid: r,
                    blockSource: t,
                    resolvedConflicts: !0,
                  }),
                });
              n.ok && (await n.json()).success
                ? (j(!0),
                  setTimeout(() => j(!1), 2e3),
                  i.toast.success(w("unappliedChanges.savedChanges")),
                  g(),
                  k(null))
                : i.toast.error(w("unappliedChanges.failedToApplyChanges"));
            } catch (e) {
              i.toast.error(w("unappliedChanges.failedToApplyChanges"));
            }
        },
        D = (0, n.useCallback)((e) => {
          e.every((e) => e.resolved) ? N(e) : N(null);
        }, []);
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsx)(a.AnimatePresence, {
            children:
              e && !b
                ? (0, t.jsxs)(t.Fragment, {
                    children: [
                      x
                        ? (0, t.jsx)(
                            s.motion.div,
                            {
                              initial: { opacity: 0 },
                              animate: { opacity: 1 },
                              exit: { opacity: 0 },
                              transition: { duration: 0.15, ease: "easeOut" },
                              className:
                                "from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-linear-to-t to-transparent",
                            },
                            "unsaved-changes-bg",
                          )
                        : null,
                      (0, t.jsx)(
                        s.motion.div,
                        {
                          initial: {
                            opacity: 0,
                            y: 20,
                            scale: 0.95,
                            width: 320,
                          },
                          animate: {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            width: v ? 96 : 320,
                          },
                          exit: { opacity: 0 },
                          transition: {
                            duration: 0.15,
                            ease: "easeOut",
                            width: {
                              type: "spring",
                              stiffness: 300,
                              damping: 30,
                            },
                          },
                          className:
                            "shadow-modal bg-v0-background-100 absolute inset-x-0 bottom-3 z-50 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",
                          children: v
                            ? (0, t.jsxs)("div", {
                                className:
                                  "flex items-center gap-2 text-v0-gray-900",
                                children: [
                                  (0, t.jsx)(u.Spinner, { size: 16 }),
                                  "Saving",
                                ],
                              })
                            : (0, t.jsxs)(t.Fragment, {
                                children: [
                                  (0, t.jsxs)("div", {
                                    className: "flex items-center gap-2",
                                    children: [
                                      (0, t.jsx)(o.Warning, {
                                        className: "text-v0-gray-900!",
                                      }),
                                      "Unsaved Changes",
                                    ],
                                  }),
                                  (0, t.jsx)("div", {
                                    className: "flex items-center gap-2",
                                    children: (0, t.jsx)(l.Button, {
                                      size: "sm",
                                      className: "h-7",
                                      rounded: !0,
                                      disabled: v,
                                      onClick: E,
                                      children: w("unappliedChanges.apply"),
                                    }),
                                  }),
                                ],
                              }),
                        },
                        "unsaved-changes-island",
                      ),
                    ],
                  })
                : null,
          }),
          (0, t.jsx)(d.Dialog, {
            open: null !== C,
            children: (0, t.jsxs)(d.DialogContent, {
              className: "max-h-[90vh] w-full max-w-[90vw] overflow-auto",
              children: [
                (0, t.jsxs)(d.DialogHeader, {
                  children: [
                    (0, t.jsx)(d.DialogTitle, {
                      children: "Conflict Detected",
                    }),
                    (0, t.jsx)(d.DialogDescription, {
                      children: "Please resolve them before saving.",
                    }),
                  ],
                }),
                (0, t.jsx)(n.Suspense, {
                  fallback: (0, t.jsx)(u.Spinner, {}),
                  children: C
                    ? (0, t.jsx)(m, { conflicts: C, onEdit: D })
                    : null,
                }),
                (0, t.jsxs)(d.DialogFooter, {
                  children: [
                    (0, t.jsx)(l.Button, {
                      variant: "secondary",
                      onClick: () => {
                        alert("You must resolve conflicts before continuing");
                      },
                      children: "Cancel",
                    }),
                    (0, t.jsx)(l.Button, {
                      onClick: A,
                      disabled: null === S,
                      children: "Confirm",
                    }),
                  ],
                }),
              ],
            }),
          }),
        ],
      });
    }
    function g(e) {
      let t = e?.compiledTailwindPlugin
          ? e.compiledTailwindPlugin
          : '@import "tw-animate-css";',
        n = e?.includeFontHints
          ? "\n  /* optional: --font-sans, --font-serif, --font-mono if they are applied in the layout.tsx */"
          : "";
      return `${e?.skipTailwindRuntimeImport ? "" : '@import "tailwindcss";'}
${t}

@custom-variant dark (&:is(.dark *));
 
:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.625rem;
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}
 
.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {${
        n ||
        `
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
`
      }
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}
 
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}`;
    }
    (e.s(["UnappliedChanges", () => f], 218139),
      e.s(["createDefaultGlobals", () => g], 276221));
    let x = [
      "app/globals.css",
      "src/app/globals.css",
      "styles/globals.css",
      "src/styles/globals.css",
    ];
    function v(e) {
      return b(e.map((e) => e.meta.file).filter((e) => "string" == typeof e));
    }
    function y(e) {
      if (!e) return null;
      let t = v(e);
      return e.find((e) => e.meta.file === t) ?? null;
    }
    function b(e) {
      for (let t of x) if (e.some((e) => e === t)) return t;
      return x[0];
    }
    function j(e) {
      for (let t of x) {
        let n = e.current?.getContent(t);
        if (n) return { path: t, content: n };
      }
      return { path: null, content: null };
    }
    e.s(
      [
        "getGlobalsCssFromFiles",
        () => y,
        "getGlobalsCssPathFromFiles",
        () => v,
        "getGlobalsCssWithInlineEdit",
        () => j,
      ],
      671908,
    );
  },
  661385,
  (e) => {
    "use strict";
    async function t(e) {
      let t = await fetch("/chat/api/blocks", {
        method: "PUT",
        body: JSON.stringify(e),
      });
      if (!t.ok) return { success: !1 };
      let n = await t.json();
      return {
        success: n.success,
        transformedSource: n.success ? n.transformedSource : void 0,
        sourceVersionKey: n.success ? n.sourceVersionKey : void 0,
      };
    }
    async function n(e) {
      try {
        let t = await fetch("/chat/api/blocks/files", {
          method: "PUT",
          body: JSON.stringify(e),
        });
        if (!t.ok) return { success: !1, error: `HTTP ${t.status}` };
        return await t.json();
      } catch (e) {
        return (
          console.error("updateBlockFiles error:", e),
          {
            success: !1,
            error: e instanceof Error ? e.message : "Network error",
          }
        );
      }
    }
    e.s(["updateBlockFiles", () => n, "updateCodeBlockSource", () => t]);
  },
  509445,
  864924,
  (e) => {
    "use strict";
    var t = e.i(877318);
    let n = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 11.5607L9.96967 11.0303L8 9.06066L6.03033 11.0303L5.5 11.5607L4.43934 10.5L4.96967 9.96967L6.93934 8L4.96967 6.03033L4.43934 5.5L5.5 4.43934L6.03033 4.96967L8 6.93934L9.96967 4.96967L10.5 4.43934L11.5607 5.5L11.0303 6.03033L9.06066 8L11.0303 9.96967L11.5607 10.5L10.5 11.5607Z" fill="currentColor"/>',
    );
    e.s(["CrossCircleFill", 0, n], 509445);
    let r = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M9.24996 12.0607L8.71963 11.5303L5.89641 8.7071C5.50588 8.31657 5.50588 7.68341 5.89641 7.29288L8.71963 4.46966L9.24996 3.93933L10.3106 4.99999L9.78029 5.53032L7.31062 7.99999L9.78029 10.4697L10.3106 11L9.24996 12.0607Z" fill="currentColor"/>',
    );
    e.s(["ChevronLeftSmall", 0, r], 864924);
  },
  101486,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(418625),
      r = e.i(92304);
    function i({ enabled: e, bid: r, cid: i }) {
      let [s, a] = (0, t.useState)(800),
        {
          data: o,
          error: l,
          mutate: c,
        } = (0, n.default)(
          e && r && i ? `/chat/api/vm/status?bid=${r}&cid=${i}` : null,
          async (e) => {
            let t = await fetch(e);
            if (!t.ok) throw Error("Failed to fetch VM status");
            return t.json();
          },
          { refreshInterval: s },
        );
      return (
        (0, t.useEffect)(() => {
          o?.status === "running" && a(5e3);
        }, [o?.status]),
        {
          subdomain: o?.subdomain,
          status: l ? "error" : o?.status,
          substatus: o?.substatus,
          error: l,
          refresh: c,
        }
      );
    }
    function s({ enabled: e, bid: t, cid: n }) {
      let {
        data: i,
        error: s,
        mutate: a,
      } = (0, r.default)(
        e && t && n ? `/chat/api/vm/preview?bid=${t}&cid=${n}` : null,
        async (e) => {
          let t = await fetch(e);
          if (!t.ok) throw Error("Failed to load sandbox");
          return t.json();
        },
      );
      return {
        subdomain: i?.subdomain,
        status: s ? "error" : i?.status,
        error: s,
        refresh: a,
      };
    }
    e.s(["useVMPreviewSubdomain", () => s, "useVMStatus", () => i]);
  },
  293060,
  154032,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(899488),
      r = e.i(556355),
      i = e.i(758118),
      s = e.i(365290),
      a = e.i(602544),
      o = e.i(877318),
      l = e.i(393799),
      c = e.i(576191);
    let u = (0, o.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2C0 1.44772 0.447715 1 1 1H15C15.5523 1 16 1.44772 16 2V10.5C16 11.0523 15.5523 11.5 15 11.5H8.75V14.5H9.75H10.5V16H9.75H6.25H5.5V14.5H6.25H7.25V11.5H1C0.447714 11.5 0 11.0523 0 10.5V2ZM1.5 2.5V10H14.5V2.5H1.5Z" fill="currentColor"/>',
      ),
      d = (0, o.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M2.75 0C1.7835 0 1 0.783501 1 1.75V14.25C1 15.2165 1.7835 16 2.75 16H13.25C14.2165 16 15 15.2165 15 14.25V1.75C15 0.783502 14.2165 0 13.25 0H2.75ZM2.5 1.75C2.5 1.61193 2.61193 1.5 2.75 1.5H13.25C13.3881 1.5 13.5 1.61193 13.5 1.75V14.25C13.5 14.3881 13.3881 14.5 13.25 14.5H2.75C2.61193 14.5 2.5 14.3881 2.5 14.25V1.75ZM4.75 4.75C5.30228 4.75 5.75 4.30228 5.75 3.75C5.75 3.19772 5.30228 2.75 4.75 2.75C4.19772 2.75 3.75 3.19772 3.75 3.75C3.75 4.30228 4.19772 4.75 4.75 4.75Z" fill="currentColor"/>',
      ),
      h = (0, o.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 0C3.73122 0 2.5 1.23122 2.5 2.75V13.25C2.5 14.7688 3.73122 16 5.25 16H10.75C12.2688 16 13.5 14.7688 13.5 13.25V2.75C13.5 1.23122 12.2688 0 10.75 0H5.25ZM4 2.75C4 2.05964 4.55964 1.5 5.25 1.5H10.75C11.4404 1.5 12 2.05964 12 2.75V13.25C12 13.9404 11.4404 14.5 10.75 14.5H5.25C4.55964 14.5 4 13.9404 4 13.25V2.75ZM6.25 4.75C6.80228 4.75 7.25 4.30228 7.25 3.75C7.25 3.19772 6.80228 2.75 6.25 2.75C5.69772 2.75 5.25 3.19772 5.25 3.75C5.25 4.30228 5.69772 4.75 6.25 4.75Z" fill="currentColor"/>',
      );
    var p = e.i(385671),
      m = c;
    function f(e = 150) {
      let [t, n] = (0, m.useState)(!1);
      return (
        (0, m.useEffect)(() => {
          let t,
            r = () => {
              (n(!0),
                clearTimeout(t),
                (t = setTimeout(() => {
                  n(!1);
                }, e)));
            };
          return (
            window.addEventListener("resize", r),
            () => {
              (window.removeEventListener("resize", r), clearTimeout(t));
            }
          );
        }, [e]),
        t
      );
    }
    e.s(["useIsWindowResizing", () => f], 154032);
    var g = e.i(304649);
    function x() {
      let { atoms: e } = (0, p.useChatLayout)(),
        [i, s] = (0, c.useState)(!1),
        { label: a, SmallIcon: o } = b((0, l.useAtomValue)(e.previewSize));
      return (0, t.jsxs)(r.DropdownMenu, {
        open: i,
        onOpenChange: s,
        children: [
          (0, t.jsx)(r.DropdownMenuTrigger, {
            asChild: !0,
            children: (0, t.jsx)(n.CodeBlockButton, {
              tooltip: `Previewing on ${a}`,
              tooltipDirection: "bottom",
              children: (0, t.jsx)(o, {}),
            }),
          }),
          (0, t.jsx)(r.DropdownMenuContent, {
            align: "start",
            className: "w-[150px] cursor-pointer",
            side: "bottom",
            sideOffset: 8,
            children: (0, t.jsx)(r.DropdownMenuGroup, {
              children: ["desktop", "tablet", "phone"].map((e) =>
                (0, t.jsx)(v, { previewSize: e }, e),
              ),
            }),
          }),
        ],
      });
    }
    function v({ previewSize: e }) {
      let { actions: n, atoms: o } = (0, p.useChatLayout)(),
        c = e === (0, l.useAtomValue)(o.previewSize),
        { label: u, Icon: d } = b(e);
      return (0, t.jsxs)(r.DropdownMenuItem, {
        onSelect: () => n.setPreviewSize(e),
        className: "justify-between",
        children: [
          (0, t.jsxs)("span", {
            className: "flex items-center gap-2",
            children: [(0, t.jsx)(d, {}), u],
          }),
          (0, t.jsx)(a.Check, {
            style: {
              ...(0, i.visibleStylesIf)(c),
              ...(0, s.transitionStyles)(["opacity"]),
            },
          }),
        ],
      });
    }
    function y({ children: e, forceFullscreen: n }) {
      let { atoms: r } = (0, p.useChatLayout)(),
        i = (0, l.useAtomValue)(r.previewSize),
        a = (0, l.useAtomValue)(r.isResizing),
        o = f(),
        c = (0, l.useAtomValue)(r.deviceStyles),
        u = a || o;
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsx)("style", {
            children: `@media(max-width: 639px) {
          .device-view {
            width: 100%!important;
            height: 100%!important;
            border-radius: 0px!important;
            box-shadow: none!important;
            background: transparent!important;
          }
        }
      `,
          }),
          (0, t.jsx)("div", {
            className: (0, g.cn)(
              "device-view",
              "desktop" !== i && !n && "material-modal",
            ),
            style: {
              margin: "auto 0px",
              ...c,
              ...(n ? { width: "100%", height: "100%" } : {}),
              ...(0, s.transitionStyles)(
                [
                  "width",
                  "height",
                  "border-radius",
                  "background",
                  "box-shadow",
                  "margin",
                ],
                { duration: u || n ? 0 : 200 },
              ),
            },
            children: e,
          }),
        ],
      });
    }
    function b(e) {
      switch (e) {
        case "phone":
          return { SmallIcon: C, Icon: h, label: "Phone" };
        case "tablet":
          return { SmallIcon: w, Icon: d, label: "Tablet" };
        case "desktop":
          return { SmallIcon: j, Icon: u, label: "Desktop" };
      }
    }
    let j = (0, o.withNewIcon)(`
<path d="M12 2.25C12.9665 2.25 13.75 3.0335 13.75 4V9C13.75 9.9665 12.9665 10.75 12 10.75H8.75V12.25H10V13.75H6V12.25H7.25V10.75H4C3.0335 10.75 2.25 9.9665 2.25 9V4C2.25 3.0335 3.0335 2.25 4 2.25H12ZM4 3.75C3.86193 3.75 3.75 3.86193 3.75 4V9C3.75 9.13807 3.86193 9.25 4 9.25H12C12.1381 9.25 12.25 9.13807 12.25 9V4C12.25 3.86193 12.1381 3.75 12 3.75H4Z" fill="currentColor"/>
`),
      w = (0, o.withNewIcon)(`
<path d="M11.3975 2C12.3636 2.00037 13.1475 2.78373 13.1475 3.75V11.75C13.1475 12.7163 12.3636 13.4996 11.3975 13.5H4.75C3.7835 13.5 3 12.7165 3 11.75V3.75C3 2.7835 3.7835 2 4.75 2H11.3975ZM4.75 3.5C4.61193 3.5 4.5 3.61193 4.5 3.75V11.75C4.5 11.8881 4.61193 12 4.75 12H11.3975C11.5352 11.9996 11.6475 11.8878 11.6475 11.75V3.75C11.6475 3.61216 11.5352 3.50037 11.3975 3.5H4.75ZM8.76758 9.50391C9.14577 9.54232 9.44141 9.86168 9.44141 10.25C9.44141 10.6383 9.14577 10.9577 8.76758 10.9961L8.69141 11H7.45605C7.04184 11 6.70605 10.6642 6.70605 10.25C6.70605 9.83579 7.04184 9.5 7.45605 9.5H8.69141L8.76758 9.50391Z" fill="currentColor"/>
`),
      C = (0, o.withNewIcon)(`
<path d="M10.75 2C11.7165 2 12.5 2.7835 12.5 3.75V11.75C12.5 12.7165 11.7165 13.5 10.75 13.5H5.75C4.7835 13.5 4 12.7165 4 11.75V3.75C4 2.7835 4.7835 2 5.75 2H10.75ZM5.75 3.5C5.61193 3.5 5.5 3.61193 5.5 3.75V11.75C5.5 11.8881 5.61193 12 5.75 12H10.75C10.8881 12 11 11.8881 11 11.75V3.75C11 3.61193 10.8881 3.5 10.75 3.5H5.75ZM8.75 9.5C9.16421 9.5 9.5 9.83579 9.5 10.25C9.5 10.6642 9.16421 11 8.75 11H7.75C7.33579 11 7 10.6642 7 10.25C7 9.83579 7.33579 9.5 7.75 9.5H8.75Z" fill="currentColor"/>
`);
    e.s(["DeviceContainer", () => y, "DeviceDropdown", () => x], 293060);
  },
  523968,
  (e) => {
    "use strict";
    var t = e.i(418625);
    function n(e) {
      return (0, t.default)(["chat:vm-mode", e], null).data;
    }
    e.s(["useIsVMEnabledForChat", () => n]);
  },
  230905,
  84079,
  668887,
  (e) => {
    "use strict";
    e.s(["UnsavedChanges", () => ew, "useUnsavedChanges", () => ek], 230905);
    var t = e.i(324834),
      n = e.i(147675),
      r = e.i(176248),
      i = e.i(576191),
      s = e.i(449381),
      a = e.i(297239),
      o = e.i(53223);
    e.i(563948);
    var l = e.i(407562),
      c = e.i(657736),
      u = e.i(589654),
      d = e.i(707827),
      h = e.i(301331),
      p = e.i(926224),
      m = e.i(443265),
      f = e.i(610726),
      g = e.i(534607),
      x = e.i(661385),
      v = e.i(304649),
      y = e.i(92479),
      b = e.i(120282),
      j = e.i(479273),
      w = e.i(487581),
      C = e.i(9654),
      k = e.i(393799);
    e.s(
      [
        "BrowserFrame",
        () => Q,
        "BrowserLoadingSpinner",
        () => X,
        "sendToIframe",
        () => J,
        "sendToIframeFromBlockId",
        () => Y,
      ],
      84079,
    );
    var S = t,
      N = i,
      E = e.i(509445),
      A = e.i(864924),
      D = e.i(494266),
      I = e.i(900511),
      M = e.i(295224),
      T = e.i(566274),
      L = v,
      P = e.i(899488),
      R = e.i(583965),
      F = e.i(729602),
      _ = e.i(577247),
      O = e.i(242759),
      B = e.i(101486),
      V = e.i(768619),
      z = e.i(914483),
      H = e.i(877318),
      $ = e.i(204575),
      U = e.i(293060),
      G = e.i(647027),
      W = e.i(643312),
      q = e.i(523968),
      Z = e.i(199490);
    let K = (0, H.withNewIcon)(
      '<path d="M8.19 3.08c1.68 0 3.17.84 4.06 2.12V3.75h1.5V7.5c0 .41-.34.75-.75.75H9.25v-1.5h2.14A3.44 3.44 0 0 0 4.75 8a3.44 3.44 0 0 0 6.23 2l.44-.6 1.21.88-.44.6A4.94 4.94 0 0 1 3.25 8a4.93 4.93 0 0 1 4.94-4.92Z" fill="currentColor" />',
    );
    function Y(e, t) {
      let n = (0, $.getBlockIframeId)(e),
        r = document.getElementById(n);
      r && r.contentWindow && J(r.contentWindow, t);
    }
    function J(e, t) {
      e.postMessage({ __v0_remote__: 1, ...t }, "*");
    }
    function Q({ iframeId: e, blockId: t }) {
      let { fullScreenResult: n } = (0, T.useFullscreenResult)(),
        [r, i] = (0, N.useState)(!1),
        s = (0, F.useChatId)(),
        { envVars: a } = (0, W.useIntegrationsApi)(),
        {
          canGoBack: o,
          canGoForward: l,
          href: c,
          setHref: u,
          iframe: d,
          latestHref: h,
          loading: p,
          setLoading: m,
          refresh: f,
          temporalHref: g,
          setTemporalHref: x,
        } = (0, R.useBrowserFrame)(t),
        v = (0, N.useMemo)(() => {
          if (!c) return "";
          let e = new URL(c);
          return e.pathname + e.search + e.hash;
        }, [c]),
        y = (0, M.useLatest)(g),
        { vr: b } = (0, O.useFlags)(),
        j = (0, q.useIsVMEnabledForChat)(s),
        w = !!b || j;
      (0, _.useMessage)(
        (e) => {
          let { data: t } = e;
          if (t && "object" == typeof t && t.__v0_remote__)
            switch (t.type) {
              case "devtools_state":
                i(t.enabled);
                break;
              case "frame_ready":
                if (d?.contentWindow && a) {
                  let e = Object.values(a)
                    .filter((e) =>
                      (Array.isArray(e.target)
                        ? e.target
                        : [e.target]
                      ).includes(Z.EnvTarget.Development),
                    )
                    .map((e) => ({ key: e.key, value: e.value }));
                  J(d.contentWindow, { type: "env_vars", envVars: e });
                }
                break;
              case "fetch-error":
                console.error(`Fetch error: ${t.message} (${t.url})`);
            }
        },
        [e, i, d, a],
      );
      let C = (0, N.useCallback)(() => {
          if (!d) return;
          let t = new URL(window.location.href);
          (t.searchParams.set("b", e),
            t.searchParams.set("f", "1"),
            t.searchParams.set("path", v),
            window.open(t.toString(), "_blank", "noreferrer,noopener"));
        }, [d, e, v]),
        k = (0, N.useCallback)(() => {
          d &&
            d.contentWindow &&
            (J(d.contentWindow, { type: "navigate_back" }), x(null));
        }, [d, x]),
        H = (0, N.useCallback)(() => {
          d &&
            d.contentWindow &&
            (J(d.contentWindow, { type: "navigate_forward" }), x(null));
        }, [d, x]),
        $ = (0, N.useCallback)(() => {
          d &&
            d.contentWindow &&
            (J(d.contentWindow, {
              type: "navigate_to",
              href:
                null === y.current
                  ? h.current
                  : new URL(y.current ?? "", h.current).href,
            }),
            m(!0));
        }, [d, h, y, m]),
        Y = (0, N.useMemo)(() => {
          let e = null !== g ? g : v;
          if (!e) return "";
          try {
            return decodeURIComponent(e);
          } catch (t) {
            return e;
          }
        }, [g, v]),
        [Q, ee] = (0, N.useState)(!1),
        et = (0, N.useCallback)(() => {
          if (!w) return;
          let e = document.querySelector("iframe[data-v0]");
          if (!e || !e.contentWindow) return;
          (e.setAttribute("src", (0, V.getIframeSrc)(e)), ee(!0));
          let t = setTimeout(() => {
            ee(!1);
          }, 500);
          return () => clearTimeout(t);
        }, [w]),
        [en, er] = (0, N.useState)(!1),
        { refresh: ei } = (0, B.useVMStatus)({ enabled: w, cid: s, bid: t }),
        es = (0, N.useCallback)(async () => {
          if (w) {
            er(!0);
            try {
              if (
                !(
                  await fetch(
                    `/chat/api/vm/actions?cid=${s}&bid=${t}&type=recreate`,
                    { method: "POST" },
                  )
                ).ok
              )
                throw Error("Failed to recreate VM");
              ei();
            } catch (e) {
              console.error("Error recreating VM:", e);
            }
            er(!1);
          }
        }, [w, s, t, ei]),
        ea = (0, z.useGet)("iframe-src:" + e);
      (0, N.useEffect)(() => {
        w && x(ea);
      }, [w, ea]);
      let eo = (e) => {
          "Enter" === e.key
            ? ($(),
              u(new URL(g ?? "", c).href),
              x(null),
              e.stopPropagation(),
              e.currentTarget.blur())
            : "Escape" === e.key &&
              (x(null), e.stopPropagation(), e.currentTarget.blur());
        },
        el = (e) => {
          e.currentTarget.select();
        },
        ec = (w ? Q : p) ? (0, S.jsx)(X, {}) : (0, S.jsx)(K, {}),
        eu = (0, S.jsxs)("div", {
          className:
            "relative flex items-center flex-1 bg-v0-gray-100 min-w-0 border border-v0-alpha-400 rounded-md h-7 max-w-[300px]",
          children: [
            (0, S.jsxs)("div", {
              className: "items-center pl-1 hidden sm:flex",
              children: [
                (0, S.jsx)(P.CodeBlockButton, {
                  disabled: !o,
                  onClick: k,
                  browserBar: !0,
                  children: (0, S.jsx)(A.ChevronLeftSmall, {}),
                }),
                (0, S.jsx)(P.CodeBlockButton, {
                  disabled: !l,
                  onClick: H,
                  browserBar: !0,
                  children: (0, S.jsx)(D.ChevronRightSmall, {}),
                }),
                (0, S.jsx)(U.DeviceDropdown, {}),
              ],
            }),
            (0, S.jsx)("input", {
              type: "text",
              className: (0, L.cn)(
                "flex-1 min-w-0 h-full pr-2 text-sm bg-transparent border-0 outline-none pl-3 sm:pl-2",
                n && "pl-7",
              ),
              value: Y,
              onKeyDown: eo,
              onChange: (e) => void x(e.currentTarget.value),
              onFocus: el,
              spellCheck: !1,
            }),
            (0, S.jsxs)("div", {
              className: "flex items-center pr-1",
              children: [
                (0, S.jsx)(P.CodeBlockButton, {
                  className: "hidden sm:flex",
                  onClick: C,
                  browserBar: !0,
                  tooltip: {
                    side: "bottom",
                    content: (0, S.jsx)("div", {
                      className: "flex flex-col items-center",
                      children: (0, S.jsx)("span", {
                        children: "Open in new tab",
                      }),
                    }),
                  },
                  children: (0, S.jsx)(I.ExternalSmall, {}),
                }),
                (0, S.jsx)(P.CodeBlockButton, {
                  onClick: w ? et : f,
                  browserBar: !0,
                  tooltip: { side: "bottom", content: "Refresh" },
                  children: ec,
                }),
                w
                  ? (0, S.jsx)(P.CodeBlockButton, {
                      onClick: es,
                      browserBar: !0,
                      tooltip: { side: "bottom", content: "Kill & Restart VM" },
                      children: en
                        ? (0, S.jsx)(X, {})
                        : (0, S.jsx)(E.CrossCircleFill, {
                            className: "w-3 h-3",
                          }),
                    })
                  : null,
              ],
            }),
          ],
        });
      return (0, S.jsxs)("div", {
        className: "flex items-center gap-1 flex-1 justify-center",
        children: [eu, (0, S.jsx)(G.AIGatewayErrorModal, {})],
      });
    }
    function X() {
      return (0, S.jsx)("svg", {
        className: "browserframe-loading-spinner",
        viewBox: "0 0 66 66",
        xmlns: "http://www.w3.org/2000/svg",
        style: { width: "12px", height: "12px" },
        children: (0, S.jsx)("circle", {
          fill: "none",
          stroke: "currentColor",
          strokeWidth: "6",
          strokeLinecap: "round",
          cx: "33",
          cy: "33",
          r: "30",
        }),
      });
    }
    var ee = e.i(418929);
    e.s(
      ["useCurrentBlockDesignMode", () => em, "useDesignModeEnabled", () => ef],
      668887,
    );
    var et = C,
      en = k,
      er = e.i(142219),
      ei = e.i(753533),
      es = s,
      ea = y,
      eo = ee,
      el = e.i(679232);
    let ec = new Map(),
      eu = (0, ei.cacheResultById)(ec, () => ({
        previewTheme: (0, et.atom)("light"),
        undoHistory: (0, et.atom)([]),
        redoHistory: (0, et.atom)([]),
        lastFileContent: (0, et.atom)(null),
        currentQueue: (0, et.atom)({ current: [] }),
        saveNextState: (0, et.atom)(!1),
        lastIsPreview: (0, et.atom)(!1),
        pendingDesignSystem: (0, et.atom)({
          isPending: !1,
          designSystemId: null,
        }),
      })),
      ed = new Map(),
      eh = (0, ei.cacheResultById)(ed, (e, t) => {
        let n = eu(t),
          r = (0, el.getChatSidebarAtoms)(e);
        return {
          ...n,
          designModeEnabled: r.designModeEnabled,
          canUndo: (0, et.atom)((e) => e(n.undoHistory).length > 0),
          canRedo: (0, et.atom)((e) => e(n.redoHistory).length > 0),
        };
      });
    function ep({ blockId: e, chatId: t }) {
      let n = eu(e),
        r = (0, eo.getPromptActions)(t),
        i = () => {
          Y(e, { type: "devtools_cleanup_theme" });
        };
      return {
        setDesignModeEnabled: (e) => {
          let n = (0, el.getChatSidebarActions)(t),
            s = er.store.get((0, el.getChatSidebarAtoms)(t).designModeEnabled);
          (n.setActiveItem(e ? "design" : "chat"),
            e && i(),
            !e &&
              (i(), r.clearRefinementElementSelected(), s && r.focusPrompt()));
        },
        initializePreviewTheme: (e) => (er.store.set(n.previewTheme, e), e),
        setPreviewTheme: (t, r) => {
          (er.store.set(n.previewTheme, t),
            Y(e, { type: "devtools_revert_design" }),
            r.current &&
              Y(e, { type: "devtools_apply_theme", payload: { theme: t } }));
        },
        cleanupPreviewTheme: i,
        pushUndoHistory: (e, t) => {
          (er.store.set(
            n.undoHistory,
            [...er.store.get(n.undoHistory), { file: e, content: t }].slice(
              -20,
            ),
          ),
            er.store.set(n.redoHistory, []));
        },
        popUndoHistory: (t) => {
          let r = [...er.store.get(n.undoHistory)],
            i = r.pop();
          if (!i || !t.current) return null;
          let s = t.current.getContent(i.file);
          return "string" != typeof s
            ? null
            : (Y(e, { type: "devtools_revert_design" }),
              er.store.set(n.undoHistory, r),
              er.store.set(n.redoHistory, [
                ...er.store.get(n.redoHistory),
                { file: i.file, content: s },
              ]),
              t.current.inlineEdit(
                i.file,
                0,
                0,
                0,
                i.content,
                Date.now(),
                void 0,
                [0, s.length],
              ),
              i);
        },
        pushRedoHistory: (e, t) => {
          er.store.set(
            n.redoHistory,
            [...er.store.get(n.redoHistory), { file: e, content: t }].slice(
              -20,
            ),
          );
        },
        popRedoHistory: (t) => {
          let r = [...er.store.get(n.redoHistory)],
            i = r.pop();
          if (!i || !t.current) return null;
          let s = t.current.getContent(i.file);
          return "string" != typeof s
            ? null
            : (Y(e, { type: "devtools_revert_design" }),
              er.store.set(n.redoHistory, r),
              er.store.set(n.undoHistory, [
                ...er.store.get(n.undoHistory),
                { file: i.file, content: s },
              ]),
              t.current.inlineEdit(
                i.file,
                0,
                0,
                0,
                i.content,
                Date.now(),
                void 0,
                [0, s.length],
              ),
              i);
        },
        clearHistory: () => {
          (er.store.set(n.undoHistory, []), er.store.set(n.redoHistory, []));
        },
        setLastFileContent: (e) => {
          er.store.set(n.lastFileContent, e);
        },
        setSaveNextState: (e) => {
          er.store.set(n.saveNextState, e);
        },
        setLastIsPreview: (e) => {
          er.store.set(n.lastIsPreview, e);
        },
        setPendingDesignSystem: (e) => {
          er.store.set(n.pendingDesignSystem, e);
        },
      };
    }
    function em() {
      let e = (0, ea.assertChatId)((0, ea.useChatId)().chatId),
        t = (0, es.assertBlockId)((0, es.useActiveBlockState)()?.id);
      return {
        atoms: eh(e, t),
        actions: ep({ chatId: e, blockId: t }),
        blockId: t,
      };
    }
    function ef() {
      let { atoms: e } = (0, el.useCurrentChatSidebar)();
      return (0, en.useAtomValue)(e.designModeEnabled);
    }
    e.i(472428);
    var eg = e.i(296900),
      ex = e.i(919012),
      ev = (0, ex.createServerReference)(
        "7ff49c913f32b88ab778cf9ba861aafb3281ec5203",
        ex.callServer,
        void 0,
        ex.findSourceMapURL,
        "setDesignSystemOnChat",
      ),
      ey = e.i(387040),
      eb = e.i(418270);
    let ej = (0, C.atom)(!1);
    function ew({
      mergedFromBlockId: e,
      hasUnsavedChanges: h,
      overrideBlockId: p,
      resetValue: x,
      onSave: w,
      clearEditValueMap: C,
      isV3: S,
    }) {
      let [N, E] = (0, k.useAtom)(ej),
        [A, D] = (0, i.useState)(!1),
        [I, M] = (0, i.useState)(!0),
        T = (0, s.useActiveBlockState)(),
        L = (0, a.useT)(),
        P = (0, g.useMac)(),
        { chatId: R } = (0, y.useChatId)(),
        { actions: F, atoms: _ } = em(),
        O = (0, k.useAtomValue)(_.pendingDesignSystem);
      ((0, f.useEventListener)("code-editor-saved", async () => {
        h && (await w({ setSaving: E, setForceHide: D }));
      }),
        (0, f.useEventListener)("code-editor-reset", () => {
          h && $();
        }),
        eC(h));
      let { locale: B } = (0, j.useLocale)(),
        V = () => M(!1),
        z = () => M(!0);
      ((0, f.useEventListener)("hide-saved-changes", V),
        (0, f.useEventListener)("show-saved-changes", z));
      let H = e ?? (T?.id || p);
      if (!H) return null;
      let $ = () => {
        ((0, o.track)("ResetUnsavedEditCode", { blockId: H }), E(!0));
        try {
          (x(),
            R && (0, ee.getPromptActions)(R).clearRefinementElementSelected(),
            F.setPendingDesignSystem({ isPending: !1, designSystemId: null }),
            H && Y(H, { type: "devtools_revert_design" }),
            l.toast.success(L("codeBlockActions.resetChanges"), {
              position: "bottom-right",
            }),
            setTimeout(() => D(!1), 2e3),
            C());
        } catch (e) {
          l.toast.error(L("codeBlockActions.failedToResetChanges"), {
            position: "bottom-right",
          });
        }
        (E(!1),
          window.dispatchEvent(
            new CustomEvent("inline-edit-cleanup-decorations"),
          ));
      };
      return (0, t.jsx)(u.AnimatePresence, {
        children:
          (h || O.isPending) && !A && I
            ? (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsx)(
                    c.motion.div,
                    {
                      initial: { opacity: 0 },
                      animate: { opacity: 1 },
                      exit: { opacity: 0 },
                      transition: { duration: 0.15, ease: "easeOut" },
                      className:
                        "from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center",
                    },
                    "unsaved-changes-bg",
                  ),
                  (0, t.jsx)(
                    c.motion.div,
                    {
                      initial: {
                        opacity: 0,
                        y: 20,
                        scale: 0.95,
                        width: B === b.esLocaleInfo.iso639 ? 370 : 320,
                      },
                      animate: {
                        opacity: 1,
                        y: 0,
                        scale: 1,
                        width: N
                          ? B === b.esLocaleInfo.iso639
                            ? 136
                            : 112
                          : B === b.esLocaleInfo.iso639
                            ? 370
                            : 320,
                      },
                      exit: { opacity: 0 },
                      transition: {
                        duration: 0.15,
                        ease: "easeOut",
                        width: { type: "spring", stiffness: 300, damping: 30 },
                      },
                      className: (0, v.cn)(
                        "shadow-modal bg-v0-background-100 absolute inset-x-0 z-50 mx-auto flex h-11 items-center justify-between gap-2 rounded-full p-2 pl-3 text-sm font-medium",
                        S ? "bottom-16" : "bottom-3",
                      ),
                      children: N
                        ? (0, t.jsxs)("div", {
                            className:
                              "flex items-center gap-2 text-v0-gray-900",
                            children: [
                              (0, t.jsx)(d.Spinner, { size: 16 }),
                              L("codeBlockActions.saving"),
                            ],
                          })
                        : (0, t.jsxs)(t.Fragment, {
                            children: [
                              (0, t.jsxs)("div", {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, t.jsx)(n.Warning, {
                                    className: "text-v0-gray-900!",
                                  }),
                                  L("codeBlockActions.unsavedChanges"),
                                ],
                              }),
                              (0, t.jsxs)("div", {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, t.jsx)(r.Button, {
                                    size: "sm",
                                    className: "h-7",
                                    rounded: !0,
                                    variant: "secondary",
                                    disabled: N,
                                    onClick: $,
                                    children: L("codeBlockActions.reset"),
                                  }),
                                  (0, t.jsx)(r.Button, {
                                    tooltip: {
                                      content: (0, t.jsxs)(t.Fragment, {
                                        children: [
                                          L("codeBlockActions.save"),
                                          " ",
                                          (0, t.jsxs)(m.KbdGroup, {
                                            children: [
                                              (0, t.jsx)(m.Kbd, {
                                                children: P ? "" : "Ctrl",
                                              }),
                                              (0, t.jsx)(m.Kbd, {
                                                children: "S",
                                              }),
                                            ],
                                          }),
                                        ],
                                      }),
                                    },
                                    size: "sm",
                                    className: "h-7",
                                    rounded: !0,
                                    variant: "blue",
                                    disabled: N,
                                    onClick: () => {
                                      w({ setSaving: E, setForceHide: D });
                                    },
                                    children: L("codeBlockActions.save"),
                                  }),
                                ],
                              }),
                            ],
                          }),
                    },
                    "unsaved-changes-island",
                  ),
                ],
              })
            : null,
      });
    }
    function eC(e) {
      (0, i.useEffect)(() => {
        let t = (t) => {
          e && (t.preventDefault(), (t.returnValue = ""));
        };
        return (
          window.addEventListener("beforeunload", t),
          () => {
            window.removeEventListener("beforeunload", t);
          }
        );
      }, [e]);
    }
    function ek({
      blockId: e,
      editValueMap: t,
      source: n,
      meta: r,
      files: c,
      clearEditValueMap: u,
      isAdminSaving: d,
      onSaveSuccess: m,
      isVSCodeEditor: f = !1,
    }) {
      let g = (0, a.useT)(),
        v = (0, s.useActiveBlockState)(),
        b = (0, s.useSetActiveBlockState)(),
        { updateBlockData: j } = (0, h.useBlockHistory)({ blockId: e }),
        { chatId: C } = (0, y.useChatId)(),
        S = (0, eb.useActiveBlockWizardRefetch)(),
        { atoms: N, actions: E } = em(),
        A = (0, k.useAtomValue)(N.pendingDesignSystem),
        { setPendingDesignSystem: D } = E,
        { data: I, mutate: M } = (0, eg.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: C },
          { stopFetch: !C },
        ),
        T = (0, k.useSetAtom)(w.previewBlockErrorsAtom);
      return {
        onSave: async ({ setSaving: i, setForceHide: s }) => {
          let a,
            u = e;
          if (
            ((0, o.track)("SaveEditCode", {
              blockId: u,
              chatId: C || "",
              isVSCodeEditor: f,
            }),
            d &&
              !window.confirm(
                "[V0 ADMIN] Are you sure you want to save these changes to the user's block?",
              ))
          )
            return;
          let h = Object.entries(t || {});
          if (!t || h.length < 1 || !h.some(([e, t]) => !!t))
            return (
              (0, o.track)("SaveEditCodeError", {
                blockId: u,
                chatId: C || "",
                error: "no-edits",
              }),
              l.toast.error(g("codeBlockActions.failedToSaveChanges"), {
                position: "bottom-right",
              })
            );
          let y = h[0][1] || n,
            w = [];
          i(!0);
          try {
            if ("code-project" === r.type) {
              let e = [];
              for (let [t, n] of h) {
                if (null === n) continue;
                let r = c.find((e) => e.meta.file === t);
                r
                  ? n.trimEnd() !== r.source.trimEnd() &&
                    e.push({ path: t, content: n })
                  : e.push({ path: t, content: n });
              }
              if (0 === e.length)
                return (
                  i(!1),
                  (0, o.track)("SaveEditCodeError", {
                    blockId: u,
                    chatId: C || "",
                    error: "no-changes",
                  }),
                  l.toast.error(g("codeBlockActions.failedToSaveChanges"), {
                    position: "bottom-right",
                  })
                );
              let t = await (0, x.updateBlockFiles)({
                blockId: u,
                files: e,
                previousVersionKey: v?.sourceVersionKey,
              });
              if (!t.success)
                return (
                  i(!1),
                  (0, o.track)("SaveEditCodeError", {
                    blockId: u,
                    chatId: C || "",
                    error: t.error || "incremental-update-failed",
                  }),
                  l.toast.error(g("codeBlockActions.failedToSaveChanges"))
                );
              ((y = t.source),
                (w = (0, p.parseMultiFileSource)({
                  source: y,
                  blockType: "code-project",
                  blockId: u,
                })),
                (a = {
                  success: !0,
                  sourceVersionKey: t.sourceVersionKey,
                  transformedSource: void 0,
                }));
            } else
              a = await (0, x.updateCodeBlockSource)({ blockId: u, source: y });
            A.isPending &&
              (await M({
                serverMutate: ev({
                  chatId: C || "",
                  designSystemId: A.designSystemId,
                }),
                optimisticData: I?.ok
                  ? (0, ey.ok)({ ...I.value, designSystemId: A.designSystemId })
                  : void 0,
              }));
          } catch (e) {
            return (
              i(!1),
              console.error("Save error:", e),
              (0, o.track)("SaveEditCodeError", {
                blockId: u,
                chatId: C || "",
                error: "exception",
              }),
              l.toast.error(g("codeBlockActions.failedToSaveChanges"))
            );
          }
          (A.isPending &&
            ((0, o.track)("SaveAppliedDesignSystem", {
              blockId: u,
              chatId: C || "",
              designSystemId: A.designSystemId,
            }),
            D({ isPending: !1, designSystemId: null })),
            i(!1),
            T([]),
            a.success
              ? (v &&
                  u === v.id &&
                  (b({
                    ...v,
                    hasSourceBeenEdited: !0,
                    source: y,
                    lastEditedAt: new Date().toISOString(),
                  }),
                  S(),
                  m?.(w)),
                j({
                  blockId: u,
                  data: {
                    hasSourceBeenEdited: !0,
                    source: y,
                    lastEditedAt: new Date().toISOString(),
                    sourceVersionKey: a.sourceVersionKey,
                  },
                }),
                window.dispatchEvent(
                  new CustomEvent("inline-edit-cleanup-decorations"),
                ),
                s(!0),
                setTimeout(() => s(!1), 2e3),
                l.toast.success(g("codeBlockActions.savedChanges"), {
                  position: "bottom-right",
                }))
              : ((0, o.track)("SaveEditCodeError", {
                  blockId: u,
                  chatId: C || "",
                  error: "failed-to-save",
                }),
                l.toast.error(g("codeBlockActions.failedToSaveChanges"))));
        },
        hasUnsavedChanges: (0, i.useMemo)(() => {
          if (!t) return !1;
          for (let e of c) {
            let n = t[e.meta.file || ""];
            if (n && n.trimEnd() !== e.source.trimEnd()) return !0;
          }
          for (let e of Object.keys(t))
            if (!c.some((t) => t.meta.file === e)) return !0;
          return !1;
        }, [t, c]),
        clearEditValueMap: u,
      };
    }
  },
  227308,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(17514),
      i = e.i(589654),
      s = e.i(657736),
      a = e.i(911303),
      o = e.i(304649),
      l = e.i(162061),
      c = e.i(610726);
    let u = (0, n.createContext)(void 0),
      d = () => {
        let e = (0, n.useContext)(u);
        if (void 0 === e)
          throw Error(
            "useResizableContext must be used within a FileTreeProvider",
          );
        return e;
      };
    function h({ className: e, ...n }) {
      let { leftId: i, rightId: s, groupId: a, panelGroupRef: l } = d();
      return (0, t.jsxs)(r.PanelResizeHandle, {
        onDragging: () => {
          let e = r.getPanelElement(i)?.offsetWidth,
            t = r.getPanelElement(s)?.offsetWidth,
            n = r.getPanelGroupElement(a)?.offsetWidth;
          if (!e || !t || !n) return;
          let o = (e / n) * 100,
            c = (t / n) * 100;
          l.current?.setLayout([o, c]);
        },
        className: (0, o.cn)(
          "group relative z-20 w-0 overflow-visible! outline-hidden! ring-0!",
          e,
        ),
        ...n,
        children: [
          (0, t.jsx)("div", {
            className:
              "absolute inset-0 h-full w-3 translate-x-[-50%] outline-0! ring-0!",
          }),
          (0, t.jsx)("div", {
            className:
              "absolute inset-0 h-full w-0 translate-x-[-50%] outline-0! ring-0! transition-all duration-200 group-data-[resize-handle-active=keyboard]:w-[3px] group-data-[resize-handle-state=drag]:w-[3px] group-data-[resize-handle-state=hover]:w-[3px] group-data-[resize-handle-active=keyboard]:bg-gray-400 group-data-[resize-handle-state=drag]:bg-gray-400 group-data-[resize-handle-state=hover]:bg-gray-300 group-data-[resize-handle-active=keyboard]:outline-hidden",
          }),
        ],
      });
    }
    let p = (0, n.forwardRef)(
      (e, i) => (
        (0, n.useEffect)(() => {
          let t = document.getElementById(e.id);
          t && i && ("function" == typeof i ? i(t) : (i.current = t));
        }, [e.id, i]),
        (0, t.jsx)(r.Panel, { ...e })
      ),
    );
    p.displayName = "ForwardPanel";
    let m = s.motion.create(p);
    function f(e) {
      let t = r.getPanelElement(e);
      if (!t) return 100;
      let n = parseFloat(getComputedStyle(t).minWidth);
      return isNaN(n) ? 100 : n;
    }
    function g({
      isFallbackSize: e,
      collapseSide: i,
      leftId: s,
      rightId: a,
      defaultSizeRef: o,
      cookie: d,
      id: h,
      ...p
    }) {
      let m = (0, n.useRef)(null),
        g = (0, n.useRef)(!1),
        x = (0, c.useDebounceCallback)((e) => {
          l.default.set(d, e, { expires: 30 });
        }, 300),
        v = (0, n.useMemo)(
          () => ({ leftId: s, rightId: a, panelGroupRef: m, groupId: h }),
          [s, a, h, m],
        );
      return (0, t.jsx)(u.Provider, {
        value: v,
        children: (0, t.jsx)(r.PanelGroup, {
          id: h,
          ref: m,
          onLayout: (t) => {
            if (t.length < 2) return;
            let [n, l] = t;
            if (g.current) return (g.current = !1);
            if (!l || !n) return;
            let c = "right" === i ? l : n,
              u = "right" === i ? n : l;
            ((o.current = c), e || x(c.toString()));
            let d = r.getPanelElement(s),
              p = r.getPanelElement(a),
              v = r.getPanelGroupElement(h);
            if (!d || !p || !v) return;
            let y = f("right" === i ? a : s),
              b = f("right" === i ? s : a);
            if ((c / 100) * v.offsetWidth < y) {
              let e = (y / v.offsetWidth) * 100;
              g.current = !0;
              let t = "right" === i ? [100 - e, e] : [e, 100 - e];
              m.current?.setLayout(t);
            } else if ((u / 100) * v.offsetWidth < b) {
              let e = (b / v.offsetWidth) * 100;
              g.current = !0;
              let t = "right" === i ? [e, 100 - e] : [100 - e, e];
              m.current?.setLayout(t);
            }
          },
          ...p,
        }),
      });
    }
    function x({
      collapseSide: e,
      isOpen: n,
      order: l,
      defaultSize: c,
      className: u,
      innerContainerClassname: d,
      handleTestId: p,
      handleClassName: f,
      collapseId: g,
      children: x,
    }) {
      let v = (0, a.useMotionValue)(0),
        y = (0, a.useMotionValue)(1),
        b = {
          hidden: {
            flex: "0 1 0px",
            minWidth: 0,
            overflow: "visible",
            transition: { when: "beforeChildren", duration: 0 },
          },
        },
        j = {
          initial: {
            width: "100%",
            display: "absolute",
            opacity: 0,
            x: "right" === e ? "100%" : "-100%",
          },
          visible: () => ({
            width: ["100%", "100%"],
            opacity: [y.get(), 1],
            display: ["absolute", "block"],
            x: [v.get(), 0],
            transition: { type: "spring", damping: 60, stiffness: 1100 },
          }),
          hidden: () => ({
            width: r.getPanelElement(g)?.offsetWidth ?? 0,
            display: "absolute",
            opacity: 0,
            x: "right" === e ? "100%" : "-100%",
            transition: { type: "spring", damping: 60, stiffness: 800 },
          }),
        };
      return (0, t.jsx)(i.AnimatePresence, {
        initial: !1,
        mode: "wait",
        children: n
          ? (0, t.jsxs)(t.Fragment, {
              children: [
                "right" === e
                  ? (0, t.jsx)(
                      h,
                      {
                        "data-testid": p,
                        className: (0, o.cn)("sticky top-0", f),
                      },
                      "resize-handle",
                    )
                  : null,
                (0, t.jsx)(
                  m,
                  {
                    transition: { duration: 0 },
                    variants: b,
                    exit: "hidden",
                    id: g,
                    order: l,
                    defaultSize: c,
                    style: { overflow: "clip" },
                    className: (0, o.cn)("relative", u),
                    children: (0, t.jsx)(s.motion.div, {
                      style: { x: v, opacity: y, willChange: "auto" },
                      variants: j,
                      initial: "initial",
                      animate: "visible",
                      exit: "hidden",
                      className: (0, o.cn)(
                        "border-v0-alpha-400 absolute inset-y-0 right-0 h-full w-full",
                        "right" === e ? "right-0 border-l" : "left-0 border-r",
                        d,
                      ),
                      children: x,
                    }),
                  },
                  "right-panel",
                ),
                "left" === e
                  ? (0, t.jsx)(
                      h,
                      { "data-testid": p, className: "sticky top-0" },
                      "resize-handle",
                    )
                  : null,
              ],
            })
          : (0, t.jsx)(r.Panel, { order: l, defaultSize: 0 }, "zero-panel"),
      });
    }
    function v({ initialSize: e, fallbackSize: t = 50 }) {
      let [r, i] = (0, n.useState)("number" == typeof e ? e : t),
        s = (0, n.useRef)(r),
        a = (0, n.useRef)(!0),
        [o, l] = (0, n.useState)("number" != typeof e);
      return (
        (0, n.useEffect)(() => {
          "number" != typeof e &&
            e.then((e) => {
              (i(e), l(!1), a.current && ((s.current = e), (a.current = !1)));
            });
        }, [e]),
        { initialSize: r, defaultSizeRef: s, isFallbackSize: o }
      );
    }
    e.s([
      "CollapsiblePanel",
      () => x,
      "PanelGroup",
      () => g,
      "usePanelSize",
      () => v,
    ]);
  },
  561820,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M14 6V4.5C14 3.39543 13.1046 2.5 12 2.5C10.8954 2.5 10 3.39543 10 4.5V6H10.5H12V7.5V12.5C12 13.8807 10.8807 15 9.5 15H2.5C1.11929 15 0 13.8807 0 12.5V7.5V6H1.5H8.5V4.5C8.5 2.567 10.067 1 12 1C13.933 1 15.5 2.567 15.5 4.5V6H14ZM10.5 7.5H10H8.5H1.5V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H9.5C10.0523 13.5 10.5 13.0523 10.5 12.5V7.5Z" fill="currentColor"/>',
    );
    e.s(["LockOpen", 0, t]);
  },
  451704,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("FilePen", [
      [
        "path",
        {
          d: "M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",
          key: "x7tsz2",
        },
      ],
      ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
      ["path", { d: "M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z", key: "o3xyfb" }],
    ]);
    e.s(["default", () => t]);
  },
  882526,
  788018,
  (e) => {
    "use strict";
    var t = e.i(451704);
    e.s(["FileEdit", () => t.default], 882526);
    var n = e.i(324834);
    function r(e) {
      return (0, n.jsx)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...e,
        children: (0, n.jsx)("path", {
          fillRule: "evenodd",
          clipRule: "evenodd",
          d: "M14.5 13.5V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V8H3V1.5H8V5V6.5H9.5H13V13.5C13 14.0523 12.5523 14.5 12 14.5H6V16H12C13.3807 16 14.5 14.8807 14.5 13.5ZM9.5 5V2.12132L12.3787 5H9.5ZM2.31885 12.8194H0V11.3194H2.31885V9H3.81885V11.3194H6.13775V12.8194H3.81885V15.1377H2.31885V12.8194Z",
          fill: "currentColor",
        }),
      });
    }
    e.s(["FilePlus", () => r], 788018);
  },
  223215,
  (e) => {
    "use strict";
    var t = e.i(324834);
    function n() {
      return (0, t.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, t.jsx)("path", {
            d: "M11.3333 8H2",
            stroke: "currentcolor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round",
          }),
          (0, t.jsx)("path", {
            d: "M7.33325 12L11.3333 8L7.33325 4",
            stroke: "currentcolor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round",
          }),
          (0, t.jsx)("path", {
            d: "M14 3.33203V12.6654",
            stroke: "currentcolor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round",
          }),
        ],
      });
    }
    e.s(["CollapseArrow", () => n]);
  },
  894906,
  (e) => {
    "use strict";
    e.s(["useUpdateBlockData", () => a]);
    var t = e.i(455552),
      n = e.i(661385),
      r = e.i(301331),
      i = e.i(576191),
      s = e.i(449381);
    function a(e) {
      let a = (0, s.useActiveBlockState)(),
        { updateBlockData: o } = (0, r.useBlockHistory)({ blockId: e }),
        l = (0, s.useSetActiveBlockState)();
      return (0, i.useCallback)(
        async function (r, i) {
          let s = (0, t.createMultiFileSource)({
              files: r,
              blockType: "code-project",
            }),
            c = await (0, n.updateCodeBlockSource)({
              blockId: e,
              source: s,
              movedFile: i?.moveFile,
            });
          return (
            c.transformedSource && (s = c.transformedSource),
            a &&
              e === a.id &&
              l({
                ...a,
                hasSourceBeenEdited: !0,
                source: s,
                sourceVersionKey: c.sourceVersionKey,
              }),
            o({
              blockId: e,
              data: {
                sourceVersionKey: c.sourceVersionKey,
                hasSourceBeenEdited: !0,
                source: s,
                lastEditedAt: new Date().toISOString(),
              },
            }),
            c
          );
        },
        [e, a, o, l],
      );
    }
  },
  313595,
  44756,
  934994,
  804089,
  (e) => {
    "use strict";
    e.s(
      [
        "NewFileDialog",
        () => m,
        "createFile",
        () => p,
        "useNewFileDialog",
        () => h,
      ],
      313595,
    );
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(576191),
      i = e.i(297239),
      s = e.i(355805),
      a = e.i(46601);
    e.i(563948);
    var o = e.i(407562),
      l = e.i(686832),
      c = e.i(763480),
      u = e.i(894906),
      d = e.i(914483);
    function h() {
      let [e, t] = (0, d.useGetSet)("showNewFileDialog", !1),
        [n, r] = (0, d.useGetSet)("newFileDialogData", { folderName: "" });
      return {
        newFileDialogData: n,
        setNewFileDialogData: r,
        showNewFileDialog: e,
        setShowNewFileDialog: t,
      };
    }
    async function p(e, t, n, r, i, a) {
      let o = `${n.folderName}/${r}`;
      n.folderName || (o = r);
      let l = r.split(".").pop(),
        c = {
          source: i,
          meta: { file: o },
          blockId: e,
          lang: (0, s.cleanLangNoCustom)(l),
          isDeleted: !1,
          isEdit: !1,
          isMerged: !1,
          isMoved: !1,
          isRecovered: !1,
          isLocked: !1,
          isFixed: !1,
          isQuickEdit: !1,
          isTerminated: !1,
          isAttachmentQuickEdit: !1,
          isUserEdit: !0,
        };
      if (!(await a([...t, c])).success) throw Error("Failed");
    }
    function m({ blockId: e, sourceFiles: s, onSuccess: d }) {
      let {
          newFileDialogData: m,
          showNewFileDialog: f,
          setShowNewFileDialog: g,
        } = h(),
        x = (0, u.useUpdateBlockData)(e),
        [v, y] = (0, r.useState)(!1),
        [b, j] = (0, r.useState)(""),
        w = (0, i.useT)();
      (0, r.useEffect)(() => {
        f && j("");
      }, [f]);
      let C = (0, r.useCallback)(
        async (t) => {
          t.preventDefault();
          try {
            (y(!0), await p(e, s, m, b, "", x), d?.());
          } catch {
            o.toast.error(w("fileTreeActions.newFileNotificationError"));
          } finally {
            y(!1);
          }
        },
        [e, s, m, d, w, x, b],
      );
      return (0, t.jsxs)(l.Modal, {
        onOpenChange: g,
        open: f,
        responsive: !1,
        children: [
          (0, t.jsx)(l.ModalHeader, {
            children: (0, t.jsx)(l.ModalTitle, {
              children: w("fileTreeActions.newFile"),
            }),
          }),
          (0, t.jsx)(l.ModalContent, {
            children: (0, t.jsx)("form", {
              className: "flex flex-col gap-6",
              onSubmit: C,
              children: (0, t.jsx)(c.Input, {
                onChange: (e) => j(e.target.value),
                disabled: v,
                value: b,
              }),
            }),
          }),
          (0, t.jsxs)(l.ModalFooter, {
            children: [
              (0, t.jsx)(l.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(n.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: w("fileTreeActions.cancel"),
                }),
              }),
              (0, t.jsx)(n.Button, {
                "data-testid": "confirm-delete-message",
                disabled: v,
                onClick: C,
                size: "sm",
                children: v
                  ? (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(a.IconSpinner, { className: "size-4" }),
                        w("fileTreeActions.creating"),
                      ],
                    })
                  : w("fileTreeActions.create"),
              }),
            ],
          }),
        ],
      });
    }
    e.s(
      [
        "DeleteFileDialog",
        () => N,
        "deleteFile",
        () => S,
        "useDeleteFileDialog",
        () => k,
      ],
      44756,
    );
    var f = t,
      g = n,
      x = r,
      v = i,
      y = a,
      b = o,
      j = l,
      w = u,
      C = d;
    function k() {
      let [e, t] = (0, C.useGetSet)("showDeleteFileDialog", !1),
        [n, r] = (0, C.useGetSet)("deleteFileDialogData", { fileName: "" });
      return {
        showDeleteFileDialog: e,
        setShowDeleteFileDialog: t,
        deleteFileDialogData: n,
        setDeleteFileDialogData: r,
      };
    }
    async function S(e, t, n) {
      let r = [...e];
      for (let e of r)
        if (e.meta.file === t.fileName) {
          ((e.isDeleted = !0),
            (e.isUserEdit = !0),
            (e.isMerged = !1),
            (e.moveToEnd = !0));
          break;
        }
      if (!(await n(r)).success) throw Error("Failed");
    }
    function N({ blockId: e, sourceFiles: t, onSuccess: n }) {
      let {
          showDeleteFileDialog: r,
          setShowDeleteFileDialog: i,
          deleteFileDialogData: s,
        } = k(),
        a = (0, w.useUpdateBlockData)(e),
        [o, l] = (0, x.useState)(!1),
        c = (0, v.useT)(),
        u = (0, x.useCallback)(async () => {
          try {
            (l(!0), await S(t, s, a), n());
          } catch {
            b.toast.error(c("fileTreeActions.fileDeletedNotificationError"));
          } finally {
            l(!1);
          }
        }, [s, t, n, a, c]);
      return (0, f.jsxs)(j.Modal, {
        onOpenChange: i,
        open: r,
        responsive: !1,
        children: [
          (0, f.jsx)(j.ModalHeader, {
            children: (0, f.jsx)(j.ModalTitle, {
              children: c("fileTreeActions.deleteFile"),
            }),
          }),
          (0, f.jsx)(j.ModalContent, {
            children: (0, f.jsxs)("p", {
              children: [
                "Are you sure you want to delete",
                " ",
                (0, f.jsx)("span", {
                  className: "font-bold",
                  children: s.fileName,
                }),
                "?",
              ],
            }),
          }),
          (0, f.jsxs)(j.ModalFooter, {
            children: [
              (0, f.jsx)(j.ModalClose, {
                asChild: !0,
                children: (0, f.jsx)(g.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: c("fileTreeActions.cancel"),
                }),
              }),
              (0, f.jsx)(g.Button, {
                "data-testid": "confirm-delete-message",
                disabled: o,
                onClick: u,
                size: "sm",
                variant: "destructive",
                children: o
                  ? (0, f.jsxs)(f.Fragment, {
                      children: [
                        (0, f.jsx)(y.IconSpinner, { className: "size-4" }),
                        c("fileTreeActions.deleting"),
                      ],
                    })
                  : c("fileTreeActions.delete"),
              }),
            ],
          }),
        ],
      });
    }
    e.s(
      [
        "DeleteFolderDialog",
        () => O,
        "deleteFolder",
        () => _,
        "useDeleteFolderDialog",
        () => F,
      ],
      934994,
    );
    var E = t,
      A = n,
      D = r,
      I = i,
      M = a,
      T = o,
      L = l,
      P = u,
      R = d;
    function F() {
      let [e, t] = (0, R.useGetSet)("showDeleteFolderDialog", !1),
        [n, r] = (0, R.useGetSet)("deleteFolderDialogData", {
          folderName: "",
          source: "",
        });
      return {
        deleteFolderDialogData: n,
        setDeleteFolderDialogData: r,
        showDeleteFolderDialog: e,
        setShowDeleteFolderDialog: t,
      };
    }
    async function _(e, t, n) {
      let r = [...e];
      for (let e of r)
        e.meta.file?.startsWith(t.folderName + "/") &&
          ((e.isDeleted = !0),
          (e.isUserEdit = !0),
          (e.isMerged = !1),
          (e.moveToEnd = !0));
      if (!(await n(r)).success) throw Error("Failed");
    }
    function O({ blockId: e, sourceFiles: t, onSuccess: n }) {
      let {
          deleteFolderDialogData: r,
          showDeleteFolderDialog: i,
          setShowDeleteFolderDialog: s,
        } = F(),
        a = (0, P.useUpdateBlockData)(e),
        [o, l] = (0, D.useState)(!1),
        c = (0, I.useT)(),
        u = (0, D.useCallback)(async () => {
          try {
            (l(!0), await _(t, r, a), n());
          } catch {
            T.toast.error(c("fileTreeActions.folderDeletedNotificationError"));
          } finally {
            l(!1);
          }
        }, [r, t, n, a, c]);
      return (0, E.jsxs)(L.Modal, {
        onOpenChange: s,
        open: i,
        responsive: !1,
        children: [
          (0, E.jsx)(L.ModalHeader, {
            children: (0, E.jsx)(L.ModalTitle, {
              children: c("fileTreeActions.deleteFolder"),
            }),
          }),
          (0, E.jsx)(L.ModalContent, {
            children: (0, E.jsxs)("p", {
              className: "mb-2",
              children: [
                "Are you sure you want to delete",
                " ",
                (0, E.jsx)("span", {
                  className: "font-bold",
                  children: r.folderName,
                }),
                "?",
              ],
            }),
          }),
          (0, E.jsxs)(L.ModalFooter, {
            children: [
              (0, E.jsx)(L.ModalClose, {
                asChild: !0,
                children: (0, E.jsx)(A.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: c("fileTreeActions.cancel"),
                }),
              }),
              (0, E.jsx)(A.Button, {
                "data-testid": "confirm-delete-message",
                disabled: o,
                onClick: u,
                size: "sm",
                variant: "destructive",
                children: o
                  ? (0, E.jsxs)(E.Fragment, {
                      children: [
                        (0, E.jsx)(M.IconSpinner, { className: "size-4" }),
                        c("fileTreeActions.deleting"),
                      ],
                    })
                  : c("fileTreeActions.delete"),
              }),
            ],
          }),
        ],
      });
    }
    var B = t,
      V = n,
      z = r,
      H = i,
      $ = a,
      U = l,
      G = c,
      W = d;
    function q() {
      let [e, t] = (0, W.useGetSet)("showNewFolderDialog", !1),
        [n, r] = (0, W.useGetSet)("newFolderDialogData", { folderName: "" });
      return {
        newFolderDialogData: n,
        setNewFolderDialogData: r,
        showNewFolderDialog: e,
        setShowNewFolderDialog: t,
      };
    }
    function Z({ blockId: e }) {
      let [t, n] = (0, W.useGetSet)(`tempFolders-${e}`, []);
      return { tempFolders: t, setTempFolders: n };
    }
    function K({ onSuccess: e }) {
      let {
          newFolderDialogData: t,
          showNewFolderDialog: n,
          setShowNewFolderDialog: r,
        } = q(),
        [i, s] = (0, z.useState)(!1),
        [a, o] = (0, z.useState)(""),
        l = (0, H.useT)();
      (0, z.useEffect)(() => {
        n && o("");
      }, [n]);
      let c = (0, z.useCallback)(
        (n) => {
          (n.preventDefault(),
            s(!0),
            e(t.folderName ? `${t.folderName}/${a}` : a),
            s(!1));
        },
        [t, e, a],
      );
      return (0, B.jsxs)(U.Modal, {
        onOpenChange: r,
        open: n,
        responsive: !1,
        children: [
          (0, B.jsx)(U.ModalHeader, {
            children: (0, B.jsx)(U.ModalTitle, {
              children: l("fileTreeActions.newFolder"),
            }),
          }),
          (0, B.jsx)(U.ModalContent, {
            children: (0, B.jsx)("form", {
              className: "flex flex-col gap-6",
              onSubmit: c,
              children: (0, B.jsx)(G.Input, {
                onChange: (e) => o(e.target.value),
                disabled: i,
                value: a,
              }),
            }),
          }),
          (0, B.jsxs)(U.ModalFooter, {
            children: [
              (0, B.jsx)(U.ModalClose, {
                asChild: !0,
                children: (0, B.jsx)(V.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: l("fileTreeActions.cancel"),
                }),
              }),
              (0, B.jsx)(V.Button, {
                "data-testid": "confirm-delete-message",
                disabled: i,
                onClick: c,
                size: "sm",
                children: i
                  ? (0, B.jsxs)(B.Fragment, {
                      children: [
                        (0, B.jsx)($.IconSpinner, { className: "size-4" }),
                        l("fileTreeActions.creating"),
                      ],
                    })
                  : l("fileTreeActions.create"),
              }),
            ],
          }),
        ],
      });
    }
    e.s(
      [
        "NewFolderDialog",
        () => K,
        "useNewFolderDialog",
        () => q,
        "useTempFolders",
        () => Z,
      ],
      804089,
    );
  },
  811140,
  (e) => {
    "use strict";
    e.s([
      "RenameFileDialog",
      () => p,
      "renameFile",
      () => h,
      "useRenameFileDialog",
      () => d,
    ]);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(576191),
      i = e.i(297239),
      s = e.i(46601);
    e.i(563948);
    var a = e.i(407562),
      o = e.i(686832),
      l = e.i(763480),
      c = e.i(894906),
      u = e.i(914483);
    function d() {
      let [e, t] = (0, u.useGetSet)("showRenameFileDialog", !1),
        [n, r] = (0, u.useGetSet)("renameFileDialogData", { fileName: "" });
      return {
        renameFileDialogData: n,
        setRenameFileDialogData: r,
        showRenameFileDialog: e,
        setShowRenameFileDialog: t,
      };
    }
    async function h(e, t, n, r, i = !1) {
      let s = [...e],
        a = s.findIndex((e) => e.meta.file === t.fileName);
      if (-1 === a) throw Error("File not found");
      let o = t.fileName.split("/").slice(0, -1).join("/"),
        l = i ? n : o ? `${o}/${n}` : n;
      if (
        ((s[a].meta.file = l),
        (s[a].isMoved = !0),
        (s[a].isUserEdit = !0),
        !(await r([...s], { moveFile: { from: t.fileName, to: l } })).success)
      )
        throw Error("Failed");
      return l;
    }
    function p({ blockId: e, sourceFiles: u, onSuccess: p }) {
      let {
          renameFileDialogData: m,
          showRenameFileDialog: f,
          setShowRenameFileDialog: g,
        } = d(),
        x = (0, c.useUpdateBlockData)(e),
        [v, y] = (0, r.useState)(!1),
        [b, j] = (0, r.useState)(""),
        w = (0, i.useT)();
      (0, r.useEffect)(() => {
        j(m.fileName.split("/").slice(-1)[0] || "");
      }, [m.fileName]);
      let C = (0, r.useCallback)(
        async (e) => {
          e.preventDefault();
          try {
            y(!0);
            let e = await h(u, m, b, x);
            p(e);
          } catch {
            a.toast.error(w("fileTreeActions.renameFileNotificationError"));
          } finally {
            y(!1);
          }
        },
        [u, p, m, w, x, b],
      );
      return (0, t.jsxs)(o.Modal, {
        onOpenChange: g,
        open: f,
        responsive: !1,
        children: [
          (0, t.jsx)(o.ModalHeader, {
            children: (0, t.jsx)(o.ModalTitle, {
              children: w("fileTreeActions.renameFile"),
            }),
          }),
          (0, t.jsx)(o.ModalContent, {
            children: (0, t.jsx)("form", {
              className: "flex flex-col gap-6",
              onSubmit: C,
              children: (0, t.jsx)(l.Input, {
                onChange: (e) => j(e.target.value),
                disabled: v,
                value: b,
              }),
            }),
          }),
          (0, t.jsxs)(o.ModalFooter, {
            children: [
              (0, t.jsx)(o.ModalClose, {
                asChild: !0,
                children: (0, t.jsx)(n.Button, {
                  size: "sm",
                  variant: "secondary",
                  children: w("fileTreeActions.cancel"),
                }),
              }),
              (0, t.jsx)(n.Button, {
                "data-testid": "confirm-delete-message",
                disabled: v,
                onClick: C,
                size: "sm",
                children: v
                  ? (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(s.IconSpinner, { className: "size-4" }),
                        w("fileTreeActions.renaming"),
                      ],
                    })
                  : w("fileTreeActions.rename"),
              }),
            ],
          }),
        ],
      });
    }
  },
  840030,
  951993,
  818845,
  453609,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649);
    function r({ className: e, ...r }) {
      return (0, t.jsxs)("svg", {
        className: (0, n.cn)("h-4 w-4", e),
        fill: "none",
        height: "16",
        viewBox: "0 0 16 16",
        width: "16",
        xmlns: "http://www.w3.org/2000/svg",
        ...r,
        children: [
          (0, t.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M13 10.4V11.2H10.6V10.4C10.6 9.73726 11.1373 9.2 11.8 9.2C12.4627 9.2 13 9.73726 13 10.4ZM9.4 11.2V10.4C9.4 9.07452 10.4745 8 11.8 8C13.1255 8 14.2 9.07452 14.2 10.4V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13726 16 8.6 15.4627 8.6 14.8V11.2H9.4Z",
            fill: "currentColor",
          }),
          (0, t.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M14.5 7V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V7H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",
            fill: "currentColor",
          }),
        ],
      });
    }
    e.s(["IconLockFiles", () => r], 840030);
    var i = t,
      s = n;
    function a({ className: e, ...t }) {
      return (0, i.jsxs)("svg", {
        className: (0, s.cn)("h-4 w-4", e),
        fill: "none",
        height: "16",
        viewBox: "0 0 16 16",
        width: "16",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
        children: [
          (0, i.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M9.39997 10.7499C9.39997 10.1148 8.8851 9.5999 8.24997 9.5999C7.61485 9.5999 7.09997 10.1148 7.09997 10.7499V11.1428H5.89997V10.7499C5.89997 9.45203 6.95211 8.3999 8.24997 8.3999C9.54784 8.3999 10.6 9.45203 10.6 10.7499V11.2H15V14.8C15 15.4627 14.4627 16 13.8 16H9.8C9.13725 16 8.59999 15.4627 8.59999 14.8V11.2H9.39997V10.7499Z",
            fill: "currentColor",
          }),
          (0, i.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M14.5 10V6.5V5.41421C14.5 5.149 14.3946 4.89464 14.2071 4.70711L9.79289 0.292893C9.60536 0.105357 9.351 0 9.08579 0H8H3H1.5V1.5V13.5C1.5 14.8807 2.61929 16 4 16H7V14.5H4C3.44772 14.5 3 14.0523 3 13.5V1.5H8V5V6.5H9.5H13V10H14.5ZM9.5 5V2.12132L12.3787 5H9.5Z",
            fill: "currentColor",
          }),
        ],
      });
    }
    (e.s(["IconUnlockFiles", () => a], 951993),
      e.s(["useToggleFileLock", () => h], 818845),
      e.i(563948));
    var o = e.i(407562),
      l = e.i(894906),
      c = e.i(297239),
      u = e.i(576191),
      d = e.i(53223);
    let h = ({ blockId: e, sourceFiles: t, onChange: n }) => {
      let r = (0, l.useUpdateBlockData)(e),
        i = (0, c.useT)(),
        [s, a] = (0, u.useState)(null);
      return {
        handleToggleFileLock: (0, u.useCallback)(
          async (s) => {
            let l,
              c,
              u = [...t],
              h = "locking";
            for (let e of u)
              if (
                ("single-file" !== s.variant ||
                  e.meta.file === s.fileNameToEdit) &&
                ("folder" !== s.variant ||
                  e.meta.file?.startsWith(s.folderName + "/"))
              ) {
                if (
                  ((("single-file" === s.variant && e.isLocked) ||
                    ("all-files" === s.variant && "unlock" === s.mode) ||
                    ("folder" === s.variant && "unlock" === s.mode)) &&
                    (h = "unlocking"),
                  "single-file" === s.variant
                    ? (e.isLocked = !e.isLocked)
                    : (e.isLocked = "lock" === s.mode),
                  "single-file" === s.variant)
                )
                  break;
                "other-files" === s.variant &&
                  (e.meta.file === s.fileNameToNotLock
                    ? (e.isLocked = !1)
                    : (e.isLocked = !0));
              }
            "all-files" === s.variant
              ? a({ type: "locking" === h ? "locking-all" : "unlocking-all" })
              : "folder" === s.variant
                ? a({
                    type:
                      "locking" === h ? "locking-folder" : "unlocking-folder",
                    folderName: s.folderName,
                  })
                : a({
                    type: h,
                    fileName:
                      "single-file" === s.variant
                        ? s.fileNameToEdit
                        : s.fileNameToNotLock,
                  });
            try {
              l = await r(u);
            } catch {
              l = { success: !1 };
            }
            ((c =
              "single-file" === s.variant
                ? "locking" === h
                  ? "fileTreeActions.fileLockedNotification"
                  : "fileTreeActions.fileUnlockNotification"
                : "locking" === h
                  ? "fileTreeActions.filesLockedNotification"
                  : "fileTreeActions.filesUnlockedNotification"),
              a(null),
              l.success
                ? ((0, d.track)("LockFiles", {
                    variant: s.variant,
                    state: h,
                    blockId: e,
                  }),
                  o.toast.success(i(c), { position: "bottom-right" }),
                  n())
                : ((0, d.track)("LockFilesError", {
                    variant: s.variant,
                    state: h,
                    blockId: e,
                  }),
                  console.error(l),
                  o.toast.error(
                    i("fileTreeActions.fileLockNotificationError"),
                    { position: "bottom-right" },
                  )));
          },
          [t, r, i, n, e],
        ),
        lockingStatus: s,
      };
    };
    var p = t,
      m = n;
    function f({ className: e, ...t }) {
      return (0, p.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        ...t,
        className: (0, m.cn)("h-4 w-4", e),
        children: [
          (0, p.jsx)("path", {
            d: "M6.74884 6.75L2.24884 2.25M5.99884 1.5H1.75C1.61193 1.5 1.5 1.61193 1.5 1.75V6",
            stroke: "#717179",
            strokeWidth: "1.5",
            strokeLinecap: "square",
            strokeLinejoin: "round",
          }),
          (0, p.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M13.0001 9.4V10.2H10.6001V9.4C10.6001 8.73726 11.1374 8.2 11.8001 8.2C12.4628 8.2 13.0001 8.73726 13.0001 9.4ZM9.4001 10.2V9.4C9.4001 8.07452 10.4746 7 11.8001 7C13.1256 7 14.2001 8.07452 14.2001 9.4V10.2H15.0001V13.8C15.0001 14.4627 14.4628 15 13.8001 15H9.8001C9.13736 15 8.6001 14.4627 8.6001 13.8V10.2H9.4001Z",
            fill: "#717179",
          }),
        ],
      });
    }
    e.s(["IconLockOthers", () => f], 453609);
  },
  970210,
  (e, t, n) => {
    function r(e, t) {
      ("boolean" == typeof t && (t = { forever: t }),
        (this._originalTimeouts = JSON.parse(JSON.stringify(e))),
        (this._timeouts = e),
        (this._options = t || {}),
        (this._maxRetryTime = (t && t.maxRetryTime) || 1 / 0),
        (this._fn = null),
        (this._errors = []),
        (this._attempts = 1),
        (this._operationTimeout = null),
        (this._operationTimeoutCb = null),
        (this._timeout = null),
        (this._operationStart = null),
        (this._timer = null),
        this._options.forever &&
          (this._cachedTimeouts = this._timeouts.slice(0)));
    }
    ((t.exports = r),
      (r.prototype.reset = function () {
        ((this._attempts = 1),
          (this._timeouts = this._originalTimeouts.slice(0)));
      }),
      (r.prototype.stop = function () {
        (this._timeout && clearTimeout(this._timeout),
          this._timer && clearTimeout(this._timer),
          (this._timeouts = []),
          (this._cachedTimeouts = null));
      }),
      (r.prototype.retry = function (e) {
        if ((this._timeout && clearTimeout(this._timeout), !e)) return !1;
        var t = new Date().getTime();
        if (e && t - this._operationStart >= this._maxRetryTime)
          return (
            this._errors.push(e),
            this._errors.unshift(Error("RetryOperation timeout occurred")),
            !1
          );
        this._errors.push(e);
        var n = this._timeouts.shift();
        if (void 0 === n)
          if (!this._cachedTimeouts) return !1;
          else
            (this._errors.splice(0, this._errors.length - 1),
              (n = this._cachedTimeouts.slice(-1)));
        var r = this;
        return (
          (this._timer = setTimeout(function () {
            (r._attempts++,
              r._operationTimeoutCb &&
                ((r._timeout = setTimeout(function () {
                  r._operationTimeoutCb(r._attempts);
                }, r._operationTimeout)),
                r._options.unref && r._timeout.unref()),
              r._fn(r._attempts));
          }, n)),
          this._options.unref && this._timer.unref(),
          !0
        );
      }),
      (r.prototype.attempt = function (e, t) {
        ((this._fn = e),
          t &&
            (t.timeout && (this._operationTimeout = t.timeout),
            t.cb && (this._operationTimeoutCb = t.cb)));
        var n = this;
        (this._operationTimeoutCb &&
          (this._timeout = setTimeout(function () {
            n._operationTimeoutCb();
          }, n._operationTimeout)),
          (this._operationStart = new Date().getTime()),
          this._fn(this._attempts));
      }),
      (r.prototype.try = function (e) {
        (console.log("Using RetryOperation.try() is deprecated"),
          this.attempt(e));
      }),
      (r.prototype.start = function (e) {
        (console.log("Using RetryOperation.start() is deprecated"),
          this.attempt(e));
      }),
      (r.prototype.start = r.prototype.try),
      (r.prototype.errors = function () {
        return this._errors;
      }),
      (r.prototype.attempts = function () {
        return this._attempts;
      }),
      (r.prototype.mainError = function () {
        if (0 === this._errors.length) return null;
        for (var e = {}, t = null, n = 0, r = 0; r < this._errors.length; r++) {
          var i = this._errors[r],
            s = i.message,
            a = (e[s] || 0) + 1;
          ((e[s] = a), a >= n && ((t = i), (n = a)));
        }
        return t;
      }));
  },
  731238,
  (e, t, n) => {
    var r = e.r(970210);
    ((n.operation = function (e) {
      return new r(n.timeouts(e), {
        forever: e && (e.forever || e.retries === 1 / 0),
        unref: e && e.unref,
        maxRetryTime: e && e.maxRetryTime,
      });
    }),
      (n.timeouts = function (e) {
        if (e instanceof Array) return [].concat(e);
        var t = {
          retries: 10,
          factor: 2,
          minTimeout: 1e3,
          maxTimeout: 1 / 0,
          randomize: !1,
        };
        for (var n in e) t[n] = e[n];
        if (t.minTimeout > t.maxTimeout)
          throw Error("minTimeout is greater than maxTimeout");
        for (var r = [], i = 0; i < t.retries; i++)
          r.push(this.createTimeout(i, t));
        return (
          e && e.forever && !r.length && r.push(this.createTimeout(i, t)),
          r.sort(function (e, t) {
            return e - t;
          }),
          r
        );
      }),
      (n.createTimeout = function (e, t) {
        var n = Math.round(
          (t.randomize ? Math.random() + 1 : 1) *
            Math.max(t.minTimeout, 1) *
            Math.pow(t.factor, e),
        );
        return Math.min(n, t.maxTimeout);
      }),
      (n.wrap = function (e, t, r) {
        if ((t instanceof Array && ((r = t), (t = null)), !r))
          for (var i in ((r = []), e)) "function" == typeof e[i] && r.push(i);
        for (var s = 0; s < r.length; s++) {
          var a = r[s],
            o = e[a];
          ((e[a] = function (r) {
            var i = n.operation(t),
              s = Array.prototype.slice.call(arguments, 1),
              a = s.pop();
            (s.push(function (e) {
              i.retry(e) ||
                (e && (arguments[0] = i.mainError()), a.apply(this, arguments));
            }),
              i.attempt(function () {
                r.apply(e, s);
              }));
          }.bind(e, o)),
            (e[a].options = t));
        }
      }));
  },
  629103,
  (e, t, n) => {
    t.exports = e.r(731238);
  },
  452172,
  (e, t, n) => {
    var r = e.r(629103);
    t.exports = function (e, t) {
      return new Promise(function (n, i) {
        var s,
          a = t || {};
        function o(e) {
          i(e || Error("Aborted"));
        }
        function l(e, t) {
          e.bail
            ? o(e)
            : s.retry(e)
              ? a.onRetry && a.onRetry(e, t)
              : i(s.mainError());
        }
        function c(t) {
          var r;
          try {
            r = e(o, t);
          } catch (e) {
            l(e, t);
            return;
          }
          Promise.resolve(r)
            .then(n)
            .catch(function (e) {
              l(e, t);
            });
        }
        ("randomize" in a || (a.randomize = !0),
          (s = r.operation(a)).attempt(c));
      });
    };
  },
  655263,
  (e, t, n) => {
    "use strict";
    ((t.exports = o), (t.exports.format = l), (t.exports.parse = c));
    var r = /\B(?=(\d{3})+(?!\d))/g,
      i = /(?:\.0*|(\.[^0]+)0+)$/,
      s = {
        b: 1,
        kb: 1024,
        mb: 1048576,
        gb: 0x40000000,
        tb: 0x10000000000,
        pb: 0x4000000000000,
      },
      a = /^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;
    function o(e, t) {
      return "string" == typeof e
        ? c(e)
        : "number" == typeof e
          ? l(e, t)
          : null;
    }
    function l(e, t) {
      if (!Number.isFinite(e)) return null;
      var n = Math.abs(e),
        a = (t && t.thousandsSeparator) || "",
        o = (t && t.unitSeparator) || "",
        l = t && void 0 !== t.decimalPlaces ? t.decimalPlaces : 2,
        c = !!(t && t.fixedDecimals),
        u = (t && t.unit) || "";
      (u && s[u.toLowerCase()]) ||
        (u =
          n >= s.pb
            ? "PB"
            : n >= s.tb
              ? "TB"
              : n >= s.gb
                ? "GB"
                : n >= s.mb
                  ? "MB"
                  : n >= s.kb
                    ? "KB"
                    : "B");
      var d = (e / s[u.toLowerCase()]).toFixed(l);
      return (
        c || (d = d.replace(i, "$1")),
        a &&
          (d = d
            .split(".")
            .map(function (e, t) {
              return 0 === t ? e.replace(r, a) : e;
            })
            .join(".")),
        d + o + u
      );
    }
    function c(e) {
      if ("number" == typeof e && !isNaN(e)) return e;
      if ("string" != typeof e) return null;
      var t,
        n = a.exec(e),
        r = "b";
      return (n
        ? ((t = parseFloat(n[1])), (r = n[4].toLowerCase()))
        : ((t = parseInt(e, 10)), (r = "b")),
      isNaN(t))
        ? null
        : Math.floor(s[r] * t);
    }
  },
  906202,
  (e, t, n) => {
    t.exports = function (e) {
      return (
        null != e &&
        null != e.constructor &&
        "function" == typeof e.constructor.isBuffer &&
        e.constructor.isBuffer(e)
      );
    };
  },
  547763,
  228495,
  778625,
  (e) => {
    "use strict";
    e.i(134542);
    var t,
      n,
      r = e.i(439235);
    let i = globalThis.fetch.bind(globalThis);
    var s = e.i(452172),
      a = e.i(655263);
    let o = {
      toWeb() {
        throw Error(
          "Vercel Blob: Sorry, we cannot get a Readable stream in this environment. If you see this message please open an issue here: https://github.com/vercel/storage/ with details on your environment.",
        );
      },
    };
    var l = e.i(906202);
    function c(e) {
      if (null == e ? void 0 : e.token) return e.token;
      if (r.default.env.BLOB_READ_WRITE_TOKEN)
        return r.default.env.BLOB_READ_WRITE_TOKEN;
      throw new u(
        "No token found. Either configure the `BLOB_READ_WRITE_TOKEN` environment variable, or pass a `token` option to your calls.",
      );
    }
    var u = class extends Error {
      constructor(e) {
        super(`Vercel Blob: ${e}`);
      }
    };
    function d(e) {
      if ("object" != typeof e || null === e) return !1;
      let t = Object.getPrototypeOf(e);
      return (
        (null === t ||
          t === Object.prototype ||
          null === Object.getPrototypeOf(t)) &&
        !(Symbol.toStringTag in e) &&
        !(Symbol.iterator in e)
      );
    }
    var h = !1;
    try {
      ((null == (t = r.default.env.DEBUG) ? void 0 : t.includes("blob")) ||
        (null == (n = r.default.env.NEXT_PUBLIC_DEBUG)
          ? void 0
          : n.includes("blob"))) &&
        (h = !0);
    } catch (e) {}
    function p(e, ...t) {
      h && console.debug(`vercel-blob: ${e}`, ...t);
    }
    var m = 950,
      f = class extends u {
        constructor() {
          super(
            "Access denied, please provide a valid token for this resource.",
          );
        }
      },
      g = class extends u {
        constructor(e) {
          super(`Content type mismatch, ${e}`);
        }
      },
      x = class extends u {
        constructor() {
          super("This store does not exist.");
        }
      },
      v = class extends u {
        constructor() {
          super("This store has been suspended.");
        }
      },
      y = class extends u {
        constructor() {
          super("Unknown error, please visit https://vercel.com/help.");
        }
      },
      b = class extends u {
        constructor() {
          super("The requested blob does not exist");
        }
      },
      j = class extends u {
        constructor() {
          super(
            "The blob service is currently not available. Please try again.",
          );
        }
      },
      w = class extends u {
        constructor(e) {
          (super(
            `Too many requests please lower the number of concurrent requests ${e ? ` - try again in ${e} seconds` : ""}.`,
          ),
            (this.retryAfter = null != e ? e : 0));
        }
      },
      C = class extends u {
        constructor() {
          super("The request was aborted.");
        }
      },
      k = 7;
    function S() {
      let e = null;
      try {
        e =
          r.default.env.VERCEL_BLOB_API_VERSION_OVERRIDE ||
          r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_VERSION_OVERRIDE;
      } catch {}
      return `${null != e ? e : k}`;
    }
    function N(e = "") {
      let t = null;
      try {
        t =
          r.default.env.VERCEL_BLOB_API_URL ||
          r.default.env.NEXT_PUBLIC_VERCEL_BLOB_API_URL;
      } catch {}
      return `${t || "https://blob.vercel-storage.com"}${e}`;
    }
    function E() {
      try {
        let e = r.default.env.VERCEL_BLOB_RETRIES || "10";
        return parseInt(e, 10);
      } catch {
        return 10;
      }
    }
    function A(e) {
      let t = e.headers.get("retry-after");
      return new w(t ? parseInt(t, 10) : void 0);
    }
    async function D(e) {
      var t, n, r;
      let i, s, a;
      try {
        let a = await e.json();
        ((i =
          null != (n = null == (t = a.error) ? void 0 : t.code)
            ? n
            : "unknown_error"),
          (s = null == (r = a.error) ? void 0 : r.message));
      } catch {
        i = "unknown_error";
      }
      switch (
        ((null == s ? void 0 : s.includes("contentType")) &&
          s.includes("is not allowed") &&
          (i = "content_type_not_allowed"),
        i)
      ) {
        case "store_suspended":
          a = new v();
          break;
        case "forbidden":
          a = new f();
          break;
        case "content_type_not_allowed":
          a = new g(s);
          break;
        case "not_found":
          a = new b();
          break;
        case "store_not_found":
          a = new x();
          break;
        case "bad_request":
          a = new u(null != s ? s : "Bad request");
          break;
        case "service_unavailable":
          a = new j();
          break;
        case "rate_limited":
          a = A(e);
          break;
        default:
          a = new y();
      }
      return { code: i, error: a };
    }
    async function I(e, t, n) {
      let r = S(),
        a = c(n),
        o = M(),
        [, , , l = ""] = a.split("_"),
        u = `${l}:${Date.now()}:${Math.random().toString(16).slice(2)}`,
        d = 0,
        h = await (0, s.default)(
          async (n) => {
            let s;
            try {
              s = await i(N(e), {
                ...t,
                headers: {
                  "x-api-blob-request-id": u,
                  "x-api-blob-request-attempt": String(d),
                  "x-api-version": r,
                  authorization: `Bearer ${a}`,
                  ...o,
                  ...t.headers,
                },
              });
            } catch (e) {
              if (e instanceof DOMException && "AbortError" === e.name)
                return void n(new C());
              throw e;
            }
            if (s.ok) return s;
            let { code: l, error: c } = await D(s);
            if (
              "unknown_error" === l ||
              "service_unavailable" === l ||
              "internal_server_error" === l
            )
              throw c;
            n(c);
          },
          {
            retries: E(),
            onRetry: (t) => {
              (p(`retrying API request to ${e}`, t.message), (d += 1));
            },
          },
        );
      if (!h) throw new y();
      return await h.json();
    }
    function M() {
      let e = {};
      try {
        "VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API" in r.default.env
          ? (e["x-proxy-through-alternative-api"] =
              r.default.env.VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API)
          : "NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API" in
              r.default.env &&
            (e["x-proxy-through-alternative-api"] =
              r.default.env.NEXT_PUBLIC_VERCEL_BLOB_PROXY_THROUGH_ALTERNATIVE_API);
      } catch {}
      return e;
    }
    var T = "x-cache-control-max-age",
      L = "x-add-random-suffix",
      P = "x-content-type";
    function R(e, t) {
      let n = {};
      return (
        e.includes("contentType") && t.contentType && (n[P] = t.contentType),
        e.includes("addRandomSuffix") &&
          void 0 !== t.addRandomSuffix &&
          (n[L] = t.addRandomSuffix ? "1" : "0"),
        e.includes("cacheControlMaxAge") &&
          void 0 !== t.cacheControlMaxAge &&
          (n[T] = t.cacheControlMaxAge.toString()),
        n
      );
    }
    async function F({ pathname: e, options: t, extraChecks: n, getToken: r }) {
      if (!e) throw new u("pathname is required");
      if (e.length > m)
        throw new u(`pathname is too long, maximum length is ${m}`);
      if (!t) throw new u("missing options, see usage");
      if ("public" !== t.access) throw new u('access must be "public"');
      return (n && n(t), r && (t.token = await r(e, t)), t);
    }
    function _({ allowedOptions: e, getToken: t, extraChecks: n }) {
      return async (r, i, s) => {
        let a = await F({
            pathname: r,
            options: s,
            extraChecks: n,
            getToken: t,
          }),
          o = R(e, a);
        return O({
          uploadId: a.uploadId,
          key: a.key,
          pathname: r,
          headers: o,
          options: a,
          parts: i,
        });
      };
    }
    async function O({
      uploadId: e,
      key: t,
      pathname: n,
      parts: r,
      headers: i,
      options: s,
    }) {
      try {
        let a = await I(
          `/mpu/${n}`,
          {
            method: "POST",
            headers: {
              ...i,
              "content-type": "application/json",
              "x-mpu-action": "complete",
              "x-mpu-upload-id": e,
              "x-mpu-key": encodeURI(t),
            },
            body: JSON.stringify(r),
            signal: s.abortSignal,
          },
          s,
        );
        return (p("mpu: complete", a), a);
      } catch (e) {
        if (
          e instanceof TypeError &&
          ("Failed to fetch" === e.message || "fetch failed" === e.message)
        )
          throw new j();
        throw e;
      }
    }
    function B({ allowedOptions: e, getToken: t, extraChecks: n }) {
      return async (r, i) => {
        let s = await F({
            pathname: r,
            options: i,
            extraChecks: n,
            getToken: t,
          }),
          a = R(e, s),
          o = await V(r, a, s);
        return { key: o.key, uploadId: o.uploadId };
      };
    }
    async function V(e, t, n) {
      p("mpu: create", "pathname:", e);
      try {
        let r = await I(
          `/mpu/${e}`,
          {
            method: "POST",
            headers: { ...t, "x-mpu-action": "create" },
            signal: n.abortSignal,
          },
          n,
        );
        return (p("mpu: create", r), r);
      } catch (e) {
        if (
          e instanceof TypeError &&
          ("Failed to fetch" === e.message || "fetch failed" === e.message)
        )
          throw new j();
        throw e;
      }
    }
    function z({ allowedOptions: e, getToken: t, extraChecks: n }) {
      return async (r, i, s) => {
        let a = await F({
            pathname: r,
            options: s,
            extraChecks: n,
            getToken: t,
          }),
          o = R(e, a);
        if (d(i))
          throw new u(
            "Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.",
          );
        return {
          etag: (
            await H({
              uploadId: a.uploadId,
              key: a.key,
              pathname: r,
              part: { blob: i, partNumber: a.partNumber },
              headers: o,
              options: a,
            })
          ).etag,
          partNumber: a.partNumber,
        };
      };
    }
    async function H({
      uploadId: e,
      key: t,
      pathname: n,
      headers: r,
      options: i,
      internalAbortController: s = new AbortController(),
      part: a,
    }) {
      var o, l, c;
      let u = I(
        `/mpu/${n}`,
        {
          signal: s.signal,
          method: "POST",
          headers: {
            ...r,
            "x-mpu-action": "upload",
            "x-mpu-key": encodeURI(t),
            "x-mpu-upload-id": e,
            "x-mpu-part-number": a.partNumber.toString(),
          },
          body: a.blob,
          duplex: "half",
        },
        i,
      );
      function d() {
        s.abort();
      }
      (null == (o = i.abortSignal) ? void 0 : o.aborted)
        ? d()
        : null == (l = i.abortSignal) || l.addEventListener("abort", d);
      let h = await u;
      return (
        null == (c = i.abortSignal) || c.removeEventListener("abort", d),
        h
      );
    }
    var $ = "undefined" != typeof window ? 6 : 8,
      U = 8388608,
      G = 8388608 * $ * 2;
    function W({
      uploadId: e,
      key: t,
      pathname: n,
      stream: r,
      headers: i,
      options: s,
    }) {
      p("mpu: upload init", "key:", t);
      let o = new AbortController();
      return new Promise((l, c) => {
        let u = [],
          d = [],
          h = r.getReader(),
          m = 0,
          f = !1,
          g = 1,
          x = !1,
          v = 0,
          y = !1,
          b = 0,
          w = [],
          C = 0;
        async function k() {
          for (
            p(
              "mpu: upload read start",
              "activeUploads:",
              m,
              "currentBytesInMemory:",
              `${(0, a.default)(v)}/${(0, a.default)(G)}`,
              "bytesSent:",
              (0, a.default)(b),
            ),
              f = !0;
            v < G && !x;

          )
            try {
              let { value: e, done: t } = await h.read();
              if (t) {
                ((y = !0),
                  p("mpu: upload read consumed the whole stream"),
                  w.length > 0 &&
                    (u.push({
                      partNumber: g++,
                      blob: new Blob(w, { type: "application/octet-stream" }),
                    }),
                    N()),
                  (f = !1));
                return;
              }
              v += e.byteLength;
              let n = 0;
              for (; n < e.byteLength; ) {
                let t = U - C,
                  r = Math.min(n + t, e.byteLength),
                  i = e.slice(n, r);
                (w.push(i),
                  (C += i.byteLength),
                  (n = r),
                  C === U &&
                    (u.push({
                      partNumber: g++,
                      blob: new Blob(w, { type: "application/octet-stream" }),
                    }),
                    (w = []),
                    (C = 0),
                    N()));
              }
            } catch (e) {
              E(e);
            }
          (p(
            "mpu: upload read end",
            "activeUploads:",
            m,
            "currentBytesInMemory:",
            `${(0, a.default)(v)}/${(0, a.default)(G)}`,
            "bytesSent:",
            (0, a.default)(b),
          ),
            (f = !1));
        }
        async function S(r) {
          (m++,
            p(
              "mpu: upload send part start",
              "partNumber:",
              r.partNumber,
              "size:",
              r.blob.size,
              "activeUploads:",
              m,
              "currentBytesInMemory:",
              `${(0, a.default)(v)}/${(0, a.default)(G)}`,
              "bytesSent:",
              (0, a.default)(b),
            ));
          try {
            let c = await H({
              uploadId: e,
              key: t,
              pathname: n,
              headers: i,
              options: s,
              internalAbortController: o,
              part: r,
            });
            if (
              (p(
                "mpu: upload send part end",
                "partNumber:",
                r.partNumber,
                "activeUploads",
                m,
                "currentBytesInMemory:",
                `${(0, a.default)(v)}/${(0, a.default)(G)}`,
                "bytesSent:",
                (0, a.default)(b),
              ),
              x)
            )
              return;
            if (
              (d.push({ partNumber: r.partNumber, etag: c.etag }),
              (v -= r.blob.size),
              m--,
              (b += r.blob.size),
              u.length > 0 && N(),
              y)
            ) {
              0 === m && (h.releaseLock(), l(d));
              return;
            }
            f || k().catch(E);
          } catch (e) {
            E(e);
          }
        }
        function N() {
          if (!x)
            for (
              p("send parts", "activeUploads", m, "partsToUpload", u.length);
              m < $ && u.length > 0;

            ) {
              let e = u.shift();
              e && S(e);
            }
        }
        function E(e) {
          x ||
            ((x = !0),
            o.abort(),
            h.releaseLock(),
            e instanceof TypeError &&
            ("Failed to fetch" === e.message || "fetch failed" === e.message)
              ? c(new j())
              : c(e));
        }
        k().catch(E);
      });
    }
    function q(e) {
      let t;
      return e instanceof ReadableStream
        ? e
        : e instanceof Blob
          ? e.stream()
          : Z(e)
            ? o.toWeb(e)
            : ((t = e instanceof ArrayBuffer ? e : Y(e) ? e.buffer : K(e)),
              new ReadableStream({
                start(e) {
                  (e.enqueue(t), e.close());
                },
              }));
    }
    function Z(e) {
      return (
        "object" == typeof e &&
        "function" == typeof e.pipe &&
        e.readable &&
        "function" == typeof e._read &&
        "object" == typeof e._readableState
      );
    }
    function K(e) {
      return new TextEncoder().encode(e);
    }
    function Y(e) {
      return (0, l.default)(e);
    }
    async function J(e, t, n, r) {
      p("mpu: init", "pathname:", e, "headers:", n);
      let i = q(t),
        s = await V(e, n, r),
        a = await W({
          uploadId: s.uploadId,
          key: s.key,
          pathname: e,
          stream: i,
          headers: n,
          options: r,
        });
      return await O({
        uploadId: s.uploadId,
        key: s.key,
        pathname: e,
        parts: a,
        headers: n,
        options: r,
      });
    }
    function Q({ allowedOptions: e, getToken: t, extraChecks: n }) {
      return async function (r, i, s) {
        if (!i) throw new u("body is required");
        if (d(i))
          throw new u(
            "Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.",
          );
        let a = await F({
            pathname: r,
            options: s,
            extraChecks: n,
            getToken: t,
          }),
          o = R(e, a);
        if (!0 === a.multipart) return J(r, i, o, a);
        let l = await I(
          `/${r}`,
          {
            method: "PUT",
            body: i,
            headers: o,
            duplex: "half",
            signal: a.abortSignal,
          },
          a,
        );
        return {
          url: l.url,
          downloadUrl: l.downloadUrl,
          pathname: l.pathname,
          contentType: l.contentType,
          contentDisposition: l.contentDisposition,
        };
      };
    }
    function X({ allowedOptions: e, getToken: t, extraChecks: n }) {
      return async (r, i) => {
        let s = await F({
            pathname: r,
            options: i,
            extraChecks: n,
            getToken: t,
          }),
          a = R(e, s),
          o = await V(r, a, s);
        return {
          key: o.key,
          uploadId: o.uploadId,
          async uploadPart(e, t) {
            if (d(t))
              throw new u(
                "Body must be a string, buffer or stream. You sent a plain JavaScript object, double check what you're trying to upload.",
              );
            return {
              etag: (
                await H({
                  uploadId: o.uploadId,
                  key: o.key,
                  pathname: r,
                  part: { partNumber: e, blob: t },
                  headers: a,
                  options: s,
                })
              ).etag,
              partNumber: e,
            };
          },
          complete: async (e) =>
            O({
              uploadId: o.uploadId,
              key: o.key,
              pathname: r,
              parts: e,
              headers: a,
              options: s,
            }),
        };
      };
    }
    async function ee(e, t = {}) {
      let n = e.endsWith("/") ? e : `${e}/`,
        r = {};
      r[L] = "0";
      let i = await I(
        `/${n}`,
        { method: "PUT", headers: r, signal: t.abortSignal },
        t,
      );
      return { url: i.url, pathname: i.pathname };
    }
    function et(e) {
      return function (t) {
        if ("undefined" == typeof window)
          throw new u(`${e} must be called from a client environment`);
        if (!t.token.startsWith("vercel_blob_client_"))
          throw new u(`${e} must be called with a client token`);
        if (void 0 !== t.addRandomSuffix || void 0 !== t.cacheControlMaxAge)
          throw new u(
            `${e} doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.`,
          );
      };
    }
    (e.s(
      [
        "BlobContentTypeNotAllowed",
        () => g,
        "BlobError",
        () => u,
        "createCompleteMultipartUploadMethod",
        () => _,
        "createCreateMultipartUploadMethod",
        () => B,
        "createCreateMultipartUploaderMethod",
        () => X,
        "createFolder",
        () => ee,
        "createPutMethod",
        () => Q,
        "createUploadPartMethod",
        () => z,
        "getTokenFromOptionsOrEnv",
        () => c,
      ],
      228495,
    ),
      Q({ allowedOptions: ["contentType"], extraChecks: et("client/`put`") }),
      B({
        allowedOptions: ["contentType"],
        extraChecks: et("client/`createMultipartUpload`"),
      }),
      X({
        allowedOptions: ["contentType"],
        extraChecks: et("client/`createMultipartUpload`"),
      }),
      z({
        allowedOptions: ["contentType"],
        extraChecks: et("client/`multipartUpload`"),
      }),
      _({
        allowedOptions: ["contentType"],
        extraChecks: et("client/`completeMultipartUpload`"),
      }));
    var en = Q({
        allowedOptions: ["contentType"],
        extraChecks(e) {
          if ("undefined" == typeof window)
            throw new u(
              "client/`upload` must be called from a client environment",
            );
          if (void 0 === e.handleUploadUrl)
            throw new u(
              "client/`upload` requires the 'handleUploadUrl' parameter",
            );
          if (void 0 !== e.addRandomSuffix || void 0 !== e.cacheControlMaxAge)
            throw new u(
              "client/`upload` doesn't allow addRandomSuffix and cacheControlMaxAge. Configure these options at the server side when generating client tokens.",
            );
        },
        async getToken(e, t) {
          var n, r;
          return ei({
            handleUploadUrl: t.handleUploadUrl,
            pathname: e,
            clientPayload: null != (n = t.clientPayload) ? n : null,
            multipart: null != (r = t.multipart) && r,
          });
        },
      }),
      er = "blob.generate-client-token";
    async function ei(e) {
      let { handleUploadUrl: t, pathname: n } = e,
        r = ea(t) ? t : es(t),
        s = {
          type: er,
          payload: {
            pathname: n,
            callbackUrl: r,
            clientPayload: e.clientPayload,
            multipart: e.multipart,
          },
        },
        a = await i(r, {
          method: "POST",
          body: JSON.stringify(s),
          headers: { "content-type": "application/json" },
          signal: e.abortSignal,
        });
      if (!a.ok) throw new u("Failed to  retrieve the client token");
      try {
        let { clientToken: e } = await a.json();
        return e;
      } catch (e) {
        throw new u("Failed to retrieve the client token");
      }
    }
    function es(e) {
      return new URL(e, window.location.href).href;
    }
    function ea(e) {
      try {
        return (new URL(e), !0);
      } catch (e) {
        return !1;
      }
    }
    e.s(["upload", () => en], 547763);
    var eo = e.i(919012),
      el = (0, eo.createServerReference)(
        "4092fa2066f3d0db621b4381c140b1b68ca702d796",
        eo.callServer,
        void 0,
        eo.findSourceMapURL,
        "importChat",
      );
    e.s(["importChat", () => el], 778625);
  },
  599568,
  (e) => {
    e.v(
      e.b([
        "static/chunks/d460a422ace39e7b.js",
        "static/chunks/turbopack-d6296fd75e550afb.js",
      ]),
    );
  },
  380105,
  890374,
  924804,
  614346,
  79259,
  222199,
  (e) => {
    "use strict";
    e.s(["MultiFileCode", () => eK], 380105);
    var t = e.i(324834),
      n = e.i(900050),
      r = e.i(227308),
      i = e.i(696871),
      s = e.i(17514),
      a = e.i(576191),
      o = e.i(176248),
      l = e.i(820092),
      c = e.i(151277),
      u = e.i(802008),
      d = e.i(561820),
      h = e.i(383790),
      p = e.i(569175),
      m = e.i(304649),
      f = e.i(926224),
      g = e.i(695444),
      x = e.i(638041),
      v = e.i(882526),
      y = e.i(788018),
      b = e.i(223215),
      j = e.i(313595),
      w = e.i(44756),
      C = e.i(934994),
      k = e.i(804089),
      S = e.i(811140),
      N = e.i(840030),
      E = e.i(951993),
      A = e.i(818845),
      D = e.i(894906),
      I = e.i(355805),
      M = e.i(453609),
      T = e.i(519738),
      L = e.i(449381),
      P = I,
      R = e.i(547763),
      F = a,
      _ = e.i(323194);
    e.i(563948);
    var O = e.i(407562),
      B = R,
      V = e.i(564997),
      z = e.i(226368),
      H = e.i(778625),
      $ = e.i(246300),
      U = e.i(577745);
    function G(e) {
      let t = "string" == typeof e ? e.length : e.charCount,
        n = 0.297 * t;
      return (t > 5e3 && (n += 1379.14), Math.floor(n));
    }
    function W(e) {
      return Math.round(4 * e * (1 / 0.9));
    }
    function q(e) {
      return Math.round((e / 1048576) * 1334);
    }
    function Z(e) {
      return q("number" == typeof e ? e : e.size);
    }
    e.s(
      [
        "estimateChars",
        () => W,
        "estimateTokensForImageAttachments",
        () => Z,
        "estimateTokensForString",
        () => G,
      ],
      890374,
    );
    var K = e.i(418625);
    let Y = {
      attachmentMaxSizeBytes: 3932160,
      contextWindow: 199999,
      image: {
        maxSizeBytes: 3932160,
        maxDimensionsPixels: { short: 8e3, long: 8e3 },
        maxPerChat: 20,
      },
    };
    function J() {
      let { data: e } = (0, K.default)("model-config");
      return e ?? Y;
    }
    e.s(["useModelConfig", () => J], 924804);
    var Q = e.i(53223),
      X = e.i(663963),
      ee = e.i(228495),
      ee = ee,
      et = e.i(667660);
    function en(e) {
      return new DataView(e.buffer, e.byteOffset);
    }
    e.i(962866);
    let er = {
        len: 1,
        get: (e, t) => en(e).getUint8(t),
        put: (e, t, n) => (en(e).setUint8(t, n), t + 1),
      },
      ei = {
        len: 2,
        get: (e, t) => en(e).getUint16(t, !0),
        put: (e, t, n) => (en(e).setUint16(t, n, !0), t + 2),
      },
      es = {
        len: 2,
        get: (e, t) => en(e).getUint16(t),
        put: (e, t, n) => (en(e).setUint16(t, n), t + 2),
      },
      ea = {
        len: 4,
        get: (e, t) => en(e).getUint32(t, !0),
        put: (e, t, n) => (en(e).setUint32(t, n, !0), t + 4),
      },
      eo = {
        len: 4,
        get: (e, t) => en(e).getUint32(t),
        put: (e, t, n) => (en(e).setUint32(t, n), t + 4),
      },
      el = {
        len: 4,
        get: (e, t) => en(e).getInt32(t),
        put: (e, t, n) => (en(e).setInt32(t, n), t + 4),
      },
      ec = {
        len: 8,
        get: (e, t) => en(e).getBigUint64(t, !0),
        put: (e, t, n) => (en(e).setBigUint64(t, n, !0), t + 8),
      };
    class eu {
      constructor(e, t) {
        ((this.len = e),
          (this.encoding = t),
          (this.textDecoder = new TextDecoder(t)));
      }
      get(e, t) {
        return this.textDecoder.decode(e.subarray(t, t + this.len));
      }
    }
    let ed = "End-Of-Stream";
    class eh extends Error {
      constructor() {
        super(ed);
      }
    }
    class ep {
      constructor() {
        ((this.maxStreamReadSize = 1048576),
          (this.endOfStream = !1),
          (this.peekQueue = []));
      }
      async peek(e, t, n) {
        let r = await this.read(e, t, n);
        return (this.peekQueue.push(e.subarray(t, t + r)), r);
      }
      async read(e, t, n) {
        if (0 === n) return 0;
        let r = this.readFromPeekBuffer(e, t, n);
        if (0 === (r += await this.readRemainderFromStream(e, t + r, n - r)))
          throw new eh();
        return r;
      }
      readFromPeekBuffer(e, t, n) {
        let r = n,
          i = 0;
        for (; this.peekQueue.length > 0 && r > 0; ) {
          let n = this.peekQueue.pop();
          if (!n) throw Error("peekData should be defined");
          let s = Math.min(n.length, r);
          (e.set(n.subarray(0, s), t + i),
            (i += s),
            (r -= s),
            s < n.length && this.peekQueue.push(n.subarray(s)));
        }
        return i;
      }
      async readRemainderFromStream(e, t, n) {
        let r = n,
          i = 0;
        for (; r > 0 && !this.endOfStream; ) {
          let n = Math.min(r, this.maxStreamReadSize),
            s = await this.readFromStream(e, t + i, n);
          if (0 === s) break;
          ((i += s), (r -= s));
        }
        return i;
      }
    }
    class em extends ep {
      constructor(e) {
        (super(), (this.reader = e.getReader({ mode: "byob" })));
      }
      async readFromStream(e, t, n) {
        if (this.endOfStream) throw new eh();
        let r = await this.reader.read(new Uint8Array(n));
        return (r.done && (this.endOfStream = r.done), r.value)
          ? (e.set(r.value, t), r.value.byteLength)
          : 0;
      }
    }
    class ef {
      constructor(e) {
        ((this.position = 0),
          (this.numBuffer = new Uint8Array(8)),
          (this.fileInfo = e?.fileInfo ?? {}),
          (this.onClose = e?.onClose));
      }
      async readToken(e, t = this.position) {
        let n = new Uint8Array(e.len);
        if ((await this.readBuffer(n, { position: t })) < e.len) throw new eh();
        return e.get(n, 0);
      }
      async peekToken(e, t = this.position) {
        let n = new Uint8Array(e.len);
        if ((await this.peekBuffer(n, { position: t })) < e.len) throw new eh();
        return e.get(n, 0);
      }
      async readNumber(e) {
        if ((await this.readBuffer(this.numBuffer, { length: e.len })) < e.len)
          throw new eh();
        return e.get(this.numBuffer, 0);
      }
      async peekNumber(e) {
        if ((await this.peekBuffer(this.numBuffer, { length: e.len })) < e.len)
          throw new eh();
        return e.get(this.numBuffer, 0);
      }
      async ignore(e) {
        if (void 0 !== this.fileInfo.size) {
          let t = this.fileInfo.size - this.position;
          if (e > t) return ((this.position += t), t);
        }
        return ((this.position += e), e);
      }
      async close() {
        await this.onClose?.();
      }
      normalizeOptions(e, t) {
        if (t && void 0 !== t.position && t.position < this.position)
          throw Error(
            "`options.position` must be equal or greater than `tokenizer.position`",
          );
        return t
          ? {
              mayBeLess: !0 === t.mayBeLess,
              offset: t.offset ? t.offset : 0,
              length: t.length
                ? t.length
                : e.length - (t.offset ? t.offset : 0),
              position: t.position ? t.position : this.position,
            }
          : {
              mayBeLess: !1,
              offset: 0,
              length: e.length,
              position: this.position,
            };
      }
    }
    let eg = 256e3;
    class ex extends ef {
      constructor(e, t) {
        (super(t), (this.streamReader = e));
      }
      async readBuffer(e, t) {
        let n = this.normalizeOptions(e, t),
          r = n.position - this.position;
        if (r > 0) return (await this.ignore(r), this.readBuffer(e, t));
        if (r < 0)
          throw Error(
            "`options.position` must be equal or greater than `tokenizer.position`",
          );
        if (0 === n.length) return 0;
        let i = await this.streamReader.read(e, n.offset, n.length);
        if (((this.position += i), (!t || !t.mayBeLess) && i < n.length))
          throw new eh();
        return i;
      }
      async peekBuffer(e, t) {
        let n = this.normalizeOptions(e, t),
          r = 0;
        if (n.position) {
          let t = n.position - this.position;
          if (t > 0) {
            let i = new Uint8Array(n.length + t);
            return (
              (r = await this.peekBuffer(i, { mayBeLess: n.mayBeLess })),
              e.set(i.subarray(t), n.offset),
              r - t
            );
          }
          if (t < 0)
            throw Error("Cannot peek from a negative offset in a stream");
        }
        if (n.length > 0) {
          try {
            r = await this.streamReader.peek(e, n.offset, n.length);
          } catch (e) {
            if (t?.mayBeLess && e instanceof eh) return 0;
            throw e;
          }
          if (!n.mayBeLess && r < n.length) throw new eh();
        }
        return r;
      }
      async ignore(e) {
        let t = Math.min(eg, e),
          n = new Uint8Array(t),
          r = 0;
        for (; r < e; ) {
          let i = e - r,
            s = await this.readBuffer(n, { length: Math.min(t, i) });
          if (s < 0) return s;
          r += s;
        }
        return r;
      }
    }
    class ev extends ef {
      constructor(e, t) {
        (super(t),
          (this.uint8Array = e),
          (this.fileInfo.size = this.fileInfo.size
            ? this.fileInfo.size
            : e.length));
      }
      async readBuffer(e, t) {
        if (t?.position) {
          if (t.position < this.position)
            throw Error(
              "`options.position` must be equal or greater than `tokenizer.position`",
            );
          this.position = t.position;
        }
        let n = await this.peekBuffer(e, t);
        return ((this.position += n), n);
      }
      async peekBuffer(e, t) {
        let n = this.normalizeOptions(e, t),
          r = Math.min(this.uint8Array.length - n.position, n.length);
        if (!n.mayBeLess && r < n.length) throw new eh();
        return (
          e.set(this.uint8Array.subarray(n.position, n.position + r), n.offset),
          r
        );
      }
      close() {
        return super.close();
      }
    }
    function ey(e, t) {
      return new ex(new em(e), t);
    }
    function eb(e, t) {
      return new ev(e, t);
    }
    function ej(e) {
      let { byteLength: t } = e;
      return 6 === t
        ? 0x100000000 * e.getUint16(0) + e.getUint32(2)
        : 5 === t
          ? 0x100000000 * e.getUint8(0) + e.getUint32(1)
          : 4 === t
            ? e.getUint32(0)
            : 3 === t
              ? 65536 * e.getUint8(0) + e.getUint16(1)
              : 2 === t
                ? e.getUint16(0)
                : 1 === t
                  ? e.getUint8(0)
                  : void 0;
    }
    function ew(e, t) {
      let n = e.length,
        r = t.length;
      if (0 === r || r > n) return -1;
      let i = n - r;
      for (let n = 0; n <= i; n++) {
        let i = !0;
        for (let s = 0; s < r; s++)
          if (e[n + s] !== t[s]) {
            i = !1;
            break;
          }
        if (i) return n;
      }
      return -1;
    }
    function eC(e, t) {
      return -1 !== ew(e, t);
    }
    function ek(e) {
      return [...e].map((e) => e.charCodeAt(0));
    }
    function eS(e, t = 0) {
      let n = Number.parseInt(
        new eu(6).get(e, 148).replace(/\0.*$/, "").trim(),
        8,
      );
      if (Number.isNaN(n)) return !1;
      let r = 256;
      for (let n = t; n < t + 148; n++) r += e[n];
      for (let n = t + 156; n < t + 512; n++) r += e[n];
      return n === r;
    }
    (Object.prototype.toString,
      new globalThis.TextDecoder("utf8"),
      new globalThis.TextEncoder(),
      Array.from({ length: 256 }, (e, t) => t.toString(16).padStart(2, "0")));
    let eN = {
        get: (e, t) =>
          (127 & e[t + 3]) | (e[t + 2] << 7) | (e[t + 1] << 14) | (e[t] << 21),
        len: 4,
      },
      eE = [
        "jpg",
        "png",
        "apng",
        "gif",
        "webp",
        "flif",
        "xcf",
        "cr2",
        "cr3",
        "orf",
        "arw",
        "dng",
        "nef",
        "rw2",
        "raf",
        "tif",
        "bmp",
        "icns",
        "jxr",
        "psd",
        "indd",
        "zip",
        "tar",
        "rar",
        "gz",
        "bz2",
        "7z",
        "dmg",
        "mp4",
        "mid",
        "mkv",
        "webm",
        "mov",
        "avi",
        "mpg",
        "mp2",
        "mp3",
        "m4a",
        "oga",
        "ogg",
        "ogv",
        "opus",
        "flac",
        "wav",
        "spx",
        "amr",
        "pdf",
        "epub",
        "elf",
        "macho",
        "exe",
        "swf",
        "rtf",
        "wasm",
        "woff",
        "woff2",
        "eot",
        "ttf",
        "otf",
        "ico",
        "flv",
        "ps",
        "xz",
        "sqlite",
        "nes",
        "crx",
        "xpi",
        "cab",
        "deb",
        "ar",
        "rpm",
        "Z",
        "lz",
        "cfb",
        "mxf",
        "mts",
        "blend",
        "bpg",
        "docx",
        "pptx",
        "xlsx",
        "3gp",
        "3g2",
        "j2c",
        "jp2",
        "jpm",
        "jpx",
        "mj2",
        "aif",
        "qcp",
        "odt",
        "ods",
        "odp",
        "xml",
        "mobi",
        "heic",
        "cur",
        "ktx",
        "ape",
        "wv",
        "dcm",
        "ics",
        "glb",
        "pcap",
        "dsf",
        "lnk",
        "alias",
        "voc",
        "ac3",
        "m4v",
        "m4p",
        "m4b",
        "f4v",
        "f4p",
        "f4b",
        "f4a",
        "mie",
        "asf",
        "ogm",
        "ogx",
        "mpc",
        "arrow",
        "shp",
        "aac",
        "mp1",
        "it",
        "s3m",
        "xm",
        "ai",
        "skp",
        "avif",
        "eps",
        "lzh",
        "pgp",
        "asar",
        "stl",
        "chm",
        "3mf",
        "zst",
        "jxl",
        "vcf",
        "jls",
        "pst",
        "dwg",
        "parquet",
        "class",
        "arj",
        "cpio",
        "ace",
        "avro",
        "icc",
        "fbx",
        "vsdx",
        "vtt",
      ],
      eA = 4100;
    async function eD(e) {
      return new eM().fromBuffer(e);
    }
    function eI(e, t, n) {
      for (let [r, i] of ((n = { offset: 0, ...n }), t.entries()))
        if (n.mask) {
          if (i !== (n.mask[r] & e[r + n.offset])) return !1;
        } else if (i !== e[r + n.offset]) return !1;
      return !0;
    }
    class eM {
      constructor(e) {
        ((this.detectors = e?.customDetectors),
          (this.fromTokenizer = this.fromTokenizer.bind(this)),
          (this.fromBuffer = this.fromBuffer.bind(this)),
          (this.parse = this.parse.bind(this)));
      }
      async fromTokenizer(e) {
        let t = e.position;
        for (let n of this.detectors || []) {
          let r = await n(e);
          if (r) return r;
          if (t !== e.position) return;
        }
        return this.parse(e);
      }
      async fromBuffer(e) {
        if (!(e instanceof Uint8Array || e instanceof ArrayBuffer))
          throw TypeError(
            `Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``,
          );
        let t = e instanceof Uint8Array ? e : new Uint8Array(e);
        if (t?.length > 1) return this.fromTokenizer(eb(t));
      }
      async fromBlob(e) {
        return this.fromStream(e.stream());
      }
      async fromStream(e) {
        let t = await ey(e);
        try {
          return await this.fromTokenizer(t);
        } finally {
          await t.close();
        }
      }
      async toDetectionStream(e, t) {
        let n,
          r,
          { sampleSize: i = eA } = t,
          s = e.getReader({ mode: "byob" });
        try {
          let { value: e, done: t } = await s.read(new Uint8Array(i));
          if (((r = e), !t && e))
            try {
              n = await this.fromBuffer(e.slice(0, i));
            } catch (e) {
              if (!(e instanceof eh)) throw e;
              n = void 0;
            }
          r = e;
        } finally {
          s.releaseLock();
        }
        let a = new TransformStream({
            async start(e) {
              e.enqueue(r);
            },
            transform(e, t) {
              t.enqueue(e);
            },
          }),
          o = e.pipeThrough(a);
        return ((o.fileType = n), o);
      }
      check(e, t) {
        return eI(this.buffer, e, t);
      }
      checkString(e, t) {
        return this.check(ek(e), t);
      }
      async parse(e) {
        if (
          ((this.buffer = new Uint8Array(eA)),
          void 0 === e.fileInfo.size &&
            (e.fileInfo.size = Number.MAX_SAFE_INTEGER),
          (this.tokenizer = e),
          await e.peekBuffer(this.buffer, { length: 12, mayBeLess: !0 }),
          this.check([66, 77]))
        )
          return { ext: "bmp", mime: "image/bmp" };
        if (this.check([11, 119]))
          return { ext: "ac3", mime: "audio/vnd.dolby.dd-raw" };
        if (this.check([120, 1]))
          return { ext: "dmg", mime: "application/x-apple-diskimage" };
        if (this.check([77, 90]))
          return { ext: "exe", mime: "application/x-msdownload" };
        if (this.check([37, 33]))
          return (await e.peekBuffer(this.buffer, {
            length: 24,
            mayBeLess: !0,
          }),
          this.checkString("PS-Adobe-", { offset: 2 }) &&
            this.checkString(" EPSF-", { offset: 14 }))
            ? { ext: "eps", mime: "application/eps" }
            : { ext: "ps", mime: "application/postscript" };
        if (this.check([31, 160]) || this.check([31, 157]))
          return { ext: "Z", mime: "application/x-compress" };
        if (this.check([199, 113]))
          return { ext: "cpio", mime: "application/x-cpio" };
        if (this.check([96, 234]))
          return { ext: "arj", mime: "application/x-arj" };
        if (this.check([239, 187, 191]))
          return (this.tokenizer.ignore(3), this.parse(e));
        if (this.check([71, 73, 70])) return { ext: "gif", mime: "image/gif" };
        if (this.check([73, 73, 188]))
          return { ext: "jxr", mime: "image/vnd.ms-photo" };
        if (this.check([31, 139, 8]))
          return { ext: "gz", mime: "application/gzip" };
        if (this.check([66, 90, 104]))
          return { ext: "bz2", mime: "application/x-bzip2" };
        if (this.checkString("ID3")) {
          await e.ignore(6);
          let t = await e.readToken(eN);
          return e.position + t > e.fileInfo.size
            ? { ext: "mp3", mime: "audio/mpeg" }
            : (await e.ignore(t), this.fromTokenizer(e));
        }
        if (this.checkString("MP+"))
          return { ext: "mpc", mime: "audio/x-musepack" };
        if (
          (67 === this.buffer[0] || 70 === this.buffer[0]) &&
          this.check([87, 83], { offset: 1 })
        )
          return { ext: "swf", mime: "application/x-shockwave-flash" };
        if (this.check([255, 216, 255]))
          return this.check([247], { offset: 3 })
            ? { ext: "jls", mime: "image/jls" }
            : { ext: "jpg", mime: "image/jpeg" };
        if (this.check([79, 98, 106, 1]))
          return { ext: "avro", mime: "application/avro" };
        if (this.checkString("FLIF"))
          return { ext: "flif", mime: "image/flif" };
        if (this.checkString("8BPS"))
          return { ext: "psd", mime: "image/vnd.adobe.photoshop" };
        if (this.checkString("WEBP", { offset: 8 }))
          return { ext: "webp", mime: "image/webp" };
        if (this.checkString("MPCK"))
          return { ext: "mpc", mime: "audio/x-musepack" };
        if (this.checkString("FORM")) return { ext: "aif", mime: "audio/aiff" };
        if (this.checkString("icns", { offset: 0 }))
          return { ext: "icns", mime: "image/icns" };
        if (this.check([80, 75, 3, 4])) {
          try {
            for (; e.position + 30 < e.fileInfo.size; ) {
              await e.readBuffer(this.buffer, { length: 30 });
              let t = new DataView(this.buffer.buffer),
                n = {
                  compressedSize: t.getUint32(18, !0),
                  uncompressedSize: t.getUint32(22, !0),
                  filenameLength: t.getUint16(26, !0),
                  extraFieldLength: t.getUint16(28, !0),
                };
              if (
                ((n.filename = await e.readToken(
                  new eu(n.filenameLength, "utf-8"),
                )),
                await e.ignore(n.extraFieldLength),
                "META-INF/mozilla.rsa" === n.filename)
              )
                return { ext: "xpi", mime: "application/x-xpinstall" };
              if (n.filename.endsWith(".rels") || n.filename.endsWith(".xml"))
                switch (n.filename.split("/")[0]) {
                  case "_rels":
                    break;
                  case "word":
                    return {
                      ext: "docx",
                      mime: "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                    };
                  case "ppt":
                    return {
                      ext: "pptx",
                      mime: "application/vnd.openxmlformats-officedocument.presentationml.presentation",
                    };
                  case "xl":
                    return {
                      ext: "xlsx",
                      mime: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
                    };
                  case "visio":
                    return { ext: "vsdx", mime: "application/vnd.visio" };
                }
              if (n.filename.startsWith("xl/"))
                return {
                  ext: "xlsx",
                  mime: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
                };
              if (n.filename.startsWith("3D/") && n.filename.endsWith(".model"))
                return { ext: "3mf", mime: "model/3mf" };
              if (
                "mimetype" === n.filename &&
                n.compressedSize === n.uncompressedSize
              ) {
                let t = await e.readToken(new eu(n.compressedSize, "utf-8"));
                switch ((t = t.trim())) {
                  case "application/epub+zip":
                    return { ext: "epub", mime: "application/epub+zip" };
                  case "application/vnd.oasis.opendocument.text":
                    return {
                      ext: "odt",
                      mime: "application/vnd.oasis.opendocument.text",
                    };
                  case "application/vnd.oasis.opendocument.spreadsheet":
                    return {
                      ext: "ods",
                      mime: "application/vnd.oasis.opendocument.spreadsheet",
                    };
                  case "application/vnd.oasis.opendocument.presentation":
                    return {
                      ext: "odp",
                      mime: "application/vnd.oasis.opendocument.presentation",
                    };
                }
              }
              if (0 === n.compressedSize) {
                let t = -1;
                for (; t < 0 && e.position < e.fileInfo.size; )
                  (await e.peekBuffer(this.buffer, { mayBeLess: !0 }),
                    (t = ew(this.buffer, new Uint8Array([80, 75, 3, 4]))),
                    await e.ignore(t >= 0 ? t : this.buffer.length));
              } else await e.ignore(n.compressedSize);
            }
          } catch (e) {
            if (!(e instanceof eh)) throw e;
          }
          return { ext: "zip", mime: "application/zip" };
        }
        if (this.checkString("OggS")) {
          await e.ignore(28);
          let t = new Uint8Array(8);
          return (await e.readBuffer(t),
          eI(t, [79, 112, 117, 115, 72, 101, 97, 100]))
            ? { ext: "opus", mime: "audio/opus" }
            : eI(t, [128, 116, 104, 101, 111, 114, 97])
              ? { ext: "ogv", mime: "video/ogg" }
              : eI(t, [1, 118, 105, 100, 101, 111, 0])
                ? { ext: "ogm", mime: "video/ogg" }
                : eI(t, [127, 70, 76, 65, 67])
                  ? { ext: "oga", mime: "audio/ogg" }
                  : eI(t, [83, 112, 101, 101, 120, 32, 32])
                    ? { ext: "spx", mime: "audio/ogg" }
                    : eI(t, [1, 118, 111, 114, 98, 105, 115])
                      ? { ext: "ogg", mime: "audio/ogg" }
                      : { ext: "ogx", mime: "application/ogg" };
        }
        if (
          this.check([80, 75]) &&
          (3 === this.buffer[2] ||
            5 === this.buffer[2] ||
            7 === this.buffer[2]) &&
          (4 === this.buffer[3] || 6 === this.buffer[3] || 8 === this.buffer[3])
        )
          return { ext: "zip", mime: "application/zip" };
        if (
          this.checkString("ftyp", { offset: 4 }) &&
          (96 & this.buffer[8]) != 0
        ) {
          let e = new eu(4, "latin1")
            .get(this.buffer, 8)
            .replace("\0", " ")
            .trim();
          switch (e) {
            case "avif":
            case "avis":
              return { ext: "avif", mime: "image/avif" };
            case "mif1":
              return { ext: "heic", mime: "image/heif" };
            case "msf1":
              return { ext: "heic", mime: "image/heif-sequence" };
            case "heic":
            case "heix":
              return { ext: "heic", mime: "image/heic" };
            case "hevc":
            case "hevx":
              return { ext: "heic", mime: "image/heic-sequence" };
            case "qt":
              return { ext: "mov", mime: "video/quicktime" };
            case "M4V":
            case "M4VH":
            case "M4VP":
              return { ext: "m4v", mime: "video/x-m4v" };
            case "M4P":
              return { ext: "m4p", mime: "video/mp4" };
            case "M4B":
              return { ext: "m4b", mime: "audio/mp4" };
            case "M4A":
              return { ext: "m4a", mime: "audio/x-m4a" };
            case "F4V":
              return { ext: "f4v", mime: "video/mp4" };
            case "F4P":
              return { ext: "f4p", mime: "video/mp4" };
            case "F4A":
              return { ext: "f4a", mime: "audio/mp4" };
            case "F4B":
              return { ext: "f4b", mime: "audio/mp4" };
            case "crx":
              return { ext: "cr3", mime: "image/x-canon-cr3" };
            default:
              if (e.startsWith("3g")) {
                if (e.startsWith("3g2"))
                  return { ext: "3g2", mime: "video/3gpp2" };
                return { ext: "3gp", mime: "video/3gpp" };
              }
              return { ext: "mp4", mime: "video/mp4" };
          }
        }
        if (this.checkString("MThd")) return { ext: "mid", mime: "audio/midi" };
        if (
          this.checkString("wOFF") &&
          (this.check([0, 1, 0, 0], { offset: 4 }) ||
            this.checkString("OTTO", { offset: 4 }))
        )
          return { ext: "woff", mime: "font/woff" };
        if (
          this.checkString("wOF2") &&
          (this.check([0, 1, 0, 0], { offset: 4 }) ||
            this.checkString("OTTO", { offset: 4 }))
        )
          return { ext: "woff2", mime: "font/woff2" };
        if (
          this.check([212, 195, 178, 161]) ||
          this.check([161, 178, 195, 212])
        )
          return { ext: "pcap", mime: "application/vnd.tcpdump.pcap" };
        if (this.checkString("DSD "))
          return { ext: "dsf", mime: "audio/x-dsf" };
        if (this.checkString("LZIP"))
          return { ext: "lz", mime: "application/x-lzip" };
        if (this.checkString("fLaC"))
          return { ext: "flac", mime: "audio/x-flac" };
        if (this.check([66, 80, 71, 251]))
          return { ext: "bpg", mime: "image/bpg" };
        if (this.checkString("wvpk"))
          return { ext: "wv", mime: "audio/wavpack" };
        if (this.checkString("%PDF")) {
          try {
            await e.ignore(1350);
            let t = 0xa00000,
              n = new Uint8Array(Math.min(t, e.fileInfo.size));
            if (
              (await e.readBuffer(n, { mayBeLess: !0 }),
              eC(n, new TextEncoder().encode("AIPrivateData")))
            )
              return { ext: "ai", mime: "application/postscript" };
          } catch (e) {
            if (!(e instanceof eh)) throw e;
          }
          return { ext: "pdf", mime: "application/pdf" };
        }
        if (this.check([0, 97, 115, 109]))
          return { ext: "wasm", mime: "application/wasm" };
        if (this.check([73, 73])) {
          let e = await this.readTiffHeader(!1);
          if (e) return e;
        }
        if (this.check([77, 77])) {
          let e = await this.readTiffHeader(!0);
          if (e) return e;
        }
        if (this.checkString("MAC ")) return { ext: "ape", mime: "audio/ape" };
        if (this.check([26, 69, 223, 163])) {
          async function t() {
            let t = await e.peekNumber(er),
              n = 128,
              r = 0;
            for (; (t & n) == 0 && 0 !== n; ) (++r, (n >>= 1));
            let i = new Uint8Array(r + 1);
            return (await e.readBuffer(i), i);
          }
          async function n() {
            let e = await t(),
              n = await t();
            n[0] ^= 128 >> (n.length - 1);
            let r = Math.min(6, n.length),
              i = new DataView(e.buffer),
              s = new DataView(n.buffer, n.length - r, r);
            return { id: ej(i), len: ej(s) };
          }
          async function r(t) {
            for (; t > 0; ) {
              let r = await n();
              if (17026 === r.id)
                return (await e.readToken(new eu(r.len))).replaceAll(
                  /\00.*$/g,
                  "",
                );
              (await e.ignore(r.len), --t);
            }
          }
          let i = await n();
          switch (await r(i.len)) {
            case "webm":
              return { ext: "webm", mime: "video/webm" };
            case "matroska":
              return { ext: "mkv", mime: "video/x-matroska" };
            default:
              return;
          }
        }
        if (this.check([82, 73, 70, 70])) {
          if (this.check([65, 86, 73], { offset: 8 }))
            return { ext: "avi", mime: "video/vnd.avi" };
          if (this.check([87, 65, 86, 69], { offset: 8 }))
            return { ext: "wav", mime: "audio/wav" };
          if (this.check([81, 76, 67, 77], { offset: 8 }))
            return { ext: "qcp", mime: "audio/qcelp" };
        }
        if (this.checkString("SQLi"))
          return { ext: "sqlite", mime: "application/x-sqlite3" };
        if (this.check([78, 69, 83, 26]))
          return { ext: "nes", mime: "application/x-nintendo-nes-rom" };
        if (this.checkString("Cr24"))
          return { ext: "crx", mime: "application/x-google-chrome-extension" };
        if (this.checkString("MSCF") || this.checkString("ISc("))
          return { ext: "cab", mime: "application/vnd.ms-cab-compressed" };
        if (this.check([237, 171, 238, 219]))
          return { ext: "rpm", mime: "application/x-rpm" };
        if (this.check([197, 208, 211, 198]))
          return { ext: "eps", mime: "application/eps" };
        if (this.check([40, 181, 47, 253]))
          return { ext: "zst", mime: "application/zstd" };
        if (this.check([127, 69, 76, 70]))
          return { ext: "elf", mime: "application/x-elf" };
        if (this.check([33, 66, 68, 78]))
          return { ext: "pst", mime: "application/vnd.ms-outlook" };
        if (this.checkString("PAR1"))
          return { ext: "parquet", mime: "application/x-parquet" };
        if (this.check([207, 250, 237, 254]))
          return { ext: "macho", mime: "application/x-mach-binary" };
        if (this.check([79, 84, 84, 79, 0]))
          return { ext: "otf", mime: "font/otf" };
        if (this.checkString("#!AMR")) return { ext: "amr", mime: "audio/amr" };
        if (this.checkString("{\\rtf"))
          return { ext: "rtf", mime: "application/rtf" };
        if (this.check([70, 76, 86, 1]))
          return { ext: "flv", mime: "video/x-flv" };
        if (this.checkString("IMPM")) return { ext: "it", mime: "audio/x-it" };
        if (
          this.checkString("-lh0-", { offset: 2 }) ||
          this.checkString("-lh1-", { offset: 2 }) ||
          this.checkString("-lh2-", { offset: 2 }) ||
          this.checkString("-lh3-", { offset: 2 }) ||
          this.checkString("-lh4-", { offset: 2 }) ||
          this.checkString("-lh5-", { offset: 2 }) ||
          this.checkString("-lh6-", { offset: 2 }) ||
          this.checkString("-lh7-", { offset: 2 }) ||
          this.checkString("-lzs-", { offset: 2 }) ||
          this.checkString("-lz4-", { offset: 2 }) ||
          this.checkString("-lz5-", { offset: 2 }) ||
          this.checkString("-lhd-", { offset: 2 })
        )
          return { ext: "lzh", mime: "application/x-lzh-compressed" };
        if (this.check([0, 0, 1, 186])) {
          if (this.check([33], { offset: 4, mask: [241] }))
            return { ext: "mpg", mime: "video/MP1S" };
          if (this.check([68], { offset: 4, mask: [196] }))
            return { ext: "mpg", mime: "video/MP2P" };
        }
        if (this.checkString("ITSF"))
          return { ext: "chm", mime: "application/vnd.ms-htmlhelp" };
        if (this.check([202, 254, 186, 190]))
          return { ext: "class", mime: "application/java-vm" };
        if (this.check([253, 55, 122, 88, 90, 0]))
          return { ext: "xz", mime: "application/x-xz" };
        if (this.checkString("<?xml "))
          return { ext: "xml", mime: "application/xml" };
        if (this.check([55, 122, 188, 175, 39, 28]))
          return { ext: "7z", mime: "application/x-7z-compressed" };
        if (
          this.check([82, 97, 114, 33, 26, 7]) &&
          (0 === this.buffer[6] || 1 === this.buffer[6])
        )
          return { ext: "rar", mime: "application/x-rar-compressed" };
        if (this.checkString("solid "))
          return { ext: "stl", mime: "model/stl" };
        if (this.checkString("AC")) {
          let e = new eu(4, "latin1").get(this.buffer, 2);
          if (e.match("^d*") && e >= 1e3 && e <= 1050)
            return { ext: "dwg", mime: "image/vnd.dwg" };
        }
        if (this.checkString("070707"))
          return { ext: "cpio", mime: "application/x-cpio" };
        if (this.checkString("BLENDER"))
          return { ext: "blend", mime: "application/x-blender" };
        if (this.checkString("!<arch>"))
          return (await e.ignore(8),
          "debian-binary" === (await e.readToken(new eu(13, "ascii"))))
            ? { ext: "deb", mime: "application/x-deb" }
            : { ext: "ar", mime: "application/x-unix-archive" };
        if (
          this.checkString("**ACE", { offset: 7 }) &&
          (await e.peekBuffer(this.buffer, { length: 14, mayBeLess: !0 }),
          this.checkString("**", { offset: 12 }))
        )
          return { ext: "ace", mime: "application/x-ace-compressed" };
        if (
          this.checkString("WEBVTT") &&
          ["\n", "\r", "	", " ", "\0"].some((e) =>
            this.checkString(e, { offset: 6 }),
          )
        )
          return { ext: "vtt", mime: "text/vtt" };
        if (this.check([137, 80, 78, 71, 13, 10, 26, 10])) {
          async function i() {
            return {
              length: await e.readToken(el),
              type: await e.readToken(new eu(4, "latin1")),
            };
          }
          await e.ignore(8);
          do {
            let t = await i();
            if (t.length < 0) return;
            switch (t.type) {
              case "IDAT":
                return { ext: "png", mime: "image/png" };
              case "acTL":
                return { ext: "apng", mime: "image/apng" };
              default:
                await e.ignore(t.length + 4);
            }
          } while (e.position + 8 < e.fileInfo.size);
          return { ext: "png", mime: "image/png" };
        }
        if (this.check([65, 82, 82, 79, 87, 49, 0, 0]))
          return { ext: "arrow", mime: "application/x-apache-arrow" };
        if (this.check([103, 108, 84, 70, 2, 0, 0, 0]))
          return { ext: "glb", mime: "model/gltf-binary" };
        if (
          this.check([102, 114, 101, 101], { offset: 4 }) ||
          this.check([109, 100, 97, 116], { offset: 4 }) ||
          this.check([109, 111, 111, 118], { offset: 4 }) ||
          this.check([119, 105, 100, 101], { offset: 4 })
        )
          return { ext: "mov", mime: "video/quicktime" };
        if (this.check([73, 73, 82, 79, 8, 0, 0, 0, 24]))
          return { ext: "orf", mime: "image/x-olympus-orf" };
        if (this.checkString("gimp xcf "))
          return { ext: "xcf", mime: "image/x-xcf" };
        if (this.check([73, 73, 85, 0, 24, 0, 0, 0, 136, 231, 116, 216]))
          return { ext: "rw2", mime: "image/x-panasonic-rw2" };
        if (this.check([48, 38, 178, 117, 142, 102, 207, 17, 166, 217])) {
          async function s() {
            let t = new Uint8Array(16);
            return (
              await e.readBuffer(t),
              { id: t, size: Number(await e.readToken(ec)) }
            );
          }
          for (await e.ignore(30); e.position + 24 < e.fileInfo.size; ) {
            let t = await s(),
              n = t.size - 24;
            if (
              eI(
                t.id,
                [
                  145, 7, 220, 183, 183, 169, 207, 17, 142, 230, 0, 192, 12, 32,
                  83, 101,
                ],
              )
            ) {
              let t = new Uint8Array(16);
              if (
                ((n -= await e.readBuffer(t)),
                eI(
                  t,
                  [
                    64, 158, 105, 248, 77, 91, 207, 17, 168, 253, 0, 128, 95,
                    92, 68, 43,
                  ],
                ))
              )
                return { ext: "asf", mime: "audio/x-ms-asf" };
              if (
                eI(
                  t,
                  [
                    192, 239, 25, 188, 77, 91, 207, 17, 168, 253, 0, 128, 95,
                    92, 68, 43,
                  ],
                )
              )
                return { ext: "asf", mime: "video/x-ms-asf" };
              break;
            }
            await e.ignore(n);
          }
          return { ext: "asf", mime: "application/vnd.ms-asf" };
        }
        if (this.check([171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10]))
          return { ext: "ktx", mime: "image/ktx" };
        if (
          (this.check([126, 16, 4]) || this.check([126, 24, 4])) &&
          this.check([48, 77, 73, 69], { offset: 4 })
        )
          return { ext: "mie", mime: "application/x-mie" };
        if (this.check([39, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], { offset: 2 }))
          return { ext: "shp", mime: "application/x-esri-shape" };
        if (this.check([255, 79, 255, 81]))
          return { ext: "j2c", mime: "image/j2c" };
        if (this.check([0, 0, 0, 12, 106, 80, 32, 32, 13, 10, 135, 10]))
          switch ((await e.ignore(20), await e.readToken(new eu(4, "ascii")))) {
            case "jp2 ":
              return { ext: "jp2", mime: "image/jp2" };
            case "jpx ":
              return { ext: "jpx", mime: "image/jpx" };
            case "jpm ":
              return { ext: "jpm", mime: "image/jpm" };
            case "mjp2":
              return { ext: "mj2", mime: "image/mj2" };
            default:
              return;
          }
        if (
          this.check([255, 10]) ||
          this.check([0, 0, 0, 12, 74, 88, 76, 32, 13, 10, 135, 10])
        )
          return { ext: "jxl", mime: "image/jxl" };
        if (this.check([254, 255]))
          return this.check([0, 60, 0, 63, 0, 120, 0, 109, 0, 108], {
            offset: 2,
          })
            ? { ext: "xml", mime: "application/xml" }
            : void 0;
        if (this.check([0, 0, 1, 186]) || this.check([0, 0, 1, 179]))
          return { ext: "mpg", mime: "video/mpeg" };
        if (this.check([0, 1, 0, 0, 0]))
          return { ext: "ttf", mime: "font/ttf" };
        if (this.check([0, 0, 1, 0]))
          return { ext: "ico", mime: "image/x-icon" };
        if (this.check([0, 0, 2, 0]))
          return { ext: "cur", mime: "image/x-icon" };
        if (this.check([208, 207, 17, 224, 161, 177, 26, 225]))
          return { ext: "cfb", mime: "application/x-cfb" };
        if (
          (await e.peekBuffer(this.buffer, {
            length: Math.min(256, e.fileInfo.size),
            mayBeLess: !0,
          }),
          this.check([97, 99, 115, 112], { offset: 36 }))
        )
          return { ext: "icc", mime: "application/vnd.iccprofile" };
        if (this.checkString("BEGIN:")) {
          if (this.checkString("VCARD", { offset: 6 }))
            return { ext: "vcf", mime: "text/vcard" };
          if (this.checkString("VCALENDAR", { offset: 6 }))
            return { ext: "ics", mime: "text/calendar" };
        }
        if (this.checkString("FUJIFILMCCD-RAW"))
          return { ext: "raf", mime: "image/x-fujifilm-raf" };
        if (this.checkString("Extended Module:"))
          return { ext: "xm", mime: "audio/x-xm" };
        if (this.checkString("Creative Voice File"))
          return { ext: "voc", mime: "audio/x-voc" };
        if (this.check([4, 0, 0, 0]) && this.buffer.length >= 16) {
          let e = new DataView(this.buffer.buffer).getUint32(12, !0);
          if (e > 12 && this.buffer.length >= e + 16)
            try {
              let t = new TextDecoder().decode(this.buffer.slice(16, e + 16));
              if (JSON.parse(t).files)
                return { ext: "asar", mime: "application/x-asar" };
            } catch {}
        }
        if (this.check([6, 14, 43, 52, 2, 5, 1, 1, 13, 1, 2, 1, 1, 2]))
          return { ext: "mxf", mime: "application/mxf" };
        if (this.checkString("SCRM", { offset: 44 }))
          return { ext: "s3m", mime: "audio/x-s3m" };
        if (
          (this.check([71]) && this.check([71], { offset: 188 })) ||
          (this.check([71], { offset: 4 }) && this.check([71], { offset: 196 }))
        )
          return { ext: "mts", mime: "video/mp2t" };
        if (this.check([66, 79, 79, 75, 77, 79, 66, 73], { offset: 60 }))
          return { ext: "mobi", mime: "application/x-mobipocket-ebook" };
        if (this.check([68, 73, 67, 77], { offset: 128 }))
          return { ext: "dcm", mime: "application/dicom" };
        if (
          this.check([
            76, 0, 0, 0, 1, 20, 2, 0, 0, 0, 0, 0, 192, 0, 0, 0, 0, 0, 0, 70,
          ])
        )
          return { ext: "lnk", mime: "application/x.ms.shortcut" };
        if (
          this.check([
            98, 111, 111, 107, 0, 0, 0, 0, 109, 97, 114, 107, 0, 0, 0, 0,
          ])
        )
          return { ext: "alias", mime: "application/x.apple.alias" };
        if (this.checkString("Kaydara FBX Binary  \0"))
          return { ext: "fbx", mime: "application/x.autodesk.fbx" };
        if (
          this.check([76, 80], { offset: 34 }) &&
          (this.check([0, 0, 1], { offset: 8 }) ||
            this.check([1, 0, 2], { offset: 8 }) ||
            this.check([2, 0, 2], { offset: 8 }))
        )
          return { ext: "eot", mime: "application/vnd.ms-fontobject" };
        if (
          this.check([
            6, 6, 237, 245, 216, 29, 70, 229, 189, 49, 239, 231, 254, 116, 183,
            29,
          ])
        )
          return { ext: "indd", mime: "application/x-indesign" };
        if (
          (await e.peekBuffer(this.buffer, {
            length: Math.min(512, e.fileInfo.size),
            mayBeLess: !0,
          }),
          eS(this.buffer))
        )
          return { ext: "tar", mime: "application/x-tar" };
        if (this.check([255, 254]))
          return this.check([60, 0, 63, 0, 120, 0, 109, 0, 108, 0], {
            offset: 2,
          })
            ? { ext: "xml", mime: "application/xml" }
            : this.check(
                  [
                    255, 14, 83, 0, 107, 0, 101, 0, 116, 0, 99, 0, 104, 0, 85,
                    0, 112, 0, 32, 0, 77, 0, 111, 0, 100, 0, 101, 0, 108, 0,
                  ],
                  { offset: 2 },
                )
              ? { ext: "skp", mime: "application/vnd.sketchup.skp" }
              : void 0;
        if (this.checkString("-----BEGIN PGP MESSAGE-----"))
          return { ext: "pgp", mime: "application/pgp-encrypted" };
        if (
          this.buffer.length >= 2 &&
          this.check([255, 224], { offset: 0, mask: [255, 224] })
        ) {
          if (this.check([16], { offset: 1, mask: [22] }))
            return (
              this.check([8], { offset: 1, mask: [8] }),
              { ext: "aac", mime: "audio/aac" }
            );
          if (this.check([2], { offset: 1, mask: [6] }))
            return { ext: "mp3", mime: "audio/mpeg" };
          if (this.check([4], { offset: 1, mask: [6] }))
            return { ext: "mp2", mime: "audio/mpeg" };
          if (this.check([6], { offset: 1, mask: [6] }))
            return { ext: "mp1", mime: "audio/mpeg" };
        }
      }
      async readTiffTag(e) {
        let t = await this.tokenizer.readToken(e ? es : ei);
        switch ((this.tokenizer.ignore(10), t)) {
          case 50341:
            return { ext: "arw", mime: "image/x-sony-arw" };
          case 50706:
            return { ext: "dng", mime: "image/x-adobe-dng" };
        }
      }
      async readTiffIFD(e) {
        let t = await this.tokenizer.readToken(e ? es : ei);
        for (let n = 0; n < t; ++n) {
          let t = await this.readTiffTag(e);
          if (t) return t;
        }
      }
      async readTiffHeader(e) {
        let t = (e ? es : ei).get(this.buffer, 2),
          n = (e ? eo : ea).get(this.buffer, 4);
        if (42 === t) {
          if (n >= 6) {
            if (this.checkString("CR", { offset: 8 }))
              return { ext: "cr2", mime: "image/x-canon-cr2" };
            if (
              n >= 8 &&
              (this.check([28, 0, 254, 0], { offset: 8 }) ||
                this.check([31, 0, 11, 0], { offset: 8 }))
            )
              return { ext: "nef", mime: "image/x-nikon-nef" };
          }
          return (
            await this.tokenizer.ignore(n),
            (await this.readTiffIFD(e)) ?? { ext: "tif", mime: "image/tiff" }
          );
        }
        if (43 === t) return { ext: "tif", mime: "image/tiff" };
      }
    }
    let eT = new Set(eE);
    function eL(t, n, r, i) {
      return new Promise((s, a) => {
        let o = new Worker(e.r(599568));
        ((o.onmessage = (e) => {
          let { blob: n, error: r } = e.data;
          (r ? a(Error(r)) : n && s(new File([n], t.name, { type: n.type })),
            o.terminate());
        }),
          (o.onerror = (e) => {
            (a(Error(e.message)), o.terminate());
          }),
          o.postMessage({ file: t, quality: n, shortLimit: r, longLimit: i }));
      });
    }
    e.s(["fileTypeFromBuffer", () => eD, "supportedExtensions", 0, eT], 614346);
    var eP = e.i(532733),
      eR = e.i(906261);
    let eF = ({
      isSignedIn: e,
      dragContainerRef: t,
      projectId: n,
      onFinish: r,
      onSuccess: i,
      onError: s,
      canUpload: a,
      onUploadStart: o,
      disablePaste: l,
      disableDrag: c,
    }) => {
      let u = n ? "project-source" : "prompt-attachment",
        [d, h] = (0, F.useState)(!1),
        [p, m] = (0, F.useState)(!1),
        f = (0, F.useRef)(null),
        { user: g, activeScope: x } = (0, et.useActiveScope)(),
        v = J(),
        { revalidate: y } = (0, $.useChatHistory)(),
        b = (0, z.useRouter)(),
        { setShowSignInDialog: j } = (0, _.useSignInDialog)(),
        w = s ?? ((e) => O.toast.error(e)),
        C = (0, F.useCallback)(
          async (t) => {
            m(!0);
            let s = 5,
              l = [];
            try {
              if (!e) return void j({ content: !1 });
              let r = a(t);
              if (!r.ok)
                return void w(r.message ?? "Failed to upload files", "");
              let d = [],
                h = [];
              async function c(e) {
                let t,
                  r,
                  i = await eV({ file: e, config: v }),
                  s = (0, X.generateFileId)();
                if (
                  i.name.startsWith(V.V0_CHAT_FILE_PREFIX) &&
                  g?.isAdminMode &&
                  !n
                ) {
                  let e = await (0, H.importChat)({ payload: { file: i } });
                  return "error" in e
                    ? (w(e.error, s), { status: "error", message: e.error })
                    : (y(),
                      O.toast.success("Chat imported successfully"),
                      b.push(`/chat/${e.chatId}`),
                      { status: "success" });
                }
                if (
                  "application/zip" === i.type ||
                  "application/x-zip-compressed" === i.type
                ) {
                  let e = await i.arrayBuffer(),
                    t = {
                      id: s,
                      name: i.name,
                      size: i.size,
                      isImage: !1,
                      tokens: 0,
                      v0Type: "zip",
                      url: "",
                      contentType: i.type,
                      content: e,
                      status: "done",
                    };
                  return (d.push(t), { status: "success" });
                }
                if ((0, U.isInlinableImageType)(i.type)) {
                  let e = v.image.maxSizeBytes,
                    { short: t, long: n } = v.image.maxDimensionsPixels;
                  if (i.size > e)
                    return (
                      w(`${i.name} is larger than ${(0, U.bytesToMB)(e)}`, s),
                      {
                        status: "error",
                        message: `${i.name} is larger than ${(0, U.bytesToMB)(e)}`,
                      }
                    );
                  let r = await eB(i),
                    a = Math.max(r.width || 0, r.height || 0),
                    o = Math.min(r.width || 0, r.height || 0);
                  if (a > n || o > t)
                    return (
                      w(
                        `${i.name} exceeds the maximum dimensions. Long side must be less than or equal to ${n}px and short side must be less than or equal to ${t}px.`,
                        s,
                      ),
                      {
                        status: "error",
                        message: `${i.name} exceeds the maximum dimensions. Long side must be less than or equal to ${n}px and short side must be less than or equal to ${t}px.`,
                      }
                    );
                } else {
                  let e =
                      !(!x || (0, eR.isUserScope)(x)) &&
                      !!g &&
                      (0, eP.teamMemberHasV0Entitlement)(x, g),
                    t = (0, U.hasHigherUploadLimits)(g, e),
                    n = (0, U.getMaxFileSizeBytes)(u, t);
                  if (i.size > n) {
                    let e = (0, U.bytesToMB)(i.size),
                      n = (0, U.getFileSizeLimitLabels)(u),
                      r = t
                        ? `File (${e}) exceeds the ${n.premium} size limit`
                        : `File (${e}) exceeds the ${n.regular} size limit. Upgrade for higher limits.`;
                    return (w(r, s), { status: "error", message: r });
                  }
                }
                (0, U.isConvertedToText)(i.type, i.name.split(".").pop()) &&
                  (t = await i.text());
                let a = i.type.startsWith("image/") ? Z(i) : G(t || ""),
                  l = {
                    id: s,
                    name: i.name,
                    url: URL.createObjectURL(i),
                    content: t,
                    status: "uploading",
                    size: i.size,
                    isImage: i.type.startsWith("image/"),
                    tokens: a,
                    v0Type: i.v0Type,
                  };
                o?.(l);
                let { pathname: c, clientPayload: p } = await eO({
                  file: i,
                  component: u,
                });
                try {
                  r = await (0, B.upload)(c, i, {
                    access: "public",
                    handleUploadUrl: "/chat/api/chat/upload",
                    clientPayload: JSON.stringify(p),
                  });
                } catch (t) {
                  ((0, Q.track)("FileUploadError", {
                    fileName: i.name,
                    fileType: i.type,
                    errorMsg: String(t),
                  }),
                    console.error(`Failed to upload ${i.name}: ${String(t)}`));
                  let e = "Failed to upload file " + i.name;
                  return (
                    t instanceof ee.BlobContentTypeNotAllowed &&
                      (e = "File type not allowed"),
                    w(e, s),
                    { status: "error", message: e }
                  );
                }
                if (n) {
                  (0, Q.track)("UploadSource", {
                    projectId: n,
                    extension: i.name.split(".").pop()?.toLowerCase(),
                    type: i.type,
                  });
                  let e = { projectId: n, filename: i.name, url: r.url },
                    t = await fetch("/chat/api/projects/sources", {
                      method: "POST",
                      body: JSON.stringify(e),
                      headers: { "Content-Type": "application/json" },
                    });
                  if (!t.ok) {
                    let e;
                    try {
                      e = (await t.json()).error;
                    } catch (t) {
                      e = "Failed to start file indexing";
                    }
                    return (w(e, s), { status: "error", message: e });
                  }
                }
                let m = { ...r, name: i.name, size: i.size, v0Type: i.v0Type },
                  f = {
                    ...l,
                    status: "done",
                    url: r.url,
                    contentType: r.contentType,
                  };
                return (h.push(m), d.push(f), { status: "success" });
              }
              for (let e = 0; e < t.length; e += s) {
                let n = t.slice(e, e + s),
                  r = await Promise.allSettled(n.map(c));
                l.push(...r);
              }
              for (let e of l) {
                if ("rejected" === e.status) {
                  w("Failed to upload file", "");
                  continue;
                }
                if ("error" === e.value.status) {
                  w(e.value.message, "");
                  continue;
                }
              }
              (d.length > 0 || h.length > 0) && (await i?.(h, d));
            } catch (e) {
              w("Unexpected error while uploading files", "");
            } finally {
              m(!1);
            }
            r?.();
          },
          [r, e, u, j, w, v, g, x, n, o, y, b, i, a],
        ),
        k = (0, F.useCallback)(
          async (t) => {
            if (
              (h(!1), t.preventDefault(), t.stopPropagation(), !t.dataTransfer)
            )
              return;
            if (!e) return void j({ content: !1 });
            let { files: n, items: r } = t.dataTransfer,
              i = r ? await e_(Array.from(r)) : await e_(Array.from(n));
            i.ok && (await C(i.value));
          },
          [e, j, C, h],
        );
      return (
        (0, F.useEffect)(() => {
          if (l) return;
          let e = async (e) => {
            if (e.clipboardData) {
              let t = e.clipboardData.items,
                n = [],
                r = async () => {
                  for (let e of t)
                    if ("file" === e.kind) {
                      let t = e.getAsFile();
                      t && n.push(t);
                    }
                  n.length > 0 && (await C(n));
                };
              await r();
            }
          };
          return (
            window.addEventListener("paste", e),
            () => {
              window.removeEventListener("paste", e);
            }
          );
        }, [v.image.maxSizeBytes, e, j, C, l]),
        (0, F.useEffect)(() => {
          let e = document.documentElement;
          if (c) return;
          let n = t?.current || window,
            r = () => {
              h(!0);
            },
            i = () => {
              h(!1);
            },
            s = (e) => {
              (e.preventDefault(), e.stopPropagation());
            };
          return (
            n.addEventListener("dragenter", r),
            e.addEventListener("mouseleave", i),
            n.addEventListener("dragover", s),
            n.addEventListener("drop", k),
            () => {
              (n.removeEventListener("dragenter", r),
                e.removeEventListener("mouseleave", i),
                n.removeEventListener("dragover", s),
                n.removeEventListener("drop", k));
            }
          );
        }, [k, t, c, h]),
        {
          isDraggingFile: d,
          isUploading: p,
          inputFileRef: f,
          onInputChange: async (e) => {
            if (!e.target.files) return;
            let t = await e_(Array.from(e.target.files));
            t.ok && (await C(t.value), (e.target.value = ""));
          },
          uploadFiles: C,
        }
      );
    };
    async function e_(e) {
      let t = [];
      if (!e?.length) return { ok: !1 };
      let n = async (e, t = "") => {
          if (e.isFile) return [await new Promise((t) => e.file(t))];
          if (e.isDirectory) {
            let r = e.createReader(),
              i = await new Promise((e) => r.readEntries(e));
            return (
              await Promise.all(i.map((r) => n(r, t + e.name + "/")))
            ).flat();
          }
          return [];
        },
        r = [];
      for (let n of e)
        if ("webkitGetAsEntry" in n) {
          let e = n.webkitGetAsEntry();
          e && r.push(e);
        } else t.push(n);
      for (let e of r) {
        let r = await n(e);
        t.push(...r);
      }
      let i = [];
      for (let e = 0; e < t.length; e++) {
        let n = t[e].name.split(".").pop()?.toLowerCase();
        if (".DS_Store" !== t[e].name) {
          if (!n)
            return (O.toast.error("Unsupported file type " + n), { ok: !1 });
          i.push(t[e]);
        }
      }
      return { ok: !0, value: i };
    }
    async function eO({ file: e, component: t }) {
      let n = e.name,
        r = e.type,
        i = e.name.split(".").pop()?.toLowerCase();
      if (e.type.startsWith("image/")) {
        let t = await e.arrayBuffer(),
          s = await eD(new Uint8Array(t)),
          a = s?.mime;
        ((r = a ?? e.type),
          (i = a?.split("/")[1] ?? i),
          (n =
            e.name.endsWith(`.${i}`) ||
            ("jpeg" === i && e.name.endsWith(".jpg")) ||
            ("jpg" === i && e.name.endsWith(".jpeg"))
              ? e.name
              : `${e.name}.${i}`));
      }
      return {
        pathname: n,
        clientPayload: { component: t, fileType: r, extension: i },
      };
    }
    let eB = (e) =>
      new Promise((t, n) => {
        let r = new Image();
        ((r.onload = () => {
          t({ width: r.naturalWidth, height: r.naturalHeight });
        }),
          (r.onerror = () => {
            n(Error("Failed to load image"));
          }),
          (r.src = URL.createObjectURL(e)));
      });
    async function eV({ file: e, config: t }) {
      if (!(0, U.isInlinableImageType)(e.type)) return e;
      let n = t.image.maxSizeBytes;
      if (e.size <= n) return e;
      let r = n / e.size + 0.1,
        i = null;
      for (; null === i; )
        try {
          let s = await eL(
            e,
            r,
            t.image.maxDimensionsPixels.short,
            t.image.maxDimensionsPixels.long,
          );
          if (s.size > n) throw Error("File size still too large");
          (i = s).v0Type = e.v0Type;
        } catch (t) {
          r <= 0 ? (i = e) : (r -= 0.1);
        }
      return i;
    }
    e.s(["buildUploadPayload", () => eO, "default", 0, eF], 79259);
    var ee = ee;
    async function ez({
      files: e,
      targetDirectory: t,
      blockId: n,
      existingFiles: r = [],
    }) {
      try {
        let i = [],
          s = 0xa00000;
        for (let a of Array.from(e)) {
          let e;
          if (a.size > s)
            return {
              success: !1,
              error: `File ${a.name} is too large. Maximum size is ${s / 1048576}MB`,
            };
          if (!a.name || "" === a.name.trim())
            return { success: !1, error: "File name cannot be empty" };
          if (a.name.match(/[<>:"/\\|?*]/))
            return {
              success: !1,
              error: `File name "${a.name}" contains invalid characters`,
            };
          let o = t ? `${t}/${a.name}` : a.name;
          if (r.some((e) => e.meta.file === o && !e.isDeleted))
            return {
              success: !1,
              error: `File "${a.name}" already exists in this directory`,
            };
          let l = a.name.split(".").pop() || "",
            c = (0, P.cleanLangNoCustom)(l),
            u = eH(a.name, a.type),
            d = "",
            h = { file: o };
          if (u)
            try {
              let { pathname: t, clientPayload: n } = await eO({
                  file: a,
                  component: "project-source",
                }),
                r = await (0, R.upload)(t, a, {
                  access: "public",
                  handleUploadUrl: "/chat/api/chat/upload",
                  clientPayload: JSON.stringify(n),
                });
              ((e = r.url), (h.url = r.url));
            } catch (t) {
              let e = `Failed to upload binary file ${a.name}`;
              return (
                t instanceof ee.BlobContentTypeNotAllowed
                  ? (e = `File type not allowed for ${a.name}`)
                  : t instanceof Error && (e = t.message),
                { success: !1, error: e }
              );
            }
          else d = await e$(a);
          let p = {
            source: d,
            meta: h,
            blockId: n,
            lang: c,
            blobUrl: e,
            isDeleted: !1,
            isEdit: !1,
            isMerged: !1,
            isMoved: !1,
            isRecovered: !1,
            isLocked: !1,
            isFixed: !1,
            isQuickEdit: !1,
            isTerminated: !1,
            isAttachmentQuickEdit: !1,
            isUserEdit: !0,
          };
          i.push(p);
        }
        return { success: !0, files: i };
      } catch (e) {
        return {
          success: !1,
          error: e instanceof Error ? e.message : "Failed to upload files",
        };
      }
    }
    function eH(e, t) {
      let n = e.toLowerCase(),
        r = [
          ".jpg",
          ".jpeg",
          ".png",
          ".gif",
          ".bmp",
          ".svg",
          ".ico",
          ".webp",
          ".tiff",
          ".tif",
          ".mp4",
          ".mp3",
          ".wav",
          ".avi",
          ".mov",
          ".mkv",
          ".flv",
          ".webm",
          ".ogg",
          ".aac",
          ".pdf",
          ".doc",
          ".docx",
          ".xls",
          ".xlsx",
          ".ppt",
          ".pptx",
          ".zip",
          ".rar",
          ".7z",
          ".tar",
          ".gz",
          ".bz2",
          ".exe",
          ".dll",
          ".so",
          ".dylib",
          ".app",
          ".obj",
          ".mtl",
          ".gltf",
          ".glb",
          ".fbx",
          ".stl",
          ".bin",
          ".dat",
          ".db",
          ".sqlite",
        ].some((e) => n.endsWith(e)),
        i =
          t.startsWith("image/") ||
          t.startsWith("audio/") ||
          t.startsWith("video/") ||
          t.startsWith("model/") ||
          (t.startsWith("application/") && !t.includes("text")) ||
          "application/octet-stream" === t;
      return r || i;
    }
    async function e$(e) {
      return new Promise((t, n) => {
        let r = new FileReader();
        ((r.onload = () => {
          let e = r.result;
          "string" == typeof e ? t(e) : n(Error("Failed to read file content"));
        }),
          (r.onerror = () => {
            n(Error("Failed to read file"));
          }),
          r.readAsText(e));
      });
    }
    function eU({ multiple: e = !0, accept: t, onFilesSelected: n }) {
      let r = document.createElement("input");
      return (
        (r.type = "file"),
        (r.multiple = e),
        t && (r.accept = t),
        (r.onchange = (e) => {
          let t = e.target;
          (t.files && t.files.length > 0 && n(t.files), (r.value = ""));
        }),
        r
      );
    }
    e.s(
      ["createFileInput", () => eU, "uploadFilesToFileTree", () => ez],
      222199,
    );
    var eG = O;
    let eW = "file-tree-panel-group",
      eq = "file-tree-panel-right",
      eZ = "file-tree-panel-left";
    function eK({
      showDiffInfo: e,
      activeFilePath: P,
      initialFileTreeSize: R,
      setActiveFile: F,
      children: _,
      files: O,
      loadingPath: B,
      blockId: V,
      source: z,
      onChange: H,
    }) {
      let [$, U] = (0, a.useState)(!!(O?.length && O.length > 1)),
        { defaultSizeRef: G, isFallbackSize: W } = (0, r.usePanelSize)({
          initialSize: R,
          fallbackSize: 15,
        }),
        q = (0, a.useRef)(!1),
        { setDeleteFileDialogData: Z, setShowDeleteFileDialog: K } = (0,
        w.useDeleteFileDialog)(),
        { setDeleteFolderDialogData: Y, setShowDeleteFolderDialog: J } = (0,
        C.useDeleteFolderDialog)(),
        { setRenameFileDialogData: Q, setShowRenameFileDialog: X } = (0,
        S.useRenameFileDialog)(),
        { setNewFileDialogData: ee, setShowNewFileDialog: et } = (0,
        j.useNewFileDialog)(),
        { setNewFolderDialogData: en, setShowNewFolderDialog: er } = (0,
        k.useNewFolderDialog)(),
        { tempFolders: ei, setTempFolders: es } = (0, k.useTempFolders)({
          blockId: V,
        }),
        ea = (0, D.useUpdateBlockData)(V),
        eo = (0, L.useActiveBlockState)(),
        { isLatest: el } = (0, T.useBlockVersionInfo)(eo?.id);
      (0, a.useEffect)(() => {
        !q.current && O?.length && O.length > 1 && U(!!O.length);
      }, [O]);
      let ec = (0, a.useMemo)(() => {
          let t = O
            ? O.map((e) => ["file" in e.meta ? e.meta.file : "", e])
            : [];
          for (let e of ei || []) t.push([e, null]);
          let n = [];
          for (let [r, i] of t) {
            let t = r.endsWith(".gitkeep"),
              s = r.split("/"),
              a = t ? s.slice(0, -1) : s;
            if (0 === a.length) continue;
            let o = n;
            for (let [n, r] of a.entries()) {
              let s = n === a.length - 1 && !t && null !== i,
                l = a.slice(0, n + 1).join("/"),
                c = o.find((e) => e.title === r);
              if (!c) {
                let t = {
                    title: r,
                    value: l,
                    isLocked: i?.isLocked || !1,
                    type: s ? (i.meta.url ? "binary" : "text") : "directory",
                  },
                  n = i?.originalCode,
                  a = i?.source;
                if (s)
                  if (e && n && n !== a && a) {
                    let { addedCount: e, removedCount: r } = (0,
                    x.getDiffExact)(n, a);
                    ((t.addedCount = e), (t.removedCount = r));
                  } else
                    e &&
                      a &&
                      !n &&
                      ((t.addedCount = (0, x.countContentLines)(a)),
                      (t.removedCount = 0));
                else t.items = [];
                (o.push(t), (c = t));
              }
              s || (o = c.items || []);
            }
          }
          return n;
        }, [O, e, ei]),
        eu = (0, a.useMemo)(
          () =>
            (0, f.parseMultiFileSource)({
              source: z,
              blockType: "code-project",
              blockId: V,
            }),
          [z, V],
        ),
        { handleToggleFileLock: ed, lockingStatus: eh } = (0,
        A.useToggleFileLock)({ sourceFiles: eu, blockId: V, onChange: H }),
        ep = (0, a.useCallback)(
          ({ targetDirectory: e }) => {
            eU({
              multiple: !0,
              onFilesSelected: async (t) => {
                try {
                  let n = await ez({
                    files: t,
                    targetDirectory: e,
                    blockId: V,
                    existingFiles: eu,
                  });
                  if (n.success && n.files) {
                    let t = [...eu, ...n.files];
                    (await ea(t),
                      H(),
                      eG.toast.success(
                        `Uploaded ${n.files.length} file(s) to ${e || "root"}`,
                      ));
                  } else eG.toast.error(n.error || "Failed to upload files");
                } catch (e) {
                  (eG.toast.error(
                    "An unexpected error occurred while uploading files",
                  ),
                    console.error("File upload error:", e));
                }
              },
            }).click();
          },
          [eu, ea, H, V],
        ),
        em = (0, a.useCallback)(
          ({ item: e }) =>
            (0, t.jsxs)(t.Fragment, {
              children: [
                (0, t.jsxs)(g.ContextMenuGroup, {
                  children: [
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({ fileNameToEdit: e.value, variant: "single-file" }),
                      children: [
                        e.isLocked
                          ? (0, t.jsx)(d.LockOpen, {})
                          : (0, t.jsx)(u.LockClosed, {}),
                        (0, t.jsx)("span", {
                          children: e.isLocked ? "Unlock" : "Lock",
                        }),
                      ],
                    }),
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({ mode: "lock", variant: "all-files" }),
                      children: [(0, t.jsx)(N.IconLockFiles, {}), "Lock All"],
                    }),
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({ mode: "unlock", variant: "all-files" }),
                      children: [
                        (0, t.jsx)(E.IconUnlockFiles, {}),
                        "Unlock All",
                      ],
                    }),
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({
                          mode: "lock",
                          variant: "other-files",
                          fileNameToNotLock: e.value,
                        }),
                      children: [
                        (0, t.jsx)(M.IconLockOthers, {}),
                        "Lock Other Files",
                      ],
                    }),
                  ],
                }),
                el &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)(g.ContextMenuSeparator, {}),
                      (0, t.jsxs)(g.ContextMenuGroup, {
                        children: [
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              (X(!0), Q({ fileName: e.value }));
                            },
                            children: [(0, t.jsx)(v.FileEdit, {}), "Rename"],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              let t = e.value,
                                n = t.lastIndexOf("/");
                              ep({
                                targetDirectory: n > 0 ? t.substring(0, n) : "",
                              });
                            },
                            children: [
                              (0, t.jsx)(p.CloudUpload, {}),
                              "Upload Files",
                            ],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: async () => {
                              try {
                                let t,
                                  n = eu.find((t) => t.meta.file === e.value);
                                if (!n) throw Error("File not found");
                                let r = n.meta.file;
                                if (!r) throw Error("File path not found");
                                let i = r.split("/"),
                                  s = i[i.length - 1] || "",
                                  a =
                                    i.length > 1
                                      ? i.slice(0, -1).join("/")
                                      : "",
                                  o = s.split("."),
                                  l = o.reverse().pop() || "",
                                  c = o.reverse().join("."),
                                  u = l.match(/-copy(-(\d+))?$/),
                                  d = l,
                                  h = u ? (u[2] ? parseInt(u[2]) + 1 : 2) : 1;
                                do
                                  ((d = u
                                    ? l.replace(/-copy(-\d+)?$/, `-copy-${h}`)
                                    : `${l}-copy${h > 1 ? `-${h}` : ""}`),
                                    (t = `${a ? `${a}/` : ""}${d}${c ? `.${c}` : ""}`),
                                    h++);
                                while (eu.some((e) => e.meta.file === t));
                                let p = {
                                  source: n.source,
                                  meta: { file: t },
                                  blockId: V,
                                  lang: (0, I.cleanLangNoCustom)(c),
                                  isDeleted: !1,
                                  isEdit: !1,
                                  isMerged: !1,
                                  isMoved: !1,
                                  isRecovered: !1,
                                  isFixed: !1,
                                  isQuickEdit: !1,
                                  isTerminated: !1,
                                  isAttachmentQuickEdit: !1,
                                  isLocked: !1,
                                  isUserEdit: !0,
                                };
                                if ((await ea([...eu, p])).success) H();
                                else throw Error("Failed");
                              } catch {
                                throw Error("Failed");
                              }
                            },
                            children: [
                              (0, t.jsx)(c.Layers, {}),
                              (0, t.jsx)("span", { children: "Duplicate" }),
                            ],
                          }),
                        ],
                      }),
                    ],
                  }),
                el &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)(g.ContextMenuSeparator, {}),
                      (0, t.jsx)(g.ContextMenuGroup, {
                        children: (0, t.jsxs)(g.ContextMenuItem, {
                          variant: "destructive",
                          onSelect: () => {
                            (K(!0), Z({ fileName: e.value }));
                          },
                          children: [(0, t.jsx)(h.Trash, {}), "Delete"],
                        }),
                      }),
                    ],
                  }),
              ],
            }),
          [el, V, H, Z, Q, K, X, ed, eu, ea, ep],
        ),
        ef = (0, a.useCallback)(
          ({ item: e }) =>
            (0, t.jsxs)(t.Fragment, {
              children: [
                el &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsxs)(g.ContextMenuGroup, {
                        children: [
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              (ee({ folderName: e.value }), et(!0));
                            },
                            children: [(0, t.jsx)(y.FilePlus, {}), "New File"],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              (en({ folderName: e.value }), er(!0));
                            },
                            children: [
                              (0, t.jsx)(l.FolderPlus, {}),
                              "New Folder",
                            ],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => ep({ targetDirectory: e.value }),
                            children: [
                              (0, t.jsx)(p.CloudUpload, {}),
                              "Upload Files",
                            ],
                          }),
                        ],
                      }),
                      (0, t.jsx)(g.ContextMenuSeparator, {}),
                    ],
                  }),
                (0, t.jsxs)(g.ContextMenuGroup, {
                  children: [
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({
                          variant: "folder",
                          mode: "lock",
                          folderName: e.value,
                        }),
                      children: [
                        (0, t.jsx)(N.IconLockFiles, {}),
                        "Lock Folder",
                      ],
                    }),
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({
                          variant: "folder",
                          mode: "unlock",
                          folderName: e.value,
                        }),
                      children: [
                        (0, t.jsx)(E.IconUnlockFiles, {}),
                        "Unlock Folder",
                      ],
                    }),
                  ],
                }),
                el &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)(g.ContextMenuSeparator, {}),
                      (0, t.jsx)(g.ContextMenuGroup, {
                        children: (0, t.jsxs)(g.ContextMenuItem, {
                          variant: "destructive",
                          onSelect: () => {
                            (es((t) => (t || []).filter((t) => t !== e.value)),
                              J(!0),
                              Y({ folderName: e.value, source: z }));
                          },
                          children: [(0, t.jsx)(h.Trash, {}), "Delete"],
                        }),
                      }),
                    ],
                  }),
              ],
            }),
          [el, Y, ee, en, J, es, er, ed, et, z, ep],
        ),
        eg = (0, a.useCallback)(
          () =>
            (0, t.jsxs)(t.Fragment, {
              children: [
                el &&
                  (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsxs)(g.ContextMenuGroup, {
                        children: [
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              (et(!0), ee({ folderName: "" }));
                            },
                            children: [(0, t.jsx)(y.FilePlus, {}), "New File"],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => {
                              (er(!0), en({ folderName: "" }));
                            },
                            children: [
                              (0, t.jsx)(l.FolderPlus, {}),
                              "New Folder",
                            ],
                          }),
                          (0, t.jsxs)(g.ContextMenuItem, {
                            onSelect: () => ep({ targetDirectory: "" }),
                            children: [
                              (0, t.jsx)(p.CloudUpload, {}),
                              "Upload Files",
                            ],
                          }),
                        ],
                      }),
                      (0, t.jsx)(g.ContextMenuSeparator, {}),
                    ],
                  }),
                (0, t.jsxs)(g.ContextMenuGroup, {
                  children: [
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({ mode: "lock", variant: "all-files" }),
                      children: [(0, t.jsx)(N.IconLockFiles, {}), "Lock All"],
                    }),
                    (0, t.jsxs)(g.ContextMenuItem, {
                      onSelect: () =>
                        ed({ mode: "unlock", variant: "all-files" }),
                      children: [
                        (0, t.jsx)(E.IconUnlockFiles, {}),
                        "Unlock All",
                      ],
                    }),
                  ],
                }),
              ],
            }),
          [el, et, ed, ee, er, en, ep],
        );
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(r.PanelGroup, {
            isFallbackSize: W,
            collapseSide: "left",
            cookie: i.FILE_TREE_RESIZE_COOKIE,
            id: eW,
            className: "h-screen w-screen",
            direction: "horizontal",
            leftId: eZ,
            rightId: eq,
            defaultSizeRef: G,
            children: [
              (0, t.jsx)(r.CollapsiblePanel, {
                className: "z-10 h-full min-w-[160px]",
                collapseSide: "left",
                isOpen: $,
                order: 1,
                defaultSize: G.current,
                collapseId: eZ,
                children: (0, t.jsx)(a.Suspense, {
                  fallback: null,
                  children: (0, t.jsx)("div", {
                    className: "bg-v0-background-200 flex h-full flex-col",
                    children: (0, t.jsx)(n.FileTree, {
                      loading: B,
                      active: P,
                      onSelect: F,
                      lockingStatus: eh,
                      className: "w-full flex-1 overflow-y-auto p-1.5 pb-12",
                      items: ec,
                      FileActions: em,
                      FolderActions: ef,
                      TreeActions: eg,
                    }),
                  }),
                }),
              }),
              (0, t.jsx)(s.Panel, {
                id: eq,
                order: 2,
                defaultSize: $ ? 100 - G.current : 100,
                className: "h-full min-w-[200px]",
                children: _,
              }),
              (0, t.jsx)(
                o.Button,
                {
                  tooltip: `${$ ? "Close" : "Open"} File Tree`,
                  className: (0, m.cn)(
                    "absolute bottom-2 left-2 z-20 size-7 transition-all",
                    $ ? "-scale-x-100" : "",
                  ),
                  variant: "secondary",
                  size: "sm",
                  onClick: () => {
                    ((q.current = !0), U(!$));
                  },
                  children: (0, t.jsx)(b.CollapseArrow, {}, "arrow"),
                },
                "button",
              ),
            ],
          }),
          (0, t.jsx)(w.DeleteFileDialog, {
            blockId: V,
            sourceFiles: eu,
            onSuccess: () => {
              (K(!1), H());
            },
          }),
          (0, t.jsx)(C.DeleteFolderDialog, {
            blockId: V,
            sourceFiles: eu,
            onSuccess: () => {
              (J(!1), H());
            },
          }),
          (0, t.jsx)(j.NewFileDialog, {
            blockId: V,
            sourceFiles: eu,
            onSuccess: () => {
              (et(!1), H());
            },
          }),
          (0, t.jsx)(k.NewFolderDialog, {
            onSuccess: async (e) => {
              let t = (0, f.parseMultiFileSource)({
                  source: z,
                  blockType: "code-project",
                  blockId: V,
                }),
                n = e ? `${e}/.gitkeep` : ".gitkeep";
              if (!t.some((e) => e.meta.file === n)) {
                let e = {
                  source: "",
                  meta: { file: n },
                  blockId: V,
                  lang: "plaintext",
                  isDeleted: !1,
                  isEdit: !1,
                  isMerged: !1,
                  isMoved: !1,
                  isRecovered: !1,
                  isLocked: !1,
                  isFixed: !1,
                  isQuickEdit: !1,
                  isTerminated: !1,
                  isAttachmentQuickEdit: !1,
                  isUserEdit: !0,
                };
                await ea([...t, e]);
              }
              (es((t) => Array.from(new Set([...(t || []), e]))), er(!1), H());
            },
          }),
          (0, t.jsx)(S.RenameFileDialog, {
            blockId: V,
            sourceFiles: eu,
            onSuccess: (e) => {
              (e && F(e), X(!1), H());
            },
          }),
        ],
      });
    }
  },
  280738,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(304649);
    function r({
      className: e,
      children: r,
      bottomBorder: i,
      onePixelShorter: s,
    }) {
      return (0, t.jsx)("div", {
        className: (0, n.cn)(
          "flex w-full shrink-0 items-center pl-3 pr-2 text-[13px] font-medium text-v0-gray-900",
          s ? "h-[calc(2.25rem-1px)]" : "h-9",
          i && "border-v0-alpha-400 border-b",
          e,
        ),
        "data-slot": "block-tab-header",
        children: r,
      });
    }
    e.s(["BlockTabHeader", () => r]);
  },
  382559,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(418625);
    function r(e) {
      let { data: r, mutate: i } = (0, n.default)(
        ["block:file-editing-status", e],
        { fallbackData: !1 },
      );
      return [
        r,
        (0, t.useCallback)(
          (e) => {
            i(e);
          },
          [i],
        ),
      ];
    }
    e.s(["useFileEditingStatus", () => r]);
  },
  360174,
  (e, t, n) => {
    var r = e.r(746244),
      i = e.r(791606),
      s = "Expected a function";
    t.exports = function (e, t, n) {
      var a = !0,
        o = !0;
      if ("function" != typeof e) throw TypeError(s);
      return (
        i(n) &&
          ((a = "leading" in n ? !!n.leading : a),
          (o = "trailing" in n ? !!n.trailing : o)),
        r(e, t, { leading: a, maxWait: t, trailing: o })
      );
    };
  },
  807260,
  (e) => {
    "use strict";
    e.s(["useVirtualScroll", () => l]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(92479),
      i = e.i(449381),
      s = e.i(226368),
      a = e.i(282931),
      o = e.i(360174);
    function l({ count: e, pushToBottom: l }) {
      let c = (0, n.useRef)(null),
        u = (0, n.useRef)(null),
        d = (0, n.useRef)(null),
        { messages: h, activeForkKey: p } = (0, r.useChatMessages)(),
        { hashMessageId: m } = (0, r.useChatHashNavigation)(),
        f = (0, i.useActiveBlockView)(),
        g = (0, s.usePathname)(),
        { chatId: x } = (0, r.useChatId)(),
        [v, y] = (0, n.useState)(!1),
        [b, j] = (0, n.useState)(!0),
        w = (0, n.useCallback)(
          (t, n, r) => {
            let i = !r && t >= (n ?? e) - 1;
            (d.current?.scrollToIndex(t, {
              align: i ? "end" : "start",
              smooth: !0,
            }),
              setTimeout(() => {
                i &&
                  u.current &&
                  u.current.scrollTo({
                    top: u.current.scrollHeight - u.current.clientHeight + 1,
                    behavior: "smooth",
                  });
              }, 0));
          },
          [e],
        ),
        C = (0, n.useRef)(null),
        k = (0, n.useCallback)(
          (e, t = 0, n, r) => {
            if (!n) {
              if (C.current === e) return;
              C.current = e;
            }
            let i = new Set(r ?? (p || [])),
              s = h.filter((e) => i.has(e.id)).findIndex((t) => t.id === e);
            -1 !== s && setTimeout(() => w(s, r?.length, n), t);
          },
          [h, w, p],
        ),
        S = (0, n.useCallback)(
          () =>
            !!d.current &&
            d.current.scrollOffset + d.current.viewportSize + 20 >
              d.current.scrollSize,
          [],
        ),
        N = (0, n.useCallback)(() => {
          j(S());
        }, [S]),
        E = (0, o.default)(N, 100);
      (0, n.useEffect)(() => {
        let e = (e) => {
            e.preventDefault();
            let t = window.location.hash.slice(1);
            t && k(t);
          },
          t = (e) => {
            let t = e.target.closest("a");
            if (t && t.getAttribute("href")?.startsWith("#")) {
              (e.preventDefault(), e.stopPropagation());
              let n = t.getAttribute("href").slice(1);
              (window.history.pushState(null, "", `${g}#${n}`),
                window.scrollTo(0, 0),
                k(n));
            }
          },
          n = c.current;
        (window.addEventListener("hashchange", e),
          n?.addEventListener("click", t));
        let r = u.current ? new ResizeObserver(E) : void 0;
        return (
          r?.observe(u.current),
          window.location.hash
            ? k(window.location.hash.slice(1), 250 * !!f)
            : m && k(m, 0),
          () => {
            (window.removeEventListener("hashchange", e),
              n?.removeEventListener("click", t),
              r?.disconnect());
          }
        );
      }, [f, g, k, m, E]);
      let A = (0, n.useCallback)(() => {
          (w(e - 1),
            setTimeout(() => {
              w(e);
            }, 150));
        }, [e, w]),
        D = (0, n.useRef)(!0),
        I = (0, n.useRef)(null);
      ((0, n.useEffect)(() => {
        if (
          !d.current ||
          !D.current ||
          (window.location.hash && C.current !== window.location.hash)
        )
          return;
        let t = `${e}-${x}`;
        I.current !== t && ((I.current = t), w(e));
      }, [e, x, w]),
        (0, n.useEffect)(() => {
          l && d.current?.scrollToIndex(e, { align: "end" });
        }, [e, l]));
      let M = b || v;
      return {
        containerRef: u,
        vlistRef: d,
        scrollToBottom: A,
        scrollToHash: k,
        scrollDownButton: (0, n.useMemo)(
          () =>
            (0, t.jsx)(a.ScrollDownButton, {
              hidden: M,
              scrollToBottom: () => {
                (y(!0), w(e - 1), y(!1));
              },
            }),
          [M, w, e],
        ),
        handleScroll: N,
      };
    }
  },
  65151,
  (e) => {
    "use strict";
    var t = e.i(53223);
    function n(e) {
      let n = i(e),
        r = new Blob([n], { type: "text/plain" }),
        s = URL.createObjectURL(r),
        a = document.createElement("a");
      return (
        (a.download = "output.txt"),
        (a.href = s),
        (a.style.display = "none"),
        document.body.appendChild(a),
        a.click(),
        document.body.removeChild(a),
        URL.revokeObjectURL(s),
        (0, t.track)("DownloadOutputExecutable", { output: n })
      );
    }
    function r(e, n) {
      try {
        let r =
            e.startsWith("image/") && !e.includes("svg")
              ? new Blob([Uint8Array.from(atob(n), (e) => e.charCodeAt(0))], {
                  type: e,
                })
              : new Blob([n], { type: e }),
          i = URL.createObjectURL(r),
          s = document.createElement("a");
        s.href = i;
        let a = e.split("/")[1] || "txt";
        return (
          (s.download = `output.${a.startsWith("svg") ? "svg" : a}`),
          s.click(),
          URL.revokeObjectURL(i),
          (0, t.track)("DownloadOutputExecutable", {
            output: `${e} attachment`,
          })
        );
      } catch (e) {
        console.error("error downloading image: ", e);
      }
    }
    let i = (e) => {
      if (!e) return "No output.";
      if ("error" in e) return "Errored output. " + e.error;
      if (!Array.isArray(e.stdout) || !Array.isArray(e.stderr))
        return "Malformed output.";
      if (0 === e.stdout.length && 0 === e.stderr.length)
        return "Empty output.";
      let t = e.stdout
          .map((e) => e.map((e) => JSON.stringify(e, void 0, 2)).join(" "))
          .join("\n"),
        n = e.stderr
          .map((e) => e.map((e) => JSON.stringify(e, void 0, 2)).join(" "))
          .join("\n");
      return 0 === e.stderr.length
        ? t
        : 0 === e.stdout.length
          ? "# stderr\n\n" + n
          : "# stdout\n\n" + t + "\n\n# stderr\n\n" + n;
    };
    e.s([
      "downloadAsFile",
      () => n,
      "downloadAttachment",
      () => r,
      "getOutputString",
      () => i,
    ]);
  },
  265281,
  (e) => {
    "use strict";
    e.s(["ConsoleViewer", () => td], 265281);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(908431),
      i = e.i(176248),
      s = e.i(304649),
      a = e.i(280738),
      o = e.i(638200),
      l = e.i(230902),
      c = e.i(956562),
      u = e.i(449381),
      d = e.i(70165),
      h = e.i(110909),
      p = e.i(53223),
      m = e.i(504066),
      f = e.i(318727),
      g = e.i(807260),
      x = e.i(65151),
      v = e.i(418929),
      y = e.i(181761);
    let b =
        "aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",
      j =
        "121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",
      w = (e, t) => {
        for (let n in t) e[n] = t[n];
        return e;
      },
      C = "numeric",
      k = "ascii",
      S = "alpha",
      N = "asciinumeric",
      E = "alphanumeric",
      A = "domain",
      D = "emoji",
      I = "scheme",
      M = "slashscheme",
      T = "whitespace";
    function L(e, t) {
      return (e in t || (t[e] = []), t[e]);
    }
    function P(e, t, n) {
      for (let r in (t[C] && ((t[N] = !0), (t[E] = !0)),
      t[k] && ((t[N] = !0), (t[S] = !0)),
      t[N] && (t[E] = !0),
      t[S] && (t[E] = !0),
      t[E] && (t[A] = !0),
      t[D] && (t[A] = !0),
      t)) {
        let t = L(r, n);
        0 > t.indexOf(e) && t.push(e);
      }
    }
    function R(e, t) {
      let n = {};
      for (let r in t) t[r].indexOf(e) >= 0 && (n[r] = !0);
      return n;
    }
    function F(e) {
      (void 0 === e && (e = null),
        (this.j = {}),
        (this.jr = []),
        (this.jd = null),
        (this.t = e));
    }
    ((F.groups = {}),
      (F.prototype = {
        accepts() {
          return !!this.t;
        },
        go(e) {
          let t = this,
            n = t.j[e];
          if (n) return n;
          for (let n = 0; n < t.jr.length; n++) {
            let r = t.jr[n][0],
              i = t.jr[n][1];
            if (i && r.test(e)) return i;
          }
          return t.jd;
        },
        has(e, t) {
          return (void 0 === t && (t = !1), t ? e in this.j : !!this.go(e));
        },
        ta(e, t, n, r) {
          for (let i = 0; i < e.length; i++) this.tt(e[i], t, n, r);
        },
        tr(e, t, n, r) {
          let i;
          return (
            (r = r || F.groups),
            t && t.j ? (i = t) : ((i = new F(t)), n && r && P(t, n, r)),
            this.jr.push([e, i]),
            i
          );
        },
        ts(e, t, n, r) {
          let i = this,
            s = e.length;
          if (!s) return i;
          for (let t = 0; t < s - 1; t++) i = i.tt(e[t]);
          return i.tt(e[s - 1], t, n, r);
        },
        tt(e, t, n, r) {
          r = r || F.groups;
          let i = this;
          if (t && t.j) return ((i.j[e] = t), t);
          let s = t,
            a,
            o = i.go(e);
          return (
            o
              ? (w((a = new F()).j, o.j),
                a.jr.push.apply(a.jr, o.jr),
                (a.jd = o.jd),
                (a.t = o.t))
              : (a = new F()),
            s &&
              (r &&
                (a.t && "string" == typeof a.t
                  ? P(s, w(R(a.t, r), n), r)
                  : n && P(s, n, r)),
              (a.t = s)),
            (i.j[e] = a),
            a
          );
        },
      }));
    let _ = (e, t, n, r, i) => e.ta(t, n, r, i),
      O = (e, t, n, r, i) => e.tr(t, n, r, i),
      B = (e, t, n, r, i) => e.ts(t, n, r, i),
      V = (e, t, n, r, i) => e.tt(t, n, r, i),
      z = "WORD",
      H = "UWORD",
      $ = "LOCALHOST",
      U = "TLD",
      G = "UTLD",
      W = "SCHEME",
      q = "SLASH_SCHEME",
      Z = "NUM",
      K = "WS",
      Y = "NL",
      J = "OPENBRACE",
      Q = "CLOSEBRACE",
      X = "OPENBRACKET",
      ee = "CLOSEBRACKET",
      et = "OPENPAREN",
      en = "CLOSEPAREN",
      er = "OPENANGLEBRACKET",
      ei = "CLOSEANGLEBRACKET",
      es = "FULLWIDTHLEFTPAREN",
      ea = "FULLWIDTHRIGHTPAREN",
      eo = "LEFTCORNERBRACKET",
      el = "RIGHTCORNERBRACKET",
      ec = "LEFTWHITECORNERBRACKET",
      eu = "RIGHTWHITECORNERBRACKET",
      ed = "FULLWIDTHLESSTHAN",
      eh = "FULLWIDTHGREATERTHAN",
      ep = "AMPERSAND",
      em = "APOSTROPHE",
      ef = "ASTERISK",
      eg = "AT",
      ex = "BACKSLASH",
      ev = "BACKTICK",
      ey = "CARET",
      eb = "COLON",
      ej = "COMMA",
      ew = "DOLLAR",
      eC = "DOT",
      ek = "EQUALS",
      eS = "EXCLAMATION",
      eN = "HYPHEN",
      eE = "PERCENT",
      eA = "PIPE",
      eD = "PLUS",
      eI = "POUND",
      eM = "QUERY",
      eT = "QUOTE",
      eL = "SEMI",
      eP = "SLASH",
      eR = "TILDE",
      eF = "UNDERSCORE",
      e_ = "EMOJI",
      eO = "SYM";
    var eB = Object.freeze({
      __proto__: null,
      WORD: z,
      UWORD: H,
      LOCALHOST: $,
      TLD: U,
      UTLD: G,
      SCHEME: W,
      SLASH_SCHEME: q,
      NUM: Z,
      WS: K,
      NL: Y,
      OPENBRACE: J,
      CLOSEBRACE: Q,
      OPENBRACKET: X,
      CLOSEBRACKET: ee,
      OPENPAREN: et,
      CLOSEPAREN: en,
      OPENANGLEBRACKET: er,
      CLOSEANGLEBRACKET: ei,
      FULLWIDTHLEFTPAREN: es,
      FULLWIDTHRIGHTPAREN: ea,
      LEFTCORNERBRACKET: eo,
      RIGHTCORNERBRACKET: el,
      LEFTWHITECORNERBRACKET: ec,
      RIGHTWHITECORNERBRACKET: eu,
      FULLWIDTHLESSTHAN: ed,
      FULLWIDTHGREATERTHAN: eh,
      AMPERSAND: ep,
      APOSTROPHE: em,
      ASTERISK: ef,
      AT: eg,
      BACKSLASH: ex,
      BACKTICK: ev,
      CARET: ey,
      COLON: eb,
      COMMA: ej,
      DOLLAR: ew,
      DOT: eC,
      EQUALS: ek,
      EXCLAMATION: eS,
      HYPHEN: eN,
      PERCENT: eE,
      PIPE: eA,
      PLUS: eD,
      POUND: eI,
      QUERY: eM,
      QUOTE: eT,
      SEMI: eL,
      SLASH: eP,
      TILDE: eR,
      UNDERSCORE: eF,
      EMOJI: e_,
      SYM: eO,
    });
    let eV = /[a-z]/,
      ez = /\p{L}/u,
      eH = /\p{Emoji}/u,
      e$ = /\d/,
      eU = /\s/,
      eG = "\n",
      eW = "",
      eq = "",
      eZ = null,
      eK = null;
    function eY(e) {
      void 0 === e && (e = []);
      let t = {};
      F.groups = t;
      let n = new F();
      (null == eZ && (eZ = e0(b)),
        null == eK && (eK = e0(j)),
        V(n, "'", em),
        V(n, "{", J),
        V(n, "}", Q),
        V(n, "[", X),
        V(n, "]", ee),
        V(n, "(", et),
        V(n, ")", en),
        V(n, "<", er),
        V(n, ">", ei),
        V(n, "", es),
        V(n, "", ea),
        V(n, "", eo),
        V(n, "", el),
        V(n, "", ec),
        V(n, "", eu),
        V(n, "", ed),
        V(n, "", eh),
        V(n, "&", ep),
        V(n, "*", ef),
        V(n, "@", eg),
        V(n, "`", ev),
        V(n, "^", ey),
        V(n, ":", eb),
        V(n, ",", ej),
        V(n, "$", ew),
        V(n, ".", eC),
        V(n, "=", ek),
        V(n, "!", eS),
        V(n, "-", eN),
        V(n, "%", eE),
        V(n, "|", eA),
        V(n, "+", eD),
        V(n, "#", eI),
        V(n, "?", eM),
        V(n, '"', eT),
        V(n, "/", eP),
        V(n, ";", eL),
        V(n, "~", eR),
        V(n, "_", eF),
        V(n, "\\", ex));
      let r = O(n, e$, Z, { [C]: !0 });
      O(r, e$, r);
      let i = O(n, eV, z, { [k]: !0 });
      O(i, eV, i);
      let s = O(n, ez, H, { [S]: !0 });
      (O(s, eV), O(s, ez, s));
      let a = O(n, eU, K, { [T]: !0 });
      (V(n, eG, Y, { [T]: !0 }), V(a, eG), O(a, eU, a));
      let o = O(n, eH, e_, { [D]: !0 });
      (O(o, eH, o), V(o, eW, o), O(V(o, eq), eH, o));
      let l = [[eV, i]],
        c = [
          [eV, null],
          [ez, s],
        ];
      for (let e = 0; e < eZ.length; e++) eX(n, eZ[e], U, z, l);
      for (let e = 0; e < eK.length; e++) eX(n, eK[e], G, H, c);
      (P(U, { tld: !0, ascii: !0 }, t),
        P(G, { utld: !0, alpha: !0 }, t),
        eX(n, "file", W, z, l),
        eX(n, "mailto", W, z, l),
        eX(n, "http", q, z, l),
        eX(n, "https", q, z, l),
        eX(n, "ftp", q, z, l),
        eX(n, "ftps", q, z, l),
        P(W, { scheme: !0, ascii: !0 }, t),
        P(q, { slashscheme: !0, ascii: !0 }, t),
        (e = e.sort((e, t) => (e[0] > t[0] ? 1 : -1))));
      for (let t = 0; t < e.length; t++) {
        let r = e[t][0],
          i = e[t][1] ? { [I]: !0 } : { [M]: !0 };
        (r.indexOf("-") >= 0
          ? (i[A] = !0)
          : eV.test(r)
            ? e$.test(r)
              ? (i[N] = !0)
              : (i[k] = !0)
            : (i[C] = !0),
          B(n, r, r, i));
      }
      return (
        B(n, "localhost", $, { ascii: !0 }),
        (n.jd = new F(eO)),
        { start: n, tokens: w({ groups: t }, eB) }
      );
    }
    function eJ(e, t) {
      let n = eQ(t.replace(/[A-Z]/g, (e) => e.toLowerCase())),
        r = n.length,
        i = [],
        s = 0,
        a = 0;
      for (; a < r; ) {
        let o = e,
          l = null,
          c = 0,
          u = null,
          d = -1,
          h = -1;
        for (; a < r && (l = o.go(n[a])); )
          ((o = l).accepts()
            ? ((d = 0), (h = 0), (u = o))
            : d >= 0 && ((d += n[a].length), h++),
            (c += n[a].length),
            (s += n[a].length),
            a++);
        ((s -= d),
          (a -= h),
          (c -= d),
          i.push({ t: u.t, v: t.slice(s - c, s), s: s - c, e: s }));
      }
      return i;
    }
    function eQ(e) {
      let t = [],
        n = e.length,
        r = 0;
      for (; r < n; ) {
        let i,
          s = e.charCodeAt(r),
          a =
            s < 55296 ||
            s > 56319 ||
            r + 1 === n ||
            (i = e.charCodeAt(r + 1)) < 56320 ||
            i > 57343
              ? e[r]
              : e.slice(r, r + 2);
        (t.push(a), (r += a.length));
      }
      return t;
    }
    function eX(e, t, n, r, i) {
      let s,
        a = t.length;
      for (let n = 0; n < a - 1; n++) {
        let a = t[n];
        (e.j[a]
          ? (s = e.j[a])
          : (((s = new F(r)).jr = i.slice()), (e.j[a] = s)),
          (e = s));
      }
      return (((s = new F(n)).jr = i.slice()), (e.j[t[a - 1]] = s), s);
    }
    function e0(e) {
      let t = [],
        n = [],
        r = 0,
        i = "0123456789";
      for (; r < e.length; ) {
        let s = 0;
        for (; i.indexOf(e[r + s]) >= 0; ) s++;
        if (s > 0) {
          t.push(n.join(""));
          for (let t = parseInt(e.substring(r, r + s), 10); t > 0; t--) n.pop();
          r += s;
        } else (n.push(e[r]), r++);
      }
      return t;
    }
    let e1 = {
      defaultProtocol: "http",
      events: null,
      format: e5,
      formatHref: e5,
      nl2br: !1,
      tagName: "a",
      target: null,
      rel: null,
      validate: !0,
      truncate: 1 / 0,
      className: null,
      attributes: null,
      ignoreTags: [],
      render: null,
    };
    function e2(e, t) {
      void 0 === t && (t = null);
      let n = w({}, e1);
      e && (n = w(n, e instanceof e2 ? e.o : e));
      let r = n.ignoreTags,
        i = [];
      for (let e = 0; e < r.length; e++) i.push(r[e].toUpperCase());
      ((this.o = n), t && (this.defaultRender = t), (this.ignoreTags = i));
    }
    function e5(e) {
      return e;
    }
    function e3(e, t) {
      ((this.t = "token"), (this.v = e), (this.tk = t));
    }
    function e4(e, t) {
      class n extends e3 {
        constructor(t, n) {
          (super(t, n), (this.t = e));
        }
      }
      for (let e in t) n.prototype[e] = t[e];
      return ((n.t = e), n);
    }
    ((e2.prototype = {
      o: e1,
      ignoreTags: [],
      defaultRender: (e) => e,
      check(e) {
        return this.get("validate", e.toString(), e);
      },
      get(e, t, n) {
        let r = null != t,
          i = this.o[e];
        return (
          i &&
            ("object" == typeof i
              ? "function" == typeof (i = n.t in i ? i[n.t] : e1[e]) &&
                r &&
                (i = i(t, n))
              : "function" == typeof i && r && (i = i(t, n.t, n))),
          i
        );
      },
      getObj(e, t, n) {
        let r = this.o[e];
        return ("function" == typeof r && null != t && (r = r(t, n.t, n)), r);
      },
      render(e) {
        let t = e.render(this);
        return (this.get("render", null, e) || this.defaultRender)(t, e.t, e);
      },
    }),
      (e3.prototype = {
        isLink: !1,
        toString() {
          return this.v;
        },
        toHref(e) {
          return this.toString();
        },
        toFormattedString(e) {
          let t = this.toString(),
            n = e.get("truncate", t, this),
            r = e.get("format", t, this);
          return n && r.length > n ? r.substring(0, n) + "" : r;
        },
        toFormattedHref(e) {
          return e.get(
            "formatHref",
            this.toHref(e.get("defaultProtocol")),
            this,
          );
        },
        startIndex() {
          return this.tk[0].s;
        },
        endIndex() {
          return this.tk[this.tk.length - 1].e;
        },
        toObject(e) {
          return (
            void 0 === e && (e = e1.defaultProtocol),
            {
              type: this.t,
              value: this.toString(),
              isLink: this.isLink,
              href: this.toHref(e),
              start: this.startIndex(),
              end: this.endIndex(),
            }
          );
        },
        toFormattedObject(e) {
          return {
            type: this.t,
            value: this.toFormattedString(e),
            isLink: this.isLink,
            href: this.toFormattedHref(e),
            start: this.startIndex(),
            end: this.endIndex(),
          };
        },
        validate(e) {
          return e.get("validate", this.toString(), this);
        },
        render(e) {
          let t = this,
            n = this.toHref(e.get("defaultProtocol")),
            r = e.get("formatHref", n, this),
            i = e.get("tagName", n, t),
            s = this.toFormattedString(e),
            a = {},
            o = e.get("className", n, t),
            l = e.get("target", n, t),
            c = e.get("rel", n, t),
            u = e.getObj("attributes", n, t),
            d = e.getObj("events", n, t);
          return (
            (a.href = r),
            o && (a.class = o),
            l && (a.target = l),
            c && (a.rel = c),
            u && w(a, u),
            { tagName: i, attributes: a, content: s, eventListeners: d }
          );
        },
      }));
    let e9 = e4("email", {
        isLink: !0,
        toHref() {
          return "mailto:" + this.toString();
        },
      }),
      e7 = e4("text"),
      e6 = e4("nl"),
      e8 = e4("url", {
        isLink: !0,
        toHref(e) {
          return (
            void 0 === e && (e = e1.defaultProtocol),
            this.hasProtocol() ? this.v : `${e}://${this.v}`
          );
        },
        hasProtocol() {
          let e = this.tk;
          return e.length >= 2 && e[0].t !== $ && e[1].t === eb;
        },
      }),
      te = (e) => new F(e);
    function tt(e) {
      let { groups: t } = e,
        n = t.domain.concat([
          ep,
          ef,
          eg,
          ex,
          ev,
          ey,
          ew,
          ek,
          eN,
          Z,
          eE,
          eA,
          eD,
          eI,
          eP,
          eO,
          eR,
          eF,
        ]),
        r = [
          em,
          eb,
          ej,
          eC,
          eS,
          eM,
          eT,
          eL,
          er,
          ei,
          J,
          Q,
          ee,
          X,
          et,
          en,
          es,
          ea,
          eo,
          el,
          ec,
          eu,
          ed,
          eh,
        ],
        i = [
          ep,
          em,
          ef,
          ex,
          ev,
          ey,
          ew,
          ek,
          eN,
          J,
          Q,
          eE,
          eA,
          eD,
          eI,
          eM,
          eP,
          eO,
          eR,
          eF,
        ],
        s = te(),
        a = V(s, eR);
      (_(a, i, a), _(a, t.domain, a));
      let o = te(),
        l = te(),
        c = te();
      (_(s, t.domain, o),
        _(s, t.scheme, l),
        _(s, t.slashscheme, c),
        _(o, i, a),
        _(o, t.domain, o));
      let u = V(o, eg);
      (V(a, eg, u), V(l, eg, u), V(c, eg, u));
      let d = V(a, eC);
      (_(d, i, a), _(d, t.domain, a));
      let h = te();
      (_(u, t.domain, h), _(h, t.domain, h));
      let p = V(h, eC);
      _(p, t.domain, h);
      let m = te(e9);
      (_(p, t.tld, m), _(p, t.utld, m), V(u, $, m));
      let f = V(h, eN);
      (_(f, t.domain, h),
        _(m, t.domain, h),
        V(m, eC, p),
        V(m, eN, f),
        _(V(m, eb), t.numeric, e9));
      let g = V(o, eN),
        x = V(o, eC);
      (_(g, t.domain, o), _(x, i, a), _(x, t.domain, o));
      let v = te(e8);
      (_(x, t.tld, v),
        _(x, t.utld, v),
        _(v, t.domain, o),
        _(v, i, a),
        V(v, eC, x),
        V(v, eN, g),
        V(v, eg, u));
      let y = V(v, eb),
        b = te(e8);
      _(y, t.numeric, b);
      let j = te(e8),
        w = te();
      (_(j, n, j),
        _(j, r, w),
        _(w, n, j),
        _(w, r, w),
        V(v, eP, j),
        V(b, eP, j));
      let C = V(l, eb),
        k = V(c, eb),
        S = V(k, eP),
        N = V(S, eP);
      (_(l, t.domain, o),
        V(l, eC, x),
        V(l, eN, g),
        _(c, t.domain, o),
        V(c, eC, x),
        V(c, eN, g),
        _(C, t.domain, j),
        V(C, eP, j),
        _(N, t.domain, j),
        _(N, n, j),
        V(N, eP, j));
      let E = [
        [J, Q],
        [X, ee],
        [et, en],
        [er, ei],
        [es, ea],
        [eo, el],
        [ec, eu],
        [ed, eh],
      ];
      for (let e = 0; e < E.length; e++) {
        let [t, i] = E[e],
          s = V(j, t);
        (V(w, t, s), V(s, i, j));
        let a = te(e8);
        _(s, n, a);
        let o = te();
        (_(s, r),
          _(a, n, a),
          _(a, r, o),
          _(o, n, a),
          _(o, r, o),
          V(a, i, j),
          V(o, i, j));
      }
      return (V(s, $, v), V(s, Y, e6), { start: s, tokens: eB });
    }
    function tn(e, t, n) {
      let r = n.length,
        i = 0,
        s = [],
        a = [];
      for (; i < r; ) {
        let o = e,
          l = null,
          c = null,
          u = 0,
          d = null,
          h = -1;
        for (; i < r && !(l = o.go(n[i].t)); ) a.push(n[i++]);
        for (; i < r && (c = l || o.go(n[i].t)); )
          ((l = null),
            (o = c).accepts() ? ((h = 0), (d = o)) : h >= 0 && h++,
            i++,
            u++);
        if (h < 0) (i -= u) < r && (a.push(n[i]), i++);
        else {
          (a.length > 0 && (s.push(tr(e7, t, a)), (a = [])),
            (i -= h),
            (u -= h));
          let e = d.t,
            r = n.slice(i - u, i);
          s.push(tr(e, t, r));
        }
      }
      return (a.length > 0 && s.push(tr(e7, t, a)), s);
    }
    function tr(e, t, n) {
      let r = n[0].s,
        i = n[n.length - 1].e;
      return new e(t.slice(r, i), n);
    }
    ("undefined" != typeof console && console && console.warn) || (() => {});
    let ti = {
      scanner: null,
      parser: null,
      tokenQueue: [],
      pluginQueue: [],
      customSchemes: [],
      initialized: !1,
    };
    function ts() {
      ti.scanner = eY(ti.customSchemes);
      for (let e = 0; e < ti.tokenQueue.length; e++)
        ti.tokenQueue[e][1]({ scanner: ti.scanner });
      ti.parser = tt(ti.scanner.tokens);
      for (let e = 0; e < ti.pluginQueue.length; e++)
        ti.pluginQueue[e][1]({ scanner: ti.scanner, parser: ti.parser });
      ti.initialized = !0;
    }
    function ta(e) {
      return (
        ti.initialized || ts(),
        tn(ti.parser.start, e, eJ(ti.scanner.start, e))
      );
    }
    function to(e, t, n) {
      if (
        (void 0 === t && (t = null),
        void 0 === n && (n = null),
        t && "object" == typeof t)
      ) {
        if (n)
          throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);
        ((n = t), (t = null));
      }
      let r = new e2(n),
        i = ta(e),
        s = [];
      for (let e = 0; e < i.length; e++) {
        let n = i[e];
        n.isLink &&
          (!t || n.t === t) &&
          r.check(n) &&
          s.push(n.toFormattedObject(r));
      }
      return s;
    }
    let tl = n.default.memo(({ children: e }) => {
      let r = n.default.useMemo(() => {
        let t = to(e);
        if (0 === t.length) return [{ type: "text", content: e, href: "" }];
        let n = [],
          r = 0;
        for (let i of t)
          i.href.startsWith("http://localhost") ||
            i.href.startsWith("http://127.") ||
            i.href.startsWith("http://192.168.") ||
            i.href.startsWith("http://10.") ||
            (i.start > r &&
              n.push({ type: "text", content: e.slice(r, i.start), href: "" }),
            n.push({ type: "link", content: i.value, href: i.href }),
            (r = i.end));
        return (
          r < e.length &&
            n.push({ type: "text", content: e.slice(r), href: "" }),
          n
        );
      }, [e]);
      return (0, t.jsx)(t.Fragment, {
        children: r.map((e, n) =>
          "link" === e.type
            ? (0, t.jsx)(
                "a",
                {
                  href: e.href,
                  target: "_blank",
                  rel: "noopener noreferrer",
                  className: "text-v0-blue-700 hover:underline cursor-pointer",
                  onClick: (e) => e.stopPropagation(),
                  children: (0, t.jsx)(y.default, { children: e.content }),
                },
                n,
              )
            : (0, t.jsx)(y.default, { children: e.content }, n),
        ),
      });
    });
    function tc({ event: e, canWriteToChat: n, onAskV0: r }) {
      return (0, t.jsxs)("div", {
        className: "flex items-start gap-4 px-2 py-1 font-mono text-sm",
        children: [
          (0, t.jsxs)("div", {
            className: "flex gap-2",
            children: [
              (0, t.jsxs)("time", {
                className: "text-[13px]",
                children: [
                  (0, l.format)(new Date(e.timestamp), "HH:mm:ss.SSS"),
                  "Z",
                ],
              }),
              e.isServer &&
                (0, t.jsx)("span", {
                  className:
                    "rounded-full bg-v0-gray-100 px-2 py-0.5 text-xs font-medium text-v0-gray-900",
                  children: "[SERVER]",
                }),
            ],
          }),
          (0, t.jsx)("div", {
            className: "w-full flex-1 whitespace-pre-wrap text-[13px]",
            children: (0, t.jsx)(tl, { children: e.message }),
          }),
          n &&
            "error" === e.method &&
            (0, t.jsx)("div", {
              className:
                "absolute right-3 top-0.5 opacity-0 transition-opacity group-hover:opacity-100",
              children: (0, t.jsxs)(i.Button, {
                onClick: () => r(e),
                size: "sm",
                variant: "secondary",
                className:
                  "h-[24px] gap-0.5 rounded-md border-none px-1.5 py-0.5 font-sans text-[13px] font-medium shadow-sm",
                children: [
                  "Ask ",
                  (0, t.jsx)(c.LogoV0, { className: "ml-0.5 h-3 w-3" }),
                ],
              }),
            }),
        ],
      });
    }
    function tu({ event: e, activeFilePath: r, setActiveFilePath: i }) {
      let s = n.default.useMemo(() => {
          try {
            let t = JSON.parse(e.content);
            return "string" == typeof t ? t : e.content;
          } catch {
            return e.content;
          }
        }, [e.content]),
        {
          isCopied: a,
          copyToClipboard: o,
          copyImageToClipboard: l,
        } = (0, m.useCopyToClipboard)({ timeout: 2e3 }),
        c = async (t) => {
          if (a) return;
          if (e.attachment) {
            let { mimeType: t, data: n } = e.attachment;
            return (
              t.startsWith("image/") ? await l(n, t) : await o(n),
              (0, p.track)("CopyOutputExecutable", {
                output: `${t} attachment`,
              })
            );
          }
          let n = (0, x.getOutputString)(t);
          return (
            await o(n),
            (0, p.track)("CopyOutputExecutable", { output: n })
          );
        },
        u = async () => {
          if (!e.attachment) return (0, x.downloadAsFile)(d());
          {
            let { mimeType: t, data: n } = e.attachment;
            return (0, x.downloadAttachment)(t, n);
          }
        },
        d = () => ({
          stdout: "stdout" === e.method ? [[s]] : [],
          stderr: "stderr" === e.method ? [[s]] : [],
        }),
        f = () => {
          if (!e.attachment) return (0, t.jsx)(t.Fragment, {});
          let { mimeType: n, data: r } = e.attachment;
          if (n.startsWith("image/")) {
            let e =
              "image/svg+xml" === n
                ? `data:${n},${encodeURIComponent(r)}`
                : `data:${n};base64,${r}`;
            return (0, t.jsx)("div", {
              className: "mt-2 max-w-lg",
              children: (0, t.jsx)("img", {
                src: e,
                alt: "Execution output",
                className: "max-h-96 w-full rounded-md border object-contain",
                style: { imageRendering: "auto" },
              }),
            });
          }
          return (0, t.jsx)("pre", {
            className: "whitespace-pre-wrap break-words",
            children: r,
          });
        };
      return (0, t.jsxs)(h.CodeOutputMessage, {
        fileName: e.fileName,
        isCopied: a,
        handleCopy: () => void c(d()),
        handleDownload: () => void u(),
        handleFileOpen: () => {
          r !== e.fileName && i?.(e.fileName);
        },
        children: [
          "string" == typeof s
            ? (0, t.jsx)("pre", {
                className: "whitespace-pre-wrap break-words",
                children: s,
              })
            : (0, t.jsx)(h.JsonRowView, {
                src: s,
                className:
                  "[&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-v0-gray-900 [&_.jv-indent]:pl-4",
                style:
                  "stderr" === e.method ? { color: "rgb(192,27,93)" } : void 0,
              }),
          f(),
        ],
      });
    }
    function td({
      consoleEvents: e,
      clearLogs: n,
      canWriteToChat: r,
      hideHeader: l,
      className: c,
      activeFilePath: p,
      setActiveFilePath: m,
    }) {
      let { actions: x } = (0, v.useCurrentChatPrompt)(),
        { handleInputChange: y, focusPrompt: b } = x,
        j = (0, u.useSetActiveBlockView)(),
        {
          containerRef: w,
          vlistRef: C,
          handleScroll: k,
          scrollDownButton: S,
        } = (0, g.useVirtualScroll)({ count: e.length, pushToBottom: !0 }),
        N = (e) => {
          (y({
            initialValue: `The code has the following ${e.method}:
\`\`\`
${"console" === e.type ? e.message : e.content}
\`\`\`
Revise the code to address this issue.`,
            force: !0,
            save: !0,
          }),
            b(),
            (0, d.getIsMobile)() && j(!1));
        };
      return (0, t.jsxs)("div", {
        className: (0, s.cn)(
          "bg-v0-background-200 flex size-full flex-col items-stretch overflow-hidden",
          c,
        ),
        children: [
          !l &&
            (0, t.jsxs)(a.BlockTabHeader, {
              className: "justify-between gap-1",
              bottomBorder: !0,
              children: [
                (0, t.jsx)("h3", {
                  className: "text-[13px] font-medium",
                  children: "Console",
                }),
                (0, t.jsxs)("div", {
                  className: "flex items-center gap-1.5",
                  children: [
                    (0, t.jsxs)("div", {
                      className: "text-xs",
                      children: [
                        (0, t.jsxs)("span", { children: [e.length, " "] }),
                        (0, t.jsx)("span", {
                          children: 1 === e.length ? "event" : "events",
                        }),
                      ],
                    }),
                    (0, t.jsx)("div", {
                      className: "ml-1 h-[16px] w-px bg-v0-gray-200",
                      "aria-hidden": !0,
                    }),
                    (0, t.jsx)(i.Button, {
                      variant: "ghost",
                      size: "xs",
                      className: "text-v0-gray-900",
                      tooltip: "Clear console output",
                      onClick: n,
                      disabled: 0 === e.length,
                      children: (0, t.jsx)(o.AnimatedTrash, {}),
                    }),
                  ],
                }),
              ],
            }),
          (0, t.jsxs)("div", {
            className: "relative size-full",
            style: { contain: "strict" },
            children: [
              (0, t.jsx)("div", {
                className: "h-full w-full overflow-y-auto",
                ref: w,
                style: { overflowAnchor: "none" },
                children: (0, t.jsx)("div", {
                  className: "mx-auto w-full",
                  children:
                    0 === e.length
                      ? (0, t.jsx)("div", {
                          className:
                            "flex h-full items-center justify-center p-8",
                          children: (0, t.jsx)("div", {
                            className: "text-center text-sm text-v0-gray-900",
                            children: "No logs available to display",
                          }),
                        })
                      : (0, t.jsx)(f.Virtualizer, {
                          scrollRef: w,
                          ref: C,
                          onScroll: k,
                          children: e.map((e, n) =>
                            (0, t.jsx)(
                              "div",
                              {
                                className: (0, s.cn)(
                                  "group relative flex min-h-[24px] items-center",
                                  (0, h.getEventStyle)(e.method),
                                ),
                                children:
                                  "console" === e.type
                                    ? (0, t.jsx)(tc, {
                                        event: e,
                                        canWriteToChat: r,
                                        onAskV0: N,
                                      })
                                    : (0, t.jsx)(tu, {
                                        event: e,
                                        activeFilePath: p,
                                        setActiveFilePath: m,
                                      }),
                              },
                              `${e.timestamp}-${n}`,
                            ),
                          ),
                        }),
                }),
              }),
              e.length > 0
                ? (0, t.jsx)("div", {
                    className:
                      "sticky inset-x-0 bottom-2 z-50 flex justify-center",
                    children: S,
                  })
                : null,
            ],
          }),
        ],
      });
    }
    r.z.object({
      type: r.z.literal("output"),
      blockId: r.z.string(),
      fileName: r.z.string(),
      content: r.z.string(),
      timestamp: r.z.string(),
      method: r.z.enum(["stdout", "stderr"]),
      attachment: r.z
        .object({ mimeType: r.z.string(), data: r.z.string() })
        .optional(),
    });
  },
  359783,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191);
    let r = (0, n.createContext)({});
    function i({ children: e }) {
      return (0, t.jsx)(r.Provider, { value: {}, children: e });
    }
    function s() {
      return (0, n.use)(r);
    }
    e.s(["DataProvider", () => i, "useClientGlobalData", () => s]);
  },
  930293,
  (e) => {
    "use strict";
    var t = e.i(92304),
      n = e.i(359783);
    let r = ({ chatId: e, vmId: r }) => {
      let i = (0, n.useClientGlobalData)(),
        s =
          i.globalSessionTokenCache || (i.globalSessionTokenCache = new Map()),
        { data: a, error: o } = (0, t.default)(
          e || r ? ["frame-token", e, r] : null,
          async () => {
            let t = await fetch(
              `/chat/api/chat/frame-token?cid=${e}&vid=${r || ""}`,
            );
            if (!t.ok) throw Error("Failed to fetch session token");
            return t.text();
          },
        ),
        l = `${e || ""}:${r || ""}`;
      return (
        "string" != typeof a || s.has(l) || s.set(l, a),
        { token: s.get(l), error: o }
      );
    };
    e.s(["useSessionTokenForFrame", 0, r]);
  },
  805374,
  532330,
  (e) => {
    "use strict";
    e.s(["PreviewBlockTitleActions", () => y], 805374);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(772438),
      i = e.i(284546),
      s = e.i(297239),
      a = e.i(707827),
      o = e.i(92479),
      l = e.i(242759),
      c = e.i(127169),
      u = e.i(519738),
      d = e.i(385671),
      h = t,
      p = e.i(796104),
      m = e.i(741006),
      f = e.i(235009),
      g = e.i(996174),
      x = e.i(176248);
    function v({
      activeTab: e,
      onTabChange: t,
      previewTooltip: n = "Preview",
      codeTooltip: r = "Code",
      previewDisabled: i = !1,
      disabled: s = !1,
      className: a,
      previewIcon: o,
      codeIcon: l,
    }) {
      function c() {
        s || t("preview" === e ? "code" : "preview");
      }
      let u = o ?? (0, h.jsx)(m.Eye, {}),
        d = l ?? (0, h.jsx)(p.CodeWrap, {});
      return (0, h.jsxs)(h.Fragment, {
        children: [
          (0, h.jsxs)(f.TabsToggle, {
            className: `hidden sm:flex ${a || ""}`,
            defaultValue: "preview",
            value: e,
            onValueChange: (e) => {
              s || (("code" === e || "preview" === e) && t(e));
            },
            children: [
              (0, h.jsx)(g.Tooltip, {
                content: n,
                children: (0, h.jsx)(f.TabsToggleTrigger, {
                  value: "preview",
                  square: !0,
                  disabled: i || s,
                  children: u,
                }),
              }),
              (0, h.jsx)(g.Tooltip, {
                content: r,
                children: (0, h.jsx)(f.TabsToggleTrigger, {
                  value: "code",
                  square: !0,
                  disabled: s,
                  children: d,
                }),
              }),
            ],
          }),
          (0, h.jsx)(x.Button, {
            size: "sm",
            variant: "secondary",
            className: "sm:hidden px-0 size-7",
            onClick: c,
            disabled: s,
            children: "preview" === e ? d : u,
          }),
        ],
      });
    }
    function y({ blockId: e, closed: h }) {
      let {
          actions: { setActiveTabIntent: p },
        } = (0, d.useChatLayout)(),
        { activeTab: m, previewMeta: f } = (0, i.useActiveTab)(),
        g = (0, s.useT)(),
        { isStreaming: x } = (0, o.useChatLoadingState)(),
        { bl: y } = (0, l.useFlags)(),
        { isLatest: b } = (0, u.useBlockVersionInfo)(e),
        { canShowPreviewTab: j } = (0, i.useActiveTab)(),
        w = !1 === j,
        C = !h && x && !y,
        k = (0, n.useMemo)(
          () =>
            "error" === f.type
              ? f.error
              : C
                ? g("previewBlock.previewIsStreaming")
                : g("previewBlock.preview"),
          [C, g, f],
        ),
        S = (0, n.useMemo)(() => g("previewBlock.code")(!b), [g, b]),
        N = (0, n.useMemo)(
          () =>
            w && C
              ? (0, t.jsx)(a.Spinner, { size: 16 })
              : w
                ? (0, t.jsx)(r.EyeOff, { className: "size-4" })
                : void 0,
          [w, C],
        ),
        E = (0, n.useMemo)(() => {}, []);
      return (
        (0, c.useShortcut)(
          (e) => {
            "c" === e.key &&
              e.shiftKey &&
              e.metaKey &&
              (e.preventDefault(), p("preview" === m ? "code" : "preview"));
          },
          [m, p],
        ),
        (0, t.jsx)(v, {
          activeTab: m,
          onTabChange: p,
          previewTooltip: k,
          codeTooltip: S,
          previewDisabled: w,
          disabled: w,
          previewIcon: N,
          codeIcon: E,
        })
      );
    }
    e.s(["PreviewCodeToggle", () => v], 532330);
  },
  160769,
  995760,
  125347,
  (e) => {
    "use strict";
    e.s(["BlockActionDownloadZip", () => d], 160769);
    var t = e.i(324834),
      n = e.i(2072),
      r = e.i(576191);
    function i(e, t) {
      return !!(e.data?.source && e.data.lang && t.includes(e.data.lang));
    }
    e.s(["isBlockCompatible", () => i], 995760);
    let s = [
      "ts",
      "typescript",
      "typescriptreact",
      "tsx",
      "javascript",
      "javascriptreact",
      "jsx",
    ];
    e.s(["COMPATIBLE_LANGUAGES", 0, s], 125347);
    var a = e.i(301331),
      o = e.i(297239),
      l = e.i(556355),
      c = e.i(209819);
    let u = [...s, "svelte", "plaintext"];
    function d({ blockId: s, lang: d, source: h }) {
      let p = i({ data: { lang: d, source: h } }, u),
        { projectBlocks: m, project: f } = (0, a.useBlockHistory)({
          blockId: s,
        }),
        g = m?.find((e) => e.id === s),
        x = g?.type === "code-project",
        { title: v } = (0, c.useChatMetadata)(),
        y = (0, r.useCallback)(async () => {
          let t = [];
          if (x) {
            let e = `/chat/api/download-zip?id=${s}`,
              t = v ? `${e}&name=${encodeURIComponent(v)}` : e;
            window.open(t, "_blank");
          } else if (m) {
            t = m
              .map((e) => [
                {
                  name: `${f || "v0-project"}/index.tsx`,
                  input: e.source || "",
                },
              ])
              .flat();
            let n = (await e.A(950081)).downloadZip,
              r = await n(t).blob(),
              i = document.createElement("a");
            ((i.href = URL.createObjectURL(r)),
              (i.download = `${f || "v0-project"}.zip`),
              i.click(),
              i.remove());
          }
        }, [s, x, f, m, v]),
        b = (0, o.useT)();
      return s && p
        ? (0, t.jsxs)(l.DropdownMenuItem, {
            onSelect: y,
            children: [
              (0, t.jsx)(n.FileZip, {}),
              b("blockActionDownloadZip.downloadZip"),
            ],
          })
        : null;
    }
  },
  632082,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(796104),
      r = e.i(576191),
      i = e.i(995760),
      s = e.i(125347),
      a = e.i(209819),
      o = e.i(696871),
      l = e.i(667660),
      c = e.i(418625),
      u = e.i(32170);
    function d(e) {
      let { expectUser: t } = (0, u.useUser)(),
        { activeScopeSlug: n } = (0, l.useActiveScope)(),
        { chatPrivacy: r } = (0, a.useChatPrivacy)(),
        i = "public" === r || "unlisted" === r,
        {
          data: s,
          mutate: d,
          isValidating: h,
        } = (0, c.default)(
          ["/chat/b/[id]/token", e, i, n],
          async () => {
            if (i || "@remote" === e || !n) return { token: null };
            let t = await fetch(`/chat/b/${e}/token?scope=${n}`);
            return await t.json();
          },
          {
            revalidateOnMount: !0,
            revalidateOnReconnect: !1,
            revalidateOnFocus: !1,
            refreshWhenHidden: !1,
            refreshInterval: o.CLI_TOKEN_EXPIRATION_MS,
          },
        );
      return { token: s?.token, refreshToken: d, isRefreshing: h || (t && !n) };
    }
    var h = e.i(390695),
      p = e.i(297239),
      m = e.i(556355);
    let f = "latest";
    function g({ blockId: e, lang: r, source: a }) {
      let { token: o, isRefreshing: l } = d(e),
        c = (0, p.useT)();
      return (0, i.isBlockCompatible)(
        { data: { lang: r, source: a } },
        s.COMPATIBLE_LANGUAGES,
      )
        ? (0, t.jsxs)(m.DropdownMenuItem, {
            svgStyling: !1,
            className:
              "flex h-fit max-w-[270px] flex-col items-start gap-2 px-2 py-1.5 hover:bg-transparent! focus:bg-transparent focus-visible:bg-v0-gray-100",
            onKeyDown: (e) => {
              "Enter" === e.key &&
                (e.preventDefault(),
                document.getElementById("cli-command-button")?.focus());
            },
            children: [
              (0, t.jsxs)("div", {
                className: "flex items-center gap-3",
                children: [
                  (0, t.jsx)(n.CodeWrap, { className: "text-v0-gray-900!" }),
                  (0, t.jsx)("h3", {
                    className: "text-sm",
                    children: c("blockActionCli.addToCodebase"),
                  }),
                ],
              }),
              (0, t.jsx)("p", {
                className: "text-sm",
                children: c("blockActionCli.runInConsole"),
              }),
              (0, t.jsx)(x, {
                id: "cli-command-button",
                blockId: e,
                isRefreshing: l,
                token: o,
              }),
            ],
          })
        : null;
    }
    function x({ blockId: e, token: n, isRefreshing: r, id: i }) {
      let { command: s, displayedUrl: a } = v(e, n);
      return (0, t.jsx)(h.LinkCopy, {
        id: i,
        className: "font-mono",
        disabled: r,
        displayLink: `npx shadcn add "${a}";`,
        link: s,
        showToast: !0,
        successMessage: "Command copied",
        errorMessage: "Failed to copy command",
        loadingMessage: "Copying command...",
      });
    }
    function v(e, t) {
      let [n, i] = (0, r.useMemo)(() => {
        let n = new URL(`${window.location.origin}/chat/b/${e}`),
          r = `${n.protocol}//${n.hostname}/chat/b/${e}`;
        return (
          t &&
            (n.searchParams.set("token", t),
            (r = `${r}?token=${t.substring(0, 32)}...`)),
          [n, r]
        );
      }, [e, t]);
      return {
        command: `npx shadcn@${f} add "${n.toString()}"`,
        url: n,
        displayedUrl: i,
      };
    }
    e.s(["BlockActionCli", () => g], 632082);
  },
  622661,
  475337,
  (e) => {
    "use strict";
    var t = e.i(324834);
    let n = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5H14.5V9.75501L1.5 9.755V2.5ZM1.5 11.005V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.005L1.5 11.005ZM0 1H1.5H14.5H16V2.5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1Z" fill="currentColor"/>',
    );
    e.s(["Footer", 0, n], 475337);
    let r = ({ dotColor: e, className: n }) =>
      (0, t.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        className: n,
        children: [
          (0, t.jsx)("circle", {
            cx: "13.5",
            cy: "2.5",
            r: "2.5",
            className: e,
          }),
          (0, t.jsx)("path", {
            d: "M9.79199 1C9.60438 1.46333 9.5 1.96939 9.5 2.5H1.5V9.75488H14.5V6.37402C15.0563 6.23084 15.565 5.96998 16 5.62109V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.20566 15 0.140824 14.0164 0.0126953 12.7559L0 12.5V1H9.79199ZM1.5 11.0049V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V11.0049H1.5Z",
            className: "fill-current",
          }),
        ],
      });
    function i({ status: e, isExpanded: i }) {
      return !e || i
        ? (0, t.jsx)(n, { className: "text-v0-gray-900" })
        : (0, t.jsx)(r, {
            className: "text-v0-gray-900",
            dotColor: "error" === e ? "fill-red-600" : "fill-blue-600",
          });
    }
    e.s(["default", () => i], 622661);
  },
  868948,
  (e) => {
    "use strict";
    function t(e, t) {
      let n = isNaN(parseInt(e)) ? e : `An unexpected error occurred (${e})`;
      return t
        ? `${n}

${t}`
        : n.replace("FatalRendererError: ", "");
    }
    e.s(["cleanBlockError", () => t]);
  },
  395542,
  (e) => {
    "use strict";
    var t = e.i(926224);
    let n = "v0 does not currently support previewing LWC",
      r = "v0 cannot currently preview Next.js layouts",
      i = "Server Actions cannot be previewed",
      s = "v0 cannot currently preview React Server Components",
      a = "v0 cannot currently preview components with API keys",
      o = "v0 cannot currently preview React Native components",
      l = "v0 cannot currently preview Expo components",
      c = "v0 does not currently support previewing Clerk",
      u = "v0 does not currently support previewing better-sqlite3",
      d = "v0 does not currently support previewing next-intl",
      h = "v0 does not currently support previewing Express.js",
      p = "v0 does not currently support previews with file system access",
      m = "v0 does not currently support previewing Remix",
      f = "v0 does not currently support previewing react-router",
      g = "v0 does not currently support previewing MongoDB",
      x = "v0 cannot preview Route Handlers",
      v = "React hooks cannot be previewed",
      y = "v0 can not preview this file",
      b = "v0 does not currently support previewing tests",
      j = "v0 does not currently support previewing Chakra UI",
      w = "v0 does not currently support previewing swiper/css",
      C = "v0 does not currently support previewing code using googleapis",
      k = "v0 does not currently support previewing Angular",
      S =
        "v0 does not currently support previewing @mui/x-date-pickers/AdapterDateFns",
      N = "v0 does not support previewing instrumentation.ts",
      E =
        "v0 is currently investigating an issue with @mui/utils. We appreciate your patience.",
      A = [
        ["@clerk/nextjs", c],
        ["@clerk/clerk-react", c],
        ["next-intl", d],
        ["react-native", o],
        [
          "@prisma/client",
          "v0 does not currently support previewing @prisma/client",
        ],
        ["better-sqlite3", u],
        [
          "@sendgrid/mail",
          "v0 does not currently support previewing @sendgrid/mail",
        ],
        [
          "@inertiajs/react",
          "v0 does not currently support previewing Inertia.js",
        ],
        ["@chakra-ui/react", j],
        [
          "@react-pdf/renderer",
          "v0 does not currently support previewing @react-pdf/renderer",
        ],
        ["swiper/css", w],
        ["swiper/css/navigation", w],
        [
          "@playwright/test",
          "v0 does not currently support previewing Playwright",
        ],
        ["angular/router", k],
        ["angular/core", k],
        ["@angular/router", k],
        ["@angular/core", k],
        ["@angular/common", k],
        ["@mui/x-date-pickers/AdapterDateFns", S],
        ["@react-navigation/native", l],
        ["@react-navigation/stack", l],
        ["expo-router", l],
        ["express", h],
        ["expo-file-system", l],
        ["googleapis", C],
        ["fs", p],
        ["fs/promises", p],
        ["bcrypt", "v0 does not currently support previewing Node.js APIs"],
        ["@remix-run/node", m],
        ["mongodb", g],
        ["react-router-dom", f],
        ["lwc", n],
      ],
      D = ["GET", "POST", "PUT", "PATCH", "DELETE", "HEAD", "OPTIONS"];
    function I(e) {
      return D.some(
        (t) =>
          RegExp(`export (default )?async function ${t}\\(`).test(e) ||
          RegExp(`export const ${t} =`).test(e),
      );
    }
    let M = ["tsx", "html", "jsx", "js", "ts"];
    function T(e, t) {
      if (t) {
        if (t.startsWith("use-")) return v;
        if ("instrumentation.ts" === t) return N;
        let e = t.split("."),
          n = e[e.length - 1],
          r = e.length > 2 ? e[e.length - 2] : void 0;
        if (n && !M.some((e) => n === e)) return y;
        if (r && ("test" === r || "spec" === r)) return b;
      }
      for (let t of A) {
        let [n, r] = t;
        if (n && r && RegExp(`from ['"]${n.replace("/", "\\/")}['"]`).test(e))
          return r;
      }
      return /\<ClerkProvider/.test(e)
        ? c
        : /export default function (Root)?Layout/.test(e)
          ? r
          : /(^|\n)['"]use server['"]/.test(e)
            ? i
            : /export default async function/.test(e)
              ? s
              : /(API_KEY|_SECRET) =/.test(e) || /YOUR_API_KEY/.test(e)
                ? a
                : !I(e) || x;
    }
    let L = "v0 can not detect a page to preview",
      P = "No exported component found";
    function R(e) {
      return `v0 does not currently support ${e}`;
    }
    let F = {
        "next-intl": d,
        "react-native": o,
        electron: "v0 cannot currently preview Electron apps",
        "@chakra-ui/react": j,
        "better-sqlite3": u,
        lwc: n,
        "angular/router": k,
        "angular/core": k,
        "@angular/router": k,
        "@angular/core": k,
        "@angular/common": k,
        "@mui/x-date-pickers/AdapterDateFns": S,
        "@react-navigation/native": l,
        "@react-navigation/stack": l,
        "expo-router": l,
        express: h,
        "expo-file-system": l,
        googleapis: C,
        "@remix-run/node": m,
        mongodb: g,
        "react-router-dom": f,
        "laravel-mix": "v0 does not currently support previewing Laravel",
        mongoose: "v0 does not currently support previewing Mongoose",
        "discord-player": R("discord-player"),
        "fluent-ffmpeg": R("fluent-ffmpeg"),
        hono: R("hono"),
        undici: R("undici"),
        http2: R("http2"),
        payload: R("payload"),
        "@nestjs/mongoose": R("@nestjs/mongoose"),
        "@nestjs/core": R("@nestjs/core"),
        "@ionic/angular": R("@ionic/angular"),
        "firebase-admin/database": R("firebase-admin/database"),
        "firebase-functions": R("firebase-functions"),
        "puppeteer-core": R("puppeteer-core"),
        "coffee-script": R("coffee-script"),
        msw: R("msw"),
        "msw/node": R("msw/node"),
        mysql2: R("mysql2"),
        "mysql2/promise": R("mysql2"),
        "@worldcoin/idkit": R("@worldcoin/idkit"),
        "discord.js": R("discord.js"),
        nativewind: R("nativewind"),
        commander: R("commander"),
        cosmiconfig: R("cosmiconfig"),
        "react-native-svg": R("react-native-svg"),
        "google-auth-library": R("google-auth-library"),
        nextra: R("nextra"),
      },
      _ = Object.keys(F).join("|"),
      O = RegExp(`from ['"](${_})['"]`),
      B = RegExp(`import ['"](${_})['"]`),
      V = RegExp(`import\\(['"](${_})['"]\\)`),
      z = RegExp(`require\\(['"](${_})['"]\\)`),
      H = { "@mui/utils": E },
      $ = Object.keys(H).join("|"),
      U = RegExp(`from ['"](${$})['"]`),
      G = RegExp(`import ['"](${$})['"]`),
      W = RegExp(`import\\(['"](${$})['"]\\)`),
      q = RegExp(`require\\(['"](${$})['"]\\)`);
    function Z(e) {
      let t = /\.(ts|tsx|js|jsx|mjs|mts|cjs)$/i,
        n = e.filter((e) => !e.isDeleted);
      if (!n || 0 === n.length) return L;
      let r = !1;
      if (
        !n.some(
          (e) =>
            e.meta.file &&
            (e.meta.file.endsWith(".tsx") ||
              e.meta.file.endsWith(".jsx") ||
              (e.meta.file.endsWith("route.ts") && e.source.includes("GET"))),
        )
      )
        return L;
      let i = n.filter((e) => e.meta.file && t.test(e.meta.file));
      if (!i.length) return L;
      for (let { source: e } of i) {
        let t = e
            .split("\n")
            .filter((e) => e.trim().startsWith("import"))
            .join("\n"),
          n = t.match(O) || t.match(B) || e.match(V) || e.match(z);
        if (n && n[1]) return F[n[1]];
        let i = t.match(U) || t.match(G) || e.match(W) || e.match(q);
        if (i && i[1]) return { warning: H[i[1]] };
        e.includes("export") && (r = !0);
      }
      return !!r || P;
    }
    function K(e, n) {
      let r;
      return Z(
        (r =
          "code-project" === n.type
            ? (0, t.parseMultiFileSource)({
                source: e,
                blockType: "code-project",
                blockId: "fake-block-id",
              })
            : [{ source: e, meta: n, isDeleted: !1 }]),
      );
    }
    e.s([
      "hasVisibleNextLiteContent",
      () => K,
      "hasVisibleReactContent",
      () => T,
    ]);
  },
  696825,
  (e) => {
    "use strict";
    var t = e.i(156029);
    function n() {
      let { getBlockForked: e, setBlockForked: n } = (0, t.useBlockMappings)();
      return { getBlockForked: e, setBlockForked: n };
    }
    e.s(["useForkedBlocks", () => n]);
  },
  988094,
  (e) => {
    "use strict";
    e.s(["ErrorsBanner", () => C]);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(225923),
      i = e.i(442221),
      s = e.i(956562),
      a = e.i(672001),
      o = e.i(504066),
      l = e.i(449381),
      c = e.i(70165),
      u = e.i(236699),
      d = e.i(576191),
      h = e.i(304649),
      p = e.i(472166);
    e.i(168204);
    var m = e.i(225695),
      f = e.i(487581),
      g = e.i(393799),
      x = e.i(242759),
      v = e.i(436311);
    e.i(904347);
    var y = e.i(37737),
      b = e.i(199490);
    function j(e) {
      return e.includes("https://ai-gateway.vercel.sh")
        ? e.includes("rate_limit_exceeded")
          ? " Rate Limit Exceeded\n\nYou have reached your Vercel AI Gateway rate limit. Add a credit card to continue:\nhttps://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dtop-up"
          : e.includes("no_providers_available")
            ? " External Model Detected\n\nYou're connecting to a third-party service. Generate an AI Gateway key or add your own to continue and send data to the model provider."
            : e.includes("customer_verification_required")
              ? " Verification Required\n\nAdd a credit card to verify your account and continue using AI models.\n\nhttps://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dadd-credit-card"
              : e.includes("insufficient_funds")
                ? " Insufficient Funds\n\nYour AI Gateway credits have been depleted. Top up to continue:\nhttps://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dtop-up"
                : null
        : null;
    }
    function w(e) {
      return (
        e.includes("https://ai-gateway.vercel.sh") &&
        e.includes("no_providers_available")
      );
    }
    function C({ errors: e, onDismiss: C, blockId: k, canWriteToChat: S }) {
      let { submit: N } = (0, p.useV0Chat)(),
        E = (0, l.useSetActiveBlockView)(),
        [A, D] = (0, d.useState)(!1),
        [I] = (0, g.useAtom)(f.previewBlockDisplayedErrorsVersion),
        { ffw0: M } = (0, x.useFlags)(),
        { hasRemaining: T } = (0, v.useFreeFixWithV0Usage)(),
        L = (0, d.useMemo)(
          () => e.filter((e) => e.blockId === (I || k)),
          [e, I, k],
        ),
        { isCopied: P, copyToClipboard: R } = (0, o.useCopyToClipboard)({
          timeout: 2e3,
        }),
        [F, _] = (0, d.useState)(0),
        O = L[F],
        B = !!O && w(O.text),
        [V, z] = (0, d.useState)(B);
      (0, d.useEffect)(() => {
        z(B);
      }, [B]);
      let H = (0, d.useMemo)(() => L.find((e) => e.isFatal), [L]),
        $ = !!H && w(H.text),
        U = (0, d.useCallback)(() => {
          (0, y.openDialog)({
            type: "createEnvVar",
            data: {
              mode: "missing",
              variables: [
                {
                  key: "AI_GATEWAY_API_KEY",
                  value: "",
                  targets: [
                    b.EnvTarget.Development,
                    b.EnvTarget.Preview,
                    b.EnvTarget.Production,
                  ],
                },
              ],
            },
          });
        }, []),
        G = (0, d.useCallback)(() => {
          F <= 0 ? _(L.length - 1) : _(F - 1);
        }, [L, F]),
        W = (0, d.useCallback)(() => {
          F >= L.length - 1 ? _(0) : _(F + 1);
        }, [L, F]);
      if (!L.length) return null;
      let q = () => {
          R(H?.text ?? L[F]?.text ?? "");
        },
        Z = () => {
          (D(!0), H || C());
          let e = H ? H.currentURL : L[F]?.currentURL,
            t = `The code returns the following error:
\`\`\`
${H?.text ?? L[F]?.text ?? ""}
\`\`\`
Revise the code to address the error. ${
              e
                ? `

I was previewing: ${e}`
                : ""
            }`;
          ((0, c.getIsMobile)() && E(!1),
            N({
              type: "fix-with-v0",
              action: "fix-with-v0",
              content: (0, m.createMDXMessageContent)(t),
            }));
        };
      if (H) {
        let e = j(H.text) || H.text;
        return (0, t.jsx)("div", {
          className: "absolute flex justify-center w-full h-full z-40",
          children: (0, t.jsx)("div", {
            className:
              "text-v0-gray-1000 absolute z-10 flex min-h-full max-w-4xl flex-col items-center justify-center px-10",
            children: (0, t.jsxs)("div", {
              className: "flex items-center",
              children: [
                (0, t.jsx)("h1", {
                  className: "text-nowrap text-2xl font-semibold",
                  children: "Runtime Error",
                }),
                (0, t.jsxs)("div", {
                  className:
                    "border-l-alpha-600 ml-5 flex flex-col gap-2 border-l pl-5",
                  children: [
                    (0, t.jsx)("h2", { className: "text-sm", children: e }),
                    S &&
                      (0, t.jsxs)("div", {
                        className: "mt-2 flex gap-2",
                        children: [
                          (0, t.jsx)(n.Button, {
                            className:
                              "border-v0-background-100 text-v0-gray-1000 bg-transparent px-1.5 py-0.5 hover:no-underline",
                            onClick: q,
                            size: "sm",
                            variant: "link",
                            children: (0, t.jsx)(u.CopyCheck, { isCopied: P }),
                          }),
                          $
                            ? (0, t.jsx)(n.Button, {
                                className:
                                  "h-6 rounded-md px-1.5 py-0.5 text-xs",
                                onClick: U,
                                size: "sm",
                                variant: "secondary",
                                children: "Add API Key",
                              })
                            : (0, t.jsxs)(n.Button, {
                                className:
                                  "h-6 rounded-md px-1.5 py-0.5 text-xs",
                                onClick: Z,
                                size: "sm",
                                variant: "secondary",
                                disabled: A,
                                children: [
                                  M && T
                                    ? (0, t.jsx)("span", {
                                        className:
                                          "rounded bg-v0-alpha-300 px-1 py-0.5 text-[10px] leading-none",
                                        children: "Free",
                                      })
                                    : null,
                                  (0, t.jsx)("span", { children: "Fix with " }),
                                  (0, t.jsx)(s.LogoV0, {}),
                                ],
                              }),
                        ],
                      }),
                  ],
                }),
              ],
            }),
          }),
        });
      }
      return (0, t.jsx)("div", {
        className: "light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",
        children: (0, t.jsxs)("div", {
          className:
            "text-v0-background-100 flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-v0-red-700 p-2 text-sm",
          role: "alert",
          children: [
            (0, t.jsxs)("div", {
              className: "flex w-full flex-col gap-1",
              children: [
                (0, t.jsxs)("div", {
                  className:
                    "flex w-full items-center justify-between font-semibold",
                  children: [
                    (0, t.jsxs)("span", {
                      children: [
                        (0, t.jsx)("span", {
                          children: L[F]?.isServer ? "Server" : null,
                        }),
                        " Error",
                      ],
                    }),
                    " ",
                    (0, t.jsxs)(n.Button, {
                      className:
                        "text text-v0-background-100 m-[-4px] hover:text-v0-gray-200",
                      onClick: C,
                      size: "xs",
                      variant: "ghost",
                      children: [
                        (0, t.jsx)(a.CrossSmall, {}),
                        (0, t.jsx)("span", {
                          className: "sr-only",
                          children: "Close",
                        }),
                      ],
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "flex w-full",
                  children: (0, t.jsx)("span", {
                    className: (0, h.cn)(
                      "font-small text-v0-background-100 cursor-pointer overflow-hidden whitespace-pre-wrap font-mono text-[11px]",
                      { "line-clamp-2": !V },
                    ),
                    onClick: () => z(!V),
                    children: j(L[F]?.text || "") || L[F]?.text,
                  }),
                }),
              ],
            }),
            (0, t.jsxs)("div", {
              className: "flex w-full justify-between gap-2 align-middle",
              children: [
                (0, t.jsx)("div", {
                  className: "flex items-center gap-2 align-middle",
                  children:
                    L.length > 1 &&
                    (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(n.Button, {
                          className:
                            "border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",
                          onClick: G,
                          variant: "link",
                          children: (0, t.jsx)(r.ChevronLeft, {}),
                        }),
                        (0, t.jsx)(n.Button, {
                          className:
                            "border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",
                          onClick: W,
                          variant: "link",
                          children: (0, t.jsx)(i.ChevronRight, {}),
                        }),
                        (0, t.jsxs)("span", {
                          className: "text-xs",
                          children: [F + 1, " of ", L.length],
                        }),
                      ],
                    }),
                }),
                (0, t.jsx)("div", {
                  className: "flex items-center gap-2 align-middle",
                  children:
                    S &&
                    (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(n.Button, {
                          className:
                            "border-v0-background-100 text-v0-background-100 bg-transparent px-1.5 py-0.5 hover:no-underline",
                          onClick: q,
                          size: "sm",
                          variant: "link",
                          children: (0, t.jsx)(u.CopyCheck, { isCopied: P }),
                        }),
                        (0, t.jsx)("div", {
                          className: "border-v0-alpha-400 border-l",
                        }),
                        B
                          ? (0, t.jsx)(n.Button, {
                              className: "h-6 rounded-md px-1.5 py-0.5 text-xs",
                              onClick: U,
                              size: "sm",
                              variant: "secondary",
                              children: "Add API Key",
                            })
                          : (0, t.jsxs)(n.Button, {
                              className: "h-6 rounded-md px-1.5 py-0.5 text-xs",
                              onClick: Z,
                              size: "sm",
                              variant: "secondary",
                              children: [
                                (0, t.jsx)("span", { children: "Fix with " }),
                                (0, t.jsx)(s.LogoV0, {}),
                                M && T
                                  ? (0, t.jsx)("span", {
                                      className:
                                        "rounded bg-v0-alpha-300 px-1 py-0.5 text-[10px] leading-none",
                                      children: "Free",
                                    })
                                  : null,
                              ],
                            }),
                      ],
                    }),
                }),
              ],
            }),
          ],
        }),
      });
    }
  },
  797173,
  (e) => {
    "use strict";
    e.s(["useBlockFiles", () => a]);
    var t = e.i(926224),
      n = e.i(576191),
      r = e.i(301331);
    function i(e) {
      return !!e && e.length < 100 && e.includes("loading...");
    }
    async function s(e) {
      let t = await fetch(`/chat/api/blocks/source?blockId=${e}`, {
        headers: { "Content-Type": "application/json" },
      });
      if (!t.ok) throw Error("Failed to fetch block source");
      let { source: n } = await t.json();
      return n;
    }
    function a(e) {
      let {
          projectBlocks: a,
          projectBlockIndex: o,
          ensureBlockSource: l,
          isLoadingBlockSource: c,
        } = (0, r.useBlockHistory)({
          blockId: e.blockId,
          includeNonVersionedBlocks: !e.closed,
        }),
        { blockOverrides: u, updateBlockData: d } = (0, r.useBlockData)(),
        h = o > 0 ? a?.[o - 1] : null,
        p = h ? u?.[h.id]?.source || h.source : void 0,
        m = h?.needsBlockSource === !0 || i(p),
        [f, g] = (0, n.useState)(!1),
        x = (0, n.useRef)(null),
        v = !h || (!m && !c && !f);
      ((0, n.useEffect)(() => {
        e.closed && "code-project" === e.meta.type && l && l();
      }, [e.closed, e.meta.type, l]),
        (0, n.useEffect)(() => {
          e.closed &&
            "code-project" === e.meta.type &&
            h &&
            m &&
            !f &&
            x.current !== h.id &&
            (g(!0),
            (x.current = h.id),
            s(h.id)
              .then((e) => {
                d({ blockId: h.id, data: { source: e, needsBlockSource: !1 } });
              })
              .catch((e) => {
                console.error(
                  "[useBlockFiles] Failed to fetch previous block source:",
                  e,
                );
              })
              .finally(() => {
                g(!1);
              }));
        }, [e.closed, e.meta.type, h, m, f, d]));
      let y = (0, n.useMemo)(() => {
          if ("code-project" === e.meta.type)
            return (0, t.parseMultiFileSource)({
              source: e.source,
              blockType: "code-project",
              blockId: e.blockId,
            });
        }, [e.source, e.blockId, e.meta.type]),
        b = (0, n.useMemo)(() => {
          if (e.closed || !y || !y.length) return;
          let t = y[y.length - 1];
          if ("file" in t.meta && !t.isDeleted) return t.meta.file;
        }, [y, e.closed]);
      return {
        files: (0, n.useMemo)(() => {
          if (!y) return;
          let e = new Map(),
            n = v && h ? p : void 0,
            r =
              h && n
                ? (0, t.parseMultiFileSource)({
                    source: n,
                    blockType: "code-project",
                    blockId: h.id,
                  })
                : [],
            i = new Map(),
            s = (e) => e.replace(/^\.?\//, "");
          for (let e of r)
            !e.isDeleted && e.meta.file && i.set(s(e.meta.file), e);
          for (let t of y) {
            let n = t.meta.file ? i.get(s(t.meta.file)) : void 0;
            e.set(t.meta.file, {
              ...t,
              originalCode: v
                ? n
                  ? n.source
                  : t.isQuickEdit && !t.source
                    ? `// ${t.isAttachmentQuickEdit ? "Reading from" : "Generating"} ${t.meta.file}`
                    : void 0
                : void 0,
            });
          }
          return Array.from(e.values()).filter((e) => !e.isDeleted);
        }, [y, h, p, v]),
        loadingPath: b,
        isDiffDataReady: v,
      };
    }
  },
  262553,
  (e) => {
    "use strict";
    e.s(["useReadOnlyMode", () => a]);
    var t = e.i(576191),
      n = e.i(519738),
      r = e.i(449381),
      i = e.i(819969),
      s = e.i(393799);
    function a() {
      let e = (0, r.useActiveBlockState)(),
        { isLatest: a } = (0, n.useBlockVersionInfo)(e?.id),
        { atoms: o } = (0, i.useCurrentChat)(),
        l = (0, s.useAtomValue)(o.canWriteToChat);
      return {
        isReadOnlyMode: (0, t.useMemo)(() => !a && l, [a, l]),
        isLatest: a,
        canWriteToChat: l,
      };
    }
  },
  35863,
  (e) => {
    "use strict";
    function t(e) {
      if (!e) return;
      let t = e.match(/^[\^~>=<]*?(\d+)/);
      if (t && t[1]) return parseInt(t[1]);
    }
    function n(e) {
      if (!e) return;
      let t = e.replace(/^[\^~>=<]*/, ""),
        n = t.match(/^(\d+)\.(\d+)\.(\d+)/);
      return n
        ? {
            major: parseInt(n[1], 10),
            minor: parseInt(n[2], 10),
            patch: parseInt(n[3], 10),
          }
        : (n = t.match(/^(\d+)\.(\d+)$/))
          ? { major: parseInt(n[1], 10), minor: parseInt(n[2], 10), patch: 0 }
          : (n = t.match(/^(\d+)$/))
            ? { major: parseInt(n[1], 10), minor: 0, patch: 0 }
            : void 0;
    }
    function r(e, t) {
      return e.major !== t.major
        ? e.major - t.major
        : e.minor !== t.minor
          ? e.minor - t.minor
          : e.patch - t.patch;
    }
    e.s([
      "compareVersions",
      () => r,
      "getMajorVersionFromSemver",
      () => t,
      "parseFullSemver",
      () => n,
    ]);
  },
  117803,
  419403,
  411584,
  (e) => {
    "use strict";
    e.s(
      [
        "useDesignModeEffects",
        () => M,
        "useDesignModeSelectedItem",
        () => T,
        "useDesignModeToggle",
        () => L,
      ],
      117803,
    );
    var t = e.i(576191),
      n = e.i(9654),
      r = e.i(393799),
      i = e.i(84079),
      s = e.i(449381),
      a = e.i(53223),
      o = e.i(70165),
      l = e.i(127169),
      c = e.i(577247),
      u = e.i(418929),
      d = e.i(668887),
      h = e.i(262553),
      p = e.i(284546),
      m = e.i(142219),
      f = e.i(583965),
      g = e.i(819969);
    e.s(["useIsElementSelectionAvailable", () => D], 411584);
    var x = t,
      v = s,
      y = e.i(35863),
      b = y;
    let j = [14, 15, 16];
    function w(e) {
      let t;
      if (!e) return;
      let n = e["package.json"];
      if (!n) return;
      try {
        t = JSON.parse(n);
      } catch {
        return;
      }
      let r = { ...t.devDependencies, ...t.dependencies }.next;
      if ("string" == typeof r) {
        let e = (0, b.getMajorVersionFromSemver)(r);
        if (e && j.includes(e)) return e;
      }
    }
    function C(e, t) {
      return void 0 !== e.nextVersionDefault && j.includes(e.nextVersionDefault)
        ? e.nextVersionDefault
        : void 0 !== e.nextVersion15Default
          ? e.nextVersion15Default
            ? 15
            : 14
          : t;
    }
    function k(e, t, n) {
      let r = n ?? 15;
      return w(e) ?? C(t, r);
    }
    function S(e) {
      return void 0 !== e.nextVersionDefault &&
        (14 === e.nextVersionDefault ||
          15 === e.nextVersionDefault ||
          16 === e.nextVersionDefault)
        ? e.nextVersionDefault
        : void 0 !== e.nextVersion15Default
          ? e.nextVersion15Default
            ? 15
            : 14
          : 15;
    }
    function N(e) {
      let t;
      try {
        t = JSON.parse(e);
      } catch {
        return;
      }
      let n = { ...t.devDependencies, ...t.dependencies }.next;
      if ("string" == typeof n) return (0, b.parseFullSemver)(n);
    }
    e.s(
      [
        "detectNextVersion",
        () => k,
        "getFullNextVersionFromPackageJson",
        () => N,
        "getNextVersionFromChatMetadata",
        () => S,
      ],
      419403,
    );
    var E = e.i(926224);
    let A = { major: 15, minor: 3, patch: 0 };
    function D() {
      let e = (0, v.useActiveBlockState)();
      return (0, x.useMemo)(() => {
        if (!e) return { isAvailable: !1 };
        if ("code-project" !== e.type) return { isAvailable: !0 };
        let t = (0, E.parseMultiFileSource)({
          source: e.source,
          blockType: "code-project",
          blockId: e.id,
        }).find((e) => "package.json" === e.meta.file);
        if (!t) return { isAvailable: !0 };
        let n = N(t.source);
        return n
          ? {
              isAvailable: (0, y.compareVersions)(n, A) >= 0,
              nextVersion: `${n.major}.${n.minor}.${n.patch}`,
            }
          : { isAvailable: !0 };
      }, [e]);
    }
    let I = (0, n.atom)(void 0);
    function M() {
      let { atoms: e, actions: n } = (0, d.useCurrentBlockDesignMode)(),
        u = (0, r.useAtomValue)(e.designModeEnabled),
        g = (0, s.useActiveBlockState)(),
        x = g?.id,
        v = (0, r.useAtomValue)(I),
        { isReadOnlyMode: y } = (0, h.useReadOnlyMode)(),
        b = (0, o.useIsMobile)(),
        { loading: j } = (0, f.useBrowserFrame)(x),
        { selectedElement: w } = T(),
        { activeTab: C } = (0, p.useActiveTab)(),
        { setDesignModeEnabled: k } = L(),
        { isAvailable: S } = D();
      ((0, t.useEffect)(() => {
        b && k(!1);
      }, [b, k]),
        (0, t.useEffect)(() => {
          y && u && k(!1);
        }, [y, u, k]),
        (0, t.useEffect)(() => {
          (x !== v && k(!1), m.store.set(I, x));
        }, [x, k, v]),
        (0, l.useShortcut)(
          (e) => {
            if ("KeyD" === e.code && (e.altKey || e.metaKey)) {
              if ((e.preventDefault(), j && !u)) return;
              let t = !u;
              (t &&
                x &&
                (0, a.track)("EnterDesignMode", { source: "shortcut" }),
                k(t));
            }
          },
          [k, u, j, x],
        ));
      let N = (0, t.useCallback)(() => {
        w && x
          ? (0, i.sendToIframeFromBlockId)(x, { type: "devtools_deselect" })
          : n.setDesignModeEnabled(!1);
      }, [w, x, n]);
      return (
        (0, c.useMessage)(
          (e) => {
            let { data: t } = e;
            if (t && "object" == typeof t && t.__v0_remote__)
              switch (t.type) {
                case "devtools_state":
                  "boolean" == typeof t.enabled && k(t.enabled);
                  break;
                case "escape_key_event":
                  t.event?.type === "keydown" &&
                    t.event?.key === "Escape" &&
                    N();
              }
          },
          [n, w, k],
        ),
        (0, t.useEffect)(() => {
          x &&
            (0, i.sendToIframeFromBlockId)(x, {
              type: "devtools_enable",
              enabled: u && S,
            });
        }, [x, u, S]),
        (0, t.useEffect)(
          () => (
            u && !w && "preview" === C
              ? document.body.classList.add("design-mode-enabled")
              : document.body.classList.remove("design-mode-enabled"),
            () => document.body.classList.remove("design-mode-enabled")
          ),
          [u, w, C],
        ),
        (0, l.useShortcut)(
          (e) => {
            if ("Escape" !== e.key || !u) return;
            let t = e.target;
            (!t ||
              t.closest("#prompt-form") ||
              ("INPUT" !== t.tagName &&
                "TEXTAREA" !== t.tagName &&
                "SELECT" !== t.tagName &&
                ("BUTTON" !== t.tagName || "tab" === t.role) &&
                ("DIV" !== t.tagName || "option" !== t.role) &&
                !t.isContentEditable)) &&
              (e.preventDefault(), N());
          },
          [N],
        ),
        { setDesignModeEnabled: k }
      );
    }
    function T() {
      let { atoms: e } = (0, u.useCurrentChatPrompt)(),
        [t] = (0, r.useAtom)(e.refinementElementSelected);
      return { selectedElement: t };
    }
    function L() {
      let { atoms: e, actions: n } = (0, d.useCurrentBlockDesignMode)(),
        i = (0, r.useAtomValue)(e.designModeEnabled),
        { atoms: o } = (0, g.useCurrentChat)(),
        l = (0, r.useAtomValue)(o.canWriteToChat),
        c = (0, s.useActiveBlockState)(),
        u = c?.id,
        { loading: h } = (0, f.useBrowserFrame)(u),
        p = (0, t.useCallback)(
          (e) => {
            !l ||
              (h && e) ||
              (n.setDesignModeEnabled(e),
              u && e && (0, a.track)("DesignModeToggled", { enabled: e }));
          },
          [l, n, u, h],
        ),
        m = (0, t.useCallback)(() => {
          p(!i);
        }, [p, i]),
        x = (0, t.useCallback)(() => {
          m();
        }, [m]);
      return {
        setDesignModeEnabled: p,
        toggleDesignMode: m,
        toggleSelectElement: x,
        frameLoading: h,
      };
    }
  },
  263086,
  759791,
  (e) => {
    "use strict";
    var t = e.i(418625);
    function n(e, t) {
      return `/chat/api/snapshots/latest?chatId=${e}&blockId=${t}`;
    }
    async function r(e, t, n) {
      try {
        let r = await fetch("/chat/api/snapshots/upload", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ blockId: e, chatId: t, html: n }),
        });
        if (!r.ok) return null;
        return await r.json();
      } catch (e) {
        return null;
      }
    }
    function i({ blockId: e, chatId: r, enabled: i = !0 }) {
      let { data: s, isLoading: a } = (0, t.default)(
          i ? n(r, e) : null,
          async (e) => {
            let t = await fetch(e);
            return t.ok ? t.json() : null;
          },
          { revalidateOnFocus: !1, revalidateIfStale: !1 },
        ),
        o = !a && !!s?.ok;
      return {
        isLoading: a,
        isLoaded: o,
        error: o || a ? null : "No snapshot found",
        snapshotUrl: s?.ok ? s.value.url : null,
        version: null,
      };
    }
    (e.s(["getSnapshotCacheKey", () => n, "uploadSnapshot", () => r], 759791),
      e.s(["useSnapshotLoader", () => i], 263086));
  },
  625313,
  (e) => {
    e.v({ pulse: "ring-logo-loader-module__nhqATG__pulse" });
  },
  77878,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(956562),
      r = e.i(625313);
    let i = "stroke-[0.4] stroke-gray-300 fill-none",
      s = "stroke-[0.4] stroke-gray-300 fill-background-subtle animate-spin",
      a = 8,
      o = 12,
      l = [
        { angle: 0, duration: "44s" },
        { angle: 90, duration: "40s" },
        { angle: 180, duration: "36s" },
        { angle: 45, duration: "24s" },
        { angle: 270, duration: "16s" },
      ];
    function c() {
      return (0, t.jsxs)("div", {
        className:
          "flex items-center justify-center overflow-hidden [--think-highlight:theme(colors.gray.400)] [--think-shadow:theme(colors.gray.300)] relative",
        children: [
          (0, t.jsx)("svg", {
            width: "380",
            height: "380",
            viewBox: "0 0 100 100",
            fill: "none",
            xmlns: "http://www.w3.org/2000/svg",
            children: l.map(({ angle: e, duration: n }, c) => {
              let u = o + c * a,
                d = (e * Math.PI) / 180,
                h = 50 + u * Math.cos(d),
                p = 50 + u * Math.sin(d),
                m = (l.length - c) / l.length;
              return (0, t.jsxs)(
                "g",
                {
                  className: r.default.pulse,
                  style: {
                    animationDelay: `${l.length + 0.2 * c}s`,
                    opacity: m,
                  },
                  children: [
                    (0, t.jsx)("circle", {
                      cx: "50",
                      cy: "50",
                      r: u,
                      className: i,
                    }),
                    (0, t.jsx)("circle", {
                      cx: h,
                      cy: p,
                      r: "1",
                      className: s,
                      style: {
                        animationDuration: n,
                        transformOrigin: "50px 50px",
                      },
                    }),
                  ],
                },
                c,
              );
            }),
          }),
          (0, t.jsx)("div", {
            className: "absolute text-v0-gray-900",
            children: (0, t.jsx)(n.LogoV0, { size: 36 }),
          }),
        ],
      });
    }
    e.s(["RingLogoLoader", () => c]);
  },
  230222,
  252597,
  583309,
  (e) => {
    "use strict";
    e.s(["VMIframe", () => S, "VMPending", () => k], 230222);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(101486),
      i = e.i(304649),
      s = e.i(210045),
      a = e.i(917806),
      o = e.i(597932),
      l = e.i(554912),
      c = e.i(819969),
      u = e.i(393799),
      d = t,
      h = n,
      p = e.i(263086),
      m = e.i(77878),
      f = e.i(577247);
    let g = {
      "syncing-files": "Syncing files...",
      "installing-deps": "Installing dependencies...",
      "starting-server": "Starting server...",
      idle: null,
    };
    function x(e, t) {
      return t && "idle" !== t
        ? (g[t] ?? "Starting sandbox...")
        : "error" === e
          ? "Failed to load preview"
          : "initializing" === e
            ? "Starting sandbox..."
            : "running" === e
              ? "Loading preview..."
              : "empty" === e
                ? "Preparing..."
                : "Starting sandbox...";
    }
    function v({ url: e }) {
      return (0, d.jsx)("div", {
        className:
          "rounded-lg overflow-hidden shadow-lg border border-v0-gray-200 bg-v0-white h-[340px] w-[600px] mb-10",
        children: (0, d.jsx)("iframe", {
          src: e,
          className: "w-[200%] h-[200%] border-0 origin-top-left scale-50",
          sandbox: "allow-same-origin allow-scripts",
          title: "Loading preview",
        }),
      });
    }
    function y({ visual: e, statusText: t }) {
      return (0, d.jsxs)("div", {
        className:
          "relative w-full h-full flex flex-col items-center justify-center",
        children: [
          (0, d.jsx)("div", {
            className: "flex items-center justify-center",
            children: e,
          }),
          (0, d.jsx)("span", {
            className: "text-sm text-v0-gray-1000 select-none",
            children: t,
          }),
        ],
      });
    }
    function b({
      blockId: e,
      chatId: t,
      vmStatus: n,
      vmSubstatus: r,
      children: i,
    }) {
      let [s, a] = (0, h.useState)(!1);
      ((0, f.useMessage)((e) => {
        let t = e.data;
        t?.__v0_remote__ === 1 && "page_ready" === t.type && a(!0);
      }),
        (0, h.useEffect)(() => {
          "running" !== n && a(!1);
        }, [n]));
      let o = "running" === n && s,
        { snapshotUrl: l, isLoaded: c } = (0, p.useSnapshotLoader)({
          blockId: e,
          chatId: t,
          enabled: !o,
        }),
        u = c && l && !o;
      if (o)
        return (0, d.jsx)("div", { className: "w-full h-full", children: i });
      let g = u
        ? (0, d.jsx)("div", {
            className: "animate-in fade-in zoom-in-95 duration-300",
            children: (0, d.jsx)(v, { url: l }),
          })
        : (0, d.jsx)(m.RingLogoLoader, {});
      return (0, d.jsxs)(d.Fragment, {
        children: [
          (0, d.jsx)(h.Activity, {
            mode: "visible",
            children: (0, d.jsx)(y, { visual: g, statusText: x(n, r) }),
          }),
          (0, d.jsx)(h.Activity, { mode: "hidden", children: i }),
        ],
      });
    }
    e.s(["SnapshotRenderer", () => b], 252597);
    var j = e.i(513529);
    function w({ children: e }) {
      return (0, t.jsxs)("div", {
        className:
          "relative border-orange-500 border h-full w-full overflow-auto",
        children: [
          (0, t.jsx)("div", {
            className:
              "absolute top-6 left-6 -translate-x-1/2 -translate-y-1/2 -rotate-45 bg-orange-500 text-v0-white text-xs font-medium px-4 select-none shadow z-50",
            children: "VM Mode",
          }),
          e,
        ],
      });
    }
    function C({ status: e, blockId: r, chatId: s }) {
      let [a, o] = (0, n.useState)(!1);
      return "error" === e
        ? (0, t.jsxs)("div", {
            className:
              "text-v0-red-700 flex-1 flex flex-col items-center justify-center gap-1 h-full",
            children: [
              (0, t.jsx)("span", {
                children:
                  "The VM encountered an error. Please try to restart it.",
              }),
              (0, t.jsx)("a", {
                className: (0, i.cn)(
                  "underline",
                  a ? "pointer-events-none" : "cursor-pointer",
                ),
                onClick: async () => {
                  o(!0);
                  try {
                    if (
                      !(
                        await fetch(
                          `/chat/api/vm/actions?cid=${s}&bid=${r}&type=recreate`,
                          { method: "POST" },
                        )
                      ).ok
                    )
                      throw Error("Failed to recreate VM");
                  } catch (e) {
                    console.error("Error recreating VM:", e);
                  } finally {
                    o(!1);
                  }
                },
                children: a ? "Restarting..." : "Restart VM",
              }),
            ],
          })
        : "stopped" === e
          ? (0, t.jsx)("div", {
              className:
                "h-full text-v0-gray-900 flex-1 flex items-center justify-center",
              children: "VM Stopped. Please refresh to recreate the VM.",
            })
          : null;
    }
    function k({ blockId: e, chatId: n, status: r }) {
      return (0, t.jsx)(b, {
        blockId: e,
        chatId: n,
        vmStatus: r,
        children: (0, t.jsx)(C, { status: r, blockId: e, chatId: n }),
      });
    }
    function S({
      noBadge: e = !1,
      status: i,
      blockId: d,
      chatId: h,
      isPreviewable: p,
      iframeProps: m,
    }) {
      let {
          status: f,
          subdomain: g,
          substatus: x,
        } = (0, r.useVMStatus)({ enabled: !0, bid: d, cid: h }),
        v = e ? n.Fragment : w,
        { consoleEvents: y, clearConsoleEvents: k } = (0, l.useConsoleVM)(d, h),
        S = (0, u.useAtomValue)((0, c.getChatAtoms)(h).canWriteToChat),
        [N] = (0, u.useAtom)(j.consoleVisibilityAtom);
      return "running" !== i && "running" !== f
        ? (0, t.jsx)(o.default, {
            consoleEvents: y,
            clearLogs: k,
            canWriteToChat: S,
            hide: !N,
            children: (0, t.jsx)(v, {
              children: (0, t.jsx)("div", {
                className:
                  "flex flex-col gap-2 h-full w-full items-center justify-center overflow-auto",
                children: (0, t.jsx)(b, {
                  blockId: d,
                  chatId: h,
                  vmStatus: f,
                  vmSubstatus: x,
                  children: (0, t.jsx)(C, { status: f, blockId: d, chatId: h }),
                }),
              }),
            }),
          })
        : (0, t.jsx)(o.default, {
            consoleEvents: y,
            clearLogs: k,
            canWriteToChat: !1,
            hide: !N,
            children: (0, t.jsx)(v, {
              children: (0, t.jsx)("div", {
                className: "flex flex-col h-full w-full",
                children: (0, t.jsx)("div", {
                  className: "flex-1",
                  children:
                    p && g
                      ? (0, t.jsx)(s.Iframe, {
                          ...m,
                          origin: (0, a.getVMIframeOrigin)(g),
                        })
                      : null,
                }),
              }),
            }),
          });
    }
    var N = n;
    function E(e, t) {
      (0, N.useEffect)(() => {
        if (!e) return;
        let n = null,
          r = (r) => {
            if (!e || r.origin !== t) return;
            let i = `chat:ls:${e}`;
            if ("localStorage-update" === r.data.type)
              window.localStorage.setItem(i, JSON.stringify(r.data.map));
            else if ("localStorage-init-request" === r.data.type) {
              let e = window.localStorage.getItem(i),
                s = e ? new Map(JSON.parse(e)) : new Map();
              ((n = r.source),
                r.source?.postMessage(
                  {
                    type: "localStorage-store-update",
                    map: Array.from(s.entries()),
                  },
                  { targetOrigin: t },
                ));
            }
          },
          i = (r) => {
            if (!e || r.key !== `chat:ls:${e}`) return;
            let i = window.localStorage.getItem(r.key),
              s = i ? new Map(JSON.parse(i)) : new Map();
            n?.postMessage(
              {
                type: "localStorage-store-update",
                map: Array.from(s.entries()),
              },
              { targetOrigin: t },
            );
          };
        return (
          window.addEventListener("message", r),
          window.addEventListener("storage", i),
          () => {
            (window.removeEventListener("message", r),
              window.removeEventListener("storage", i));
          }
        );
      }, [e, t]);
    }
    e.s(["useLocalStorageFrameHost", () => E], 583309);
  },
  751498,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "408afe8829cd525edf8c04909811fed454fac2809d",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "updateAgentRuntimeErrors",
      );
    e.s(["updateAgentRuntimeErrors", () => n]);
  },
  889938,
  (e) => {
    "use strict";
    let t = (e) => ({ type: "refinement-element", ...e }),
      n = (e) => {
        if (!e.parts) return null;
        let t = [];
        for (let n of e.parts)
          "refinement-element" === n.type &&
            n.componentName &&
            t.push(n.componentName);
        return t.length > 0 ? t : null;
      },
      r = (e) => {
        let { event: t, file: n } = e,
          r = n.source.split("\n"),
          i = t.data.line,
          s = t.data.column;
        for (; r[i - 1].length < s; ) ((s -= r[i - 1].length), i++);
        for (; s - 1 < r[i - 1].length && /\s/.test(r[i - 1][s - 1]); ) s++;
        let a = r.slice(Math.max(0, i - 4), i - 1),
          o = r[i - 1],
          l = r.slice(i, i + 3),
          c = o.substring(s).match(/^[\w.]+/)?.[0];
        return {
          sourceContext: c
            ? (i > 4 ? "...\n" : "") +
              a.join("\n") +
              "\n" +
              o +
              "\n" +
              (" ".repeat(s) + "^".repeat(c.length)) +
              "\n" +
              l.join("\n") +
              "\n" +
              (i + 3 < r.length ? "...\n" : "")
            : o,
          componentName: c,
        };
      };
    e.s([
      "createRefinementPart",
      0,
      t,
      "getRefinementElementLabelsFromContent",
      0,
      n,
      "structureRefinementData",
      0,
      r,
    ]);
  },
  211671,
  751492,
  (e) => {
    "use strict";
    e.s(["WizardProvider", () => c, "useWizard", () => u], 211671);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(636282),
      i = e.i(418270),
      s = e.i(393799);
    function a({ api: e, displayIndexIntent: t }) {
      let n = [],
        {
          integrations: r,
          environmentVariables: i,
          scripts: s,
          actions: a,
        } = e.data;
      (r.length > 0 && n.push("integrations"),
        i.length > 0 && n.push("environment-variables"),
        s.length > 0 && n.push("scripts"),
        a.length > 0 && n.push("actions"));
      let o = Math.max(Math.min(t, n.length - 1), 0),
        l = n.at(o) || "none";
      return {
        display: l,
        hasNextDisplay: o < n.length - 1,
        hasPreviousDisplay: o > 0,
      };
    }
    function o({ api: e, display: t, isOpenIntent: n }) {
      let r = e.data.shouldPrompt;
      return (
        "none" !== t &&
        (("not-set" === n.type && !!r) || ("set" === n.type && n.value))
      );
    }
    let l = n.default.createContext(null),
      c = ({ children: e, activeBlockId: c, closed: u }) => {
        let { atoms: d, actions: h, chatId: p } = (0, r.useWizardAtoms)(),
          m = (0, i.useWizardApi)({ blockId: c, closed: u }),
          f = (0, s.useAtomValue)(d.displayIndexIntent),
          g = (0, s.useAtomValue)(d.isOpenIntent),
          x = (0, n.useCallback)(
            (e) => {
              (m.update?.({ disableAutoPrompt: !e }), h.setIsOpenIntent(e));
            },
            [m, h],
          );
        if ("ready" !== m.status) return null;
        let {
            display: v,
            hasPreviousDisplay: y,
            hasNextDisplay: b,
          } = a({ displayIndexIntent: f, api: m }),
          j = o({ api: m, display: v, isOpenIntent: g });
        return (0, t.jsx)(l.Provider, {
          value: {
            atoms: d,
            actions: h,
            api: m,
            computed: {
              chatId: p,
              blockId: c,
              display: v,
              hasNextDisplay: b,
              hasPreviousDisplay: y,
              isOpen: j,
            },
            callbacks: { handleWizardOpenChanged: x },
          },
          children: e,
        });
      },
      u = () => {
        let e = n.default.useContext(l);
        if (!e) throw Error("useWizard must be used within a WizardProvider");
        return e;
      };
    e.s(["WizardIntegrationsDisplay", () => v], 751492);
    var d = t,
      h = e.i(601673),
      p = n,
      m = e.i(985005),
      f = s;
    function g({ integration: e }) {
      let { api: t, atoms: n } = u(),
        r = (0, f.useAtomValue)(n.latestUpdateArgs),
        i = (0, p.useMemo)(
          () =>
            !!(
              t.isUpdating &&
              r?.connectIntegrations?.some((t) => t.integrationId === e.id)
            ),
          [t.isUpdating, r, e],
        );
      return (0, d.jsx)(m.ConnectIntegration.Provider, {
        state: { integration: e, isConnecting: i, isDisabled: t.isUpdating },
        actions: { handleConnect: (e) => t.update(e) },
        children: (0, d.jsxs)("div", {
          className:
            "bg-v0-gray-100 px-2 py-2.5 w-full rounded-md flex items-center justify-between gap-2",
          children: [
            (0, d.jsxs)("div", {
              className: "flex gap-2.5 items-center",
              children: [
                (0, d.jsx)(m.ConnectIntegration.Icon, {}),
                (0, d.jsxs)("div", {
                  children: [
                    (0, d.jsx)("h3", {
                      className: "text-label-14 font-medium",
                      children: e.name,
                    }),
                    (0, d.jsx)("h3", {
                      className: "text-copy-13",
                      children: e.description,
                    }),
                  ],
                }),
              ],
            }),
            (0, d.jsx)(m.ConnectIntegration.Button, {}),
          ],
        }),
      });
    }
    function x({ children: e }) {
      return (0, d.jsx)(h.Wizard.DisplayProvider, {
        actions: { handleActionButtonClick: null },
        state: { isActionLoading: !1, isActionDisabled: !1 },
        children: e,
      });
    }
    function v() {
      let { api: e } = u();
      return (0, d.jsxs)(x, {
        children: [
          (0, d.jsxs)(h.Wizard.Header, {
            children: [
              (0, d.jsx)(h.Wizard.Title, { children: "Add Integrations" }),
              (0, d.jsx)(h.Wizard.Description, {
                children: "This generation requires an integration.",
              }),
            ],
          }),
          (0, d.jsx)(h.Wizard.Content, {
            children: e.data.integrations.map((e) =>
              (0, d.jsx)(g, { integration: e }, e.id),
            ),
          }),
          (0, d.jsx)(h.Wizard.Footer, {
            children: (0, d.jsx)(h.Wizard.SkipButton, {}),
          }),
        ],
      });
    }
  },
  513529,
  601673,
  (e) => {
    "use strict";
    e.s(
      ["NextLiteBlockLogic", () => tm, "consoleVisibilityAtom", () => tp],
      513529,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(204575),
      i = e.i(476371),
      s = e.i(284546),
      a = e.i(845210),
      o = e.i(917806),
      l = e.i(930293),
      c = e.i(84079),
      u = e.i(472166),
      d = e.i(295224),
      h = e.i(92479),
      p = e.i(805374),
      m = e.i(556355),
      f = e.i(160769),
      g = e.i(632082),
      x = e.i(176248),
      v = e.i(659563),
      y = e.i(270692),
      b = e.i(899488),
      j = e.i(622661),
      w = e.i(298450),
      C = e.i(566274),
      k = e.i(9654),
      S = e.i(393799),
      N = e.i(868948),
      E = e.i(53223),
      A = e.i(470259),
      D = e.i(395542),
      I = e.i(696825),
      M = e.i(988094),
      T = e.i(242759),
      L = e.i(797173),
      P = e.i(487581),
      R = e.i(577247),
      F = e.i(117803),
      _ = e.i(101486),
      O = e.i(230222),
      B = e.i(583309),
      V = e.i(35590),
      z = e.i(751498),
      H = e.i(889938),
      $ = e.i(768619),
      U = e.i(226368),
      G = e.i(142219),
      W = e.i(32170),
      q = e.i(819969),
      Z = e.i(301331);
    e.s(["PreviewWizard", () => tu, "Wizard", () => tc], 601673);
    var K = t,
      Y = t,
      J = x,
      Q = e.i(926788),
      X = t,
      ee = n,
      et = e.i(211671),
      en = e.i(751492),
      er = t,
      ei = S,
      es = e.i(763480),
      ea = e.i(707974),
      eo = x,
      el = et,
      ec = n;
    e.i(563948);
    var eu = e.i(407562),
      ed = e.i(199490),
      eh = e.i(829890),
      ep = e.i(667660),
      em = e.i(592885);
    function ef({ envKey: e }) {
      let {
          actions: { setEnvironmentVariableValue: t },
          atoms: { environmentVariables: n },
        } = (0, el.useWizard)(),
        r = (0, ei.useAtomValue)(n)[e];
      return (0, er.jsxs)("div", {
        className: "flex w-full flex-col gap-2 uppercase",
        children: [
          (0, er.jsx)(ea.Label, { children: e }),
          (0, er.jsx)(es.Input, {
            value: r || "",
            onChange: (n) => t(e, n.target.value),
            placeholder: "Enter a key",
            required: !0,
          }),
        ],
      });
    }
    let eg = ec.default.createContext(null);
    function ex({ children: e }) {
      let [t, n] = (0, ec.useState)([
        ed.EnvTarget.Development,
        ed.EnvTarget.Preview,
        ed.EnvTarget.Production,
      ]);
      return (0, er.jsx)(eg.Provider, {
        value: { selectedTargets: t, setSelectedTargets: n },
        children: e,
      });
    }
    function ev() {
      let e = ec.default.useContext(eg);
      if (!e)
        throw Error(
          "useEnvironmentSelection must be used within EnvironmentSelectionProvider",
        );
      return e;
    }
    function ey({ children: e }) {
      let { api: t, atoms: n } = (0, el.useWizard)(),
        r = (0, ei.useAtomValue)(n.environmentVariables),
        i = (0, ei.useAtomValue)(n.latestUpdateArgs),
        { selectedTargets: s } = ev(),
        a = (0, ec.useMemo)(() => {
          let e = new Set(t.data.environmentVariables.map(({ key: e }) => e)),
            n = s;
          return Object.entries(r)
            .map(([e, t]) => ({ key: e, value: t, targets: n }))
            .filter((t) => e.has(t.key) && "" !== t.value.trim());
        }, [t.data.environmentVariables, r, s]),
        o = (0, ec.useCallback)(async () => {
          let e = await t.update({ setEnvironmentVariables: a });
          "error" === e.status
            ? eu.toast.error(e.message)
            : "error" === e.setEnvironmentVariables.status &&
              eu.toast.error(e.setEnvironmentVariables.message);
        }, [t, a]);
      return (0, er.jsx)(tc.DisplayProvider, {
        actions: { handleActionButtonClick: o },
        state: {
          isActionLoading: t.isUpdating && !!i?.setEnvironmentVariables,
          isActionDisabled: 0 === a.length || 0 === s.length,
        },
        children: e,
      });
    }
    function eb() {
      let { selectedTargets: e, setSelectedTargets: t } = ev(),
        { hasVercelWritePermission: n } = (0, ep.useActiveScope)();
      return (0, er.jsxs)("div", {
        className: "-mb-4",
        children: [
          (0, er.jsx)(eh.GlobalEnvironmentSelector, {
            targets: e,
            onTargetsChange: t,
            hasVercelWritePermission: n,
            hasError: 0 === e.length,
          }),
          0 === e.length &&
            (0, er.jsx)("span", {
              className: "text-xs text-v0-red-900 -mt-3 block",
              children: "Select at least one environment",
            }),
        ],
      });
    }
    function ej() {
      let { api: e, callbacks: t } = (0, el.useWizard)();
      return (0, er.jsx)(ex, {
        children: (0, er.jsxs)(ey, {
          children: [
            (0, er.jsxs)("div", {
              className: "relative",
              children: [
                (0, er.jsx)(eo.Button, {
                  variant: "ghost",
                  size: "xs",
                  "aria-label": "Close dialog",
                  type: "button",
                  className:
                    "absolute right-3 top-3 z-10 text-v0-gray-900 hover:text-v0-gray-1000 hover:bg-transparent",
                  onClick: () => t.handleWizardOpenChanged(!1),
                  children: (0, er.jsx)(em.Cross, { className: "size-4" }),
                }),
                (0, er.jsxs)(tc.Header, {
                  children: [
                    (0, er.jsx)(tc.Title, {
                      children: "Add Environment Variables",
                    }),
                    (0, er.jsx)(tc.Description, {
                      children:
                        "This generation requires environment variables. Enter them below.",
                    }),
                  ],
                }),
              ],
            }),
            (0, er.jsxs)("form", {
              className: "flex flex-col flex-1 min-h-0 overflow-hidden",
              children: [
                (0, er.jsxs)(tc.Content, {
                  className: "no-scrollbar",
                  children: [
                    (0, er.jsx)(eb, {}),
                    e.data.environmentVariables.map(({ key: e }) =>
                      (0, er.jsx)(ef, { envKey: e }, e),
                    ),
                  ],
                }),
                (0, er.jsxs)(tc.Footer, {
                  children: [
                    (0, er.jsx)(tc.BackButton, {}),
                    (0, er.jsx)(tc.SkipButton, {}),
                    (0, er.jsx)(tc.ActionButton, {}),
                  ],
                }),
              ],
            }),
          ],
        }),
      });
    }
    var ew = t,
      eC = et,
      ek = n,
      eS = x,
      eN = S,
      eE = eu;
    function eA({ action: e }) {
      let {
          api: { updateResult: t },
        } = (0, eC.useWizard)(),
        n = (0, ek.useMemo)(
          () =>
            t && "error" !== t.status
              ? t.ranActions.find((t) => t.action === e.action)
              : null,
          [t, e],
        );
      return n?.status === "error"
        ? (0, ew.jsx)("h3", {
            className: "font-normal text-v0-red-900",
            children: n.message || "An unexpected error occurred",
          })
        : n?.status === "success"
          ? (0, ew.jsx)("h3", {
              className: "font-normal text-v0-green-600",
              children: "Action ran successfully.",
            })
          : (0, ew.jsx)("h3", {
              className: "text-copy-13",
              children: e.info || "This is a description of the action.",
            });
    }
    function eD({ action: e }) {
      let { api: t, atoms: n } = (0, eC.useWizard)(),
        r = (0, eN.useAtomValue)(n.latestUpdateArgs),
        i = (0, ek.useMemo)(
          () =>
            t.isUpdating && r?.runActions?.some((t) => t.action === e.action),
          [t.isUpdating, r, e.action],
        ),
        s = (0, ek.useCallback)(async () => {
          let n = await t.update({ runActions: [{ action: e.action }] });
          "error" === n.status && eE.toast.error(n.message);
        }, [e.action, t]);
      return (0, ew.jsxs)("div", {
        className:
          "bg-v0-gray-100 px-2 py-2.5 w-full rounded-md flex items-center justify-between gap-2",
        children: [
          (0, ew.jsxs)("div", {
            children: [
              (0, ew.jsx)("h3", {
                className: "font-medium text-label-14",
                children: e.title,
              }),
              (0, ew.jsx)(eA, { action: e }),
            ],
          }),
          (0, ew.jsx)(eS.Button, {
            size: "sm",
            variant: "secondary",
            disabled: i,
            onClick: s,
            children: "Setup",
          }),
        ],
      });
    }
    function eI({ children: e }) {
      return (0, ew.jsx)(tc.DisplayProvider, {
        actions: { handleActionButtonClick: null },
        state: { isActionLoading: !1, isActionDisabled: !1 },
        children: e,
      });
    }
    function eM() {
      let { api: e } = (0, eC.useWizard)();
      return (0, ew.jsxs)(eI, {
        children: [
          (0, ew.jsxs)(tc.Header, {
            children: [
              (0, ew.jsx)(tc.Title, { children: "Run Actions" }),
              (0, ew.jsx)(tc.Description, {
                children:
                  "This generation has some actions that need to be run.",
              }),
            ],
          }),
          (0, ew.jsx)(tc.Content, {
            children: e.data.actions.map((e) =>
              (0, ew.jsx)(eD, { action: e }, e.action),
            ),
          }),
          (0, ew.jsxs)(tc.Footer, {
            children: [
              (0, ew.jsx)(tc.BackButton, {}),
              (0, ew.jsx)(tc.SkipButton, {}),
            ],
          }),
        ],
      });
    }
    var eT = t,
      eL = et,
      eP = n,
      eR = x,
      eF = S,
      e_ = eu,
      eO = e.i(554912),
      eB = e.i(393753),
      eV = e.i(707827);
    function ez({ fileName: e }) {
      let {
          api: { updateResult: t },
        } = (0, eL.useWizard)(),
        n = (0, eP.useMemo)(
          () =>
            t && "error" !== t.status
              ? t.ranScripts.find((t) => t.fileName === e)
              : null,
          [t, e],
        );
      return n?.status === "error"
        ? (0, eT.jsx)("h3", {
            className: "text-copy-13 text-v0-red-900",
            children: n.message || "An unexpected error occurred",
          })
        : n?.status === "success"
          ? (0, eT.jsx)("h3", {
              className: "text-copy-13 text-v0-green-600",
              children: "Script ran successfully.",
            })
          : (0, eT.jsxs)("h3", {
              className: "text-copy-13",
              children: ["Execute ", e],
            });
    }
    function eH({ fileName: e }) {
      let {
          api: t,
          atoms: n,
          computed: r,
          actions: { setIsOpenIntent: i },
        } = (0, eL.useWizard)(),
        s = (0, eF.useAtomValue)(n.latestUpdateArgs),
        { appendCodeOutputEvents: a } = (0, eO.useConsoleNextLite)(r.blockId),
        [o, l] = (0, eF.useAtom)(tp),
        c = (0, eP.useMemo)(
          () => t.isUpdating && s?.runScripts?.some((t) => t.fileName === e),
          [t.isUpdating, s, e],
        ),
        u = (0, eP.useCallback)(async () => {
          let n = await t.update({ runScripts: [{ fileName: e }] });
          if ("error" === n.status) return void e_.toast.error(n.message);
          let s = n.ranScripts.at(0);
          s &&
            s.executionResult &&
            (a(
              (0, eB.transformExecutionOutputToEvents)(
                s.executionResult,
                r.blockId,
                e,
              ),
            ),
            l(!0),
            "error" === s.status && i(!1));
        }, [t, e, r.blockId, i, a, l]);
      return (0, eT.jsxs)("div", {
        className:
          "bg-v0-gray-100 px-2 py-2.5 w-full rounded-md flex items-center justify-between gap-2",
        children: [
          (0, eT.jsxs)("div", {
            children: [
              (0, eT.jsx)("h3", {
                className: "font-medium text-label-14",
                children: e,
              }),
              (0, eT.jsx)(ez, { fileName: e }),
            ],
          }),
          (0, eT.jsxs)(eR.Button, {
            size: "sm",
            variant: "secondary",
            disabled: t.isUpdating,
            onClick: u,
            children: ["Run", c && (0, eT.jsx)(eV.Spinner, { size: 14 })],
          }),
        ],
      });
    }
    function e$({ children: e }) {
      let { api: t, computed: n, actions: r, atoms: i } = (0, eL.useWizard)(),
        { appendCodeOutputEvents: s } = (0, eO.useConsoleNextLite)(n.blockId),
        [a, o] = (0, eF.useAtom)(tp),
        l = (0, eF.useAtomValue)(i.latestUpdateArgs),
        c = async () => {
          let e = t.data.scripts;
          if (!e.length) return;
          let i = await t.update({ runScripts: e });
          if ("error" === i.status) return void e_.toast.error(i.message);
          let a = !1,
            l = [];
          for (let e of i.ranScripts)
            e.executionResult &&
              (l.push(
                ...(0, eB.transformExecutionOutputToEvents)(
                  e.executionResult,
                  n.blockId,
                  e.fileName,
                ),
              ),
              "error" === e.status && (a = !0));
          l.length && (s(l), o(!0), a && r.setIsOpenIntent(!1));
        },
        u = !!(
          t.isUpdating &&
          l?.runScripts?.length &&
          l.runScripts.length === t.data.scripts.length
        );
      return (0, eT.jsx)(tc.DisplayProvider, {
        actions: { handleActionButtonClick: c },
        state: { isActionLoading: u, isActionDisabled: t.isUpdating },
        children: e,
      });
    }
    function eU() {
      let { api: e } = (0, eL.useWizard)();
      return (0, eT.jsxs)(e$, {
        children: [
          (0, eT.jsxs)(tc.Header, {
            children: [
              (0, eT.jsx)(tc.Title, { children: "Run Files" }),
              (0, eT.jsx)(tc.Description, {
                children:
                  "This generation has some executable files. Run them to continue.",
              }),
            ],
          }),
          (0, eT.jsx)(tc.Content, {
            children: e.data.scripts.map(({ fileName: e }) =>
              (0, eT.jsx)(eH, { fileName: e }, e),
            ),
          }),
          (0, eT.jsxs)(tc.Footer, {
            children: [
              (0, eT.jsx)(tc.BackButton, {}),
              (0, eT.jsx)(tc.SkipButton, {}),
              (0, eT.jsxs)(tc.ActionButton, {
                children: ["Run All (", e.data.scripts.length, ")"],
              }),
            ],
          }),
        ],
      });
    }
    let eG = (0, ee.createContext)(null),
      eW = () => {
        let e = (0, ee.useContext)(eG);
        if (!e)
          throw Error(
            "useWizardDisplay must be used within a WizardDisplayProvider",
          );
        return e;
      },
      eq = {
        DisplayProvider: ({ children: e, ...t }) =>
          (0, X.jsx)(eG.Provider, { value: t, children: e }),
        Display: function () {
          let {
              computed: { display: e },
            } = (0, et.useWizard)(),
            t = {
              Integrations: en.WizardIntegrationsDisplay,
              EnvironmentVariables: ej,
              Actions: eM,
              Scripts: eU,
            };
          return "integrations" === e
            ? (0, X.jsx)(t.Integrations, {})
            : "environment-variables" === e
              ? (0, X.jsx)(t.EnvironmentVariables, {})
              : "actions" === e
                ? (0, X.jsx)(t.Actions, {})
                : "scripts" === e
                  ? (0, X.jsx)(t.Scripts, {})
                  : null;
        },
      };
    var eZ = et,
      eK = e.i(576949),
      eY = eV;
    let eJ = {
      SkipButton: function ({ children: e = "Skip" }) {
        let {
          computed: { hasNextDisplay: t },
          actions: { goToDisplay: n },
        } = (0, eZ.useWizard)();
        return t
          ? (0, Y.jsx)(J.Button, {
              size: "sm",
              type: "button",
              variant: "secondary",
              onClick: () => n("next"),
              className: "m-0",
              children: e,
            })
          : null;
      },
      ActionButton: function ({ children: e = "Next" }) {
        let {
            actions: { handleActionButtonClick: t },
            state: { isActionLoading: n, isActionDisabled: r },
          } = eW(),
          {
            computed: { hasNextDisplay: i },
          } = (0, eZ.useWizard)();
        if (!t) return null;
        let s = e;
        return (
          i || "Next" !== s || (s = "Submit"),
          (0, Y.jsxs)(J.Button, {
            size: "sm",
            disabled: n || r,
            onClick: t,
            children: [s, n && (0, Y.jsx)(eY.Spinner, { size: 14 })],
          })
        );
      },
      Footer: function ({ children: e }) {
        let {
            computed: { hasNextDisplay: t, hasPreviousDisplay: n },
          } = (0, eZ.useWizard)(),
          {
            actions: { handleActionButtonClick: r },
          } = eW();
        return t || n || r
          ? (0, Y.jsx)(Q.DialogFooter, {
              className:
                "border-v0-alpha-400 bg-v0-background-200 border-t p-4! rounded-b-xl gap-2",
              children: e,
            })
          : null;
      },
      BackButton: function ({
        children: e = (0, Y.jsxs)(Y.Fragment, {
          children: [(0, Y.jsx)(eK.ArrowLeft, {}), "Back"],
        }),
      }) {
        let {
          computed: { hasPreviousDisplay: t },
          actions: { goToDisplay: n },
        } = (0, eZ.useWizard)();
        return t
          ? (0, Y.jsxs)(Y.Fragment, {
              children: [
                (0, Y.jsx)(J.Button, {
                  size: "sm",
                  type: "button",
                  variant: "ghost",
                  onClick: () => n("previous"),
                  children: e,
                }),
                (0, Y.jsx)("div", { className: "flex-1" }),
              ],
            })
          : null;
      },
    };
    var eQ = t,
      eX = Q;
    let e0 = {
      Title: function ({ children: e }) {
        return (0, eQ.jsx)(eX.DialogTitle, {
          className: "text-heading-20 mb-[10px]",
          children: e,
        });
      },
      Description: function ({ children: e }) {
        return (0, eQ.jsx)(eX.DialogDescription, {
          className: "text-copy-16",
          children: e,
        });
      },
      Header: function ({ children: e }) {
        return (0, eQ.jsx)(eX.DialogHeader, {
          className: "text-left items-start p-6 pb-0",
          children: e,
        });
      },
    };
    var e1 = et,
      e2 = t,
      e5 = et,
      e3 = e.i(686832),
      e4 = e.i(304649),
      e9 = e.i(675120);
    function e7({ children: e }) {
      let {
        computed: { display: t, isOpen: n },
        callbacks: { handleWizardOpenChanged: r },
      } = (0, e5.useWizard)();
      return n
        ? (0, e2.jsx)("div", {
            className: (0, e4.cn)(
              "absolute w-full h-full bg-v0-black/10 backdrop-blur-xs z-50",
            ),
            children: (0, e2.jsx)(e3.Modal, {
              "aria-description": "Dialog",
              open: n,
              onOpenChange: r,
              className: (0, e4.cn)(
                "p-0 md:max-w-[min(540px,90vw)] gap-0 shadow-sm z-50",
              ),
              omitPortal: !0,
              children: (0, e2.jsx)(e9.TransitionNode, {
                renderKey: t,
                ...e9.PRESETS.modalSection,
                className: "will-change-auto",
                children: (0, e2.jsx)("div", {
                  className:
                    "overflow-y-hidden flex flex-col gap-0 max-h-[600px]",
                  id: "wizard-dialog-container",
                  children: e,
                }),
              }),
            }),
          })
        : null;
    }
    var e6 = t,
      e8 = e4;
    function te({ children: e, className: t }) {
      return (0, e6.jsx)("div", {
        className: (0, e8.cn)(
          "overflow-y-auto flex-1 min-h-0 p-6 flex flex-col items-stretch justify-start gap-4",
          t,
        ),
        children: e,
      });
    }
    var tt = t,
      tn = em,
      tr = e.i(147675),
      ti = et,
      ts = x,
      ta = e.i(70165),
      to = n;
    function tl() {
      let e,
        { computed: t, api: n, callbacks: r } = (0, ti.useWizard)(),
        [i, s] = (0, to.useTransition)(),
        a = (0, ta.useIsMobile)(),
        { isOpen: o, display: l } = t,
        c = n.data.fingerprint,
        u = n.data.bannerDismissed;
      if ("none" === l || (c && u)) return null;
      switch (l) {
        case "integrations":
          e = "This generation requires integrations";
          break;
        case "scripts":
          e = "This generation requires you to run some scripts";
          break;
        case "environment-variables":
          e = "This generation requires environment variables";
          break;
        case "actions":
          e = "This generation requires you to take some actions";
          break;
        default:
          return l;
      }
      return (a && (e = "Actions required"), o)
        ? null
        : (0, tt.jsxs)("div", {
            className:
              "absolute flex justify-center items-center gap-2 inset-x-0 text-label-14 h-9 z-40 bg-v0-amber-200 text-v0-amber-900",
            children: [
              (0, tt.jsx)(tr.Warning, { className: "size-4 shrink-0" }),
              e,
              (0, tt.jsx)(ts.Button, {
                onClick: () => {
                  r.handleWizardOpenChanged(!0);
                },
                variant: "link",
                className:
                  "underline text-v0-amber-1000 text-label-14 font-semibold",
                children: "Configure",
              }),
              (0, tt.jsx)(ts.Button, {
                variant: "ghost",
                size: "xs",
                "aria-label": "Dismiss banner",
                type: "button",
                className:
                  "text-v0-amber-900 hover:text-v0-amber-1000 absolute right-2",
                disabled: i,
                onClick: () => {
                  c &&
                    s(async () => {
                      await n.update({
                        setBannerDismissed: { fingerprint: c, dismissed: !0 },
                      });
                    });
                },
                children: (0, tt.jsx)(tn.Cross, {}),
              }),
            ],
          });
    }
    let tc = Object.assign(eJ, e0, eq, {
      Provider: e1.WizardProvider,
      Dialog: e7,
      Content: te,
      Trigger: tl,
    });
    function tu({ activeBlockId: e, closed: t }) {
      return (0, K.jsxs)(tc.Provider, {
        activeBlockId: e,
        closed: t,
        children: [
          (0, K.jsx)(tc.Trigger, {}),
          (0, K.jsx)(tc.Dialog, { children: (0, K.jsx)(tc.Display, {}) }),
        ],
      });
    }
    var td = e.i(523968),
      th = e.i(209819);
    let tp = (0, k.atom)(!1);
    class tm {
      static getIsPreviewable = ({ closed: e, source: t, meta: n }) => {
        if (!e) return !1;
        let r = (0, D.hasVisibleNextLiteContent)(t, n);
        return "string" == typeof r ? { error: r } : r;
      };
      static Render(e) {
        let { isPublished: p } = (0, a.usePublishedPage)(),
          { activeForkKey: m } = (0, h.useChatMessages)(),
          { isStreaming: f, chatId: g } = (0, h.useChatLoadingState)(),
          { atoms: x } = (0, q.useCurrentChat)(),
          { vercelProjectId: v } = (0, th.useChatMetadata)(),
          y = (0, S.useAtomValue)(x.canWriteToChat),
          b = (0, S.useAtomValue)(x.project),
          j = (0, S.useAtomValue)(x.ownerId),
          { vpifc: w } = (0, T.useFlags)(),
          { user: C } = (0, W.useUser)(),
          [k, D] = (0, S.useAtom)(P.previewBlockErrorsAtom),
          [K] = (0, S.useAtom)(tp),
          { token: Y, error: J } = (0, l.useSessionTokenForFrame)({
            chatId: g,
          }),
          { ensureBlockSource: Q } = (0, Z.useBlockHistory)({
            blockId: e.blockId,
          }),
          { isBlockPreviewable: X } = (0, s.useActiveTab)(),
          ee = (0, n.useRef)(X),
          { getBlockForked: et } = (0, I.useForkedBlocks)(),
          { vr: en } = (0, T.useFlags)(),
          er = (0, U.useSearchParams)(),
          ei = (0, n.useRef)(er.get("path")),
          es = (0, td.useIsVMEnabledForChat)(g),
          ea = !!en || es;
        (0, n.useEffect)(() => {
          (Q().catch(() => {}), D([]));
        }, [Q, e.blockId, D]);
        let { files: eo, loadingPath: el } = (0, L.useBlockFiles)({
            blockId: e.blockId,
            closed: e.closed,
            source: e.source,
            meta: e.meta,
          }),
          ec = (0, d.useLatest)(eo),
          eu = (0, r.getBlockIframeId)(e.blockId),
          { submit: ed } = (0, u.useV0Chat)(),
          { setDesignModeEnabled: eh } = (0, F.useDesignModeToggle)();
        (0, R.useMessage)(
          (t) => {
            if (t.data && "object" == typeof t.data && t.data.__v0_remote__) {
              if ("generation_logs" === t.data.type) {
                let n = (t.data.logs || []).join("\n\n"),
                  r = G.store.get(P.previewBlockCollectedErrorsVersion),
                  i =
                    G.store.get(P.previewBlockDisplayedErrorsVersion) ||
                    e.blockId,
                  s =
                    G.store.get(P.previewBlockPreloadingSuccessCallback)
                      ?.callback || null;
                if (r && r !== i && s && !n) {
                  (s?.(),
                    G.store.set(P.previewBlockPreloadingSuccessCallback, null));
                  return;
                }
                f &&
                  (0, z.updateAgentRuntimeErrors)({
                    blockId: t.data.id || e.blockId,
                    fullErrorMessage: n,
                  }).catch((n) => {
                    (0, E.track)("FailedToUpdateBlockRuntimeErrors", {
                      blockId: t.data.id || e.blockId,
                      error: n instanceof Error ? n.message : String(n),
                    });
                  });
              }
              if ("error" === t.data.type) {
                let n = (0, N.cleanBlockError)(t.data.error, t.data.stack);
                D((r) =>
                  r.some((e) => e.text === n) || !ee.current
                    ? r
                    : ((0, E.track)(
                        t.data.isFatal
                          ? "V0BlockPreviewError"
                          : "V0BlockPreviewSoftError",
                        {
                          messageId: e.messageId,
                          blockId: e.blockId,
                          from:
                            void 0 !== e.meta.isQuickEdit
                              ? "quick-edit"
                              : void 0,
                          forkedFromBlockId: et(e.blockId),
                          resultId: e.resultId || "",
                        },
                        { errorMsg: n, errorCode: A.V0_BLOCK_PREVIEW_ERROR },
                      ),
                      r.concat({
                        isFatal: t.data.isFatal,
                        isServer: t.data.isServer,
                        blockId:
                          G.store.get(P.previewBlockCollectedErrorsVersion) ||
                          e.blockId,
                        text: n,
                        currentURL: t.data.currentURL,
                      })),
                );
              }
              if ("frame_onload" === t.data.type) {
                let e = document.getElementById(eu);
                (e && (0, $.markIframeAsLoaded)(e), D([]));
              }
              if (
                ("refine" === t.data.type ||
                  "add-refinement-element" === t.data.type) &&
                (eh(!1), ec.current)
              ) {
                let n = ec.current.find((e) => e.meta.file === t.data.file);
                if (!n) return void alert("File not found");
                let { componentName: r, sourceContext: i } = (0,
                H.structureRefinementData)({ event: t, file: n });
                if ("refine" === t.data.type) {
                  let s = {
                      version: 1,
                      parts: [
                        (0, H.createRefinementPart)({
                          file: n.meta.file,
                          componentName: r || "",
                          sourceContext: i,
                          line: t.data.line,
                          column: t.data.column,
                        }),
                        { type: "mdx", content: t.data.prompt },
                      ],
                    },
                    a = m?.indexOf(e.messageId) || -1;
                  m && a > 0 && a < m.length - 1
                    ? ed({
                        action: "edit",
                        content: s,
                        userMessageId: m[a + 1],
                        type: "refinement",
                      })
                    : ed({
                        action: "new",
                        content: s,
                        attachments: [],
                        type: "refinement",
                      });
                }
              }
            }
          },
          [
            eu,
            ed,
            m,
            D,
            e.messageId,
            ec,
            g,
            e.blockId,
            f,
            ee,
            e.meta.isQuickEdit,
            et,
            e.resultId,
            eh,
          ],
        );
        let ep = null,
          { status: em } = (0, _.useVMPreviewSubdomain)({
            enabled: !!(ea && g),
            bid: e.blockId,
            cid: g,
          }),
          ef = (0, o.getLiteIframeOrigin)(e.blockId, e.title);
        (0, B.useLocalStorageFrameHost)(g, ef);
        let { theme: eg } = (0, V.useTheme)(),
          ex = (0, n.useCallback)(() => {
            let e = document.getElementById(eu);
            if (!e?.contentWindow) return;
            let t = document.documentElement.classList.contains("dark");
            e.contentWindow.postMessage(
              { type: "theme_change", isDark: t },
              "*",
            );
          }, [eu]);
        if (
          ((0, n.useEffect)(() => {
            ex();
          }, [eg, ex]),
          e.blockId && X && (Y || J))
        ) {
          let n = new URLSearchParams();
          (p && n.set("mql", "true"),
            J || !Y
              ? n.set("__v0", "")
              : Y &&
                (C &&
                  ((C.teamId && C.teamId === j) || j === C.id) &&
                  n.set("__v0_token", Y),
                b && n.set("__v0_vercel_project_id", v || "")),
            e.isV3 && n.set("isV3", "true"),
            (ep =
              ea && g
                ? (0, t.jsx)(O.VMIframe, {
                    blockId: e.blockId,
                    chatId: g,
                    status: em,
                    isPreviewable: X,
                    iframeProps: {
                      iframeId: eu,
                      isPublished: p,
                      src: ei.current?.startsWith("/")
                        ? ei.current
                        : `/${ei.current ?? ""}`,
                    },
                  })
                : (0, t.jsx)($.CachedNextLiteIframe, {
                    chatId: g,
                    blockId: e.blockId,
                    iframeId: eu,
                    isPublished: p,
                    origin: ef,
                    src: `${ei.current?.startsWith("/") ? ei.current : `/${ei.current ?? ""}`}?${n.toString()}`,
                    onLoad: ex,
                  })),
            "code-project" === e.meta.type &&
              (ep = (0, t.jsx)("div", {
                className: "size-full",
                "data-slot": "browser-content",
                children: ep,
              })));
        }
        return (0, t.jsxs)(i.PreviewBlock, {
          initialFileTreeSize: e.initialFileTreeSize,
          ...e,
          resultId: void 0,
          loadingPath: el,
          files: eo,
          blockType: "code-project" === e.meta.type ? "code-project" : "v0",
          language: "typescriptreact",
          allowRefresh: "code-project" !== e.meta.type,
          allowFullScreen: "code-project" !== e.meta.type,
          isV3: e.isV3,
          initialConsoleSize: e.initialConsoleSize,
          initialConsoleExpanded: e.initialConsoleExpanded,
          hideConsole: !K,
          browserControls:
            "code-project" === e.meta.type
              ? (0, t.jsx)(c.BrowserFrame, { blockId: e.blockId, iframeId: eu })
              : void 0,
          children: [
            k.length
              ? (0, t.jsx)(M.ErrorsBanner, {
                  errors: k,
                  blockId: e.blockId,
                  onDismiss: () => {
                    D([]);
                  },
                  canWriteToChat: y,
                })
              : null,
            (0, t.jsx)(tu, { activeBlockId: e.blockId, closed: e.closed }),
            ep,
          ],
        });
      }
      static Actions = n.default.memo(({ blockId: e, closed: n }) =>
        (0, t.jsx)(p.PreviewBlockTitleActions, { blockId: e, closed: n }),
      );
      static BrowserControls = n.default.memo(({ blockId: e }) =>
        (0, t.jsx)(c.BrowserFrame, {
          blockId: e,
          iframeId: (0, r.getBlockIframeId)(e),
        }),
      );
      static ConsoleToggle = n.default.memo(({ blockId: e }) => {
        let [n, r] = (0, S.useAtom)(tp),
          { blockStatus: i, clearEvents: s } = (0, w.useNewConsoleEvents)(e),
          a = i[e] || null,
          o = () => {
            let e = !n;
            (r(e), e && s());
          };
        return (0, t.jsx)(b.CodeBlockButton, {
          onClick: o,
          tooltip: {
            side: "bottom",
            content: n ? "Hide Console" : "Show Console",
          },
          className: "size-7 rounded-md text-v0-gray-900 hidden sm:flex",
          children: (0, t.jsx)(j.default, { status: a, isExpanded: n }),
        });
      });
      static MoreMenu = n.default.memo(
        ({ blockId: e, blockLanguage: n, blockSource: r }) => {
          let { fullScreenResult: i, setFullscreenResult: a } = (0,
            C.useFullscreenResult)(),
            [o, l] = (0, S.useAtom)(tp),
            { blockStatus: c, clearEvents: u } = (0, w.useNewConsoleEvents)(e),
            d = c[e] || null,
            { activeTab: h } = (0, s.useActiveTab)(),
            p = () => {
              let e = !o;
              (l(e), e && u());
            };
          return (0, t.jsxs)(m.DropdownMenu, {
            modal: !0,
            children: [
              (0, t.jsx)(m.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, t.jsx)(x.Button, {
                  variant: "ghost",
                  className: "size-7 rounded-md text-v0-gray-900",
                  size: "sm",
                  children: (0, t.jsx)(v.MoreHorizontal, {}),
                }),
              }),
              (0, t.jsxs)(m.DropdownMenuContent, {
                align: "end",
                side: "bottom",
                sideOffset: 8,
                children: [
                  "code" !== h &&
                    (0, t.jsxs)(m.DropdownMenuGroup, {
                      children: [
                        (0, t.jsxs)(m.DropdownMenuItem, {
                          onSelect: () => a(!i, e),
                          children: [
                            (0, t.jsx)(y.Fullscreen, {}),
                            (0, t.jsx)("span", {
                              children: i ? "Exit fullscreen" : "Fullscreen",
                            }),
                          ],
                        }),
                        (0, t.jsxs)(m.DropdownMenuItem, {
                          className: "sm:hidden",
                          onSelect: () => {
                            p();
                          },
                          children: [
                            (0, t.jsx)(j.default, { status: d, isExpanded: o }),
                            (0, t.jsx)("span", {
                              children: o ? "Hide Console" : "Show Console",
                            }),
                          ],
                        }),
                      ],
                    }),
                  (0, t.jsx)(m.DropdownMenuSeparator, {}),
                  (0, t.jsxs)(m.DropdownMenuGroup, {
                    children: [
                      (0, t.jsx)(g.BlockActionCli, {
                        blockId: e || "",
                        lang: n,
                        source: r,
                      }),
                      (0, t.jsx)(f.BlockActionDownloadZip, {
                        blockId: e,
                        lang: n,
                        source: r,
                      }),
                    ],
                  }),
                ],
              }),
            ],
          });
        },
      );
    }
  },
  910888,
  (e) => {
    "use strict";
    e.s(["useCurrentChatVM", () => h]);
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(142219),
      i = e.i(576191),
      s = e.i(92479),
      a = e.i(513529);
    let o = new Map(),
      l = (0, n.cacheResultById)(o, () => ({
        selectedTab: (0, t.atom)("preview"),
        url: (0, t.atom)("/"),
        activeFilePath: (0, t.atom)(void 0),
        activeFileLocation: (0, t.atom)(void 0),
        recoveryStatus: (0, t.atom)({ isRecovering: !1, step: null }),
        runtimeErrors: (0, t.atom)([]),
      })),
      c = new Map(),
      u = (0, n.cacheResultById)(c, (e) => ({
        ...l(e),
        showConsole: a.consoleVisibilityAtom,
      }));
    function d(e) {
      let t = l(e);
      return {
        setSelectedTab: (e) => {
          r.store.set(t.selectedTab, e);
        },
        setShowConsole: (e) => {
          r.store.set(a.consoleVisibilityAtom, e);
        },
        toggleShowConsole: () => {
          let e = r.store.get(a.consoleVisibilityAtom);
          r.store.set(a.consoleVisibilityAtom, !e);
        },
        setUrl: (e) => {
          r.store.set(t.url, e);
        },
        setActiveFilePath: (e, n) => {
          (r.store.set(t.activeFilePath, e),
            r.store.set(t.activeFileLocation, n));
        },
        setRecoveryStatus: (e) => {
          r.store.set(t.recoveryStatus, e);
        },
        setRuntimeErrors: (e) => {
          r.store.set(t.runtimeErrors, e);
        },
      };
    }
    function h() {
      let e = (0, s.assertChatId)((0, s.useChatId)().chatId);
      return { atoms: u(e), actions: (0, i.useMemo)(() => d(e), [e]) };
    }
  },
  597932,
  (e) => {
    "use strict";
    e.s(["VMLogPanel", () => y, "default", () => b]);
    var t = e.i(324834),
      n = e.i(696871),
      r = e.i(592885),
      i = e.i(176248),
      s = e.i(483962),
      a = e.i(265281),
      o = e.i(576191),
      l = e.i(638200),
      c = e.i(763480),
      u = e.i(297239),
      d = e.i(987630);
    e.i(563948);
    var h = e.i(407562),
      p = e.i(230902),
      m = e.i(393799),
      f = e.i(513529),
      g = e.i(910888),
      x = e.i(554912),
      v = e.i(819969);
    function y({
      children: e,
      activeFilePath: n,
      setActiveFilePath: r,
      initialSize: i,
      onClose: s,
      hide: a,
      blockId: l,
      chatId: c,
    }) {
      let { actions: u } = (0, g.useCurrentChatVM)(),
        { atoms: d } = (0, v.useCurrentChat)(),
        h = (0, m.useAtomValue)(d.canWriteToChat),
        { consoleEvents: p, clearConsoleEvents: f } = (0, x.useConsoleVM)(l, c),
        y = (0, o.useMemo)(
          () =>
            p
              .filter((e) => "console" === e.type && "error" === e.method)
              .map((e) => ({
                blockId: l,
                isFatal: !1,
                isServer: e.isServer,
                text: e.message,
                currentURL: void 0,
              })),
          [p, l],
        );
      return (
        (0, o.useEffect)(() => {
          u.setRuntimeErrors(y);
        }, [y, u]),
        (0, t.jsx)(j, {
          consoleEvents: p,
          clearLogs: f,
          canWriteToChat: h,
          activeFilePath: n,
          setActiveFilePath: r,
          initialSize: i,
          onClose: s,
          hide: a,
          children: e,
        })
      );
    }
    function b({
      children: e,
      consoleEvents: n = [],
      clearLogs: r,
      canWriteToChat: i,
      activeFilePath: s,
      setActiveFilePath: a,
      initialSize: o,
      onClose: l,
      hide: c,
    }) {
      return (0, t.jsx)(j, {
        consoleEvents: n,
        clearLogs: r,
        canWriteToChat: i,
        activeFilePath: s,
        setActiveFilePath: a,
        initialSize: o,
        onClose: l,
        hide: c,
        children: e,
      });
    }
    function j({
      children: e,
      consoleEvents: x,
      clearLogs: v,
      canWriteToChat: y,
      activeFilePath: b,
      setActiveFilePath: j,
      initialSize: w,
      onClose: C,
      hide: k,
    }) {
      let [S, N] = (0, o.useState)(""),
        [, E] = (0, m.useAtom)(f.consoleVisibilityAtom),
        { actions: A } = (0, g.useCurrentChatVM)(),
        D = (0, o.useRef)(null),
        I = (0, o.useMemo)(() => {
          if (!S) return x;
          let e = S.toLowerCase();
          return x.filter((t) =>
            "console" === t.type
              ? t.message.toLowerCase().includes(e)
              : t.content.toLowerCase().includes(e),
          );
        }, [x, S]),
        M = (0, o.useCallback)(
          (e) => {
            (e.stopPropagation(),
              navigator.clipboard.writeText(
                I.map((e) =>
                  "console" === e.type
                    ? `${(0, p.format)(new Date(e.timestamp), "HH:mm:ss.SSS")}Z	${e.isServer ? "[SERVER]	" : ""}${e.message}`
                    : null,
                )
                  .filter((e) => !!e)
                  .join("\n"),
              ),
              h.toast.default("Copied to clipboard"));
          },
          [I],
        ),
        T = (0, u.useT)();
      return (0, t.jsxs)("div", {
        className: "relative flex size-full min-h-0 flex-1 flex-col",
        children: [
          e,
          k
            ? null
            : (0, t.jsx)(s.Resizable, {
                animated: !1,
                axis: "y",
                cookieName: n.CONSOLE_RESIZE_COOKIE,
                dotsHandle: !1,
                initialSize: w ?? n.INITIAL_CONSOLE_SIZE,
                minSizePx: n.CONSOLE_MIN_SIZE_PX,
                minNegativeSpace: 144,
                show: !0,
                side: "start",
                className: "z-20",
                ref: D,
                children: (0, t.jsxs)("div", {
                  className:
                    "bg-v0-background-200 group/log-panel-header relative flex size-full flex-col border-t",
                  children: [
                    (0, t.jsxs)("div", {
                      className:
                        "flex h-9 w-full shrink-0 items-center justify-between",
                      children: [
                        (0, t.jsx)("div", {
                          className:
                            "flex items-center gap-1.5 pl-2 pr-3 text-sm text-v0-gray-1000",
                          children: (0, t.jsx)("span", {
                            children: T("logPanel.console"),
                          }),
                        }),
                        (0, t.jsxs)("div", {
                          className: "flex gap-0.5 items-center pr-2",
                          children: [
                            (0, t.jsx)(c.Input, {
                              placeholder: "Filter...",
                              size: "sm",
                              className: "w-44 mr-1",
                              value: S,
                              onChange: (e) => N(e.target.value),
                              onClick: (e) => e.stopPropagation(),
                            }),
                            (0, t.jsx)(i.Button, {
                              variant: "ghost",
                              size: "xs",
                              className: "text-v0-gray-900 size-6",
                              tooltip: { side: "bottom", content: "Copy logs" },
                              onClick: M,
                              disabled: 0 === x.length,
                              children: (0, t.jsx)(d.AnimatedCopy, {}),
                            }),
                            (0, t.jsx)(i.Button, {
                              variant: "ghost",
                              size: "xs",
                              className: "text-v0-gray-900 size-6",
                              tooltip: {
                                side: "bottom",
                                content: "Clear logs",
                              },
                              onClick: (e) => {
                                (e.stopPropagation(), v?.());
                              },
                              disabled: 0 === x.length,
                              children: (0, t.jsx)(l.AnimatedTrash, {}),
                            }),
                            (0, t.jsx)(i.Button, {
                              tooltip: {
                                side: "bottom",
                                content: "Hide console",
                              },
                              variant: "ghost",
                              className: "text-v0-gray-900 size-6",
                              size: "xs",
                              onClick: (e) => {
                                (e.stopPropagation(),
                                  A.setShowConsole(!1),
                                  E(!1),
                                  C?.());
                              },
                              children: (0, t.jsx)(r.Cross, {}),
                            }),
                          ],
                        }),
                      ],
                    }),
                    (0, t.jsx)(a.ConsoleViewer, {
                      hideHeader: !0,
                      consoleEvents: I,
                      clearLogs: v || (() => {}),
                      canWriteToChat: y,
                      className: "bg-transparent",
                      activeFilePath: b,
                      setActiveFilePath: j,
                    }),
                  ],
                }),
              }),
        ],
      });
    }
  },
  43116,
  (e) => {
    "use strict";
    e.s(["VSCodeEditorWrapper", () => y, "loadVSCodeEditor", () => x]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(563261),
      i = e.i(811140),
      s = e.i(313595),
      a = e.i(894906),
      o = e.i(44756),
      l = e.i(934994),
      c = e.i(926224),
      u = e.i(295224),
      d = e.i(92479),
      h = e.i(222199);
    e.i(563948);
    var p = e.i(407562),
      m = e.i(262553),
      f = e.i(242759),
      g = e.i(523968);
    function x() {
      return e.A(3178).then(async (e) => (await e.init(), e.VSCodeEditor));
    }
    let v = (0, r.default)(x, { ssr: !1 });
    function y({
      blockId: e,
      source: r,
      files: x,
      activeFilePath: y,
      activeFileLocation: b,
      editValueMap: j,
      onEdit: w,
      onActiveFileChange: C,
      reloadIframe: k,
      forceReadOnly: S,
      editable: N = !0,
      vmSync: E,
      ref: A,
      editorSource: D = "next-lite-panel",
      isDiffDataReady: I = !0,
    }) {
      let M = (0, n.useRef)(void 0),
        { isReadOnlyMode: T } = (0, m.useReadOnlyMode)(),
        L = !!S || T,
        P = !N || L,
        R = (0, u.useLatest)((0, a.useUpdateBlockData)(e)),
        F = (0, n.useRef)(r),
        _ = (0, n.useRef)(e),
        { isStreaming: O } = (0, d.useChatLoadingState)();
      (0, n.useEffect)(() => {
        F.current = r;
      }, [r]);
      let { vr: B } = (0, f.useFlags)(),
        { chatId: V } = (0, d.useChatId)(),
        z = (0, g.useIsVMEnabledForChat)(V),
        H = !!B || z,
        $ = (0, n.useRef)(null),
        [U, G] = (0, n.useState)(() => {
          let e = Promise.resolve();
          return (t) => {
            e = e.then(async () => {
              let e = $.current ?? F.current,
                n = (0, c.parseMultiFileSource)({
                  source: e,
                  blockType: "code-project",
                  blockId: _.current,
                });
              (await t(n), ($.current = F.current));
            });
          };
        });
      (0, n.useEffect)(() => {
        $.current = null;
      }, [r]);
      let W = (0, n.useMemo)(
          () => ({
            onActiveFileChange: C,
            onRename: (e, t) => {
              P ||
                U(async (n) => {
                  (await (0, i.renameFile)(
                    n,
                    { fileName: e },
                    t,
                    R.current,
                    !0,
                  ),
                    k());
                });
            },
            onDeleteFolder(e) {
              P ||
                U(async (t) => {
                  (await (0, l.deleteFolder)(t, { folderName: e }, R.current),
                    k());
                });
            },
            onDeleteFile(e) {
              P ||
                U(async (t) => {
                  (await (0, o.deleteFile)(t, { fileName: e }, R.current), k());
                });
            },
            onNewFolder: (e) => {
              P ||
                U(async (t) => {
                  let n = e ? `${e}/.gitkeep` : ".gitkeep";
                  t.some((e) => e.meta.file === n) ||
                    (await (0, s.createFile)(
                      _.current,
                      t,
                      { folderName: e },
                      ".gitkeep",
                      "",
                      R.current,
                    ),
                    k());
                });
            },
            onNewFile: (e, t, n) => {
              P ||
                U(async (r) => {
                  r.some((n) => n.meta.file === `${e}/${t}`) ||
                    (await (0, s.createFile)(
                      _.current,
                      r,
                      { folderName: e },
                      t,
                      n,
                      R.current,
                    ),
                    k());
                });
            },
            onUpload: (t) => {
              P ||
                ((F.current = r),
                (_.current = e),
                (0, h.createFileInput)({
                  multiple: !0,
                  onFilesSelected: async (e) => {
                    try {
                      let n = (0, c.parseMultiFileSource)({
                          source: F.current,
                          blockType: "code-project",
                          blockId: _.current,
                        }),
                        r = await (0, h.uploadFilesToFileTree)({
                          files: e,
                          targetDirectory: t,
                          blockId: _.current,
                          existingFiles: n,
                        });
                      if (r.success && r.files) {
                        let e = [...n, ...r.files];
                        (await R.current(e),
                          ($.current = null),
                          G(() => {
                            let e = Promise.resolve();
                            return (t) => {
                              e = e.then(async () => {
                                let e = $.current ?? F.current,
                                  n = (0, c.parseMultiFileSource)({
                                    source: e,
                                    blockType: "code-project",
                                    blockId: _.current,
                                  });
                                (await t(n), ($.current = F.current));
                              });
                            };
                          }),
                          k(),
                          p.toast.success(
                            `Uploaded ${r.files.length} file(s) to ${t || "root"}`,
                          ));
                      } else p.toast.error(r.error || "Failed to upload files");
                    } catch (e) {
                      (p.toast.error(
                        "An unexpected error occurred while uploading files",
                      ),
                        console.error("File upload error:", e));
                    }
                  },
                }).click());
            },
          }),
          [P, U, k, r, e, R, C],
        ),
        q = (0, n.useCallback)(
          (e, t) => {
            P || O || (w(e, t), E && E.sendFileUpdate(e, t));
          },
          [P, w, O, E],
        );
      return (
        (0, n.useEffect)(() => {
          A &&
            (A.current = {
              updateFileContent: (e, t) => {
                if ("monaco" in window) {
                  let n = window.monaco;
                  if (n?.editor) {
                    let r = n.Uri.file(`/project/${e}`),
                      i = n.editor.getModel(r);
                    i &&
                      i.getValue() !== t &&
                      i.pushEditOperations(
                        [],
                        [{ range: i.getFullModelRange(), text: t }],
                        () => null,
                      );
                  }
                }
              },
            });
        }, [A]),
        (0, t.jsx)(n.Suspense, {
          fallback: (0, t.jsx)("div", { children: "Loading..." }),
          children: (0, t.jsx)(v, {
            onEdit: q,
            diffOriginalCode: null,
            disabled: !!P,
            readOnly: P || O,
            files: x,
            editValueMap: j,
            activeFilePath: y,
            activeFileLocation: b,
            ref: M,
            blockId: e,
            eventCallbacks: W,
            vmMode: H,
            editorSource: D,
            isDiffDataReady: I,
          }),
        })
      );
    }
  },
  988118,
  90177,
  (e) => {
    "use strict";
    let t = { current: null };
    e.s(["designModeInlineEditRef", 0, t], 988118);
    var n = e.i(324834),
      r = e.i(268375);
    function i() {
      return (0, n.jsx)("div", {
        className:
          "bg-v0-background-200 flex aspect-square w-full items-center justify-center rounded-xl",
        children: (0, n.jsxs)("div", {
          className: "relative flex size-12 items-center justify-center",
          children: [
            (0, n.jsx)("div", {
              className:
                "absolute inset-0 rounded-full border-2 border-v0-gray-200",
            }),
            (0, n.jsx)("div", {
              className:
                "animate-spin-slow absolute inset-0 rounded-full border-2 border-transparent border-t-gray-500",
            }),
            (0, n.jsx)("div", {
              className: "text-3xl text-v0-gray-500",
              children: (0, n.jsx)(r.Image, {}),
            }),
          ],
        }),
      });
    }
    e.s(["LoadingImage", () => i], 90177);
  },
  487230,
  (e) => {
    e.v({
      blur: "block-view-loader-module__aUjaiG__blur",
      content: "block-view-loader-module__aUjaiG__content",
    });
  },
  427619,
  (e, t, n) => {
    t.exports = function (e, t, n) {
      return (
        e == e &&
          (void 0 !== n && (e = e <= n ? e : n),
          void 0 !== t && (e = e >= t ? e : t)),
        e
      );
    };
  },
  615529,
  (e, t, n) => {
    var r = e.r(427619),
      i = e.r(394370);
    t.exports = function (e, t, n) {
      return (
        void 0 === n && ((n = t), (t = void 0)),
        void 0 !== n && (n = (n = i(n)) == n ? n : 0),
        void 0 !== t && (t = (t = i(t)) == t ? t : 0),
        r(i(e), t, n)
      );
    };
  },
  480450,
  948020,
  367030,
  616216,
  343428,
  (e) => {
    "use strict";
    e.s(["BlockViewLoader", () => v], 480450);
    var t = e.i(324834),
      n = e.i(707827),
      r = e.i(770858),
      i = e.i(745587),
      s = e.i(576191),
      a = e.i(797173),
      o = e.i(487230),
      l = e.i(403055),
      c = e.i(365290),
      u = e.i(615529),
      d = e.i(360174),
      h = e.i(675120),
      p = e.i(762585),
      m = e.i(657736);
    let f = 200,
      g = [...Array(200)].map(() => `${Math.floor(80 * Math.random()) + 20}%`);
    function x() {
      return (0, t.jsxs)("div", {
        className: "flex w-full",
        children: [
          (0, t.jsx)("div", {
            className: "flex flex-col gap-2 px-[11px]",
            children: [...Array(f)].map((e, n) =>
              (0, t.jsx)(p.Skeleton, { className: "size-4" }, n),
            ),
          }),
          (0, t.jsx)("div", {
            className: "flex flex-1 flex-col gap-2",
            children: [...Array(f)].map((e, n) =>
              (0, t.jsx)(
                p.Skeleton,
                { className: "h-4", style: { width: g[n] } },
                n,
              ),
            ),
          }),
        ],
      });
    }
    function v({ blockId: e, closed: c, source: u, meta: p, switchToCode: f }) {
      let { files: g, loadingPath: v } = (0, a.useBlockFiles)({
          blockId: e,
          closed: c,
          source: u,
          meta: p,
        }),
        { activeFilePath: b } = (0, i.useActiveFile)({
          blockId: e,
          files: g,
          loadingPath: v,
        }),
        j = g?.length ? g.find((e) => e.meta.file === b) || g[0] : void 0,
        [w, C] = (0, s.useState)(j?.source || ""),
        k = (0, s.useRef)(
          (0, d.default)((e) => {
            C(e);
          }, 500),
        ),
        S = (e) => {
          if (!e) return "";
          let t = 32;
          return e.length > t ? `...${e.slice(-(t - 3))}` : e;
        },
        N = `Generating${j?.meta.file ? ` ${S(j.meta.file)}` : ""}`;
      (0, s.useEffect)(() => {
        k.current(j?.source || "");
      }, [j?.source]);
      let E = j && w.split("\n").length >= 9,
        A = (0, s.useMemo)(
          () =>
            w
              ? w
                  .split("\n")
                  .map((e) => {
                    let t = Math.floor((e.match(/^\s*/)?.[0] || "").length / 2);
                    return e.slice(t).replaceAll("<CHANGE>", "");
                  })
                  .filter((e) => !e.includes("... existing code ..."))
                  .join("\n")
              : "",
          [w],
        );
      return (0, t.jsx)(m.motion.div, {
        className: "relative m-auto",
        initial: { opacity: 0, scale: 0.98 },
        animate: { opacity: 1, scale: 1 },
        exit: { opacity: 0, scale: 0.98 },
        children: (0, t.jsx)(h.TransitionNode, {
          renderKey: N,
          duration: 0.4,
          exit: { scale: 0.98 },
          delay: 0.1,
          enter: { scale: 1.02 },
          children: (0, t.jsxs)("button", {
            className:
              "relative flex flex-1 flex-col items-start justify-center gap-3 overflow-hidden",
            onClick: f,
            children: [
              (0, t.jsxs)("div", {
                className:
                  "text-heading-16 flex h-5 items-center gap-2 px-[11px]",
                children: [(0, t.jsx)(n.Spinner, { size: 16 }), N],
              }),
              (0, t.jsx)(h.TransitionNode, {
                renderKey: E ? "showSource" : "hideSource",
                duration: 0.4,
                exit: { scale: 0.98 },
                delay: 0.1,
                enter: { scale: 1.02 },
                children: (0, t.jsx)("div", {
                  className: (0, l.cn)(
                    o.default.content,
                    "relative h-[200px] w-[400px] overflow-hidden",
                  ),
                  children: (0, t.jsx)(
                    y,
                    {
                      height: 200,
                      children: E
                        ? (0, t.jsx)(r.MemorizedHighlighter, {
                            isTabbed: !1,
                            minLineNumberChars: 3,
                            language: j.lang,
                            showLineNumbers: !0,
                            value: A,
                            wrapLongLines: !0,
                            style: { padding: 0 },
                          })
                        : (0, t.jsx)(x, {}),
                    },
                    `${E}-${j?.meta.file}`,
                  ),
                }),
              }),
            ],
          }),
        }),
      });
    }
    function y({ children: e, baseScrollIncrementPx: n = 20, height: r = 0 }) {
      let i = (0, s.useRef)(null),
        [a, o] = (0, s.useState)(0);
      return (
        (0, s.useEffect)(() => {
          let e = setInterval(() => {
            let e = i.current?.getBoundingClientRect().height;
            e &&
              o((t) => {
                let i = e - r,
                  s = (Math.floor((i - t) / 2 / n) + 1) * n;
                return (0, u.default)(t + s, 0, i);
              });
          }, 700);
          return () => clearInterval(e);
        }, [n, r]),
        (0, t.jsx)("div", {
          ref: i,
          className:
            "pointer-events-none relative flex-1 overflow-auto text-sm",
          style: {
            transform: `translateY(-${a}px)`,
            ...(0, c.transitionStyles)(["transform"], { duration: 600 }),
          },
          children: e,
        })
      );
    }
    e.s(
      [
        "designSystemUnsavedChangesAtom",
        () => I,
        "useDesignSystemUnsavedChanges",
        () => M,
      ],
      948020,
    );
    var b = s,
      j = e.i(9654),
      w = e.i(393799);
    e.i(472428);
    var C = e.i(296900);
    e.i(904347);
    var k = e.i(37737),
      S = e.i(931194),
      N = e.i(471964),
      E = e.i(671908),
      A = e.i(92479);
    async function D(e, t) {
      try {
        let n = await fetch("/api/design-systems/check-unsaved-changes", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ designSystemId: t, globalsCss: e }),
          }),
          r = await n.json();
        if (!r.ok) return !1;
        let { value: i } = r;
        if (!i.hasUnsavedChanges) return !1;
        return (0, S.mergePartialShadcnStylesWithDefaults)(
          i.styles,
          N.initialStyles,
        );
      } catch (e) {
        return !1;
      }
    }
    let I = (0, j.atom)({ hasUnsavedChanges: !1 });
    function M() {
      let e = (0, A.assertChatId)((0, A.useChatId)().chatId);
      (0, C.useServerQuerySWR)(["scoped", "designSystems"], {});
      let t = (0, b.useCallback)((e) => {
          let t = (0, E.getGlobalsCssFromFiles)(e);
          return { files: e, globalsCssFile: t };
        }, []),
        { data: n } = (0, C.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: e },
          { stopFetch: !e },
        ),
        r = n?.ok ? n.value.designSystemId : null,
        i = (0, w.useSetAtom)(I),
        s = (0, b.useCallback)(
          (e) => {
            (0, k.openDialog)({
              type: "createDesignSystem",
              data: {
                shadcnStyle: e,
                onSuccess() {
                  i({ hasUnsavedChanges: !1 });
                },
              },
            });
          },
          [i],
        ),
        [a, o] = (0, b.useState)(null),
        l = (0, b.useCallback)(async () => {
          if (!a) return;
          let e = await D(a, r);
          e
            ? i({
                hasUnsavedChanges: !0,
                currentShadcnStyle: e,
                onSaveAsNew: () => {
                  s(e);
                },
                clearUnsavedChanges: () => {
                  (i({ hasUnsavedChanges: !1 }), o(null));
                },
              })
            : (i({ hasUnsavedChanges: !1 }), o(null));
        }, [r, a, i, s]);
      return (
        (0, b.useEffect)(() => {
          l();
        }, [l]),
        {
          setFiles: (e) => {
            let { globalsCssFile: n } = t(e);
            o(n?.source ?? null);
          },
        }
      );
    }
    function T(e) {
      return e.includes("app/globals.css") || e.includes("src/app/globals.css");
    }
    e.s(["hasGlobalsCssFilename", () => T], 367030);
    var L = t,
      P = e.i(758118),
      R = c,
      F = t,
      _ = l;
    function O({ width: e = 40, height: t, className: n, ...r }) {
      return (0, F.jsxs)("svg", {
        className: (0, _.cn)("text-pink", n),
        fill: "currentColor",
        height: t,
        width: e,
        viewBox: "0 0 147 70",
        xmlns: "http://www.w3.org/2000/svg",
        ...r,
        children: [
          (0, F.jsx)("path", {
            d: "M56 50.2031V14H70V60.1562C70 65.5928 65.5928 70 60.1562 70C57.5605 70 54.9982 68.9992 53.1562 67.1573L0 14H19.7969L56 50.2031Z",
          }),
          (0, F.jsx)("path", {
            d: "M147 56H133V23.9531L100.953 56H133V70H96.6875C85.8144 70 77 61.1856 77 50.3125V14H91V46.1562L123.156 14H91V0H127.312C138.186 0 147 8.81439 147 19.6875V56Z",
          }),
        ],
      });
    }
    var B = l,
      V = s;
    function z({ size: e = 20, loading: t = !1, invert: n }) {
      let r = { width: e, height: 0.5 * e, minWidth: e, minHeight: 0.5 * e },
        i = {
          ...r,
          gridArea: "1 / 1",
          transform: "translateX(-1px)",
          ...(0, R.transitionStyles)(["opacity"], { duration: 500 }),
        };
      return (0, L.jsxs)("span", {
        "aria-hidden": !0,
        className: "grid grid-cols-1 grid-rows-1 overflow-visible",
        style: { ...r, filter: n ? "invert(1) brightness(2)" : "invert(0)" },
        children: [
          (0, L.jsx)(H, { style: { ...(0, P.visibleStylesIf)(t), ...i } }),
          (0, L.jsx)(O, {
            style: { ...(0, P.visibleStylesIf)(!t), ...i },
            className: "h-full min-w-[20px] text-v0-gray-1000",
          }),
        ],
      });
    }
    function H({ ...e }) {
      let t = (0, V.useId)(),
        n = `v-clip-${t}`;
      return (0, L.jsxs)("svg", {
        fill: "none",
        height: "18",
        viewBox: "15.5 41.5 100 41",
        width: "40",
        xmlns: "http://www.w3.org/2000/svg",
        ...e,
        className: (0, B.cn)("v0-loader", e.className),
        children: [
          (0, L.jsx)("defs", {
            children: (0, L.jsx)("clipPath", {
              id: n,
              children: (0, L.jsx)("rect", {
                height: "98",
                width: "128",
                x: "0",
                y: "46",
              }),
            }),
          }),
          (0, L.jsxs)("g", {
            clipPath: `url(#${n})`,
            children: [
              (0, L.jsx)("path", {
                className: "bg",
                d: "M 15 38 C 18.011 41.4115 41.0275 67.4845 48.5 77.3 c 5.9 6.8 5.8 6.7 5.8 -1.6 C 54.3 69.651 54.3 42.8741 54.3 42.8741",
              }),
              (0, L.jsx)("path", {
                className: "fg",
                d: "M 15 38 C 18.011 41.4115 41.0275 67.4845 48.5 77.3 c 5.9 6.8 5.8 6.7 5.8 -1.6 C 54.3 69.651 54.3 42.8741 54.3 42.8741",
                id: "v",
                pathLength: "1",
              }),
            ],
          }),
          (0, L.jsx)("path", {
            className: "bg",
            d: "M 102.9 48.5 L 75.7 75.2",
          }),
          (0, L.jsx)("path", {
            className: "fg",
            d: "M 102.9 48.5 L 75.7 75.2",
            id: "o-slash",
            pathLength: "1",
          }),
          (0, L.jsx)("path", {
            className: "bg",
            d: "M73.4653 41.7309L97.3029 41.7309C101.815 41.7309 109.905 46.2887 109.905 54.1283V77.1615",
          }),
          (0, L.jsx)("path", {
            className: "fg",
            d: "M73.4653 41.7309L97.3029 41.7309C101.815 41.7309 109.905 46.2887 109.905 54.1283V77.1615",
            id: "o-top",
            pathLength: "0.99",
          }),
          (0, L.jsx)("path", {
            className: "bg",
            d: "M104.996 81.8855L81.0314 81.8855C75.5619 81.8855 68.5885 76.5073 68.5885 69.1236L68.5885 46.2209",
          }),
          (0, L.jsx)("path", {
            className: "fg",
            d: "M104.996 81.8855L81.0314 81.8855C75.5619 81.8855 68.5885 76.5073 68.5885 69.1236L68.5885 46.2209",
            id: "o-bottom",
            pathLength: "0.99",
          }),
        ],
      });
    }
    e.s(["V0LoadableLogo", () => z], 616216);
    var $ = e.i(784938);
    e.s(["XIcon", () => $.default], 343428);
  },
  476371,
  93190,
  (e) => {
    "use strict";
    e.s(
      [
        "FileContent",
        () => eZ,
        "PreviewBlock",
        () => eq,
        "updatePreviewImmediate",
        () => eH,
      ],
      476371,
    );
    var t = e.i(324834),
      n = e.i(284546),
      r = e.i(914483),
      i = e.i(770858),
      s = e.i(7284),
      a = e.i(845210),
      o = e.i(204575),
      l = e.i(969116),
      c = e.i(494266),
      u = e.i(772438),
      d = e.i(479602),
      h = e.i(956562),
      p = e.i(443219),
      m = e.i(87467),
      f = e.i(780752),
      g = e.i(658252),
      x = e.i(481556),
      v = e.i(610726),
      y = e.i(576191),
      b = e.i(748819),
      j = e.i(430957),
      w = e.i(297239),
      C = e.i(707827),
      k = e.i(242828),
      S = e.i(84594),
      N = e.i(563261),
      E = e.i(218139),
      A = e.i(455552),
      D = e.i(926224),
      I = e.i(276221),
      M = e.i(671908),
      T = e.i(230905),
      L = e.i(380105),
      P = e.i(745587),
      R = e.i(343258),
      F = e.i(295224),
      _ = e.i(280738),
      O = e.i(382559),
      B = e.i(32170),
      V = e.i(597932),
      z = e.i(403055),
      H = e.i(583965),
      $ = e.i(242759),
      U = e.i(43116),
      G = e.i(70165),
      W = e.i(92479),
      q = e.i(988118),
      Z = e.i(90177),
      K = e.i(554912),
      Y = e.i(480450),
      J = e.i(53223),
      Q = e.i(566274),
      X = e.i(899488),
      ee = e.i(654335),
      et = e.i(577247),
      en = e.i(948020),
      er = e.i(367030),
      ei = e.i(385671),
      es = e.i(819969),
      ea = e.i(393799),
      eo = e.i(379686),
      el = t,
      ec = y,
      eu = e.i(176248),
      ed = e.i(449381),
      eh = D,
      ep = J,
      em = e.i(729602),
      ef = e.i(616216),
      eg = e.i(343428),
      ex = e.i(686134),
      ev = e.i(147675),
      ey = v,
      eb = e.i(35863);
    let ej = [
        { major: 15, minor: 0, patch: 5 },
        { major: 15, minor: 1, patch: 9 },
        { major: 15, minor: 2, patch: 6 },
        { major: 15, minor: 3, patch: 6 },
        { major: 15, minor: 4, patch: 8 },
        { major: 15, minor: 5, patch: 7 },
        { major: 16, minor: 0, patch: 7 },
      ],
      ew = "16.0.7";
    function eC(e) {
      if (e.major < 15) return !1;
      let t = ej.find((t) => t.major === e.major && t.minor === e.minor);
      if (!t) {
        let t = ej[ej.length - 1];
        return (
          !!t &&
          !(e.major > t.major) &&
          (e.major !== t.major || !(e.minor > t.minor))
        );
      }
      return 0 > (0, eb.compareVersions)(e, t);
    }
    function ek(e) {
      let t = (0, eb.parseFullSemver)(e);
      if (!t || !eC(t)) return { isVulnerable: !1 };
      let n = ej.find((e) => e.major === t.major && e.minor === t.minor),
        r = n ? `${n.major}.${n.minor}.${n.patch}` : ew;
      return {
        isVulnerable: !0,
        currentVersion: `${t.major}.${t.minor}.${t.patch}`,
        patchedVersion: r,
      };
    }
    function eS(e) {
      try {
        let t = JSON.parse(e),
          n = { ...t.devDependencies, ...t.dependencies },
          r = n?.next;
        if ("string" != typeof r) return { isVulnerable: !1 };
        return ek(r);
      } catch {
        return { isVulnerable: !1 };
      }
    }
    let eN =
        "This project uses a Next.js version with a known security vulnerability.",
      eE = `Upgrade the "next" dependency in package.json to version ${ew}. Make sure to also update any other Next.js dependencies for compatibility.`;
    e.s(
      [
        "CVE_FIX_PROMPT",
        0,
        eE,
        "CVE_WARNING_MESSAGE",
        0,
        eN,
        "isNextVersionVulnerableFromPackageJson",
        () => eS,
      ],
      93190,
    );
    var eA = $,
      eD = ee,
      eI = e.i(472166);
    e.i(168204);
    var eM = e.i(225695);
    let eT = "cve-warning-dismissed-",
      eL =
        "https://github.com/vercel/next.js/security/advisories/GHSA-9qr9-h5gf-34mp";
    function eP({
      onClick: e,
      currentVersion: t,
      patchedVersion: n,
      onDismiss: r,
    }) {
      return (0, el.jsx)("div", {
        className:
          "border-b border-v0-amber-400 bg-v0-amber-300 p-3 text-v0-amber-900",
        children: (0, el.jsxs)("div", {
          className: "flex justify-between items-start gap-2",
          children: [
            (0, el.jsx)(ev.Warning, { className: "size-4 shrink-0 mt-0.5" }),
            (0, el.jsxs)("div", {
              className: "flex-1 min-w-0",
              children: [
                (0, el.jsx)("div", {
                  className: "text-sm font-medium mb-1",
                  children: "Security Vulnerability Detected",
                }),
                (0, el.jsxs)("div", {
                  className: "text-sm mb-3",
                  children: [
                    "This project uses Next.js ",
                    t,
                    " which has a known security vulnerability. Upgrade to ",
                    n,
                    " or later.",
                    " ",
                    (0, el.jsx)(eD.default, {
                      href: eL,
                      target: "_blank",
                      rel: "noopener noreferrer",
                      className: "underline hover:no-underline",
                      children: "Learn more",
                    }),
                  ],
                }),
                (0, el.jsxs)(eu.Button, {
                  size: "sm",
                  variant: "ghost",
                  className:
                    "h-7 rounded-md px-2 hover:bg-v0-alpha-500 focus-visible:bg-v0-alpha-500 border-transparent bg-v0-alpha-200 text-v0-gray-1000 hover:border-transparent focus:border-transparent focus-visible:border-transparent disabled:border-transparent disabled:bg-v0-alpha-200 disabled:text-v0-gray-500 aria-disabled:border-transparent aria-disabled:bg-v0-alpha-200 aria-disabled:text-v0-gray-500",
                  onClick: e,
                  children: [
                    (0, el.jsx)("span", { children: "Fix with " }),
                    (0, el.jsx)(ef.V0LoadableLogo, {}),
                    (0, el.jsx)("span", {
                      className:
                        "rounded light:bg-[#FFFFFF]/12.5 dark:bg-[#000000]/10 px-1 py-0.5 text-[10px] leading-none",
                      children: "Free",
                    }),
                  ],
                }),
              ],
            }),
            (0, el.jsx)(eu.Button, {
              size: "sm",
              variant: "ghost",
              className: "h-5 w-5 p-0 hover:bg-v0-alpha-500 rounded-sm",
              onClick: r,
              tooltip: "Dismiss",
              children: (0, el.jsx)(eg.XIcon, { className: "h-2.5 w-2.5" }),
            }),
          ],
        }),
      });
    }
    function eR({ onExpand: e }) {
      return (0, el.jsx)("div", {
        className:
          "border-b border-v0-amber-400 bg-v0-amber-300 p-3 text-v0-amber-900",
        children: (0, el.jsxs)("div", {
          className: "flex items-center justify-between gap-2",
          children: [
            (0, el.jsx)(ev.Warning, { className: "size-4 shrink-0" }),
            (0, el.jsx)("div", {
              className: "flex-1 min-w-0",
              children: (0, el.jsx)("div", {
                className: "text-sm font-medium truncate",
                children: "Security Vulnerability Detected",
              }),
            }),
            (0, el.jsx)(eu.Button, {
              size: "sm",
              variant: "ghost",
              className: "h-5 w-5 p-0 hover:bg-v0-alpha-500 rounded-sm",
              onClick: e,
              tooltip: "Show details",
              children: (0, el.jsx)(ex.ChevronDownIcon, {
                className: "h-2.5 w-2.5",
              }),
            }),
          ],
        }),
      });
    }
    function eF(e) {
      let t = `${eT}${e}`,
        [n, r] = (0, ey.useLocalStorage)(t, !1);
      return {
        isDismissed: n,
        dismiss: () => {
          e && r(!0);
        },
        expand: () => {
          e && r(!1);
        },
      };
    }
    function e_(e) {
      let t = (0, ed.useActiveBlockState)();
      return (0, ec.useMemo)(() => {
        if (!e || !t || "code-project" !== t.type) return { isVulnerable: !1 };
        let n = (0, eh.parseMultiFileSource)({
          source: t.source,
          blockType: "code-project",
          blockId: t.id,
        }).find((e) => "package.json" === e.meta.file);
        return n ? eS(n.source) : { isVulnerable: !1 };
      }, [t, e]);
    }
    function eO() {
      let e = (0, em.useChatId)(),
        { submit: t } = (0, eI.useV0Chat)(),
        n = e_(e),
        { isDismissed: r, dismiss: i, expand: s } = eF(e),
        { sncw: a } = (0, eA.useFlags)(),
        o = (0, ec.useEffectEvent)(() => {
          (0, ep.track)("ShowCVEWarning", {
            currentVersion: n.currentVersion || null,
            chatId: e || null,
          });
        });
      (0, ec.useEffect)(() => {
        n.isVulnerable && o();
      }, [n.isVulnerable]);
      let l = () => {
        ((0, ep.track)("ClickCVEWarningFix", {
          currentVersion: n.currentVersion || null,
          chatId: e || null,
        }),
          t({
            action: "fix-with-v0",
            type: "fix-with-v0",
            content: (0, eM.createMDXMessageContent)(eE),
          }));
      };
      return a && n.isVulnerable
        ? r
          ? (0, el.jsx)(eR, { onExpand: s })
          : (0, el.jsx)(eP, {
              onClick: l,
              currentVersion: n.currentVersion || "unknown",
              patchedVersion: n.patchedVersion || "16.0.7",
              onDismiss: i,
            })
        : null;
    }
    let eB = y.default.memo(
      ({
        pictureInPictureLoaderEnabled: e,
        blockLoaderEnabled: n,
        children: r,
        closed: i,
        isStreaming: s,
        blockId: a,
        source: o,
        switchToCode: l,
        meta: c,
        isBlockPreviewable: u,
      }) =>
        e || !n || i || !s || u
          ? r
          : (0, t.jsx)("div", {
              className: "flex h-full w-full items-center justify-center",
              children: (0, t.jsx)(Y.BlockViewLoader, {
                switchToCode: l,
                blockId: a,
                closed: i,
                source: o,
                meta: c,
              }),
            }),
    );
    eB.displayName = "PreviewBlockChildren";
    let eV = (0, N.default)(
        () => e.A(781679).then((e) => e.MultiFileLocalCodeBlock),
        { loadableGenerated: { modules: [454437] }, ssr: !1 },
      ),
      ez = (e, t, n, r) => {
        e &&
          e.contentWindow?.postMessage(
            { type: "preview_code_delta", file: t, source: n, version: r },
            "*",
          );
      },
      eH = (e, t, n) => {
        e &&
          e.contentWindow?.postMessage(
            { type: "preview_code", code: t, version: n },
            "*",
          );
      },
      e$ = eH,
      eU = (0, k.default)(eH, 300);
    function eG(e) {
      let [t, n] = (0, y.useState)(null),
        r = (0, y.useRef)(null);
      return (
        (0, y.useEffect)(() => {
          function t() {
            let i = document.getElementById(e);
            i
              ? (n(i),
                r.current && (clearTimeout(r.current), (r.current = null)))
              : (r.current = setTimeout(t, 1e3));
          }
          return (
            t(),
            () => {
              r.current && (clearTimeout(r.current), (r.current = null));
            }
          );
        }, [e, n]),
        t
      );
    }
    function eW({ children: e, blockType: n, browserControls: r, blockId: i }) {
      let { fullScreenResult: s, setFullscreenResult: a } = (0,
        Q.useFullscreenResult)(),
        { atoms: o } = (0, es.useCurrentChat)(),
        l = (0, ea.useAtomValue)(o.canWriteToChat);
      return "code-project" === n && s && r
        ? (0, t.jsx)(x.FullscreenContainer, {
            children: (0, t.jsxs)("div", {
              className: "flex size-full flex-col",
              children: [
                (0, t.jsxs)("div", {
                  className:
                    "flex h-12 w-full shrink-0 items-center gap-2 px-3 border-b border-v0-gray-300 bg-v0-background-100",
                  children: [
                    (0, t.jsx)("div", {
                      className: "flex-1 flex items-center justify-start",
                      children:
                        !l &&
                        (0, t.jsxs)("div", {
                          className: "flex items-center gap-2 text-v0-gray-900",
                          children: [
                            (0, t.jsx)(ee.default, {
                              href: "/",
                              children: (0, t.jsx)(h.LogoV0, {
                                className: "h-4 w-4",
                              }),
                            }),
                            (0, t.jsx)("span", {
                              className: "text-xs",
                              children: "User-generated content",
                            }),
                          ],
                        }),
                    }),
                    (0, t.jsx)("div", {
                      className: "flex-1 flex items-center justify-center",
                      children: (0, t.jsx)("div", {
                        className: "min-w-0 max-w-full",
                        children: r,
                      }),
                    }),
                    (0, t.jsx)("div", {
                      className: "flex-1 flex items-center justify-end",
                      children: (0, t.jsx)(X.CodeBlockButton, {
                        onClick: () => a(!s, i),
                        tooltip: { side: "bottom", content: "Exit fullscreen" },
                        children: (0, t.jsx)(p.FullscreenClose, {}),
                      }),
                    }),
                  ],
                }),
                (0, t.jsx)("div", {
                  className: "w-full flex-1 overflow-y-auto overflow-x-hidden",
                  children: e,
                }),
              ],
            }),
          })
        : (0, t.jsx)(x.FullscreenContainer, { children: e });
    }
    function eq({
      children: e,
      allowRefresh: i,
      allowFullScreen: h = !0,
      initialFileTreeSize: p,
      resultId: x,
      language: b,
      remoteInfo: j,
      meta: S,
      source: N,
      blockId: Z,
      blockType: Y,
      closed: Q,
      hasSourceBeenEdited: X,
      onEdit: ee,
      files: eo,
      loadingPath: el,
      originalCode: ec,
      isV3: eu,
      initialConsoleSize: ed,
      hideConsole: eh = !1,
      browserControls: ep,
    }) {
      let { chatId: em } = (0, W.useChatMessages)(),
        {
          activeFilePath: ef,
          setActiveFilePath: eg,
          setAutoSwitch: ex,
        } = (0, P.useActiveFile)({ blockId: Z, files: eo, loadingPath: el }),
        { getFullIframeHref: ev } = (0, H.useBrowserFrame)(Z),
        { ve: ey, bl: eb, pipl: ej } = (0, $.useFlags)(),
        { isStreaming: ew } = (0, W.useChatLoadingState)(),
        [eC, ek] = (0, y.useState)(!1),
        {
          actions: { setActiveTabIntent: eS },
        } = (0, ei.useChatLayout)(),
        { editValueMap: eN, setEditValueMap: eE } = (0, R.useEditValueMap)({
          blockId: Z,
        }),
        {
          consoleEvents: eA,
          appendConsoleEvent: eD,
          appendCodeOutputEvents: eI,
          clearConsoleEvents: eM,
        } = (0, K.useConsoleNextLite)(Z),
        eT = (0, v.useIsMounted)(),
        { isPublished: eL } = (0, a.usePublishedPage)(),
        { atoms: eP } = (0, es.useCurrentChat)(),
        eR = (0, ea.useAtomValue)(eP.canWriteToChat),
        eF = (0, w.useT)(),
        [e_, eV] = (0, r.useGetSet)(`remote:accepted:${Z}`, j?.accepted ?? !1),
        eq = eG((0, o.getBlockIframeId)(x ?? Z)),
        eK = (0, F.useLatest)(eN),
        eY = (0, F.useLatest)(eo),
        eJ = (0, y.useCallback)(
          (e) => {
            let t = (0, M.getGlobalsCssFromFiles)(e),
              n = (0, M.getGlobalsCssPathFromFiles)(e);
            return !t && (0, er.hasGlobalsCssFilename)(Object.keys(eN))
              ? [
                  ...e,
                  (0, D.createNewFile)(
                    (0, I.createDefaultGlobals)(),
                    n,
                    "css",
                    Z,
                  ),
                ]
              : e;
          },
          [eN, Z],
        ),
        [eQ, eX] = (0, y.useState)(),
        {
          isBlockPreviewable: e0,
          canShowPreviewTab: e1,
          previewMeta: e2,
          activeTab: e5,
        } = (0, n.useActiveTab)(),
        e3 = (0, t.jsxs)(eB, {
          pictureInPictureLoaderEnabled: !!ej,
          blockLoaderEnabled: !!eb,
          closed: Q,
          isStreaming: ew,
          isBlockPreviewable: e0,
          blockId: Z,
          switchToCode: () => eS("code"),
          source: N,
          meta: S,
          children: [(0, t.jsx)(eO, {}), e],
        }),
        e4 = (0, y.useCallback)(
          (e, t, n, r, i) => {
            if (!Q) return;
            let s = { ...eK.current, [t]: e };
            (i || eE(s),
              ee?.(e),
              eq &&
                ("code-project" === Y
                  ? r
                    ? ez(eq, t, e, n)
                    : e$(
                        eq,
                        (0, A.getMultiFileSourceMap)(
                          (0, A.editFilesInFileList)(s, eY.current || []),
                        ),
                        n,
                      )
                  : "v0" === Y
                    ? eU(eq, e)
                    : eq.contentWindow?.postMessage(
                        { type: b.toUpperCase() + "_RENDER", source: e },
                        eq.dataset.origin || "",
                      )));
          },
          [eq, Q, eK, eE, ee, Y, eY, b],
        ),
        e9 = (0, y.useEffectEvent)((e, t, n, r, i, s, a, o, l) => {
          if (!eY.current) return;
          let c = eY.current.findIndex((t) => t.meta.file === e);
          if (-1 === c) return void e4(i, e, s, !0, l);
          let u = a ?? eK.current[e] ?? eY.current[c].source;
          if (o) {
            let [e, t] = o;
            u = u.substring(0, e) + i + u.substring(t);
          } else {
            let e = u.split("\n"),
              s = 0;
            for (let n = 0; n < t - 1; n++) s += e[n].length + 1;
            u = u.substring(0, s + n - 1) + i + u.substring(s + n - 1 + r);
          }
          e4(u, e, s, !0, l);
        }),
        e7 = (0, y.useCallback)(
          (e, t) => {
            if (!Q || "code-project" !== Y) return;
            let n = e.reduce((e, t) => ({ ...e, [t.file]: t.value }), {
              ...eK.current,
            });
            (eE(n),
              e.forEach((e) => {
                ee?.(e.value);
              }),
              eq &&
                e$(
                  eq,
                  (0, A.getMultiFileSourceMap)(
                    (0, A.updateFilesInFileList)(n, eY.current || []),
                  ),
                  t,
                ));
          },
          [Q, Y, eK, eE, ee, eq, eY],
        );
      ((0, y.useEffect)(() => {
        q.designModeInlineEditRef.current = {
          inlineEdit: (0, k.default)(e9, 50, { leading: !0, trailing: !0 }),
          bulkFileChange: (0, k.default)((e) => e7(e, void 0), 50, {
            leading: !0,
            trailing: !0,
          }),
          getContent(e) {
            if (!eY.current) return;
            let t = eY.current.findIndex((t) => t.meta.file === e);
            if (-1 !== t) return eK.current[e] ?? eY.current[t].source;
          },
          jumpToFile(e, t, n) {
            (eS("code"), eg(e), eX([t, n]));
          },
          postMessage: (e) => {
            eq &&
              eq.contentWindow?.postMessage({ __v0_remote__: !0, ...e }, "*");
          },
        };
      }, [eS, eq]),
        (0, et.useMessage)(
          (e) => {
            if (
              eq &&
              e.data &&
              "object" == typeof e.data &&
              e.data.__v0_remote__
            )
              switch (e.data.type) {
                case "frame_ready":
                  if ("code-project" === Y) {
                    if (!eY.current?.length) return;
                    let e = Object.keys(eK.current).length > 0;
                    e &&
                      e$(
                        eq,
                        (0, A.getMultiFileSourceMap)(
                          (0, A.editFilesInFileList)(eK.current, eY.current),
                        ),
                      );
                    let t = Object.keys(eK.current),
                      n = eY.current.map((e) => e.meta.file);
                    ((e && (0, er.hasGlobalsCssFilename)(t)) ||
                      (0, er.hasGlobalsCssFilename)(
                        n.filter((e) => null != e),
                      )) &&
                      tr.setFiles(eY.current);
                  }
                  break;
                case "inline_edit":
                  e9(
                    e.data.file,
                    e.data.line,
                    e.data.column,
                    e.data.len,
                    e.data.replace,
                    e.data.version,
                  );
                  break;
                case "console":
                  eD(e.data);
                  break;
                case "browser_event":
                  (0, J.track)("BrowserEvent", { type: e.data.event.type });
              }
          },
          [eq, Y, eY, e4, eK, eD],
        ));
      let e6 = eo || [
          {
            source: N,
            meta: S,
            originalCode: ec,
            lang: b,
            isQuickEdit: !!S.isQuickEdit,
            blockId: Z,
          },
        ],
        e8 = (0, y.useCallback)(() => {
          eE({});
        }, [eE]),
        { user: te } = (0, B.useUser)(),
        tt = (0, G.useIsMobile)(),
        tn = (0, y.useEffectEvent)(() => {
          eq &&
            (eq.contentDocument
              ? eq.contentDocument.location.reload()
              : (eq.src = ev(eq)));
        }),
        tr = (0, en.useDesignSystemUnsavedChanges)(),
        ti = ey && !1 === tt,
        ts = (0, T.useUnsavedChanges)({
          blockId: Z,
          editValueMap: eN,
          isAdminSaving: !eR && !!te?.isAdminMode,
          source: N,
          meta: S,
          files: e6,
          clearEditValueMap: e8,
          onSaveSuccess: (e) => {
            (0, er.hasGlobalsCssFilename)(Object.keys(eN)) && tr.setFiles(e);
          },
          isVSCodeEditor: ti,
        }),
        [, ta] = (0, O.useFileEditingStatus)(Z),
        to = ts.hasUnsavedChanges;
      (0, y.useEffect)(() => {
        ta(to);
      }, [to, ta]);
      let tl = Q && (!!eR || !!te?.isAdminMode);
      if (eL)
        return (0, t.jsx)("div", {
          className: (0, s.default)(
            "bg-v0-background-200 h-full min-h-0 overflow-hidden",
            "preview" === e5 && "border-v0-alpha-400",
            !eT && "opacity-0",
          ),
          children: e3,
        });
      if ("code-project" === Y) {
        if (!p)
          throw Error("code-project block is missing initialFileTreeSize");
        let e = e6.length
            ? e6.find((e) => e.meta.file === ef) || e6[0]
            : void 0,
          n = e
            ? [
                {
                  key: "preview",
                  content: e1
                    ? (0, t.jsxs)("div", {
                        className: "flex h-full w-full flex-col",
                        children: [
                          (h || i) &&
                            (0, t.jsxs)(_.BlockTabHeader, {
                              className:
                                "bg-v0-background-200 justify-end gap-1",
                              bottomBorder: !0,
                              children: [
                                h ? (0, t.jsx)(g.FullscreenButton, {}) : null,
                                i
                                  ? (0, t.jsx)(f.RefreshPreview, {
                                      blockId: x || Z,
                                    })
                                  : null,
                              ],
                            }),
                          (0, t.jsx)("div", {
                            className:
                              "w-full flex-1 overflow-y-auto overflow-x-hidden flex flex-col",
                            children: (0, t.jsx)(eW, {
                              blockType: Y,
                              browserControls: ep,
                              blockId: Z,
                              children: e3,
                            }),
                          }),
                        ],
                      })
                    : null,
                },
                eu
                  ? null
                  : {
                      key: "code",
                      content:
                        ey && !1 === tt
                          ? (0, t.jsx)(
                              U.VSCodeEditorWrapper,
                              {
                                blockId: Z,
                                source: N,
                                reloadIframe: tn,
                                editable: tl,
                                onEdit: (e, t) => {
                                  e4(t, e);
                                },
                                onActiveFileChange: (e) => {
                                  eg(e);
                                },
                                files: eo || [],
                                activeFilePath: ef,
                                activeFileLocation: eQ,
                                editValueMap: eN,
                                editorSource: "next-lite-panel",
                              },
                              em,
                            )
                          : (0, t.jsx)(L.MultiFileCode, {
                              showDiffInfo: Q,
                              loadingPath: el,
                              activeFilePath: ef,
                              setActiveFile: (e) => {
                                (ex && ex(!1), eg(e));
                              },
                              initialFileTreeSize: p,
                              files: eo,
                              source: N,
                              blockId: Z,
                              onChange: tn,
                              children: (0, t.jsxs)("div", {
                                className: "flex h-full w-full flex-col",
                                children: [
                                  (0, t.jsxs)(_.BlockTabHeader, {
                                    className: "justify-between gap-2",
                                    onePixelShorter: !0,
                                    children: [
                                      (0, t.jsx)("div", {
                                        className:
                                          "flex min-w-0 items-center gap-1 overflow-x-auto",
                                        children:
                                          ef &&
                                          ef
                                            .split("/")
                                            .map((e, n) =>
                                              (0, t.jsxs)(
                                                y.default.Fragment,
                                                {
                                                  children: [
                                                    (0, t.jsx)(
                                                      "div",
                                                      {
                                                        className:
                                                          "whitespace-nowrap font-medium nth-last-2:text-v0-gray-1000",
                                                        children: e,
                                                      },
                                                      `part-${e}-${n}`,
                                                    ),
                                                    (0, t.jsx)(
                                                      "div",
                                                      {
                                                        className:
                                                          "last:hidden",
                                                        children: (0, t.jsx)(
                                                          c.ChevronRightSmall,
                                                          {},
                                                        ),
                                                      },
                                                      `chevron-${e}-${n}`,
                                                    ),
                                                  ],
                                                },
                                                `part-${e}-${n}`,
                                              ),
                                            ),
                                      }),
                                      (0, t.jsx)("div", {
                                        className: "flex items-center gap-1",
                                        children: (0, t.jsx)(
                                          m.CodeBlockActions,
                                          {
                                            closed: Q,
                                            additionalHeaderActions: void 0,
                                            allowClose: !1,
                                            blockId: Z,
                                            allowCopyCode: !0,
                                            allowDownloadCode: !0,
                                            originalCode: e.originalCode,
                                            caller: "v0",
                                            closeHandler: null,
                                            fileName: e.meta.file,
                                            isTabbed: !0,
                                            value: eN[S.file || ""] || e.source,
                                            transactionMeta: e.meta.transaction,
                                            language: e.lang,
                                            showRenderedPreview: eC,
                                            onTogglePreview: () => ek(!eC),
                                          },
                                        ),
                                      }),
                                    ],
                                  }),
                                  (0, t.jsx)("div", {
                                    className:
                                      "w-full flex-1 overflow-y-auto overflow-x-hidden",
                                    children: (0, t.jsx)(eZ, {
                                      blockType: Y,
                                      remoteInfo: j,
                                      isMultiFile: !0,
                                      closed: Q,
                                      blockId: Z,
                                      setEditValueMap: eE,
                                      language: e.lang,
                                      editValueMap: eN,
                                      hasSourceBeenEdited: X,
                                      handleEdit: e4,
                                      file: e,
                                      editable: tl,
                                      location: eQ,
                                      appendCodeOutputEvents: eI,
                                      showRenderedPreview: eC,
                                    }),
                                  }),
                                ],
                              }),
                            }),
                    },
              ].filter(z.isNonNullable)
            : [];
        return (0, t.jsx)(V.default, {
          hide: eh || (!!eb && !Q && ew),
          consoleEvents: eA,
          clearLogs: eM,
          canWriteToChat: eR,
          activeFilePath: ef,
          setActiveFilePath: eg,
          initialSize: ed,
          children: (0, t.jsxs)("div", {
            className: "relative min-h-0 w-full flex-1 grow",
            children: [
              (0, t.jsx)(l.TabContent, { tabFiles: n, activeTabKey: e5 }),
              tl
                ? (0, t.jsx)(T.UnsavedChanges, {
                    ...ts,
                    resetValue: () => {
                      if (!eq) return;
                      window.dispatchEvent(
                        new CustomEvent("editor-reset-changes"),
                      );
                      let e = eJ(eY.current || []);
                      eH(
                        eq,
                        (0, A.getMultiFileSourceMap)(
                          (0, A.editFilesInFileList)({}, e),
                        ),
                      );
                    },
                    mergedFromBlockId: Z,
                    isV3: eu,
                  })
                : null,
            ],
          }),
        });
      }
      let tc = e6.map((e) => ({
          key: void 0 !== eo ? S.file + "code" : "code",
          display: S.file || "Untitled",
          content: (0, t.jsx)(eZ, {
            blockType: Y,
            remoteInfo: j,
            closed: Q,
            blockId: Z,
            setEditValueMap: eE,
            language: b,
            editValueMap: eN,
            hasSourceBeenEdited: X,
            handleEdit: e4,
            file: e,
            editable: tl,
            appendCodeOutputEvents: eI,
            showRenderedPreview: eC,
          }),
          actions: (0, t.jsx)(m.CodeBlockActions, {
            closed: Q,
            additionalHeaderActions: void 0,
            allowClose: !1,
            blockId: Z,
            allowCopyCode: !0,
            allowDownloadCode: !0,
            originalCode: e.originalCode,
            caller: "v0",
            closeHandler: null,
            fileName: e.meta.file,
            isTabbed: !0,
            value: eN[S.file || ""] || e.source,
            showRenderedPreview: eC,
            onTogglePreview: () => ek(!eC),
          }),
        })),
        tu = {
          key: "preview",
          disabled: !e1,
          tooltip:
            "error" === e2.type
              ? e2.error
              : eb || Q || !ew
                ? void 0
                : eF("previewBlock.previewIsStreaming"),
          display: (0, t.jsxs)("div", {
            className: "flex items-center gap-2",
            children: [
              (0, t.jsx)(d.Window, { className: "group-disabled:hidden" }),
              (0, t.jsx)("div", {
                className: "hidden group-disabled:block",
                children: Q
                  ? (0, t.jsx)(u.EyeOff, {})
                  : (0, t.jsx)(C.Spinner, { size: 16 }),
              }),
              eF("previewBlock.preview"),
            ],
          }),
          content: (0, t.jsx)(eW, {
            blockType: Y,
            browserControls: ep,
            blockId: Z,
            children: e3,
          }),
          actions: (0, t.jsxs)(t.Fragment, {
            children: [
              h ? (0, t.jsx)(g.FullscreenButton, {}) : null,
              i ? (0, t.jsx)(f.RefreshPreview, { blockId: x || Z }) : null,
            ],
          }),
        };
      return (0, t.jsxs)(t.Fragment, {
        children: [
          "local" !== Y || "@remote" === Z || eo
            ? null
            : (0, t.jsx)(E.UnappliedChanges, {
                blockId: Z,
                hasUnappliedChanges: !!(
                  !0 !== e_ ||
                  (eN[S.file || ""] && eN[S.file || ""] !== N)
                ),
                source: eN[S.file || ""] || N,
                onApply: () => {
                  eV(!0);
                },
                showFadeOut: "code" === e5,
              }),
          tl
            ? (0, t.jsx)(T.UnsavedChanges, {
                ...ts,
                resetValue: () => {
                  eq &&
                    (window.dispatchEvent(
                      new CustomEvent("editor-reset-changes"),
                    ),
                    "v0" === Y
                      ? eH(eq, e6[0].source)
                      : eq.contentWindow?.postMessage(
                          {
                            type: b.toUpperCase() + "_RENDER",
                            source: e6[0].source,
                          },
                          eq.dataset.origin || "",
                        ));
                },
                mergedFromBlockId: Z,
                isV3: eu,
              })
            : null,
          (0, t.jsx)(l.TabFileViewer, {
            activeTabKey: e5,
            isLoading: !Q,
            setActiveTabKey: (e) => {
              "code" === e ? eS("code") : "preview" === e && eS("preview");
            },
            tabFiles: [tu, ...tc],
          }),
        ],
      });
    }
    function eZ({
      blockType: e,
      remoteInfo: n,
      closed: r,
      blockId: a,
      setEditValueMap: o,
      isMultiFile: l,
      language: c,
      editValueMap: u,
      hasSourceBeenEdited: d,
      handleEdit: h,
      file: p,
      location: m,
      editable: f,
      className: g,
      showRenderedPreview: x,
    }) {
      let { source: v, meta: b, originalCode: j, isQuickEdit: w } = p,
        C = (0, eo.getPreviewableFileType)(b.file);
      if (C && x) {
        let e = u[b.file || ""] || v;
        switch (C) {
          case "markdown":
            return (0, t.jsx)(eJ, { content: e });
          case "svg":
            return (0, t.jsx)(eX, { content: e });
        }
      }
      return "local" === e
        ? (0, t.jsx)(y.Suspense, {
            fallback: null,
            children: (0, t.jsx)(eV, {
              remoteInfo: n,
              blockId: a,
              source: v,
              onEdit: (e) => {
                r && o((t) => ({ ...(t || {}), [b.file || ""]: e }));
              },
              closed: r,
            }),
          })
        : p.meta.url && !p.source.trim().length
          ? (0, t.jsx)("div", {
              className: "p-4",
              children: (0, t.jsx)(eY, {
                url: p.meta.url,
                file: p.meta.file,
                isTempFile: p.isTempFile,
              }),
            })
          : (0, t.jsx)(i.CodeBlock, {
              isMultiFile: l,
              allowQuoting: !0,
              closed: r,
              caller: "v0",
              originalCode: j,
              showQuickEditAnimation: !!(!r && w),
              className: (0, s.default)("not-prose flex-1 grow", g),
              editable: f,
              fixingBadLines: p.fixingBadLines,
              fileName: b.file,
              language: c,
              blockId: a,
              editValue: u[b.file || ""],
              hasSourceBeenEdited: d,
              onEdit: (e) => h(e, b.file || ""),
              runnable: !0,
              showLineNumbers: !0,
              value: v,
              type: b.type,
              location: m,
            });
    }
    let eK = (e, t) => {
      if (t) return t;
      let n = e.split(".").pop()?.toLowerCase() || "";
      return [
        "jpg",
        "jpeg",
        "png",
        "gif",
        "svg",
        "webp",
        "avif",
        "ico",
      ].includes(n)
        ? "image"
        : ["glb", "gltf"].includes(n)
          ? "3d"
          : ["mp3", "wav", "ogg", "flac"].includes(n)
            ? "audio"
            : ["mp4", "webm", "ogv"].includes(n)
              ? "video"
              : "pdf" === n
                ? "pdf"
                : "unknown";
    };
    function eY({ url: e, mimeType: n, file: r, isTempFile: i }) {
      let [s, a] = (0, y.useState)(null),
        o = eK(e, n);
      (0, y.useEffect)(() => {
        a(null);
      }, [e]);
      let l = () => {
        a(`Failed to load ${o} from ${e}`);
      };
      if (s)
        return (0, t.jsx)("div", {
          className:
            "rounded border border-v0-red-300 bg-v0-red-200 p-4 text-v0-red-700",
          children: s,
        });
      switch (o) {
        case "image":
          if (i) return (0, t.jsx)(Z.LoadingImage, {});
          return (0, t.jsx)("img", {
            src: e || "/placeholder.svg",
            className: "h-auto max-w-full",
            onError: l,
            alt: `Preview of ${r}`,
          });
        case "3d":
          return (0, t.jsx)("div", {
            className: "h-[400px] w-full",
            children: "Previewing 3D models is not currently supported.",
          });
        case "audio":
          return (0, t.jsxs)("audio", {
            controls: !0,
            className: "w-full",
            onError: l,
            children: [
              (0, t.jsx)("source", { src: e }),
              "Your browser does not support the audio element.",
            ],
          });
        case "video":
          return (0, t.jsxs)("video", {
            controls: !0,
            className: "h-auto max-w-full",
            onError: l,
            children: [
              (0, t.jsx)("source", { src: e }),
              "Your browser does not support the video element.",
            ],
          });
        case "pdf":
          return (0, t.jsxs)("div", {
            className: "rounded border bg-v0-background-200 p-4",
            children: [
              (0, t.jsxs)("p", {
                className: "mb-2",
                children: [
                  "PDF document:",
                  " ",
                  (0, t.jsx)("a", {
                    href: e,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    className: "text-v0-blue-500 hover:underline",
                    children: "Open PDF",
                  }),
                ],
              }),
              (0, t.jsx)("iframe", {
                src: `${e}#view=FitH`,
                className: "h-[500px] w-full",
                onError: l,
              }),
            ],
          });
        default:
          return (0, t.jsx)("div", {
            className: "rounded border bg-v0-background-200 p-4",
            children: (0, t.jsxs)("p", {
              children: [
                "Unknown file type.",
                " ",
                (0, t.jsx)("a", {
                  href: e,
                  target: "_blank",
                  rel: "noopener noreferrer",
                  className: "text-v0-blue-500 hover:underline",
                  children: "Download file",
                }),
              ],
            }),
          });
      }
    }
    function eJ({ content: e }) {
      return (0, t.jsx)("div", {
        className: "h-full w-full overflow-auto bg-v0-background-100",
        children: (0, t.jsx)(j.Prose, {
          className: "mx-auto max-w-4xl p-8",
          children: (0, t.jsx)(b.MemodMarkdown, { children: e }),
        }),
      });
    }
    let eQ = (e) =>
      S.default.sanitize(e, {
        USE_PROFILES: { svg: !0, svgFilters: !0 },
        ADD_TAGS: ["use"],
        ADD_ATTR: ["target"],
        FORBID_TAGS: ["foreignObject"],
      });
    function eX({ content: e }) {
      let n = eQ(e);
      return (0, t.jsx)("div", {
        className:
          "flex h-full w-full items-center justify-center overflow-auto bg-v0-background-100 p-8",
        children: (0, t.jsx)("div", {
          className: "max-h-full max-w-full",
          dangerouslySetInnerHTML: { __html: n },
        }),
      });
    }
  },
  553969,
  (e) => {
    "use strict";
    var t = e.i(156029);
    function n() {
      let { setBlockOutput: e, getBlockOutput: n } = (0, t.useBlockMappings)();
      return { getBlockOutput: n, setBlockOutput: e };
    }
    e.s(["useBlockOutputs", () => n]);
  },
  829732,
  (e) => {
    "use strict";
    e.s(["CodeExecutionBlockLogic", () => I]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(770858),
      i = e.i(110909),
      s = e.i(53223),
      a = e.i(418625),
      o = e.i(602544),
      l = e.i(483962),
      c = e.i(899488),
      u = e.i(504066),
      d = e.i(407211),
      h = e.i(636139),
      p = e.i(304649),
      m = e.i(696871),
      f = e.i(845210),
      g = e.i(192670),
      x = e.i(987630),
      v = e.i(638200),
      y = e.i(969116),
      b = e.i(87467),
      j = e.i(610726),
      w = e.i(476371),
      C = e.i(230905),
      k = e.i(343258),
      S = e.i(65151),
      N = e.i(819969),
      E = e.i(393799),
      A = e.i(553969),
      D = e.i(387040);
    class I {
      static getIsPreviewable = () => !1;
      static Render(e) {
        let { isPublished: I } = (0, f.usePublishedPage)(),
          M = (0, j.useIsMounted)(),
          { isCopied: T, copyToClipboard: L } = (0, u.useCopyToClipboard)({
            timeout: 2e3,
          }),
          { editValueMap: P, setEditValueMap: R } = (0, k.useEditValueMap)({
            blockId: e.blockId,
          }),
          { atoms: F } = (0, N.useCurrentChat)(),
          _ = (0, E.useAtomValue)(F.canWriteToChat),
          { setBlockOutput: O, getBlockOutput: B } = (0, A.useBlockOutputs)(),
          V = B(e.blockId),
          { data: z } = (0, a.default)("block:output:initial");
        (0, n.useEffect)(() => {
          z?.id === e.blockId &&
            z.result.then((t) => {
              t &&
                O(
                  e.blockId,
                  "error" in t.value
                    ? (0, D.err)({
                        message: t.value.error,
                        executionResult: null,
                      })
                    : (0, D.ok)(t.value),
                );
            });
        }, [z, e.blockId, O]);
        let H = V;
        if (void 0 === H && z?.id === e.blockId && z) {
          let e = (0, n.use)(z.result);
          e && (H = e.value);
        }
        let $ = async () => {
            if (T) return;
            let e = (0, S.getOutputString)(H);
            return (
              await L(e),
              (0, s.track)("CopyOutputExecutable", { output: e })
            );
          },
          U = (0, n.useMemo)(
            () =>
              h.runnableLanguages.includes(e.language) &&
              h.runnableExtensions.some((t) => e.meta.file?.endsWith(t)),
            [e.language, e.meta.file],
          ),
          G = (0, C.useUnsavedChanges)({
            blockId: e.blockId,
            editValueMap: P,
            source: e.source,
            meta: e.meta,
            files: [{ source: e.source, meta: e.meta }],
            clearEditValueMap: () => R({}),
          }),
          W = I ? m.OUTPUT_RESIZE_PUBLISHED_COOKIE : m.OUTPUT_RESIZE_COOKIE,
          q = [
            {
              key: "code",
              display: e.meta.file,
              content: (0, t.jsxs)(t.Fragment, {
                children: [
                  e.closed && _
                    ? (0, t.jsx)(C.UnsavedChanges, {
                        ...G,
                        resetValue: () => {},
                        mergedFromBlockId: e.blockId,
                      })
                    : null,
                  (0, t.jsx)(
                    w.FileContent,
                    {
                      blockType: e.meta.type,
                      remoteInfo: void 0,
                      isMultiFile: !0,
                      closed: e.closed,
                      blockId: e.blockId,
                      className: G.hasUnsavedChanges ? "pb-14" : "",
                      setEditValueMap: R,
                      language: e.language,
                      editValueMap: P,
                      hasSourceBeenEdited: e.hasSourceBeenEdited,
                      handleEdit: (t) => {
                        t &&
                          e.closed &&
                          R((n) => ({ ...n, [e.meta.file || ""]: t }));
                      },
                      file: {
                        source: e.source,
                        meta: e.meta,
                        lang: e.language,
                        blockId: e.blockId,
                        isQuickEdit: !!e.meta.isQuickEdit,
                      },
                      editable: !!(e.closed && _),
                    },
                    e.blockId,
                  ),
                ],
              }),
              actions: (0, t.jsx)(b.CodeBlockActions, {
                additionalHeaderActions: void 0,
                allowClose: !1,
                allowCopyCode: !0,
                allowDownloadCode: !0,
                caller: "v0",
                closeHandler: null,
                fileName: e.meta.file,
                isTabbed: !0,
                value: P[e.meta.file || ""] || e.source,
                originalCode: e.originalCode,
                blockId: e.blockId,
                closed: e.closed,
                language: e.language,
              }),
            },
          ],
          Z = I
            ? (0, t.jsx)(r.CodeBlock, {
                originalCode: e.originalCode,
                showQuickEditAnimation: !e.closed && !!e.meta.isQuickEdit,
                closed: e.closed,
                blockId: e.blockId,
                allowQuoting: !0,
                caller: "executable",
                className: "min-h-52 flex-1 rounded-md",
                editable: !1,
                fileName: e.meta.file,
                language: e.language,
                runnable: U,
                showLineNumbers: !0,
                value: e.source,
              })
            : (0, t.jsx)(y.TabFileViewer, {
                isLoading: !e.closed,
                activeTabKey: "code",
                className: "min-h-52 w-full flex-1",
                setActiveTabKey: () => {},
                tabFiles: q,
              });
        return (0, t.jsxs)("div", {
          className: (0, p.cn)(
            "not-prose flex h-full w-full flex-col",
            I && "bg-v0-background-200 overflow-hidden rounded-md border",
            !M && "opacity-0",
          ),
          children: [
            Z,
            U &&
              (0, t.jsx)(l.Resizable, {
                animated: !1,
                axis: "y",
                cookieName: W,
                dotsHandle: !1,
                initialSize: e.initialOutputSize ?? 33,
                minSizePx: 200,
                show: !0,
                side: "start",
                children: (0, t.jsx)("div", {
                  className:
                    "border-alpha-400 flex size-full min-h-0 flex-1 flex-col items-center justify-center border-t",
                  children: H
                    ? (0, t.jsxs)("div", {
                        className: "flex size-full flex-col items-stretch",
                        children: [
                          (0, t.jsxs)("div", {
                            className:
                              "flex items-center justify-between border-b px-2 py-1",
                            children: [
                              (0, t.jsx)("h3", {
                                className:
                                  "select-none text-sm font-medium text-v0-gray-900",
                                children: "Output",
                              }),
                              (0, t.jsxs)("div", {
                                className:
                                  "flex select-none items-center gap-1",
                                children: [
                                  (0, t.jsx)(d.CodeExecutionRunButton, {
                                    buttonText: "Run",
                                    codeExecutionBlockProps: e,
                                    editedValue: P[e.meta.file || ""] || void 0,
                                    variant: "ghost",
                                  }),
                                  (0, t.jsx)("div", {
                                    className: "bg-v0-alpha-400 h-4 w-px",
                                  }),
                                  (0, t.jsx)(c.CodeBlockButton, {
                                    "aria-label": "Clear",
                                    onClick: () => O(e.blockId, null),
                                    tooltip: "Clear",
                                    children: (0, t.jsx)("span", {
                                      "aria-hidden": !0,
                                      children: (0, t.jsx)(v.AnimatedTrash, {}),
                                    }),
                                  }),
                                  (0, t.jsx)(c.CodeBlockButton, {
                                    "aria-label": "Download",
                                    disabled: "error" in H,
                                    onClick: () => (0, S.downloadAsFile)(H),
                                    tooltip: "Download",
                                    children: (0, t.jsx)("span", {
                                      "aria-hidden": !0,
                                      children: (0, t.jsx)(
                                        g.AnimatedDownload,
                                        {},
                                      ),
                                    }),
                                  }),
                                  (0, t.jsx)(c.CodeBlockButton, {
                                    disabled: "error" in H,
                                    onClick: $,
                                    tooltip: "Copy",
                                    children: (0, t.jsx)("span", {
                                      "aria-hidden": !0,
                                      children: T
                                        ? (0, t.jsx)(o.Check, {})
                                        : (0, t.jsx)(x.AnimatedCopy, {}),
                                    }),
                                  }),
                                ],
                              }),
                            ],
                          }),
                          (0, t.jsx)(i.CodeOutput, {
                            className: "h-full",
                            value: H,
                          }),
                        ],
                      })
                    : (0, t.jsxs)("div", {
                        className: "flex flex-col items-center",
                        children: [
                          (0, t.jsx)("p", {
                            className:
                              "mb-2 text-base font-medium text-v0-gray-1000",
                            children: "No Output",
                          }),
                          (0, t.jsx)("p", {
                            className: "mb-6 text-sm text-v0-gray-900",
                            children: e.closed
                              ? "Run the code to generate an output."
                              : "You can execute the code after it has finished streaming.",
                          }),
                          (0, t.jsx)(d.CodeExecutionRunButton, {
                            codeExecutionBlockProps: e,
                            disabled: !e.closed,
                            editedValue: P[e.meta.file || ""] || void 0,
                          }),
                        ],
                      }),
                }),
              }),
          ],
        });
      }
      static Actions(e) {
        return null;
      }
      static TitleActions = null;
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
  },
  470284,
  (e) => {
    "use strict";
    function t(e, t) {
      let n = String(e);
      if ("string" != typeof t) throw TypeError("Expected character");
      let r = 0,
        i = n.indexOf(t);
      for (; -1 !== i; ) (r++, (i = n.indexOf(t, i + t.length)));
      return r;
    }
    e.s(["ccount", () => t]);
  },
  205795,
  238580,
  44366,
  165843,
  590377,
  809210,
  (e) => {
    "use strict";
    e.s(["V0BlockLogic", () => b], 205795);
    var t = e.i(324834),
      n = e.i(917806),
      r = e.i(576191),
      i = e.i(204575),
      s = e.i(476371),
      a = e.i(395542),
      o = e.i(53223),
      l = e.i(470259),
      c = e.i(301331),
      u = e.i(845210),
      d = e.i(92479),
      h = e.i(210045),
      p = e.i(868948),
      m = e.i(988094),
      f = e.i(696825),
      g = e.i(805374),
      x = e.i(284546),
      v = e.i(393799),
      y = e.i(819969);
    class b {
      static getIsPreviewable = ({ source: e, closed: t, meta: n }) => {
        let r = (0, a.hasVisibleReactContent)(e, n.file);
        return "string" == typeof r ? { error: r } : !!r && t;
      };
      static Render = r.default.memo((e) => {
        let a = (0, d.useSetChatState)(),
          { isPublished: g } = (0, u.usePublishedPage)(),
          { chatId: b } = (0, d.useChatId)(),
          { getBlockForked: j } = (0, f.useForkedBlocks)(),
          { atoms: w } = (0, y.useCurrentChat)(),
          C = (0, v.useAtomValue)(w.canWriteToChat),
          {
            projectBlocks: k,
            projectBlockIndex: S,
            allBlocks: N,
          } = (0, c.useBlockHistory)({ blockId: e.blockId }),
          { isBlockPreviewable: E, canShowPreviewTab: A } = (0,
          x.useActiveTab)(),
          D = (0, r.useMemo)(() => {
            let e = {},
              t = k?.[S]?.meta.file || ".";
            for (let t of N)
              t.resultId && t.meta.file && (e[t.meta.file] = t.resultId);
            if (k)
              for (let t = 0; t <= S; t++) {
                let n = k[t];
                if (!n) continue;
                let r = n.meta.file;
                r && n.resultId && (e[r] = n.resultId);
              }
            return { mapping: e, rootFileName: t };
          }, [N, k, S]),
          I = (0, r.useRef)(null),
          [M, T] = (0, r.useState)(null);
        return (
          (0, r.useEffect)(() => {
            if (I.current)
              return (0, n.listenToIframe)(I.current, (t) => {
                switch (t.type) {
                  case "set_loading":
                    I.current &&
                      ((0, n.sendData)(I.current, { type: "parent_ready" }),
                      (0, n.sendData)(I.current, {
                        type: "sync_file_mapping",
                        data: D,
                      }));
                    break;
                  case "error":
                  case "runtime-error": {
                    let n = (0, p.cleanBlockError)(t.error);
                    t.resultId === e.resultId &&
                      T(
                        (r) => (
                          r !== n &&
                            E &&
                            (0, o.track)(
                              "V0BlockPreviewError",
                              {
                                messageId: e.messageId,
                                blockId: e.blockId,
                                resultId: t.resultId,
                                from: e.meta.isQuickEdit
                                  ? "quick-edit"
                                  : void 0,
                                forkedFromBlockId: j(e.blockId),
                              },
                              {
                                errorMsg: n,
                                errorCode: l.V0_BLOCK_PREVIEW_ERROR,
                              },
                            ),
                          n
                        ),
                      );
                  }
                }
              });
          }, [j, e, E, e.blockId, e.meta.from, e.resultId, D, a]),
          (0, r.useEffect)(() => {
            T(null);
          }, [e.blockId]),
          (0, t.jsxs)(s.PreviewBlock, {
            allowRefresh: !0,
            ...e,
            blockType: "v0",
            language: "typescriptreact",
            children: [
              M
                ? (0, t.jsx)(m.ErrorsBanner, {
                    errors: [
                      {
                        blockId: e.blockId,
                        isFatal: !1,
                        isServer: !1,
                        text: M,
                        currentURL: void 0,
                      },
                    ],
                    blockId: e.blockId,
                    onDismiss: () => {
                      T(null);
                    },
                    canWriteToChat: C,
                  })
                : null,
              e.resultId && E
                ? (0, t.jsx)(h.Iframe, {
                    iframeId: (0, i.getBlockIframeId)(e.resultId),
                    iframeRef: I,
                    isPublished: g,
                    onLoad: () => {
                      I.current &&
                        (0, n.sendData)(I.current, {
                          type: "sync_file_mapping",
                          data: D,
                        });
                    },
                    origin: (0, n.getIframeOrigin)(b || e.blockId),
                    src: `/p/${e.resultId}?c=1&flags=1&bid=${e.blockId}`,
                  })
                : null,
            ],
          })
        );
      });
      static Actions = r.default.memo(({ blockId: e, closed: n }) =>
        (0, t.jsx)(g.PreviewBlockTitleActions, { blockId: e, closed: n }),
      );
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    e.s(["CodeBlockLogic", () => k], 238580);
    var j = t,
      w = r,
      C = s;
    class k {
      static getIsPreviewable = () => !1;
      static Render = w.default.memo((e) =>
        (0, j.jsx)(C.PreviewBlock, {
          hidePreviewPane: !0,
          ...e,
          blockType: "code",
        }),
      );
      static Actions() {
        return null;
      }
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    e.s(["HTMLBlockLogic", () => O], 44366);
    var S = t,
      N = r,
      E = i,
      A = s,
      D = u,
      I = r,
      M = e.i(295224);
    function T(e, t, n) {
      let [r, i] = (0, I.useState)(!1),
        s = (0, M.useLatest)(r),
        a = (0, M.useLatest)(t);
      ((0, I.useEffect)(() => {
        let t = document.getElementById(n),
          r = (n) => {
            n.origin === t.dataset.origin &&
              n.data.type === e + "_READY" &&
              (i(!0),
              a.current &&
                t.contentWindow?.postMessage(
                  { type: e + "_RENDER", source: a.current },
                  t.dataset.origin || "",
                ));
          };
        return (
          window.addEventListener("message", r),
          () => {
            window.removeEventListener("message", r);
          }
        );
      }, [e, n, a]),
        (0, I.useEffect)(() => {
          let r = document.getElementById(n);
          r &&
            (s.current
              ? r.contentWindow?.postMessage(
                  { type: e + "_RENDER", source: t },
                  r.dataset.origin || "",
                )
              : r.contentWindow?.postMessage(
                  { type: e + "_PING" },
                  r.dataset.origin || "",
                ));
        }, [t, e, n, s]));
    }
    var L = n,
      P = d,
      R = h,
      F = g;
    let _ = /<!DOCTYPE html>.*?<\/html>/s;
    class O {
      static getIsPreviewable = ({ source: e, closed: t }) => t || _.test(e);
      static Render(e) {
        let { isPublished: t } = (0, D.usePublishedPage)(),
          { chatId: n } = (0, P.useChatId)(),
          r = (0, E.getBlockIframeId)(e.blockId);
        return (
          T("HTML", e.source, r),
          (0, S.jsx)(A.PreviewBlock, {
            ...e,
            blockType: "html",
            language: "html",
            children: (0, S.jsx)(R.Iframe, {
              iframeId: r,
              isPublished: t,
              origin: (0, L.getIframeOrigin)(n || e.blockId),
              src: "/render/html",
            }),
          })
        );
      }
      static Actions = N.default.memo(({ blockId: e, closed: t }) =>
        (0, S.jsx)(F.PreviewBlockTitleActions, { blockId: e, closed: t }),
      );
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    e.s(["MarkdownBlockLogic", () => nZ], 165843);
    var B = t,
      V = r,
      z = s,
      H = x,
      $ = e.i(430957),
      U = e.i(304649),
      G = e.i(748819),
      W = u,
      q = e.i(470284),
      Z = e.i(897802),
      K = e.i(346863),
      Y = e.i(393978);
    let J = "phrasing",
      Q = ["autolink", "link", "image", "label"];
    function X() {
      return {
        transforms: [eo],
        enter: {
          literalAutolink: et,
          literalAutolinkEmail: en,
          literalAutolinkHttp: en,
          literalAutolinkWww: en,
        },
        exit: {
          literalAutolink: ea,
          literalAutolinkEmail: es,
          literalAutolinkHttp: er,
          literalAutolinkWww: ei,
        },
      };
    }
    function ee() {
      return {
        unsafe: [
          {
            character: "@",
            before: "[+\\-.\\w]",
            after: "[\\-.\\w]",
            inConstruct: J,
            notInConstruct: Q,
          },
          {
            character: ".",
            before: "[Ww]",
            after: "[\\-.\\w]",
            inConstruct: J,
            notInConstruct: Q,
          },
          {
            character: ":",
            before: "[ps]",
            after: "\\/",
            inConstruct: J,
            notInConstruct: Q,
          },
        ],
      };
    }
    function et(e) {
      this.enter({ type: "link", title: null, url: "", children: [] }, e);
    }
    function en(e) {
      this.config.enter.autolinkProtocol.call(this, e);
    }
    function er(e) {
      this.config.exit.autolinkProtocol.call(this, e);
    }
    function ei(e) {
      this.config.exit.data.call(this, e);
      let t = this.stack[this.stack.length - 1];
      ((0, Z.ok)("link" === t.type),
        (t.url = "http://" + this.sliceSerialize(e)));
    }
    function es(e) {
      this.config.exit.autolinkEmail.call(this, e);
    }
    function ea(e) {
      this.exit(e);
    }
    function eo(e) {
      (0, Y.findAndReplace)(
        e,
        [
          [/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi, el],
          [/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g, ec],
        ],
        { ignore: ["link", "linkReference"] },
      );
    }
    function el(e, t, n, r, i) {
      let s = "";
      if (
        !eh(i) ||
        (/^w/i.test(t) && ((n = t + n), (t = ""), (s = "http://")), !eu(n))
      )
        return !1;
      let a = ed(n + r);
      if (!a[0]) return !1;
      let o = {
        type: "link",
        title: null,
        url: s + t + a[0],
        children: [{ type: "text", value: t + a[0] }],
      };
      return a[1] ? [o, { type: "text", value: a[1] }] : o;
    }
    function ec(e, t, n, r) {
      return (
        !(!eh(r, !0) || /[-\d_]$/.test(n)) && {
          type: "link",
          title: null,
          url: "mailto:" + t + "@" + n,
          children: [{ type: "text", value: t + "@" + n }],
        }
      );
    }
    function eu(e) {
      let t = e.split(".");
      return !(
        t.length < 2 ||
        (t[t.length - 1] &&
          (/_/.test(t[t.length - 1]) || !/[a-zA-Z\d]/.test(t[t.length - 1]))) ||
        (t[t.length - 2] &&
          (/_/.test(t[t.length - 2]) || !/[a-zA-Z\d]/.test(t[t.length - 2])))
      );
    }
    function ed(e) {
      let t = /[!"&'),.:;<>?\]}]+$/.exec(e);
      if (!t) return [e, void 0];
      e = e.slice(0, t.index);
      let n = t[0],
        r = n.indexOf(")"),
        i = (0, q.ccount)(e, "("),
        s = (0, q.ccount)(e, ")");
      for (; -1 !== r && i > s; )
        ((e += n.slice(0, r + 1)),
          (r = (n = n.slice(r + 1)).indexOf(")")),
          s++);
      return [e, n];
    }
    function eh(e, t) {
      let n = e.input.charCodeAt(e.index - 1);
      return (
        (0 === e.index ||
          (0, K.unicodeWhitespace)(n) ||
          (0, K.unicodePunctuation)(n)) &&
        (!t || 47 !== n)
      );
    }
    var ep = Z,
      em = e.i(820667);
    function ef() {
      return {
        enter: {
          gfmFootnoteDefinition: ex,
          gfmFootnoteDefinitionLabelString: ev,
          gfmFootnoteCall: ej,
          gfmFootnoteCallString: ew,
        },
        exit: {
          gfmFootnoteDefinition: eb,
          gfmFootnoteDefinitionLabelString: ey,
          gfmFootnoteCall: ek,
          gfmFootnoteCallString: eC,
        },
      };
    }
    function eg() {
      return {
        unsafe: [
          { character: "[", inConstruct: ["phrasing", "label", "reference"] },
        ],
        handlers: { footnoteDefinition: eN, footnoteReference: eS },
      };
    }
    function ex(e) {
      this.enter(
        { type: "footnoteDefinition", identifier: "", label: "", children: [] },
        e,
      );
    }
    function ev() {
      this.buffer();
    }
    function ey(e) {
      let t = this.resume(),
        n = this.stack[this.stack.length - 1];
      ((0, ep.ok)("footnoteDefinition" === n.type),
        (n.label = t),
        (n.identifier = (0, em.normalizeIdentifier)(
          this.sliceSerialize(e),
        ).toLowerCase()));
    }
    function eb(e) {
      this.exit(e);
    }
    function ej(e) {
      this.enter({ type: "footnoteReference", identifier: "", label: "" }, e);
    }
    function ew() {
      this.buffer();
    }
    function eC(e) {
      let t = this.resume(),
        n = this.stack[this.stack.length - 1];
      ((0, ep.ok)("footnoteReference" === n.type),
        (n.label = t),
        (n.identifier = (0, em.normalizeIdentifier)(
          this.sliceSerialize(e),
        ).toLowerCase()));
    }
    function ek(e) {
      this.exit(e);
    }
    function eS(e, t, n, r) {
      let i = n.createTracker(r),
        s = i.move("[^"),
        a = n.enter("footnoteReference"),
        o = n.enter("reference");
      return (
        (s += i.move(
          n.safe(n.associationId(e), { ...i.current(), before: s, after: "]" }),
        )),
        o(),
        a(),
        (s += i.move("]"))
      );
    }
    function eN(e, t, n, r) {
      let i = n.createTracker(r),
        s = i.move("[^"),
        a = n.enter("footnoteDefinition"),
        o = n.enter("label");
      return (
        (s += i.move(
          n.safe(n.associationId(e), { ...i.current(), before: s, after: "]" }),
        )),
        o(),
        (s += i.move("]:" + (e.children && e.children.length > 0 ? " " : ""))),
        i.shift(4),
        (s += i.move(n.indentLines(n.containerFlow(e, i.current()), eE))),
        a(),
        s
      );
    }
    function eE(e, t, n) {
      return 0 === t ? e : (n ? "" : "    ") + e;
    }
    eS.peek = function e() {
      return "[";
    };
    let eA = [
      "autolink",
      "destinationLiteral",
      "destinationRaw",
      "reference",
      "titleQuote",
      "titleApostrophe",
    ];
    function eD() {
      return {
        canContainEols: ["delete"],
        enter: { strikethrough: eM },
        exit: { strikethrough: eT },
      };
    }
    function eI() {
      return {
        unsafe: [
          { character: "~", inConstruct: "phrasing", notInConstruct: eA },
        ],
        handlers: { delete: eL },
      };
    }
    function eM(e) {
      this.enter({ type: "delete", children: [] }, e);
    }
    function eT(e) {
      this.exit(e);
    }
    function eL(e, t, n, r) {
      let i = n.createTracker(r),
        s = n.enter("strikethrough"),
        a = i.move("~~");
      return (
        (a += n.containerPhrasing(e, {
          ...i.current(),
          before: a,
          after: "~",
        })),
        (a += i.move("~~")),
        s(),
        a
      );
    }
    eL.peek = function e() {
      return "~";
    };
    var eP = Z;
    function eR(e, t = {}) {
      let n = (t.align || []).concat(),
        r = t.stringLength || e_,
        i = [],
        s = [],
        a = [],
        o = [],
        l = 0,
        c = -1;
      for (; ++c < e.length; ) {
        let n = [],
          i = [],
          u = -1;
        for (e[c].length > l && (l = e[c].length); ++u < e[c].length; ) {
          let s = eF(e[c][u]);
          if (!1 !== t.alignDelimiters) {
            let e = r(s);
            ((i[u] = e), (void 0 === o[u] || e > o[u]) && (o[u] = e));
          }
          n.push(s);
        }
        ((s[c] = n), (a[c] = i));
      }
      let u = -1;
      if ("object" == typeof n && "length" in n)
        for (; ++u < l; ) i[u] = eO(n[u]);
      else {
        let e = eO(n);
        for (; ++u < l; ) i[u] = e;
      }
      u = -1;
      let d = [],
        h = [];
      for (; ++u < l; ) {
        let e = i[u],
          n = "",
          r = "";
        99 === e
          ? ((n = ":"), (r = ":"))
          : 108 === e
            ? (n = ":")
            : 114 === e && (r = ":");
        let s =
            !1 === t.alignDelimiters
              ? 1
              : Math.max(1, o[u] - n.length - r.length),
          a = n + "-".repeat(s) + r;
        (!1 !== t.alignDelimiters &&
          ((s = n.length + s + r.length) > o[u] && (o[u] = s), (h[u] = s)),
          (d[u] = a));
      }
      (s.splice(1, 0, d), a.splice(1, 0, h), (c = -1));
      let p = [];
      for (; ++c < s.length; ) {
        let e = s[c],
          n = a[c];
        u = -1;
        let r = [];
        for (; ++u < l; ) {
          let s = e[u] || "",
            a = "",
            c = "";
          if (!1 !== t.alignDelimiters) {
            let e = o[u] - (n[u] || 0),
              t = i[u];
            114 === t
              ? (a = " ".repeat(e))
              : 99 === t
                ? e % 2
                  ? ((a = " ".repeat(e / 2 + 0.5)),
                    (c = " ".repeat(e / 2 - 0.5)))
                  : (c = a = " ".repeat(e / 2))
                : (c = " ".repeat(e));
          }
          (!1 === t.delimiterStart || u || r.push("|"),
            !1 !== t.padding &&
              (!1 !== t.alignDelimiters || "" !== s) &&
              (!1 !== t.delimiterStart || u) &&
              r.push(" "),
            !1 !== t.alignDelimiters && r.push(a),
            r.push(s),
            !1 !== t.alignDelimiters && r.push(c),
            !1 !== t.padding && r.push(" "),
            (!1 !== t.delimiterEnd || u !== l - 1) && r.push("|"));
        }
        p.push(
          !1 === t.delimiterEnd ? r.join("").replace(/ +$/, "") : r.join(""),
        );
      }
      return p.join("\n");
    }
    function eF(e) {
      return null == e ? "" : String(e);
    }
    function e_(e) {
      return e.length;
    }
    function eO(e) {
      let t = "string" == typeof e ? e.codePointAt(0) : 0;
      return 67 === t || 99 === t
        ? 99
        : 76 === t || 108 === t
          ? 108
          : 114 * (82 === t || 114 === t);
    }
    function eB(e, t) {
      let n = String(e),
        r = n.indexOf(t),
        i = r,
        s = 0,
        a = 0;
      if ("string" != typeof t) throw TypeError("Expected substring");
      for (; -1 !== r; )
        (r === i ? ++s > a && (a = s) : (s = 1),
          (i = r + t.length),
          (r = n.indexOf(t, i)));
      return a;
    }
    function eV(e) {
      let t = e.options.quote || '"';
      if ('"' !== t && "'" !== t)
        throw Error(
          "Cannot serialize title with `" +
            t +
            "` for `options.quote`, expected `\"`, or `'`",
        );
      return t;
    }
    function ez(e) {
      let t = e.options.emphasis || "*";
      if ("*" !== t && "_" !== t)
        throw Error(
          "Cannot serialize emphasis with `" +
            t +
            "` for `options.emphasis`, expected `*`, or `_`",
        );
      return t;
    }
    function eH(e, t, n) {
      return n.options.emphasis || "*";
    }
    (function e(e, t, n, r) {
      let i = ez(n),
        s = n.enter("emphasis"),
        a = n.createTracker(r),
        o = a.move(i);
      return (
        (o += a.move(
          n.containerPhrasing(e, { before: o, after: i, ...a.current() }),
        )),
        (o += a.move(i)),
        s(),
        o
      );
    }).peek = eH;
    var e$ = e.i(939049),
      eU = e.i(446207),
      eG = e.i(12105);
    function eW() {
      return "<";
    }
    function eq(e, t, n, r) {
      let i = eV(n),
        s = '"' === i ? "Quote" : "Apostrophe",
        a = n.enter("image"),
        o = n.enter("label"),
        l = n.createTracker(r),
        c = l.move("![");
      return (
        (c += l.move(n.safe(e.alt, { before: c, after: "]", ...l.current() }))),
        (c += l.move("](")),
        o(),
        (!e.url && e.title) || /[\0- \u007F]/.test(e.url)
          ? ((o = n.enter("destinationLiteral")),
            (c += l.move("<")),
            (c += l.move(
              n.safe(e.url, { before: c, after: ">", ...l.current() }),
            )),
            (c += l.move(">")))
          : ((o = n.enter("destinationRaw")),
            (c += l.move(
              n.safe(e.url, {
                before: c,
                after: e.title ? " " : ")",
                ...l.current(),
              }),
            ))),
        o(),
        e.title &&
          ((o = n.enter(`title${s}`)),
          (c += l.move(" " + i)),
          (c += l.move(
            n.safe(e.title, { before: c, after: i, ...l.current() }),
          )),
          (c += l.move(i)),
          o()),
        (c += l.move(")")),
        a(),
        c
      );
    }
    function eZ() {
      return "!";
    }
    function eK(e, t, n, r) {
      let i = e.referenceType,
        s = n.enter("imageReference"),
        a = n.enter("label"),
        o = n.createTracker(r),
        l = o.move("!["),
        c = n.safe(e.alt, { before: l, after: "]", ...o.current() });
      ((l += o.move(c + "][")), a());
      let u = n.stack;
      ((n.stack = []), (a = n.enter("reference")));
      let d = n.safe(n.associationId(e), {
        before: l,
        after: "]",
        ...o.current(),
      });
      return (
        a(),
        (n.stack = u),
        s(),
        "full" !== i && c && c === d
          ? "shortcut" === i
            ? (l = l.slice(0, -1))
            : (l += o.move("]"))
          : (l += o.move(d + "]")),
        l
      );
    }
    function eY() {
      return "!";
    }
    function eJ(e, t, n) {
      let r = e.value || "",
        i = "`",
        s = -1;
      for (; RegExp("(^|[^`])" + i + "([^`]|$)").test(r); ) i += "`";
      for (
        /[^ \r\n]/.test(r) &&
        ((/^[ \r\n]/.test(r) && /[ \r\n]$/.test(r)) || /^`|`$/.test(r)) &&
        (r = " " + r + " ");
        ++s < n.unsafe.length;

      ) {
        let e,
          t = n.unsafe[s],
          i = n.compilePattern(t);
        if (t.atBreak)
          for (; (e = i.exec(r)); ) {
            let t = e.index;
            (10 === r.charCodeAt(t) && 13 === r.charCodeAt(t - 1) && t--,
              (r = r.slice(0, t) + " " + r.slice(e.index + 1)));
          }
      }
      return i + r + i;
    }
    function eQ() {
      return "`";
    }
    (((function e(e) {
      return e.value || "";
    }).peek = eW),
      (eq.peek = eZ),
      (eK.peek = eY),
      (eJ.peek = eQ));
    var eX = eG;
    function e0(e, t) {
      let n = (0, eX.toString)(e);
      return !!(
        !t.options.resourceLink &&
        e.url &&
        !e.title &&
        e.children &&
        1 === e.children.length &&
        "text" === e.children[0].type &&
        (n === e.url || "mailto:" + n === e.url) &&
        /^[a-z][a-z+.-]+:/i.test(e.url) &&
        !/[\0- <>\u007F]/.test(e.url)
      );
    }
    function e1(e, t, n, r) {
      let i,
        s,
        a = eV(n),
        o = '"' === a ? "Quote" : "Apostrophe",
        l = n.createTracker(r);
      if (e0(e, n)) {
        let t = n.stack;
        ((n.stack = []), (i = n.enter("autolink")));
        let r = l.move("<");
        return (
          (r += l.move(
            n.containerPhrasing(e, { before: r, after: ">", ...l.current() }),
          )),
          (r += l.move(">")),
          i(),
          (n.stack = t),
          r
        );
      }
      ((i = n.enter("link")), (s = n.enter("label")));
      let c = l.move("[");
      return (
        (c += l.move(
          n.containerPhrasing(e, { before: c, after: "](", ...l.current() }),
        )),
        (c += l.move("](")),
        s(),
        (!e.url && e.title) || /[\0- \u007F]/.test(e.url)
          ? ((s = n.enter("destinationLiteral")),
            (c += l.move("<")),
            (c += l.move(
              n.safe(e.url, { before: c, after: ">", ...l.current() }),
            )),
            (c += l.move(">")))
          : ((s = n.enter("destinationRaw")),
            (c += l.move(
              n.safe(e.url, {
                before: c,
                after: e.title ? " " : ")",
                ...l.current(),
              }),
            ))),
        s(),
        e.title &&
          ((s = n.enter(`title${o}`)),
          (c += l.move(" " + a)),
          (c += l.move(
            n.safe(e.title, { before: c, after: a, ...l.current() }),
          )),
          (c += l.move(a)),
          s()),
        (c += l.move(")")),
        i(),
        c
      );
    }
    function e2(e, t, n) {
      return e0(e, n) ? "<" : "[";
    }
    function e5(e, t, n, r) {
      let i = e.referenceType,
        s = n.enter("linkReference"),
        a = n.enter("label"),
        o = n.createTracker(r),
        l = o.move("["),
        c = n.containerPhrasing(e, { before: l, after: "]", ...o.current() });
      ((l += o.move(c + "][")), a());
      let u = n.stack;
      ((n.stack = []), (a = n.enter("reference")));
      let d = n.safe(n.associationId(e), {
        before: l,
        after: "]",
        ...o.current(),
      });
      return (
        a(),
        (n.stack = u),
        s(),
        "full" !== i && c && c === d
          ? "shortcut" === i
            ? (l = l.slice(0, -1))
            : (l += o.move("]"))
          : (l += o.move(d + "]")),
        l
      );
    }
    function e3() {
      return "[";
    }
    function e4(e) {
      let t = e.options.bullet || "*";
      if ("*" !== t && "+" !== t && "-" !== t)
        throw Error(
          "Cannot serialize items with `" +
            t +
            "` for `options.bullet`, expected `*`, `+`, or `-`",
        );
      return t;
    }
    function e9(e) {
      let t = e.options.listItemIndent || "one";
      if ("tab" !== t && "one" !== t && "mixed" !== t)
        throw Error(
          "Cannot serialize items with `" +
            t +
            "` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`",
        );
      return t;
    }
    function e7(e, t, n, r) {
      let i = e9(n),
        s = n.bulletCurrent || e4(n);
      t &&
        "list" === t.type &&
        t.ordered &&
        (s =
          ("number" == typeof t.start && t.start > -1 ? t.start : 1) +
          (!1 === n.options.incrementListMarker ? 0 : t.children.indexOf(e)) +
          s);
      let a = s.length + 1;
      ("tab" === i ||
        ("mixed" === i &&
          ((t && "list" === t.type && t.spread) || e.spread))) &&
        (a = 4 * Math.ceil(a / 4));
      let o = n.createTracker(r);
      (o.move(s + " ".repeat(a - s.length)), o.shift(a));
      let l = n.enter("listItem"),
        c = n.indentLines(n.containerFlow(e, o.current()), u);
      return (l(), c);
      function u(e, t, n) {
        return t
          ? (n ? "" : " ".repeat(a)) + e
          : (n ? s : s + " ".repeat(a - s.length)) + e;
      }
    }
    ((e1.peek = e2), (e5.peek = e3));
    (0, e.i(249548).convert)([
      "break",
      "delete",
      "emphasis",
      "footnote",
      "footnoteReference",
      "image",
      "imageReference",
      "inlineCode",
      "inlineMath",
      "link",
      "linkReference",
      "mdxJsxTextElement",
      "mdxTextExpression",
      "strong",
      "text",
      "textDirective",
    ]);
    function e6(e) {
      let t = e.options.strong || "*";
      if ("*" !== t && "_" !== t)
        throw Error(
          "Cannot serialize strong with `" +
            t +
            "` for `options.strong`, expected `*`, or `_`",
        );
      return t;
    }
    function e8(e, t, n, r) {
      let i = e6(n),
        s = n.enter("strong"),
        a = n.createTracker(r),
        o = a.move(i + i);
      return (
        (o += a.move(
          n.containerPhrasing(e, { before: o, after: i, ...a.current() }),
        )),
        (o += a.move(i + i)),
        s(),
        o
      );
    }
    function te(e, t, n) {
      return n.options.strong || "*";
    }
    e8.peek = te;
    let tt = eJ,
      tn = e7;
    function tr() {
      return {
        enter: { table: ti, tableData: tl, tableHeader: tl, tableRow: ta },
        exit: {
          codeText: tc,
          table: ts,
          tableData: to,
          tableHeader: to,
          tableRow: to,
        },
      };
    }
    function ti(e) {
      let t = e._align;
      ((0, eP.ok)(t, "expected `_align` on table"),
        this.enter(
          {
            type: "table",
            align: t.map(function (e) {
              return "none" === e ? null : e;
            }),
            children: [],
          },
          e,
        ),
        (this.data.inTable = !0));
    }
    function ts(e) {
      (this.exit(e), (this.data.inTable = void 0));
    }
    function ta(e) {
      this.enter({ type: "tableRow", children: [] }, e);
    }
    function to(e) {
      this.exit(e);
    }
    function tl(e) {
      this.enter({ type: "tableCell", children: [] }, e);
    }
    function tc(e) {
      let t = this.resume();
      this.data.inTable && (t = t.replace(/\\([\\|])/g, tu));
      let n = this.stack[this.stack.length - 1];
      ((0, eP.ok)("inlineCode" === n.type), (n.value = t), this.exit(e));
    }
    function tu(e, t) {
      return "|" === t ? t : e;
    }
    function td(e) {
      let t = e || {},
        n = t.tableCellPadding,
        r = t.tablePipeAlign,
        i = t.stringLength,
        s = n ? " " : "|";
      return {
        unsafe: [
          { character: "\r", inConstruct: "tableCell" },
          { character: "\n", inConstruct: "tableCell" },
          { atBreak: !0, character: "|", after: "[	 :-]" },
          { character: "|", inConstruct: "tableCell" },
          { atBreak: !0, character: ":", after: "-" },
          { atBreak: !0, character: "-", after: "[:|-]" },
        ],
        handlers: { inlineCode: h, table: a, tableCell: l, tableRow: o },
      };
      function a(e, t, n, r) {
        return c(u(e, n, r), e.align);
      }
      function o(e, t, n, r) {
        let i = c([d(e, n, r)]);
        return i.slice(0, i.indexOf("\n"));
      }
      function l(e, t, n, r) {
        let i = n.enter("tableCell"),
          a = n.enter("phrasing"),
          o = n.containerPhrasing(e, { ...r, before: s, after: s });
        return (a(), i(), o);
      }
      function c(e, t) {
        return eR(e, {
          align: t,
          alignDelimiters: r,
          padding: n,
          stringLength: i,
        });
      }
      function u(e, t, n) {
        let r = e.children,
          i = -1,
          s = [],
          a = t.enter("table");
        for (; ++i < r.length; ) s[i] = d(r[i], t, n);
        return (a(), s);
      }
      function d(e, t, n) {
        let r = e.children,
          i = -1,
          s = [],
          a = t.enter("tableRow");
        for (; ++i < r.length; ) s[i] = l(r[i], e, t, n);
        return (a(), s);
      }
      function h(e, t, n) {
        let r = tt(e, t, n);
        return (
          n.stack.includes("tableCell") && (r = r.replace(/\|/g, "\\$&")),
          r
        );
      }
    }
    var th = Z;
    function tp() {
      return {
        exit: {
          taskListCheckValueChecked: tf,
          taskListCheckValueUnchecked: tf,
          paragraph: tg,
        },
      };
    }
    function tm() {
      return {
        unsafe: [{ atBreak: !0, character: "-", after: "[:|-]" }],
        handlers: { listItem: tx },
      };
    }
    function tf(e) {
      let t = this.stack[this.stack.length - 2];
      ((0, th.ok)("listItem" === t.type),
        (t.checked = "taskListCheckValueChecked" === e.type));
    }
    function tg(e) {
      let t = this.stack[this.stack.length - 2];
      if (t && "listItem" === t.type && "boolean" == typeof t.checked) {
        let e = this.stack[this.stack.length - 1];
        (0, th.ok)("paragraph" === e.type);
        let n = e.children[0];
        if (n && "text" === n.type) {
          let r,
            i = t.children,
            s = -1;
          for (; ++s < i.length; ) {
            let e = i[s];
            if ("paragraph" === e.type) {
              r = e;
              break;
            }
          }
          r === e &&
            ((n.value = n.value.slice(1)),
            0 === n.value.length
              ? e.children.shift()
              : e.position &&
                n.position &&
                "number" == typeof n.position.start.offset &&
                (n.position.start.column++,
                n.position.start.offset++,
                (e.position.start = Object.assign({}, n.position.start))));
        }
      }
      this.exit(e);
    }
    function tx(e, t, n, r) {
      let i = e.children[0],
        s = "boolean" == typeof e.checked && i && "paragraph" === i.type,
        a = "[" + (e.checked ? "x" : " ") + "] ",
        o = n.createTracker(r);
      s && o.move(a);
      let l = tn(e, t, n, { ...r, ...o.current() });
      return (s && (l = l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/, c)), l);
      function c(e) {
        return e + a;
      }
    }
    function tv() {
      return [X(), ef(), eD(), tr(), tp()];
    }
    function ty(e) {
      return { extensions: [ee(), eg(), eI(), td(e), tm()] };
    }
    var tb = e.i(872238),
      tj = K;
    let tw = { tokenize: tF, partial: !0 },
      tC = { tokenize: t_, partial: !0 },
      tk = { tokenize: tO, partial: !0 },
      tS = { tokenize: tB, partial: !0 },
      tN = { tokenize: tV, partial: !0 },
      tE = { name: "wwwAutolink", tokenize: tP, previous: tz },
      tA = { name: "protocolAutolink", tokenize: tR, previous: tH },
      tD = { name: "emailAutolink", tokenize: tL, previous: t$ },
      tI = {};
    function tM() {
      return { text: tI };
    }
    let tT = 48;
    for (; tT < 123; )
      ((tI[tT] = tD), 58 == ++tT ? (tT = 65) : 91 === tT && (tT = 97));
    function tL(e, t, n) {
      let r,
        i,
        s = this;
      return a;
      function a(t) {
        return !tU(t) || !t$.call(s, s.previous) || tG(s.events)
          ? n(t)
          : (e.enter("literalAutolink"), e.enter("literalAutolinkEmail"), o(t));
      }
      function o(t) {
        return tU(t) ? (e.consume(t), o) : 64 === t ? (e.consume(t), l) : n(t);
      }
      function l(t) {
        return 46 === t
          ? e.check(tN, u, c)(t)
          : 45 === t || 95 === t || (0, tj.asciiAlphanumeric)(t)
            ? ((i = !0), e.consume(t), l)
            : u(t);
      }
      function c(t) {
        return (e.consume(t), (r = !0), l);
      }
      function u(a) {
        return i && r && (0, tj.asciiAlpha)(s.previous)
          ? (e.exit("literalAutolinkEmail"), e.exit("literalAutolink"), t(a))
          : n(a);
      }
    }
    function tP(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return (87 !== t && 119 !== t) ||
          !tz.call(r, r.previous) ||
          tG(r.events)
          ? n(t)
          : (e.enter("literalAutolink"),
            e.enter("literalAutolinkWww"),
            e.check(tw, e.attempt(tC, e.attempt(tk, s), n), n)(t));
      }
      function s(n) {
        return (e.exit("literalAutolinkWww"), e.exit("literalAutolink"), t(n));
      }
    }
    function tR(e, t, n) {
      let r = this,
        i = "",
        s = !1;
      return a;
      function a(t) {
        return (72 === t || 104 === t) &&
          tH.call(r, r.previous) &&
          !tG(r.events)
          ? (e.enter("literalAutolink"),
            e.enter("literalAutolinkHttp"),
            (i += String.fromCodePoint(t)),
            e.consume(t),
            o)
          : n(t);
      }
      function o(t) {
        if ((0, tj.asciiAlpha)(t) && i.length < 5)
          return ((i += String.fromCodePoint(t)), e.consume(t), o);
        if (58 === t) {
          let n = i.toLowerCase();
          if ("http" === n || "https" === n) return (e.consume(t), l);
        }
        return n(t);
      }
      function l(t) {
        return 47 === t ? ((e.consume(t), s) ? c : ((s = !0), l)) : n(t);
      }
      function c(t) {
        return null === t ||
          (0, tj.asciiControl)(t) ||
          (0, tj.markdownLineEndingOrSpace)(t) ||
          (0, tj.unicodeWhitespace)(t) ||
          (0, tj.unicodePunctuation)(t)
          ? n(t)
          : e.attempt(tC, e.attempt(tk, u), n)(t);
      }
      function u(n) {
        return (e.exit("literalAutolinkHttp"), e.exit("literalAutolink"), t(n));
      }
    }
    function tF(e, t, n) {
      let r = 0;
      return i;
      function i(t) {
        return (87 === t || 119 === t) && r < 3
          ? (r++, e.consume(t), i)
          : 46 === t && 3 === r
            ? (e.consume(t), s)
            : n(t);
      }
      function s(e) {
        return null === e ? n(e) : t(e);
      }
    }
    function t_(e, t, n) {
      let r, i, s;
      return a;
      function a(t) {
        return 46 === t || 95 === t
          ? e.check(tS, l, o)(t)
          : null === t ||
              (0, tj.markdownLineEndingOrSpace)(t) ||
              (0, tj.unicodeWhitespace)(t) ||
              (45 !== t && (0, tj.unicodePunctuation)(t))
            ? l(t)
            : ((s = !0), e.consume(t), a);
      }
      function o(t) {
        return (95 === t ? (r = !0) : ((i = r), (r = void 0)), e.consume(t), a);
      }
      function l(e) {
        return i || r || !s ? n(e) : t(e);
      }
    }
    function tO(e, t) {
      let n = 0,
        r = 0;
      return i;
      function i(a) {
        return 40 === a
          ? (n++, e.consume(a), i)
          : 41 === a && r < n
            ? s(a)
            : 33 === a ||
                34 === a ||
                38 === a ||
                39 === a ||
                41 === a ||
                42 === a ||
                44 === a ||
                46 === a ||
                58 === a ||
                59 === a ||
                60 === a ||
                63 === a ||
                93 === a ||
                95 === a ||
                126 === a
              ? e.check(tS, t, s)(a)
              : null === a ||
                  (0, tj.markdownLineEndingOrSpace)(a) ||
                  (0, tj.unicodeWhitespace)(a)
                ? t(a)
                : (e.consume(a), i);
      }
      function s(t) {
        return (41 === t && r++, e.consume(t), i);
      }
    }
    function tB(e, t, n) {
      return r;
      function r(a) {
        return 33 === a ||
          34 === a ||
          39 === a ||
          41 === a ||
          42 === a ||
          44 === a ||
          46 === a ||
          58 === a ||
          59 === a ||
          63 === a ||
          95 === a ||
          126 === a
          ? (e.consume(a), r)
          : 38 === a
            ? (e.consume(a), s)
            : 93 === a
              ? (e.consume(a), i)
              : 60 === a ||
                  null === a ||
                  (0, tj.markdownLineEndingOrSpace)(a) ||
                  (0, tj.unicodeWhitespace)(a)
                ? t(a)
                : n(a);
      }
      function i(e) {
        return null === e ||
          40 === e ||
          91 === e ||
          (0, tj.markdownLineEndingOrSpace)(e) ||
          (0, tj.unicodeWhitespace)(e)
          ? t(e)
          : r(e);
      }
      function s(e) {
        return (0, tj.asciiAlpha)(e) ? a(e) : n(e);
      }
      function a(t) {
        return 59 === t
          ? (e.consume(t), r)
          : (0, tj.asciiAlpha)(t)
            ? (e.consume(t), a)
            : n(t);
      }
    }
    function tV(e, t, n) {
      return r;
      function r(t) {
        return (e.consume(t), i);
      }
      function i(e) {
        return (0, tj.asciiAlphanumeric)(e) ? n(e) : t(e);
      }
    }
    function tz(e) {
      return (
        null === e ||
        40 === e ||
        42 === e ||
        95 === e ||
        91 === e ||
        93 === e ||
        126 === e ||
        (0, tj.markdownLineEndingOrSpace)(e)
      );
    }
    function tH(e) {
      return !(0, tj.asciiAlpha)(e);
    }
    function t$(e) {
      return !(47 === e || tU(e));
    }
    function tU(e) {
      return (
        43 === e ||
        45 === e ||
        46 === e ||
        95 === e ||
        (0, tj.asciiAlphanumeric)(e)
      );
    }
    function tG(e) {
      let t = e.length,
        n = !1;
      for (; t--; ) {
        let r = e[t][1];
        if (
          ("labelLink" === r.type || "labelImage" === r.type) &&
          !r._balanced
        ) {
          n = !0;
          break;
        }
        if (r._gfmAutolinkLiteralWalkedInto) {
          n = !1;
          break;
        }
      }
      return (
        e.length > 0 &&
          !n &&
          (e[e.length - 1][1]._gfmAutolinkLiteralWalkedInto = !0),
        n
      );
    }
    ((tI[43] = tD),
      (tI[45] = tD),
      (tI[46] = tD),
      (tI[95] = tD),
      (tI[72] = [tD, tA]),
      (tI[104] = [tD, tA]),
      (tI[87] = [tD, tE]),
      (tI[119] = [tD, tE]));
    e.i(983691);
    var tW = e.i(434036),
      tq = e.i(540795),
      tZ = K,
      tK = em;
    let tY = { tokenize: t3, partial: !0 };
    function tJ() {
      return {
        document: {
          91: {
            name: "gfmFootnoteDefinition",
            tokenize: t1,
            continuation: { tokenize: t2 },
            exit: t5,
          },
        },
        text: {
          91: { name: "gfmFootnoteCall", tokenize: t0 },
          93: {
            name: "gfmPotentialFootnoteCall",
            add: "after",
            tokenize: tQ,
            resolveTo: tX,
          },
        },
      };
    }
    function tQ(e, t, n) {
      let r,
        i = this,
        s = i.events.length,
        a = i.parser.gfmFootnotes || (i.parser.gfmFootnotes = []);
      for (; s--; ) {
        let e = i.events[s][1];
        if ("labelImage" === e.type) {
          r = e;
          break;
        }
        if (
          "gfmFootnoteCall" === e.type ||
          "labelLink" === e.type ||
          "label" === e.type ||
          "image" === e.type ||
          "link" === e.type
        )
          break;
      }
      return o;
      function o(s) {
        if (!r || !r._balanced) return n(s);
        let o = (0, tK.normalizeIdentifier)(
          i.sliceSerialize({ start: r.end, end: i.now() }),
        );
        return 94 === o.codePointAt(0) && a.includes(o.slice(1))
          ? (e.enter("gfmFootnoteCallLabelMarker"),
            e.consume(s),
            e.exit("gfmFootnoteCallLabelMarker"),
            t(s))
          : n(s);
      }
    }
    function tX(e, t) {
      let n,
        r = e.length;
      for (; r--; )
        if ("labelImage" === e[r][1].type && "enter" === e[r][0]) {
          n = e[r][1];
          break;
        }
      ((e[r + 1][1].type = "data"),
        (e[r + 3][1].type = "gfmFootnoteCallLabelMarker"));
      let i = {
          type: "gfmFootnoteCall",
          start: Object.assign({}, e[r + 3][1].start),
          end: Object.assign({}, e[e.length - 1][1].end),
        },
        s = {
          type: "gfmFootnoteCallMarker",
          start: Object.assign({}, e[r + 3][1].end),
          end: Object.assign({}, e[r + 3][1].end),
        };
      (s.end.column++, s.end.offset++, s.end._bufferIndex++);
      let a = {
          type: "gfmFootnoteCallString",
          start: Object.assign({}, s.end),
          end: Object.assign({}, e[e.length - 1][1].start),
        },
        o = {
          type: "chunkString",
          contentType: "string",
          start: Object.assign({}, a.start),
          end: Object.assign({}, a.end),
        },
        l = [
          e[r + 1],
          e[r + 2],
          ["enter", i, t],
          e[r + 3],
          e[r + 4],
          ["enter", s, t],
          ["exit", s, t],
          ["enter", a, t],
          ["enter", o, t],
          ["exit", o, t],
          ["exit", a, t],
          e[e.length - 2],
          e[e.length - 1],
          ["exit", i, t],
        ];
      return (e.splice(r, e.length - r + 1, ...l), e);
    }
    function t0(e, t, n) {
      let r,
        i = this,
        s = i.parser.gfmFootnotes || (i.parser.gfmFootnotes = []),
        a = 0;
      return o;
      function o(t) {
        return (
          e.enter("gfmFootnoteCall"),
          e.enter("gfmFootnoteCallLabelMarker"),
          e.consume(t),
          e.exit("gfmFootnoteCallLabelMarker"),
          l
        );
      }
      function l(t) {
        return 94 !== t
          ? n(t)
          : (e.enter("gfmFootnoteCallMarker"),
            e.consume(t),
            e.exit("gfmFootnoteCallMarker"),
            e.enter("gfmFootnoteCallString"),
            (e.enter("chunkString").contentType = "string"),
            c);
      }
      function c(o) {
        if (
          a > 999 ||
          (93 === o && !r) ||
          null === o ||
          91 === o ||
          (0, tZ.markdownLineEndingOrSpace)(o)
        )
          return n(o);
        if (93 === o) {
          e.exit("chunkString");
          let r = e.exit("gfmFootnoteCallString");
          return s.includes((0, tK.normalizeIdentifier)(i.sliceSerialize(r)))
            ? (e.enter("gfmFootnoteCallLabelMarker"),
              e.consume(o),
              e.exit("gfmFootnoteCallLabelMarker"),
              e.exit("gfmFootnoteCall"),
              t)
            : n(o);
        }
        return (
          (0, tZ.markdownLineEndingOrSpace)(o) || (r = !0),
          a++,
          e.consume(o),
          92 === o ? u : c
        );
      }
      function u(t) {
        return 91 === t || 92 === t || 93 === t ? (e.consume(t), a++, c) : c(t);
      }
    }
    function t1(e, t, n) {
      let r,
        i,
        s = this,
        a = s.parser.gfmFootnotes || (s.parser.gfmFootnotes = []),
        o = 0;
      return l;
      function l(t) {
        return (
          (e.enter("gfmFootnoteDefinition")._container = !0),
          e.enter("gfmFootnoteDefinitionLabel"),
          e.enter("gfmFootnoteDefinitionLabelMarker"),
          e.consume(t),
          e.exit("gfmFootnoteDefinitionLabelMarker"),
          c
        );
      }
      function c(t) {
        return 94 === t
          ? (e.enter("gfmFootnoteDefinitionMarker"),
            e.consume(t),
            e.exit("gfmFootnoteDefinitionMarker"),
            e.enter("gfmFootnoteDefinitionLabelString"),
            (e.enter("chunkString").contentType = "string"),
            u)
          : n(t);
      }
      function u(t) {
        if (
          o > 999 ||
          (93 === t && !i) ||
          null === t ||
          91 === t ||
          (0, tZ.markdownLineEndingOrSpace)(t)
        )
          return n(t);
        if (93 === t) {
          e.exit("chunkString");
          let n = e.exit("gfmFootnoteDefinitionLabelString");
          return (
            (r = (0, tK.normalizeIdentifier)(s.sliceSerialize(n))),
            e.enter("gfmFootnoteDefinitionLabelMarker"),
            e.consume(t),
            e.exit("gfmFootnoteDefinitionLabelMarker"),
            e.exit("gfmFootnoteDefinitionLabel"),
            h
          );
        }
        return (
          (0, tZ.markdownLineEndingOrSpace)(t) || (i = !0),
          o++,
          e.consume(t),
          92 === t ? d : u
        );
      }
      function d(t) {
        return 91 === t || 92 === t || 93 === t ? (e.consume(t), o++, u) : u(t);
      }
      function h(t) {
        return 58 === t
          ? (e.enter("definitionMarker"),
            e.consume(t),
            e.exit("definitionMarker"),
            a.includes(r) || a.push(r),
            (0, tq.factorySpace)(e, p, "gfmFootnoteDefinitionWhitespace"))
          : n(t);
      }
      function p(e) {
        return t(e);
      }
    }
    function t2(e, t, n) {
      return e.check(tW.blankLine, t, e.attempt(tY, t, n));
    }
    function t5(e) {
      e.exit("gfmFootnoteDefinition");
    }
    function t3(e, t, n) {
      let r = this;
      return (0, tq.factorySpace)(e, i, "gfmFootnoteDefinitionIndent", 5);
      function i(e) {
        let i = r.events[r.events.length - 1];
        return i &&
          "gfmFootnoteDefinitionIndent" === i[1].type &&
          4 === i[2].sliceSerialize(i[1], !0).length
          ? t(e)
          : n(e);
      }
    }
    var t4 = e.i(212470),
      t9 = e.i(941392),
      t7 = e.i(759239);
    function t6(e) {
      let t = (e || {}).singleTilde,
        n = { name: "strikethrough", tokenize: i, resolveAll: r };
      return (
        null == t && (t = !0),
        {
          text: { 126: n },
          insideSpan: { null: [n] },
          attentionMarkers: { null: [126] },
        }
      );
      function r(e, t) {
        let n = -1;
        for (; ++n < e.length; )
          if (
            "enter" === e[n][0] &&
            "strikethroughSequenceTemporary" === e[n][1].type &&
            e[n][1]._close
          ) {
            let r = n;
            for (; r--; )
              if (
                "exit" === e[r][0] &&
                "strikethroughSequenceTemporary" === e[r][1].type &&
                e[r][1]._open &&
                e[n][1].end.offset - e[n][1].start.offset ==
                  e[r][1].end.offset - e[r][1].start.offset
              ) {
                ((e[n][1].type = "strikethroughSequence"),
                  (e[r][1].type = "strikethroughSequence"));
                let i = {
                    type: "strikethrough",
                    start: Object.assign({}, e[r][1].start),
                    end: Object.assign({}, e[n][1].end),
                  },
                  s = {
                    type: "strikethroughText",
                    start: Object.assign({}, e[r][1].end),
                    end: Object.assign({}, e[n][1].start),
                  },
                  a = [
                    ["enter", i, t],
                    ["enter", e[r][1], t],
                    ["exit", e[r][1], t],
                    ["enter", s, t],
                  ],
                  o = t.parser.constructs.insideSpan.null;
                (o &&
                  (0, t4.splice)(
                    a,
                    a.length,
                    0,
                    (0, t7.resolveAll)(o, e.slice(r + 1, n), t),
                  ),
                  (0, t4.splice)(a, a.length, 0, [
                    ["exit", s, t],
                    ["enter", e[n][1], t],
                    ["exit", e[n][1], t],
                    ["exit", i, t],
                  ]),
                  (0, t4.splice)(e, r - 1, n - r + 3, a),
                  (n = r + a.length - 2));
                break;
              }
          }
        for (n = -1; ++n < e.length; )
          "strikethroughSequenceTemporary" === e[n][1].type &&
            (e[n][1].type = "data");
        return e;
      }
      function i(e, n, r) {
        let i = this.previous,
          s = this.events,
          a = 0;
        return o;
        function o(t) {
          return 126 === i && "characterEscape" !== s[s.length - 1][1].type
            ? r(t)
            : (e.enter("strikethroughSequenceTemporary"), l(t));
        }
        function l(s) {
          let o = (0, t9.classifyCharacter)(i);
          if (126 === s) return a > 1 ? r(s) : (e.consume(s), a++, l);
          if (a < 2 && !t) return r(s);
          let c = e.exit("strikethroughSequenceTemporary"),
            u = (0, t9.classifyCharacter)(s);
          return (
            (c._open = !u || (2 === u && !!o)),
            (c._close = !o || (2 === o && !!u)),
            n(s)
          );
        }
      }
    }
    var t8 = tq,
      ne = K;
    class nt {
      constructor() {
        this.map = [];
      }
      add(e, t, n) {
        nn(this, e, t, n);
      }
      consume(e) {
        if (
          (this.map.sort(function (e, t) {
            return e[0] - t[0];
          }),
          0 === this.map.length)
        )
          return;
        let t = this.map.length,
          n = [];
        for (; t > 0; )
          ((t -= 1),
            n.push(e.slice(this.map[t][0] + this.map[t][1]), this.map[t][2]),
            (e.length = this.map[t][0]));
        (n.push([...e]), (e.length = 0));
        let r = n.pop();
        for (; r; ) (e.push(...r), (r = n.pop()));
        this.map.length = 0;
      }
    }
    function nn(e, t, n, r) {
      let i = 0;
      if (0 !== n || 0 !== r.length) {
        for (; i < e.map.length; ) {
          if (e.map[i][0] === t) {
            ((e.map[i][1] += n), e.map[i][2].push(...r));
            return;
          }
          i += 1;
        }
        e.map.push([t, n, r]);
      }
    }
    function nr(e, t) {
      let n = !1,
        r = [];
      for (; t < e.length; ) {
        let i = e[t];
        if (n) {
          if ("enter" === i[0])
            "tableContent" === i[1].type &&
              r.push(
                "tableDelimiterMarker" === e[t + 1][1].type ? "left" : "none",
              );
          else if ("tableContent" === i[1].type) {
            if ("tableDelimiterMarker" === e[t - 1][1].type) {
              let e = r.length - 1;
              r[e] = "left" === r[e] ? "center" : "right";
            }
          } else if ("tableDelimiterRow" === i[1].type) break;
        } else
          "enter" === i[0] && "tableDelimiterRow" === i[1].type && (n = !0);
        t += 1;
      }
      return r;
    }
    function ni() {
      return {
        flow: { null: { name: "table", tokenize: ns, resolveAll: na } },
      };
    }
    function ns(e, t, n) {
      let r,
        i = this,
        s = 0,
        a = 0;
      return o;
      function o(e) {
        let t = i.events.length - 1;
        for (; t > -1; ) {
          let e = i.events[t][1].type;
          if ("lineEnding" === e || "linePrefix" === e) t--;
          else break;
        }
        let r = t > -1 ? i.events[t][1].type : null,
          s = "tableHead" === r || "tableRow" === r ? w : l;
        return s === w && i.parser.lazy[i.now().line] ? n(e) : s(e);
      }
      function l(t) {
        return (e.enter("tableHead"), e.enter("tableRow"), c(t));
      }
      function c(e) {
        return (124 === e || ((r = !0), (a += 1)), u(e));
      }
      function u(t) {
        return null === t
          ? n(t)
          : (0, ne.markdownLineEnding)(t)
            ? a > 1
              ? ((a = 0),
                (i.interrupt = !0),
                e.exit("tableRow"),
                e.enter("lineEnding"),
                e.consume(t),
                e.exit("lineEnding"),
                p)
              : n(t)
            : (0, ne.markdownSpace)(t)
              ? (0, t8.factorySpace)(e, u, "whitespace")(t)
              : ((a += 1), r && ((r = !1), (s += 1)), 124 === t)
                ? (e.enter("tableCellDivider"),
                  e.consume(t),
                  e.exit("tableCellDivider"),
                  (r = !0),
                  u)
                : (e.enter("data"), d(t));
      }
      function d(t) {
        return null === t || 124 === t || (0, ne.markdownLineEndingOrSpace)(t)
          ? (e.exit("data"), u(t))
          : (e.consume(t), 92 === t ? h : d);
      }
      function h(t) {
        return 92 === t || 124 === t ? (e.consume(t), d) : d(t);
      }
      function p(t) {
        return ((i.interrupt = !1), i.parser.lazy[i.now().line])
          ? n(t)
          : (e.enter("tableDelimiterRow"), (r = !1), (0, ne.markdownSpace)(t))
            ? (0, t8.factorySpace)(
                e,
                m,
                "linePrefix",
                i.parser.constructs.disable.null.includes("codeIndented")
                  ? void 0
                  : 4,
              )(t)
            : m(t);
      }
      function m(t) {
        return 45 === t || 58 === t
          ? g(t)
          : 124 === t
            ? ((r = !0),
              e.enter("tableCellDivider"),
              e.consume(t),
              e.exit("tableCellDivider"),
              f)
            : j(t);
      }
      function f(t) {
        return (0, ne.markdownSpace)(t)
          ? (0, t8.factorySpace)(e, g, "whitespace")(t)
          : g(t);
      }
      function g(t) {
        return 58 === t
          ? ((a += 1),
            (r = !0),
            e.enter("tableDelimiterMarker"),
            e.consume(t),
            e.exit("tableDelimiterMarker"),
            x)
          : 45 === t
            ? ((a += 1), x(t))
            : null === t || (0, ne.markdownLineEnding)(t)
              ? b(t)
              : j(t);
      }
      function x(t) {
        return 45 === t ? (e.enter("tableDelimiterFiller"), v(t)) : j(t);
      }
      function v(t) {
        return 45 === t
          ? (e.consume(t), v)
          : 58 === t
            ? ((r = !0),
              e.exit("tableDelimiterFiller"),
              e.enter("tableDelimiterMarker"),
              e.consume(t),
              e.exit("tableDelimiterMarker"),
              y)
            : (e.exit("tableDelimiterFiller"), y(t));
      }
      function y(t) {
        return (0, ne.markdownSpace)(t)
          ? (0, t8.factorySpace)(e, b, "whitespace")(t)
          : b(t);
      }
      function b(n) {
        return 124 === n
          ? m(n)
          : null === n || (0, ne.markdownLineEnding)(n)
            ? r && s === a
              ? (e.exit("tableDelimiterRow"), e.exit("tableHead"), t(n))
              : j(n)
            : j(n);
      }
      function j(e) {
        return n(e);
      }
      function w(t) {
        return (e.enter("tableRow"), C(t));
      }
      function C(n) {
        return 124 === n
          ? (e.enter("tableCellDivider"),
            e.consume(n),
            e.exit("tableCellDivider"),
            C)
          : null === n || (0, ne.markdownLineEnding)(n)
            ? (e.exit("tableRow"), t(n))
            : (0, ne.markdownSpace)(n)
              ? (0, t8.factorySpace)(e, C, "whitespace")(n)
              : (e.enter("data"), k(n));
      }
      function k(t) {
        return null === t || 124 === t || (0, ne.markdownLineEndingOrSpace)(t)
          ? (e.exit("data"), C(t))
          : (e.consume(t), 92 === t ? S : k);
      }
      function S(t) {
        return 92 === t || 124 === t ? (e.consume(t), k) : k(t);
      }
    }
    function na(e, t) {
      let n,
        r,
        i,
        s = -1,
        a = !0,
        o = 0,
        l = [0, 0, 0, 0],
        c = [0, 0, 0, 0],
        u = !1,
        d = 0,
        h = new nt();
      for (; ++s < e.length; ) {
        let p = e[s],
          m = p[1];
        "enter" === p[0]
          ? "tableHead" === m.type
            ? ((u = !1),
              0 !== d && (nl(h, t, d, n, r), (r = void 0), (d = 0)),
              (n = {
                type: "table",
                start: Object.assign({}, m.start),
                end: Object.assign({}, m.end),
              }),
              h.add(s, 0, [["enter", n, t]]))
            : "tableRow" === m.type || "tableDelimiterRow" === m.type
              ? ((a = !0),
                (i = void 0),
                (l = [0, 0, 0, 0]),
                (c = [0, s + 1, 0, 0]),
                u &&
                  ((u = !1),
                  (r = {
                    type: "tableBody",
                    start: Object.assign({}, m.start),
                    end: Object.assign({}, m.end),
                  }),
                  h.add(s, 0, [["enter", r, t]])),
                (o = "tableDelimiterRow" === m.type ? 2 : r ? 3 : 1))
              : o &&
                  ("data" === m.type ||
                    "tableDelimiterMarker" === m.type ||
                    "tableDelimiterFiller" === m.type)
                ? ((a = !1),
                  0 === c[2] &&
                    (0 !== l[1] &&
                      ((c[0] = c[1]),
                      (i = no(h, t, l, o, void 0, i)),
                      (l = [0, 0, 0, 0])),
                    (c[2] = s)))
                : "tableCellDivider" === m.type &&
                  (a
                    ? (a = !1)
                    : (0 !== l[1] &&
                        ((c[0] = c[1]), (i = no(h, t, l, o, void 0, i))),
                      (c = [(l = c)[1], s, 0, 0])))
          : "tableHead" === m.type
            ? ((u = !0), (d = s))
            : "tableRow" === m.type || "tableDelimiterRow" === m.type
              ? ((d = s),
                0 !== l[1]
                  ? ((c[0] = c[1]), (i = no(h, t, l, o, s, i)))
                  : 0 !== c[1] && (i = no(h, t, c, o, s, i)),
                (o = 0))
              : o &&
                ("data" === m.type ||
                  "tableDelimiterMarker" === m.type ||
                  "tableDelimiterFiller" === m.type) &&
                (c[3] = s);
      }
      for (
        0 !== d && nl(h, t, d, n, r), h.consume(t.events), s = -1;
        ++s < t.events.length;

      ) {
        let e = t.events[s];
        "enter" === e[0] &&
          "table" === e[1].type &&
          (e[1]._align = nr(t.events, s));
      }
      return e;
    }
    function no(e, t, n, r, i, s) {
      let a =
          1 === r ? "tableHeader" : 2 === r ? "tableDelimiter" : "tableData",
        o = "tableContent";
      0 !== n[0] &&
        ((s.end = Object.assign({}, nc(t.events, n[0]))),
        e.add(n[0], 0, [["exit", s, t]]));
      let l = nc(t.events, n[1]);
      if (
        ((s = {
          type: a,
          start: Object.assign({}, l),
          end: Object.assign({}, l),
        }),
        e.add(n[1], 0, [["enter", s, t]]),
        0 !== n[2])
      ) {
        let i = nc(t.events, n[2]),
          s = nc(t.events, n[3]),
          a = {
            type: o,
            start: Object.assign({}, i),
            end: Object.assign({}, s),
          };
        if ((e.add(n[2], 0, [["enter", a, t]]), 2 !== r)) {
          let r = t.events[n[2]],
            i = t.events[n[3]];
          if (
            ((r[1].end = Object.assign({}, i[1].end)),
            (r[1].type = "chunkText"),
            (r[1].contentType = "text"),
            n[3] > n[2] + 1)
          ) {
            let t = n[2] + 1,
              r = n[3] - n[2] - 1;
            e.add(t, r, []);
          }
        }
        e.add(n[3] + 1, 0, [["exit", a, t]]);
      }
      return (
        void 0 !== i &&
          ((s.end = Object.assign({}, nc(t.events, i))),
          e.add(i, 0, [["exit", s, t]]),
          (s = void 0)),
        s
      );
    }
    function nl(e, t, n, r, i) {
      let s = [],
        a = nc(t.events, n);
      (i && ((i.end = Object.assign({}, a)), s.push(["exit", i, t])),
        (r.end = Object.assign({}, a)),
        s.push(["exit", r, t]),
        e.add(n + 1, 0, s));
    }
    function nc(e, t) {
      let n = e[t],
        r = "enter" === n[0] ? "start" : "end";
      return n[1][r];
    }
    RegExp(
      "^" +
        /<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi
          .source,
      "i",
    );
    var nu = tq,
      nd = K;
    let nh = { name: "tasklistCheck", tokenize: nm };
    function np() {
      return { text: { 91: nh } };
    }
    function nm(e, t, n) {
      let r = this;
      return i;
      function i(t) {
        return null === r.previous && r._gfmTasklistFirstContentOfListItem
          ? (e.enter("taskListCheck"),
            e.enter("taskListCheckMarker"),
            e.consume(t),
            e.exit("taskListCheckMarker"),
            s)
          : n(t);
      }
      function s(t) {
        return (0, nd.markdownLineEndingOrSpace)(t)
          ? (e.enter("taskListCheckValueUnchecked"),
            e.consume(t),
            e.exit("taskListCheckValueUnchecked"),
            a)
          : 88 === t || 120 === t
            ? (e.enter("taskListCheckValueChecked"),
              e.consume(t),
              e.exit("taskListCheckValueChecked"),
              a)
            : n(t);
      }
      function a(t) {
        return 93 === t
          ? (e.enter("taskListCheckMarker"),
            e.consume(t),
            e.exit("taskListCheckMarker"),
            e.exit("taskListCheck"),
            o)
          : n(t);
      }
      function o(r) {
        return (0, nd.markdownLineEnding)(r)
          ? t(r)
          : (0, nd.markdownSpace)(r)
            ? e.check({ tokenize: nf }, t, n)(r)
            : n(r);
      }
    }
    function nf(e, t, n) {
      return (0, nu.factorySpace)(e, r, "whitespace");
      function r(e) {
        return null === e ? n(e) : t(e);
      }
    }
    function ng(e) {
      return (0, tb.combineExtensions)([tM(), tJ(), t6(e), ni(), np()]);
    }
    let nx = {};
    function nv(e) {
      let t = this,
        n = e || nx,
        r = t.data(),
        i = r.micromarkExtensions || (r.micromarkExtensions = []),
        s = r.fromMarkdownExtensions || (r.fromMarkdownExtensions = []),
        a = r.toMarkdownExtensions || (r.toMarkdownExtensions = []);
      (i.push(ng(n)), s.push(tv()), a.push(ty(n)));
    }
    var ny = Z;
    function nb() {
      return {
        enter: { mathFlow: e, mathFlowFenceMeta: t, mathText: s },
        exit: {
          mathFlow: i,
          mathFlowFence: r,
          mathFlowFenceMeta: n,
          mathFlowValue: o,
          mathText: a,
          mathTextData: o,
        },
      };
      function e(e) {
        let t = {
          type: "element",
          tagName: "code",
          properties: { className: ["language-math", "math-display"] },
          children: [],
        };
        this.enter(
          {
            type: "math",
            meta: null,
            value: "",
            data: { hName: "pre", hChildren: [t] },
          },
          e,
        );
      }
      function t() {
        this.buffer();
      }
      function n() {
        let e = this.resume(),
          t = this.stack[this.stack.length - 1];
        ((0, ny.ok)("math" === t.type), (t.meta = e));
      }
      function r() {
        this.data.mathFlowInside ||
          (this.buffer(), (this.data.mathFlowInside = !0));
      }
      function i(e) {
        let t = this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g, ""),
          n = this.stack[this.stack.length - 1];
        ((0, ny.ok)("math" === n.type), this.exit(e), (n.value = t));
        let r = n.data.hChildren[0];
        ((0, ny.ok)("element" === r.type),
          (0, ny.ok)("code" === r.tagName),
          r.children.push({ type: "text", value: t }),
          (this.data.mathFlowInside = void 0));
      }
      function s(e) {
        (this.enter(
          {
            type: "inlineMath",
            value: "",
            data: {
              hName: "code",
              hProperties: { className: ["language-math", "math-inline"] },
              hChildren: [],
            },
          },
          e,
        ),
          this.buffer());
      }
      function a(e) {
        let t = this.resume(),
          n = this.stack[this.stack.length - 1];
        ((0, ny.ok)("inlineMath" === n.type),
          this.exit(e),
          (n.value = t),
          n.data.hChildren.push({ type: "text", value: t }));
      }
      function o(e) {
        (this.config.enter.data.call(this, e),
          this.config.exit.data.call(this, e));
      }
    }
    function nj(e) {
      let t = (e || {}).singleDollarTextMath;
      return (
        null == t && (t = !0),
        (r.peek = i),
        {
          unsafe: [
            { character: "\r", inConstruct: "mathFlowMeta" },
            { character: "\n", inConstruct: "mathFlowMeta" },
            {
              character: "$",
              after: t ? void 0 : "\\$",
              inConstruct: "phrasing",
            },
            { character: "$", inConstruct: "mathFlowMeta" },
            { atBreak: !0, character: "$", after: "\\$" },
          ],
          handlers: { math: n, inlineMath: r },
        }
      );
      function n(e, t, n, r) {
        let i = e.value || "",
          s = n.createTracker(r),
          a = "$".repeat(Math.max(eB(i, "$") + 1, 2)),
          o = n.enter("mathFlow"),
          l = s.move(a);
        if (e.meta) {
          let t = n.enter("mathFlowMeta");
          ((l += s.move(
            n.safe(e.meta, {
              after: "\n",
              before: l,
              encode: ["$"],
              ...s.current(),
            }),
          )),
            t());
        }
        return (
          (l += s.move("\n")),
          i && (l += s.move(i + "\n")),
          (l += s.move(a)),
          o(),
          l
        );
      }
      function r(e, n, r) {
        let i = e.value || "",
          s = 1;
        for (
          !t && s++;
          RegExp("(^|[^$])" + "\\$".repeat(s) + "([^$]|$)").test(i);

        )
          s++;
        let a = "$".repeat(s);
        /[^ \r\n]/.test(i) &&
          ((/^[ \r\n]/.test(i) && /[ \r\n]$/.test(i)) || /^\$|\$$/.test(i)) &&
          (i = " " + i + " ");
        let o = -1;
        for (; ++o < r.unsafe.length; ) {
          let e,
            t = r.unsafe[o];
          if (!t.atBreak) continue;
          let n = r.compilePattern(t);
          for (; (e = n.exec(i)); ) {
            let t = e.index;
            (10 === i.codePointAt(t) && 13 === i.codePointAt(t - 1) && t--,
              (i = i.slice(0, t) + " " + i.slice(e.index + 1)));
          }
        }
        return a + i + a;
      }
      function i() {
        return "$";
      }
    }
    var nw = tq,
      nC = K;
    let nk = { tokenize: nN, concrete: !0 },
      nS = { tokenize: nE, partial: !0 };
    function nN(e, t, n) {
      let r = this,
        i = r.events[r.events.length - 1],
        s =
          i && "linePrefix" === i[1].type
            ? i[2].sliceSerialize(i[1], !0).length
            : 0,
        a = 0;
      return o;
      function o(t) {
        return (
          e.enter("mathFlow"),
          e.enter("mathFlowFence"),
          e.enter("mathFlowFenceSequence"),
          l(t)
        );
      }
      function l(t) {
        return 36 === t
          ? (e.consume(t), a++, l)
          : a < 2
            ? n(t)
            : (e.exit("mathFlowFenceSequence"),
              (0, nw.factorySpace)(e, c, "whitespace")(t));
      }
      function c(t) {
        return null === t || (0, nC.markdownLineEnding)(t)
          ? d(t)
          : (e.enter("mathFlowFenceMeta"),
            e.enter("chunkString", { contentType: "string" }),
            u(t));
      }
      function u(t) {
        return null === t || (0, nC.markdownLineEnding)(t)
          ? (e.exit("chunkString"), e.exit("mathFlowFenceMeta"), d(t))
          : 36 === t
            ? n(t)
            : (e.consume(t), u);
      }
      function d(n) {
        return (e.exit("mathFlowFence"), r.interrupt)
          ? t(n)
          : e.attempt(nS, h, g)(n);
      }
      function h(t) {
        return e.attempt({ tokenize: x, partial: !0 }, g, p)(t);
      }
      function p(t) {
        return (s ? (0, nw.factorySpace)(e, m, "linePrefix", s + 1) : m)(t);
      }
      function m(t) {
        return null === t
          ? g(t)
          : (0, nC.markdownLineEnding)(t)
            ? e.attempt(nS, h, g)(t)
            : (e.enter("mathFlowValue"), f(t));
      }
      function f(t) {
        return null === t || (0, nC.markdownLineEnding)(t)
          ? (e.exit("mathFlowValue"), m(t))
          : (e.consume(t), f);
      }
      function g(n) {
        return (e.exit("mathFlow"), t(n));
      }
      function x(e, t, n) {
        let i = 0;
        return (0, nw.factorySpace)(
          e,
          s,
          "linePrefix",
          r.parser.constructs.disable.null.includes("codeIndented")
            ? void 0
            : 4,
        );
        function s(t) {
          return (
            e.enter("mathFlowFence"),
            e.enter("mathFlowFenceSequence"),
            o(t)
          );
        }
        function o(t) {
          return 36 === t
            ? (i++, e.consume(t), o)
            : i < a
              ? n(t)
              : (e.exit("mathFlowFenceSequence"),
                (0, nw.factorySpace)(e, l, "whitespace")(t));
        }
        function l(r) {
          return null === r || (0, nC.markdownLineEnding)(r)
            ? (e.exit("mathFlowFence"), t(r))
            : n(r);
        }
      }
    }
    function nE(e, t, n) {
      let r = this;
      return i;
      function i(n) {
        return null === n
          ? t(n)
          : (e.enter("lineEnding"), e.consume(n), e.exit("lineEnding"), s);
      }
      function s(e) {
        return r.parser.lazy[r.now().line] ? n(e) : t(e);
      }
    }
    var nA = K;
    function nD(e) {
      let t = (e || {}).singleDollarTextMath;
      return (
        null == t && (t = !0),
        { tokenize: n, resolve: nI, previous: nM }
      );
      function n(e, n, r) {
        let i,
          s,
          a = 0;
        return o;
        function o(t) {
          return (e.enter("mathText"), e.enter("mathTextSequence"), l(t));
        }
        function l(n) {
          return 36 === n
            ? (e.consume(n), a++, l)
            : a < 2 && !t
              ? r(n)
              : (e.exit("mathTextSequence"), c(n));
        }
        function c(t) {
          return null === t
            ? r(t)
            : 36 === t
              ? ((s = e.enter("mathTextSequence")), (i = 0), d(t))
              : 32 === t
                ? (e.enter("space"), e.consume(t), e.exit("space"), c)
                : (0, nA.markdownLineEnding)(t)
                  ? (e.enter("lineEnding"),
                    e.consume(t),
                    e.exit("lineEnding"),
                    c)
                  : (e.enter("mathTextData"), u(t));
        }
        function u(t) {
          return null === t ||
            32 === t ||
            36 === t ||
            (0, nA.markdownLineEnding)(t)
            ? (e.exit("mathTextData"), c(t))
            : (e.consume(t), u);
        }
        function d(t) {
          return 36 === t
            ? (e.consume(t), i++, d)
            : i === a
              ? (e.exit("mathTextSequence"), e.exit("mathText"), n(t))
              : ((s.type = "mathTextData"), u(t));
        }
      }
    }
    function nI(e) {
      let t,
        n,
        r = e.length - 4,
        i = 3;
      if (
        ("lineEnding" === e[3][1].type || "space" === e[i][1].type) &&
        ("lineEnding" === e[r][1].type || "space" === e[r][1].type)
      ) {
        for (t = i; ++t < r; )
          if ("mathTextData" === e[t][1].type) {
            ((e[r][1].type = "mathTextPadding"),
              (e[i][1].type = "mathTextPadding"),
              (i += 2),
              (r -= 2));
            break;
          }
      }
      for (t = i - 1, r++; ++t <= r; )
        void 0 === n
          ? t !== r && "lineEnding" !== e[t][1].type && (n = t)
          : (t === r || "lineEnding" === e[t][1].type) &&
            ((e[n][1].type = "mathTextData"),
            t !== n + 2 &&
              ((e[n][1].end = e[t - 1][1].end),
              e.splice(n + 2, t - n - 2),
              (r -= t - n - 2),
              (t = n + 2)),
            (n = void 0));
      return e;
    }
    function nM(e) {
      return (
        36 !== e ||
        "characterEscape" === this.events[this.events.length - 1][1].type
      );
    }
    function nT(e) {
      return { flow: { 36: nk }, text: { 36: nD(e) } };
    }
    let nL = {};
    function nP(e) {
      let t = this,
        n = e || nL,
        r = t.data(),
        i = r.micromarkExtensions || (r.micromarkExtensions = []),
        s = r.fromMarkdownExtensions || (r.fromMarkdownExtensions = []),
        a = r.toMarkdownExtensions || (r.toMarkdownExtensions = []);
      (i.push(nT(n)), s.push(nb()), a.push(nj(n)));
    }
    let nR =
        /[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,
      nF = Object.hasOwnProperty;
    class n_ {
      constructor() {
        (this.occurrences, this.reset());
      }
      slug(e, t) {
        let n = this,
          r = nO(e, !0 === t),
          i = r;
        for (; nF.call(n.occurrences, r); )
          (n.occurrences[i]++, (r = i + "-" + n.occurrences[i]));
        return ((n.occurrences[r] = 0), r);
      }
      reset() {
        this.occurrences = Object.create(null);
      }
    }
    function nO(e, t) {
      return "string" != typeof e
        ? ""
        : (t || (e = e.toLowerCase()), e.replace(nR, "").replace(/ /g, "-"));
    }
    function nB(e) {
      let t = "element" === e.type ? e.tagName.toLowerCase() : "",
        n = 2 === t.length && 104 === t.charCodeAt(0) ? t.charCodeAt(1) : 0;
      return n > 48 && n < 55 ? n - 48 : void 0;
    }
    function nV(e) {
      return "children" in e ? nH(e) : "value" in e ? e.value : "";
    }
    function nz(e) {
      return "text" === e.type ? e.value : "children" in e ? nH(e) : "";
    }
    function nH(e) {
      let t = -1,
        n = [];
      for (; ++t < e.children.length; ) n[t] = nz(e.children[t]);
      return n.join("");
    }
    var n$ = eU;
    let nU = {},
      nG = new n_();
    function nW(e) {
      let t = (e || nU).prefix || "";
      return function (e) {
        (nG.reset(),
          (0, n$.visit)(e, "element", function (e) {
            nB(e) && !e.properties.id && (e.properties.id = t + nG.slug(nV(e)));
          }));
      };
    }
    var nq = g;
    class nZ {
      static getIsPreviewable = () => !0;
      static Render(e) {
        let { isPublished: t } = (0, W.usePublishedPage)(),
          [n, r] = (0, V.useState)(void 0),
          { activeTab: i } = (0, H.useActiveTab)(),
          s = e.source.replaceAll(/\\+`/g, "`");
        return (0, B.jsx)(z.PreviewBlock, {
          ...e,
          blockType: "markdown",
          language: "markdown",
          source: s,
          onEdit: r,
          children: (0, B.jsx)("div", {
            className: (0, U.cn)(
              "flex h-full w-full justify-center overflow-y-auto p-4 md:py-6",
              "preview" !== i && (t ? "hidden" : "sr-only invisible"),
            ),
            children: (0, B.jsx)($.Prose, {
              children: (0, B.jsx)(G.MemodMarkdown, {
                remarkPlugins: [nv, nP],
                rehypePlugins: [nW],
                children: void 0 === n ? s : n,
              }),
            }),
          }),
        });
      }
      static Actions = V.default.memo(({ blockId: e, closed: t }) =>
        (0, B.jsx)(nq.PreviewBlockTitleActions, { blockId: e, closed: t }),
      );
      static TitleActions = null;
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    e.s(["VueBlockLogic", () => n3], 590377);
    var nK = t,
      nY = r,
      nJ = i,
      nQ = s,
      nX = h,
      n0 = u,
      n1 = n,
      n2 = d,
      n5 = g;
    class n3 {
      static getIsPreviewable = ({ closed: e }) => e;
      static Render(e) {
        let { chatId: t } = (0, n2.useChatId)(),
          { isPublished: n } = (0, n0.usePublishedPage)(),
          r = (0, nJ.getBlockIframeId)(e.blockId);
        return (
          T("VUE", e.source, r),
          (0, nK.jsx)(nQ.PreviewBlock, {
            allowRefresh: !0,
            ...e,
            blockType: "vue",
            language: "vue",
            resultId: e.blockId,
            children: (0, nK.jsx)(
              nX.Iframe,
              {
                iframeId: r,
                isPublished: n,
                origin: (0, n1.getIframeOrigin)(t || e.blockId),
                src: "/render/vue",
              },
              r,
            ),
          })
        );
      }
      static Actions = nY.default.memo(({ blockId: e, closed: t }) =>
        (0, nK.jsx)(n5.PreviewBlockTitleActions, { blockId: e, closed: t }),
      );
      static BrowserControls = null;
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    var n4 = e.i(926224);
    let n9 =
        "v0 does not currently support previewing advanced SvelteKit projects",
      n7 = "v0 can not detect a page to preview",
      n6 = RegExp("from ['\"](\\$app\\/(server))|(node:.+?)|path|fs|url['\"]");
    function n8(e, t) {
      return re(
        "code-project" === t.type
          ? (0, n4.parseMultiFileSource)({
              source: e,
              blockType: "code-project",
              blockId: "fake-block-id",
            })
          : [{ source: e, meta: t, isDeleted: !1 }],
      );
    }
    function re(e) {
      if (
        0 === (e = e.filter((e) => !e.isDeleted)).length ||
        !e.some((e) => e.meta.file && e.meta.file.endsWith(".svelte"))
      )
        return n7;
      for (let { source: t, meta: n } of e) {
        if (n.file?.endsWith("+error.svelte")) return n7;
        if (
          ((n.file?.endsWith("/+page.") || n.file?.endsWith("/+layout.")) &&
            (n.file.includes("[...") || n.file.includes("("))) ||
          t
            .split("\n")
            .filter((e) => e.trim().startsWith("import"))
            .join("\n")
            .match(n6)
        )
          return n9;
      }
      return !0;
    }
    e.s(["hasVisibleSvelteContent", () => n8], 809210);
  },
  432008,
  (e) => {
    "use strict";
    var t = e.i(576191);
    let n = 900,
      r = (e, t = n) => e < t,
      i = () => {
        let [e, i] = (0, t.useState)(!1);
        return (
          (0, t.useEffect)(() => {
            let e = window.matchMedia(`(max-width: ${n - 1}px)`),
              t = () => {
                i(r(window.innerWidth));
              };
            return (
              e.addEventListener("change", t),
              t(),
              () => e.removeEventListener("change", t)
            );
          }, []),
          e
        );
      };
    e.s(["useShouldShowBlocksInDrawer", 0, i]);
  },
  846139,
  (e) => {
    "use strict";
    e.s(
      [
        "BlockContent",
        () => ep,
        "getBlockLogic",
        () => ed,
        "useRenderedBlock",
        () => eh,
      ],
      846139,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(829732),
      i = e.i(205795),
      s = e.i(513529),
      a = e.i(238580),
      o = e.i(44366),
      l = e.i(165843),
      c = e.i(590377),
      u = t,
      d = e.i(476371),
      h = e.i(204575),
      p = e.i(805374),
      m = e.i(809210),
      f = e.i(696825),
      g = e.i(845210),
      x = e.i(930293),
      v = e.i(917806),
      y = n,
      b = e.i(868948),
      j = e.i(988094),
      w = e.i(284546),
      C = e.i(92479),
      k = e.i(295224),
      S = e.i(472166),
      N = e.i(210045),
      E = e.i(53223),
      A = e.i(470259),
      D = e.i(393799),
      I = e.i(487581),
      M = e.i(577247),
      T = e.i(889938),
      L = s,
      P = e.i(797173),
      R = e.i(84079),
      F = e.i(659563),
      _ = e.i(270692),
      O = e.i(899488),
      B = e.i(556355),
      V = e.i(176248),
      z = e.i(432008),
      H = e.i(566274),
      $ = e.i(160769),
      U = e.i(298450),
      G = e.i(622661),
      W = e.i(142219),
      q = e.i(668887),
      Z = e.i(751498),
      K = e.i(32170),
      Y = e.i(819969);
    class J {
      static getIsPreviewable = ({ closed: e, source: t, meta: n }) => {
        if (!e) return !1;
        let r = (0, m.hasVisibleSvelteContent)(t, n);
        return "string" == typeof r ? { error: r } : r;
      };
      static Render(e) {
        let { isPublished: t } = (0, g.usePublishedPage)(),
          { activeForkKey: n } = (0, C.useChatMessages)(),
          { isStreaming: r, chatId: i } = (0, C.useChatLoadingState)(),
          { atoms: s } = (0, Y.useCurrentChat)(),
          a = (0, D.useAtomValue)(s.canWriteToChat),
          o = (0, D.useAtomValue)(s.title),
          l = (0, D.useAtomValue)(s.ownerId),
          [c, p] = (0, D.useAtom)(I.previewBlockErrorsAtom),
          [m] = (0, D.useAtom)(L.consoleVisibilityAtom),
          { isBlockPreviewable: F } = (0, w.useActiveTab)(),
          _ = (0, k.useLatest)(F),
          { getBlockForked: O } = (0, f.useForkedBlocks)(),
          { user: B } = (0, K.useUser)(),
          { token: V, error: z } = (0, x.useSessionTokenForFrame)({
            chatId: i,
          });
        (0, y.useEffect)(() => {
          p([]);
        }, [e.blockId, p]);
        let { files: H, loadingPath: $ } = (0, P.useBlockFiles)({
            blockId: e.blockId,
            closed: e.closed,
            source: e.source,
            meta: e.meta,
          }),
          U = (0, k.useLatest)(H),
          G = (0, h.getBlockIframeId)(e.blockId),
          { submit: J } = (0, S.useV0Chat)(),
          { actions: Q } = (0, q.useCurrentBlockDesignMode)(),
          { setDesignModeEnabled: X } = Q;
        (0, M.useMessage)(
          (t) => {
            if (t.data && "object" == typeof t.data && t.data.__v0_remote__) {
              if ("generation_logs" === t.data.type) {
                let n = (t.data.logs || []).join("\n\n"),
                  i = W.store.get(I.previewBlockCollectedErrorsVersion),
                  s =
                    W.store.get(I.previewBlockDisplayedErrorsVersion) ||
                    e.blockId,
                  a =
                    W.store.get(I.previewBlockPreloadingSuccessCallback)
                      ?.callback || null;
                if (i && i !== s && a && !n) {
                  (a?.(),
                    W.store.set(I.previewBlockPreloadingSuccessCallback, null));
                  return;
                }
                r &&
                  (0, Z.updateAgentRuntimeErrors)({
                    blockId: t.data.id || e.blockId,
                    fullErrorMessage: n,
                  }).catch((n) => {
                    (0, E.track)("FailedToUpdateBlockRuntimeErrors", {
                      blockId: t.data.id || e.blockId,
                      error: n instanceof Error ? n.message : String(n),
                    });
                  });
              }
              if ("error" === t.data.type) {
                let n = (0, b.cleanBlockError)(t.data.error, t.data.stack);
                p((r) =>
                  r.some((e) => e.text === n) || !_.current
                    ? r
                    : ((0, E.track)(
                        t.data.isFatal
                          ? "V0BlockPreviewError"
                          : "V0BlockPreviewSoftError",
                        {
                          language: "svelte",
                          messageId: e.messageId,
                          blockId: e.blockId,
                          from:
                            void 0 !== e.meta.isQuickEdit
                              ? "quick-edit"
                              : void 0,
                          forkedFromBlockId: O(e.blockId),
                          resultId: e.resultId || "",
                        },
                        { errorMsg: n, errorCode: A.V0_BLOCK_PREVIEW_ERROR },
                      ),
                      r.concat({
                        isFatal: t.data.isFatal,
                        blockId:
                          W.store.get(I.previewBlockCollectedErrorsVersion) ||
                          e.blockId,
                        isServer: t.data.isServer,
                        text: n,
                        currentURL: t.data.currentURL,
                      })),
                );
              }
              if (
                ("frame_onload" === t.data.type && p([]),
                ("refine" === t.data.type ||
                  "add-refinement-element" === t.data.type) &&
                  (X(!1), U.current))
              ) {
                let r = U.current.find((e) => e.meta.file === t.data.file);
                if (!r) return void alert("File not found");
                let { componentName: i, sourceContext: s } = (0,
                T.structureRefinementData)({ event: t, file: r });
                if ("refine" === t.data.type) {
                  let a = {
                      version: 1,
                      parts: [
                        (0, T.createRefinementPart)({
                          file: r.meta.file,
                          componentName: i || "",
                          sourceContext: s,
                          line: t.data.line,
                          column: t.data.column,
                        }),
                        { type: "mdx", content: t.data.prompt },
                      ],
                    },
                    o = n?.indexOf(e.messageId) || -1;
                  n && o > 0 && o < n.length - 1
                    ? J({
                        action: "edit",
                        content: a,
                        userMessageId: n[o + 1],
                        type: "refinement",
                      })
                    : J({
                        action: "new",
                        content: a,
                        attachments: [],
                        type: "refinement",
                      });
                }
              }
            }
          },
          [
            G,
            J,
            n,
            p,
            e.messageId,
            U,
            i,
            e.blockId,
            _,
            e.meta.isQuickEdit,
            O,
            e.resultId,
            X,
          ],
        );
        let ee =
            "code-project" === e.meta.type &&
            H?.some((e) => e.meta?.file?.endsWith("+page.svelte")),
          et = null;
        if (e.blockId && F && (V || z)) {
          let n = new URLSearchParams();
          (n.set("__v0_renderer", "svelte"),
            t && n.set("mql", "true"),
            z || !V
              ? n.set("__v0", "")
              : V &&
                B &&
                ((B.teamId && B.teamId === l) || l === B.id) &&
                n.set("__v0_token", V),
            e.isV3 && n.set("isV3", "true"),
            (et = (0, u.jsx)(N.Iframe, {
              iframeId: G,
              isPublished: t,
              origin: (0, v.getLiteIframeOrigin)(e.blockId, o ?? void 0),
              src: `/?${n.toString()}`,
            })),
            ee &&
              (et = (0, u.jsx)("div", {
                className: "size-full",
                "data-slot": "browser-content",
                children: et,
              })));
        }
        return (0, u.jsxs)(d.PreviewBlock, {
          initialFileTreeSize: e.initialFileTreeSize,
          ...e,
          loadingPath: $,
          files: H,
          blockType: "code-project" !== e.meta.type ? "svelte" : "code-project",
          language: "svelte",
          allowRefresh: !ee,
          allowFullScreen: !ee,
          isV3: e.isV3,
          initialConsoleSize: e.initialConsoleSize,
          initialConsoleExpanded: e.initialConsoleExpanded,
          hideConsole: !m,
          browserControls:
            "code-project" === e.meta.type
              ? (0, u.jsx)(R.BrowserFrame, { blockId: e.blockId, iframeId: G })
              : void 0,
          children: [
            c.length
              ? (0, u.jsx)(j.ErrorsBanner, {
                  blockId: e.blockId,
                  errors: c,
                  onDismiss: () => {
                    p([]);
                  },
                  canWriteToChat: a,
                })
              : null,
            et,
          ],
        });
      }
      static Actions = y.default.memo(({ blockId: e, closed: t }) =>
        (0, u.jsx)(p.PreviewBlockTitleActions, { blockId: e, closed: t }),
      );
      static BrowserControls = y.default.memo(({ blockId: e }) =>
        (0, u.jsx)(R.BrowserFrame, {
          blockId: e,
          iframeId: (0, h.getBlockIframeId)(e),
        }),
      );
      static MoreMenu = y.default.memo(
        ({ blockId: e, blockLanguage: t, blockSource: n }) => {
          let { fullScreenResult: r, setFullscreenResult: i } = (0,
            H.useFullscreenResult)(),
            { activeTab: s } = (0, w.useActiveTab)(),
            a = (0, z.useShouldShowBlocksInDrawer)();
          return (0, u.jsxs)(B.DropdownMenu, {
            children: [
              (0, u.jsx)(B.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, u.jsx)(V.Button, {
                  variant: "ghost",
                  className: "size-7 rounded-md text-v0-gray-900",
                  size: "sm",
                  children: (0, u.jsx)(F.MoreHorizontal, {}),
                }),
              }),
              (0, u.jsxs)(B.DropdownMenuContent, {
                align: "end",
                side: "bottom",
                sideOffset: 8,
                children: [
                  "code" !== s &&
                    !a &&
                    (0, u.jsx)(B.DropdownMenuGroup, {
                      children: (0, u.jsxs)(B.DropdownMenuItem, {
                        onSelect: () => i(!r, e),
                        children: [
                          (0, u.jsx)(_.Fullscreen, {}),
                          (0, u.jsx)("span", {
                            children: r ? "Exit fullscreen" : "Fullscreen",
                          }),
                        ],
                      }),
                    }),
                  (0, u.jsx)(B.DropdownMenuSeparator, {}),
                  (0, u.jsx)(B.DropdownMenuGroup, {
                    children: (0, u.jsx)($.BlockActionDownloadZip, {
                      blockId: e,
                      lang: t,
                      source: n,
                    }),
                  }),
                ],
              }),
            ],
          });
        },
      );
      static ConsoleToggle = y.default.memo(({ blockId: e }) => {
        let [t, n] = (0, D.useAtom)(L.consoleVisibilityAtom),
          { blockStatus: r, clearEvents: i } = (0, U.useNewConsoleEvents)(e),
          s = r[e] || null,
          a = () => {
            let e = !t;
            (n(e), e && i());
          };
        return (0, u.jsx)(O.CodeBlockButton, {
          onClick: a,
          tooltip: {
            side: "bottom",
            content: t ? "Hide Console" : "Show Console",
          },
          className: "size-7 rounded-md text-v0-gray-900",
          children: (0, u.jsx)(G.default, { status: s, isExpanded: t }),
        });
      });
    }
    var Q = t,
      X = n,
      ee = h,
      et = d,
      en = N,
      er = C,
      ei = R,
      es = p;
    class ea {
      static getIsPreviewable = ({ closed: e }) => e;
      static Render(e) {
        let { source: t, blockId: n, remoteInfo: r, closed: i } = e,
          { chatId: s } = (0, er.useChatId)(),
          a = (0, ee.getBlockIframeId)("remote-preview"),
          o = i;
        return (
          (0, X.useEffect)(() => {
            if (!o || !(n || s)) return;
            let e = new AbortController(),
              t = async () => {
                try {
                  await fetch(
                    `/chat/api/chat/remote/preview?${"@remote" === n ? `cid=${s}` : `bid=${n}`}`,
                    { signal: e.signal },
                  );
                } catch (e) {}
              };
            return (
              setTimeout(() => {
                t();
              }, 0),
              () => {
                e.abort();
              }
            );
          }, [o, s, n]),
          (0, Q.jsx)(et.PreviewBlock, {
            ...e,
            meta:
              "@remote" === n ? { ...e.meta } : { ...e.meta, file: "Files" },
            allowFullScreen: !1,
            language: "plaintext",
            blockType: "local",
            remoteInfo: r,
            source: t,
            children:
              o || "@remote" === n
                ? (0, Q.jsx)(
                    en.Iframe,
                    {
                      iframeId: a,
                      isPublished: !1,
                      origin: "",
                      src: `/chat/api/chat/remote/proxy?cid=${s}`,
                    },
                    a,
                  )
                : null,
          })
        );
      }
      static Actions = X.default.memo(({ blockId: e, closed: t }) =>
        "@remote" === e
          ? null
          : (0, Q.jsx)(es.PreviewBlockTitleActions, { blockId: e, closed: t }),
      );
      static BrowserControls = X.default.memo(({ blockId: e }) =>
        (0, Q.jsx)(ei.BrowserFrame, {
          blockId: e,
          iframeId: (0, ee.getBlockIframeId)(e),
        }),
      );
      static MoreMenu = null;
      static ConsoleToggle = null;
    }
    var eo = e.i(301331),
      el = e.i(519738),
      ec = w,
      eu = e.i(696871);
    function ed(e, t) {
      switch (e) {
        case "node.js":
        case "nodejs":
        case "python":
          return r.CodeExecutionBlockLogic;
        case "markdown":
          return l.MarkdownBlockLogic;
        case "html":
          return o.HTMLBlockLogic;
        case "v0":
        case "react":
        case "tsx":
          return i.V0BlockLogic;
        case "vue":
          return c.VueBlockLogic;
        case "svelte":
          return J;
        case "code":
          if ("vue" === t) return c.VueBlockLogic;
          if ("html" === t) return o.HTMLBlockLogic;
          if ("markdown" === t) return l.MarkdownBlockLogic;
          if ("svelte" === t) return J;
          return a.CodeBlockLogic;
        case "local":
          return ea;
        case "code-project":
          if ("svelte" === t) return J;
          return s.NextLiteBlockLogic;
        case "inline-sql":
          return null;
      }
    }
    function eh({
      block: e,
      initialSize: r,
      allowMobileFullscreen: i,
      isAuthor: s,
      title: a,
    }) {
      let { history: o, currentBlockIndex: l } = (0, eo.useBlockHistory)({
          blockId: e?.id || "",
        }),
        { isLatest: c } = (0, el.useBlockVersionInfo)(e?.id),
        u = e ? ed(e.type, e.language) : null,
        { activeTab: d } = (0, ec.useActiveTab)(),
        h = (0, n.useMemo)(() => !c, [c]);
      return e && u
        ? {
            actions: (0, t.jsx)(u.Actions, { blockId: e.id, closed: e.closed }),
            browserControls:
              "code-project" === e.meta.type &&
              u.BrowserControls &&
              "code" !== d
                ? (0, t.jsx)(u.BrowserControls, { blockId: e.id })
                : null,
            moreMenu:
              "code-project" === e.meta.type && u.MoreMenu && !h
                ? (0, t.jsx)(u.MoreMenu, {
                    blockId: e.id,
                    blockLanguage: e.language,
                    blockSource: e.source,
                  })
                : null,
            consoleToggle:
              "code-project" === e.meta.type && u.ConsoleToggle
                ? (0, t.jsx)(u.ConsoleToggle, { blockId: e.id })
                : null,
            content: (0, t.jsx)(u.Render, {
              allowMobileFullscreen: i,
              initialFileTreeSize: eu.DEFAULT_FILE_TREE_SIZE,
              blockId: e.id,
              resultId: e.resultId,
              closed: e.closed,
              initialOutputSize: r,
              messageId: e.messageId,
              language: e.language,
              meta: e.meta,
              source: e.source,
              remoteInfo: e.remoteInfo,
              isAuthor: s,
              hasSourceBeenEdited: e.hasSourceBeenEdited,
              originalCode: l > 0 ? o[l - 1]?.source : void 0,
              latestDeploymentInfo: e.latestDeploymentInfo,
              initialConsoleSize: void 0,
              initialConsoleExpanded: void 0,
              title: a,
              skipBrowserFrame:
                "code-project" === e.meta.type && !!u.BrowserControls,
            }),
          }
        : { action: null, content: null };
    }
    function ep({
      block: e,
      allowMobileFullscreen: t,
      initialSize: n,
      title: r,
    }) {
      let { content: i } = eh({
        block: e,
        initialSize: n,
        allowMobileFullscreen: t,
        location: void 0,
        title: r,
      });
      return i;
    }
  },
  284546,
  (e) => {
    "use strict";
    e.s(["useActiveTab", () => d]);
    var t = e.i(385671),
      n = e.i(449381),
      r = e.i(393799),
      i = e.i(846139),
      s = e.i(74356),
      a = e.i(242759),
      o = e.i(92479),
      l = e.i(910888),
      c = e.i(523968),
      u = e.i(729602);
    function d() {
      let { bl: e, vr: d } = (0, a.useFlags)(),
        h = (0, u.useChatId)(),
        p = (0, c.useIsVMEnabledForChat)(h),
        m = !!d || p,
        { atoms: f } = (0, t.useChatLayout)(),
        { atoms: g } = (0, l.useCurrentChatVM)(),
        x = (0, r.useAtomValue)(f.activeTabIntent),
        v = (0, r.useAtomValue)(g.selectedTab),
        y = m ? v : x,
        { isStreaming: b } = (0, o.useChatLoadingState)(),
        j = (0, n.useActiveBlockState)(),
        w = { type: "none" };
      if (!j)
        return {
          activeTab: "code",
          previewMeta: w,
          canShowPreviewTab: !1,
          isBlockPreviewable: !1,
        };
      let { type: C, language: k } = j,
        S = (0, i.getBlockLogic)(C, k),
        N = d || S?.getIsPreviewable(j),
        E = (0, s.canShowPreview)(N || !1),
        A = (function () {
          return (e && !j?.closed && b) || E;
        })();
      return (N && "boolean" != typeof N
        ? "error" in N
          ? (w = { type: "error", error: N.error })
          : "warning" in N && (w = { type: "warning", warning: N.warning })
        : (w = { type: "none" }),
      A && "preview" === y)
        ? {
            activeTab: "preview",
            previewMeta: w,
            canShowPreviewTab: A,
            isBlockPreviewable: E,
          }
        : {
            activeTab: "code",
            previewMeta: w,
            canShowPreviewTab: A,
            isBlockPreviewable: E,
          };
    }
  },
  768619,
  210045,
  (e) => {
    "use strict";
    e.s(
      [
        "CachedNextLiteIframe",
        () => ee,
        "getIframeSrc",
        () => X,
        "markIframeAsLoaded",
        () => Q,
      ],
      768619,
    );
    var t = e.i(324834),
      n = e.i(576191);
    e.s(["Iframe", () => Z], 210045);
    var r = t,
      i = e.i(7284),
      s = n,
      a = e.i(914483),
      o = e.i(284546);
    e.i(485963);
    class l extends Error {
      constructor(e, t) {
        (super(e), (this.name = "DevalueError"), (this.path = t.join("")));
      }
    }
    function c(e) {
      return Object(e) !== e;
    }
    let u = Object.getOwnPropertyNames(Object.prototype).sort().join("\0");
    function d(e) {
      let t = Object.getPrototypeOf(e);
      return (
        t === Object.prototype ||
        null === t ||
        null === Object.getPrototypeOf(t) ||
        Object.getOwnPropertyNames(t).sort().join("\0") === u
      );
    }
    function h(e) {
      return Object.prototype.toString.call(e).slice(8, -1);
    }
    function p(e) {
      switch (e) {
        case '"':
          return '\\"';
        case "<":
          return "\\u003C";
        case "\\":
          return "\\\\";
        case "\n":
          return "\\n";
        case "\r":
          return "\\r";
        case "	":
          return "\\t";
        case "\b":
          return "\\b";
        case "\f":
          return "\\f";
        case "\u2028":
          return "\\u2028";
        case "\u2029":
          return "\\u2029";
        default:
          return e < " "
            ? `\\u${e.charCodeAt(0).toString(16).padStart(4, "0")}`
            : "";
      }
    }
    function m(e) {
      let t = "",
        n = 0,
        r = e.length;
      for (let i = 0; i < r; i += 1) {
        let r = p(e[i]);
        r && ((t += e.slice(n, i) + r), (n = i + 1));
      }
      return `"${0 === n ? e : t + e.slice(n)}"`;
    }
    function f(e) {
      return Object.getOwnPropertySymbols(e).filter(
        (t) => Object.getOwnPropertyDescriptor(e, t).enumerable,
      );
    }
    let g = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;
    function x(e) {
      return g.test(e) ? "." + e : "[" + JSON.stringify(e) + "]";
    }
    function v(e) {
      let t = new DataView(e),
        n = "";
      for (let r = 0; r < e.byteLength; r++)
        n += String.fromCharCode(t.getUint8(r));
      return w(n);
    }
    function y(e) {
      let t = j(e),
        n = new ArrayBuffer(t.length),
        r = new DataView(n);
      for (let e = 0; e < n.byteLength; e++) r.setUint8(e, t.charCodeAt(e));
      return n;
    }
    let b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    function j(e) {
      e.length % 4 == 0 && (e = e.replace(/==?$/, ""));
      let t = "",
        n = 0,
        r = 0;
      for (let i = 0; i < e.length; i++)
        ((n <<= 6),
          (n |= b.indexOf(e[i])),
          24 === (r += 6) &&
            ((t += String.fromCharCode((0xff0000 & n) >> 16)),
            (t += String.fromCharCode((65280 & n) >> 8)),
            (t += String.fromCharCode(255 & n)),
            (n = r = 0)));
      return (
        12 === r
          ? ((n >>= 4), (t += String.fromCharCode(n)))
          : 18 === r &&
            ((n >>= 2),
            (t += String.fromCharCode((65280 & n) >> 8)),
            (t += String.fromCharCode(255 & n))),
        t
      );
    }
    function w(e) {
      let t = "";
      for (let n = 0; n < e.length; n += 3) {
        let r = [void 0, void 0, void 0, void 0];
        ((r[0] = e.charCodeAt(n) >> 2),
          (r[1] = (3 & e.charCodeAt(n)) << 4),
          e.length > n + 1 &&
            ((r[1] |= e.charCodeAt(n + 1) >> 4),
            (r[2] = (15 & e.charCodeAt(n + 1)) << 2)),
          e.length > n + 2 &&
            ((r[2] |= e.charCodeAt(n + 2) >> 6),
            (r[3] = 63 & e.charCodeAt(n + 2))));
        for (let e = 0; e < r.length; e++)
          void 0 === r[e] ? (t += "=") : (t += b[r[e]]);
      }
      return t;
    }
    let C = -1,
      k = -2,
      S = -3,
      N = -4,
      E = -5,
      A = -6;
    function D(e, t) {
      return I(JSON.parse(e), t);
    }
    function I(e, t) {
      if ("number" == typeof e) return i(e, !0);
      if (!Array.isArray(e) || 0 === e.length) throw Error("Invalid input");
      let n = e,
        r = Array(n.length);
      function i(e, s = !1) {
        if (e === C) return;
        if (e === S) return NaN;
        if (e === N) return 1 / 0;
        if (e === E) return -1 / 0;
        if (e === A) return -0;
        if (s || "number" != typeof e) throw Error("Invalid input");
        if (e in r) return r[e];
        let a = n[e];
        if (a && "object" == typeof a)
          if (Array.isArray(a))
            if ("string" == typeof a[0]) {
              let n = a[0],
                s = t?.[n];
              if (s) return (r[e] = s(i(a[1])));
              switch (n) {
                case "Date":
                  r[e] = new Date(a[1]);
                  break;
                case "Set":
                  let o = new Set();
                  r[e] = o;
                  for (let e = 1; e < a.length; e += 1) o.add(i(a[e]));
                  break;
                case "Map":
                  let l = new Map();
                  r[e] = l;
                  for (let e = 1; e < a.length; e += 2)
                    l.set(i(a[e]), i(a[e + 1]));
                  break;
                case "RegExp":
                  r[e] = new RegExp(a[1], a[2]);
                  break;
                case "Object":
                  r[e] = Object(a[1]);
                  break;
                case "BigInt":
                  r[e] = BigInt(a[1]);
                  break;
                case "null":
                  let c = Object.create(null);
                  r[e] = c;
                  for (let e = 1; e < a.length; e += 2) c[a[e]] = i(a[e + 1]);
                  break;
                case "Int8Array":
                case "Uint8Array":
                case "Uint8ClampedArray":
                case "Int16Array":
                case "Uint16Array":
                case "Int32Array":
                case "Uint32Array":
                case "Float32Array":
                case "Float64Array":
                case "BigInt64Array":
                case "BigUint64Array": {
                  let t = new globalThis[n](i(a[1]));
                  r[e] = void 0 !== a[2] ? t.subarray(a[2], a[3]) : t;
                  break;
                }
                case "ArrayBuffer": {
                  let t = y(a[1]);
                  r[e] = t;
                  break;
                }
                case "Temporal.Duration":
                case "Temporal.Instant":
                case "Temporal.PlainDate":
                case "Temporal.PlainTime":
                case "Temporal.PlainDateTime":
                case "Temporal.PlainMonthDay":
                case "Temporal.PlainYearMonth":
                case "Temporal.ZonedDateTime": {
                  let t = n.slice(9);
                  r[e] = Temporal[t].from(a[1]);
                  break;
                }
                case "URL": {
                  let t = new URL(a[1]);
                  r[e] = t;
                  break;
                }
                case "URLSearchParams": {
                  let t = new URLSearchParams(a[1]);
                  r[e] = t;
                  break;
                }
                default:
                  throw Error(`Unknown type ${n}`);
              }
            } else {
              let t = Array(a.length);
              r[e] = t;
              for (let e = 0; e < a.length; e += 1) {
                let n = a[e];
                n !== k && (t[e] = i(n));
              }
            }
          else {
            let t = {};
            for (let n in ((r[e] = t), a)) {
              if ("__proto__" === n)
                throw Error(
                  "Cannot parse an object with a `__proto__` property",
                );
              let e = a[n];
              t[n] = i(e);
            }
          }
        else r[e] = a;
        return r[e];
      }
      return i(0);
    }
    function M(e, t) {
      let n = [],
        r = new Map(),
        i = [];
      if (t)
        for (let e of Object.getOwnPropertyNames(t))
          i.push({ key: e, fn: t[e] });
      let s = [],
        a = 0;
      function o(e) {
        if (void 0 === e) return C;
        if (Number.isNaN(e)) return S;
        if (e === 1 / 0) return N;
        if (e === -1 / 0) return E;
        if (0 === e && 1 / e < 0) return A;
        if (r.has(e)) return r.get(e);
        let t = a++;
        for (let { key: s, fn: a } of (r.set(e, t), i)) {
          let r = a(e);
          if (r) return ((n[t] = `["${s}",${o(r)}]`), t);
        }
        let u = "";
        if (c(e)) u = T(e);
        else {
          let t = h(e);
          switch (t) {
            case "Number":
            case "String":
            case "Boolean":
              u = `["Object",${T(e)}]`;
              break;
            case "BigInt":
              u = `["BigInt",${e}]`;
              break;
            case "Date":
              let n = !isNaN(e.getDate());
              u = `["Date","${n ? e.toISOString() : ""}"]`;
              break;
            case "URL":
              u = `["URL",${m(e.toString())}]`;
              break;
            case "URLSearchParams":
              u = `["URLSearchParams",${m(e.toString())}]`;
              break;
            case "RegExp":
              let { source: r, flags: i } = e;
              u = i ? `["RegExp",${m(r)},"${i}"]` : `["RegExp",${m(r)}]`;
              break;
            case "Array":
              u = "[";
              for (let t = 0; t < e.length; t += 1)
                (t > 0 && (u += ","),
                  t in e
                    ? (s.push(`[${t}]`), (u += o(e[t])), s.pop())
                    : (u += k));
              u += "]";
              break;
            case "Set":
              for (let t of ((u = '["Set"'), e)) u += `,${o(t)}`;
              u += "]";
              break;
            case "Map":
              for (let [t, n] of ((u = '["Map"'), e))
                (s.push(`.get(${c(t) ? T(t) : "..."})`),
                  (u += `,${o(t)},${o(n)}`),
                  s.pop());
              u += "]";
              break;
            case "Int8Array":
            case "Uint8Array":
            case "Uint8ClampedArray":
            case "Int16Array":
            case "Uint16Array":
            case "Int32Array":
            case "Uint32Array":
            case "Float32Array":
            case "Float64Array":
            case "BigInt64Array":
            case "BigUint64Array": {
              let n = e;
              u = '["' + t + '",' + o(n.buffer);
              let r = e.byteOffset,
                i = r + e.byteLength;
              if (r > 0 || i !== n.buffer.byteLength) {
                let e = /(\d+)/.exec(t)[1] / 8;
                u += `,${r / e},${i / e}`;
              }
              u += "]";
              break;
            }
            case "ArrayBuffer": {
              let t = v(e);
              u = `["ArrayBuffer","${t}"]`;
              break;
            }
            case "Temporal.Duration":
            case "Temporal.Instant":
            case "Temporal.PlainDate":
            case "Temporal.PlainTime":
            case "Temporal.PlainDateTime":
            case "Temporal.PlainMonthDay":
            case "Temporal.PlainYearMonth":
            case "Temporal.ZonedDateTime":
              u = `["${t}",${m(e.toString())}]`;
              break;
            default:
              if (!d(e)) throw new l("Cannot stringify arbitrary non-POJOs", s);
              if (f(e).length > 0)
                throw new l("Cannot stringify POJOs with symbolic keys", s);
              if (null === Object.getPrototypeOf(e)) {
                for (let t in ((u = '["null"'), e))
                  (s.push(x(t)), (u += `,${m(t)},${o(e[t])}`), s.pop());
                u += "]";
              } else {
                u = "{";
                let t = !1;
                for (let n in e)
                  (t && (u += ","),
                    (t = !0),
                    s.push(x(n)),
                    (u += `${m(n)}:${o(e[n])}`),
                    s.pop());
                u += "}";
              }
          }
        }
        return ((n[t] = u), t);
      }
      let u = o(e);
      return u < 0 ? `${u}` : `[${n.join(",")}]`;
    }
    function T(e) {
      let t = typeof e;
      return "string" === t
        ? m(e)
        : e instanceof String
          ? m(e.toString())
          : void 0 === e
            ? C.toString()
            : 0 === e && 1 / e < 0
              ? A.toString()
              : "bigint" === t
                ? `["BigInt","${e}"]`
                : String(e);
    }
    let L = new Map(),
      P = new Map();
    function R(e, t) {
      return M(e, {
        F: (e) => {
          if ("function" == typeof e) {
            if (!L.has(e)) {
              let t = L.size.toString();
              (L.set(e, t),
                P.set(t, e),
                L.size > 5e4 &&
                  console.warn(
                    "Function reference store is getting large, it is not recommended to send anonymous and inline functions through the channel as they cannot be cached.",
                  ));
            }
            return L.get(e);
          }
        },
        P: (e) => {
          if (e && "object" == typeof e && "function" == typeof e.then)
            return (t.has(e) || t.set(e, t.size.toString()), t.get(e));
        },
      });
    }
    function F(e, t, n) {
      return D(e, {
        F: (e) =>
          n
            ? async function (...t) {
                return n({ $$type: `bidc-fn:${e}`, args: t });
              }
            : null,
        P: (e) => {
          let n, r;
          if (t.has(e)) return t.get(e).promise;
          let i = new Promise((e, t) => {
            ((n = e), (r = t));
          });
          return (t.set(e, { resolve: n, reject: r, promise: i }), i);
        },
      });
    }
    async function* _(e) {
      let t = new Map(),
        n = new Map(),
        r = new Set(),
        i = R(e, n);
      for (let [e, r] of (yield `r:${i}
`,
      n.entries()))
        t.set(r, e);
      for (; t.size > 0; ) {
        let e = Array.from(t.entries()).map(async ([e, t]) => {
            try {
              let n = await t;
              return { promiseId: e, status: "fulfilled", value: n };
            } catch (t) {
              return { promiseId: e, status: "rejected", reason: t };
            }
          }),
          i = await Promise.race(e);
        if (
          (t.delete(i.promiseId), r.add(i.promiseId), "fulfilled" === i.status)
        ) {
          let e = R(i.value, n);
          for (let [s, a] of (yield `p${i.promiseId}:${e}
`,
          n.entries()))
            t.has(a) || r.has(a) || t.set(a, s);
        } else {
          let e =
            i.reason instanceof Error ? i.reason.message : String(i.reason);
          yield `e${i.promiseId}:${R(e, n)}
`;
        }
      }
    }
    async function O(e, t) {
      let n,
        r = new Map(),
        i = e[Symbol.asyncIterator](),
        s = await i.next();
      if (s.done) throw Error("Stream ended without any chunks");
      let a = s.value;
      if (!a.startsWith("r"))
        throw Error("First chunk must start with 'r' (return data)");
      let o = a.indexOf(":");
      if (-1 === o) throw Error("Invalid first chunk format - missing colon");
      return (
        (n = F(a.slice(o + 1), r, t?.send)),
        (async () => {
          try {
            let e = await i.next();
            for (; !e.done; ) {
              let n = e.value;
              if (n.startsWith("p")) {
                let e = n.indexOf(":"),
                  i = n.slice(1, e),
                  s = F(n.slice(e + 1), r, t?.send),
                  a = r.get(i);
                a && a.resolve(s);
              } else if (n.startsWith("e")) {
                let e = n.indexOf(":"),
                  i = n.slice(1, e),
                  s = F(n.slice(e + 1), r, t?.send),
                  a = r.get(i);
                a && a.reject(Error(s));
              }
              e = await i.next();
            }
          } catch (e) {
            for (let t of r.values()) t.reject(e);
          }
        })(),
        n
      );
    }
    let B = new WeakMap();
    function V(e, t) {
      let n;
      (void 0 === t && "string" == typeof e
        ? ((t = e), (n = void 0))
        : "object" == typeof e && (n = e),
        (t = "bidc_" + (t ?? "default")));
      let r = n || self,
        i = [];
      function s(e) {
        i.push(e);
      }
      function a() {
        let e = !1,
          s = null,
          a = new Promise((e) => {
            s = e;
          });
        function o(e, t) {
          if (n)
            "self" in n && n.self === n
              ? n.postMessage(e, "*", [t])
              : n.postMessage(e, [t]);
          else if ("undefined" == typeof window && "undefined" != typeof self)
            self.postMessage(e, [t]);
          else if (
            "undefined" != typeof window &&
            window.parent &&
            window.parent !== window
          )
            window.parent.postMessage(e, "*", [t]);
          else
            throw Error("No target provided and no global context available");
        }
        let l = new MessageChannel(),
          c = { type: "bidc-connect", channelId: t, timestamp: Date.now() },
          u = { type: "bidc-confirm", channelId: t };
        function d(n) {
          let a = n.ports[0];
          if (!a) return;
          let o = n.data;
          o?.channelId !== t ||
            (o.type === c.type &&
              c.timestamp <= o.timestamp &&
              (a.postMessage(u),
              e
                ? (B.set(r, Promise.resolve(a)), i.forEach((e) => e(a)))
                : (s(a), (e = !0))));
        }
        function h(n) {
          n.data?.type === u.type &&
            n.data.channelId === t &&
            (s(l.port1), (e = !0), l.port1.removeEventListener("message", h));
        }
        return (
          n && "undefined" != typeof Worker && n instanceof Worker
            ? n.addEventListener("message", d)
            : "undefined" != typeof window
              ? window.addEventListener("message", d)
              : "undefined" != typeof self &&
                self.addEventListener("message", d),
          l.port1.addEventListener("message", h),
          l.port1.start(),
          o(c, l.port2),
          a
        );
      }
      function o() {
        return (B.has(r) || B.set(r, a()), B.get(r));
      }
      let l = new Map(),
        c = async function (e) {
          let t,
            n = await o(),
            r =
              Date.now().toString(36) +
              Math.random().toString(36).substring(2, 5);
          for await (let t of _(e)) {
            let e = `${r}@${t}`;
            n.postMessage(e);
          }
          let i = new Promise((e) => {
            t = e;
          });
          return (l.set(r, [t, i]), i);
        },
        u = new Map(),
        d = !1,
        h = [],
        p = null,
        m = async function (e) {
          (await o(), d || (p = e));
        };
      return (
        o().then((e) => {
          if (d) return;
          let t = async (e) => {
            let t = e.data;
            if ("string" != typeof t) return;
            let r = t.indexOf("@");
            if (-1 === r)
              return void console.error(
                "Invalid chunk format - missing @ delimiter:",
                t,
              );
            let i = t.slice(0, r),
              s = t.slice(r + 1);
            if (s.startsWith("r:"))
              (u?.set(i, { pendingChunks: [], chunkResolver: null }),
                (async () => {
                  try {
                    let e = await O(
                      (async function* () {
                        for (yield s; ; ) {
                          let e = await n(i);
                          if (null === e) break;
                          yield e;
                        }
                        u?.delete(i);
                      })(),
                      { send: c },
                    );
                    if (
                      "object" == typeof e &&
                      null !== e &&
                      "string" == typeof e.$$type &&
                      e.$$type.startsWith("bidc-fn:")
                    ) {
                      let t = e.$$type.slice(8),
                        n = P.get(t);
                      if (n) {
                        let t = n(...e.args);
                        c({ $$type: `bidc-res:${i}`, response: t });
                      } else
                        console.error(
                          `Function reference not found for ID: ${t}`,
                        );
                    } else if (
                      "object" == typeof e &&
                      null !== e &&
                      "string" == typeof e.$$type &&
                      e.$$type.startsWith("bidc-res:")
                    ) {
                      let t = e.$$type.slice(9),
                        n = e.response,
                        r = l.get(t);
                      r && (r[0](n), l.delete(t));
                    } else {
                      if (!p)
                        throw Error(
                          "Global receive callback is not set. This is a bug in BIDC.",
                        );
                      try {
                        let t = p(e);
                        c({ $$type: `bidc-res:${i}`, response: t });
                      } catch (e) {
                        console.error(e);
                      }
                    }
                  } catch (e) {
                    (console.error(`Error decoding stream for ID ${i}:`, e),
                      u?.delete(i));
                  }
                })());
            else {
              let e = u?.get(i);
              e
                ? (e.pendingChunks.push(s), e.chunkResolver?.())
                : console.warn(`No active decoding found for ID: ${i}`);
            }
          };
          async function n(e) {
            let t = u?.get(e);
            return t
              ? t.pendingChunks.length > 0
                ? t.pendingChunks.shift()
                : (await new Promise((e) => {
                      t.chunkResolver = e;
                    }),
                    0 === t.pendingChunks.length)
                  ? null
                  : t.pendingChunks.shift()
              : null;
          }
          (e.addEventListener("message", t),
            h.push(() => {
              e.removeEventListener("message", t);
            }),
            e.start(),
            s((n) => {
              d ||
                (e.removeEventListener("message", t),
                (e = n).addEventListener("message", t),
                e.start());
            }));
        }),
        {
          send: c,
          receive: m,
          cleanup: () => {
            ((d = !0), h.forEach((e) => e()), (h.length = 0));
          },
        }
      );
    }
    function z() {
      let e = null,
        t = {};
      return {
        registerTarget: function (n) {
          (e && e.cleanup(),
            (n || (window.parent && window.parent !== window)) &&
              (e = n ? V(n) : V()).receive(async (e) => {
                let n;
                if (!e || "object" != typeof e || !("method" in e))
                  return void console.warn("Received invalid message:", e);
                let { method: r } = e,
                  i = t[r];
                if (!i) return;
                let s = await i(...e.args);
                return (void 0 !== s && (n = s), n);
              }));
        },
        sendToTarget: function (t) {
          return e
            ? e.send(t)
            : void console.warn("No iframe registered for communication.");
        },
        registerMessage: function (e, n) {
          t[e] = n;
        },
        hasChannel: function () {
          return !!e;
        },
      };
    }
    let H = null;
    function $() {
      return (H || (H = z()), H);
    }
    function U(e) {
      if (e && e.contentWindow) return $().registerTarget(e.contentWindow);
    }
    let G =
        "allow-scripts allow-same-origin allow-forms allow-downloads allow-popups-to-escape-sandbox allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-presentation",
      W =
        "fullscreen; camera; microphone; gyroscope; accelerometer; geolocation; clipboard-write; autoplay",
      q = null;
    function Z({
      iframeId: e,
      iframeRef: t,
      isPublished: n,
      src: l,
      origin: c,
      onLoad: u,
      dataAppSrc: d,
    }) {
      let h = c + l,
        p = (0, a.useSet)(e);
      (0, s.useEffect)(() => {
        p(h);
      }, [p, h]);
      let { activeTab: m } = (0, o.useActiveTab)();
      return (0, r.jsx)("iframe", {
        allow: W,
        title: "v0 block",
        className: (0, i.default)(
          "h-full w-full select-none",
          "preview" !== m && (n ? "hidden" : "sr-only invisible"),
        ),
        "data-origin": c,
        "data-v0": !0,
        "data-app-src": d,
        id: e,
        loading: "eager",
        onLoad: u,
        ref: (e) => {
          (t && (t.current = e), U(e));
        },
        sandbox: G,
        src: h,
        fetchPriority: "high",
      });
    }
    !(function (e, t) {
      $().registerMessage(e, t);
    })("getLightningCSSWASMArrayBuffer", function () {
      return (
        q ||
        (q = fetch("/chat-static/lightningcss_node.wasm").then((e) =>
          e.arrayBuffer(),
        ))
      );
    });
    var K = e.i(142219),
      Y = e.i(487581);
    let J = new WeakSet();
    function Q(e) {
      J.add(e);
    }
    function X(e) {
      return e.getAttribute("data-app-src") || e.src;
    }
    function ee({
      chatId: e,
      blockId: r,
      iframeId: i,
      origin: s,
      src: a,
      ...o
    }) {
      let [l, c] = (0, n.useState)(s),
        [u, d] = (0, n.useState)(a),
        h = (0, n.useRef)(e);
      (0, n.useEffect)(() => {
        if (e !== h.current) (c(s), d(a), (h.current = e));
        else {
          let e = document.getElementById(i);
          e?.contentWindow && J.has(e)
            ? (K.store.set(Y.previewBlockCollectedErrorsVersion, r),
              K.store.set(Y.previewBlockPreloadingSuccessCallback, null),
              K.store.set(Y.previewBlockDisplayedErrorsVersion, r),
              e.contentWindow.postMessage(
                {
                  type: "switch_client",
                  id: r,
                  fallbackUrl: s + a,
                  __v0_remote__: !0,
                },
                "*",
              ))
            : (c(s), d(a));
        }
      }, [e, r, s, a]);
      let p = s + a;
      return (0, t.jsx)(Z, {
        iframeId: i,
        origin: l,
        src: u,
        dataAppSrc: p,
        ...o,
      });
    }
  },
  583965,
  (e) => {
    "use strict";
    e.s(["useBrowserFrame", () => u, "useRefreshBrowserFrame", () => c]);
    var t = e.i(204575),
      n = e.i(449381),
      r = e.i(576191),
      i = e.i(295224),
      s = e.i(577247),
      a = e.i(768619),
      o = e.i(914483);
    function l({ blockId: e }) {
      let [t, n] = (0, o.useGetSet)(`browser-frame:canGoBack:${e}`, !1),
        [r, s] = (0, o.useGetSet)(`browser-frame:canGoForward:${e}`, !1),
        [a, l] = (0, o.useGetSet)("browser-frame:href", ""),
        [c, u] = (0, o.useGetSet)(`browser-frame:iframe:${e}`, null),
        [d, h] = (0, o.useGetSet)(`browser-frame:loading:${e}`, !0),
        [p, m] = (0, o.useGetSet)(`browser-frame:temporalHref:${e}`, null),
        f = (0, i.useLatest)(a);
      return {
        canGoBack: t,
        setCanGoBack: n,
        canGoForward: r,
        setCanGoForward: s,
        href: a,
        setHref: l,
        iframe: c,
        setIframe: u,
        latestHref: f,
        loading: d,
        setLoading: h,
        temporalHref: p,
        setTemporalHref: m,
      };
    }
    function c(e) {
      let t = (0, n.useActiveBlockId)(),
        {
          iframe: i,
          latestHref: s,
          setLoading: o,
          setTemporalHref: c,
        } = l({ blockId: e || t || "unknown" }),
        u = (0, r.useCallback)(
          (e) => {
            let t = new URL((0, a.getIframeSrc)(e));
            if (s.current) {
              let e = new URL(s.current);
              ((t.pathname = e.pathname),
                (t.search = e.search),
                (t.hash = e.hash));
            }
            return t.toString();
          },
          [i],
        );
      return {
        refresh: (0, r.useCallback)(() => {
          i &&
            (i.contentDocument
              ? i.contentDocument.location.reload()
              : s.current
                ? (i.src = u(i))
                : (i.src = (0, a.getIframeSrc)(i)),
            c(null),
            o(!0));
        }, [i, s, u, o, c]),
        getFullIframeHref: u,
      };
    }
    function u(e) {
      let i = (0, n.useActiveBlockId)(),
        a = e || i,
        {
          canGoBack: o,
          setCanGoBack: u,
          canGoForward: d,
          setCanGoForward: h,
          href: p,
          setHref: m,
          iframe: f,
          setIframe: g,
          latestHref: x,
          loading: v,
          setLoading: y,
          temporalHref: b,
          setTemporalHref: j,
        } = l({ blockId: a || "unknown" }),
        { refresh: w, getFullIframeHref: C } = c(a);
      return (
        (0, s.useMessage)(
          (e) => {
            let { data: t } = e;
            if (t && "object" == typeof t && t.__v0_remote__)
              switch (t.type) {
                case "location_change":
                  (m(e.data.href),
                    u("boolean" == typeof e.data.canGoBack && e.data.canGoBack),
                    h(
                      "boolean" == typeof e.data.canGoForward &&
                        e.data.canGoForward,
                    ));
                  break;
                case "app_navigation_state":
                  y(e.data.loading);
              }
          },
          [m, u, h, y],
        ),
        (0, r.useEffect)(() => {
          let e;
          if (!a) return;
          let n = (0, t.getBlockIframeId)(a),
            r = document.getElementById(n);
          return (
            r ||
              (e = new MutationObserver(() => {
                let t = document.getElementById(n);
                t && (e?.disconnect(), g(t));
              })).observe(document.body, { childList: !0, subtree: !0 }),
            g(r),
            () => {
              try {
                e?.disconnect();
              } catch {}
            }
          );
        }, [a, m, g]),
        {
          canGoBack: o,
          setCanGoBack: u,
          canGoForward: d,
          setCanGoForward: h,
          href: p,
          setHref: m,
          iframe: f,
          latestHref: x,
          loading: v,
          setLoading: y,
          refresh: w,
          temporalHref: b,
          setTemporalHref: j,
          getFullIframeHref: C,
        }
      );
    }
  },
  643312,
  418270,
  (e) => {
    "use strict";
    e.s(
      [
        "useIntegrationIcons",
        () => I,
        "useIntegrationsApi",
        () => D,
        "useRefetchIntegrationsApi",
        () => A,
        "useSyncLegacyIntegrationHooks",
        () => T,
      ],
      643312,
    );
    var t = e.i(418625),
      n = e.i(15916),
      r = e.i(227423),
      i = e.i(576191),
      s = e.i(209819),
      a = e.i(183673),
      o = e.i(667660),
      l = e.i(92479);
    e.s(
      ["useActiveBlockWizardRefetch", () => w, "useWizardApi", () => j],
      418270,
    );
    var c = t,
      u = n,
      d = r,
      h = e.i(250557),
      p = e.i(636282),
      m = i,
      f = e.i(449381),
      g = o,
      x = e.i(583965),
      v = e.i(985005),
      y = e.i(393799);
    function b({ blockId: e, closed: t }) {
      let { legacyScriptIdentifiers: n } = (0, h.useLegacyAppliedScripts)(),
        { activeScope: r } = (0, g.useActiveScope)();
      return (0, m.useMemo)(() => {
        if (!e || !t) return null;
        let i = new URLSearchParams({ blockId: e });
        return (
          n.length && i.set("legacyScriptIdentifiers", n.join(",")),
          { url: `/chat/api/wizard?${i.toString()}`, activeScope: r }
        );
      }, [e, n, r, t]);
    }
    function j({ blockId: e, closed: t }) {
      let { actions: n } = (0, p.useWizardAtoms)(),
        r = b({ blockId: e, closed: t }),
        { syncLegacyIntegrationHooks: i } = T(),
        s = A(),
        { refresh: a } = (0, x.useRefreshBrowserFrame)(e),
        { atoms: o, actions: l } = (0, v.useConnectIntegrationAtoms)(),
        u = (0, y.useAtomValue)(o.pendingIntegrationCheck),
        h = (0, m.useCallback)(
          (e) => {
            if ("success" !== e.status) return;
            let t = e.connectedIntegrations.length,
              n =
                "success" === e.setEnvironmentVariables.status &&
                e.setEnvironmentVariables.keys.length;
            (t || n) && s();
          },
          [s],
        ),
        {
          data: f,
          isValidating: g,
          mutate: j,
          error: w,
        } = (0, c.default)(
          r,
          async ({ url: e }) => {
            let t = await fetch(e);
            if (!t.ok)
              throw (
                l.maybeClearPendingIntegration(null),
                Error("Failed to fetch integration wizard data")
              );
            let n = await t.json();
            return (
              l.maybeClearPendingIntegration(
                "success" === n.status ? n.data.integrations : null,
              ),
              n
            );
          },
          { revalidateOnReconnect: !!u, revalidateOnFocus: !!u },
        ),
        {
          trigger: k,
          isMutating: S,
          data: N,
        } = (0, d.default)("/chat/api/wizard", async (t, { arg: r }) => {
          try {
            (n.setLatestUpdateArgs(r),
              r.setBannerDismissed &&
                f?.status === "success" &&
                (await j(
                  {
                    status: "success",
                    data: {
                      ...f.data,
                      bannerDismissed: r.setBannerDismissed.dismissed,
                    },
                  },
                  { revalidate: !1 },
                )));
            let s = await fetch(t, {
              method: "POST",
              body: JSON.stringify(Object.assign({ blockId: e }, r)),
            });
            if (!s.ok) throw Error("Failed to update data");
            let a = await s.json();
            (i(a), h(a));
            let o = void 0 !== r.setBannerDismissed;
            return (
              "success" !== a.status ||
                f?.status !== "success" ||
                o ||
                j({
                  status: "success",
                  data: C({ data: f.data, mutationResult: a }),
                }),
              a
            );
          } catch (e) {
            return { status: "error", message: "An unexpected error occurred" };
          } finally {
            ((r.connectIntegrations && r.connectIntegrations.length > 0) ||
              (r.setEnvironmentVariables &&
                r.setEnvironmentVariables.length > 0) ||
              (r.runScripts && r.runScripts.length > 0) ||
              (r.runActions && r.runActions.length > 0)) &&
              (j(), a());
          }
        });
      return f
        ? "error" === f.status || w
          ? { status: "error" }
          : {
              status: "ready",
              update: k,
              refetch: j,
              data: f.data,
              isUpdating: S,
              isValidating: g,
              updateResult: N,
            }
        : { status: "loading" };
    }
    function w() {
      let e = b({
          blockId: (0, f.useActiveBlockId)() || "",
          closed: (0, f.useActiveBlockClosed)(),
        }),
        { mutate: t } = (0, u.useSWRConfig)();
      return (0, m.useCallback)(() => {
        e && t(e);
      }, [t, e]);
    }
    function C({ data: e, mutationResult: t }) {
      let n = { ...e };
      if (t.connectedIntegrations.length) {
        let r = new Set(
          t.connectedIntegrations
            .filter((e) => "success" === e.status && !e.isPending)
            .map((e) => e.integrationName),
        );
        n.integrations = e.integrations.filter((e) => !r.has(e.name));
      }
      if (
        "success" === t.setEnvironmentVariables.status &&
        t.setEnvironmentVariables.keys.length
      ) {
        let r = new Set(t.setEnvironmentVariables.keys);
        n.environmentVariables = e.environmentVariables.filter(
          (e) => !r.has(e.key),
        );
      }
      if (t.ranScripts.length) {
        let r = new Set(
          t.ranScripts
            .filter((e) => "success" === e.status)
            .map((e) => e.fileName),
        );
        n.scripts = e.scripts.filter((e) => !r.has(e.fileName));
      }
      if (t.ranActions.length) {
        let r = new Set(
          t.ranActions
            .filter((e) => "success" === e.status)
            .map((e) => e.action),
        );
        n.actions = e.actions.filter((e) => !r.has(e.action));
      }
      return n;
    }
    var k = x,
      S = v,
      N = y;
    function E() {
      let e,
        { chatId: t } = (0, l.useChatId)(),
        { projectId: n } = (0, a.useProjectId)(),
        { activeScope: r } = (0, o.useActiveScope)(),
        { isChatCreated: s } = (0, l.useIsChatCreated)();
      e = t && s ? { chatId: t } : n ? { v0ProjectId: n } : null;
      let c = t ? "chat" : "project";
      return (0, i.useMemo)(() => {
        if (!e) return { queryKey: null, args: e, resource: c };
        let t = new URLSearchParams();
        return (
          e.chatId && t.set("chatId", e.chatId),
          e.v0ProjectId && t.set("v0ProjectId", e.v0ProjectId),
          {
            queryKey: {
              url: `/chat/api/integrations?${t.toString()}`,
              activeScope: r,
            },
            args: e,
            resource: c,
            chatId: e.chatId,
          }
        );
      }, [e, r, c]);
    }
    function A() {
      let { queryKey: e } = E(),
        { mutate: t } = (0, n.useSWRConfig)();
      return (0, i.useCallback)(() => {
        e && t(e);
      }, [t, e]);
    }
    function D() {
      let [e, n] = (0, i.useState)(null),
        { syncLegacyIntegrationHooks: s } = T(),
        a = w(),
        { refresh: o } = (0, k.useRefreshBrowserFrame)(),
        { atoms: l, actions: c } = (0, S.useConnectIntegrationAtoms)(),
        u = (0, N.useAtomValue)(l.pendingIntegrationCheck),
        { queryKey: d, args: h, resource: p, chatId: m } = E(),
        {
          data: f,
          mutate: g,
          error: x,
          isValidating: v,
        } = (0, t.default)(
          d,
          async ({ url: e }) => {
            let t = await fetch(e);
            if (!t.ok)
              throw (
                c.maybeClearPendingIntegration(null),
                Error(`Failed to fetch integrations data for ${p}`)
              );
            let n = await t.json();
            return (
              c.maybeClearPendingIntegration(
                "success" === n.status ? n.data : null,
              ),
              n
            );
          },
          { revalidateOnReconnect: !!u, revalidateOnFocus: !!u },
        ),
        {
          trigger: y,
          isMutating: b,
          data: j,
        } = (0, r.default)("/chat/api/integrations", async (e, { arg: t }) => {
          if (!h)
            return { status: "error", message: `Missing ${p} identifier` };
          n(t);
          try {
            let n = await fetch(e, {
              method: "POST",
              body: JSON.stringify({ ...t, ...h }),
            });
            if (!n.ok) throw Error("Failed to update integrations data");
            let r = await n.json();
            return (
              s(r),
              a(),
              "success" === r.status &&
                f?.status === "success" &&
                g(M({ data: f, mutationResult: r, updateData: t }), !1),
              r
            );
          } catch (e) {
            return { status: "error", message: "An unexpected error occurred" };
          } finally {
            (g(), m && o());
          }
        }),
        C = (0, i.useMemo)(
          () =>
            b ? new Set(e?.connectIntegrations?.map((e) => e.name)) : new Set(),
          [b, e],
        ),
        A = (0, i.useMemo)(
          () =>
            j && "success" === j.status
              ? new Set(
                  j.connectedIntegrations
                    .filter((e) => "success" === e.status && !e.isPending)
                    .map((e) => e.integrationName),
                )
              : new Set(),
          [j],
        ),
        D = (0, i.useMemo)(
          () =>
            f && "success" === f.status
              ? new Set(f.data.filter((e) => e.isConnected).map((e) => e.name))
              : new Set(),
          [f],
        );
      return f
        ? "error" === f.status || x
          ? {
              status: "error",
              forbidden: "error" === f.status && f.forbidden,
              message: "error" === f.status ? f.message : x?.message,
              refetch: g,
            }
          : {
              status: "ready",
              update: y,
              refetch: g,
              computed: {
                connectingIntegrationNames: C,
                allConnectedIntegrationNames: D,
                optimisticConnectedIntegrationNames: A,
              },
              data: f.data,
              envVars: f.envVars,
              v0ProjectId: f.v0ProjectId,
              vercelProjectId: f.vercelProjectId,
              vercelProject: f.vercelProject,
              mcps: f.mcps || [],
              isUpdating: b,
              isValidating: v,
              updateResult: j,
              latestUpdateArgs: e,
            }
        : { status: "loading", refetch: g };
    }
    function I() {
      let { data: e, status: t } = D();
      return {
        integrationIcons: (0, i.useMemo)(() => {
          if (!e) return new Map();
          let t = new Map();
          for (let n of e) t.set(n.name, n.lightIconUrl);
          return t;
        }, [e]),
        isLoadingIcons: "loading" === t,
      };
    }
    function M({ data: e, mutationResult: t, updateData: n }) {
      let r = { ...e },
        i = [...e.envVars];
      if (
        "success" === t.deletedEnvironmentVariables.status &&
        t.deletedEnvironmentVariables.ids.length > 0
      ) {
        let e = new Set(t.deletedEnvironmentVariables.ids);
        i = i.filter((t) => !e.has(t.id));
      }
      if (
        "success" === t.updatedEnvironmentVariables.status &&
        t.updatedEnvironmentVariables.ids.length > 0 &&
        n.updateEnvironmentVariables
      ) {
        let e = new Map(n.updateEnvironmentVariables.map((e) => [e.id, e]));
        i = i.map((t) => {
          let n = e.get(t.id);
          return n
            ? {
                ...t,
                key: n.key ?? t.key,
                value: n.value ?? t.value,
                target: n.targets ? n.targets : t.target,
                comment: n.comment ?? t.comment,
                updatedAt: Date.now(),
              }
            : t;
        });
      }
      if (
        "success" === t.setEnvironmentVariables.status &&
        t.setEnvironmentVariables.keys.length > 0 &&
        n.setEnvironmentVariables
      ) {
        let e = Date.now();
        i = [
          ...i,
          ...n.setEnvironmentVariables.map((t, n) => ({
            id: `temp-${t.key}-${e}-${n}`,
            key: t.key,
            value: t.value,
            target: t.targets || ["production", "preview", "development"],
            createdAt: e,
            updatedAt: e,
            type: "encrypted",
            comment: t.comment,
          })),
        ];
      }
      return ((r.envVars = i), r);
    }
    function T() {
      let { project: e, setMetadata: t } = (0, s.useChatMetadata)(),
        n = A();
      return {
        syncLegacyIntegrationHooks: (0, i.useCallback)(
          (r) => {
            if ("success" === r.status) {
              if (r.createdV0Project)
                return void t({ project: r.createdV0Project });
              (e &&
                r.createdVercelProjectId &&
                t({
                  vercelProjectId: r.createdVercelProjectId,
                  project: { ...e },
                }),
                n());
            }
          },
          [e, n, t],
        ),
      };
    }
  },
  87467,
  625500,
  (e) => {
    "use strict";
    e.s(["CodeBlockActions", () => I], 87467);
    var t = e.i(324834),
      n = e.i(504066),
      r = e.i(899488),
      i = e.i(592885),
      s = e.i(77276),
      a = e.i(741006),
      o = e.i(886195),
      l = e.i(192670),
      c = e.i(236699),
      u = e.i(379686),
      d = e.i(297239),
      h = e.i(739126),
      p = e.i(696871),
      m = e.i(938807),
      f = e.i(707827),
      g = e.i(53223);
    e.s(["useExecuteScripts", () => D], 625500);
    var x = e.i(5550),
      v = e.i(393753);
    e.i(563948);
    var y = e.i(407562),
      b = e.i(393799),
      j = e.i(643312),
      w = e.i(449381),
      C = e.i(729602),
      k = e.i(513529),
      S = e.i(554912),
      N = e.i(576191),
      E = e.i(553969),
      A = e.i(387040);
    function D() {
      let e = (0, C.useChatId)(),
        { vercelProjectId: t } = (0, j.useIntegrationsApi)(),
        n = (0, w.useActiveBlockId)(),
        [r, i] = (0, b.useAtom)(k.consoleVisibilityAtom),
        { appendCodeOutputEvents: s } = (0, S.useConsoleNextLite)(n || ""),
        [a, o] = (0, N.useState)(!1),
        { setBlockOutput: l } = (0, E.useBlockOutputs)();
      return {
        handleExecuteScript: (0, N.useCallback)(
          async (r) => {
            let c, u, d;
            if (a)
              return {
                result: (0, A.err)({
                  message: "Execution already in progress",
                }),
                errorMessage: "Execution already in progress",
              };
            if (!e)
              return {
                result: (0, A.err)({ message: "No chat ID provided" }),
                errorMessage: "No chat ID provided",
              };
            try {
              (o(!0),
                (c = await (0, x.executeScriptAction)({
                  ...r,
                  chatId: e,
                  vercelProjectId: t || null,
                })));
            } catch (e) {
              return (
                y.toast.error(
                  "An error occurred while executing the script. Please try again",
                ),
                {
                  result: (0, A.err)({ message: "Execution failed" }),
                  errorMessage: "Execution failed",
                }
              );
            } finally {
              o(!1);
            }
            "source" === r.type && (u = r.fileName);
            let h = null;
            return (
              c.ok
                ? (d = (0, v.transformExecutionOutputToEvents)(
                    c.value,
                    n || "",
                    u || "",
                  ))
                : c.error.executionResult
                  ? ((d = (0, v.transformExecutionOutputToEvents)(
                      c.error.executionResult,
                      n || "",
                      u || "",
                    )),
                    (h = c.error.executionResult.stderr[0].join("\n")))
                  : ((d = [
                      {
                        type: "output",
                        blockId: n || "",
                        fileName: u || "",
                        content: c.error.message,
                        timestamp: new Date().toISOString(),
                        method: "stderr",
                      },
                    ]),
                    (h = c.error.message)),
              n
                ? (s(d), l(n, c), i(!0))
                : h &&
                  y.toast.error("Failed to execute script", { description: h }),
              { result: c, errorMessage: h }
            );
          },
          [n, s, e, a, l, i, t],
        ),
        isExecuting: a,
        setIsExecuting: o,
      };
    }
    function I({
      fileName: e = "file.txt",
      value: x,
      caller: v,
      additionalHeaderActions: y,
      allowCopyCode: b,
      allowDownloadCode: j,
      closeHandler: w,
      isTabbed: C,
      allowClose: k,
      blockId: S,
      originalCode: N,
      closed: E,
      transactionMeta: A,
      showRenderedPreview: I,
      onTogglePreview: M,
    }) {
      let { isCopied: T, copyToClipboard: L } = (0, n.useCopyToClipboard)({
          timeout: 2e3,
        }),
        {
          setShowDiffs: P,
          hasDiffs: R,
          showDiffs: F,
        } = (0, h.useDiffView)({
          blockId: S,
          fileName: e,
          originalCode: N,
          newCode: x,
        }),
        _ = (0, d.useT)(),
        O = null !== (0, u.getPreviewableFileType)(e),
        B = ["sql", "js", "py"].some((t) => e.endsWith(`.${t}`)),
        { isExecuting: V, handleExecuteScript: z } = D(),
        H = async () => {
          await z({
            type: "source",
            source: x,
            fileName: e,
            meta: { transaction: A },
          });
        },
        $ = () => {
          let t = e.split("/").pop(),
            n = window.prompt("Enter file name", t);
          if (!n) return;
          let r = new Blob([x], { type: "text/plain" }),
            i = URL.createObjectURL(r),
            s = document.createElement("a");
          switch (
            ((s.download = n),
            (s.href = i),
            (s.style.display = "none"),
            document.body.appendChild(s),
            s.click(),
            document.body.removeChild(s),
            URL.revokeObjectURL(i),
            v)
          ) {
            case "executable":
              return (0, g.track)("DownloadCodeExecutable", { code: x });
            case "v0":
              return (0, g.track)("DownloadCodeV0", { code: x });
          }
        },
        U = async () => {
          if (!T)
            switch ((await L(x), v)) {
              case "inline":
                return (0, g.track)("CopyCodeInline", { code: x });
              case "executable":
                return (0, g.track)("CopyCodeExecutable", { code: x });
              case "v0":
                return (0, g.track)("CopyCodeV0", { code: x });
            }
        };
      return (0, t.jsxs)(t.Fragment, {
        children: [
          y && y.length > 0 ? y : null,
          O &&
            M &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": I ? "Show source" : "Show preview",
              active: I,
              onClick: M,
              tooltip: {
                side: "bottom",
                content: I ? "Show source" : "Show preview",
              },
              children: (0, t.jsx)("span", {
                "aria-hidden": !0,
                children: I ? (0, t.jsx)(o.Code, {}) : (0, t.jsx)(a.Eye, {}),
              }),
            }),
          B &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": "Run Code",
              onClick: H,
              disabled: V,
              tooltip: {
                side: "bottom",
                content: V ? "Running..." : "Run Code",
              },
              children: (0, t.jsx)("span", {
                "aria-hidden": !0,
                children: V
                  ? (0, t.jsx)(f.Spinner, { size: 16 })
                  : (0, t.jsx)(s.PlayCircle, {}),
              }),
            }),
          E &&
            R &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": _(
                F ? "codeBlockActions.hideDiff" : "codeBlockActions.showDiff",
              ),
              active: F,
              onClick: () => {
                (P(!F),
                  setTimeout(() => {
                    let e = document.getElementById(
                      p.FIRST_HIGHLIGHTED_LINE_ID,
                    );
                    e && e.scrollIntoView({ behavior: "instant" });
                  }, 0));
              },
              outline: !C,
              tooltip: C
                ? {
                    side: "bottom",
                    content: _(
                      F
                        ? "codeBlockActions.hideDiff"
                        : "codeBlockActions.showDiff",
                    ),
                  }
                : _(
                    F
                      ? "codeBlockActions.hideDiff"
                      : "codeBlockActions.showDiff",
                  ),
              children: (0, t.jsx)(m.DiffIcon, {
                size: "inline" === v ? 14 : void 0,
              }),
            }),
          b &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": _("codeBlockActions.copy"),
              onClick: U,
              outline: !C,
              tooltip: C
                ? { side: "bottom", content: _("codeBlockActions.copy") }
                : _("codeBlockActions.copy"),
              children: (0, t.jsx)(c.CopyCheck, {
                isCopied: T,
                size: "inline" === v ? 14 : void 0,
              }),
            }),
          j &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": _("codeBlockActions.download"),
              onClick: $,
              outline: !C,
              tooltip: C
                ? { side: "bottom", content: _("codeBlockActions.download") }
                : _("codeBlockActions.download"),
              children: (0, t.jsx)("span", {
                "aria-hidden": !0,
                children: (0, t.jsx)(l.AnimatedDownload, {}),
              }),
            }),
          k &&
            w &&
            (0, t.jsx)(r.CodeBlockButton, {
              "aria-label": _("codeBlockActions.close"),
              onClick: w,
              outline: !C,
              tooltip: C
                ? { side: "bottom", content: _("codeBlockActions.close") }
                : _("codeBlockActions.close"),
              children: (0, t.jsx)("span", {
                "aria-hidden": !0,
                children: (0, t.jsx)(i.Cross, {}),
              }),
            }),
        ],
      });
    }
  },
  794807,
  (e) => {
    "use strict";
    function t(e, t, n, r, i, s, a) {
      try {
        var o = e[s](a),
          l = o.value;
      } catch (e) {
        return void n(e);
      }
      o.done ? t(l) : Promise.resolve(l).then(r, i);
    }
    function n(e) {
      return function () {
        var n = this,
          r = arguments;
        return new Promise(function (i, s) {
          var a = e.apply(n, r);
          function o(e) {
            t(a, i, s, o, l, "next", e);
          }
          function l(e) {
            t(a, i, s, o, l, "throw", e);
          }
          o(void 0);
        });
      };
    }
    e.s(["default", () => n]);
  },
  975294,
  (e) => {
    "use strict";
    function t() {
      return (t = Object.assign.bind()).apply(null, arguments);
    }
    e.s(["default", () => t]);
  },
  81097,
  (e, t, n) => {
    function r(e) {
      return (
        (t.exports = r =
          "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
            ? function (e) {
                return typeof e;
              }
            : function (e) {
                return e &&
                  "function" == typeof Symbol &&
                  e.constructor === Symbol &&
                  e !== Symbol.prototype
                  ? "symbol"
                  : typeof e;
              }),
        (t.exports.__esModule = !0),
        (t.exports.default = t.exports),
        r(e)
      );
    }
    ((t.exports = r),
      (t.exports.__esModule = !0),
      (t.exports.default = t.exports));
  },
  684599,
  (e, t, n) => {
    var r = e.r(81097).default;
    function i() {
      "use strict";
      ((t.exports = i =
        function () {
          return n;
        }),
        (t.exports.__esModule = !0),
        (t.exports.default = t.exports));
      var e,
        n = {},
        s = Object.prototype,
        a = s.hasOwnProperty,
        o =
          Object.defineProperty ||
          function (e, t, n) {
            e[t] = n.value;
          },
        l = "function" == typeof Symbol ? Symbol : {},
        c = l.iterator || "@@iterator",
        u = l.asyncIterator || "@@asyncIterator",
        d = l.toStringTag || "@@toStringTag";
      function h(e, t, n) {
        return (
          Object.defineProperty(e, t, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          }),
          e[t]
        );
      }
      try {
        h({}, "");
      } catch (e) {
        h = function (e, t, n) {
          return (e[t] = n);
        };
      }
      function p(e, t, n, r) {
        var i = Object.create(
          (t && t.prototype instanceof b ? t : b).prototype,
        );
        return (o(i, "_invoke", { value: D(e, n, new L(r || [])) }), i);
      }
      function m(e, t, n) {
        try {
          return { type: "normal", arg: e.call(t, n) };
        } catch (e) {
          return { type: "throw", arg: e };
        }
      }
      n.wrap = p;
      var f = "suspendedStart",
        g = "suspendedYield",
        x = "executing",
        v = "completed",
        y = {};
      function b() {}
      function j() {}
      function w() {}
      var C = {};
      h(C, c, function () {
        return this;
      });
      var k = Object.getPrototypeOf,
        S = k && k(k(P([])));
      S && S !== s && a.call(S, c) && (C = S);
      var N = (w.prototype = b.prototype = Object.create(C));
      function E(e) {
        ["next", "throw", "return"].forEach(function (t) {
          h(e, t, function (e) {
            return this._invoke(t, e);
          });
        });
      }
      function A(e, t) {
        var n;
        function i(n, s, o, l) {
          var c = m(e[n], e, s);
          if ("throw" !== c.type) {
            var u = c.arg,
              d = u.value;
            return d && "object" == r(d) && a.call(d, "__await")
              ? t.resolve(d.__await).then(
                  function (e) {
                    i("next", e, o, l);
                  },
                  function (e) {
                    i("throw", e, o, l);
                  },
                )
              : t.resolve(d).then(
                  function (e) {
                    ((u.value = e), o(u));
                  },
                  function (e) {
                    return i("throw", e, o, l);
                  },
                );
          }
          l(c.arg);
        }
        o(this, "_invoke", {
          value: function (e, r) {
            function s() {
              return new t(function (t, n) {
                i(e, r, t, n);
              });
            }
            return (n = n ? n.then(s, s) : s());
          },
        });
      }
      function D(t, n, r) {
        var i = f;
        return function (s, a) {
          if (i === x) throw Error("Generator is already running");
          if (i === v) {
            if ("throw" === s) throw a;
            return { value: e, done: !0 };
          }
          for (r.method = s, r.arg = a; ; ) {
            var o = r.delegate;
            if (o) {
              var l = I(o, r);
              if (l) {
                if (l === y) continue;
                return l;
              }
            }
            if ("next" === r.method) r.sent = r._sent = r.arg;
            else if ("throw" === r.method) {
              if (i === f) throw ((i = v), r.arg);
              r.dispatchException(r.arg);
            } else "return" === r.method && r.abrupt("return", r.arg);
            i = x;
            var c = m(t, n, r);
            if ("normal" === c.type) {
              if (((i = r.done ? v : g), c.arg === y)) continue;
              return { value: c.arg, done: r.done };
            }
            "throw" === c.type &&
              ((i = v), (r.method = "throw"), (r.arg = c.arg));
          }
        };
      }
      function I(t, n) {
        var r = n.method,
          i = t.iterator[r];
        if (i === e)
          return (
            (n.delegate = null),
            ("throw" === r &&
              t.iterator.return &&
              ((n.method = "return"),
              (n.arg = e),
              I(t, n),
              "throw" === n.method)) ||
              ("return" !== r &&
                ((n.method = "throw"),
                (n.arg = TypeError(
                  "The iterator does not provide a '" + r + "' method",
                )))),
            y
          );
        var s = m(i, t.iterator, n.arg);
        if ("throw" === s.type)
          return (
            (n.method = "throw"),
            (n.arg = s.arg),
            (n.delegate = null),
            y
          );
        var a = s.arg;
        return a
          ? a.done
            ? ((n[t.resultName] = a.value),
              (n.next = t.nextLoc),
              "return" !== n.method && ((n.method = "next"), (n.arg = e)),
              (n.delegate = null),
              y)
            : a
          : ((n.method = "throw"),
            (n.arg = TypeError("iterator result is not an object")),
            (n.delegate = null),
            y);
      }
      function M(e) {
        var t = { tryLoc: e[0] };
        (1 in e && (t.catchLoc = e[1]),
          2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
          this.tryEntries.push(t));
      }
      function T(e) {
        var t = e.completion || {};
        ((t.type = "normal"), delete t.arg, (e.completion = t));
      }
      function L(e) {
        ((this.tryEntries = [{ tryLoc: "root" }]),
          e.forEach(M, this),
          this.reset(!0));
      }
      function P(t) {
        if (t || "" === t) {
          var n = t[c];
          if (n) return n.call(t);
          if ("function" == typeof t.next) return t;
          if (!isNaN(t.length)) {
            var i = -1,
              s = function n() {
                for (; ++i < t.length; )
                  if (a.call(t, i)) return ((n.value = t[i]), (n.done = !1), n);
                return ((n.value = e), (n.done = !0), n);
              };
            return (s.next = s);
          }
        }
        throw TypeError(r(t) + " is not iterable");
      }
      return (
        (j.prototype = w),
        o(N, "constructor", { value: w, configurable: !0 }),
        o(w, "constructor", { value: j, configurable: !0 }),
        (j.displayName = h(w, d, "GeneratorFunction")),
        (n.isGeneratorFunction = function (e) {
          var t = "function" == typeof e && e.constructor;
          return (
            !!t &&
            (t === j || "GeneratorFunction" === (t.displayName || t.name))
          );
        }),
        (n.mark = function (e) {
          return (
            Object.setPrototypeOf
              ? Object.setPrototypeOf(e, w)
              : ((e.__proto__ = w), h(e, d, "GeneratorFunction")),
            (e.prototype = Object.create(N)),
            e
          );
        }),
        (n.awrap = function (e) {
          return { __await: e };
        }),
        E(A.prototype),
        h(A.prototype, u, function () {
          return this;
        }),
        (n.AsyncIterator = A),
        (n.async = function (e, t, r, i, s) {
          void 0 === s && (s = Promise);
          var a = new A(p(e, t, r, i), s);
          return n.isGeneratorFunction(t)
            ? a
            : a.next().then(function (e) {
                return e.done ? e.value : a.next();
              });
        }),
        E(N),
        h(N, d, "Generator"),
        h(N, c, function () {
          return this;
        }),
        h(N, "toString", function () {
          return "[object Generator]";
        }),
        (n.keys = function (e) {
          var t = Object(e),
            n = [];
          for (var r in t) n.push(r);
          return (
            n.reverse(),
            function e() {
              for (; n.length; ) {
                var r = n.pop();
                if (r in t) return ((e.value = r), (e.done = !1), e);
              }
              return ((e.done = !0), e);
            }
          );
        }),
        (n.values = P),
        (L.prototype = {
          constructor: L,
          reset: function (t) {
            if (
              ((this.prev = 0),
              (this.next = 0),
              (this.sent = this._sent = e),
              (this.done = !1),
              (this.delegate = null),
              (this.method = "next"),
              (this.arg = e),
              this.tryEntries.forEach(T),
              !t)
            )
              for (var n in this)
                "t" === n.charAt(0) &&
                  a.call(this, n) &&
                  !isNaN(+n.slice(1)) &&
                  (this[n] = e);
          },
          stop: function () {
            this.done = !0;
            var e = this.tryEntries[0].completion;
            if ("throw" === e.type) throw e.arg;
            return this.rval;
          },
          dispatchException: function (t) {
            if (this.done) throw t;
            var n = this;
            function r(r, i) {
              return (
                (o.type = "throw"),
                (o.arg = t),
                (n.next = r),
                i && ((n.method = "next"), (n.arg = e)),
                !!i
              );
            }
            for (var i = this.tryEntries.length - 1; i >= 0; --i) {
              var s = this.tryEntries[i],
                o = s.completion;
              if ("root" === s.tryLoc) return r("end");
              if (s.tryLoc <= this.prev) {
                var l = a.call(s, "catchLoc"),
                  c = a.call(s, "finallyLoc");
                if (l && c) {
                  if (this.prev < s.catchLoc) return r(s.catchLoc, !0);
                  if (this.prev < s.finallyLoc) return r(s.finallyLoc);
                } else if (l) {
                  if (this.prev < s.catchLoc) return r(s.catchLoc, !0);
                } else {
                  if (!c) throw Error("try statement without catch or finally");
                  if (this.prev < s.finallyLoc) return r(s.finallyLoc);
                }
              }
            }
          },
          abrupt: function (e, t) {
            for (var n = this.tryEntries.length - 1; n >= 0; --n) {
              var r = this.tryEntries[n];
              if (
                r.tryLoc <= this.prev &&
                a.call(r, "finallyLoc") &&
                this.prev < r.finallyLoc
              ) {
                var i = r;
                break;
              }
            }
            i &&
              ("break" === e || "continue" === e) &&
              i.tryLoc <= t &&
              t <= i.finallyLoc &&
              (i = null);
            var s = i ? i.completion : {};
            return (
              (s.type = e),
              (s.arg = t),
              i
                ? ((this.method = "next"), (this.next = i.finallyLoc), y)
                : this.complete(s)
            );
          },
          complete: function (e, t) {
            if ("throw" === e.type) throw e.arg;
            return (
              "break" === e.type || "continue" === e.type
                ? (this.next = e.arg)
                : "return" === e.type
                  ? ((this.rval = this.arg = e.arg),
                    (this.method = "return"),
                    (this.next = "end"))
                  : "normal" === e.type && t && (this.next = t),
              y
            );
          },
          finish: function (e) {
            for (var t = this.tryEntries.length - 1; t >= 0; --t) {
              var n = this.tryEntries[t];
              if (n.finallyLoc === e)
                return (this.complete(n.completion, n.afterLoc), T(n), y);
            }
          },
          catch: function (e) {
            for (var t = this.tryEntries.length - 1; t >= 0; --t) {
              var n = this.tryEntries[t];
              if (n.tryLoc === e) {
                var r = n.completion;
                if ("throw" === r.type) {
                  var i = r.arg;
                  T(n);
                }
                return i;
              }
            }
            throw Error("illegal catch attempt");
          },
          delegateYield: function (t, n, r) {
            return (
              (this.delegate = { iterator: P(t), resultName: n, nextLoc: r }),
              "next" === this.method && (this.arg = e),
              y
            );
          },
        }),
        n
      );
    }
    ((t.exports = i),
      (t.exports.__esModule = !0),
      (t.exports.default = t.exports));
  },
  228852,
  (e, t, n) => {
    var r = e.r(684599)();
    t.exports = r;
    try {
      regeneratorRuntime = r;
    } catch (e) {
      "object" == typeof globalThis
        ? (globalThis.regeneratorRuntime = r)
        : Function("r", "regeneratorRuntime = r")(r);
    }
  },
  741430,
  (e) => {
    "use strict";
    var t = e.i(794807),
      n = e.i(975294);
    function r(e, t) {
      if (!(e instanceof t))
        throw TypeError("Cannot call a class as a function");
    }
    function i(e) {
      return (i =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (e) {
              return typeof e;
            }
          : function (e) {
              return e &&
                "function" == typeof Symbol &&
                e.constructor === Symbol &&
                e !== Symbol.prototype
                ? "symbol"
                : typeof e;
            })(e);
    }
    function s(e, t) {
      if ("object" != i(e) || !e) return e;
      var n = e[Symbol.toPrimitive];
      if (void 0 !== n) {
        var r = n.call(e, t || "default");
        if ("object" != i(r)) return r;
        throw TypeError("@@toPrimitive must return a primitive value.");
      }
      return ("string" === t ? String : Number)(e);
    }
    function a(e) {
      var t = s(e, "string");
      return "symbol" == i(t) ? t : t + "";
    }
    function o(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        ((r.enumerable = r.enumerable || !1),
          (r.configurable = !0),
          "value" in r && (r.writable = !0),
          Object.defineProperty(e, a(r.key), r));
      }
    }
    function l(e, t, n) {
      return (
        t && o(e.prototype, t),
        n && o(e, n),
        Object.defineProperty(e, "prototype", { writable: !1 }),
        e
      );
    }
    function c(e) {
      if (void 0 === e)
        throw ReferenceError(
          "this hasn't been initialised - super() hasn't been called",
        );
      return e;
    }
    function u(e, t) {
      if (t && ("object" == i(t) || "function" == typeof t)) return t;
      if (void 0 !== t)
        throw TypeError(
          "Derived constructors may only return object or undefined",
        );
      return c(e);
    }
    function d(e) {
      return (d = Object.setPrototypeOf
        ? Object.getPrototypeOf.bind()
        : function (e) {
            return e.__proto__ || Object.getPrototypeOf(e);
          })(e);
    }
    function h(e, t) {
      return (h = Object.setPrototypeOf
        ? Object.setPrototypeOf.bind()
        : function (e, t) {
            return ((e.__proto__ = t), e);
          })(e, t);
    }
    function p(e, t) {
      if ("function" != typeof t && null !== t)
        throw TypeError("Super expression must either be null or a function");
      ((e.prototype = Object.create(t && t.prototype, {
        constructor: { value: e, writable: !0, configurable: !0 },
      })),
        Object.defineProperty(e, "prototype", { writable: !1 }),
        t && h(e, t));
    }
    function m(e, t, n) {
      return (
        (t = a(t)) in e
          ? Object.defineProperty(e, t, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (e[t] = n),
        e
      );
    }
    var f = e.i(228852),
      g = e.i(576191);
    function x(e, t) {
      if (null == e) return {};
      var n = {};
      for (var r in e)
        if ({}.hasOwnProperty.call(e, r)) {
          if (t.indexOf(r) >= 0) continue;
          n[r] = e[r];
        }
      return n;
    }
    function v(e, t) {
      if (null == e) return {};
      var n,
        r,
        i = x(e, t);
      if (Object.getOwnPropertySymbols) {
        var s = Object.getOwnPropertySymbols(e);
        for (r = 0; r < s.length; r++)
          ((n = s[r]),
            t.indexOf(n) >= 0 ||
              ({}.propertyIsEnumerable.call(e, n) && (i[n] = e[n])));
      }
      return i;
    }
    function y(e, t) {
      (null == t || t > e.length) && (t = e.length);
      for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
      return r;
    }
    function b(e) {
      if (Array.isArray(e)) return y(e);
    }
    function j(e) {
      if (
        ("undefined" != typeof Symbol && null != e[Symbol.iterator]) ||
        null != e["@@iterator"]
      )
        return Array.from(e);
    }
    function w(e, t) {
      if (e) {
        if ("string" == typeof e) return y(e, t);
        var n = {}.toString.call(e).slice(8, -1);
        return (
          "Object" === n && e.constructor && (n = e.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(e)
            : "Arguments" === n ||
                /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
              ? y(e, t)
              : void 0
        );
      }
    }
    function C() {
      throw TypeError(
        "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.",
      );
    }
    function k(e) {
      return b(e) || j(e) || w(e) || C();
    }
    var S = g,
      N = n,
      E = g;
    function A(e, t) {
      var n = Object.keys(e);
      if (Object.getOwnPropertySymbols) {
        var r = Object.getOwnPropertySymbols(e);
        (t &&
          (r = r.filter(function (t) {
            return Object.getOwnPropertyDescriptor(e, t).enumerable;
          })),
          n.push.apply(n, r));
      }
      return n;
    }
    function D(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = null != arguments[t] ? arguments[t] : {};
        t % 2
          ? A(Object(n), !0).forEach(function (t) {
              m(e, t, n[t]);
            })
          : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n))
            : A(Object(n)).forEach(function (t) {
                Object.defineProperty(
                  e,
                  t,
                  Object.getOwnPropertyDescriptor(n, t),
                );
              });
      }
      return e;
    }
    function I(e) {
      var t = e.length;
      return 0 === t || 1 === t
        ? e
        : 2 === t
          ? [
              e[0],
              e[1],
              "".concat(e[0], ".").concat(e[1]),
              "".concat(e[1], ".").concat(e[0]),
            ]
          : 3 === t
            ? [
                e[0],
                e[1],
                e[2],
                "".concat(e[0], ".").concat(e[1]),
                "".concat(e[0], ".").concat(e[2]),
                "".concat(e[1], ".").concat(e[0]),
                "".concat(e[1], ".").concat(e[2]),
                "".concat(e[2], ".").concat(e[0]),
                "".concat(e[2], ".").concat(e[1]),
                "".concat(e[0], ".").concat(e[1], ".").concat(e[2]),
                "".concat(e[0], ".").concat(e[2], ".").concat(e[1]),
                "".concat(e[1], ".").concat(e[0], ".").concat(e[2]),
                "".concat(e[1], ".").concat(e[2], ".").concat(e[0]),
                "".concat(e[2], ".").concat(e[0], ".").concat(e[1]),
                "".concat(e[2], ".").concat(e[1], ".").concat(e[0]),
              ]
            : t >= 4
              ? [
                  e[0],
                  e[1],
                  e[2],
                  e[3],
                  "".concat(e[0], ".").concat(e[1]),
                  "".concat(e[0], ".").concat(e[2]),
                  "".concat(e[0], ".").concat(e[3]),
                  "".concat(e[1], ".").concat(e[0]),
                  "".concat(e[1], ".").concat(e[2]),
                  "".concat(e[1], ".").concat(e[3]),
                  "".concat(e[2], ".").concat(e[0]),
                  "".concat(e[2], ".").concat(e[1]),
                  "".concat(e[2], ".").concat(e[3]),
                  "".concat(e[3], ".").concat(e[0]),
                  "".concat(e[3], ".").concat(e[1]),
                  "".concat(e[3], ".").concat(e[2]),
                  "".concat(e[0], ".").concat(e[1], ".").concat(e[2]),
                  "".concat(e[0], ".").concat(e[1], ".").concat(e[3]),
                  "".concat(e[0], ".").concat(e[2], ".").concat(e[1]),
                  "".concat(e[0], ".").concat(e[2], ".").concat(e[3]),
                  "".concat(e[0], ".").concat(e[3], ".").concat(e[1]),
                  "".concat(e[0], ".").concat(e[3], ".").concat(e[2]),
                  "".concat(e[1], ".").concat(e[0], ".").concat(e[2]),
                  "".concat(e[1], ".").concat(e[0], ".").concat(e[3]),
                  "".concat(e[1], ".").concat(e[2], ".").concat(e[0]),
                  "".concat(e[1], ".").concat(e[2], ".").concat(e[3]),
                  "".concat(e[1], ".").concat(e[3], ".").concat(e[0]),
                  "".concat(e[1], ".").concat(e[3], ".").concat(e[2]),
                  "".concat(e[2], ".").concat(e[0], ".").concat(e[1]),
                  "".concat(e[2], ".").concat(e[0], ".").concat(e[3]),
                  "".concat(e[2], ".").concat(e[1], ".").concat(e[0]),
                  "".concat(e[2], ".").concat(e[1], ".").concat(e[3]),
                  "".concat(e[2], ".").concat(e[3], ".").concat(e[0]),
                  "".concat(e[2], ".").concat(e[3], ".").concat(e[1]),
                  "".concat(e[3], ".").concat(e[0], ".").concat(e[1]),
                  "".concat(e[3], ".").concat(e[0], ".").concat(e[2]),
                  "".concat(e[3], ".").concat(e[1], ".").concat(e[0]),
                  "".concat(e[3], ".").concat(e[1], ".").concat(e[2]),
                  "".concat(e[3], ".").concat(e[2], ".").concat(e[0]),
                  "".concat(e[3], ".").concat(e[2], ".").concat(e[1]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[1], ".")
                    .concat(e[2], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[1], ".")
                    .concat(e[3], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[2], ".")
                    .concat(e[1], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[2], ".")
                    .concat(e[3], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[3], ".")
                    .concat(e[1], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[0], ".")
                    .concat(e[3], ".")
                    .concat(e[2], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[0], ".")
                    .concat(e[2], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[0], ".")
                    .concat(e[3], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[2], ".")
                    .concat(e[0], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[2], ".")
                    .concat(e[3], ".")
                    .concat(e[0]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[3], ".")
                    .concat(e[0], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[1], ".")
                    .concat(e[3], ".")
                    .concat(e[2], ".")
                    .concat(e[0]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[0], ".")
                    .concat(e[1], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[0], ".")
                    .concat(e[3], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[1], ".")
                    .concat(e[0], ".")
                    .concat(e[3]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[1], ".")
                    .concat(e[3], ".")
                    .concat(e[0]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[3], ".")
                    .concat(e[0], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[2], ".")
                    .concat(e[3], ".")
                    .concat(e[1], ".")
                    .concat(e[0]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[0], ".")
                    .concat(e[1], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[0], ".")
                    .concat(e[2], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[1], ".")
                    .concat(e[0], ".")
                    .concat(e[2]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[1], ".")
                    .concat(e[2], ".")
                    .concat(e[0]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[2], ".")
                    .concat(e[0], ".")
                    .concat(e[1]),
                  ""
                    .concat(e[3], ".")
                    .concat(e[2], ".")
                    .concat(e[1], ".")
                    .concat(e[0]),
                ]
              : void 0;
    }
    var M = {};
    function T(e) {
      if (0 === e.length || 1 === e.length) return e;
      var t = e.join(".");
      return (M[t] || (M[t] = I(e)), M[t]);
    }
    function L(e) {
      var t =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
        n = arguments.length > 2 ? arguments[2] : void 0;
      return T(
        e.filter(function (e) {
          return "token" !== e;
        }),
      ).reduce(function (e, t) {
        return D(D({}, e), n[t]);
      }, t);
    }
    function P(e) {
      return e.join(" ");
    }
    function R(e, t) {
      var n = 0;
      return function (r) {
        return (
          (n += 1),
          r.map(function (r, i) {
            return F({
              node: r,
              stylesheet: e,
              useInlineStyles: t,
              key: "code-segment-".concat(n, "-").concat(i),
            });
          })
        );
      };
    }
    function F(e) {
      var t = e.node,
        n = e.stylesheet,
        r = e.style,
        i = void 0 === r ? {} : r,
        s = e.useInlineStyles,
        a = e.key,
        o = t.properties,
        l = t.type,
        c = t.tagName,
        u = t.value;
      if ("text" === l) return u;
      if (c) {
        var d,
          h = R(n, s);
        if (s) {
          var p = Object.keys(n).reduce(function (e, t) {
              return (
                t.split(".").forEach(function (t) {
                  e.includes(t) || e.push(t);
                }),
                e
              );
            }, []),
            m = o.className && o.className.includes("token") ? ["token"] : [],
            f =
              o.className &&
              m.concat(
                o.className.filter(function (e) {
                  return !p.includes(e);
                }),
              );
          d = D(
            D({}, o),
            {},
            {
              className: P(f) || void 0,
              style: L(o.className, Object.assign({}, o.style, i), n),
            },
          );
        } else d = D(D({}, o), {}, { className: P(o.className) });
        var g = h(t.children);
        return E.default.createElement(c, (0, N.default)({ key: a }, d), g);
      }
    }
    let _ = function (e, t) {
      return -1 !== e.listLanguages().indexOf(t);
    };
    var O = [
      "language",
      "children",
      "style",
      "customStyle",
      "codeTagProps",
      "useInlineStyles",
      "showLineNumbers",
      "showInlineLineNumbers",
      "startingLineNumber",
      "lineNumberContainerStyle",
      "lineNumberStyle",
      "wrapLines",
      "wrapLongLines",
      "lineProps",
      "renderer",
      "PreTag",
      "CodeTag",
      "code",
      "astGenerator",
    ];
    function B(e, t) {
      var n = Object.keys(e);
      if (Object.getOwnPropertySymbols) {
        var r = Object.getOwnPropertySymbols(e);
        (t &&
          (r = r.filter(function (t) {
            return Object.getOwnPropertyDescriptor(e, t).enumerable;
          })),
          n.push.apply(n, r));
      }
      return n;
    }
    function V(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = null != arguments[t] ? arguments[t] : {};
        t % 2
          ? B(Object(n), !0).forEach(function (t) {
              m(e, t, n[t]);
            })
          : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n))
            : B(Object(n)).forEach(function (t) {
                Object.defineProperty(
                  e,
                  t,
                  Object.getOwnPropertyDescriptor(n, t),
                );
              });
      }
      return e;
    }
    var z = /\n/g;
    function H(e) {
      return e.match(z);
    }
    function $(e) {
      var t = e.lines,
        n = e.startingLineNumber,
        r = e.style;
      return t.map(function (e, t) {
        var i = t + n;
        return S.default.createElement(
          "span",
          {
            key: "line-".concat(t),
            className: "react-syntax-highlighter-line-number",
            style: "function" == typeof r ? r(i) : r,
          },
          "".concat(i, "\n"),
        );
      });
    }
    function U(e) {
      var t = e.codeString,
        n = e.codeStyle,
        r = e.containerStyle,
        i = void 0 === r ? { float: "left", paddingRight: "10px" } : r,
        s = e.numberStyle,
        a = void 0 === s ? {} : s,
        o = e.startingLineNumber;
      return S.default.createElement(
        "code",
        { style: Object.assign({}, n, i) },
        $({
          lines: t.replace(/\n$/, "").split("\n"),
          style: a,
          startingLineNumber: o,
        }),
      );
    }
    function G(e) {
      return "".concat(e.toString().length, ".25em");
    }
    function W(e, t) {
      return {
        type: "element",
        tagName: "span",
        properties: {
          key: "line-number--".concat(e),
          className: [
            "comment",
            "linenumber",
            "react-syntax-highlighter-line-number",
          ],
          style: t,
        },
        children: [{ type: "text", value: e }],
      };
    }
    function q(e, t, n) {
      var r = {
          display: "inline-block",
          minWidth: G(n),
          paddingRight: "1em",
          textAlign: "right",
          userSelect: "none",
        },
        i = "function" == typeof e ? e(t) : e;
      return V(V({}, r), i);
    }
    function Z(e) {
      var t = e.children,
        n = e.lineNumber,
        r = e.lineNumberStyle,
        i = e.largestLineNumber,
        s = e.showInlineLineNumbers,
        a = e.lineProps,
        o = void 0 === a ? {} : a,
        l = e.className,
        c = void 0 === l ? [] : l,
        u = e.showLineNumbers,
        d = e.wrapLongLines,
        h = e.wrapLines,
        p = void 0 !== h && h ? V({}, "function" == typeof o ? o(n) : o) : {};
      if (
        ((p.className = p.className
          ? [].concat(k(p.className.trim().split(/\s+/)), k(c))
          : c),
        n && s)
      ) {
        var m = q(r, n, i);
        t.unshift(W(n, m));
      }
      return (
        d & u && (p.style = V(V({}, p.style), {}, { display: "flex" })),
        { type: "element", tagName: "span", properties: p, children: t }
      );
    }
    function K(e) {
      for (
        var t =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
          n =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [],
          r = 0;
        r < e.length;
        r++
      ) {
        var i = e[r];
        if ("text" === i.type)
          n.push(Z({ children: [i], className: k(new Set(t)) }));
        else if (i.children) {
          var s = t.concat(i.properties.className);
          K(i.children, s).forEach(function (e) {
            return n.push(e);
          });
        }
      }
      return n;
    }
    function Y(e, t, n, r, i, s, a, o, l) {
      var c,
        u = K(e.value),
        d = [],
        h = -1,
        p = 0;
      function m(e, s) {
        var c =
          arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [];
        return Z({
          children: e,
          lineNumber: s,
          lineNumberStyle: o,
          largestLineNumber: a,
          showInlineLineNumbers: i,
          lineProps: n,
          className: c,
          showLineNumbers: r,
          wrapLongLines: l,
          wrapLines: t,
        });
      }
      function f(e, t) {
        if (r && t && i) {
          var n = q(o, t, a);
          e.unshift(W(t, n));
        }
        return e;
      }
      function g(e, n) {
        var r =
          arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [];
        return t || r.length > 0 ? m(e, n, r) : f(e, n);
      }
      for (
        var x = function () {
          var e = u[p],
            t = e.children[0].value;
          if (H(t)) {
            var n = t.split("\n");
            (n.forEach(function (t, i) {
              var a = r && d.length + s,
                o = { type: "text", value: "".concat(t, "\n") };
              if (0 === i) {
                var l = g(
                  u
                    .slice(h + 1, p)
                    .concat(
                      Z({ children: [o], className: e.properties.className }),
                    ),
                  a,
                );
                d.push(l);
              } else if (i === n.length - 1) {
                var c = u[p + 1] && u[p + 1].children && u[p + 1].children[0],
                  m = { type: "text", value: "".concat(t) };
                if (c) {
                  var f = Z({
                    children: [m],
                    className: e.properties.className,
                  });
                  u.splice(p + 1, 0, f);
                } else {
                  var x = g([m], a, e.properties.className);
                  d.push(x);
                }
              } else {
                var v = g([o], a, e.properties.className);
                d.push(v);
              }
            }),
              (h = p));
          }
          p++;
        };
        p < u.length;

      )
        x();
      if (h !== u.length - 1) {
        var v = u.slice(h + 1, u.length);
        if (v && v.length) {
          var y = g(v, r && d.length + s);
          d.push(y);
        }
      }
      return t ? d : (c = []).concat.apply(c, d);
    }
    function J(e) {
      var t = e.rows,
        n = e.stylesheet,
        r = e.useInlineStyles;
      return t.map(function (e, t) {
        return F({
          node: e,
          stylesheet: n,
          useInlineStyles: r,
          key: "code-segement".concat(t),
        });
      });
    }
    function Q(e) {
      return e && void 0 !== e.highlightAuto;
    }
    function X(e) {
      var t = e.astGenerator,
        n = e.language,
        r = e.code,
        i = e.defaultCodeValue;
      if (Q(t)) {
        var s = _(t, n);
        return "text" === n
          ? { value: i, language: "text" }
          : s
            ? t.highlight(n, r)
            : t.highlightAuto(r);
      }
      try {
        return n && "text" !== n ? { value: t.highlight(r, n) } : { value: i };
      } catch (e) {
        return { value: i };
      }
    }
    function ee(e, t) {
      return function (n) {
        var r = n.language,
          i = n.children,
          s = n.style,
          a = void 0 === s ? t : s,
          o = n.customStyle,
          l = void 0 === o ? {} : o,
          c = n.codeTagProps,
          u =
            void 0 === c
              ? {
                  className: r ? "language-".concat(r) : void 0,
                  style: V(
                    V({}, a['code[class*="language-"]']),
                    a['code[class*="language-'.concat(r, '"]')],
                  ),
                }
              : c,
          d = n.useInlineStyles,
          h = void 0 === d || d,
          p = n.showLineNumbers,
          m = void 0 !== p && p,
          f = n.showInlineLineNumbers,
          g = void 0 === f || f,
          x = n.startingLineNumber,
          y = void 0 === x ? 1 : x,
          b = n.lineNumberContainerStyle,
          j = n.lineNumberStyle,
          w = void 0 === j ? {} : j,
          C = n.wrapLines,
          k = n.wrapLongLines,
          N = void 0 !== k && k,
          E = n.lineProps,
          A = void 0 === E ? {} : E,
          D = n.renderer,
          I = n.PreTag,
          M = void 0 === I ? "pre" : I,
          T = n.CodeTag,
          L = void 0 === T ? "code" : T,
          P = n.code,
          R = void 0 === P ? (Array.isArray(i) ? i[0] : i) || "" : P,
          F = n.astGenerator,
          _ = v(n, O);
        F = F || e;
        var B = m
            ? S.default.createElement(U, {
                containerStyle: b,
                codeStyle: u.style || {},
                numberStyle: w,
                startingLineNumber: y,
                codeString: R,
              })
            : null,
          z = a.hljs ||
            a['pre[class*="language-"]'] || { backgroundColor: "#fff" },
          H = Q(F) ? "hljs" : "prismjs",
          $ = h
            ? Object.assign({}, _, { style: Object.assign({}, z, l) })
            : Object.assign({}, _, {
                className: _.className
                  ? "".concat(H, " ").concat(_.className)
                  : H,
                style: Object.assign({}, l),
              });
        if (
          (N
            ? (u.style = V(V({}, u.style), {}, { whiteSpace: "pre-wrap" }))
            : (u.style = V(V({}, u.style), {}, { whiteSpace: "pre" })),
          !F)
        )
          return S.default.createElement(
            M,
            $,
            B,
            S.default.createElement(L, u, R),
          );
        (((void 0 === C && D) || N) && (C = !0), (D = D || J));
        var G = [{ type: "text", value: R }],
          W = X({ astGenerator: F, language: r, code: R, defaultCodeValue: G });
        null === W.language && (W.value = G);
        var q = W.value.length;
        1 === q &&
          "text" === W.value[0].type &&
          (q = W.value[0].value.split("\n").length);
        var Z = q + y,
          K = Y(W, C, A, m, g, y, Z, w, N);
        return S.default.createElement(
          M,
          $,
          S.default.createElement(
            L,
            u,
            !g && B,
            D({ rows: K, stylesheet: a, useInlineStyles: h }),
          ),
        );
      };
    }
    function et(e, t, n) {
      return (
        (t = d(t)),
        u(
          e,
          en()
            ? Reflect.construct(t, n || [], d(e).constructor)
            : t.apply(e, n),
        )
      );
    }
    function en() {
      try {
        var e = !Boolean.prototype.valueOf.call(
          Reflect.construct(Boolean, [], function () {}),
        );
      } catch (e) {}
      return (en = function () {
        return !!e;
      })();
    }
    let er = (function (e) {
      var i,
        s = e.loader,
        a = e.isLanguageRegistered,
        o = e.registerLanguage,
        c = e.languageLoaders,
        u = e.noAsyncLoadingLanguages,
        d = (function (e) {
          function i() {
            return (r(this, i), et(this, i, arguments));
          }
          return (
            p(i, e),
            l(
              i,
              [
                {
                  key: "componentDidUpdate",
                  value: function () {
                    !i.isRegistered(this.props.language) &&
                      c &&
                      this.loadLanguage();
                  },
                },
                {
                  key: "componentDidMount",
                  value: function () {
                    var e = this;
                    (i.astGeneratorPromise || i.loadAstGenerator(),
                      i.astGenerator ||
                        i.astGeneratorPromise.then(function () {
                          e.forceUpdate();
                        }),
                      !i.isRegistered(this.props.language) &&
                        c &&
                        this.loadLanguage());
                  },
                },
                {
                  key: "loadLanguage",
                  value: function () {
                    var e = this,
                      t = this.props.language;
                    "text" !== t &&
                      i
                        .loadLanguage(t)
                        .then(function () {
                          return e.forceUpdate();
                        })
                        .catch(function () {});
                  },
                },
                {
                  key: "normalizeLanguage",
                  value: function (e) {
                    return i.isSupportedLanguage(e) ? e : "text";
                  },
                },
                {
                  key: "render",
                  value: function () {
                    return g.default.createElement(
                      i.highlightInstance,
                      (0, n.default)({}, this.props, {
                        language: this.normalizeLanguage(this.props.language),
                        astGenerator: i.astGenerator,
                      }),
                    );
                  },
                },
              ],
              [
                {
                  key: "preload",
                  value: function () {
                    return i.loadAstGenerator();
                  },
                },
                {
                  key: "loadLanguage",
                  value: (function () {
                    var e = (0, t.default)(
                      f.default.mark(function e(t) {
                        var n;
                        return f.default.wrap(function (e) {
                          for (;;)
                            switch ((e.prev = e.next)) {
                              case 0:
                                if ("function" != typeof (n = c[t])) {
                                  e.next = 5;
                                  break;
                                }
                                return e.abrupt(
                                  "return",
                                  n(i.registerLanguage),
                                );
                              case 5:
                                throw Error(
                                  "Language ".concat(t, " not supported"),
                                );
                              case 6:
                              case "end":
                                return e.stop();
                            }
                        }, e);
                      }),
                    );
                    return function (t) {
                      return e.apply(this, arguments);
                    };
                  })(),
                },
                {
                  key: "isSupportedLanguage",
                  value: function (e) {
                    return i.isRegistered(e) || "function" == typeof c[e];
                  },
                },
                {
                  key: "loadAstGenerator",
                  value: function () {
                    return (
                      (i.astGeneratorPromise = s().then(function (e) {
                        ((i.astGenerator = e),
                          o &&
                            i.languages.forEach(function (t, n) {
                              return o(e, n, t);
                            }));
                      })),
                      i.astGeneratorPromise
                    );
                  },
                },
              ],
            )
          );
        })(g.default.PureComponent);
      return (
        (i = d),
        m(d, "astGenerator", null),
        m(d, "highlightInstance", ee(null, {})),
        m(d, "astGeneratorPromise", null),
        m(d, "languages", new Map()),
        m(
          d,
          "supportedLanguages",
          e.supportedLanguages || Object.keys(c || {}),
        ),
        m(d, "isRegistered", function (e) {
          if (u) return !0;
          if (!o)
            throw Error(
              "Current syntax highlighter doesn't support registration of languages",
            );
          return i.astGenerator ? a(i.astGenerator, e) : i.languages.has(e);
        }),
        m(d, "registerLanguage", function (e, t) {
          if (!o)
            throw Error(
              "Current syntax highlighter doesn't support registration of languages",
            );
          if (i.astGenerator) return o(i.astGenerator, e, t);
          i.languages.set(e, t);
        }),
        d
      );
    })({
      loader: function () {
        return e.A(204569).then(function (e) {
          return e.default || e;
        });
      },
      noAsyncLoadingLanguages: !0,
      supportedLanguages: [
        "abap",
        "abnf",
        "actionscript",
        "ada",
        "agda",
        "al",
        "antlr4",
        "apacheconf",
        "apex",
        "apl",
        "applescript",
        "aql",
        "arduino",
        "arff",
        "asciidoc",
        "asm6502",
        "asmatmel",
        "aspnet",
        "autohotkey",
        "autoit",
        "avisynth",
        "avro-idl",
        "bash",
        "basic",
        "batch",
        "bbcode",
        "bicep",
        "birb",
        "bison",
        "bnf",
        "brainfuck",
        "brightscript",
        "bro",
        "bsl",
        "c",
        "cfscript",
        "chaiscript",
        "cil",
        "clike",
        "clojure",
        "cmake",
        "cobol",
        "coffeescript",
        "concurnas",
        "coq",
        "cpp",
        "crystal",
        "csharp",
        "cshtml",
        "csp",
        "css-extras",
        "css",
        "csv",
        "cypher",
        "d",
        "dart",
        "dataweave",
        "dax",
        "dhall",
        "diff",
        "django",
        "dns-zone-file",
        "docker",
        "dot",
        "ebnf",
        "editorconfig",
        "eiffel",
        "ejs",
        "elixir",
        "elm",
        "erb",
        "erlang",
        "etlua",
        "excel-formula",
        "factor",
        "false",
        "firestore-security-rules",
        "flow",
        "fortran",
        "fsharp",
        "ftl",
        "gap",
        "gcode",
        "gdscript",
        "gedcom",
        "gherkin",
        "git",
        "glsl",
        "gml",
        "gn",
        "go-module",
        "go",
        "graphql",
        "groovy",
        "haml",
        "handlebars",
        "haskell",
        "haxe",
        "hcl",
        "hlsl",
        "hoon",
        "hpkp",
        "hsts",
        "http",
        "ichigojam",
        "icon",
        "icu-message-format",
        "idris",
        "iecst",
        "ignore",
        "inform7",
        "ini",
        "io",
        "j",
        "java",
        "javadoc",
        "javadoclike",
        "javascript",
        "javastacktrace",
        "jexl",
        "jolie",
        "jq",
        "js-extras",
        "js-templates",
        "jsdoc",
        "json",
        "json5",
        "jsonp",
        "jsstacktrace",
        "jsx",
        "julia",
        "keepalived",
        "keyman",
        "kotlin",
        "kumir",
        "kusto",
        "latex",
        "latte",
        "less",
        "lilypond",
        "liquid",
        "lisp",
        "livescript",
        "llvm",
        "log",
        "lolcode",
        "lua",
        "magma",
        "makefile",
        "markdown",
        "markup-templating",
        "markup",
        "matlab",
        "maxscript",
        "mel",
        "mermaid",
        "mizar",
        "mongodb",
        "monkey",
        "moonscript",
        "n1ql",
        "n4js",
        "nand2tetris-hdl",
        "naniscript",
        "nasm",
        "neon",
        "nevod",
        "nginx",
        "nim",
        "nix",
        "nsis",
        "objectivec",
        "ocaml",
        "opencl",
        "openqasm",
        "oz",
        "parigp",
        "parser",
        "pascal",
        "pascaligo",
        "pcaxis",
        "peoplecode",
        "perl",
        "php-extras",
        "php",
        "phpdoc",
        "plsql",
        "powerquery",
        "powershell",
        "processing",
        "prolog",
        "promql",
        "properties",
        "protobuf",
        "psl",
        "pug",
        "puppet",
        "pure",
        "purebasic",
        "purescript",
        "python",
        "q",
        "qml",
        "qore",
        "qsharp",
        "r",
        "racket",
        "reason",
        "regex",
        "rego",
        "renpy",
        "rest",
        "rip",
        "roboconf",
        "robotframework",
        "ruby",
        "rust",
        "sas",
        "sass",
        "scala",
        "scheme",
        "scss",
        "shell-session",
        "smali",
        "smalltalk",
        "smarty",
        "sml",
        "solidity",
        "solution-file",
        "soy",
        "sparql",
        "splunk-spl",
        "sqf",
        "sql",
        "squirrel",
        "stan",
        "stylus",
        "swift",
        "systemd",
        "t4-cs",
        "t4-templating",
        "t4-vb",
        "tap",
        "tcl",
        "textile",
        "toml",
        "tremor",
        "tsx",
        "tt2",
        "turtle",
        "twig",
        "typescript",
        "typoscript",
        "unrealscript",
        "uorazor",
        "uri",
        "v",
        "vala",
        "vbnet",
        "velocity",
        "verilog",
        "vhdl",
        "vim",
        "visual-basic",
        "warpscript",
        "wasm",
        "web-idl",
        "wiki",
        "wolfram",
        "wren",
        "xeora",
        "xml-doc",
        "xojo",
        "xquery",
        "yaml",
        "yang",
        "zig",
      ],
    });
    e.s(["PrismAsync", 0, er], 741430);
  },
  156029,
  18441,
  (e) => {
    "use strict";
    var t = e.i(92479),
      n = e.i(418625),
      r = e.i(576191);
    let i = {
      sqlBlockExecutionStates: new Map(),
      blocksForkedFrom: new Map(),
      blocksTemplateIds: new Map(),
      blocksCreatedAt: new Map(),
      blocksShared: new Map(),
      blocksDeployed: new Map(),
      blocksSubdomains: new Map(),
      brandedBlocks: new Map(),
      unlistedBlocks: new Map(),
      blockOutputs: new Map(),
    };
    function s() {
      let { chatId: e } = (0, t.useChatId)(),
        { data: s = i, mutate: a } = (0, n.default)(["block:mappings", e]),
        o = (0, r.useCallback)((e) => s.blockOutputs.get(e), [s]),
        l = (0, r.useCallback)(
          (e, t) => {
            let n;
            (t?.ok
              ? (n = new Map(s.blockOutputs.set(e, t.value)))
              : t?.error.executionResult
                ? (n = new Map(s.blockOutputs.set(e, t.error.executionResult)))
                : (n = new Map(s.blockOutputs)).delete(e),
              a({ ...s, blockOutputs: n }));
          },
          [s, a],
        ),
        c = (0, r.useCallback)((e) => s.blocksForkedFrom.get(e) ?? void 0, [s]),
        u = (0, r.useCallback)(
          (e, t) => {
            a({
              ...s,
              blocksForkedFrom: new Map(s.blocksForkedFrom.set(e, t ?? null)),
            });
          },
          [s, a],
        ),
        d = (0, r.useCallback)((e) => s.blocksShared.get(e) ?? !1, [s]),
        h = (0, r.useCallback)(
          (e, t) => {
            a({ ...s, blocksShared: new Map(s.blocksShared.set(e, t)) });
          },
          [s, a],
        ),
        p = (0, r.useCallback)(
          (e) => !!s.blocksDeployed.get(e)?.deploymentId,
          [s],
        ),
        m = (0, r.useCallback)(
          (e, t) => {
            a({ ...s, blocksDeployed: new Map(s.blocksDeployed.set(e, t)) });
          },
          [s, a],
        ),
        f = (0, r.useCallback)(
          (e) => s.blocksTemplateIds.get(e) ?? void 0,
          [s],
        ),
        g = (0, r.useCallback)(
          (e, t) => {
            a({
              ...s,
              blocksTemplateIds: new Map(
                s.blocksTemplateIds.set(e, {
                  templateVersionId: t.templateVersionId ?? null,
                  templateCanonId: t.templateCanonId ?? null,
                }),
              ),
            });
          },
          [s, a],
        ),
        x = (0, r.useCallback)((e) => s.blocksCreatedAt.get(e) ?? void 0, [s]),
        v = (0, r.useCallback)(
          (e, t) => {
            a({ ...s, blocksCreatedAt: new Map(s.blocksCreatedAt.set(e, t)) });
          },
          [s, a],
        );
      return {
        mappings: s,
        setMappings: a,
        getBlockForked: c,
        setBlockForked: u,
        getBlockShared: d,
        setBlockShared: h,
        getBlockDeployed: p,
        setBlockDeployed: m,
        getBlockTemplateId: f,
        setBlockTemplateId: g,
        getBlockCreatedAt: x,
        setBlockCreatedAt: v,
        getBlockOutput: o,
        setBlockOutput: l,
      };
    }
    e.s(["useBlockMappings", () => s], 156029);
    var a = e.i(324834),
      o = r;
    let l = (0, o.createContext)({
      sqlExecutionStates: {},
      updateSqlExecutionState: () => {},
    });
    function c(e) {
      let t = (0, o.useContext)(l);
      if (!t)
        throw Error(
          "useSqlExecutionState must be used within a SqlExecutionProvider",
        );
      return {
        sqlExecutionState: e ? t.sqlExecutionStates[e] : void 0,
        updateSqlExecutionState: (n) => {
          e && t.updateSqlExecutionState(e, n);
        },
        allSqlExecutionStates: t.sqlExecutionStates,
      };
    }
    function u({ children: e }) {
      let [t, n] = (0, o.useState)({}),
        r = (e, t) => {
          n((n) => ({ ...n, [e]: t }));
        },
        { mappings: i } = s();
      return (
        (0, o.useEffect)(() => {
          let e = {};
          (i.sqlBlockExecutionStates.forEach((t, n) => {
            e[n] = t;
          }),
            n(e));
        }, [i]),
        (0, a.jsx)(l.Provider, {
          value: { sqlExecutionStates: t, updateSqlExecutionState: r },
          children: e,
        })
      );
    }
    e.s(
      ["SqlExecutionProvider", () => u, "useSqlExecutionState", () => c],
      18441,
    );
  },
  770858,
  907735,
  (e) => {
    "use strict";
    e.s(["CodeBlock", () => er, "MemorizedHighlighter", () => en], 770858);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(338993),
      i = e.i(636139),
      s = e.i(563261),
      a = e.i(87467),
      o = e.i(739126),
      l = e.i(304649),
      c = e.i(741430),
      u = e.i(295224),
      d = t,
      h = l,
      p = n,
      m = e.i(176248);
    e.i(563948);
    var f = e.i(407562),
      g = e.i(667660),
      x = e.i(209819),
      v = e.i(919012),
      y = (0, v.createServerReference)(
        "60dc845386d449dc4a862c56c0a5289762d97813d5",
        v.callServer,
        void 0,
        v.findSourceMapURL,
        "updateSqlExecutionStateAction",
      ),
      b = e.i(707827),
      j = e.i(222431),
      w = e.i(965932),
      C = e.i(956562);
    let k = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 8C13.5 4.96643 11.0257 2.5 7.96452 2.5C5.42843 2.5 3.29365 4.19393 2.63724 6.5H5.25H6V8H5.25H0.75C0.335787 8 0 7.66421 0 7.25V2.75V2H1.5V2.75V5.23347C2.57851 2.74164 5.06835 1 7.96452 1C11.8461 1 15 4.13001 15 8C15 11.87 11.8461 15 7.96452 15C5.62368 15 3.54872 13.8617 2.27046 12.1122L1.828 11.5066L3.03915 10.6217L3.48161 11.2273C4.48831 12.6051 6.12055 13.5 7.96452 13.5C11.0257 13.5 13.5 11.0336 13.5 8Z" fill="currentColor"/>',
    );
    e.s(["RotateCounterClockwise", 0, k], 907735);
    var S = e.i(110909),
      N = e.i(504066),
      E = e.i(236699),
      A = e.i(65151),
      D = e.i(899488),
      I = e.i(18441),
      M = e.i(472166),
      T = e.i(592258),
      L = e.i(431141),
      P = e.i(44337),
      R = e.i(418625);
    function F(e) {
      let {
        data: t,
        isLoading: n,
        mutate: r,
        error: i,
      } = (0, R.default)(e ? ["chat:sql-exec-provider", e] : null, async () => {
        let t = await fetch(`/chat/api/chat/sql-exec-provider?chatId=${e}`),
          { sqlExecProvider: n } = await t.json(),
          r = n;
        return (0, P.isSqlExecProviderName)(r) ? r : null;
      });
      return {
        sqlExecProvider: t,
        isLoading: n,
        error: i,
        refetchSqlExecProvider: r,
      };
    }
    var _ = e.i(92479),
      O = v,
      B = (0, O.createServerReference)(
        "607b950e416472cca9dcd39ea4e0521fa57a226028",
        O.callServer,
        void 0,
        O.findSourceMapURL,
        "updateChatSqlExecProvider",
      ),
      V = e.i(762585),
      z = e.i(696871),
      H = e.i(418929);
    e.i(168204);
    var $ = e.i(225695),
      U = P,
      G = e.i(242759),
      W = e.i(436311),
      q = e.i(643312),
      Z = e.i(553969),
      K = e.i(625500);
    let Y = ["CREATE", "ALTER", "DROP", "TRUNCATE"];
    function J({
      className: e,
      headerClassName: t,
      language: n,
      actions: r,
      blockId: i,
      source: s,
      fileName: a,
      closed: o,
      sqlExecutionState: l,
      transaction: c,
      highlightedCode: u,
    }) {
      let { submit: v } = (0, M.useV0Chat)(),
        { activeScopeSlug: C } = (0, g.useActiveScope)(),
        { chatId: k } = (0, _.useChatId)(),
        { project: S, canWriteToChat: E } = (0, x.useChatMetadata)(),
        { projectId: D } = S ?? {},
        [T, L] = (0, p.useState)(!1),
        { data: P } = (0, q.useIntegrationsApi)(),
        R = (0, p.useMemo)(
          () => (P || []).filter((e) => (0, U.isSqlExecProviderName)(e.name)),
          [P],
        ),
        { sqlExecutionState: O, updateSqlExecutionState: V } = (0,
        I.useSqlExecutionState)(i),
        {
          sqlExecProvider: G,
          refetchSqlExecProvider: W,
          isLoading: J,
        } = F(E ? k : void 0),
        [et, en] = (0, p.useState)(G || R.at(0)?.id || ""),
        {
          handleExecuteScript: er,
          isExecuting: ei,
          setIsExecuting: es,
        } = (0, K.useExecuteScripts)();
      (0, p.useEffect)(() => {
        E && G && en(G);
      }, [E, G, en]);
      let ea = ei || !i || !s || !o || J,
        { getBlockOutput: eo } = (0, Z.useBlockOutputs)(),
        el = eo(i || ""),
        ec = "applied" === O || "error" === O,
        eu = "cancelled" === O,
        ed = "error" === O || "error" in (el ?? {}),
        eh = !!(el && !ed && el.stderr.length > 0);
      (0, p.useEffect)(() => {
        i && l && void 0 === O && V(l);
      }, [i, l, O, V]);
      let { isCopied: ep, copyToClipboard: em } = (0, N.useCopyToClipboard)({
        timeout: 2e3,
      });
      (0, _.useChatMessages)();
      let { actions: ef } = (0, H.useCurrentChatPrompt)(),
        { handleInputChange: eg, focusPrompt: ex } = ef,
        ev = async () => {
          if (!i)
            return void f.toast.error("Error", {
              description: "Missing block ID",
            });
          try {
            (es(!1), V("cancelled"));
            let e = await y(i, "cancelled");
            "error" in e && V(O);
          } catch (e) {
            f.toast.error("Error", {
              description: "An unexpected error occurred",
            });
          }
        },
        ey = async () => {
          if (!i || !s || !C || !D || !k) {
            let e = i
              ? s
                ? C
                  ? D
                    ? "chat ID"
                    : "project ID"
                  : "active scope"
                : "source"
              : "block ID";
            f.toast.error("Error", { description: `Missing ${e}` });
            return;
          }
          es(!0);
          try {
            if (!G && R.length >= 2) {
              let e = await B(k, et);
              if ("error" in e)
                return void f.toast.error("Error", {
                  description:
                    e.error ||
                    "An error occurred while updating the SQL integration provider",
                });
              W();
            }
            let { result: e, errorMessage: t } = await er({
              type: "source",
              source: s,
              fileName: a,
              meta: { transaction: c },
            });
            if (
              (V(e.ok ? "applied" : "error"),
              t && f.toast.error("SQL Execution Failed", { description: t }),
              (async () => {
                let t = await y(i, !e.ok ? "error" : "applied");
                "error" in t && V(O);
              })(),
              !e.ok)
            )
              return void (await v({
                action: "new",
                attachments: [],
                content: (0, $.createMDXMessageContent)(
                  `The SQL code block failed to execute. The error was: ${t}. `,
                ),
                type: "message",
              }));
            let n = Y.some((e) => RegExp(`\\b${e}\\b`, "i").test(s));
            if (ec || !n) {
              if ((es(!1), !n)) {
                let t = (0, A.getOutputString)(e.value),
                  n =
                    t.length > z.MAX_SQL_ATTACHMENT_SIZE
                      ? t.slice(0, z.MAX_SQL_ATTACHMENT_SIZE) + "..."
                      : t;
                await v({
                  action: "new",
                  attachments: [],
                  content: (0,
                  $.createMDXMessageContent)(`The SQL code block executed successfully. Very concisely summarize what happened.

Output: ${n}`),
                  type: "added-integration",
                  workflowState: "sql-executed",
                });
              }
              return;
            }
            let r = [],
              { result: o } = await er({ type: "SQL_SCHEMA_QUERY" });
            if (o.ok) {
              let e = o.value.stdout[0]?.[0];
              if (e) {
                let t =
                  e.length > z.MAX_SQL_ATTACHMENT_SIZE
                    ? e.slice(0, z.MAX_SQL_ATTACHMENT_SIZE) + "..."
                    : e;
                r.push({
                  name: "database-schema",
                  content: t,
                  url: "database-schema",
                  size: t.length,
                });
              }
            }
            await v({
              action: "new",
              attachments: r,
              content: (0, $.createMDXMessageContent)(
                `The SQL code block executed successfully.${r.length > 0 ? " The database schema is attached to this message." : ""}`,
              ),
              type: "added-integration",
              workflowState: "create-database-tables",
            });
          } catch (e) {
            (es(!1),
              V("error"),
              console.error(e),
              await y(i, "error"),
              f.toast.error("Error", {
                description: "An unexpected error occurred",
              }));
          }
        },
        eb = async () => {
          if (ep) return;
          let e = (0, A.getOutputString)(el);
          await em(e);
        },
        ej = (0, p.useMemo)(
          () =>
            R.length < 2 || !E
              ? null
              : (0, d.jsx)(ee, {
                  stores: R,
                  selectedStoreSlug: et,
                  setSelectedStoreSlug: en,
                  refetchSqlExecProvider: W,
                  isLoading: J,
                }),
          [R, et, en, W, J, E],
        );
      return (0, d.jsxs)("div", {
        className: (0, h.cn)(
          "codeblock max-h-none! relative flex size-full flex-col overflow-hidden rounded-lg border font-sans",
          ec || eu || !E
            ? "border-v0-alpha-400"
            : "border-v0-gray-900 ring-2 ring-v0-gray-100",
          e,
        ),
        "data-seg": "root",
        children: [
          (0, d.jsxs)("div", {
            className:
              "group/inline-code-block relative flex size-full flex-col overflow-hidden",
            children: [
              (0, d.jsxs)("div", {
                className: (0, h.cn)(
                  "bg-v0-background-200 flex h-10 w-full shrink-0 items-center justify-between gap-2 rounded-t-lg border-b pl-2.5 pr-1.5",
                  t,
                ),
                "data-seg": "skip",
                children: [
                  (0, d.jsxs)("div", {
                    className: "flex items-center gap-1.5",
                    children: [
                      n
                        ? (0, d.jsx)("span", {
                            className: "text-v0-gray-900",
                            children: o
                              ? (0, d.jsx)(w.Database, {
                                  className: "size-3.5",
                                })
                              : (0, d.jsx)(b.Spinner, { size: 14 }),
                          })
                        : null,
                      (0, d.jsx)("span", {
                        className:
                          "line-clamp-1 font-mono text-[13px] leading-none text-v0-gray-900",
                        children: a,
                      }),
                    ],
                  }),
                  (0, d.jsx)("div", {
                    className: "flex items-center space-x-1 text-v0-gray-900",
                    children: r,
                  }),
                ],
              }),
              (0, d.jsxs)("div", {
                className: (0, h.cn)(
                  "group relative size-full",
                  !eu && "pb-8",
                  !T && "max-h-[250px]! overflow-y-hidden!",
                ),
                children: [
                  !T &&
                    (0, d.jsx)("div", {
                      className:
                        "code-wrapper-container absolute flex size-full items-end justify-center",
                      children: (0, d.jsx)("div", {
                        className: (0, h.cn)(
                          "expand-button from-background/90 via-background/75 bg-linear-to-t z-10 hidden h-10 w-full translate-y-px items-center justify-center to-transparent px-1",
                          eu || !E ? "mb-0" : "mb-10",
                        ),
                        children: (0, d.jsxs)(m.Button, {
                          className: "h-7 w-full rounded-md",
                          variant: "ghost",
                          onClick: () => L(!0),
                          children: [
                            (0, d.jsx)(j.ChevronDown, {
                              className: "size-3.5",
                            }),
                            (0, d.jsx)("span", {
                              className: "sr-only",
                              children: "Expand Code Block",
                            }),
                          ],
                        }),
                      }),
                    }),
                  u,
                ],
              }),
              E &&
                (0, d.jsx)(Q, {
                  disabled: ea,
                  isExecuting: ei,
                  isCancelled: eu,
                  hasExecuted: ec,
                  isBlockOutputError: ed,
                  isAnyStdErr: eh,
                  handleApplySql: ey,
                  handleCancelSql: ev,
                  handleFix: () => {
                    (eg({
                      initialValue: `The code:

\`\`\`
${s}
\`\`\`

Produced this output:

${(0, A.getOutputString)(el)}

Please fix it.`,
                      force: !0,
                      save: !0,
                    }),
                      ex());
                  },
                  sqlDatabaseSelector: ej,
                }),
            ],
          }),
          (0, d.jsx)(X, {
            blockOutput: el,
            hasExecuted: ec,
            isCancelled: eu,
            isCopied: ep,
            onCopy: eb,
          }),
        ],
      });
    }
    function Q({
      isExecuting: e,
      isCancelled: t,
      disabled: n,
      hasExecuted: r,
      isBlockOutputError: i,
      isAnyStdErr: s,
      handleCancelSql: a,
      handleApplySql: o,
      handleFix: l,
      sqlDatabaseSelector: c,
    }) {
      let { ffw0: u } = (0, G.useFlags)(),
        { hasRemaining: p } = (0, W.useFreeFixWithV0Usage)();
      if (t) return null;
      let f =
          e || s
            ? null
            : i
              ? (0, d.jsx)("div", {
                  className: "font-mono text-[13px] text-v0-red-800",
                  children: "Failed",
                })
              : r
                ? (0, d.jsx)("div", {
                    className: "font-mono text-[13px] text-v0-gray-900",
                    children: "Applied",
                  })
                : (0, d.jsx)(m.Button, {
                    size: "sm",
                    className: "h-7 rounded-md",
                    disabled: n,
                    variant: "outline",
                    onClick: a,
                    children: "Cancel",
                  }),
        g = (0, d.jsxs)(m.Button, {
          size: "sm",
          className: "h-7 rounded-md",
          onClick: o,
          disabled: n,
          variant: r ? "outline" : "default",
          children: [
            e
              ? (0, d.jsx)(b.Spinner, { size: 16 })
              : r
                ? (0, d.jsx)(k, {})
                : null,
            (0, d.jsx)("span", {
              children: e ? "Applying" : r ? "Re-run" : "Run Code",
            }),
            " ",
          ],
        }),
        x =
          r && s && !e
            ? (0, d.jsxs)(m.Button, {
                onClick: l,
                size: "sm",
                className: "h-7 rounded-md",
                disabled: n,
                children: [
                  "Fix with ",
                  (0, d.jsx)(C.LogoV0, { className: "-ml-0.5" }),
                  u && p ? (0, d.jsx)("span", { children: " for free" }) : null,
                ],
              })
            : null;
      return (0, d.jsxs)("div", {
        className: (0, h.cn)(
          "bg-v0-background-100 absolute bottom-0 z-10 flex h-10 w-full shrink-0 items-center rounded-b-lg px-1.5",
          c ? "justify-between" : "justify-end",
        ),
        children: [
          c,
          (0, d.jsxs)("div", {
            className: (0, h.cn)("flex items-center", r ? "gap-3" : "gap-1.5"),
            children: [f, g, x],
          }),
        ],
      });
    }
    function X({
      blockOutput: e,
      hasExecuted: t,
      isCancelled: n,
      isCopied: r,
      onCopy: i,
    }) {
      if (n) return null;
      let s = t && e && !("error" in e),
        a = s && 0 === e.stdout.length && 0 === e.stderr.length,
        o =
          s &&
          1 === e.stdout.length &&
          1 === e.stdout[0].length &&
          "[]" === e.stdout[0][0],
        l =
          s &&
          1 === e.stdout.length &&
          1 === e.stdout[0].length &&
          null === e.stdout[0][0],
        c = a || o || l;
      return s && !c
        ? (0, d.jsxs)("div", {
            className:
              "bg-v0-background-200 group/sql-output relative flex w-full flex-col rounded-b-lg border-t",
            children: [
              (0, d.jsx)(D.CodeBlockButton, {
                "aria-label": "Copy",
                onClick: i,
                outline: !0,
                tooltip: "Copy",
                className:
                  "absolute right-1.5 top-1.5 z-10 hidden group-hover/sql-output:flex",
                children: (0, d.jsx)(E.CopyCheck, { isCopied: r, size: 14 }),
              }),
              (0, d.jsx)(S.CodeOutput, {
                className: "h-full max-h-64",
                value: e,
                inline: !0,
              }),
            ],
          })
        : null;
    }
    function ee({
      stores: e,
      selectedStoreSlug: t,
      setSelectedStoreSlug: n,
      refetchSqlExecProvider: r,
      isLoading: i,
    }) {
      let { chatId: s } = (0, _.useChatId)(),
        a = (0, p.useMemo)(() => e.find((e) => e.slug === t), [e, t]),
        o = async (e) => {
          if (s) {
            n(e);
            try {
              let i = await B(s, e);
              if ("error" in i) {
                (f.toast.error("Error", {
                  description:
                    i.error ||
                    "An error occurred while updating the SQL integration provider",
                }),
                  n(t));
                return;
              }
              await r();
            } catch (e) {
              (f.toast.error("Error", {
                description:
                  "An error occurred while updating the SQL integration provider",
              }),
                n(t));
            }
          }
        };
      return i
        ? (0, d.jsx)(V.Skeleton, { className: "h-7 w-28 rounded-md" })
        : (0, d.jsx)("div", {
            children: (0, d.jsxs)(T.Select, {
              value: t,
              onValueChange: o,
              children: [
                (0, d.jsx)(T.SelectTrigger, {
                  className: "[&>svg]:size-3! h-7 gap-2 pl-2",
                  children: (0, d.jsx)(T.SelectValue, {
                    children: (0, d.jsxs)("div", {
                      className: "flex flex-row items-center gap-1.5",
                      children: [
                        a?.lightIconUrl
                          ? (0, d.jsx)(L.default, {
                              src: a.lightIconUrl,
                              alt: a.name,
                              width: 16,
                              height: 16,
                              className: "rounded-full",
                            })
                          : (0, d.jsx)("div", {
                              className: "size-4 rounded-full bg-v0-gray-100",
                            }),
                        a?.name,
                      ],
                    }),
                  }),
                }),
                (0, d.jsx)(T.SelectContent, {
                  children: e.map((e) =>
                    (0, d.jsx)(
                      T.SelectItem,
                      {
                        value: e.slug,
                        children: (0, d.jsxs)("div", {
                          className: "flex flex-row items-center gap-1.5",
                          children: [
                            (0, d.jsx)(L.default, {
                              src: e.lightIconUrl,
                              alt: e.name,
                              width: 16,
                              height: 16,
                              className: "rounded-full",
                            }),
                            e.name,
                          ],
                        }),
                      },
                      e.slug,
                    ),
                  ),
                }),
              ],
            }),
          });
    }
    let et = (0, s.default)(() => e.A(129e3).then((e) => e.MonacoEditor), {
        loadableGenerated: { modules: [919001] },
        ssr: !1,
      }),
      en = (0, n.memo)(function ({
        value: e,
        language: r,
        showLineNumbers: s,
        wrapLongLines: a,
        minLineNumberChars: o = 2,
        isTabbed: u,
        originalCode: d,
        fixingBadLines: h,
        style: p,
      }) {
        let m,
          f = e,
          g = (0, i.getPrismLanguage)(r),
          x = (0, n.useMemo)(() => {
            if (d) return d.split("\n");
          }, [d]),
          v = (f.match(/\n/g) || []).length;
        if ((!f || 0 === v) && d)
          ((v = (d.match(/\n/g) || []).length),
            (m = (e) => ({
              className: (0, l.cn)(
                "opacity-50",
                1 === e &&
                  void 0 === h &&
                  "block w-full animate-pulse bg-gray-100 opacity-100",
                h?.includes(e + 1) &&
                  "block w-full animate-pulse bg-red-100 opacity-100",
              ),
            })),
            (f = d));
        else if (x && x.length > v - 1) {
          f.endsWith("\n") && (f = f.slice(0, -1));
          let e = f.lastIndexOf("\n"),
            t =
              (v = ((f = f.slice(0, e > 0 ? e : void 0)).match(/\n/g) || [])
                .length) + 1,
            n = x.slice(v + 1),
            r = n.join("\n");
          ((v += n.length),
            (m = (e) => ({
              className: (0, l.cn)(
                e === t && "block w-full bg-blue-400/20",
                e > t && "opacity-50",
              ),
            })),
            r && (f = f + "\n" + r));
        }
        return (0, t.jsx)(c.PrismAsync, {
          PreTag: "div",
          customStyle: {
            display: "flex",
            margin: 0,
            width: "max-content",
            height: "min-content",
            padding: u ? "12px 12px 10px 12px" : "8px 10px",
            textShadow: "none",
            borderRadius:
              "0 0 calc(var(--radius) - 2px) calc(var(--radius) - 2px)",
            WebkitOverflowScrolling: "touch",
            backgroundColor: "transparent",
            lineHeight: "1.55",
            fontSize: "0.8125rem",
            ...p,
          },
          language: g,
          lineNumberContainerStyle: {
            userSelect: "none",
            whiteSpace: "break-spaces",
            textAlign: "right",
            display: "flex",
            flexDirection: "column",
          },
          lineNumberStyle: {
            display: "inline-block",
            minWidth: `${Math.max(v.toString().length, o)}ch`,
            padding: 0,
            margin: "0 12px 0 0",
            color: "hsl(var(--gray-400))",
            userSelect: "none",
          },
          codeTagProps: { style: { fontFamily: "var(--font-geist-mono)" } },
          lineProps: m,
          showLineNumbers: s,
          useInlineStyles: !1,
          wrapLines: !0,
          wrapLongLines: a,
          children: f,
        });
      }),
      er = (0, n.memo)(
        ({
          language: e,
          value: s,
          blockId: c,
          originalCode: d,
          allowQuoting: h = !1,
          allowCopyCode: p = !0,
          allowDownloadCode: m = !0,
          allowClose: f = !1,
          closeHandler: g = null,
          className: x,
          headerClassName: v,
          fixingBadLines: y,
          codeWrapperClassName: b,
          fileName: j,
          showLineNumbers: w = !1,
          wrapLongLines: C = !1,
          additionalHeaderActions: k,
          caller: S,
          editable: N,
          showQuickEditAnimation: E,
          closed: A,
          onEdit: D,
          editValue: I,
          type: M,
          location: T,
          sqlExecutionState: L,
          transaction: P,
        }) => {
          let R = "inline" !== S,
            F = (0, u.useLatest)(D),
            _ = (0, n.useCallback)(
              (e) => {
                void 0 !== e && F.current?.(e);
              },
              [F],
            ),
            { showDiffs: O } = (0, o.useDiffView)({
              blockId: c,
              fileName: j || "file.txt",
              originalCode: d,
              newCode: s,
            }),
            B = (0, i.getPrismLanguage)(e),
            V = A ? (I ?? s) : s,
            z = (0, t.jsx)(a.CodeBlockActions, {
              additionalHeaderActions: k,
              allowClose: f,
              allowCopyCode: p,
              allowDownloadCode: m,
              originalCode: d,
              blockId: c,
              closed: A,
              caller: S,
              closeHandler: g,
              fileName: j || "file.txt",
              isTabbed: R,
              value: V,
              language: e,
            }),
            H = (0, t.jsx)("div", {
              className:
                "size-full text-v0-gray-900 group-has-[.language-text]:text-black group-has-[.token]:text-black",
              "data-seg": h ? "code-root" : void 0,
              children: (0, t.jsx)(en, {
                isTabbed: R,
                originalCode: d,
                fixingBadLines: y,
                language: e,
                showLineNumbers: w,
                value: s,
                wrapLongLines: C,
              }),
            }),
            $ = {
              className: x,
              headerClassName: v,
              language: e,
              showLineNumbers: w,
              fileName: j || ("inline-sql" === M ? "script.sql" : "file.txt"),
              actions: z,
              syntax:
                (d && E) || "inline" === S
                  ? (0, t.jsx)("div", {
                      className: (0, l.cn)(
                        "group size-full overflow-scroll",
                        b,
                      ),
                      children: H,
                    })
                  : (0, t.jsx)(et, {
                      language: B,
                      value: V,
                      diffOriginalCode: O ? d : null,
                      closed: A,
                      onEdit: _,
                      disabled: !N,
                      location: T,
                    }),
            };
          return R
            ? (0, t.jsx)(r.TabbedCodeBlock, { ...$ })
            : "inline-sql" === M
              ? (0, t.jsx)(J, {
                  ...$,
                  highlightedCode: H,
                  blockId: c,
                  source: s,
                  closed: A,
                  sqlExecutionState: L,
                  transaction: P,
                })
              : (0, t.jsx)(r.InlineCodeBlock, { ...$ });
        },
      );
    er.displayName = "CodeBlock";
  },
  595961,
  (e) => {
    "use strict";
    e.s(["SyntaxHighlighter", () => r]);
    var t = e.i(324834),
      n = e.i(770858);
    function r({
      language: e,
      children: r,
      closed: i,
      sqlExecutionState: s,
      blockId: a = "syntax-highlighter-block",
      transaction: o,
      type: l,
      fileName: c,
    }) {
      return (0, t.jsx)(n.CodeBlock, {
        allowCopyCode: !0,
        allowDownloadCode: !1,
        caller: "inline",
        className: "not-prose max-h-[500px] md:max-h-[700px]",
        headerClassName: "bg-muted",
        language: e,
        showLineNumbers: !1,
        value: r,
        closed: i,
        blockId: a,
        originalCode: void 0,
        showQuickEditAnimation: !1,
        sqlExecutionState: s,
        transaction: o,
        type: l,
        fileName: c,
      });
    }
  },
  335597,
  996356,
  697856,
  (e) => {
    "use strict";
    var t = e.i(877318);
    let n = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 2.5V1.75H4V2.5V13.5V14.25H5.5V13.5V2.5ZM12 2.5V1.75H10.5V2.5V13.5V14.25H12V13.5V2.5Z" fill="currentColor"/>',
    );
    e.s(["Pause", 0, n], 335597);
    let r = (0,
    t.withNewIcon)(`<path d="M9 7L12.5 2.5" stroke="var(--ds-red-700)" stroke-width="1.5"/>
  <path d="M10.5 9.5L15.75 10.5" stroke="var(--ds-blue-600)" stroke-width="1.5"/>
  <path d="M10 8L15.75 6" stroke="var(--ds-teal-600)" stroke-width="1.5"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.14568 3.56625L7 2L7.85432 3.56625L12.1818 11.5L13 13H11.2914H2.70863H1L1.81818 11.5L3.31818 8.75H0V7.25H4.13636L6.14568 3.56625ZM3.52681 11.5L7 5.13249L10.4732 11.5H3.52681Z" fill="currentColor"/>`);
    e.s(["PrismColor", 0, r], 996356);
    var i = e.i(576191),
      s = e.i(919012),
      a = (0, s.createServerReference)(
        "40dab4fc93a456f77d6db092fc2315e2f017e56d6b",
        s.callServer,
        void 0,
        s.findSourceMapURL,
        "updateBlockShareStatus",
      );
    e.i(563948);
    var o = e.i(407562),
      l = e.i(156029);
    function c() {
      let { getBlockShared: e, setBlockShared: t } = (0, l.useBlockMappings)();
      return {
        getBlockShared: e,
        setBlockShared: (0, i.useCallback)(
          (e, n) => {
            t(e, n);
            try {
              a({ blockId: e, shared: n });
            } catch {
              o.toast.error("Failed to update block publish status");
            }
          },
          [t],
        ),
        updateBlockInSharedMap: (0, i.useCallback)(
          (e, n) => {
            t(e, n);
          },
          [t],
        ),
      };
    }
    e.s(["useSharedBlocks", () => c], 697856);
  },
  316799,
  (e) => {
    "use strict";
    e.s(["useLastOpenedBlock", () => o]);
    var t = e.i(576191),
      n = e.i(449381),
      r = e.i(92479),
      i = e.i(818273),
      s = e.i(696871);
    let a = (e) => `last-opened-block:${e}`;
    function o() {
      let {
          messages: e,
          chatId: o,
          activeForkKey: l,
        } = (0, r.useChatMessages)(),
        c = (0, n.useSetActiveBlockView)();
      return {
        reopenLastBlock: (0, t.useCallback)(() => {
          let t = localStorage.getItem(a(o));
          if (t)
            for (let n of e.filter((e) => l?.includes(e.id))) {
              let e = (0, i.getBlocksFromState)(n.content ?? "", n.id).find(
                (e) => e.id === t,
              );
              if (e) return (c(!0, e), !0);
            }
          for (let t of [...e].reverse().filter((e) => l?.includes(e.id))) {
            let e = (0, i.getBlocksFromState)(t.content ?? "", t.id).filter(
              (e) => !s.INLINE_BLOCK_TYPES.includes(e.meta.type ?? ""),
            );
            if (0 !== e.length) return (c(!0, e[e.length - 1]), !0);
          }
          return !1;
        }, [e, c, o, l]),
        saveLastOpenedBlock: (0, t.useCallback)(
          (e) => {
            e ? localStorage.setItem(a(o), e) : localStorage.removeItem(a(o));
          },
          [o],
        ),
      };
    }
  },
  863785,
  978855,
  (e) => {
    "use strict";
    var t = e.i(156029);
    function n() {
      let { getBlockTemplateId: e, setBlockTemplateId: n } = (0,
      t.useBlockMappings)();
      return { getBlockTemplateId: e, setBlockTemplateId: n };
    }
    e.s(["useBlockTemplateId", () => n], 863785);
    var r = e.i(324834),
      i = e.i(576191),
      s = e.i(589654),
      a = e.i(657736),
      o = e.i(969372),
      l = e.i(304649),
      c = e.i(27684),
      u = e.i(297239);
    let d = (0, r.jsx)(o.ChevronDownSmall, {
      className:
        "text-v0-gray-900! transition-colors group-hover/thinking:text-gray-900!",
    });
    function h({
      text: e,
      children: t,
      isLoading: n = !1,
      forceOpen: o = !1,
      triggerClassName: h,
    }) {
      let m = (0, u.useT)(),
        f = e ?? m("messages.loadingText"),
        g = i.default.useRef(null),
        x = (0, r.jsx)(c.Content, {
          className:
            "group/content data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up overflow-hidden pt-2",
          children: (0, r.jsx)("div", {
            ref: g,
            className:
              "transition-[filter,opacity] duration-500 group-data-[state=closed]/content:opacity-0 group-data-[state=open]/content:opacity-100 group-data-[state=closed]/content:blur-lg group-data-[state=open]/content:blur-0",
            children: t,
          }),
        }),
        v = (0, r.jsxs)("div", {
          className: (0, l.cn)(
            "group/thinking flex w-full min-w-0 flex-1 flex-row items-center gap-1 text-sm",
            h,
          ),
          children: [
            (0, r.jsx)("div", {
              className: "transition-colors group-hover/thinking:text-gray-900",
              children: f,
            }),
            (0, r.jsx)("div", {
              className:
                "translate-y-px transition-all group-data-[state=open]/trigger:rotate-180",
              children: t ? d : null,
            }),
          ],
        });
      return (0, r.jsx)(c.Root, {
        className: "not-first:-mt-1 text-v0-gray-900 [&+.block-preview]:mt-4",
        type: "single",
        "data-seg": "skip",
        collapsible: !0,
        value: o ? "thinking" : void 0,
        onValueChange: (e) => {
          "thinking" === e &&
            g.current &&
            (g.current.children[0].style.opacity = "1");
        },
        children: (0, r.jsxs)(c.Item, {
          value: "thinking",
          children: [
            (0, r.jsx)(c.Trigger, {
              className: (0, l.cn)(
                "group/trigger w-full",
                !t && "pointer-events-none -translate-y-px",
              ),
              tabIndex: t ? void 0 : -1,
              children: (0, r.jsx)(s.AnimatePresence, {
                mode: "wait",
                children: (0, r.jsx)(
                  a.motion.div,
                  {
                    initial: { opacity: 0 },
                    animate: { opacity: 1 },
                    exit: { opacity: 0 },
                    transition: { duration: 0.2 },
                    className: "flex",
                    children: n ? (0, r.jsx)(p, { children: v }) : v,
                  },
                  f,
                ),
              }),
            }),
            t || o ? x : null,
          ],
        }),
      });
    }
    function p({ children: e, className: t }) {
      return (0, r.jsx)(a.motion.div, {
        animate: { backgroundPosition: ["100% 50%", "-100% 50%"] },
        transition: { duration: 1.5, repeat: 1 / 0, ease: "linear" },
        style: {
          background:
            "linear-gradient(90deg, hsl(var(--gray-400)) 0%, hsl(var(--gray-400)) 35%, hsl(var(--gray-900)) 50%, hsl(var(--gray-400)) 65%, hsl(var(--gray-400)) 100%)",
          backgroundSize: "200% 100%",
          WebkitBackgroundClip: "text",
          backgroundClip: "text",
        },
        className: (0, l.cn)("flex items-center text-transparent", t),
        children: e,
      });
    }
    e.s(["LoadingText", () => p, "Thinking", () => h], 978855);
  },
  847252,
  (e) => {
    "use strict";
    e.s(["useRecoverFile", () => s]);
    var t = e.i(576191),
      n = e.i(926224),
      r = e.i(583965),
      i = e.i(407562);
    function s({
      blockId: e,
      history: s,
      activeForkKey: a,
      updateBlockData: o,
      sourceFiles: l,
      currentBlockIndex: c,
    }) {
      let [u, d] = (0, t.useTransition)(),
        [h, p] = (0, t.useState)(null),
        { refresh: m } = (0, r.useBrowserFrame)();
      return {
        handleRecoverFile: (0, t.useCallback)(
          (t) => {
            let r = null,
              u = c,
              h = new Set(a);
            for (; !r && u >= 0; ) {
              let i = s[u];
              if (
                ((u -= 1),
                !i || "code-project" !== i.type || !h.has(i.messageId))
              )
                continue;
              let a = (0, n.parseMultiFileSource)({
                source: i.source,
                blockType: "code-project",
                blockId: e,
              }).find(
                (e) =>
                  e.meta.file === t &&
                  "...deleted..." !== e.source.replaceAll(" ", "").trim(),
              );
              a && (r = a.source);
            }
            if (!r)
              return void i.toast.error("Could not find the file to recover");
            let f = [...l];
            for (let e of f)
              if (e.meta.file === t) {
                ((e.isDeleted = !1),
                  (e.isRecovered = !0),
                  (e.isMerged = !1),
                  (e.source = r));
                break;
              }
            (p(t),
              d(async () => {
                try {
                  if (!(await o(f)).success) throw Error("Failed");
                  i.toast.success("File recovered successfully");
                } catch {
                  i.toast.error("Failed to recover the file");
                }
              }),
              m());
          },
          [l, m, o, a, e, c, s],
        ),
        isRecoveringFile: u,
        recoveringFile: h,
      };
    }
  },
  742998,
  530135,
  369606,
  304775,
  40114,
  (e) => {
    "use strict";
    let t;
    e.s(["RenderBlockPreview", () => U], 742998);
    var n = e.i(324834),
      r = e.i(449381),
      i = e.i(576191),
      s = e.i(304649),
      a = e.i(53223),
      o = e.i(283751),
      l = e.i(301331),
      c = e.i(381434);
    e.i(563948);
    var u = e.i(407562),
      d = e.i(228141),
      h = e.i(751231),
      p = e.i(569175),
      m = e.i(903500),
      f = e.i(335597),
      g = e.i(996356),
      x = e.i(147675),
      v = e.i(697856),
      y = e.i(297239),
      b = e.i(926224),
      j = e.i(707827),
      w = e.i(862664),
      C = e.i(745587),
      k = e.i(92479),
      S = e.i(996174),
      N = e.i(316799),
      E = e.i(696825),
      A = e.i(863785),
      D = e.i(818273),
      I = e.i(176248),
      M = e.i(978855),
      T = e.i(894906),
      L = e.i(847252),
      P = e.i(242759),
      R = e.i(751660);
    (0, R.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.93934 2.06066L8 1L9.06066 2.06066L13.9393 6.93934L15 8L13.9393 9.06066L9.06066 13.9393L8 15L6.93934 13.9393L2.06066 9.06066L1 8L2.06066 6.93934L6.93934 2.06066ZM3.12132 8L8 12.8787L12.8787 8L8 3.12132L3.12132 8Z" fill="#1D4ED8"/>',
    );
    let F = (0, R.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.47141 3.13809L6.94281 2.66669L6 1.72388L5.5286 2.19528L2.19526 5.52861C1.93491 5.78896 1.93491 6.21107 2.19526 6.47142L5.5286 9.80476L6 10.2762L6.94281 9.33335L6.47141 8.86195L4.35948 6.75002H9.66667C10.0497 6.75002 10.429 6.82546 10.7828 6.97204C11.1367 7.11861 11.4582 7.33345 11.7291 7.60429C11.9999 7.87513 12.2147 8.19666 12.3613 8.55053C12.5079 8.90439 12.5833 9.28366 12.5833 9.66669C12.5833 10.0497 12.5079 10.429 12.3613 10.7828C12.2147 11.1367 11.9999 11.4582 11.7291 11.7291C11.4582 11.9999 11.1367 12.2148 10.7828 12.3613C10.429 12.5079 10.0497 12.5834 9.66667 12.5834H7.33333H6.58333V14.0834H7.33333H9.66667C10.2467 14.0834 10.821 13.9691 11.3569 13.7472C11.8927 13.5252 12.3796 13.1999 12.7897 12.7897C13.1998 12.3796 13.5252 11.8927 13.7471 11.3569C13.9691 10.821 14.0833 10.2467 14.0833 9.66669C14.0833 9.08668 13.9691 8.51235 13.7471 7.9765C13.5252 7.44065 13.1998 6.95376 12.7897 6.54363C12.3796 6.13351 11.8927 5.80818 11.3569 5.58622C10.821 5.36426 10.2467 5.25002 9.66667 5.25002H4.35948L6.47141 3.13809Z" fill="currentColor"/>',
    );
    ((0, R.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M10.5304 2.13629L10.0001 1.60596L8.93942 2.66662L9.46975 3.19695L11.5228 5.24995H6.33341C5.16204 5.24995 4.03865 5.71528 3.21036 6.54356C2.38207 7.37185 1.91675 8.49524 1.91675 9.66662C1.91675 10.2466 2.03099 10.8209 2.25295 11.3568C2.47491 11.8927 2.80023 12.3795 3.21036 12.7897C4.03865 13.618 5.16204 14.0833 6.33341 14.0833H8.66675H9.41675V12.5833H8.66675H6.33341C5.55987 12.5833 4.818 12.276 4.27102 11.729C4.00018 11.4582 3.78534 11.1366 3.63877 10.7828C3.49219 10.4289 3.41675 10.0496 3.41675 9.66662C3.41675 8.89307 3.72404 8.1512 4.27102 7.60422C4.818 7.05724 5.55987 6.74995 6.33341 6.74995H11.5228L9.46975 8.80295L8.93942 9.33328L10.0001 10.3939L10.5304 9.86361L13.8637 6.53028C14.1566 6.23739 14.1566 5.76251 13.8637 5.46962L10.5304 2.13629Z" fill="currentColor"/>',
    ),
      (0, R.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.78027 1.78009L2.29198 3.24697L6.04198 13.997L6.59312 15.5769L7.40575 14.1142L9.76699 9.86393C9.78966 9.82312 9.82331 9.78948 9.86412 9.76681L14.1144 7.40556L15.5771 6.59293L13.9972 6.04179L3.24716 2.29179L1.78027 1.78009ZM11.9232 6.90695L9.13565 8.45557C8.84998 8.61428 8.61446 8.8498 8.45575 9.13547L6.90714 11.923L4.21998 4.2198L11.9232 6.90695Z" fill="currentColor"/>',
      ));
    let _ = (0, R.withNewIcon)(`
    <path d="M7.19559 1.58153L8.51442 1.58153C9.57531 1.58153 10.5927 2.00297 11.3429 2.75315L13.3372 4.74754C13.4466 4.8569 13.5798 4.93941 13.7264 4.98857L14.8455 5.3638C15.1976 5.48184 15.3027 5.92886 15.0402 6.19141L12.6878 8.54377C12.4205 8.81103 11.9648 8.69655 11.8556 8.33472L11.5725 7.39713C11.5179 7.21622 11.2901 7.15898 11.1564 7.29261L3.91332 14.5358C3.23129 15.2178 2.1255 15.2178 1.44347 14.5358C0.761448 13.8538 0.761448 12.748 1.44347 12.066L8.80323 4.7062C8.90164 4.60779 8.90074 4.44796 8.80123 4.35067L6.84604 2.43904C6.52559 2.12572 6.74742 1.58153 7.19559 1.58153Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
    <path d="M9.77576 8.56898L7.30088 6.09411" stroke="currentColor" stroke-width="1.5"/>
    <path d="M2.70825 1.5V1H3.70825V1.5C3.70825 2.60457 4.60368 3.5 5.70825 3.5H6.20825V4V4.5H5.70825C4.60368 4.5 3.70825 5.39543 3.70825 6.5V7H3.20825H2.70825V6.5C2.70825 5.39543 1.81282 4.5 0.708252 4.5H0.208252V4V3.5H0.708252C1.81282 3.5 2.70825 2.60457 2.70825 1.5Z" fill="currentColor"/>
`);
    e.s(["Build", 0, _, "UndoIcon", 0, F], 530135);
    var O = e.i(385671),
      B = e.i(76866),
      V = e.i(393799),
      z = e.i(819969);
    function H({ children: e, className: t }) {
      return (0, n.jsx)("div", {
        className: (0, s.cn)(
          "bg-v0-gray-200 flex h-5 items-center gap-1 rounded-md px-1 text-[12px] text-v0-gray-900",
          t,
        ),
        children: e,
      });
    }
    function $({
      closed: e,
      isStreaming: t,
      finishReason: r,
      language: i,
      isBlob: s,
    }) {
      return s
        ? (0, n.jsx)(p.CloudUpload, { className: "size-4 text-v0-gray-900" })
        : e && !t && "stop" === r
          ? (0, n.jsx)(o.FileIcon, {
              lang: i || "plaintext",
              fill: "fill-gray-500",
            })
          : e && !t && "length" === r
            ? (0, n.jsx)(S.Tooltip, {
                content: "v0 cannot output enough tokens to complete the block",
                children: (0, n.jsx)("span", {
                  "aria-hidden": !0,
                  children: (0, n.jsx)(x.Warning, {}),
                }),
              })
            : e || !t || r
              ? (0, n.jsx)(o.FileIcon, {
                  lang: i || "plaintext",
                  fill: "fill-gray-500",
                })
              : (0, n.jsx)(j.Spinner, { size: 16 });
    }
    function U({ type: e, blockId: t, messageId: o, ...p }) {
      let x = (0, D.useIsStreaming)(),
        R = (0, r.useActiveBlockView)(),
        _ = (0, r.useActiveBlockState)(),
        U = (0, r.useSetActiveBlockView)(),
        {
          currentBlockIndex: W,
          history: q,
          projectBlocks: Z,
          latestSource: K,
          ensureBlockSource: Y,
          isLoadingBlockSource: J,
        } = (0, l.useBlockHistory)({ blockId: t, searchAll: !0 }),
        { getBlockShared: Q } = (0, v.useSharedBlocks)(),
        { getBlockDeployed: X } = (0, w.useDeployedBlocks)(),
        ee = (0, y.useT)(),
        et = (0, C.useSetActiveFile)({ blockId: t }),
        { bl: en } = (0, P.useFlags)(),
        { getBlockForked: er } = (0, E.useForkedBlocks)(),
        { getBlockTemplateId: ei } = (0, A.useBlockTemplateId)(),
        { isRestoring: es, restoreCurrentBlock: ea } = (0,
        B.useRestoreBlockVersion)(t),
        { pulsePreview: eo } = (0, l.usePulsePreview)({ blockId: t }),
        { messages: el, activeForkKey: ec } = (0, k.useChatMessages)(),
        eu = (0, i.useMemo)(
          () => el.find((e) => e.id === o && "assistant" === e.role),
          [el, o],
        ),
        ed = eu?.finishReason,
        eh = R && _?.id === t,
        [ep, em] = (0, i.useState)(!1),
        [ef, eg] = (0, i.useState)(!1),
        {
          actions: { setActiveTabIntent: ex },
        } = (0, O.useChatLayout)(),
        ev = K || p.source,
        ey = (0, i.useCallback)(async () => {
          J || (await Y());
        }, [Y, J]);
      (0, i.useEffect)(() => em(!0), []);
      let eb = "Untitled",
        ej = e;
      (p.meta.project && (eb = p.meta.project),
        p.meta.file && (ej = p.meta.file || e),
        "local" === e && (eb = p.meta.title || "Untitled"),
        "Untitled" === eb &&
          ev.trimStart().startsWith("// ") &&
          (eb = ev.trimStart().slice(3).split("\n")[0] || "Untitled"),
        /[_-]/.test(eb) &&
          (eb = eb
            .split(/[_-]/)
            .map((e) => e.charAt(0).toUpperCase() + e.slice(1).toLowerCase())
            .join(" ")));
      let ew = Z?.find((e) => e.id === t),
        eC = ew?.latestDeploymentInfo,
        ek = (0, i.useRef)(null),
        { saveLastOpenedBlock: eS } = (0, N.useLastOpenedBlock)(),
        { atoms: eN } = (0, z.useCurrentChat)(),
        eE = (0, V.useAtomValue)(eN.canWriteToChat);
      (0, c.isLatestBlock)(t, q);
      let eA = (0, c.isLatestBlockInProgress)(t, q),
        eD = (0, i.useCallback)(async () => {
          if (eA) return;
          (0, a.track)("ClickBlockPreview", { blockId: t });
          let { templateVersionId: n, templateCanonId: r } = ei(t) ?? {},
            i =
              (await Y().catch(() => {
                u.toast.error("Failed to load block source.");
              })) || ev;
          !i ||
            (U(!0, {
              id: t,
              meta: p.meta,
              remoteInfo: p.remoteInfo,
              messageId: o,
              type: e,
              language: p.language,
              source: i,
              resultId: p.resultId,
              closed: !!p.closed,
              hasSourceBeenEdited: !!_?.hasSourceBeenEdited,
              latestDeploymentInfo: eC,
              templateVersionId: n || void 0,
              templateCanonId: r || void 0,
              forkedFromBlockId: er(t),
            }),
            eS(t),
            ek.current &&
              (ex("code"),
              et(ek.current),
              (ek.current = null),
              setTimeout(() => {
                let e = document.querySelector('[data-active-tab="true"]');
                e && e.scrollIntoView({ block: "start" });
              }, 0)));
        }, [
          t,
          ei,
          Y,
          p.meta,
          p.remoteInfo,
          p.language,
          p.resultId,
          p.closed,
          o,
          e,
          _?.hasSourceBeenEdited,
          eC,
          er,
          U,
          eS,
          ex,
          et,
          ev,
          eA,
        ]),
        eI = (0, i.useMemo)(() => Q(t) || X(t), [t, Q, X]),
        eM = !p.closed && !x && ("other" === ed || !ed),
        eT =
          "local" === e
            ? (0, n.jsx)(g.PrismColor, {
                className: "size-4 text-v0-gray-900 [&_path]:fill-current",
              })
            : (0, n.jsx)($, {
                closed: p.closed,
                isStreaming: x,
                finishReason: ed,
                language: p.language,
                isBlob: !!p.meta.url,
              }),
        eL = (0, i.useCallback)(() => {
          if (eh && !ek.current) return;
          eD();
          let e = new URL(window.location.href),
            t = new URLSearchParams(e.search);
          (t.delete("b"),
            (e.search = t.toString()),
            window.history.replaceState({}, "", e.toString()));
        }, [eh, eD]),
        eP = (0, T.useUpdateBlockData)(t),
        eR = (0, i.useMemo)(
          () =>
            "local" === e || "code-project" === e
              ? (0, b.parseMultiFileSource)({
                  source: ev,
                  blockType: e,
                  blockId: t,
                })
              : [],
          [ev, e, t],
        ),
        eF = (0, i.useMemo)(
          () =>
            "local" === e || "code-project" === e
              ? eR.filter((e) => !e.isMerged && !(e.isDeleted && e.isMoved))
              : [],
          [e, eR],
        ),
        {
          handleRecoverFile: e_,
          isRecoveringFile: eO,
          recoveringFile: eB,
        } = (0, L.useRecoverFile)({
          blockId: t,
          history: q,
          activeForkKey: ec,
          updateBlockData: eP,
          sourceFiles: eR,
          currentBlockIndex: W,
        }),
        eV = o === ec?.[ec.length - 1];
      (0, i.useEffect)(() => {
        (eh || ef) &&
          Y().catch((e) => {
            u.toast.error("Failed to load block source");
          });
      }, [eh, ef, Y]);
      let ez = (0, i.useCallback)((e) => {
        (e.preventDefault(), e.stopPropagation(), eg((e) => !e));
      }, []);
      if ("code-project" === e) {
        let e = (0, n.jsxs)("div", {
            className: (0, s.cn)(
              "@container/block-preview-header flex w-full items-center justify-between gap-3 p-2.5",
              ef && "border-v0-alpha-400 border-b",
            ),
            onMouseEnter: ey,
            children: [
              (0, n.jsxs)("div", {
                className:
                  "flex items-center gap-2 text-sm font-medium text-v0-gray-1000",
                children: [
                  (0, n.jsx)("div", {
                    className: (0, s.cn)(
                      "flex items-center gap-1 whitespace-nowrap text-[13px] font-medium pl-1",
                      eh ? "text-v0-blue-800" : "text-v0-gray-1000",
                    ),
                    children:
                      p.closed || eM
                        ? `Version ${W + 1}`
                        : (0, n.jsxs)(M.LoadingText, {
                            className: "text-[13px] font-medium",
                            children: ["Version ", W + 1],
                          }),
                  }),
                  eI
                    ? (0, n.jsxs)(H, {
                        className: "@[19rem]/block-preview-header:flex hidden",
                        children: [
                          (0, n.jsx)(m.Globe, { size: 12 }),
                          " ",
                          ee("blockPreview.deployed"),
                        ],
                      })
                    : null,
                  eM
                    ? (0, n.jsx)(H, {
                        className: "@[19rem]/block-preview-header:flex hidden",
                        children: "STOPPED",
                      })
                    : null,
                ],
              }),
              (0, n.jsxs)("div", {
                className: "flex items-center gap-2",
                children: [
                  eV || !eE
                    ? null
                    : (0, n.jsx)(S.Tooltip, {
                        content: es ? "Restoring" : "Restore this version",
                        children: (0, n.jsx)(I.Button, {
                          variant: "ghost",
                          className: "size-6 rounded-sm",
                          size: "sm",
                          onClick: (e) => {
                            (e.preventDefault(), e.stopPropagation(), ea());
                          },
                          disabled: es,
                          children: es
                            ? (0, n.jsx)(j.Spinner, { size: 14 })
                            : (0, n.jsx)(F, {}),
                        }),
                      }),
                  p.closed || eM
                    ? (0, n.jsx)(I.Button, {
                        onClick: ez,
                        variant: "ghost",
                        className: "size-6 rounded-sm",
                        size: "sm",
                        children: (0, n.jsx)(h.ChevronUpDown, {}),
                      })
                    : (0, n.jsx)("div", {
                        className: "size-6 flex items-center justify-center",
                        children: (0, n.jsx)(j.Spinner, { size: 16 }),
                      }),
                ],
              }),
            ],
          }),
          t = eF.map((e, t) => {
            let r,
              s = !1;
            if (
              en &&
              t < eF.length - 1 &&
              eF[t + 1]?.meta?.file === eF[t]?.meta?.file
            )
              return null;
            let a = !!(!p.closed && (t === eF.length - 1 || e.isTempFile));
            return (
              e.isTerminated
                ? ((r = (0, n.jsx)(f.Pause, {
                    className: "size-3 text-v0-gray-500",
                  })),
                  (s = !0))
                : a
                  ? ((r = eM
                      ? (0, n.jsx)(f.Pause, {
                          className: "size-3 text-v0-gray-500",
                        })
                      : (0, n.jsx)(j.Spinner, { size: 14 })),
                    (s = eM))
                  : (r = e.isLoading
                      ? (0, n.jsx)(j.Spinner, { size: 14 })
                      : (0, n.jsx)(d.CheckCircleFill, {
                          className: "size-3 text-v0-gray-500",
                        })),
              (0, n.jsxs)(
                i.default.Fragment,
                {
                  children: [
                    (0, n.jsxs)(
                      "div",
                      {
                        className:
                          "flex h-5 w-full min-w-0 items-center gap-2 text-[13px]",
                        children: [
                          (0, n.jsx)("div", {
                            className:
                              "flex size-5 shrink-0 items-center justify-center",
                            children: r,
                          }),
                          (0, n.jsxs)("div", {
                            className:
                              "group/file flex w-full min-w-0 items-center justify-between gap-2",
                            role: "button",
                            tabIndex: 0,
                            onClick: (t) => {
                              if (e.isDeleted) {
                                (t.stopPropagation(), e_(e.meta.file || ""));
                                return;
                              }
                              ek.current = e.meta.file || null;
                            },
                            children: [
                              (0, n.jsx)("div", {
                                className:
                                  "flex-1 cursor-pointer truncate text-left group-hover/file:underline",
                                children:
                                  (a && !eM) || e.isLoading
                                    ? (0, n.jsx)(M.LoadingText, {
                                        className: "text-[13px]",
                                        children: e.meta.file,
                                      })
                                    : e.meta.file,
                              }),
                              (0, n.jsx)(G, {
                                file: e,
                                isRecovering: eB === e.meta.file && eO,
                                active: a,
                                stopped: s,
                              }),
                            ],
                          }),
                        ],
                      },
                      t,
                    ),
                    t !== eF.length - 1 &&
                      (0, n.jsx)("div", {
                        className: "flex h-3 w-5 items-center justify-center",
                        children: (0, n.jsx)("div", {
                          className: "h-full w-px bg-v0-gray-300",
                        }),
                      }),
                  ],
                },
                "block-edit-" + t,
              )
            );
          }),
          r =
            ef && eF.length > 0
              ? (0, n.jsx)("div", {
                  className: "bg-v0-background-200 overflow-hidden",
                  children: (0, n.jsx)("div", {
                    className:
                      "flex w-full flex-col overflow-hidden rounded-md py-1.5 pl-2 pr-2.5 text-left text-v0-gray-900",
                    children: t,
                  }),
                })
              : null;
        return (0, n.jsxs)("div", {
          "data-testid": "block-preview",
          className: (0, s.cn)(
            "not-prose group/block-preview bg-v0-background-100 flex w-full max-w-full cursor-pointer select-none flex-col justify-between overflow-hidden rounded-lg border shadow-[0px_2px_3px_-1px_hsla(0,0%,0%,0.04)] transition-all ease-in-out md:w-[400px]",
            eh
              ? "ring-v0-blue-100 border-v0-blue-800 ring-2"
              : "hover:ring-v0-alpha-400 border-v0-alpha-400 hover:border-v0-alpha-500",
            eh && eo ? "animate-pulse-border" : "",
          ),
          onClick: eL,
          children: [e, r],
        });
      }
      return (0, n.jsxs)("div", {
        "data-testid": "block-preview",
        className: (0, s.cn)(
          "not-prose bg-v0-background-100 hover:brightness-97 flex w-full max-w-full cursor-pointer select-none items-start justify-between gap-2 rounded-[10px] border p-1.5 transition-all duration-200 ease-in-out md:w-[400px]",
          eh
            ? "ring-v0-alpha-400 border-v0-gray-900 ring-2"
            : "border-v0-gray-200",
        ),
        onClick: eL,
        children: [
          (0, n.jsx)("div", {
            className:
              "flex size-10 shrink-0 items-center justify-center overflow-hidden rounded-sm bg-v0-gray-100 px-3 text-v0-gray-900 transition-all duration-200 ease-in-out",
            children: eT,
          }),
          (0, n.jsx)("div", {
            className:
              "flex w-full min-w-0 flex-row items-center justify-between",
            children: (0, n.jsxs)("div", {
              className: "flex min-w-0 flex-1 flex-col items-start leading-5",
              children: [
                (0, n.jsxs)("div", {
                  className:
                    "@container/block-preview-header my-0 flex w-full min-w-0 max-w-full items-center justify-between gap-2 text-sm font-medium text-v0-gray-1000",
                  children: [
                    (0, n.jsx)("div", {
                      className: "min-w-0 shrink truncate",
                      children: eb,
                    }),
                    (0, n.jsxs)("div", {
                      className: "flex shrink-0 gap-1",
                      children: [
                        eV || !eE
                          ? null
                          : (0, n.jsx)(S.Tooltip, {
                              content: es
                                ? "Restoring"
                                : "Restore this version",
                              children: (0, n.jsx)(I.Button, {
                                variant: "ghost",
                                className: "size-6 rounded-sm",
                                size: "sm",
                                onClick: (e) => {
                                  (e.preventDefault(),
                                    e.stopPropagation(),
                                    ea());
                                },
                                disabled: es,
                                children: es
                                  ? (0, n.jsx)(j.Spinner, { size: 14 })
                                  : (0, n.jsx)(F, {}),
                              }),
                            }),
                        eI
                          ? (0, n.jsxs)(H, {
                              className:
                                "@[17rem]/block-preview-header:flex hidden",
                              children: [
                                (0, n.jsx)(m.Globe, { size: 12 }),
                                " ",
                                ee("blockPreview.deployed"),
                              ],
                            })
                          : null,
                        eM
                          ? (0, n.jsx)(H, {
                              className:
                                "@[17rem]/block-preview-header:flex hidden",
                              children: "STOPPED",
                            })
                          : null,
                        (0, n.jsxs)(H, {
                          className: "font-mono",
                          children: ["v", W + 1],
                        }),
                        "local" === e
                          ? (0, n.jsx)(H, {
                              className: "bg-lime-100 dark:bg-lime-900",
                              children: "LOCAL",
                            })
                          : null,
                      ],
                    }),
                  ],
                }),
                "local" !== e
                  ? (0, n.jsxs)("p", {
                      className:
                        "my-0 max-w-full truncate text-sm text-v0-gray-900 ",
                      children: [
                        ej,
                        _?.hasSourceBeenEdited
                          ? (0, n.jsx)("span", { children: " (edited)" })
                          : null,
                      ],
                    })
                  : (0, n.jsx)("ul", {
                      className:
                        "my-0 w-full max-w-full truncate text-left text-v0-gray-900",
                      children: eF.map((e, t) =>
                        (0, n.jsxs)(
                          "li",
                          {
                            className: "flex items-center gap-1.5 truncate",
                            children: [
                              e.meta.file,
                              t !== eF.length - 1 || p.closed
                                ? null
                                : (0, n.jsx)("span", {
                                    children: (0, n.jsx)(j.Spinner, {
                                      size: 14,
                                    }),
                                  }),
                            ],
                          },
                          t,
                        ),
                      ),
                    }),
              ],
            }),
          }),
        ],
      });
    }
    function G({ file: e, active: t, stopped: r, isRecovering: i }) {
      let a = (() =>
          !e.isDeleted && e.isRecovered
            ? "Recovered"
            : r
              ? "Stopped"
              : e.isDeleted
                ? "Deleted"
                : e.blobUrl
                  ? t
                    ? "Creating"
                    : "Added"
                  : e.isLocked
                    ? "Locked"
                    : e.isMoved && e.isMovedFrom
                      ? "Moved"
                      : e.isEdit || e.isAttachmentQuickEdit
                        ? e.isFixed
                          ? t
                            ? "Fixing"
                            : "Fixed"
                          : t
                            ? "Editing"
                            : "Edited"
                        : e.isLoading
                          ? ""
                          : e.meta.isUserEdit
                            ? "Created"
                            : t
                              ? e.isFixed
                                ? "Fixing"
                                : "Generating"
                              : "Generated")(),
        o = e.isDeleted ? "Recover" : null;
      return i
        ? (0, n.jsx)("div", {
            className: "flex size-5 shrink-0 items-center justify-center",
            children: (0, n.jsx)(j.Spinner, { size: 14 }),
          })
        : (0, n.jsxs)(n.Fragment, {
            children: [
              o
                ? (0, n.jsx)("div", {
                    className:
                      "animate-in fade-in fade-out hidden font-mono text-xs text-v0-gray-900 group-hover/file:block",
                    children: o,
                  })
                : null,
              (0, n.jsx)("div", {
                className: (0, s.cn)(
                  "font-mono text-xs text-v0-gray-900",
                  o && "block group-hover/file:hidden",
                ),
                children: a,
              }),
            ],
          });
    }
    e.i(439235);
    var W = i;
    function q(e) {
      var t;
      return (
        (null == e || null == (t = e.ownerDocument) ? void 0 : t.defaultView) ||
        window
      );
    }
    function Z(e) {
      return e instanceof Element || e instanceof q(e).Element;
    }
    function K(e) {
      return (
        "undefined" != typeof ShadowRoot &&
        (e instanceof ShadowRoot || e instanceof q(e).ShadowRoot)
      );
    }
    function Y(e) {
      let t = e.activeElement;
      for (
        ;
        (null == (n = t) || null == (n = n.shadowRoot)
          ? void 0
          : n.activeElement) != null;

      ) {
        var n;
        t = t.shadowRoot.activeElement;
      }
      return t;
    }
    function J(e, t) {
      if (!e || !t) return !1;
      let n = null == t.getRootNode ? void 0 : t.getRootNode();
      if (e.contains(t)) return !0;
      if (n && K(n)) {
        let n = t;
        for (; n; ) {
          if (e === n) return !0;
          n = n.parentNode || n.host;
        }
      }
      return !1;
    }
    function Q() {
      return /apple/i.test(navigator.vendor);
    }
    function X(e, t) {
      let n = ["mouse", "pen"];
      return (t || n.push("", void 0), n.includes(e));
    }
    function ee(e) {
      return (null == e ? void 0 : e.ownerDocument) || document;
    }
    function et(e) {
      return "composedPath" in e ? e.composedPath()[0] : e.target;
    }
    var en =
        'input:not([inert]),select:not([inert]),textarea:not([inert]),a[href]:not([inert]),button:not([inert]),[tabindex]:not(slot):not([inert]),audio[controls]:not([inert]),video[controls]:not([inert]),[contenteditable]:not([contenteditable="false"]):not([inert]),details>summary:first-of-type:not([inert]),details:not([inert])',
      er = "undefined" == typeof Element,
      ei = er
        ? function () {}
        : Element.prototype.matches ||
          Element.prototype.msMatchesSelector ||
          Element.prototype.webkitMatchesSelector,
      es =
        !er && Element.prototype.getRootNode
          ? function (e) {
              var t;
              return null == e || null == (t = e.getRootNode)
                ? void 0
                : t.call(e);
            }
          : function (e) {
              return null == e ? void 0 : e.ownerDocument;
            },
      ea = function e(t, n) {
        void 0 === n && (n = !0);
        var r,
          i =
            null == t || null == (r = t.getAttribute)
              ? void 0
              : r.call(t, "inert");
        return "" === i || "true" === i || (n && t && e(t.parentNode));
      },
      eo = function (e) {
        var t,
          n =
            null == e || null == (t = e.getAttribute)
              ? void 0
              : t.call(e, "contenteditable");
        return "" === n || "true" === n;
      },
      el = function (e, t, n) {
        if (ea(e)) return [];
        var r = Array.prototype.slice.apply(e.querySelectorAll(en));
        return (t && ei.call(e, en) && r.unshift(e), (r = r.filter(n)));
      },
      ec = function e(t, n, r) {
        for (var i = [], s = Array.from(t); s.length; ) {
          var a = s.shift();
          if (!ea(a, !1))
            if ("SLOT" === a.tagName) {
              var o = a.assignedElements(),
                l = e(o.length ? o : a.children, !0, r);
              r.flatten
                ? i.push.apply(i, l)
                : i.push({ scopeParent: a, candidates: l });
            } else {
              ei.call(a, en) &&
                r.filter(a) &&
                (n || !t.includes(a)) &&
                i.push(a);
              var c =
                  a.shadowRoot ||
                  ("function" == typeof r.getShadowRoot && r.getShadowRoot(a)),
                u =
                  !ea(c, !1) && (!r.shadowRootFilter || r.shadowRootFilter(a));
              if (c && u) {
                var d = e(!0 === c ? a.children : c.children, !0, r);
                r.flatten
                  ? i.push.apply(i, d)
                  : i.push({ scopeParent: a, candidates: d });
              } else s.unshift.apply(s, a.children);
            }
        }
        return i;
      },
      eu = function (e, t) {
        return e.tabIndex < 0 &&
          (t || /^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName) || eo(e)) &&
          isNaN(parseInt(e.getAttribute("tabindex"), 10))
          ? 0
          : e.tabIndex;
      },
      ed = function (e, t) {
        return e.tabIndex === t.tabIndex
          ? e.documentOrder - t.documentOrder
          : e.tabIndex - t.tabIndex;
      },
      eh = function (e) {
        return "INPUT" === e.tagName;
      },
      ep = function (e) {
        return eh(e) && "hidden" === e.type;
      },
      em = function (e) {
        return (
          "DETAILS" === e.tagName &&
          Array.prototype.slice.apply(e.children).some(function (e) {
            return "SUMMARY" === e.tagName;
          })
        );
      },
      ef = function (e, t) {
        for (var n = 0; n < e.length; n++)
          if (e[n].checked && e[n].form === t) return e[n];
      },
      eg = function (e) {
        if (!e.name) return !0;
        var t,
          n = e.form || es(e),
          r = function (e) {
            return n.querySelectorAll('input[type="radio"][name="' + e + '"]');
          };
        if (
          "undefined" != typeof window &&
          void 0 !== window.CSS &&
          "function" == typeof window.CSS.escape
        )
          t = r(window.CSS.escape(e.name));
        else
          try {
            t = r(e.name);
          } catch (e) {
            return (
              console.error(
                "Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
                e.message,
              ),
              !1
            );
          }
        var i = ef(t, e.form);
        return !i || i === e;
      },
      ex = function (e) {
        return eh(e) && "radio" === e.type;
      },
      ev = function (e) {
        return ex(e) && !eg(e);
      },
      ey = function (e) {
        var t,
          n,
          r,
          i,
          s,
          a,
          o,
          l = e && es(e),
          c = null == (t = l) ? void 0 : t.host,
          u = !1;
        if (l && l !== e)
          for (
            u = !!(
              (null != (n = c) &&
                null != (r = n.ownerDocument) &&
                r.contains(c)) ||
              (null != e && null != (i = e.ownerDocument) && i.contains(e))
            );
            !u && c;

          )
            u = !!(
              null != (a = c = null == (s = l = es(c)) ? void 0 : s.host) &&
              null != (o = a.ownerDocument) &&
              o.contains(c)
            );
        return u;
      },
      eb = function (e) {
        var t = e.getBoundingClientRect(),
          n = t.width,
          r = t.height;
        return 0 === n && 0 === r;
      },
      ej = function (e, t) {
        var n = t.displayCheck,
          r = t.getShadowRoot;
        if ("hidden" === getComputedStyle(e).visibility) return !0;
        var i = ei.call(e, "details>summary:first-of-type")
          ? e.parentElement
          : e;
        if (ei.call(i, "details:not([open]) *")) return !0;
        if (n && "full" !== n && "legacy-full" !== n) {
          if ("non-zero-area" === n) return eb(e);
        } else {
          if ("function" == typeof r) {
            for (var s = e; e; ) {
              var a = e.parentElement,
                o = es(e);
              if (a && !a.shadowRoot && !0 === r(a)) return eb(e);
              e = e.assignedSlot
                ? e.assignedSlot
                : a || o === e.ownerDocument
                  ? a
                  : o.host;
            }
            e = s;
          }
          if (ey(e)) return !e.getClientRects().length;
          if ("legacy-full" !== n) return !0;
        }
        return !1;
      },
      ew = function (e) {
        if (/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))
          for (var t = e.parentElement; t; ) {
            if ("FIELDSET" === t.tagName && t.disabled) {
              for (var n = 0; n < t.children.length; n++) {
                var r = t.children.item(n);
                if ("LEGEND" === r.tagName)
                  return !!ei.call(t, "fieldset[disabled] *") || !r.contains(e);
              }
              return !0;
            }
            t = t.parentElement;
          }
        return !1;
      },
      eC = function (e, t) {
        return !(t.disabled || ea(t) || ep(t) || ej(t, e) || em(t) || ew(t));
      },
      ek = function (e, t) {
        return !(ev(t) || 0 > eu(t)) && !!eC(e, t);
      },
      eS = function (e) {
        var t = parseInt(e.getAttribute("tabindex"), 10);
        return !!isNaN(t) || !!(t >= 0);
      },
      eN = function e(t) {
        var n = [],
          r = [];
        return (
          t.forEach(function (t, i) {
            var s = !!t.scopeParent,
              a = s ? t.scopeParent : t,
              o = eu(a, s),
              l = s ? e(t.candidates) : a;
            0 === o
              ? s
                ? n.push.apply(n, l)
                : n.push(a)
              : r.push({
                  documentOrder: i,
                  tabIndex: o,
                  item: t,
                  isScope: s,
                  content: l,
                });
          }),
          r
            .sort(ed)
            .reduce(function (e, t) {
              return (
                t.isScope ? e.push.apply(e, t.content) : e.push(t.content),
                e
              );
            }, [])
            .concat(n)
        );
      },
      eE = function (e, t) {
        var n;
        return eN(
          (n = (t = t || {}).getShadowRoot
            ? ec([e], t.includeContainer, {
                filter: ek.bind(null, t),
                flatten: !1,
                getShadowRoot: t.getShadowRoot,
                shadowRootFilter: eS,
              })
            : el(e, t.includeContainer, ek.bind(null, t))),
        );
      },
      eA = e.i(405193);
    e.i(888659);
    var eD = e.i(221173);
    e.i(436035);
    let eI = { ...W },
      eM = eI.useInsertionEffect || ((e) => e());
    function eT(e) {
      let t = W.useRef(() => {});
      return (
        eM(() => {
          t.current = e;
        }),
        W.useCallback(function () {
          for (var e = arguments.length, n = Array(e), r = 0; r < e; r++)
            n[r] = arguments[r];
          return null == t.current ? void 0 : t.current(...n);
        }, [])
      );
    }
    var eL = "undefined" != typeof document ? W.useLayoutEffect : W.useEffect;
    function eP() {
      return (eP = Object.assign.bind()).apply(this, arguments);
    }
    let eR = !1,
      eF = 0,
      e_ = () => "floating-ui-" + Math.random().toString(36).slice(2, 6) + eF++;
    function eO() {
      let [e, t] = W.useState(() => (eR ? e_() : void 0));
      return (
        eL(() => {
          null == e && t(e_());
        }, []),
        W.useEffect(() => {
          eR = !0;
        }, []),
        e
      );
    }
    let eB = eI.useId || eO;
    function eV() {
      let e = new Map();
      return {
        emit(t, n) {
          var r;
          null == (r = e.get(t)) || r.forEach((e) => e(n));
        },
        on(t, n) {
          e.set(t, [...(e.get(t) || []), n]);
        },
        off(t, n) {
          var r;
          e.set(
            t,
            (null == (r = e.get(t)) ? void 0 : r.filter((e) => e !== n)) || [],
          );
        },
      };
    }
    let ez = W.createContext(null),
      eH = W.createContext(null),
      e$ = () => {
        var e;
        return (null == (e = W.useContext(ez)) ? void 0 : e.id) || null;
      },
      eU = () => W.useContext(eH);
    function eG(e) {
      return "data-floating-ui-" + e;
    }
    function eW(e) {
      let t = (0, W.useRef)(e);
      return (
        eL(() => {
          t.current = e;
        }),
        t
      );
    }
    let eq = eG("safe-polygon");
    function eZ(e, t, n) {
      return n && !X(n)
        ? 0
        : "number" == typeof e
          ? e
          : null == e
            ? void 0
            : e[t];
    }
    function eK(e, t) {
      void 0 === t && (t = {});
      let { open: n, onOpenChange: r, dataRef: i, events: s, elements: a } = e,
        {
          enabled: o = !0,
          delay: l = 0,
          handleClose: c = null,
          mouseOnly: u = !1,
          restMs: d = 0,
          move: h = !0,
        } = t,
        p = eU(),
        m = e$(),
        f = eW(c),
        g = eW(l),
        x = eW(n),
        v = W.useRef(),
        y = W.useRef(-1),
        b = W.useRef(),
        j = W.useRef(-1),
        w = W.useRef(!0),
        C = W.useRef(!1),
        k = W.useRef(() => {}),
        S = W.useCallback(() => {
          var e;
          let t = null == (e = i.current.openEvent) ? void 0 : e.type;
          return (
            (null == t ? void 0 : t.includes("mouse")) && "mousedown" !== t
          );
        }, [i]);
      (W.useEffect(() => {
        if (o)
          return (
            s.on("openchange", e),
            () => {
              s.off("openchange", e);
            }
          );
        function e(e) {
          let { open: t } = e;
          t ||
            (clearTimeout(y.current),
            clearTimeout(j.current),
            (w.current = !0));
        }
      }, [o, s]),
        W.useEffect(() => {
          if (!o || !f.current || !n) return;
          function e(e) {
            S() && r(!1, e, "hover");
          }
          let t = ee(a.floating).documentElement;
          return (
            t.addEventListener("mouseleave", e),
            () => {
              t.removeEventListener("mouseleave", e);
            }
          );
        }, [a.floating, n, r, o, f, S]));
      let N = W.useCallback(
          function (e, t, n) {
            (void 0 === t && (t = !0), void 0 === n && (n = "hover"));
            let i = eZ(g.current, "close", v.current);
            i && !b.current
              ? (clearTimeout(y.current),
                (y.current = window.setTimeout(() => r(!1, e, n), i)))
              : t && (clearTimeout(y.current), r(!1, e, n));
          },
          [g, r],
        ),
        E = eT(() => {
          (k.current(), (b.current = void 0));
        }),
        A = eT(() => {
          if (C.current) {
            let e = ee(a.floating).body;
            ((e.style.pointerEvents = ""),
              e.removeAttribute(eq),
              (C.current = !1));
          }
        });
      (W.useEffect(() => {
        if (o && Z(a.domReference)) {
          var e;
          let t = a.domReference;
          return (
            n && t.addEventListener("mouseleave", c),
            null == (e = a.floating) || e.addEventListener("mouseleave", c),
            h && t.addEventListener("mousemove", s, { once: !0 }),
            t.addEventListener("mouseenter", s),
            t.addEventListener("mouseleave", l),
            () => {
              var e;
              (n && t.removeEventListener("mouseleave", c),
                null == (e = a.floating) ||
                  e.removeEventListener("mouseleave", c),
                h && t.removeEventListener("mousemove", s),
                t.removeEventListener("mouseenter", s),
                t.removeEventListener("mouseleave", l));
            }
          );
        }
        function t() {
          return (
            !!i.current.openEvent &&
            ["click", "mousedown"].includes(i.current.openEvent.type)
          );
        }
        function s(e) {
          if (
            (clearTimeout(y.current),
            (w.current = !1),
            (u && !X(v.current)) || (d > 0 && !eZ(g.current, "open")))
          )
            return;
          let t = eZ(g.current, "open", v.current);
          t
            ? (y.current = window.setTimeout(() => {
                x.current || r(!0, e, "hover");
              }, t))
            : r(!0, e, "hover");
        }
        function l(e) {
          if (t()) return;
          k.current();
          let r = ee(a.floating);
          if (
            (clearTimeout(j.current), f.current && i.current.floatingContext)
          ) {
            (n || clearTimeout(y.current),
              (b.current = f.current({
                ...i.current.floatingContext,
                tree: p,
                x: e.clientX,
                y: e.clientY,
                onClose() {
                  (A(), E(), N(e, !0, "safe-polygon"));
                },
              })));
            let t = b.current;
            (r.addEventListener("mousemove", t),
              (k.current = () => {
                r.removeEventListener("mousemove", t);
              }));
            return;
          }
          ("touch" === v.current && J(a.floating, e.relatedTarget)) || N(e);
        }
        function c(e) {
          t() ||
            (i.current.floatingContext &&
              (null == f.current ||
                f.current({
                  ...i.current.floatingContext,
                  tree: p,
                  x: e.clientX,
                  y: e.clientY,
                  onClose() {
                    (A(), E(), N(e));
                  },
                })(e)));
        }
      }, [a, o, e, u, d, h, N, E, A, r, n, x, p, g, f, i]),
        eL(() => {
          var e, t;
          if (
            o &&
            n &&
            null != (e = f.current) &&
            e.__options.blockPointerEvents &&
            S()
          ) {
            let e = ee(a.floating).body;
            (e.setAttribute(eq, ""),
              (e.style.pointerEvents = "none"),
              (C.current = !0));
            let n = a.floating;
            if (Z(a.domReference) && n) {
              let e = a.domReference,
                r =
                  null == p ||
                  null == (t = p.nodesRef.current.find((e) => e.id === m)) ||
                  null == (t = t.context)
                    ? void 0
                    : t.elements.floating;
              return (
                r && (r.style.pointerEvents = ""),
                (e.style.pointerEvents = "auto"),
                (n.style.pointerEvents = "auto"),
                () => {
                  ((e.style.pointerEvents = ""), (n.style.pointerEvents = ""));
                }
              );
            }
          }
        }, [o, n, m, a, p, f, S]),
        eL(() => {
          n || ((v.current = void 0), E(), A());
        }, [n, E, A]),
        W.useEffect(
          () => () => {
            (E(), clearTimeout(y.current), clearTimeout(j.current), A());
          },
          [o, a.domReference, E, A],
        ));
      let D = W.useMemo(() => {
          function e(e) {
            v.current = e.pointerType;
          }
          return {
            onPointerDown: e,
            onPointerEnter: e,
            onMouseMove(e) {
              let { nativeEvent: t } = e;
              function i() {
                w.current || x.current || r(!0, t, "hover");
              }
              (u && !X(v.current)) ||
                n ||
                0 === d ||
                (clearTimeout(j.current),
                "touch" === v.current
                  ? i()
                  : (j.current = window.setTimeout(i, d)));
            },
          };
        }, [u, r, n, x, d]),
        I = W.useMemo(
          () => ({
            onMouseEnter() {
              clearTimeout(y.current);
            },
            onMouseLeave(e) {
              N(e.nativeEvent, !1);
            },
          }),
          [N],
        );
      return W.useMemo(
        () => (o ? { reference: D, floating: I } : {}),
        [o, D, I],
      );
    }
    function eY(e, t) {
      let n = e.filter((e) => {
          var n;
          return (
            e.parentId === t && (null == (n = e.context) ? void 0 : n.open)
          );
        }),
        r = n;
      for (; r.length; )
        ((r = e.filter((e) => {
          var t;
          return null == (t = r)
            ? void 0
            : t.some((t) => {
                var n;
                return (
                  e.parentId === t.id &&
                  (null == (n = e.context) ? void 0 : n.open)
                );
              });
        })),
          (n = n.concat(r)));
      return n;
    }
    let eJ = () => ({
      getShadowRoot: !0,
      displayCheck:
        "function" == typeof ResizeObserver &&
        ResizeObserver.toString().includes("[native code]")
          ? "full"
          : "none",
    });
    function eQ(e, t) {
      let n = eE(e, eJ());
      "prev" === t && n.reverse();
      let r = n.indexOf(Y(ee(e)));
      return n.slice(r + 1)[0];
    }
    function eX() {
      return eQ(document.body, "next");
    }
    function e0() {
      return eQ(document.body, "prev");
    }
    function e1(e, t) {
      let n = t || e.currentTarget,
        r = e.relatedTarget;
      return !r || !J(n, r);
    }
    function e2(e) {
      eE(e, eJ()).forEach((e) => {
        ((e.dataset.tabindex = e.getAttribute("tabindex") || ""),
          e.setAttribute("tabindex", "-1"));
      });
    }
    function e5(e) {
      e.querySelectorAll("[data-tabindex]").forEach((e) => {
        let t = e.dataset.tabindex;
        (delete e.dataset.tabindex,
          t ? e.setAttribute("tabindex", t) : e.removeAttribute("tabindex"));
      });
    }
    let e3 = {
      border: 0,
      clip: "rect(0 0 0 0)",
      height: "1px",
      margin: "-1px",
      overflow: "hidden",
      padding: 0,
      position: "fixed",
      whiteSpace: "nowrap",
      width: "1px",
      top: 0,
      left: 0,
    };
    function e4(e) {
      "Tab" === e.key && (e.target, clearTimeout(t));
    }
    let e9 = W.forwardRef(function (e, t) {
        let [n, r] = W.useState();
        eL(
          () => (
            Q() && r("button"),
            document.addEventListener("keydown", e4),
            () => {
              document.removeEventListener("keydown", e4);
            }
          ),
          [],
        );
        let i = {
          ref: t,
          tabIndex: 0,
          role: n,
          "aria-hidden": !n || void 0,
          [eG("focus-guard")]: "",
          style: e3,
        };
        return W.createElement("span", eP({}, e, i));
      }),
      e7 = W.createContext(null),
      e6 = eG("portal");
    function e8(e) {
      void 0 === e && (e = {});
      let { id: t, root: n } = e,
        r = eB(),
        i = tt(),
        [s, a] = W.useState(null),
        o = W.useRef(null);
      return (
        eL(
          () => () => {
            (null == s || s.remove(),
              queueMicrotask(() => {
                o.current = null;
              }));
          },
          [s],
        ),
        eL(() => {
          if (!r || o.current) return;
          let e = t ? document.getElementById(t) : null;
          if (!e) return;
          let n = document.createElement("div");
          ((n.id = r),
            n.setAttribute(e6, ""),
            e.appendChild(n),
            (o.current = n),
            a(n));
        }, [t, r]),
        eL(() => {
          if (!r || o.current) return;
          let e = n || (null == i ? void 0 : i.portalNode);
          (e && !Z(e) && (e = e.current), (e = e || document.body));
          let s = null;
          t && (((s = document.createElement("div")).id = t), e.appendChild(s));
          let l = document.createElement("div");
          ((l.id = r),
            l.setAttribute(e6, ""),
            (e = s || e).appendChild(l),
            (o.current = l),
            a(l));
        }, [t, n, r, i]),
        s
      );
    }
    function te(e) {
      let { children: t, id: n, root: r = null, preserveTabOrder: i = !0 } = e,
        s = e8({ id: n, root: r }),
        [a, o] = W.useState(null),
        l = W.useRef(null),
        c = W.useRef(null),
        u = W.useRef(null),
        d = W.useRef(null),
        h = !!a && !a.modal && a.open && i && !!(r || s);
      return (
        W.useEffect(() => {
          if (s && i && (null == a || !a.modal))
            return (
              s.addEventListener("focusin", e, !0),
              s.addEventListener("focusout", e, !0),
              () => {
                (s.removeEventListener("focusin", e, !0),
                  s.removeEventListener("focusout", e, !0));
              }
            );
          function e(e) {
            s && e1(e) && ("focusin" === e.type ? e5 : e2)(s);
          }
        }, [s, i, null == a ? void 0 : a.modal]),
        W.createElement(
          e7.Provider,
          {
            value: W.useMemo(
              () => ({
                preserveTabOrder: i,
                beforeOutsideRef: l,
                afterOutsideRef: c,
                beforeInsideRef: u,
                afterInsideRef: d,
                portalNode: s,
                setFocusManagerState: o,
              }),
              [i, s],
            ),
          },
          h &&
            s &&
            W.createElement(e9, {
              "data-type": "outside",
              ref: l,
              onFocus: (e) => {
                if (e1(e, s)) {
                  var t;
                  null == (t = u.current) || t.focus();
                } else {
                  let e =
                    e0() || (null == a ? void 0 : a.refs.domReference.current);
                  null == e || e.focus();
                }
              },
            }),
          h && s && W.createElement("span", { "aria-owns": s.id, style: e3 }),
          s && eA.createPortal(t, s),
          h &&
            s &&
            W.createElement(e9, {
              "data-type": "outside",
              ref: c,
              onFocus: (e) => {
                if (e1(e, s)) {
                  var t;
                  null == (t = d.current) || t.focus();
                } else {
                  let t =
                    eX() || (null == a ? void 0 : a.refs.domReference.current);
                  (null == t || t.focus(),
                    (null == a ? void 0 : a.closeOnFocusOut) &&
                      (null == a || a.onOpenChange(!1, e.nativeEvent)));
                }
              },
            }),
        )
      );
    }
    let tt = () => W.useContext(e7);
    function tn(e) {
      let { open: t = !1, onOpenChange: n, elements: r } = e,
        i = eB(),
        s = W.useRef({}),
        [a] = W.useState(() => eV()),
        o = null != e$(),
        [l, c] = W.useState(r.reference),
        u = eT((e, t, r) => {
          ((s.current.openEvent = e ? t : void 0),
            a.emit("openchange", { open: e, event: t, reason: r, nested: o }),
            null == n || n(e, t, r));
        }),
        d = W.useMemo(() => ({ setPositionReference: c }), []),
        h = W.useMemo(
          () => ({
            reference: l || r.reference || null,
            floating: r.floating || null,
            domReference: r.reference,
          }),
          [l, r.reference, r.floating],
        );
      return W.useMemo(
        () => ({
          dataRef: s,
          open: t,
          onOpenChange: u,
          elements: h,
          events: a,
          floatingId: i,
          refs: d,
        }),
        [t, u, h, a, i, d],
      );
    }
    function tr(e) {
      void 0 === e && (e = {});
      let { nodeId: t } = e,
        n = tn({
          ...e,
          elements: { reference: null, floating: null, ...e.elements },
        }),
        r = e.rootContext || n,
        i = r.elements,
        [s, a] = W.useState(null),
        [o, l] = W.useState(null),
        c = (null == i ? void 0 : i.reference) || s,
        u = W.useRef(null),
        d = eU();
      eL(() => {
        c && (u.current = c);
      }, [c]);
      let h = (0, eD.useFloating)({
          ...e,
          elements: { ...i, ...(o && { reference: o }) },
        }),
        p = W.useCallback(
          (e) => {
            let t = Z(e)
              ? {
                  getBoundingClientRect: () => e.getBoundingClientRect(),
                  contextElement: e,
                }
              : e;
            (l(t), h.refs.setReference(t));
          },
          [h.refs],
        ),
        m = W.useCallback(
          (e) => {
            ((Z(e) || null === e) && ((u.current = e), a(e)),
              (Z(h.refs.reference.current) ||
                null === h.refs.reference.current ||
                (null !== e && !Z(e))) &&
                h.refs.setReference(e));
          },
          [h.refs],
        ),
        f = W.useMemo(
          () => ({
            ...h.refs,
            setReference: m,
            setPositionReference: p,
            domReference: u,
          }),
          [h.refs, m, p],
        ),
        g = W.useMemo(
          () => ({ ...h.elements, domReference: c }),
          [h.elements, c],
        ),
        x = W.useMemo(
          () => ({ ...h, ...r, refs: f, elements: g, nodeId: t }),
          [h, f, g, t, r],
        );
      return (
        eL(() => {
          r.dataRef.current.floatingContext = x;
          let e =
            null == d ? void 0 : d.nodesRef.current.find((e) => e.id === t);
          e && (e.context = x);
        }),
        W.useMemo(
          () => ({ ...h, context: x, refs: f, elements: g }),
          [h, f, g, x],
        )
      );
    }
    let ti = "active",
      ts = "selected";
    function ta(e, t, n) {
      let r = new Map(),
        i = "item" === n,
        s = e;
      if (i && e) {
        let { [ti]: t, [ts]: n, ...r } = e;
        s = r;
      }
      return {
        ...("floating" === n && { tabIndex: -1 }),
        ...s,
        ...t
          .map((t) => {
            let r = t ? t[n] : null;
            return "function" == typeof r ? (e ? r(e) : null) : r;
          })
          .concat(e)
          .reduce(
            (e, t) => (
              t &&
                Object.entries(t).forEach((t) => {
                  let [n, s] = t;
                  if (!(i && [ti, ts].includes(n)))
                    if (0 === n.indexOf("on")) {
                      if ((r.has(n) || r.set(n, []), "function" == typeof s)) {
                        var a;
                        (null == (a = r.get(n)) || a.push(s),
                          (e[n] = function () {
                            for (
                              var e, t = arguments.length, i = Array(t), s = 0;
                              s < t;
                              s++
                            )
                              i[s] = arguments[s];
                            return null == (e = r.get(n))
                              ? void 0
                              : e.map((e) => e(...i)).find((e) => void 0 !== e);
                          }));
                      }
                    } else e[n] = s;
                }),
              e
            ),
            {},
          ),
      };
    }
    function to(e) {
      void 0 === e && (e = []);
      let t = e.map((e) => (null == e ? void 0 : e.reference)),
        n = e.map((e) => (null == e ? void 0 : e.floating)),
        r = e.map((e) => (null == e ? void 0 : e.item)),
        i = W.useCallback((t) => ta(t, e, "reference"), t),
        s = W.useCallback((t) => ta(t, e, "floating"), n),
        a = W.useCallback((t) => ta(t, e, "item"), r);
      return W.useMemo(
        () => ({ getReferenceProps: i, getFloatingProps: s, getItemProps: a }),
        [i, s, a],
      );
    }
    function tl(e, t) {
      let [n, r] = e,
        i = !1,
        s = t.length;
      for (let e = 0, a = s - 1; e < s; a = e++) {
        let [s, o] = t[e] || [0, 0],
          [l, c] = t[a] || [0, 0];
        o >= r != c >= r && n <= ((l - s) * (r - o)) / (c - o) + s && (i = !i);
      }
      return i;
    }
    function tc(e, t) {
      return (
        e[0] >= t.x &&
        e[0] <= t.x + t.width &&
        e[1] >= t.y &&
        e[1] <= t.y + t.height
      );
    }
    function tu(e) {
      let t;
      void 0 === e && (e = {});
      let {
          buffer: n = 0.5,
          blockPointerEvents: r = !1,
          requireIntent: i = !0,
        } = e,
        s = !1,
        a = null,
        o = null,
        l = performance.now();
      function c(e, t) {
        let n = performance.now(),
          r = n - l;
        if (null === a || null === o || 0 === r)
          return ((a = e), (o = t), (l = n), null);
        let i = e - a,
          s = t - o,
          c = Math.sqrt(i * i + s * s) / r;
        return ((a = e), (o = t), (l = n), c);
      }
      let u = (e) => {
        let {
          x: r,
          y: a,
          placement: o,
          elements: l,
          onClose: u,
          nodeId: d,
          tree: h,
        } = e;
        return function (e) {
          function p() {
            (clearTimeout(t), u());
          }
          if (
            (clearTimeout(t),
            !l.domReference ||
              !l.floating ||
              null == o ||
              null == r ||
              null == a)
          )
            return;
          let { clientX: m, clientY: f } = e,
            g = [m, f],
            x = et(e),
            v = "mouseleave" === e.type,
            y = J(l.floating, x),
            b = J(l.domReference, x),
            j = l.domReference.getBoundingClientRect(),
            w = l.floating.getBoundingClientRect(),
            C = o.split("-")[0],
            k = r > w.right - w.width / 2,
            S = a > w.bottom - w.height / 2,
            N = tc(g, j),
            E = w.width > j.width,
            A = w.height > j.height,
            D = (E ? j : w).left,
            I = (E ? j : w).right,
            M = (A ? j : w).top,
            T = (A ? j : w).bottom;
          if (y && ((s = !0), !v)) return;
          if ((b && (s = !1), b && !v)) {
            s = !0;
            return;
          }
          if (
            (v && Z(e.relatedTarget) && J(l.floating, e.relatedTarget)) ||
            (h &&
              eY(h.nodesRef.current, d).some((e) => {
                let { context: t } = e;
                return null == t ? void 0 : t.open;
              }))
          )
            return;
          if (
            ("top" === C && a >= j.bottom - 1) ||
            ("bottom" === C && a <= j.top + 1) ||
            ("left" === C && r >= j.right - 1) ||
            ("right" === C && r <= j.left + 1)
          )
            return p();
          let L = [];
          switch (C) {
            case "top":
              L = [
                [D, j.top + 1],
                [D, w.bottom - 1],
                [I, w.bottom - 1],
                [I, j.top + 1],
              ];
              break;
            case "bottom":
              L = [
                [D, w.top + 1],
                [D, j.bottom - 1],
                [I, j.bottom - 1],
                [I, w.top + 1],
              ];
              break;
            case "left":
              L = [
                [w.right - 1, T],
                [w.right - 1, M],
                [j.left + 1, M],
                [j.left + 1, T],
              ];
              break;
            case "right":
              L = [
                [j.right - 1, T],
                [j.right - 1, M],
                [w.left + 1, M],
                [w.left + 1, T],
              ];
          }
          function P(e) {
            let [t, r] = e;
            switch (C) {
              case "top":
                return [
                  [E ? t + n / 2 : k ? t + 4 * n : t - 4 * n, r + n + 1],
                  [E ? t - n / 2 : k ? t + 4 * n : t - 4 * n, r + n + 1],
                  [w.left, k || E ? w.bottom - n : w.top],
                  [w.right, k ? (E ? w.bottom - n : w.top) : w.bottom - n],
                ];
              case "bottom":
                return [
                  [E ? t + n / 2 : k ? t + 4 * n : t - 4 * n, r - n],
                  [E ? t - n / 2 : k ? t + 4 * n : t - 4 * n, r - n],
                  [w.left, k || E ? w.top + n : w.bottom],
                  [w.right, k ? (E ? w.top + n : w.bottom) : w.top + n],
                ];
              case "left": {
                let e = [t + n + 1, A ? r + n / 2 : S ? r + 4 * n : r - 4 * n],
                  i = [t + n + 1, A ? r - n / 2 : S ? r + 4 * n : r - 4 * n];
                return [
                  [S || A ? w.right - n : w.left, w.top],
                  [S ? (A ? w.right - n : w.left) : w.right - n, w.bottom],
                  e,
                  i,
                ];
              }
              case "right":
                return [
                  [t - n, A ? r + n / 2 : S ? r + 4 * n : r - 4 * n],
                  [t - n, A ? r - n / 2 : S ? r + 4 * n : r - 4 * n],
                  [S || A ? w.left + n : w.right, w.top],
                  [S ? (A ? w.left + n : w.right) : w.left + n, w.bottom],
                ];
            }
          }
          if (!tl([m, f], L)) {
            if (s && !N) return p();
            if (!v && i) {
              let t = c(e.clientX, e.clientY),
                n = 0.1;
              if (null !== t && t < n) return p();
            }
            tl([m, f], P([r, a]))
              ? !s && i && (t = window.setTimeout(p, 40))
              : p();
          }
        };
      };
      return ((u.__options = { blockPointerEvents: r }), u);
    }
    e.s(
      [
        "FloatingPortal",
        () => te,
        "safePolygon",
        () => tu,
        "useFloating",
        () => tr,
        "useHover",
        () => eK,
        "useInteractions",
        () => to,
      ],
      369606,
    );
    var td = i;
    function th() {
      let [e, t] = (0, td.useState)(!1);
      return (
        (0, td.useEffect)(() => {
          t(
            "ontouchstart" in window ||
              navigator.maxTouchPoints > 0 ||
              navigator.msMaxTouchPoints > 0,
          );
        }, []),
        e
      );
    }
    e.s(["useIsTouchScreen", () => th], 304775);
    let tp = new Map();
    function tm(e) {
      if (e.nodeType === e.TEXT_NODE) return ["#text", {}];
      if (e.nodeType !== e.ELEMENT_NODE) return ["", {}];
      if ("SPAN" === e.nodeName && e.classList.contains("katex-html"))
        return ["skip", {}];
      if ("SPAN" === e.nodeName && e.classList.contains("katex-mathml"))
        return [
          "#text",
          {},
          e.querySelector('annotation[encoding="application/x-tex"]')
            ?.textContent || "",
        ];
      if (
        "SPAN" === e.nodeName &&
        (e.classList.contains("linenumber") ||
          e.classList.contains("react-syntax-highlighter-line-number"))
      )
        return ["skip", {}];
      let t = e.getAttribute("data-seg") || "";
      if ("root" === t || "skip" === t) return [t, {}];
      let n = tp.get(t);
      return [n?.type || t, n?.props || {}];
    }
    function tf({ lang: e, project: t, file: n }) {
      return `\`\`\`${e}${t ? ` project="${t}"` : ""}${n ? ` file="${n}"` : ""}
`;
    }
    let tg = new Set(["skip", "footnoteReference"]);
    function tx(e, t, n, r, i = !1) {
      let s = "";
      function a(e, t, o, l) {
        let [c, u, d] = tm(e);
        if (tg.has(c)) return;
        if ("#text" === c) {
          o && n && i && (s += "...");
          let t = "string" == typeof d ? d : e.textContent || "";
          ((s += t), l && r && i && (s += "..."));
          return;
        }
        let h = { ...t };
        switch (c) {
          case "Codeblock":
            if (u.blockId) {
              s +=
                tf({
                  lang: u.lang,
                  project: u.meta?.project,
                  file: u.meta?.file,
                }) + "...\n```\n\n";
              return;
            }
            s += `\`\`\`${u.lang || ""}
`;
            break;
          case "code":
            s += "`";
            break;
          case "b":
          case "strong":
            s += "**";
            break;
          case "i":
          case "em":
            s += "*";
            break;
          case "del":
            s += "~~";
            break;
          case "hr":
            s += "---";
            break;
          case "Math":
            s += "$$";
            break;
          case "InlineMath":
            s += "$";
            break;
          case "li":
            if (t.ol) {
              let e = u.index || "1";
              s += `${e}. `;
            } else t.ul && (s += "- ");
            break;
          case "ol":
            t.ol = !0;
            break;
          case "ul":
            t.ul = !0;
            break;
          case "h1":
            s += "# ";
            break;
          case "h2":
            s += "## ";
            break;
          case "h3":
            s += "### ";
            break;
          case "h4":
            s += "#### ";
            break;
          case "h5":
            s += "##### ";
            break;
          case "h6":
            s += "###### ";
            break;
          case "blockquote":
            s += "> ";
            break;
          case "tr":
            t.tableCols = 0;
            break;
          case "th":
          case "td":
            ((t.tableCols = (t.tableCols || 0) + 1),
              (h.tableCols = t.tableCols),
              t.tableCols > 1 && (s += " "),
              (s += "| "));
            break;
          case "a":
            s += "[";
        }
        let p = e.childNodes.length;
        for (let n = 0; n < p; n++)
          a(e.childNodes[n], t, o && 0 === n, l && n === p - 1);
        switch (c) {
          case "Codeblock":
            s += "\n```\n\n";
            break;
          case "code":
            s += "`";
            break;
          case "b":
          case "strong":
            s += "**";
            break;
          case "i":
          case "em":
            s += "*";
            break;
          case "del":
            s += "~~";
            break;
          case "Math":
            s += "$$";
            break;
          case "InlineMath":
            s += "$";
            break;
          case "li":
          case "tr":
            s += "\n";
            break;
          case "p":
          case "table":
          case "hr":
          case "blockquote":
          case "ul":
          case "ol":
          case "img":
          case "h1":
          case "h2":
          case "h3":
          case "h4":
          case "h5":
          case "h6":
            s += "\n\n";
            break;
          case "thead":
            s += "|-----".repeat(t.tableCols || 1) + "\n";
            break;
          case "a":
            s += `](${u.href || ""})`;
        }
        Object.assign(t, h);
      }
      function o(t) {
        let [n, r] = tm(t);
        switch (n) {
          case "ul":
            return a(e, { ol: !1, ul: !0 }, !0, !0);
          case "ol":
            return a(e, { ol: !0, ul: !1 }, !0, !0);
          case "Codeblock":
            ((s += `\`\`\`${r.lang || ""}
`),
              a(e, { ol: !1, ul: !1 }, !0, !0),
              (s += "\n```"));
            return;
          case "blockquote":
            (a(e, { ol: !1, ul: !1 }, !0, !0),
              (s = s
                .split("\n")
                .map((e) => `> ${e}`)
                .join("\n")));
            return;
          case "del":
            ((s += "~~"), a(e, { ol: !1, ul: !1 }, !0, !0), (s += "~~"));
            return;
          case "h1":
            return ((s += "# "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "h2":
            return ((s += "## "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "h3":
            return ((s += "### "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "h4":
            return ((s += "#### "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "h5":
            return ((s += "##### "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "h6":
            return ((s += "###### "), a(e, { ol: !1, ul: !1 }, !0, !0));
          case "table":
          case "root":
          case "img":
          case "Math":
            return a(e, { ol: !1, ul: !1 }, !0, !0);
        }
        if (t.parentNode) {
          if (t.nodeType === t.ELEMENT_NODE) {
            let n = document.createDocumentFragment(),
              r = t.cloneNode(!1);
            (r.appendChild(e), n.appendChild(r), (e = n));
          }
          o(t.parentNode);
        }
      }
      return (i ? o(t) : a(e, { ol: !1, ul: !1 }, !0, !0), s.trim());
    }
    e.s(["fragmentToMarkdown", () => tx, "segmentInfo", 0, tp], 40114);
  },
  30570,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191);
    let r = (0, n.createContext)({ containers: {}, setContainers: () => {} });
    function i({ children: e }) {
      let [i, s] = (0, n.useState)({});
      return (0, t.jsx)(r.Provider, {
        value: { containers: i, setContainers: s },
        children: e,
      });
    }
    function s() {
      return (0, n.useContext)(r);
    }
    function a(e) {
      let t = (0, n.useRef)(null),
        { setContainers: r } = s();
      return (
        (0, n.useEffect)(
          () => (
            r((n) => ({ ...n, [e]: t.current })),
            () => {
              r((t) => {
                let { [e]: n, ...r } = t;
                return r;
              });
            }
          ),
          [e, r],
        ),
        t
      );
    }
    e.s([
      "PortalProvider",
      () => i,
      "usePortal",
      () => s,
      "usePortalContainerRef",
      () => a,
    ]);
  },
  366717,
  (e) => {
    "use strict";
    var t = e.i(413886);
    e.s(["ExternalLinkIcon", () => t.default]);
  },
  397711,
  583984,
  643611,
  60339,
  233327,
  (e) => {
    "use strict";
    e.s(["SegmenterProvider", () => j, "useRegister", () => w], 397711);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(369606),
      i = e.i(221173),
      s = e.i(436035),
      a = e.i(304775),
      o = e.i(40114),
      l = e.i(430957),
      c = e.i(176248),
      u = e.i(329046),
      d = e.i(209819),
      h = e.i(443265),
      p = e.i(297239),
      m = e.i(127169);
    let f = (0, n.createContext)({}),
      g =
        "function" == typeof Intl.Segmenter
          ? new Intl.Segmenter("en", { granularity: "word" })
          : null;
    function x(e) {
      let t = [];
      if (g) for (let { segment: n } of g.segment(e)) t.push(n);
      else {
        let n = e.split(" ");
        for (let e = 0; e < n.length; e++) {
          e > 0 && t.push(" ");
          let r = n[e];
          void 0 !== r && t.push(r);
        }
      }
      return t;
    }
    let v = window.matchMedia("(prefers-reduced-motion: reduce)").matches,
      y = 8;
    function b(e) {
      return new Promise((t) => setTimeout(t, e));
    }
    function j({ streaming: e, readonly: g, children: v, messageId: j }) {
      let w = (0, p.useT)(),
        { setQuote: C } = (0, d.useChatQuote)(),
        k = (0, n.useState)(() => {
          let e = new Map(),
            t = new Map(),
            n = new Set(),
            r = new Map(),
            i = !1;
          return (s, a, o, l) => {
            a.current &&
              (e.set(s, a),
              t.set(s, o),
              n.add(s),
              r.set(s, l),
              i || ((i = !0), setTimeout(c, y)));
            async function c() {
              if (0 === n.size) {
                i = !1;
                return;
              }
              let s = n.values().next().value;
              if (void 0 === s) {
                i = !1;
                return;
              }
              for (let e of n) e < s && (s = e);
              n.delete(s);
              let a = e.get(s),
                o = t.get(s),
                l = r.get(s);
              if (a?.current && (l?.(), o?.current)) {
                let e = a.current.textContent;
                o.current.startsWith(e) ||
                  ((a.current.textContent = ""), (e = ""));
                let t = x(o.current.slice(e.length));
                for (let n = 0; n < t.length && ((e += t[n]), a.current); n++)
                  ((a.current.textContent = e), " " !== t[n] && (await b(y)));
              }
              setTimeout(c, y);
            }
          };
        })[0],
        S = !0 !== g,
        N = (0, n.useRef)(null),
        [E, A] = (0, n.useState)(null),
        D = (0, a.useIsTouchScreen)(),
        { refs: I, floatingStyles: M } = (0, r.useFloating)({
          placement: D ? "bottom" : "top",
          middleware: [
            (0, i.offset)(12),
            (0, i.inline)(),
            (0, i.flip)({ padding: 6 }),
          ],
          whileElementsMounted: s.autoUpdate,
        }),
        T = (0, n.useRef)(() => "");
      (0, n.useEffect)(() => {
        let e = !1,
          t = () => {
            e = !1;
            let t = window.getSelection();
            if (null === t || !t.rangeCount) return void A(null);
            let n = t.getRangeAt(0);
            if (n.collapsed) return void A(null);
            let r = N.current?.contains(n.commonAncestorContainer),
              i = N.current;
            if (!r) {
              let e = !1,
                t = n.commonAncestorContainer;
              if (t instanceof HTMLElement) {
                let n = t.closest('[data-seg="code-root"]');
                n && n instanceof HTMLElement && ((e = !0), (i = n));
              }
              if (!e) return void A(null);
            }
            for (; 0 === n.endOffset; ) n.setEndBefore(n.endContainer);
            (S &&
              I.setReference({
                getBoundingClientRect: () => n.getBoundingClientRect(),
                getClientRects: () => {
                  let e = n.getClientRects(),
                    t = [];
                  t.item = (e) => t[e];
                  for (let n = 0; n < e.length; n++) {
                    let r = e[n];
                    r && r.width > 0.1 && r.height > 0.1 && t.push(r);
                  }
                  return t;
                },
              }),
              (e = !0),
              (T.current = (e = !0) => {
                let t = n.cloneContents();
                return (0, o.fragmentToMarkdown)(
                  t,
                  n.commonAncestorContainer,
                  n.startOffset > 0,
                  n.endContainer.textContent?.length !== n.endOffset,
                  e,
                );
              }),
              S && A(i));
          };
        function n(t) {
          if (!e || !t.clipboardData) return;
          let n = T.current(!1);
          (t.clipboardData.setData("text/markdown", n),
            t.clipboardData.setData("text/plain", n),
            t.preventDefault());
        }
        return (
          document.addEventListener("selectionchange", t),
          document.addEventListener("keyup", t),
          document.addEventListener("copy", n),
          () => {
            (document.removeEventListener("selectionchange", t),
              document.removeEventListener("keyup", t),
              document.removeEventListener("copy", n));
          }
        );
      }, [I, S]);
      let [L, P] = (0, n.useState)(!1);
      ((0, n.useEffect)(() => {
        let e = N.current;
        if (!e) return;
        let t = (e) => {
            I.floating.current?.contains(e.target) || P(!0);
          },
          n = () => {
            P(!1);
          };
        return (
          e.addEventListener("pointerdown", t),
          e.addEventListener("pointerup", n),
          e.addEventListener("pointerleave", n),
          () => {
            (e.removeEventListener("pointerdown", t),
              e.removeEventListener("pointerup", n),
              e.removeEventListener("pointerleave", n));
          }
        );
      }, [I.floating]),
        (0, m.useShortcut)((e) => {
          "q" === e.key &&
            E &&
            (C(T.current()),
            window.getSelection()?.removeAllRanges(),
            e.stopPropagation(),
            e.preventDefault());
        }));
      let R = (0, n.useMemo)(() => ({ animate: e ? k : void 0 }), [e, k]);
      return (0, t.jsxs)("div", {
        ref: N,
        className: "w-full",
        children: [
          E &&
            (0, t.jsx)(r.FloatingPortal, {
              root: E,
              children: (0, t.jsxs)("div", {
                className:
                  "bg-v0-background-100 shadow-base-expand absolute left-0 top-0 z-50 flex select-none items-center gap-1 rounded-lg p-1",
                "data-quote-button": !0,
                ref: I.setFloating,
                style: { ...M, pointerEvents: L ? "none" : void 0 },
                children: [
                  (0, t.jsxs)(c.Button, {
                    className:
                      "hover:text-v0-gray-1000 rounded-md px-0.5 py-0 text-sm text-v0-gray-900",
                    onClick: () => {
                      (C(T.current()),
                        window.getSelection()?.removeAllRanges());
                    },
                    size: "xs",
                    variant: "ghost",
                    children: [
                      w("segmenterProvider.quote"),
                      (0, t.jsx)(h.Kbd, { children: "Q" }),
                    ],
                  }),
                  (0, t.jsx)("div", { className: "bg-v0-alpha-400 h-5 w-px" }),
                  (0, t.jsx)(u.DownvoteButton, {
                    className: "text-v0-gray-900",
                    messageId: j,
                    quoteRef: T,
                    tooltip: "Downvote Selection",
                    variant: "quote",
                  }),
                ],
              }),
            }),
          (0, t.jsx)(l.Prose, {
            "data-seg": "root",
            children: (0, t.jsx)(f.Provider, { value: R, children: v }),
          }),
        ],
      });
    }
    function w({ id: e, content: t, type: r, props: i }) {
      let { animate: s } = (0, n.use)(f),
        a = (0, n.useRef)(null),
        l = (0, n.useRef)(t),
        [c, u] = (0, n.useState)(!1),
        d = (0, n.useId)();
      (0, n.useEffect)(
        () => (
          o.segmentInfo.set(d, { type: r, props: i }),
          () => {
            o.segmentInfo.delete(d);
          }
        ),
      );
      let h = { "data-seg": d };
      return (
        ((0, n.useEffect)(() => {
          if (v) {
            let e = a.current;
            if (!e) return;
            ((e.style.transition = ""),
              u(!0),
              "string" == typeof t && (e.textContent = t));
            return;
          }
          if (((l.current = t), !s || void 0 === e)) return;
          let n = setTimeout(() => {
            s(e, a, l, () => u(!0));
          }, 20);
          return () => clearTimeout(n);
        }, [s, e, t]),
        s && void 0 !== e)
          ? ((h.style = { opacity: +!!c, transition: "opacity .5s ease" }),
            (h.ref = a),
            "string" == typeof t && (h.children = ""))
          : "string" == typeof t && (h.children = t),
        { elementProps: h }
      );
    }
    var C = t,
      k = e.i(405193),
      S = e.i(30570),
      N = r,
      E = i,
      A = s,
      D = n,
      I = e.i(70165);
    function M({ id: e }) {
      let t = (0, S.usePortalContainerRef)(e);
      return (0, C.jsx)("span", { ref: t });
    }
    function T({ label: e, idPrefix: t }) {
      let [n, r] = (0, D.useState)(!1),
        i = (0, I.useIsMobile)(),
        {
          refs: s,
          floatingStyles: a,
          context: o,
        } = (0, N.useFloating)({
          placement: i ? "top" : "top-start",
          middleware: [
            (0, E.shift)({ padding: 6 }),
            (0, E.offset)(4),
            (0, E.flip)({ padding: 6 }),
          ],
          open: n,
          onOpenChange: r,
          whileElementsMounted: A.autoUpdate,
        }),
        l = (0, N.useHover)(o, {
          handleClose: (0, N.safePolygon)({ buffer: 1 }),
        }),
        { getReferenceProps: c, getFloatingProps: u } = (0, N.useInteractions)([
          l,
        ]),
        d = `${t}${e}`;
      return "vercel_knowledge_base" === e
        ? null
        : (0, C.jsxs)("span", {
            ref: s.setReference,
            ...c(),
            className: "-mt-1 ml-0.5 inline-flex size-4 align-text-top",
            children: [
              (0, C.jsx)("a", {
                className:
                  "bg-v0-alpha-400 hover:bg-v0-alpha-400 focus:bg-v0-alpha-400 inline-block size-4 select-none rounded-full text-center font-mono text-[10px] leading-4 text-v0-gray-900 no-underline transition-colors focus:text-v0-black",
                href: `#def-${d}`,
                id: `ref-${d}`,
                onBlur: () => r(!1),
                onFocus: () => r(!0),
                tabIndex: 0,
                children: e,
              }),
              n
                ? (0, C.jsx)("span", {
                    ref: s.setFloating,
                    style: a,
                    ...u(),
                    className:
                      "bg-v0-background-100 shadow-base z-10 select-none rounded-md p-2 text-xs",
                    children: (0, C.jsx)(M, { id: d }),
                  })
                : null,
            ],
          });
    }
    function L({ id: e, children: t }) {
      let { containers: n } = (0, S.usePortal)(),
        r = n[e];
      return r ? (0, k.createPortal)(t, r) : null;
    }
    e.s(["PortalToId", () => L, "Reference", () => T], 583984);
    var P = t,
      R = n,
      F = t,
      _ = e.i(903500),
      O = e.i(431141),
      B = e.i(304649);
    function V({ knowledgeSource: e, className: t }) {
      switch (e?.toLowerCase()) {
        case "nextjs.org":
          return (0, F.jsx)(O.default, {
            alt: "Next.js Logo",
            className: t,
            height: 16,
            src: "/chat-static/citation/nextjs.svg",
            width: 16,
          });
        case "vercel.com":
        case "sdk.vercel.ai":
        case "ai-sdk.dev":
          return (0, F.jsx)(O.default, {
            alt: "Vercel Logo",
            className: t,
            height: 16,
            src: "/chat-static/citation/vercel.svg",
            width: 16,
          });
        case "turbo.build":
        case "turborepo.com":
          return (0, F.jsx)(O.default, {
            alt: "Turbopack Logo",
            className: t,
            height: 16,
            src: "/chat-static/citation/turbo.svg",
            width: 16,
          });
        case "flags-sdk.dev":
          return (0, F.jsx)(O.default, {
            alt: "Vercel Logo",
            className: t,
            height: 16,
            src: "/chat-static/citation/flags.svg",
            width: 16,
          });
        case "svelte.dev":
          return (0, F.jsx)(O.default, {
            alt: "Svelte Logo",
            className: (0, B.cn)(t, "rounded-none"),
            height: 16,
            src: "/chat-static/citation/svelte.svg",
            width: 16,
          });
        case "docs.stripe.com":
          return (0, F.jsx)(O.default, {
            alt: "Stripe Logo",
            className: (0, B.cn)(t, "rounded-none"),
            height: 12,
            src: "/chat-static/citation/stripe.svg",
            width: 12,
          });
        case "remix.run":
          return (0, F.jsx)(O.default, {
            alt: "Remix Logo",
            className: (0, B.cn)(t, "rounded-none"),
            height: 12,
            src: "/chat-static/citation/remix.svg",
            width: 12,
          });
        case "vuejs.org":
          return (0, F.jsx)(O.default, {
            alt: "Vue Logo",
            className: (0, B.cn)(t, "rounded-none"),
            height: 16,
            src: "/chat-static/citation/vue.svg",
            width: 16,
          });
        case "react.dev":
          return (0, F.jsx)(O.default, {
            alt: "React Logo",
            className: (0, B.cn)(t, "rounded-none"),
            height: 16,
            src: "/chat-static/citation/react.svg",
            width: 16,
          });
        case "typescriptlang.org":
          return (0, F.jsx)(O.default, {
            alt: "Typescript Logo",
            className: (0, B.cn)(t),
            height: 16,
            src: "/chat-static/citation/ts.svg",
            width: 16,
          });
        case "github.com":
          return (0, F.jsx)(O.default, {
            alt: "Github Logo",
            className: t,
            height: 16,
            src: "/chat-static/citation/github.svg",
            width: 16,
          });
        case "ui.shadcn.com":
          return (0, F.jsx)(O.default, {
            alt: "shadcn/ui Logo",
            className: (0, B.cn)(t),
            height: 16,
            src: "/chat-static/citation/shadcn-ui.svg",
            width: 16,
          });
        case "radix-ui.com":
          return (0, F.jsx)(O.default, {
            alt: "Radix UI Logo",
            className: (0, B.cn)(t, "size-3.5 translate-x-0.5 rounded-none"),
            height: 14,
            src: "/chat-static/citation/radix-ui.svg",
            width: 14,
          });
        case "orm.drizzle.team":
          return (0, F.jsx)(O.default, {
            alt: "Drizzle Logo",
            className: (0, B.cn)(t, "dark:invert"),
            height: 22,
            src: "/chat-static/citation/drizzle.svg",
            width: 22,
          });
        case "supabase.com":
          return (0, F.jsx)(O.default, {
            alt: "Supabase Logo",
            className: (0, B.cn)(t),
            height: 14,
            src: "/chat-static/citation/supabase.svg",
            width: 14,
          });
        case "www.prisma.io":
          return (0, F.jsx)(O.default, {
            alt: "Prisma Logo",
            className: (0, B.cn)(t, "dark:invert"),
            height: 14,
            src: "/chat-static/citation/prisma.svg",
            width: 14,
          });
        case "playwright.dev":
          return (0, F.jsx)(O.default, {
            alt: "Playwright Logo",
            className: (0, B.cn)(t),
            height: 14,
            src: "/chat-static/citation/playwright.svg",
            width: 14,
          });
        case "neon.tech":
          return (0, F.jsx)(O.default, {
            alt: "Neon Logo",
            className: (0, B.cn)(t),
            height: 14,
            src: "/chat-static/citation/neon.svg",
            width: 14,
          });
        case "upstash.com":
          return (0, F.jsx)(O.default, {
            alt: "Upstash Logo",
            className: (0, B.cn)(t),
            height: 14,
            src: "/chat-static/citation/upstash.svg",
            width: 14,
          });
        case "v0.app":
          return (0, F.jsx)(O.default, {
            alt: "v0 Logo",
            className: (0, B.cn)(t, "dark:invert"),
            height: 14,
            src: "/chat-static/citation/v0.svg",
            width: 14,
          });
        default:
          return (0, F.jsx)(_.Globe, {
            className: (0, B.cn)(t, "rounded-none"),
            size: 16,
          });
      }
    }
    (e.s(["CitationSourceIcon", () => V], 643611), e.i(632485));
    var z = e.i(366717),
      H = e.i(95020),
      $ = e.i(7284),
      U = e.i(589654),
      G = e.i(657736),
      W = e.i(403055);
    let q = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.75011 4H6.00011V5.5H6.75011H9.43945L5.46978 9.46967L4.93945 10L6.00011 11.0607L6.53044 10.5303L10.499 6.56182V9.25V10H11.999V9.25V5C11.999 4.44772 11.5512 4 10.999 4H6.75011Z" fill="currentColor"/>',
    );
    function Z({ citations: e }) {
      return e.map((e) => {
        let t = `cite-${e.messageId}-${e.index}`;
        return (0, P.jsx)(
          L,
          {
            id: t,
            children: (0, P.jsxs)("a", {
              className:
                "inline-flex min-w-0 items-baseline gap-1 no-underline",
              href: e.url,
              rel: "noopener noreferrer",
              target: "_blank",
              children: [
                (0, P.jsx)("span", {
                  className: "line-clamp-1",
                  children: e.title,
                }),
                (0, P.jsx)(z.ExternalLinkIcon, {
                  className: "size-3 shrink-0",
                }),
              ],
            }),
          },
          t,
        );
      });
    }
    function K({ urls: e, className: t }) {
      let [n, r] = (0, R.useState)(0),
        i = ["Browsing search results"];
      (e?.forEach((e, t) => {
        let n = e.replace(/^https?:\/\//, "");
        i[t + 1] = `Browsing web page: ${n}`;
      }),
        (i[Object.keys(i).length] =
          `Synthesizing ${e?.length} source${e?.length === 1 ? "" : "s"}`));
      let s = Object.keys(i).length;
      return ((0, R.useEffect)(() => {
        (async () => {
          for (let e = 0; e < s; e++)
            (0 !== e && (await (0, W.sleep)(2e3)), r(e));
        })();
      }, [s]),
      e && 0 !== e.length)
        ? (0, P.jsx)("div", {
            className: (0, $.default)("mt-[6px]!", t),
            children: (0, P.jsx)("div", {
              className:
                "shimmer relative flex items-center gap-1.5 text-v0-gray-900",
              children: (0, P.jsxs)(U.AnimatePresence, {
                mode: "popLayout",
                presenceAffectsLayout: !0,
                children: [
                  (0, P.jsx)(H.Globe, {
                    className: "size-4 shrink-0 leading-[normal]",
                  }),
                  (0, P.jsx)("div", {
                    className: "mask relative grow leading-[15px]",
                    children: (0, P.jsx)(U.AnimatePresence, {
                      initial: !1,
                      mode: "popLayout",
                      presenceAffectsLayout: !0,
                      children: (0, P.jsx)(
                        G.motion.span,
                        {
                          animate: { y: 0 },
                          className:
                            "inline-block grow text-ellipsis whitespace-nowrap text-[15px] leading-none md:w-[calc(100%-100px)]",
                          exit: { y: -24 },
                          initial: { y: 24 },
                          layout: !0,
                          transition: { type: "tween", duration: 0.3 },
                          children: i[n],
                        },
                        `carousel-${n}`,
                      ),
                    }),
                  }),
                ],
              }),
            }),
          })
        : null;
    }
    (e.s(["ArrowUpRightSmall", 0, q], 60339),
      e.s(
        ["CitationsCarousel", () => K, "CitationsPortalRenderer", () => Z],
        233327,
      ));
  },
  546693,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Cable", [
      [
        "path",
        {
          d: "M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",
          key: "10bnsj",
        },
      ],
      [
        "path",
        { d: "M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9", key: "1eqmu1" },
      ],
      ["path", { d: "M21 21v-2h-4", key: "14zm7j" }],
      ["path", { d: "M3 5h4V3", key: "z442eg" }],
      [
        "path",
        {
          d: "M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",
          key: "ebdjd7",
        },
      ],
    ]);
    e.s(["default", () => t]);
  },
  816914,
  (e) => {
    "use strict";
    var t = e.i(546693);
    e.s(["Cable", () => t.default]);
  },
  918780,
  (e) => {
    e.v({
      animate: "gauge-module__hRc8Aq__animate",
      arc: "gauge-module__hRc8Aq__arc",
      arcSecondary: "gauge-module__hRc8Aq__arcSecondary",
      circle: "gauge-module__hRc8Aq__circle",
      content: "gauge-module__hRc8Aq__content",
      fadeIn: "gauge-module__hRc8Aq__fadeIn",
    });
  },
  985353,
  708306,
  616593,
  229983,
  404836,
  917772,
  (e) => {
    "use strict";
    e.s(["Toolcall", () => B], 985353);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(816914),
      i = t,
      s = n,
      a = e.i(589654),
      o = e.i(304649),
      l = e.i(975294),
      c = n,
      u = e.i(719271),
      d = e.i(633182),
      h = e.i(28924),
      p = e.i(729094),
      m = e.i(987176),
      f = e.i(504015),
      g = e.i(713416),
      x = e.i(266684);
    let v = "Collapsible",
      [y, b] = (0, d.createContextScope)(v),
      [j, w] = y(v),
      C = (0, c.forwardRef)((e, t) => {
        let {
            __scopeCollapsible: n,
            open: r,
            defaultOpen: i,
            disabled: s,
            onOpenChange: a,
            ...o
          } = e,
          [u = !1, d] = (0, h.useControllableState)({
            prop: r,
            defaultProp: i,
            onChange: a,
          });
        return (0, c.createElement)(
          j,
          {
            scope: n,
            disabled: s,
            contentId: (0, x.useId)(),
            open: u,
            onOpenToggle: (0, c.useCallback)(() => d((e) => !e), [d]),
          },
          (0, c.createElement)(
            f.Primitive.div,
            (0, l.default)(
              { "data-state": D(u), "data-disabled": s ? "" : void 0 },
              o,
              { ref: t },
            ),
          ),
        );
      }),
      k = "CollapsibleTrigger",
      S = (0, c.forwardRef)((e, t) => {
        let { __scopeCollapsible: n, ...r } = e,
          i = w(k, n);
        return (0, c.createElement)(
          f.Primitive.button,
          (0, l.default)(
            {
              type: "button",
              "aria-controls": i.contentId,
              "aria-expanded": i.open || !1,
              "data-state": D(i.open),
              "data-disabled": i.disabled ? "" : void 0,
              disabled: i.disabled,
            },
            r,
            {
              ref: t,
              onClick: (0, u.composeEventHandlers)(e.onClick, i.onOpenToggle),
            },
          ),
        );
      }),
      N = "CollapsibleContent",
      E = (0, c.forwardRef)((e, t) => {
        let { forceMount: n, ...r } = e,
          i = w(N, e.__scopeCollapsible);
        return (0, c.createElement)(
          g.Presence,
          { present: n || i.open },
          ({ present: e }) =>
            (0, c.createElement)(
              A,
              (0, l.default)({}, r, { ref: t, present: e }),
            ),
        );
      }),
      A = (0, c.forwardRef)((e, t) => {
        let { __scopeCollapsible: n, present: r, children: i, ...s } = e,
          a = w(N, n),
          [o, u] = (0, c.useState)(r),
          d = (0, c.useRef)(null),
          h = (0, m.useComposedRefs)(t, d),
          g = (0, c.useRef)(0),
          x = g.current,
          v = (0, c.useRef)(0),
          y = v.current,
          b = a.open || o,
          j = (0, c.useRef)(b),
          C = (0, c.useRef)();
        return (
          (0, c.useEffect)(() => {
            let e = requestAnimationFrame(() => (j.current = !1));
            return () => cancelAnimationFrame(e);
          }, []),
          (0, p.useLayoutEffect)(() => {
            let e = d.current;
            if (e) {
              ((C.current = C.current || {
                transitionDuration: e.style.transitionDuration,
                animationName: e.style.animationName,
              }),
                (e.style.transitionDuration = "0s"),
                (e.style.animationName = "none"));
              let t = e.getBoundingClientRect();
              ((g.current = t.height),
                (v.current = t.width),
                j.current ||
                  ((e.style.transitionDuration = C.current.transitionDuration),
                  (e.style.animationName = C.current.animationName)),
                u(r));
            }
          }, [a.open, r]),
          (0, c.createElement)(
            f.Primitive.div,
            (0, l.default)(
              {
                "data-state": D(a.open),
                "data-disabled": a.disabled ? "" : void 0,
                id: a.contentId,
                hidden: !b,
              },
              s,
              {
                ref: h,
                style: {
                  "--radix-collapsible-content-height": x ? `${x}px` : void 0,
                  "--radix-collapsible-content-width": y ? `${y}px` : void 0,
                  ...e.style,
                },
              },
            ),
            b && i,
          )
        );
      });
    function D(e) {
      return e ? "open" : "closed";
    }
    let I = C,
      M = S,
      T = E;
    var L = e.i(222431),
      P = e.i(442221);
    let R = 250;
    function F({ name: e, files: t = [], animated: n = !0 }) {
      let [r, l] = (0, s.useState)(n),
        [c, u] = (0, s.useState)(t.length < 2);
      (0, s.useEffect)(() => {
        if (!n) return void l(!1);
        let e = setTimeout(() => l(!1), R);
        return () => clearTimeout(e);
      }, [t, n]);
      let d = n
          ? "animate-shimmer translate-y-px bg-size-[800%_100%] bg-clip-text text-sm text-transparent"
          : void 0,
        h = n
          ? {
              backgroundImage:
                "linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)",
            }
          : void 0;
      return (0, i.jsx)("div", {
        className: "font-mono text-v0-gray-900",
        children: (0, i.jsxs)(I, {
          open: c,
          onOpenChange: u,
          children: [
            (0, i.jsx)(M, {
              asChild: !0,
              children: (0, i.jsx)("button", {
                className: (0, o.cn)(
                  d,
                  "mb-2 flex cursor-pointer items-center",
                ),
                style: h,
                children: r
                  ? e
                    ? (0, i.jsxs)(i.Fragment, {
                        children: [
                          "Scanning ",
                          t.length,
                          " files inside /",
                          e,
                          "...",
                        ],
                      })
                    : (0, i.jsxs)(i.Fragment, {
                        children: ["Reading ", t.length, " files..."],
                      })
                  : (0, i.jsxs)(i.Fragment, {
                      children: [
                        e
                          ? (0, i.jsxs)(i.Fragment, {
                              children: [
                                "Scanned ",
                                t.length,
                                " files inside ",
                                e,
                                " ",
                              ],
                            })
                          : (0, i.jsxs)(i.Fragment, {
                              children: ["Read ", t.length, " files "],
                            }),
                        c
                          ? (0, i.jsx)(L.ChevronDown, {
                              className: "ml-1 h-3 w-3",
                            })
                          : (0, i.jsx)(P.ChevronRight, {
                              className: "ml-1 h-3 w-3",
                            }),
                      ],
                    }),
              }),
            }),
            (0, i.jsx)(T, {
              className: "border-l border-v0-gray-200",
              children: (0, i.jsx)(a.AnimatePresence, {
                children: (0, i.jsx)("ul", {
                  className: "m-0 flex list-none flex-col gap-2 p-0",
                  children: t.map((e) =>
                    (0, i.jsx)(
                      "li",
                      { className: "m-0 list-none p-0 text-sm", children: e },
                      e,
                    ),
                  ),
                }),
              }),
            }),
          ],
        }),
      });
    }
    var _ = e.i(818273);
    function O(e) {
      return Object.keys(e);
    }
    let B = n.default.memo(({ source: e }) => {
      let n = (0, _.useIsStreaming)(),
        i = e.replace(/[^]*Tool call result:\n/, ""),
        s = e.replace(/\nTool call result:[^]+/, ""),
        a = null,
        o = null;
      try {
        ((a = JSON.parse(s)), (o = JSON.parse(i)));
      } catch (e) {}
      if (o && (a?.type === "read_dir" || a?.type === "read_file"))
        return (0, t.jsx)(F, {
          name: "read_dir" === a.type ? a.dir : void 0,
          files:
            "read_dir" === a.type
              ? "files" in o
                ? o.files
                : []
              : O(("content" in o ? o.content : {}) || {}),
          animated: n || !1,
        });
      let l =
        a?.type === "computer" && "screenshot" === a.action && o && "data" in o;
      return (0, t.jsx)("p", {
        className:
          "inline-flex cursor-pointer rounded bg-cyan-600/10 px-1.5 py-0.5 text-sm text-cyan-700",
        children: (0, t.jsxs)("details", {
          children: [
            (0, t.jsxs)("summary", {
              className: "inline-flex items-center gap-2",
              children: [(0, t.jsx)(r.Cable, { className: "h-3.5 w-3.5" }), s],
            }),
            (0, t.jsx)("div", {
              className: "mb-1 rounded bg-cyan-800/10 p-1 font-mono text-xs",
              children: l
                ? (0, t.jsx)("img", {
                    className: "max-h-64 max-w-full",
                    src: `data:image/png;base64,${o.data}`,
                    alt: "Tool call result",
                  })
                : i,
            }),
          ],
        }),
      });
    });
    B.displayName = "Toolcall";
    var V = t,
      z = e.i(376346),
      H = e.i(762585),
      $ = e.i(60339),
      U = e.i(678845),
      G = e.i(782742),
      W = t,
      q = n,
      Z = e.i(7284),
      K = e.i(918780);
    let Y = {
        0: "hsl(var(--red-600))",
        50: "hsl(var(--amber-600))",
        90: "hsl(var(--green-600))",
      },
      J = { tiny: 20, small: 32, medium: 64, large: 128 },
      Q = { tiny: 3, small: 2, medium: 1, large: 1 },
      X = 100;
    function ee({
      colors: e = Y,
      value: t,
      placeholder: n,
      className: r,
      arcPriority: i = "primary",
      style: s,
      size: a,
      deprecatedSize: o,
      children: l,
      showValue: c = !1,
      ...u
    }) {
      let d = n || !1,
        h = void 0 !== o ? o : J[a],
        [p, m] = (0, q.useMemo)(() => {
          if ("primary" in e) return [e.primary, e.secondary];
          let n = Object.keys(e).map(Number);
          if (0 === n.length) return [void 0, void 0];
          let r = n.filter((e) => t >= e).pop();
          return [void 0 !== r ? e[r] : void 0, void 0];
        }, [e, t]),
        {
          circleProps: f,
          circumference: g,
          offsetFactor: x,
          segmentGap: v,
          primaryStrokePercent: y,
          secondaryStrokePercent: b,
        } = (0, q.useMemo)(() => {
          let e = h <= J.tiny ? 15 : 10,
            n = 2 * Math.PI * (X / 2 - e / 2),
            r = X / n,
            s = {
              cx: X / 2,
              cy: X / 2,
              r: X / 2 - e / 2,
              strokeWidth: e,
              strokeDashoffset: 0,
              strokeLinecap: "round",
              strokeLinejoin: "round",
            },
            o = Math.round(e * r) + Q[a];
          (0 === t || t >= 100) && (o = 0);
          let l = 0.5 * ("equal" === i),
            c = t - 2 * o * l,
            u = 100 - t - 2 * o * (1 - l) - Math.max(1 - c, 0);
          return {
            circleProps: s,
            circumference: n,
            segmentGap: o,
            primaryStrokePercent: c,
            secondaryStrokePercent: u,
            offsetFactor: l,
          };
        }, [i, h, a, t]);
      return (0, W.jsxs)("div", {
        className: (0, Z.clsx)(K.default.circle, r, {
          [K.default.animate || ""]: !d,
        }),
        "data-geist-progress-circle": "",
        "data-version": "v1",
        style: {
          ...s,
          "--circle-size": `${X}px`,
          "--circumference": g,
          "--percent-to-px": `${g / 100}px`,
          "--gap-percent": v,
          "--offset-factor": x,
        },
        ...u,
        children: [
          (0, W.jsxs)("svg", {
            fill: "none",
            height: h,
            strokeWidth: "2",
            viewBox: `0 0 ${X} ${X}`,
            width: h,
            children: [
              (0, W.jsx)("circle", {
                style: {
                  opacity: b < 0 || 100 === t ? 0 : 1,
                  "--stroke-percent": b,
                },
                ...f,
                className: K.default.arcSecondary,
                stroke: m || "hsl(var(--alpha-400))",
              }),
              (0, W.jsx)("circle", {
                ...f,
                className: K.default.arc,
                "data-geist-progress-circle-fg": "",
                stroke: p || "var(--geist-foreground)",
                style: {
                  opacity: +(0 !== t),
                  "--stroke-percent": Math.min(100 - v, y),
                },
              }),
            ],
          }),
          l || c
            ? (0, W.jsx)("div", {
                className: K.default.content,
                children:
                  l ||
                  (0, W.jsx)("div", {
                    className: "text-[11px] font-medium text-v0-gray-900",
                    children: t,
                  }),
              })
            : null,
        ],
      });
    }
    let et = [1.8, 3],
      en = [2.5, 4],
      er = [200, 600],
      ei = [0.1, 0.25],
      es = (e, t) => {
        let n = parseFloat(e);
        return n < t[0] ? "good" : n < t[1] ? "needsImprovement" : "poor";
      };
    function ea() {
      return (0, V.jsxs)(z.Card, {
        className: "not-prose w-full max-w-lg shadow-sm",
        children: [
          (0, V.jsx)(z.CardHeader, {
            className: "flex p-3",
            children: (0, V.jsxs)(z.CardTitle, {
              className:
                "mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",
              children: [
                (0, V.jsx)("span", { children: "Lighthouse Report" }),
                (0, V.jsx)(H.Skeleton, { className: "h-4 w-16" }),
              ],
            }),
          }),
          (0, V.jsxs)(z.CardContent, {
            className: "p-0",
            children: [
              (0, V.jsx)("div", {
                className: "grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",
                children: Array.from({ length: 4 }).map((e, t) =>
                  (0, V.jsxs)(
                    "div",
                    {
                      className:
                        "bg-v0-background-300 flex items-center gap-3 rounded-[6px] border p-2",
                      children: [
                        (0, V.jsx)(ee, {
                          value: 0,
                          size: "small",
                          children: (0, V.jsx)(G.ChartActivity, {
                            className: "font-bold text-[hsl(var(--gray-500))]",
                            size: 18,
                          }),
                        }),
                        (0, V.jsx)(H.Skeleton, { className: "h-4 w-16" }),
                      ],
                    },
                    t,
                  ),
                ),
              }),
              (0, V.jsxs)("div", {
                className:
                  "flex flex-col border-t border-v0-gray-200 p-3 text-v0-gray-900",
                children: [
                  (0, V.jsx)(ec, {
                    label: "First Contentful Paint",
                    isLoading: !0,
                    hasMutedBackground: !0,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Largest Contentful Paint",
                    isLoading: !0,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Total Blocking Time",
                    isLoading: !0,
                    hasMutedBackground: !0,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Cumulative Layout Shift",
                    isLoading: !0,
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function eo({ data: e, href: t }) {
      if (!e)
        return (0, V.jsx)(z.Card, {
          className: "not-prose w-full max-w-lg shadow-sm",
          children: (0, V.jsx)(z.CardContent, {
            className: "p-3",
            children: (0, V.jsxs)("div", {
              className:
                "bg-v0-background-200 flex flex-col items-center justify-center rounded-[6px] p-8",
              children: [
                (0, V.jsx)("div", {
                  className:
                    "mb-4 rounded-full border border-v0-red-300 bg-v0-red-200 p-2 text-v0-red-700",
                  children: (0, V.jsx)(U.CrossCircle, {}),
                }),
                (0, V.jsx)("h3", {
                  className: "mb-2 font-medium text-v0-gray-1000",
                  children: "Lighthouse Report Failed",
                }),
                (0, V.jsx)("p", {
                  className: "max-w-96 text-center text-v0-gray-900",
                  children:
                    "Something went wrong while analyzing the performance of the website. Please try again later.",
                }),
              ],
            }),
          }),
        });
      let {
        categories: n,
        firstContentfulPaint: r,
        largestContentfulPaint: i,
        totalBlockingTime: s,
        cumulativeLayoutShift: a,
      } = JSON.parse(decodeURIComponent(e));
      return (0, V.jsxs)(z.Card, {
        className: "not-prose w-full max-w-lg shadow-sm",
        children: [
          (0, V.jsx)(z.CardHeader, {
            className: "flex p-3",
            children: (0, V.jsxs)(z.CardTitle, {
              className:
                "mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",
              children: [
                (0, V.jsx)("span", { children: "Lighthouse Report" }),
                (0, V.jsxs)("a", {
                  href: t,
                  className: "flex items-center font-normal hover:opacity-70",
                  children: [t, (0, V.jsx)($.ArrowUpRightSmall, {})],
                }),
              ],
            }),
          }),
          (0, V.jsxs)(z.CardContent, {
            className: "p-0",
            children: [
              (0, V.jsx)("div", {
                className: "grid grid-cols-1 gap-3 p-3 pt-0 sm:grid-cols-2",
                children: Object.entries(n).map(([e, t]) =>
                  (0, V.jsxs)(
                    "div",
                    {
                      className:
                        "bg-v0-background-300 flex items-center gap-3 rounded-[6px] border p-2",
                      children: [
                        (0, V.jsx)(ee, {
                          value: 100 * t.score,
                          size: "small",
                          placeholder: !1,
                          showValue: !0,
                        }),
                        (0, V.jsx)("div", {
                          className: "flex flex-col",
                          children: (0, V.jsx)("p", {
                            className: "text-[14px] font-medium leading-[20px]",
                            children: t.title,
                          }),
                        }),
                      ],
                    },
                    e,
                  ),
                ),
              }),
              (0, V.jsxs)("div", {
                className: "flex flex-col border-t border-v0-gray-200 p-3",
                children: [
                  (0, V.jsx)(ec, {
                    label: "First Contentful Paint",
                    value: r.displayValue,
                    thresholds: et,
                    hasMutedBackground: !0,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Largest Contentful Paint",
                    value: i.displayValue,
                    thresholds: en,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Total Blocking Time",
                    value: s.displayValue,
                    thresholds: er,
                    hasMutedBackground: !0,
                  }),
                  (0, V.jsx)(ec, {
                    label: "Cumulative Layout Shift",
                    value: a.displayValue,
                    thresholds: ei,
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    let el = ({ value: e }) =>
      (0, V.jsx)("div", {
        className: `flex h-4 w-4 flex-row rounded-full p-1 ${"good" === e ? "bg-green-100" : "needsImprovement" === e ? "bg-amber-100" : "poor" === e ? "bg-red-100" : "bg-gray-100"}`,
        children: (0, V.jsx)("div", {
          className: `h-2 w-2 rounded-full ${"good" === e ? "bg-green-600" : "needsImprovement" === e ? "bg-amber-600" : "poor" === e ? "bg-red-600" : "bg-gray-400"}`,
        }),
      });
    function ec({
      label: e,
      value: t,
      thresholds: n,
      hasMutedBackground: r,
      isLoading: i = !1,
    }) {
      return (0, V.jsxs)("div", {
        className: `flex flex-row justify-between rounded-[6px] p-2 ${r ? "bg-muted" : ""}`,
        children: [
          (0, V.jsxs)("div", {
            className: "flex flex-row items-center gap-2",
            children: [
              (0, V.jsx)(el, { value: i ? "skeleton" : es(t, n) }),
              (0, V.jsx)("div", {
                className: "text-[14px] font-medium leading-[20px]",
                children: e,
              }),
            ],
          }),
          (0, V.jsx)("div", {
            className: "text-[14px] leading-[20px] text-v0-gray-900",
            children: i ? (0, V.jsx)(H.Skeleton, { className: "h-4 w-10" }) : t,
          }),
        ],
      });
    }
    e.s(["LighthouseReportLoading", () => ea, "default", () => eo], 708306);
    var eu = t,
      ed = e.i(978855),
      eh = e.i(297239);
    function ep({ children: e, isLoading: t, seconds: n }) {
      let r = void 0 === n ? void 0 : Math.floor(n),
        i = (0, eh.useT)();
      return (0, eu.jsx)(ed.Thinking, {
        forceOpen: t,
        text: t ? i("messages.thinking") : i("messages.thoughtFor")(r),
        isLoading: t,
        children: e,
      });
    }
    (e.s(["ThinkingTime", () => ep], 616593),
      e.s(
        ["SuggestedNextStepButton", () => eb, "SuggestedNextSteps", () => ey],
        229983,
      ));
    var em = t,
      ef = e.i(176248);
    e.i(168204);
    var eg = e.i(225695),
      ex = e.i(472166),
      ev = $;
    function ey({ options: e }) {
      let { submit: t } = (0, ex.useV0Chat)(),
        n = async (e) => {
          await t({
            action: "new",
            attachments: [],
            content: (0, eg.createMDXMessageContent)(e),
          });
        };
      return (0, em.jsxs)("div", {
        className: "flex flex-col gap-3",
        children: [
          (0, em.jsx)("p", {
            className: "my-0 pl-0.5 text-sm text-v0-gray-900",
            children: "Next Steps",
          }),
          (0, em.jsx)("div", {
            className: "flex flex-wrap gap-3",
            children: e.map((e, t) =>
              (0, em.jsx)(
                eb,
                { onClick: () => n(e.prompt), children: e.title },
                t,
              ),
            ),
          }),
        ],
      });
    }
    function eb({ onClick: e, children: t, ...n }) {
      return (0, em.jsxs)(ef.Button, {
        size: "xs",
        variant: "outline",
        className:
          "bg-v0-background-200 dark:bg-subtle hover:bg-v0-alpha-400 pl-3! pr-2! h-7 gap-1 rounded-full border-none text-sm font-normal shadow-sm",
        onClick: e,
        ...n,
        children: [
          t,
          (0, em.jsx)(ev.ArrowUpRightSmall, {
            height: 16,
            width: 16,
            color: "currentColor",
            className: "text-v0-gray-900!",
          }),
        ],
      });
    }
    var ej = t;
    function ew() {
      return (0, ej.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, ej.jsx)("path", {
            d: "M0 8C0 3.58172 3.58172 0 8 0V0C12.4183 0 16 3.58172 16 8V8C16 12.4183 12.4183 16 8 16V16C3.58172 16 0 12.4183 0 8V8Z",
            fill: "#18181B",
          }),
          (0, ej.jsx)("path", {
            d: "M12.1998 9.32958C12.1998 6.90643 10.3194 4.10002 7.9998 4.10002C5.68021 4.10002 3.7998 6.90643 3.7998 9.32958C3.7998 11.7527 5.68021 11.9 7.9998 11.9C10.3194 11.9 12.1998 11.7527 12.1998 9.32958Z",
            stroke: "#D97706",
            strokeWidth: "1.5",
          }),
        ],
      });
    }
    function eC() {
      return (0, ej.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, ej.jsx)("path", {
            d: "M0 8.00001C0 3.58193 3.58192 0.000366211 8 0.000366211V0.000366211C12.4181 0.000366211 16 3.58193 16 8.00001V8.00001C16 12.4181 12.4181 15.9997 8 15.9997V15.9997C3.58192 15.9997 0 12.4181 0 8.00001V8.00001Z",
            fill: "#18181B",
          }),
          (0, ej.jsx)("path", {
            d: "M11.6702 4.24481C10.0485 2.58555 7.41938 2.58555 5.79776 4.24481C4.17614 5.90408 4.17614 8.59428 5.79776 10.2536L6.5318 9.50247C5.3156 8.25801 5.3156 6.24035 6.5318 4.99592C7.74802 3.75146 9.7199 3.75146 10.9361 4.99592L11.6702 4.24481Z",
            fill: "black",
          }),
          (0, ej.jsx)("path", {
            d: "M10.2025 5.7474C9.39174 4.91778 8.07712 4.91778 7.26632 5.7474C6.4555 6.57705 6.4555 7.92214 7.26632 8.75176L8.00037 8.00068C7.59496 7.58586 7.59496 6.91332 8.00037 6.49849C8.40577 6.08367 9.06305 6.08367 9.46848 6.49849L10.2025 5.7474Z",
            fill: "black",
          }),
          (0, ej.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M10.202 11.7552C8.58039 13.4144 5.95122 13.4144 4.32959 11.7552L5.06364 11.0041C6.27986 12.2486 8.25174 12.2486 9.46795 11.0041C10.6842 9.75966 10.6842 7.742 9.46795 6.49754L10.202 5.74646C11.8236 7.40573 11.8236 10.0959 10.202 11.7552ZM8.73479 10.2531C7.92396 11.0827 6.60939 11.0827 5.79858 10.2531L6.53263 9.50197C6.93803 9.91678 7.59532 9.91678 8.00074 9.50197C8.40614 9.08714 8.40614 8.41459 8.00074 7.99978L8.73479 7.2487C9.54559 8.07832 9.54559 9.42343 8.73479 10.2531Z",
            fill: "#58C591",
          }),
          (0, ej.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M5.79825 4.24499C7.41987 2.58573 10.049 2.58573 11.6707 4.24499L10.9366 4.9961C9.72039 3.75164 7.74851 3.75164 6.53229 4.9961C5.31609 6.24054 5.31609 8.25819 6.53229 9.50265L5.79825 10.2537C4.17662 8.59447 4.17662 5.90426 5.79825 4.24499ZM7.26632 5.74753C8.07712 4.91791 9.39174 4.91791 10.2025 5.74753L9.46848 6.49862C9.06305 6.0838 8.40577 6.0838 8.00037 6.49862C7.59496 6.91345 7.59496 7.586 8.00037 8.00081L7.26632 8.75189C6.4555 7.92227 6.4555 6.57718 7.26632 5.74753Z",
            fill: "#84DBBD",
          }),
        ],
      });
    }
    function ek() {
      return (0, ej.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, ej.jsx)("rect", {
            x: "0",
            width: "16",
            height: "16",
            rx: "8",
            fill: "#18181B",
          }),
          (0, ej.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",
            fill: "#12FFF7",
          }),
          (0, ej.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",
            fill: "url(#paint0_linear_6519_11262)",
          }),
          (0, ej.jsx)("path", {
            fillRule: "evenodd",
            clipRule: "evenodd",
            d: "M3.60645 5.13072C3.60645 4.29017 4.28784 3.60876 5.12838 3.60876H10.9117C11.7523 3.60876 12.4336 4.29017 12.4336 5.13072V10.0495C12.4336 10.9191 11.3332 11.2965 10.7995 10.6099L9.13105 8.46362V11.0663C9.13105 11.8228 8.51779 12.4361 7.76132 12.4361H5.12838C4.28784 12.4361 3.60645 11.7547 3.60645 10.9141V5.13072ZM5.12838 4.82633C4.96027 4.82633 4.82399 4.96261 4.82399 5.13072V10.9141C4.82399 11.0822 4.96027 11.2185 5.12838 11.2185H7.80699C7.89102 11.2185 7.9135 11.1504 7.9135 11.0663V7.57609C7.9135 6.70648 9.01392 6.32907 9.54761 7.01564L11.2161 9.16197V5.13072C11.2161 4.96261 11.232 4.82633 11.0639 4.82633H5.12838Z",
            fill: "url(#paint1_linear_6519_11262)",
          }),
          (0, ej.jsx)("path", {
            d: "M10.9121 3.60876C11.7527 3.60876 12.4341 4.29017 12.4341 5.13072V10.0495C12.4341 10.9191 11.3336 11.2965 10.7999 10.6099L9.13145 8.46362V11.0663C9.13145 11.8228 8.51822 12.4361 7.76172 12.4361C7.84578 12.4361 7.91393 12.3679 7.91393 12.2839V7.57609C7.91393 6.70648 9.01432 6.32907 9.54802 7.01564L11.2165 9.16197V3.91315C11.2165 3.74504 11.0802 3.60876 10.9121 3.60876Z",
            fill: "#B9FFB3",
          }),
          (0, ej.jsxs)("defs", {
            children: [
              (0, ej.jsxs)("linearGradient", {
                id: "paint0_linear_6519_11262",
                x1: "12.4336",
                y1: "12.4361",
                x2: "4.67168",
                y2: "3.60887",
                gradientUnits: "userSpaceOnUse",
                children: [
                  (0, ej.jsx)("stop", { stopColor: "#B9FFB3" }),
                  (0, ej.jsx)("stop", {
                    offset: "1",
                    stopColor: "#B9FFB3",
                    stopOpacity: "0",
                  }),
                ],
              }),
              (0, ej.jsxs)("linearGradient", {
                id: "paint1_linear_6519_11262",
                x1: "12.4336",
                y1: "12.4361",
                x2: "7.19057",
                y2: "10.3967",
                gradientUnits: "userSpaceOnUse",
                children: [
                  (0, ej.jsx)("stop", {
                    stopColor: "#1A1A1A",
                    stopOpacity: "0.9",
                  }),
                  (0, ej.jsx)("stop", {
                    offset: "1",
                    stopColor: "#1A1A1A",
                    stopOpacity: "0",
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function eS() {
      return (0, ej.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [
          (0, ej.jsx)("rect", {
            x: "0",
            width: "16",
            height: "16",
            rx: "8",
            fill: "#18181B",
          }),
          (0, ej.jsxs)("g", {
            clipPath: "url(#clip0_6503_14101)",
            children: [
              (0, ej.jsx)("path", {
                d: "M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",
                fill: "url(#paint0_linear_6503_14101)",
              }),
              (0, ej.jsx)("path", {
                d: "M8.78261 12.8805C8.53205 13.2061 8.02401 13.0277 8.01797 12.612L7.92969 6.53137H11.8921C12.6097 6.53137 13.01 7.38672 12.5637 7.9667L8.78261 12.8805Z",
                fill: "url(#paint1_linear_6503_14101)",
                fillOpacity: "0.2",
              }),
              (0, ej.jsx)("path", {
                d: "M7.17088 3.09614C7.42145 2.77051 7.9295 2.94893 7.93553 3.36467L7.97422 9.44525H4.06144C3.34373 9.44525 2.94344 8.5899 3.38974 8.00992L7.17088 3.09614Z",
                fill: "#3ECF8E",
              }),
            ],
          }),
          (0, ej.jsxs)("defs", {
            children: [
              (0, ej.jsxs)("linearGradient", {
                id: "paint0_linear_6503_14101",
                x1: "7.92969",
                y1: "7.87959",
                x2: "11.4836",
                y2: "9.32409",
                gradientUnits: "userSpaceOnUse",
                children: [
                  (0, ej.jsx)("stop", { stopColor: "#249361" }),
                  (0, ej.jsx)("stop", { offset: "1", stopColor: "#3ECF8E" }),
                ],
              }),
              (0, ej.jsxs)("linearGradient", {
                id: "paint1_linear_6503_14101",
                x1: "6.36839",
                y1: "5.6738",
                x2: "8.05436",
                y2: "8.74958",
                gradientUnits: "userSpaceOnUse",
                children: [
                  (0, ej.jsx)("stop", {}),
                  (0, ej.jsx)("stop", { offset: "1", stopOpacity: "0" }),
                ],
              }),
              (0, ej.jsx)("clipPath", {
                id: "clip0_6503_14101",
                children: (0, ej.jsx)("rect", {
                  width: "9.60018",
                  height: "10.182",
                  fill: "white",
                  transform: "translate(3.2002 2.90906)",
                }),
              }),
            ],
          }),
        ],
      });
    }
    e.s(
      [
        "BlobIcon",
        () => ew,
        "NeonIcon",
        () => ek,
        "SupabaseIcon",
        () => eS,
        "UpstashIcon",
        () => eC,
      ],
      404836,
    );
    var eN = t,
      eE = e.i(758118),
      eA = e.i(365290),
      eD = n;
    function eI({
      shouldMarch: e = !1,
      numberOfVisibleChildren: t = 3,
      overlap: n = 4,
      size: r = 16,
      waitMs: i = 500,
      stepDurationMs: s = 700,
      children: a,
      animation: o,
      direction: l = "horizontal",
    }) {
      let c = (0, eD.useRef)(null),
        [u, d] = (0, eD.useState)(0),
        [h, p] = (0, eD.useState)(!1),
        m = (0, eD.useRef)(0);
      if (eD.Children.count(a) < t + 1)
        throw Error(`children must be at least ${t + 1} items`);
      let f = (0, eD.useMemo)(() => eD.Children.toArray(a), [a]),
        g = (0, eD.useMemo)(() => [...f, ...f.slice(0, t)], [f, t]),
        x = (0, eD.useCallback)(() => {
          if (!c.current) return;
          let e = m.current;
          (e === g.length - t ? (p(!0), (e = 0)) : (p(!1), (e += 1)),
            d(e),
            (m.current = e));
        }, [g.length, t]),
        v = (0, eD.useRef)(null),
        y = (0, eD.useRef)(null);
      (0, eD.useEffect)(
        () => (
          e &&
            (y.current = setTimeout(() => {
              (x(),
                (v.current = setInterval(() => {
                  x();
                }, s)));
            }, i)),
          () => {
            (clearTimeout(y.current), clearInterval(v.current));
          }
        ),
        [x, e, s, i],
      );
      let b = (0, eD.useMemo)(() => {
          let e = u * r - u * n;
          return "horizontal" === l
            ? `translateX(-${e}px)`
            : `translateY(-${e}px)`;
        }, [u, n, r, l]),
        j = { duration: 400, timingFunction: [0.27, 0.04, 0.27, 0.97] };
      return (0, eN.jsx)("div", {
        className: "relative overflow-visible",
        style: {
          width: "horizontal" === l ? r * t - n * (t - 1) : r,
          height: "horizontal" === l ? r : r * t - n * (t - 1),
        },
        children: (0, eN.jsx)("div", {
          ref: c,
          className:
            "horizontal" === l ? "absolute flex" : "absolute flex flex-col",
          style: {
            transform: b,
            ...(h ? {} : (0, eA.transitionStyles)(["transform"], j)),
          },
          children: eD.Children.map(g, (e, i) => {
            let s = i < u + t && i > u - 1;
            return (0, eN.jsx)(
              "div",
              {
                className: "absolute rounded-full",
                style: {
                  width: r,
                  height: r,
                  ...("horizontal" === l
                    ? { left: i * r - i * n }
                    : { top: i * r - i * n }),
                  transform: s ? "scale(1)" : `scale(${o?.scale ?? 0.5})`,
                  ...(0, eE.visibleStylesIf)(s),
                  ...(h
                    ? {}
                    : (0, eA.transitionStyles)(["opacity", "transform"], j)),
                },
                children: e,
              },
              `${i}-marching-child`,
            );
          }),
        }),
      });
    }
    e.s(["MarchingChildren", () => eI], 917772);
  },
  19826,
  327294,
  (e) => {
    "use strict";
    var t = e.i(877318);
    let n = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M9 2H9.75H14.25H15V3.5H14.25H9.75H9V2ZM9 12.5H9.75H14.25H15V14H14.25H9.75H9V12.5ZM9.75 7.25H9V8.75H9.75H14.25H15V7.25H14.25H9.75ZM1 12.5H1.75H2.25H3V14H2.25H1.75H1V12.5ZM1.75 2H1V3.5H1.75H2.25H3V2H2.25H1.75ZM1 7.25H1.75H2.25H3V8.75H2.25H1.75H1V7.25ZM5.75 12.5H5V14H5.75H6.25H7V12.5H6.25H5.75ZM5 2H5.75H6.25H7V3.5H6.25H5.75H5V2ZM5.75 7.25H5V8.75H5.75H6.25H7V7.25H6.25H5.75Z" fill="currentColor"/>',
    );
    e.s(["Logs", 0, n], 19826);
    let r = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.6736V9.09116L15 10.7065V4.44907C15 4.16343 14.8779 3.89142 14.6644 3.70166L10.7842 0.252591C10.6011 0.0898786 10.3647 0 10.1198 0H2.5H1V1.5V13.5C1 14.8807 2.11929 16 3.5 16H11.7275L11.3016 15.5414L10.3346 14.5H3.5C2.94772 14.5 2.5 14.0523 2.5 13.5V1.5H9.9297L13.5 4.6736ZM8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6ZM4.5 8C4.5 6.067 6.067 4.5 8 4.5C9.933 4.5 11.5 6.067 11.5 8C11.5 8.63488 11.331 9.23028 11.0354 9.74364L14.0496 12.9897L14.5599 13.5393L13.4607 14.5599L12.9504 14.0103L10.0223 10.857C9.4512 11.262 8.7534 11.5 8 11.5C6.067 11.5 4.5 9.933 4.5 8Z" fill="currentColor"/>',
    );
    e.s(["PreviewDocument", 0, r], 327294);
  },
  611883,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Brain", [
      [
        "path",
        {
          d: "M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",
          key: "l5xja",
        },
      ],
      [
        "path",
        {
          d: "M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",
          key: "ep3f8r",
        },
      ],
      [
        "path",
        { d: "M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4", key: "1p4c4q" },
      ],
      ["path", { d: "M17.599 6.5a3 3 0 0 0 .399-1.375", key: "tmeiqw" }],
      ["path", { d: "M6.003 5.125A3 3 0 0 0 6.401 6.5", key: "105sqy" }],
      ["path", { d: "M3.477 10.896a4 4 0 0 1 .585-.396", key: "ql3yin" }],
      ["path", { d: "M19.938 10.5a4 4 0 0 1 .585.396", key: "1qfode" }],
      ["path", { d: "M6 18a4 4 0 0 1-1.967-.516", key: "2e4loj" }],
      ["path", { d: "M19.967 17.484A4 4 0 0 1 18 18", key: "159ez6" }],
    ]);
    e.s(["default", () => t]);
  },
  625402,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(92479),
      i = e.i(556355),
      s = e.i(19826),
      a = e.i(441384),
      o = e.i(327294),
      l = e.i(459342),
      c = e.i(611883),
      c = c,
      u = e.i(304649);
    function d({ messageId: e }) {
      let { chatId: n } = (0, r.useChatId)();
      return n
        ? (0, t.jsx)("a", {
            href: `/chat/internal/chats?chatId=${n}&messageId=${e}`,
            target: "_blank",
            children: (0, t.jsxs)(i.DropdownMenuItem, {
              children: [
                (0, t.jsx)(o.PreviewDocument, {}),
                " View Internal Page",
              ],
            }),
          })
        : null;
    }
    function h({ messageId: e }) {
      let { chatId: n } = (0, r.useChatId)();
      return n
        ? (0, t.jsx)("a", {
            href: `/chat/internal/agent-logs?q=${e}`,
            target: "_blank",
            children: (0, t.jsxs)(i.DropdownMenuItem, {
              children: [(0, t.jsx)(s.Logs, {}), " Agent Logs"],
            }),
          })
        : null;
    }
    function p({ messageId: e }) {
      let { chatId: n } = (0, r.useChatId)();
      return n
        ? (0, t.jsx)("a", {
            href: `/chat/internal/browse?q=${e}`,
            target: "_blank",
            children: (0, t.jsxs)(i.DropdownMenuItem, {
              children: [(0, t.jsx)(a.MagnifyingGlass, {}), " Browse Data"],
            }),
          })
        : null;
    }
    function m({ chatId: e, className: r }) {
      return e
        ? (0, t.jsx)(n.Button, {
            onClick: () => {
              let t = new URL("/chat/internal/chats", window.location.origin);
              (t.searchParams.set("chatId", e), window.open(t.href, "_blank"));
            },
            className: (0, u.cn)("size-7 rounded-md", r),
            size: "sm",
            tooltip: {
              side: "bottom",
              content: "View Internal Page (AI Team Only)",
            },
            variant: "secondary",
            children: (0, t.jsx)(o.PreviewDocument, {}),
          })
        : null;
    }
    function f({ chatId: e, messageId: n }) {
      return e
        ? (0, t.jsx)("a", {
            href: (0, l.getInspectLink)({ chatId: e, messageId: n }),
            target: "_blank",
            children: (0, t.jsxs)(i.DropdownMenuItem, {
              children: [(0, t.jsx)(c.default, {}), " View in Braintrust"],
            }),
          })
        : null;
    }
    e.s(
      [
        "OpenInBraintrustButton",
        () => f,
        "OpenInInternalButton",
        () => m,
        "OpenMessageInInternalAgentLogsButton",
        () => h,
        "OpenMessageInInternalBrowseButton",
        () => p,
        "OpenMessageInInternalButton",
        () => d,
      ],
      625402,
    );
  },
  499282,
  (e) => {
    "use strict";
    function t(e) {
      return (
        e?.type === "code-project" ||
        e?.type === "react" ||
        e?.type === "v0" ||
        e?.type === "tsx"
      );
    }
    e.s(["canBeDeployed", () => t]);
  },
  407705,
  331968,
  435433,
  194465,
  978918,
  (e) => {
    "use strict";
    var t = e.i(9654),
      n = e.i(753533),
      r = e.i(142219),
      i = e.i(819969),
      s = e.i(470259),
      a = e.i(972287),
      o = e.i(819892);
    function l(e) {
      if (!e) return null;
      let t = e.replace(/\s+/g, "-");
      return "@" !==
        (t = (t = t.replace(/[\x00-\x1F\x7F~^\:\?\*\[\\\@\{]/g, "")).replace(
          /\.{2,}/g,
          ".",
        )) && (t = t.replace(/^\.|\.$/g, ""))
        ? t
        : null;
    }
    e.s(["sanitizeBranchName", () => l], 331968);
    let c = new Map(),
      u = (0, n.cacheResultById)(c, (e, n) => ({
        isOpen: (0, t.atom)(!1),
        stageIntent: (0, t.atom)(null),
        isAutoSyncEnabled: (0, t.atom)(!1),
        createBranchName: (0, t.atom)(null),
        createBranchNameError: (0, t.atom)(null),
        selectedBranch: (0, t.atom)(null),
        selectedGitNamespaceName: (0, t.atom)(null),
        createRepoName: (0, t.atom)(n?.defaultRepoName ?? null),
        createRepoNameError: (0, t.atom)(null),
        asyncActionLoading: (0, t.atom)(null),
        lastSyncedCommitSha: (0, t.atom)(null),
        isRefreshingGitHead: (0, t.atom)(!1),
        timeSinceLastSync: (0, t.atom)(null),
        switchBranchTarget: (0, t.atom)(null),
        syncedShas: (0, t.atom)(new Set()),
      })),
      d = new Map(),
      h = (0, n.cacheResultById)(d, (e, n, r) => {
        let c = u(e, { defaultRepoName: r?.defaultRepoName }),
          d = (0, i.getChatAtoms)(e),
          h = (0, a.getScopedAtoms)(),
          p = (0, o.getProjectAtoms)(n),
          m = (0, t.atom)((e) => {
            let t = e(c.createBranchName);
            return !!t && t === l(t);
          }),
          f = (0, t.atom)((e) => {
            let t = e(d.externalMeta);
            return t.ok && t.value.git?.gitConnected && t.value.git.ref
              ? t.value.git.ref
              : null;
          }),
          g = (0, t.atom)((e) => {
            let t = e(p.latestGit),
              n = t.ok ? t.value.head : void 0,
              r = e(d.externalMeta),
              i = r.ok ? r.value.git : void 0,
              s = e(c.syncedShas);
            return !n?.sha ||
              !i ||
              !("sha" in i) ||
              i.sha === n.sha ||
              s.has(n.sha)
              ? null
              : n.sha;
          });
        return {
          ...c,
          latestProjectGit: p.latestGit,
          externalChatMeta: d.externalMeta,
          gitNamespaces: h.gitNamespaces,
          stage: (0, t.atom)((e) => {
            let t = e(d.externalMeta);
            if (!t.ok && t.error.errorCode !== s.NOT_FOUND) return "error";
            if (!t.ok || !t.value.git) {
              let t = e(h.gitNamespaces);
              return t.ok
                ? t.value.verifiedGitHubUser
                  ? t.value.userNamespace || t.value.orgNamespaces.length
                    ? "create-repo"
                    : "install-app"
                  : "sign-in"
                : t.error.errorCode === s.MISSING_SCOPE
                  ? "reauth-required"
                  : "error";
            }
            let n = e(c.stageIntent);
            return e(f)
              ? n ||
                  (t.ok && t.value.git.gitConnected
                    ? "status"
                    : "select-branch")
              : "create-branch" === n
                ? "create-branch"
                : "select-branch";
          }),
          allBranches: (0, t.atom)((e) => {
            let t = e(p.latestGit);
            if (!t.ok) return [];
            let n = e(f);
            return t.value.branches
              .map((e) => e.name)
              .sort((e, t) => (e === n ? -1 : +(t === n)));
          }),
          isConnectedToGit: (0, t.atom)((e) => {
            let t = e(d.externalMeta);
            return t.ok && !!t.value.git;
          }),
          disableAsyncAction: (0, t.atom)((e) => e(d.isStreaming)),
          currentBranch: f,
          isAbleToCreateBranch: (0, t.atom)(
            (e) =>
              "creating-branch" !== e(c.asyncActionLoading) &&
              e(m) &&
              null !== e(c.createBranchName),
          ),
          upstreamSha: g,
          isNewBranchNameValid: m,
        };
      }),
      p = null,
      m = 1e3;
    function f(e, t) {
      let n = u(e, { defaultRepoName: t?.defaultRepoName });
      return {
        setIsOpen: (e) => r.store.set(n.isOpen, e),
        setStageIntent: (e) => {
          (p && clearTimeout(p), r.store.set(n.stageIntent, e));
        },
        resetStageOnDelay: () => {
          (p && clearTimeout(p),
            (p = setTimeout(() => {
              r.store.set(n.stageIntent, null);
            }, m)));
        },
        setAsyncActionLoading: (e) => r.store.set(n.asyncActionLoading, e),
        setIsAutoSyncEnabled: (e) => r.store.set(n.isAutoSyncEnabled, e),
        updateCreateBranchName: (e) => {
          let t = l(e);
          (r.store.set(n.createBranchName, t),
            r.store.set(n.createBranchNameError, null));
        },
        setCreateBranchNameError: (e) =>
          r.store.set(n.createBranchNameError, e),
        setSelectedBranch: (e) => r.store.set(n.selectedBranch, e),
        setCreateRepoName: (e) => {
          (r.store.set(n.createRepoName, e),
            r.store.set(n.createRepoNameError, null));
        },
        setCreateRepoNameError: (e) => r.store.set(n.createRepoNameError, e),
        setSelectedGitNamespaceName: (e) =>
          r.store.set(n.selectedGitNamespaceName, e),
        setLastSyncedCommitSha: (e) => r.store.set(n.lastSyncedCommitSha, e),
        updateIsRefreshingGitHead: (e) => {
          (e && r.store.set(n.timeSinceLastSync, Date.now()),
            r.store.set(n.isRefreshingGitHead, e));
        },
        setSwitchBranchTarget: (e) => r.store.set(n.switchBranchTarget, e),
        addSyncedSha: (e) =>
          r.store.set(n.syncedShas, new Set([...r.store.get(n.syncedShas), e])),
      };
    }
    function g(e, t) {
      return !!(e && t.includes(e));
    }
    (e.s(
      [
        "getGitSyncActions",
        () => f,
        "getGitSyncAtoms",
        0,
        h,
        "isInState",
        () => g,
      ],
      407705,
    ),
      e.s(
        [
          "GitSyncCreateProjectTrigger",
          () => R,
          "GitSyncTrigger",
          () => _,
          "GitSyncTriggerSkeleton",
          () => F,
        ],
        194465,
      ));
    var x = e.i(324834),
      v = e.i(176248),
      y = e.i(393799),
      b = e.i(675120),
      j = e.i(707827),
      w = e.i(576191),
      C = e.i(144019),
      k = e.i(449381);
    e.i(563948);
    var S = e.i(407562),
      N = x,
      E = e.i(751660),
      A = e.i(403055),
      D = e.i(93089);
    let I = ({ status: e = "none" }) =>
        "none" === e
          ? (0, N.jsx)(D.LogoGithub, {})
          : (0, N.jsx)(
              "svg",
              {
                width: "16",
                height: "16",
                viewBox: "0 0 16 16",
                fill: "none",
                xmlns: "http://www.w3.org/2000/svg",
                children: (0, N.jsxs)("g", {
                  clipPath: "url(#clip)",
                  children: [
                    (0, N.jsx)("path", {
                      d: "M7.99951 0.000366211C12.4194 0.000366211 15.9994 3.57903 15.9995 7.99744C15.9993 8.73285 15.8971 9.45983 15.7007 10.1595C15.0695 9.74288 14.3134 9.50046 13.5005 9.50037C13.2446 9.50037 12.994 9.52476 12.7515 9.57068C12.9836 9.05393 13.1196 8.40228 13.1196 7.57751C13.1196 6.69794 12.8093 5.98785 12.2993 5.4281C12.3795 5.22766 12.6589 4.40796 12.2192 3.30896C12.1956 3.3017 11.5216 3.10824 10.019 4.12927C9.37924 3.94946 8.6988 3.85876 8.01904 3.85876C7.33935 3.85885 6.65875 3.94942 6.01904 4.12927C4.50987 3.11373 3.83765 3.30364 3.81982 3.30896C3.3803 4.40782 3.6596 5.2277 3.73975 5.4281C3.23003 5.98779 2.9195 6.70816 2.91943 7.57751C2.91958 10.6357 4.7794 11.3267 6.55908 11.5267C6.3294 11.7268 6.11923 12.0769 6.04932 12.5961C5.58888 12.806 4.43889 13.1448 3.71924 11.9359C3.569 11.6958 3.11926 11.1067 2.48975 11.1166C1.82056 11.1267 2.21959 11.4969 2.49951 11.6469C2.8394 11.8369 3.22974 12.5457 3.31982 12.7758C3.47988 13.2256 4.00022 14.0856 6.00928 13.7162C6.00929 14.3857 6.01904 15.0156 6.01904 15.2054C6.01876 15.4152 5.86886 15.6552 5.46924 15.5853C2.2896 14.5256 -0.000331454 11.5359 -0.000488281 7.99744C-0.000368517 3.57919 3.5798 0.000613049 7.99951 0.000366211Z",
                      fill: "currentColor",
                    }),
                    (0, N.jsx)("circle", {
                      cx: "13.5",
                      cy: "13.5",
                      r: "2.5",
                      className: (0, A.cn)(
                        "transition-all duration-300",
                        "synced" === e && "fill-green-500",
                        "syncing" === e && "fill-gray-400",
                        "error" === e && "fill-red-500",
                        "warning" === e && "fill-orange-500",
                        "merged" === e && "fill-v0-purple-700",
                      ),
                    }),
                  ],
                }),
              },
              "git-sync-icon",
            ),
      M = (0, E.withNewIcon)(
        '<path d="M3.95326 7.55195L4.48353 8.08223L3.1349 9.43086C2.18706 10.3794 2.18681 11.9171 3.1349 12.8654C4.08338 13.8137 5.62192 13.8136 6.57045 12.8654L7.91908 11.5168L8.97962 12.5773L7.63099 13.926C6.09668 15.46 3.60862 15.4601 2.07435 13.926C0.540479 12.3918 0.540731 9.90462 2.07435 8.37031L3.42298 7.0207L3.95326 7.55195ZM13.0255 11.966L11.965 13.0266L2.97377 4.03535L4.03431 2.9748L13.0255 11.966ZM8.3683 2.07539C9.90253 0.541161 12.3906 0.541391 13.9249 2.07539C15.4589 3.60964 15.4588 6.09677 13.9249 7.63105L12.5763 8.98066L12.046 8.44941L11.5158 7.91914L12.8644 6.57051C13.8125 5.62201 13.8126 4.0844 12.8644 3.13594C11.9158 2.18773 10.3773 2.18749 9.42884 3.13594L8.08021 4.48457L7.01966 3.42402L8.3683 2.07539Z" fill="currentColor"/>',
      );
    e.s(["LogoGitHubSynced", 0, I, "Unlink", 0, M], 435433);
    var T = e.i(297239),
      L = e.i(667660),
      P = e.i(538553);
    function R({ chatId: e, ...t }) {
      let n = (0, T.useT)(),
        r = f(e),
        i = (0, k.useActiveBlockState)(),
        s = (0, C.useAutoCreateProject)({ chatId: e, activeBlock: i }),
        [a, o] = (0, w.useState)(!1),
        { hasVercelWritePermission: l } = (0, L.useActiveScope)(),
        c = (0, w.useCallback)(async () => {
          if (a) return;
          o(!0);
          let e = await s();
          (o(!1), e.ok)
            ? r.setIsOpen(!0)
            : S.toast.error(n("gitSync.trigger.failedToCreateProject"));
        }, [r, s, a, n]);
      return (0, x.jsx)(P.RbacTooltip, {
        show: !l,
        requiredRole: "V0Builder",
        children: (0, x.jsx)(O, {
          ...t,
          onClick: c,
          disabled: a || !l,
          tooltip: n("gitSync.trigger.connectToGitHub"),
          children: (0, x.jsx)(b.TransitionNode, {
            ...b.PRESETS.buttonContent,
            children: (0, x.jsx)(I, {}),
          }),
        }),
      });
    }
    function F() {
      let e = (0, T.useT)();
      return (0, x.jsx)(O, {
        disabled: !0,
        tooltip: {
          side: "bottom",
          content: e("gitSync.trigger.loadingGitHubConnection"),
        },
        children: (0, x.jsx)(I, {}),
      });
    }
    function _({ chatId: e, projectId: t, ...n }) {
      let r = (0, T.useT)(),
        i = h(e, t),
        s = (0, y.useAtomValue)(i.asyncActionLoading),
        a = (0, y.useAtomValue)(i.isConnectedToGit),
        o = (0, y.useAtomValue)(i.currentBranch),
        l = (0, y.useAtomValue)(i.externalChatMeta),
        { hasVercelWritePermission: c } = (0, L.useActiveScope)(),
        u = g(s, ["sign-in", "install-app", "create-repo"]),
        d = `${u}-${a}`,
        p = (0, w.useMemo)(
          () =>
            g(s, ["sign-in", "install-app", "create-repo"])
              ? (0, x.jsx)(j.Spinner, { size: 16 })
              : l.ok
                ? a
                  ? g(s, [
                      "pushing-to-branch",
                      "syncing-to-branch",
                      "switching-branch",
                    ]) || !o
                    ? (0, x.jsx)(I, { status: "syncing" })
                    : (0, x.jsx)(I, { status: "synced" })
                  : (0, x.jsx)(I, {})
                : (0, x.jsx)(I, { status: "error" }),
          [s, o, l.ok, a],
        );
      return (0, x.jsxs)(O, {
        tooltip: {
          side: "bottom",
          content:
            a && o
              ? r("gitSync.trigger.connectedToBranch")(o)
              : r("gitSync.trigger.connectToBranch"),
        },
        disabled: !c || n.disabled,
        ...n,
        children: [
          (0, x.jsx)(b.TransitionNode, {
            ...b.PRESETS.buttonContent,
            renderKey: d,
            children: p,
          }),
          (0, x.jsx)("span", {
            className: "sr-only",
            children:
              a && o
                ? r("gitSync.trigger.syncedToBranch")(o)
                : r("gitSync.trigger.connectToBranch"),
          }),
        ],
      });
    }
    function O({ children: e, ...t }) {
      return (0, x.jsx)(v.Button, {
        size: "sm",
        variant: "secondary",
        className: "h-7 w-7 rounded-md",
        ...t,
        children: e,
      });
    }
    var B = x,
      V = A;
    function z({ children: e, className: t }) {
      return (0, B.jsx)("div", {
        className: (0, V.cn)(
          "flex w-full flex-row justify-between gap-3 px-4 pb-4 *:flex-1",
          t,
        ),
        children: e,
      });
    }
    function H({ children: e, className: t, key: n }) {
      return (0, B.jsx)(
        "div",
        {
          className: (0, V.cn)(
            "flex w-full flex-col gap-4 overflow-hidden p-4",
            t,
          ),
          children: e,
        },
        n,
      );
    }
    function $({ children: e, className: t }) {
      return (0, B.jsx)("div", {
        className: (0, V.cn)("flex flex-col gap-2", t),
        children: e,
      });
    }
    e.s(
      [
        "InputRow",
        () => $,
        "PopoverActions",
        () => z,
        "PopoverContent",
        () => H,
      ],
      978918,
    );
  },
  696655,
  785666,
  145996,
  273357,
  (e) => {
    "use strict";
    var t = e.i(919012),
      n = (0, t.createServerReference)(
        "400e4cba6ef534a28bfaed5072bb4f7fa88c653b5b",
        t.callServer,
        void 0,
        t.findSourceMapURL,
        "syncGitBranchToChat",
      );
    e.s(["syncGitBranchToChat", () => n], 696655);
    var r = t,
      i = (0, r.createServerReference)(
        "6035bae0da7baa5b44725937e416c8725d37d3d000",
        r.callServer,
        void 0,
        r.findSourceMapURL,
        "updateGitAutoCommit",
      );
    e.s(["updateGitAutoCommit", () => i], 785666);
    var s = t,
      a = (0, s.createServerReference)(
        "605693d15b97483a3b12db7e0f21ba9ed1d83c1ddb",
        s.callServer,
        void 0,
        s.findSourceMapURL,
        "updateGitAutoPull",
      );
    e.s(["updateGitAutoPull", () => a], 145996);
    var o = t,
      l = (0, o.createServerReference)(
        "60aba92aa74d3d8f764e1ea8a0eddfe53f960a286f",
        o.callServer,
        void 0,
        o.findSourceMapURL,
        "updateGitBranchConnection",
      );
    e.s(["updateGitBranchConnection", () => l], 273357);
  },
  241489,
  132666,
  662429,
  187845,
  957388,
  54149,
  1930,
  924461,
  (e) => {
    "use strict";
    e.s(["SignInStage", () => O], 241489);
    var t = e.i(324834),
      n = e.i(176248),
      r = e.i(978918);
    e.s(["useAsyncGitSyncActions", () => I], 132666);
    var i = e.i(576191),
      s = e.i(226368);
    e.i(563948);
    var a = e.i(407562),
      o = e.i(674725),
      l = e.i(758057),
      c = e.i(144019),
      u = e.i(449381);
    e.i(472428);
    var d = e.i(296900);
    e.i(904347);
    var h = e.i(37737),
      p = e.i(407705),
      m = e.i(393799),
      f = e.i(685289),
      g = e.i(315331),
      x = e.i(696655),
      v = e.i(92479),
      y = e.i(53223),
      b = e.i(785666),
      j = e.i(145996),
      w = e.i(273357),
      C = e.i(297239),
      k = e.i(209819),
      S = e.i(908431),
      N = e.i(12052),
      E = e.i(242759),
      A = e.i(387040),
      D = e.i(643312);
    function I({ chatId: e, projectId: t }) {
      let n = (0, C.useT)(),
        r = (0, s.useRouter)(),
        { project: I, vercelProjectId: M } = (0, k.useChatMetadata)(),
        T = (0, N.generateRepoName)(I?.name),
        L = (0, p.getGitSyncAtoms)(e, t, { defaultRepoName: T }),
        P = (0, p.getGitSyncActions)(e, { defaultRepoName: T }),
        R = (0, m.useAtomValue)(L.stage),
        F = (0, m.useAtomValue)(L.asyncActionLoading),
        _ = (0, m.useAtomValue)(L.currentBranch),
        O = (0, m.useAtomValue)(L.createRepoName),
        B = (0, m.useAtomValue)(L.createBranchName),
        V = (0, m.useAtomValue)(L.switchBranchTarget),
        z = (0, m.useAtomValue)(L.isNewBranchNameValid),
        H = (0, m.useAtomValue)(L.isConnectedToGit),
        $ = (0, m.useAtomValue)(L.selectedGitNamespaceName),
        U = (0, m.useAtomValue)(L.externalChatMeta),
        G = (0, m.useAtomValue)(L.gitNamespaces),
        { vpifc: W } = (0, E.useFlags)(),
        q = (0, D.useRefetchIntegrationsApi)(),
        Z = (0, u.useActiveBlockState)(),
        K = (0, c.useAutoCreateProject)({ chatId: e, activeBlock: Z }),
        { activeForkKey: Y } = (0, v.useChatMessages)(),
        { revalidate: J, mutate: Q } = (0, d.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: e },
          { stopFetch: !0 },
        ),
        { revalidate: X } = (0, d.useServerQuerySWR)(
          ["scoped", "gitNamespaces"],
          {},
          { stopFetch: !0 },
        ),
        { revalidate: ee } = (0, d.useServerQuerySWR)(
          ["project", "latestGit"],
          { projectId: t, chatId: W ? e : void 0 },
          { stopFetch: !0 },
        ),
        et = "/chat/git/connected",
        en = window.location.origin + "/chat/git/callback",
        er = `https://vercel.com/api/registration/login-with-github?next=${encodeURIComponent(en)}`,
        ei = { next: window.location.origin + "/github/installed" },
        es = (0, o.encodeBase64URL)(JSON.stringify(ei)),
        ea =
          G.ok && G.value.verifiedGitHubUser
            ? `https://github.com/apps/vercel/installations/select_target?state=${encodeURIComponent(es)}`
            : "",
        eo = (0, i.useCallback)(
          async (e) => {
            (await Promise.all([X(), ee(), J()]), e?.());
          },
          [X, ee, J],
        ),
        { open: el } = (0, l.usePopupWindow)({
          url: er,
          onPoll: (e) => {
            e.location.pathname === et &&
              eo(() => {
                (e.close(), P.setAsyncActionLoading(null));
              });
          },
          onClose: () => {
            (P.setAsyncActionLoading(null), X());
          },
        }),
        { open: ec } = (0, l.usePopupWindow)({
          url: ea,
          onPoll: (e) => {
            e.location.pathname === et &&
              eo(() => {
                (e.close(), P.setAsyncActionLoading(null));
              });
          },
          onClose: () => {
            (P.setAsyncActionLoading(null), X());
          },
        }),
        eu = (0, i.useCallback)(() => {
          "sign-in" === F
            ? a.toast.error(n("gitSync.toast.signInInProgress"))
            : (P.setAsyncActionLoading("sign-in"), el());
        }, [el, P, F, n]),
        ed = (0, i.useCallback)(() => {
          "install-app" === F
            ? a.toast.error(n("gitSync.toast.appInstallationInProgress"))
            : (P.setAsyncActionLoading("install-app"), ec());
        }, [ec, P, F, n]),
        eh = (0, i.useCallback)(async () => {
          let i = O ?? (0, N.generateRepoName)(I?.name);
          try {
            if (!M) {
              let e = await K();
              if (!e.ok) {
                e.error && a.toast.error(e.error);
                return;
              }
            }
            if (!Z?.id)
              return void a.toast.error(
                n("gitSync.createRepo.needBlockToCreateRepo"),
              );
            if (!i)
              return void a.toast.error(n("gitSync.createRepo.enterRepoName"));
            if (!$)
              return void a.toast.error(
                n("gitSync.createRepo.selectGitScopeError"),
              );
            let s = await fetch("/chat/api/git/connect", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                owner: $,
                repoName: i,
                projectId: t,
                blockId: Z.id,
                chatId: e,
                from: "popover",
              }),
            });
            if (!s.ok) {
              let e = await s.json();
              if ("repo_alr_exists" === e.error)
                return void P.setCreateRepoNameError(
                  n("gitSync.createRepo.repoAlreadyExists"),
                );
              if (409 === s.status && "REPO_ALREADY_CONNECTED" === e.error) {
                let { existingRepo: t } = e;
                (await eo(),
                  a.toast.default(n("gitSync.createRepo.gitHubConnected"), {
                    description: `${t.org}/${t.repo}`,
                    action: t.remoteURL
                      ? {
                          children: n("gitSync.createRepo.view"),
                          onClick: () => {
                            window.open(t.remoteURL, "_blank");
                          },
                        }
                      : void 0,
                  }));
                return;
              }
              (q(), r.refresh());
              let t = n("gitSync.createRepo.failedToCreateRepo");
              throw Error(t);
            }
            let { remoteURL: o } = S.z
              .object({ remoteURL: S.z.string().nullable().optional() })
              .parse(await s.json());
            await eo();
            let l = o ?? ($ && O ? `https://github.com/${$}/${O}` : void 0);
            a.toast.default(n("gitSync.createRepo.gitHubConnected"), {
              description: n("gitSync.createRepo.clickToViewRepo"),
              action: l
                ? {
                    children: n("gitSync.createRepo.view"),
                    onClick: () => {
                      window.open(l, "_blank");
                    },
                  }
                : void 0,
            });
          } catch (t) {
            let e =
              t instanceof Error
                ? t.message
                : n("gitSync.createRepo.failedToCreateRepo");
            a.toast.error(e);
          } finally {
            P.setAsyncActionLoading(null);
          }
        }, [t, M, I?.name, Z?.id, O, $, e, eo, n, K, q, r, P]),
        ep = (0, i.useCallback)(
          async (r) => {
            let i = Z?.id;
            if (!i)
              return void a.toast.error(n("gitSync.toast.noBlockSelected"));
            (0, y.track)("GitSyncPushToBranch", {
              chatId: e,
              projectId: t,
              blockId: i,
              branch: r,
            });
            try {
              (await Q({
                serverMutate: (async () => {
                  await (0, g.pushChanges)({
                    blockId: i,
                    skipDeploy: !0,
                    branch: r,
                  });
                })(),
                optimisticData:
                  U.ok && U.value.git
                    ? (0, A.ok)({
                        ...U.value,
                        git: { ...U.value.git, ref: r, gitConnected: !0 },
                      })
                    : void 0,
              }),
                await eo(),
                "create-branch" === R &&
                  (P.setStageIntent(null), P.updateCreateBranchName(null)));
            } catch (i) {
              let r =
                i instanceof Error
                  ? i.message
                  : n("gitSync.toast.failedToPushChanges");
              (a.toast.error(r),
                (0, y.track)("GitSyncError", {
                  chatId: e,
                  projectId: t,
                  action: "push-to-branch",
                  error: r,
                }));
            }
          },
          [Z?.id, Q, eo, R, P, e, t, n, U],
        ),
        em = (0, i.useCallback)(async () => {
          if (!B)
            return void P.setCreateBranchNameError(
              n("gitSync.createBranch.enterBranchName"),
            );
          if (!z)
            return void P.setCreateBranchNameError(
              n("gitSync.createBranch.invalidBranchName"),
            );
          (0, y.track)("GitSyncCreateBranch", {
            chatId: e,
            projectId: t,
            blockId: Z?.id,
            branchName: B,
          });
          try {
            if (Z?.id) {
              P.setCreateBranchNameError(null);
              let e = await (0, f.forkBlock)({ blockId: Z.id });
              e.ok &&
                (P.setIsOpen(!1),
                P.setStageIntent(null),
                a.toast.success(n("gitSync.toast.forkedChatCreatingBranch")(B)),
                r.push(
                  `/chat/${e.value.newChatId}?assignBranch=${encodeURIComponent(B)}`,
                ),
                P.updateCreateBranchName(null));
            } else throw Error(n("gitSync.toast.noBlockSelected"));
          } catch (i) {
            let r =
              i instanceof Error
                ? i.message
                : n("gitSync.toast.failedToCreateBranch");
            (P.setCreateBranchNameError(r),
              a.toast.error(r),
              (0, y.track)("GitSyncError", {
                chatId: e,
                projectId: t,
                action: "create-branch",
                error: r,
              }));
          }
        }, [B, z, e, t, Z?.id, P, n, r]),
        ef = (0, i.useCallback)(async () => {
          try {
            if (!V)
              return void a.toast.error(n("gitSync.toast.noBranchSelected"));
            ((0, y.track)("GitSyncSwitchBranch", {
              chatId: e,
              projectId: t,
              fromBranch: _,
              toBranch: V,
            }),
              P.resetStageOnDelay(),
              await Q({
                serverMutate: (async () => {
                  await (0, x.syncGitBranchToChat)({
                    chatId: e,
                    forkKey: Y,
                    branch: V,
                  });
                })(),
                optimisticData:
                  U.ok && U.value.git
                    ? (0, A.ok)({
                        ...U.value,
                        git: { ...U.value.git, ref: V, gitConnected: !0 },
                      })
                    : void 0,
              }),
              await Promise.all([X(), ee()]));
          } catch (i) {
            P.setStageIntent("switch-branch-confirmation");
            let r =
              i instanceof Error
                ? i.message
                : n("gitSync.toast.failedToSwitchBranch");
            (a.toast.error(r),
              (0, y.track)("GitSyncError", {
                chatId: e,
                projectId: t,
                action: "switch-branch",
                error: r,
              }));
          }
        }, [V, e, t, _, P, Q, X, ee, Y, n, U]),
        eg = (0, i.useCallback)(
          async (r) => {
            (0, y.track)("GitSyncSelectBranch", {
              chatId: e,
              projectId: t,
              branch: r,
            });
            try {
              (await (0, x.syncGitBranchToChat)({
                chatId: e,
                forkKey: Y,
                branch: r,
              }),
                await eo());
            } catch (i) {
              let r =
                i instanceof Error
                  ? i.message
                  : n("gitSync.toast.failedToSyncToBranch");
              (a.toast.error(r),
                (0, y.track)("GitSyncError", {
                  chatId: e,
                  projectId: t,
                  action: "select-branch",
                  error: r,
                }));
            }
          },
          [e, Y, eo, t, n],
        ),
        ex = (0, i.useCallback)(
          async (r) => {
            try {
              ((0, y.track)("GitSyncToggleAutoCommit", {
                chatId: e,
                projectId: t,
                blockId: Z?.id,
                enabled: r,
              }),
                await Q({
                  serverMutate: (async () => {
                    await (0, b.updateGitAutoCommit)(e, r);
                  })(),
                  optimisticData:
                    U.ok && U.value.git
                      ? (0, A.ok)({
                          ...U.value,
                          git: { ...U.value.git, autoCommit: r },
                        })
                      : void 0,
                }),
                P.setIsAutoSyncEnabled(r),
                await eo(),
                a.toast.success(
                  r
                    ? n("gitSync.toast.autoCommitEnabled")
                    : n("gitSync.toast.autoCommitDisabled"),
                ));
            } catch (i) {
              let r =
                i instanceof Error
                  ? i.message
                  : n("gitSync.toast.failedToToggleAutoCommit");
              (a.toast.error(r),
                (0, y.track)("GitSyncError", {
                  chatId: e,
                  projectId: t,
                  action: "toggle-auto-commit",
                  error: r,
                }));
            }
          },
          [e, t, Z?.id, Q, P, eo, n, U],
        ),
        ev = (0, i.useCallback)(
          async (r) => {
            try {
              ((0, y.track)("GitSyncToggleAutoPull", {
                chatId: e,
                projectId: t,
                blockId: Z?.id,
                enabled: r,
              }),
                await Q({
                  serverMutate: (async () => {
                    await (0, j.updateGitAutoPull)(e, r);
                  })(),
                  optimisticData:
                    U.ok && U.value.git
                      ? (0, A.ok)({
                          ...U.value,
                          git: { ...U.value.git, autoPull: r },
                        })
                      : void 0,
                }),
                P.setIsAutoSyncEnabled(r),
                await eo(),
                a.toast.success(
                  r
                    ? n("gitSync.toast.autoPullEnabled")
                    : n("gitSync.toast.autoPullDisabled"),
                ));
            } catch (i) {
              let r =
                i instanceof Error
                  ? i.message
                  : n("gitSync.toast.failedToToggleAutoPull");
              (a.toast.error(r),
                (0, y.track)("GitSyncError", {
                  chatId: e,
                  projectId: t,
                  action: "toggle-auto-pull",
                  error: r,
                }));
            }
          },
          [e, t, Z?.id, Q, P, eo, n, U],
        ),
        ey = (0, i.useCallback)(
          async (r) => {
            try {
              ((0, y.track)("GitSyncUnlinkBranch", {
                chatId: e,
                projectId: t,
                branch: _,
              }),
                await Q({
                  serverMutate: (async () => {
                    await (0, w.updateGitBranchConnection)(e, r);
                  })(),
                  optimisticData:
                    U.ok && U.value.git
                      ? (0, A.ok)({
                          ...U.value,
                          git: { ...U.value.git, gitConnected: r },
                        })
                      : void 0,
                }),
                P.setIsOpen(!1),
                await eo(),
                a.toast.success(n("gitSync.toast.branchUnlinked")));
            } catch (i) {
              let r =
                i instanceof Error
                  ? i.message
                  : n("gitSync.toast.failedToUnlinkBranch");
              (a.toast.error(r),
                (0, y.track)("GitSyncError", {
                  chatId: e,
                  projectId: t,
                  action: "unlink-branch",
                  error: r,
                }));
            }
          },
          [e, t, _, Q, P, eo, n, U],
        ),
        eb = (0, i.useCallback)(() => {
          (P.setIsOpen(!1),
            (0, h.openDialog)({
              type: "feedback",
              data: {
                feedback: n("gitSync.feedback.troubleWithGitSync")(e),
                sentiment: "bad",
              },
            }));
        }, [P, e, n]);
      function ej(e, t) {
        return async (...r) => {
          if (e === F)
            return (0, a.throttleById)(`git-async-action-${e}`, 1e4, () =>
              a.toast.error(n("gitSync.toast.gitOperationInProgress")),
            );
          P.setAsyncActionLoading(e);
          try {
            return await t(...r);
          } finally {
            P.setAsyncActionLoading(null);
          }
        };
      }
      return {
        handleRetry: (0, i.useCallback)(() => {
          r.refresh();
        }, [r]),
        handleReport: eb,
        handleSignInToGitHub: eu,
        handleConnectAppGitHub: ed,
        handleSyncToBranch: ej("syncing-to-branch", eg),
        handleSwitchBranch: ej("switching-branch", ef),
        handleCreateRepo: ej("create-repo", eh),
        handleCreateBranch: ej("creating-branch", em),
        handlePushToBranch: ej("pushing-to-branch", ep),
        handleToggleAutoCommit: ej("toggle-auto-commit", ex),
        handleToggleAutoPull: ej("toggle-auto-pull", ev),
        handleUpdateBranchConnection: ej("updating-branch-connection", ey),
        isConnectedToGit: H,
      };
    }
    var M = p,
      T = m,
      L = e.i(607391),
      P = t,
      R = e.i(304649);
    function F({ title: e, children: t, titleSuffix: n, className: r }) {
      return (0, P.jsxs)("div", {
        className: (0, R.cn)("flex flex-col gap-1.5", r),
        children: [
          (0, P.jsxs)("span", {
            className:
              "text-label-14 flex items-center justify-between gap-2 font-medium",
            children: [e, n],
          }),
          (0, P.jsx)("span", {
            className: "text-label-14 text-v0-gray-900",
            children: t,
          }),
        ],
      });
    }
    e.s(["PopoverHeading", () => F], 662429);
    var _ = C;
    function O({ chatId: e, projectId: i }) {
      let s = (0, _.useT)(),
        a = (0, M.getGitSyncAtoms)(e, i),
        o = (0, T.useAtomValue)(a.asyncActionLoading),
        { handleSignInToGitHub: l } = I({ chatId: e, projectId: i }),
        c = "sign-in" === o;
      function u(e) {
        (e.preventDefault(), l());
      }
      return (0, t.jsxs)("form", {
        id: "sign-in-form",
        onSubmit: u,
        children: [
          (0, t.jsx)(r.PopoverContent, {
            children: (0, t.jsx)(F, {
              title: s("gitSync.signIn.title"),
              children: s("gitSync.signIn.description"),
            }),
          }),
          (0, t.jsx)(r.PopoverActions, {
            children: (0, t.jsx)(n.Button, {
              size: "sm",
              type: "submit",
              disabled: c,
              children: (0, t.jsx)(L.ActionStatus, {
                isLoading: c,
                loading: s("gitSync.signIn.signingIn"),
                children: s("gitSync.signIn.signInButton"),
              }),
            }),
          }),
        ],
      });
    }
    var B = t,
      V = n,
      z = r,
      H = p,
      $ = m,
      U = L,
      G = C,
      W = i,
      q = s,
      Z = e.i(691175);
    function K({ chatId: e, projectId: t }) {
      let n = (0, G.useT)(),
        r = (0, q.useRouter)(),
        i = (0, H.getGitSyncAtoms)(e, t),
        s = (0, $.useAtomValue)(i.gitNamespaces),
        [a, o] = (0, W.useState)(!1);
      function l(e) {
        if ((e.preventDefault(), !s.ok && "scope" in s.error)) {
          let e = s.error.scope;
          e && (o(!0), (0, Z.loginToMissingScope)({ slug: e, push: r.push }));
        }
      }
      return (0, B.jsxs)("form", {
        id: "reauth-required-form",
        onSubmit: l,
        children: [
          (0, B.jsx)(z.PopoverContent, {
            children: (0, B.jsx)(F, {
              title: n("gitSync.reAuth.title"),
              children: n("gitSync.reAuth.description"),
            }),
          }),
          (0, B.jsx)(z.PopoverActions, {
            children: (0, B.jsx)(V.Button, {
              size: "sm",
              type: "submit",
              disabled: a,
              children: (0, B.jsx)(U.ActionStatus, {
                isLoading: a,
                loading: n("gitSync.reAuth.loading"),
                children: n("gitSync.reAuth.title"),
              }),
            }),
          }),
        ],
      });
    }
    (e.s(["ReauthRequiredStage", () => K], 187845),
      e.s(["InstallAppStage", () => er], 957388));
    var Y = t,
      J = n,
      Q = r,
      X = p,
      ee = m,
      et = L,
      en = C;
    function er({ chatId: e, projectId: t }) {
      let n = (0, en.useT)(),
        r = (0, X.getGitSyncAtoms)(e, t),
        i = (0, ee.useAtomValue)(r.asyncActionLoading),
        { handleConnectAppGitHub: s } = I({ chatId: e, projectId: t }),
        a = "install-app" === i;
      function o(e) {
        (e.preventDefault(), s());
      }
      return (0, Y.jsxs)("form", {
        id: "install-app-form",
        onSubmit: o,
        children: [
          (0, Y.jsx)(Q.PopoverContent, {
            children: (0, Y.jsx)(F, {
              title: n("gitSync.installApp.title"),
              children: n("gitSync.installApp.description"),
            }),
          }),
          (0, Y.jsx)(Q.PopoverActions, {
            children: (0, Y.jsx)(J.Button, {
              size: "sm",
              type: "submit",
              disabled: a,
              children: (0, Y.jsx)(et.ActionStatus, {
                isLoading: a,
                loading: n("gitSync.installApp.installingApp"),
                children: n("gitSync.installApp.installVercelApp"),
              }),
            }),
          }),
        ],
      });
    }
    e.s(["CreateRepoStage", () => eC], 54149);
    var ei = t,
      es = n,
      ea = e.i(763480),
      eo = e.i(707974),
      el = r,
      ec = p,
      eu = m,
      ed = L,
      eh = e.i(654335),
      ep = e.i(592258),
      em = e.i(93089),
      ef = e.i(459522),
      eg = e.i(147675),
      ex = C,
      ev = e.i(32170),
      ey = e.i(667660),
      eb = e.i(538553),
      ej = k,
      ew = N;
    function eC({ chatId: e, projectId: t }) {
      let n = (0, ex.useT)(),
        { user: r } = (0, ev.useUser)(),
        { activeScope: i, hasVercelWritePermission: s } = (0,
        ey.useActiveScope)(),
        { project: a } = (0, ej.useChatMetadata)(e),
        o = (0, ew.generateRepoName)(a?.name),
        l = (0, ec.getGitSyncAtoms)(e, t, { defaultRepoName: o }),
        c = (0, ec.getGitSyncActions)(e, { defaultRepoName: o }),
        u = (0, eu.useAtomValue)(l.asyncActionLoading),
        d = (0, eu.useAtomValue)(l.createRepoNameError),
        h = (0, eu.useAtomValue)(l.selectedGitNamespaceName),
        p = (0, eu.useAtomValue)(l.disableAsyncAction),
        { handleCreateRepo: m, handleConnectAppGitHub: f } = I({
          chatId: e,
          projectId: t,
        }),
        g = (0, eu.useAtomValue)(l.gitNamespaces),
        x = "create-repo" === u,
        v = g.ok ? g.value.orgNamespaces.some((e) => e.slug === h) : void 0,
        y = r?.scopeVercelPlan === "hobby",
        b = v && y,
        j = (0, eu.useAtomValue)(l.createRepoName) || o,
        w = (e) => {
          c.setCreateRepoName(e.target.value);
        },
        C = (e) => {
          c.setSelectedGitNamespaceName(e);
        };
      function k(e) {
        (e.preventDefault(), s && m());
      }
      let S = (0, ei.jsx)(eh.default, {
        href: "https://docs.github.com/en/repositories/creating-and-managing-repositories/about-repositories",
        className: "text-v0-blue-700 hover:underline",
        target: "_blank",
        children: n("gitSync.createRepo.privateRepository"),
      });
      return (0, ei.jsxs)("form", {
        id: "create-repo-form",
        onSubmit: k,
        children: [
          (0, ei.jsxs)(el.PopoverContent, {
            children: [
              (0, ei.jsx)(F, {
                title: n("gitSync.createRepo.title"),
                children: n("gitSync.createRepo.description")(S),
              }),
              (0, ei.jsxs)("div", {
                className: "flex flex-col gap-3",
                children: [
                  (0, ei.jsxs)(el.InputRow, {
                    children: [
                      (0, ei.jsx)(eo.Label, {
                        children: n("gitSync.createRepo.gitScope"),
                      }),
                      (0, ei.jsxs)(ep.Select, {
                        value: h ?? "",
                        disabled: x || !s,
                        onValueChange: (e) => C(e),
                        children: [
                          (0, ei.jsx)(eb.RbacTooltip, {
                            show: !s,
                            requiredRole: "V0Builder",
                            children: (0, ei.jsx)(ep.SelectTrigger, {
                              className:
                                "h-8 transition-colors hover:bg-v0-gray-100 px-2",
                              children: (0, ei.jsxs)("div", {
                                className: "flex flex-row items-center gap-2",
                                children: [
                                  (0, ei.jsx)(em.LogoGithub, {}),
                                  h ?? n("gitSync.createRepo.selectGitScope"),
                                ],
                              }),
                            }),
                          }),
                          (0, ei.jsxs)(ep.SelectContent, {
                            children: [
                              g.ok &&
                                g.value.userNamespace &&
                                (0, ei.jsx)(ep.SelectItem, {
                                  value: g.value.userNamespace.slug,
                                  iconOnRight: !0,
                                  className: "pl-2",
                                  children: (0, ei.jsxs)("div", {
                                    className: "flex items-center gap-2",
                                    children: [
                                      (0, ei.jsx)(em.LogoGithub, {
                                        className: "h-4 w-4",
                                      }),
                                      g.value.userNamespace.name,
                                    ],
                                  }),
                                }),
                              g.ok &&
                                g.value.orgNamespaces.map((e) => {
                                  let t = e.name || e.slug;
                                  return (0, ei.jsx)(
                                    ep.SelectItem,
                                    {
                                      value: e.slug,
                                      iconOnRight: !0,
                                      className: "pl-2",
                                      children: (0, ei.jsxs)("div", {
                                        className: "flex items-center gap-2",
                                        children: [
                                          (0, ei.jsx)(em.LogoGithub, {
                                            className: "h-4 w-4",
                                          }),
                                          t,
                                        ],
                                      }),
                                    },
                                    e.id,
                                  );
                                }),
                              (0, ei.jsx)(ep.SelectSeparator, {}),
                              (0, ei.jsx)("div", {
                                className:
                                  "relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-hidden hover:bg-v0-gray-100 hover:text-accent-foreground",
                                onClick: () => {
                                  f();
                                },
                                children: (0, ei.jsxs)("div", {
                                  className: "flex items-center gap-2",
                                  children: [
                                    (0, ei.jsx)(ef.Plus, { size: 14 }),
                                    "Add GitHub Account",
                                  ],
                                }),
                              }),
                            ],
                          }),
                        ],
                      }),
                    ],
                  }),
                  !b &&
                    (0, ei.jsx)(el.InputRow, {
                      children: (0, ei.jsx)(eb.RbacTooltip, {
                        show: !s,
                        requiredRole: "V0Builder",
                        children: (0, ei.jsx)(ea.Input, {
                          label: n("gitSync.createRepo.repositoryName"),
                          id: "create-repo-name",
                          size: "sm",
                          className: "rounded-md",
                          placeholder: n("gitSync.createRepo.repoPlaceholder"),
                          defaultValue: j,
                          onChange: w,
                          disabled: x || !s,
                          error: d,
                        }),
                      }),
                    }),
                  b &&
                    (0, ei.jsxs)("div", {
                      className:
                        "flex flex-row gap-3 items-center justify-center bg-v0-amber-200 rounded-md p-2 text-v0-amber-900",
                      children: [
                        (0, ei.jsx)(eg.Warning, {
                          size: 16,
                          className: "shrink-0",
                        }),
                        (0, ei.jsx)("div", {
                          className: "flex flex-col gap-1.5",
                          children: (0, ei.jsxs)("span", {
                            className: "text-label-14",
                            children: [
                              "Connecting to a private GitHub Organization requires a",
                              " ",
                              (0, ei.jsx)("a", {
                                href: "https://vercel.com/docs/plans/pro",
                                className: "underline",
                                children: "Vercel Pro plan",
                              }),
                              ". Switch to a different team, or upgrade",
                              " ",
                              (0, ei.jsx)("span", {
                                className: "font-medium",
                                children: i?.name ?? "your current team",
                              }),
                              " ",
                              "to a Vercel Pro plan to continue.",
                            ],
                          }),
                        }),
                      ],
                    }),
                ],
              }),
            ],
          }),
          !b &&
            (0, ei.jsx)(el.PopoverActions, {
              children: (0, ei.jsx)(eb.RbacTooltip, {
                show: !s,
                requiredRole: "V0Builder",
                children: (0, ei.jsx)(es.Button, {
                  size: "sm",
                  type: "submit",
                  form: "create-repo-form",
                  disabled: x || !j || p || !s || !h,
                  children: (0, ei.jsx)(ed.ActionStatus, {
                    isLoading: x,
                    loading: n("gitSync.createRepo.creatingRepository"),
                    children: n("gitSync.createRepo.createRepositoryButton"),
                  }),
                }),
              }),
            }),
        ],
      });
    }
    var ek = e.i(877318);
    let eS = (0, ek.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.74999 1.75V1H7.24999V1.75V12.4393L3.28032 8.46967L2.74999 7.93934L1.68933 9L2.21966 9.53033L7.29288 14.6036C7.68341 14.9941 8.31657 14.9941 8.7071 14.6036L13.7803 9.53033L14.3107 9L13.25 7.93934L12.7197 8.46967L8.74999 12.4393V1.75Z" fill="currentColor"/>',
    );
    e.s(["ArrowDown", 0, eS], 1930);
    let eN = (0, ek.withNewIcon)(
      '<path fill="currentColor" fill-rule="evenodd" d="M10 0a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h.854a5.25 5.25 0 0 1-3.969 3.175 3.006 3.006 0 0 0-2.135-2.08V1h-1.5V9.095a3.001 3.001 0 1 0 3.671 3.592A6.75 6.75 0 0 0 12.447 8H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2h-4Zm.25 3.375h-.625v1.25h1.75v1.75h1.25v-1.75h1.75v-1.25h-1.75v-1.75h-1.25v1.75H10.25ZM5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" clip-rule="evenodd"/>',
    );
    e.s(["BranchPlus", 0, eN], 924461);
  },
  408138,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path clip-rule="evenodd" d="M4.25 0C3.00736 0 2 1.00736 2 2.25V11V11.25V11.5C2 12.5252 2.61705 13.4062 3.5 13.792V11.5V11.25V11C3.5 10.4477 3.94772 10 4.5 10H12.5V11.2305V12.5H10.5V14H12.5H14V12.5V11.2305V10V8.5V0.75V0H13.25H4.25ZM12.5 8.5V1.5H4.25C3.83579 1.5 3.5 1.83579 3.5 2.25V8.70802C3.80623 8.57422 4.14445 8.5 4.5 8.5H12.5ZM5.5 11.5C5.22386 11.5 5 11.7239 5 12V16L7 14.75L9 16V12C9 11.7239 8.77614 11.5 8.5 11.5H5.5Z" fill="currentColor" fill-rule="evenodd" />',
    );
    e.s(["Repositories", 0, t]);
  },
  966848,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(840454),
      r = e.i(403055),
      i = e.i(405193),
      s = e.i(556355),
      a = e.i(654335),
      o = e.i(389140);
    function l({ className: e, children: n, ...i }) {
      return (0, t.jsx)(s.DropdownMenuGroup, {
        className: (0, r.cn)("flex flex-col gap-0.5", e),
        ...i,
        children: n,
      });
    }
    function c({ label: e, Icon: n, children: r }) {
      return (0, t.jsxs)("div", {
        className:
          "flex w-full items-center justify-between gap-4 text-v0-gray-900",
        children: [
          (0, t.jsxs)("div", {
            className: "flex items-center gap-3",
            children: [
              n,
              (0, t.jsx)("span", {
                className: "text-nowrap text-sm font-normal text-v0-gray-1000",
                children: e,
              }),
            ],
          }),
          r,
        ],
      });
    }
    function u({ className: e, children: n, clickable: i = !0, ...a }) {
      return (0, t.jsx)(s.DropdownMenuItem, {
        className: (0, r.cn)(!i && "hover:bg-transparent!", e),
        onSelect: (e) => e.preventDefault(),
        ...a,
        children: n,
      });
    }
    function d({ action: e, disabled: n, ...r }) {
      return (0, t.jsx)(u, {
        asChild: !0,
        disabled: n,
        children: (0, t.jsx)("form", {
          action: e,
          children: (0, t.jsx)(h, { ...r }),
        }),
      });
    }
    function h({ label: e, Icon: r, children: s }) {
      let { pending: a } = (0, i.useFormStatus)();
      return (0, t.jsx)("button", {
        type: "submit",
        className: "w-full",
        children: (0, t.jsx)(c, {
          label: e,
          Icon:
            r && a
              ? (0, t.jsx)("div", {
                  className: "flex size-4 items-center justify-center",
                  children: (0, t.jsx)(n.LoadingDots, { size: 4 }),
                })
              : r,
          children: s,
        }),
      });
    }
    function p({
      href: e,
      external: n = !1,
      onClick: r,
      label: i,
      Icon: s,
      children: l,
      className: d,
    }) {
      return n
        ? (0, t.jsx)(u, {
            className: d,
            onSelect: (e) => {
              (e.preventDefault(), r?.());
            },
            asChild: !0,
            children: (0, t.jsx)("a", {
              href: e,
              target: "_blank",
              rel: "noopener",
              children: (0, t.jsx)(c, {
                label: i,
                Icon: s,
                children: l ?? (0, t.jsx)(o.External, {}),
              }),
            }),
          })
        : (0, t.jsx)(u, {
            className: d,
            onSelect: (e) => {
              (e.preventDefault(), r?.());
            },
            asChild: !0,
            children: (0, t.jsx)(a.default, {
              href: e,
              children: (0, t.jsx)(c, { label: i, Icon: s, children: l }),
            }),
          });
    }
    function m({ children: e }) {
      return (0, t.jsx)("div", {
        className: "flex h-8 items-center px-1.5",
        children: (0, t.jsx)("span", {
          className: "text-[13px] font-medium leading-[16px] text-v0-gray-900",
          children: e,
        }),
      });
    }
    e.s([
      "ActionMenuItem",
      () => d,
      "LinkMenuItem",
      () => p,
      "MenuGroup",
      () => l,
      "MenuItem",
      () => u,
      "MenuItemContent",
      () => c,
      "MenuLabel",
      () => m,
    ]);
  },
  339682,
  409267,
  (e) => {
    "use strict";
    e.s(["CreateBranchStage", () => G], 339682);
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(176248),
      i = e.i(978918),
      s = e.i(407705),
      a = e.i(763480),
      o = e.i(607391),
      l = e.i(662429),
      c = e.i(132666),
      u = e.i(576191);
    e.s(
      [
        "BranchSettingsButton",
        () => z,
        "CancelIntentButton",
        () => H,
        "CreateBranchButton",
        () => V,
        "LinkOutToRepoButton",
        () => _,
        "PullChangesButton",
        () => B,
        "PushChangesButton",
        () => O,
      ],
      409267,
    );
    var d = t,
      h = s;
    e.i(675120);
    var p = r,
      m = e.i(762585),
      f = e.i(1930),
      g = e.i(685419),
      x = e.i(924461);
    (e.i(602544), e.i(605177));
    var v = e.i(389140),
      y = e.i(89625),
      b = e.i(459522),
      j = e.i(910427),
      w = e.i(408138),
      C = n,
      k = u;
    (e.i(563948), e.i(407562));
    var S = e.i(654335),
      N = e.i(53223),
      E = e.i(966848),
      A = e.i(556355),
      D = e.i(435433),
      I = c,
      M = e.i(707827),
      T = u;
    function L(e = {}) {
      let { delay: t = 200, disabled: n = !1 } = e,
        [r, i] = (0, T.useState)(n ? 0 : -1),
        s = (0, T.useRef)(null),
        a = () => {
          s.current && (clearTimeout(s.current), (s.current = null));
        };
      return (
        (0, T.useEffect)(
          () => (a(), (s.current = setTimeout(() => i(0), t)), a),
          [],
        ),
        { tabIndex: r }
      );
    }
    var P = o,
      R = e.i(297239),
      F = e.i(996174);
    function _({ projectId: e, chatId: t }) {
      let n = (0, h.getGitSyncAtoms)(t, e),
        r = (0, C.useAtomValue)(n.currentBranch),
        i = (0, C.useAtomValue)(n.externalChatMeta),
        s = i.ok ? i.value.git : void 0,
        a = () => {
          s?.ownerName &&
            s.repoName &&
            (0, N.track)("GitSyncViewRepository", {
              chatId: t,
              repoName: s.repoName,
              ownerName: s.ownerName,
              branch: r || "main",
            });
        };
      return s
        ? (0, d.jsx)(p.Button, {
            size: "sm",
            variant: "secondary",
            asChild: !0,
            type: "button",
            children: (0, d.jsxs)(S.default, {
              href: `https://github.com/${s.ownerName}/${s.repoName}${r && "main" !== r ? `/tree/${r}` : ""}`,
              className: "group justify-start font-normal",
              target: "_blank",
              onClick: a,
              children: [
                (0, d.jsxs)("div", {
                  className: "flex items-center gap-2 truncate",
                  children: [
                    (0, d.jsx)(w.Repositories, {}),
                    (0, d.jsx)("span", {
                      className: "truncate",
                      children: `${s.ownerName}/${s.repoName}`,
                    }),
                  ],
                }),
                (0, d.jsx)(v.External, {
                  className:
                    "min-w-[16px] opacity-0 transition-opacity group-focus-within:opacity-100 group-hover:opacity-100 group-focus:opacity-100",
                }),
              ],
            }),
          })
        : (0, d.jsx)(m.Skeleton, { className: "h-4 w-full" });
    }
    function O({ chatId: e, projectId: t }) {
      let n = (0, R.useT)(),
        r = (0, h.getGitSyncAtoms)(e, t),
        i = (0, C.useAtomValue)(r.currentBranch),
        { handlePushToBranch: s } = (0, I.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        a = (0, C.useAtomValue)(r.asyncActionLoading),
        o = "pushing-to-branch" === a,
        l = () => {
          i && s(i);
        };
      return (0, d.jsx)(p.Button, {
        size: "sm",
        variant: "secondary",
        disabled: !!(o || a),
        className: "flex-1",
        onClick: l,
        children: (0, d.jsx)(P.ActionStatus, {
          isLoading: o,
          loading: n("gitSync.actions.pushing"),
          children: n("gitSync.actions.pushChanges"),
        }),
      });
    }
    function B({ chatId: e, projectId: t }) {
      let n = (0, R.useT)(),
        r = (0, h.getGitSyncAtoms)(e, t),
        i = (0, C.useAtomValue)(r.currentBranch),
        { handleSyncToBranch: s } = (0, I.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        a = (0, C.useAtomValue)(r.asyncActionLoading),
        o = (0, C.useAtomValue)(r.isRefreshingGitHead),
        l = (0, C.useAtomValue)(r.upstreamSha),
        c = "syncing-to-branch" === a,
        u = !!(c || a || o || !l),
        m = () => {
          i && s(i);
        };
      return (0, d.jsx)(p.Button, {
        size: "sm",
        variant: "secondary",
        disabled: u,
        className: "flex-1",
        onClick: m,
        children: (0, d.jsx)(P.ActionStatus, {
          isLoading: c,
          loading: n("gitSync.actions.pulling"),
          children: n("gitSync.actions.pullChanges"),
        }),
      });
    }
    function V({
      chatId: e,
      projectId: t,
      label: n,
      branchIcon: r,
      delayFocus: i,
      variant: s = "secondary",
      className: a,
    }) {
      let o = (0, R.useT)(),
        l = (0, h.getGitSyncAtoms)(e, t),
        c = (0, h.getGitSyncActions)(e),
        u = (0, C.useAtomValue)(l.asyncActionLoading),
        { tabIndex: m } = L({ disabled: !i }),
        f = (0, h.isInState)(u, [
          "creating-branch",
          "syncing-to-branch",
          "pushing-to-branch",
          "switching-branch",
        ]);
      return (0, d.jsx)(p.Button, {
        size: "sm",
        tooltip: n ? void 0 : o("gitSync.actions.createNewBranch"),
        variant: s,
        disabled: f,
        type: "button",
        className: a,
        tabIndex: m,
        onClick: () => c.setStageIntent("create-branch"),
        children: n
          ? (0, d.jsxs)(d.Fragment, {
              children: [(0, d.jsx)(j.PlusCircle, {}), n],
            })
          : r
            ? (0, d.jsx)(x.BranchPlus, {})
            : (0, d.jsx)(b.Plus, {}),
      });
    }
    function z({
      chatId: e,
      projectId: t,
      variant: n = "secondary",
      delayFocus: r = !1,
    }) {
      let i = (0, R.useT)(),
        s = (0, h.getGitSyncAtoms)(e, t),
        a = (0, C.useAtomValue)(s.externalChatMeta),
        o = a.ok ? a.value.git : void 0,
        l = (0, C.useAtomValue)(s.asyncActionLoading),
        c = (0, C.useAtomValue)(s.disableAsyncAction),
        u = (0, C.useAtomValue)(s.currentBranch),
        { tabIndex: m } = L({ disabled: !r }),
        x = !!(l || c),
        [v, b] = (0, k.useState)(!1),
        j = o?.gitAutoCommitPush,
        w = o?.gitAutoPull,
        S = !o?.gitConnected,
        {
          handleUpdateBranchConnection: N,
          handleToggleAutoCommit: T,
          handleToggleAutoPull: P,
        } = (0, I.useAsyncGitSyncActions)({ chatId: e, projectId: t }),
        _ = (e) => {
          (e.preventDefault(),
            o &&
              T(!j).finally(() => {
                b(!1);
              }));
        },
        O = (e) => {
          (e.preventDefault(),
            o &&
              P(!w).finally(() => {
                b(!1);
              }));
        },
        B = (e) => {
          (e.preventDefault(),
            N(!1).finally(() => {
              b(!1);
            }));
        };
      return (0, d.jsxs)(A.DropdownMenu, {
        open: v,
        onOpenChange: b,
        children: [
          (0, d.jsx)(A.DropdownMenuTrigger, {
            asChild: !0,
            children: (0, d.jsx)(p.Button, {
              size: "sm",
              variant: n,
              type: "button",
              tooltipDirection: "bottom",
              tooltip: i("gitSync.actions.branchOptions"),
              tabIndex: m,
              children: (0, d.jsx)($, {}),
            }),
          }),
          (0, d.jsx)(A.DropdownMenuContent, {
            align: "end",
            className: "w-[200px] *:cursor-pointer",
            side: "bottom",
            sideOffset: 8,
            children: (0, d.jsxs)(E.MenuGroup, {
              children: [
                (0, d.jsx)(F.Tooltip, {
                  content: o?.onProductionBranch
                    ? i("gitSync.actions.autoPullDisabledTooltip")
                    : void 0,
                  children: (0, d.jsx)("div", {
                    children: (0, d.jsx)(E.MenuItem, {
                      onSelect: O,
                      disabled: o?.onProductionBranch || x,
                      children: o?.onProductionBranch
                        ? (0, d.jsx)(E.MenuItemContent, {
                            label: i("gitSync.actions.autoPullDisabled"),
                            Icon: (0, d.jsx)(f.ArrowDown, {}),
                          })
                        : (0, d.jsx)(E.MenuItemContent, {
                            label: i(
                              "toggle-auto-pull" === l
                                ? "gitSync.actions.updatingAutoPull"
                                : o?.gitAutoPull
                                  ? "gitSync.actions.disableAutoPull"
                                  : "gitSync.actions.enableAutoPull",
                            ),
                            Icon:
                              "toggle-auto-pull" === l
                                ? (0, d.jsx)(M.Spinner, { size: 16 })
                                : (0, d.jsx)(f.ArrowDown, {}),
                          }),
                    }),
                  }),
                }),
                (0, d.jsx)(F.Tooltip, {
                  content: o?.onProductionBranch
                    ? i("gitSync.actions.autoCommitDisabledTooltip")
                    : void 0,
                  children: (0, d.jsx)("div", {
                    children: (0, d.jsx)(E.MenuItem, {
                      onSelect: _,
                      disabled: o?.onProductionBranch || x,
                      children: o?.onProductionBranch
                        ? (0, d.jsx)(E.MenuItemContent, {
                            label: i("gitSync.actions.autoCommitDisabled"),
                            Icon: (0, d.jsx)(g.ArrowUp, {}),
                          })
                        : (0, d.jsx)(E.MenuItemContent, {
                            label: i(
                              "toggle-auto-commit" === l
                                ? "gitSync.actions.updatingAutoCommit"
                                : o?.gitAutoCommitPush
                                  ? "gitSync.actions.disableAutoCommit"
                                  : "gitSync.actions.enableAutoCommit",
                            ),
                            Icon:
                              "toggle-auto-commit" === l
                                ? (0, d.jsx)(M.Spinner, { size: 16 })
                                : (0, d.jsx)(g.ArrowUp, {}),
                          }),
                    }),
                  }),
                }),
                (0, d.jsx)(E.MenuItem, {
                  disabled: S || !u || x,
                  onSelect: B,
                  children: (0, d.jsx)(E.MenuItemContent, {
                    label: i(
                      "updating-branch-connection" === l
                        ? "gitSync.actions.unlinkingBranch"
                        : "gitSync.actions.unlinkBranch",
                    ),
                    Icon:
                      "updating-branch-connection" === l
                        ? (0, d.jsx)(M.Spinner, { size: 16 })
                        : (0, d.jsx)(D.Unlink, {}),
                  }),
                }),
                o && !o.onProductionBranch
                  ? (0, d.jsx)(E.MenuItem, {
                      onSelect: () =>
                        window.open(
                          `https://github.com/${o.ownerName}/${o.repoName}/pull/new/${u}`,
                          "_blank",
                        ),
                      children: (0, d.jsx)(E.MenuItemContent, {
                        label: i("gitSync.actions.createPullRequest"),
                        Icon: (0, d.jsx)(y.GitPullRequest, {}),
                      }),
                    })
                  : null,
              ],
            }),
          }),
        ],
      });
    }
    function H({ chatId: e, disabled: t, children: n }) {
      let r = (0, R.useT)(),
        i = (0, h.getGitSyncActions)(e);
      return (0, d.jsx)(p.Button, {
        size: "sm",
        variant: "secondary",
        type: "button",
        onClick: () => i.setStageIntent(null),
        disabled: t,
        children: n ?? r("gitSync.cancel"),
      });
    }
    let $ = (0, e.i(751660).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M10.75 5.25C11.5784 5.25 12.25 4.57843 12.25 3.75C12.25 2.92157 11.5784 2.25 10.75 2.25C9.92157 2.25 9.25 2.92157 9.25 3.75C9.25 4.57843 9.92157 5.25 10.75 5.25ZM10.75 6.75C12.1479 6.75 13.3225 5.79392 13.6555 4.5H15.25H16V3H15.25H13.6555C13.3225 1.70608 12.1479 0.75 10.75 0.75C9.35212 0.75 8.17754 1.70608 7.84451 3H0.75H0V4.5H0.75H7.84451C8.17754 5.79392 9.35212 6.75 10.75 6.75ZM15.25 13H16V11.5H15.25L8.15549 11.5C7.82245 10.2061 6.64788 9.25 5.25 9.25C3.85212 9.25 2.67755 10.2061 2.34451 11.5H0.75H0V13H0.75H2.34451C2.67755 14.2939 3.85212 15.25 5.25 15.25C6.64788 15.25 7.82246 14.2939 8.15549 13L15.25 13ZM3.75 12.25C3.75 11.4216 4.42157 10.75 5.25 10.75C6.07843 10.75 6.75 11.4216 6.75 12.25C6.75 13.0784 6.07843 13.75 5.25 13.75C4.42157 13.75 3.75 13.0784 3.75 12.25Z" fill="currentColor"/>',
    );
    var U = R;
    function G({ chatId: e, projectId: d }) {
      let h = (0, U.useT)(),
        p = (0, s.getGitSyncAtoms)(e, d),
        m = (0, s.getGitSyncActions)(e),
        f = (0, n.useAtomValue)(p.currentBranch),
        g = (0, n.useAtomValue)(p.createBranchName),
        x = (0, n.useAtomValue)(p.createBranchNameError),
        v = (0, n.useAtomValue)(p.asyncActionLoading),
        y = (0, n.useAtomValue)(p.disableAsyncAction),
        { handleCreateBranch: b, handlePushToBranch: j } = (0,
        c.useAsyncGitSyncActions)({ chatId: e, projectId: d }),
        w = "creating-branch" === v || "pushing-to-branch" === v,
        C = (0, n.useAtomValue)(p.isAbleToCreateBranch),
        k = (0, u.useRef)(null);
      function S(e) {
        (e.preventDefault(),
          f
            ? b()
            : g
              ? j(g)
              : m.setCreateBranchNameError(
                  h("gitSync.createBranch.enterBranchName"),
                ));
      }
      (0, u.useEffect)(() => {
        k.current && k.current.focus();
      }, []);
      let N = (0, u.useMemo)(
        () =>
          f
            ? h("gitSync.createBranch.forkDescription")
            : h("gitSync.createBranch.createDescription"),
        [h],
      );
      return (0, t.jsxs)("form", {
        id: "create-branch-form",
        onSubmit: S,
        children: [
          (0, t.jsxs)(i.PopoverContent, {
            children: [
              (0, t.jsx)(l.PopoverHeading, {
                title: h("gitSync.createBranch.title"),
                children: N,
              }),
              (0, t.jsx)(a.Input, {
                value: g || "",
                onChange: (e) => m.updateCreateBranchName(e.target.value),
                placeholder: h("gitSync.createBranch.placeholder"),
                size: "sm",
                disabled: w,
                error: x,
                ref: k,
              }),
            ],
          }),
          (0, t.jsxs)(i.PopoverActions, {
            children: [
              (0, t.jsx)(H, { chatId: e, disabled: w }),
              (0, t.jsx)(r.Button, {
                type: "submit",
                size: "sm",
                disabled: !C || w || y,
                children: (0, t.jsx)(o.ActionStatus, {
                  isLoading: w,
                  loading: h("gitSync.createBranch.creatingBranch"),
                  children: h("gitSync.createBranch.createBranchButton"),
                }),
              }),
            ],
          }),
        ],
      });
    }
  },
  443146,
  (e) => {
    "use strict";
    let t = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 5.5V2.5H5.5V5.5H2.5ZM1 2C1 1.44772 1.44772 1 2 1H6C6.55228 1 7 1.44772 7 2V6C7 6.55228 6.55228 7 6 7H2C1.44772 7 1 6.55228 1 6V2ZM2.5 13.5V10.5H5.5V13.5H2.5ZM1 10C1 9.44772 1.44772 9 2 9H6C6.55228 9 7 9.44772 7 10V14C7 14.5523 6.55228 15 6 15H2C1.44772 15 1 14.5523 1 14V10ZM10.5 2.5V5.5H13.5V2.5H10.5ZM10 1C9.44772 1 9 1.44772 9 2V6C9 6.55228 9.44772 7 10 7H14C14.5523 7 15 6.55228 15 6V2C15 1.44772 14.5523 1 14 1H10ZM10.5 13.5V10.5H13.5V13.5H10.5ZM9 10C9 9.44772 9.44772 9 10 9H14C14.5523 9 15 9.44772 15 10V14C15 14.5523 14.5523 15 14 15H10C9.44772 15 9 14.5523 9 14V10Z" fill="currentColor" />',
    );
    e.s(["GridSquare", 0, t]);
  },
  184645,
  700509,
  601921,
  909712,
  (e) => {
    "use strict";
    e.s(["GitSyncButton", () => tr], 184645);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(393799),
      i = e.i(574768),
      s = e.i(407705),
      a = e.i(194465),
      o = t,
      l = r,
      c = e.i(675120),
      u = n,
      d = s,
      h = e.i(241489),
      p = e.i(187845),
      m = e.i(957388),
      f = e.i(54149),
      g = e.i(339682),
      x = t,
      v = e.i(978918),
      y = e.i(707974),
      b = s,
      j = r,
      w = e.i(691701),
      C = e.i(1740),
      k = e.i(548866),
      S = n,
      N = t,
      E = n,
      A = e.i(969372),
      D = e.i(639090),
      I = e.i(910427),
      M = e.i(176248),
      T = e.i(304649),
      L = e.i(998669),
      P = e.i(3139),
      R = e.i(331968),
      F = s,
      _ = r;
    e.i(472428);
    var O = e.i(296900);
    e.i(563948);
    var B = e.i(407562),
      V = c,
      z = e.i(297239),
      H = e.i(242759);
    function $({ chatId: e, projectId: t, onBranchSelect: n }) {
      let r = (0, z.useT)(),
        [i, s] = (0, E.useState)(!1),
        [a, o] = (0, E.useState)(""),
        l = (0, F.getGitSyncAtoms)(e, t),
        c = (0, _.useAtomValue)(l.selectedBranch),
        u = (0, _.useAtomValue)(l.currentBranch),
        d = (0, _.useAtomValue)(l.disableAsyncAction),
        { vpifc: h } = (0, H.useFlags)(),
        { data: p, isLoading: m } = (0, O.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: e },
          { stopFetch: !0, suspense: !0 },
        ),
        { data: f, isLoading: g } = (0, O.useServerQuerySWR)(
          ["project", "latestGit"],
          { projectId: t, branch: u ?? void 0, chatId: h ? e : void 0 },
          { stopFetch: !0, suspense: !0 },
        ),
        x = (0, F.getGitSyncActions)(e),
        v = (0, _.useAtomValue)(l.asyncActionLoading),
        y = (0, F.isInState)(v, [
          "creating-branch",
          "syncing-to-branch",
          "pushing-to-branch",
          "switching-branch",
        ]),
        b = m || g,
        j = (0, _.useAtomValue)(l.allBranches),
        w = j.map((e, t) => ({ id: String(t), name: e })),
        C = (0, E.useMemo)(() => (0, R.sanitizeBranchName)(a), [a]),
        k = !j.some((e) => e.toLowerCase() === (C ?? "").toLowerCase()),
        S = (0, E.useMemo)(() => {
          if (!f.ok) return r("gitSync.branchSwitcher.failedToLoadBranches");
        }, [f.ok, r]),
        T = (0, N.jsxs)(M.Button, {
          variant: "outline",
          className: "min-h-8 flex-1 justify-between font-normal",
          role: "combobox",
          type: "button",
          size: "sm",
          "aria-expanded": i,
          disabled: y || d,
          children: [
            (0, N.jsx)(V.TransitionNode, {
              ...V.PRESETS.inputSwitch,
              children: (0, N.jsx)("span", {
                children:
                  c || (u && p.ok && p.value.git?.gitConnected)
                    ? (0, N.jsxs)("span", {
                        className: "flex items-center gap-2",
                        children: [(0, N.jsx)(D.GitBranch, {}), c ?? u],
                      })
                    : (0, N.jsx)("span", {
                        children: r("gitSync.branchSwitcher.selectBranch"),
                      }),
              }),
            }),
            (0, N.jsx)(A.ChevronDownSmall, {}),
          ],
        });
      function $(e) {
        (n(e), s(!1));
      }
      let G = (e) => {
        o(e);
      };
      function W() {
        k
          ? (x.setStageIntent("create-branch"), x.updateCreateBranchName(C))
          : B.toast.error(r("gitSync.branchSwitcher.branchNameAlreadyTaken"));
      }
      let q = (0, N.jsx)(L.ItemSwitcher, {
        items: w,
        error: S,
        getItemId: (e) => e.id,
        getItemValue: (e) => (0, R.sanitizeBranchName)(e.name) ?? "",
        selectedItemId: w.find((e) => e.name === u)?.id,
        loading: b,
        renderItem: (e) => (0, N.jsx)(U, { item: e }),
        onItemSelect: (e) => {
          e.name === u ? s(!1) : $(e.name);
        },
        filterFunction: (e) =>
          (0, R.sanitizeBranchName)(e.name)
            ?.toLowerCase()
            .includes((0, R.sanitizeBranchName)(a)?.toLowerCase() ?? "") ?? !1,
        hideListWhenEmpty: !0,
        disabled: b || y,
        placeholder: r("gitSync.branchSwitcher.createOrSearchBranches"),
        childClassName: "p-1",
        emptyState: r("gitSync.branchSwitcher.noBranchesFound"),
        searchTerm: a,
        onSearchChange: G,
        children:
          k &&
          (0, N.jsxs)("button", {
            onClick: W,
            onKeyDown: (e) => {
              "Enter" === e.key && (e.preventDefault(), W());
            },
            className:
              "flex h-8 w-full items-center gap-2 overflow-hidden rounded-[6px] px-2 text-v0-blue-700 hover:bg-v0-gray-100 focus:bg-v0-gray-100 focus:outline-hidden ",
            tabIndex: 0,
            role: "menuitem",
            children: [
              (0, N.jsx)(I.PlusCircle, {}),
              (0, N.jsxs)("div", {
                className: "flex flex-row gap-1",
                children: [
                  (0, N.jsxs)("span", {
                    className: "whitespace-nowrap text-v0-gray-1000",
                    children: [
                      (0, N.jsx)("span", {
                        children: r("gitSync.branchSwitcher.create"),
                      }),
                      (0, N.jsx)("span", { children: " " }),
                      (0, N.jsx)("span", {
                        children: !C && r("gitSync.branchSwitcher.branch"),
                      }),
                    ],
                  }),
                  (0, N.jsx)("span", {
                    className: "truncate text-v0-gray-900",
                    children: C,
                  }),
                ],
              }),
            ],
          }),
      });
      return (0, N.jsx)(P.ResponsivePopover, {
        open: i,
        onOpenChange: s,
        trigger: T,
        contentClassName: "w-(--radix-popover-trigger-width)",
        children: q,
      });
    }
    function U({ item: e }) {
      return (0, N.jsx)("div", { children: e.name });
    }
    function G({ children: e, className: t }) {
      return (0, N.jsx)("span", {
        className: (0, T.cn)(
          "text-label-13-mono w-fit shrink-0 break-all rounded-md bg-v0-gray-100 px-1.5 py-1",
          t,
        ),
        children: e,
      });
    }
    var W = t,
      q = e.i(89440),
      Z = T,
      K = e.i(365290),
      Y = n;
    let J = (0, q.cva)(
      "flex h-4 w-4 items-center justify-center overflow-hidden rounded-full *:absolute *:rounded-full",
      {
        variants: {
          state: {
            queued:
              "[&>div]:bg-v0-gray-100 [&>div]:group-hover:bg-v0-gray-200 [&>span]:bg-v0-gray-900",
            ready:
              "[&>div]:bg-v0-blue-100 [&>div]:group-hover:bg-v0-blue-200 [&>span]:bg-v0-blue-700",
            error:
              "[&>div]:bg-v0-red-200 [&>div]:group-hover:bg-v0-red-300 [&>span]:bg-v0-red-700",
            building:
              "[&>div]:bg-v0-amber-200 [&>div]:group-hover:bg-v0-amber-300 [&>span]:bg-v0-amber-700",
            green:
              "[&>div]:bg-v0-green-100 [&>div]:group-hover:bg-v0-green-200 [&>span]:bg-v0-green-700",
          },
        },
      },
    );
    function Q({ state: e = "queued", className: t, stopPing: n = !1, ...r }) {
      let [i, s] = (0, Y.useState)(!0);
      return (
        (0, Y.useEffect)(() => {
          n && setTimeout(() => s(!1), 1e3);
        }, [n]),
        (0, W.jsxs)("span", {
          ...r,
          className: J({ state: e, className: t }),
          children: [
            (0, W.jsx)("div", {
              className: "h-4 w-4 transition-colors duration-200",
            }),
            (0, W.jsx)("span", { className: "h-2 w-2" }),
            (0, W.jsx)("span", {
              className: (0, Z.cn)(
                "h-2 w-2 animate-ping",
                !i && "animate-none",
              ),
              style: {
                ...(0, K.transitionStyles)(["opacity"], { duration: 1e3 }),
              },
            }),
          ],
        })
      );
    }
    var X = e.i(350097),
      ee = c,
      et = O,
      en = e.i(762585),
      er = e.i(409267),
      ei = z,
      es = H;
    function ea({ chatId: e, projectId: t }) {
      let n = (0, ei.useT)(),
        r = (0, b.getGitSyncAtoms)(e, t),
        i = (0, b.getGitSyncActions)(e),
        s = (0, j.useAtomValue)(r.externalChatMeta),
        a = s.ok ? s.value.git : void 0,
        o = (0, j.useAtomValue)(r.currentBranch),
        l = (0, j.useAtomValue)(r.latestProjectGit),
        c = (0, j.useAtomValue)(r.timeSinceLastSync),
        u = (0, j.useAtomValue)(r.asyncActionLoading),
        d = (0, j.useAtomValue)(r.upstreamSha),
        { vpifc: h } = (0, es.useFlags)(),
        { isLoading: p } = (0, et.useServerQuerySWR)(
          ["project", "latestGit"],
          { projectId: t, branch: o ?? void 0, chatId: h ? e : void 0 },
          { stopFetch: !0 },
        ),
        m = "pushing-to-branch" === u;
      function f(e) {
        (i.setStageIntent("switch-branch-confirmation"),
          i.setSwitchBranchTarget(e));
      }
      let g = (0, S.useMemo)(
        () =>
          l.ok
            ? a
              ? m || "syncing-to-branch" === u || "switching-branch" === u
                ? {
                    icon: (0, x.jsx)(eo, {}),
                    title: m
                      ? n("gitSync.status.syncingToBranch")
                      : n("gitSync.status.syncingChanges"),
                    label: (0, x.jsx)(el, { time: c }),
                  }
                : d && !a.gitAutoPull
                  ? {
                      icon: (0, x.jsx)(Q, { state: "building", stopPing: !0 }),
                      title: n("gitSync.status.upstreamChanges"),
                      label: (0, x.jsx)(el, { time: c }),
                    }
                  : {
                      icon: (0, x.jsx)(Q, { state: "green", stopPing: !0 }),
                      title: a.onProductionBranch
                        ? n("gitSync.status.connectedToGitHub")
                        : n("gitSync.status.syncedToGitHub"),
                      label: (0, x.jsx)(el, { time: c }),
                    }
              : {
                  icon: (0, x.jsx)(Q, { state: "error", stopPing: !0 }),
                  title: n("gitSync.status.notConnectedToGitHub"),
                  label: s.ok ? "." : s.error.error,
                }
            : {
                icon: (0, x.jsx)(Q, { state: "error", stopPing: !0 }),
                title: n("gitSync.status.failedToLoadGitHub"),
                label: l.error.error,
              },
        [l, s, a, m, u, d, n, c],
      );
      return a
        ? (0, x.jsxs)(v.PopoverContent, {
            className: "gap-2.5 pt-2.5",
            children: [
              (0, x.jsxs)("div", {
                className: "flex items-center justify-between",
                children: [
                  (0, x.jsx)("div", {
                    className: "flex h-5 flex-1 items-center gap-2",
                    children: p
                      ? (0, x.jsxs)(x.Fragment, {
                          children: [
                            (0, x.jsx)(Q, { state: "queued" }),
                            (0, x.jsx)(en.Skeleton, {
                              className: "h-5",
                              style: { minWidth: "70%" },
                            }),
                          ],
                        })
                      : (0, x.jsxs)(x.Fragment, {
                          children: [
                            (0, x.jsx)(ee.TransitionNode, {
                              ...ee.PRESETS.buttonContent,
                              enter: { scale: 0.5 },
                              children: g.icon,
                            }),
                            (0, x.jsx)(ee.TransitionNode, {
                              duration: 0.3,
                              delay: 0.15,
                              justify: "start",
                              renderKey: g.title,
                              children: (0, x.jsxs)("span", {
                                className:
                                  "text-label-14 flex gap-2 whitespace-nowrap font-medium text-v0-gray-1000",
                                children: [
                                  g.title,
                                  (0, x.jsx)("span", {
                                    className:
                                      "truncate font-normal text-v0-gray-900",
                                    children: g.label,
                                  }),
                                ],
                              }),
                            }),
                          ],
                        }),
                  }),
                  (0, x.jsx)(er.BranchSettingsButton, {
                    chatId: e,
                    projectId: t,
                    variant: "ghost",
                    delayFocus: !0,
                  }),
                ],
              }),
              (0, x.jsxs)("div", {
                className: "flex flex-col gap-4",
                children: [
                  (0, x.jsxs)(v.InputRow, {
                    children: [
                      (0, x.jsx)(y.Label, {
                        children: n("gitSync.status.repository"),
                      }),
                      (0, x.jsx)(er.LinkOutToRepoButton, {
                        chatId: e,
                        projectId: t,
                      }),
                    ],
                  }),
                  o
                    ? (0, x.jsxs)("div", {
                        className: "flex flex-col",
                        children: [
                          (0, x.jsxs)(v.InputRow, {
                            children: [
                              (0, x.jsx)(y.Label, {
                                children: n(
                                  "gitSync.selectBranch.activeBranch",
                                ),
                              }),
                              (0, x.jsxs)("div", {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, x.jsx)($, {
                                    chatId: e,
                                    projectId: t,
                                    onBranchSelect: f,
                                  }),
                                  (0, x.jsx)(er.CreateBranchButton, {
                                    chatId: e,
                                    projectId: t,
                                    variant: "secondary",
                                  }),
                                ],
                              }),
                            ],
                          }),
                          (0, x.jsx)(ee.TransitionNode, {
                            ...ee.PRESETS.popoverContent,
                            children:
                              !a.onProductionBranch &&
                              a.gitAutoCommitPush &&
                              a.gitAutoPull
                                ? (0, x.jsx)("div", {
                                    className:
                                      "text-label-13 flex items-center gap-1 pt-3 text-gray-500",
                                    children: n(
                                      "gitSync.status.autoCommitInfo",
                                    ),
                                  })
                                : (0, x.jsxs)("div", {
                                    className:
                                      "flex w-full items-center gap-2 pt-4",
                                    children: [
                                      !a.gitAutoPull || a.onProductionBranch
                                        ? (0, x.jsx)(er.PullChangesButton, {
                                            chatId: e,
                                            projectId: t,
                                          })
                                        : null,
                                      !a.gitAutoCommitPush ||
                                      a.onProductionBranch
                                        ? (0, x.jsx)(er.PushChangesButton, {
                                            chatId: e,
                                            projectId: t,
                                          })
                                        : null,
                                    ],
                                  }),
                          }),
                        ],
                      })
                    : null,
                ],
              }),
            ],
          })
        : (0, x.jsx)(k.EmptyState, {
            title: n("gitSync.status.notConnectedToGitHub"),
            icon: (0, x.jsx)(w.Stop, {}),
            variant: "error",
            children: n("gitSync.status.notConnectedDescription"),
          });
    }
    function eo() {
      return (0, x.jsx)("div", {
        className: "flex h-4 w-4 items-center justify-center",
        children: (0, x.jsx)(C.RefreshClockwise, {
          className: "animate-spin ease-in-out",
          style: {
            animationDuration: "1.1s",
            animationTimingFunction: "cubic-bezier(.45,.04,.25,.99)",
          },
        }),
      });
    }
    function el({ time: e, prefix: t }) {
      let n = (0, ei.useT)(),
        [r, i] = (0, S.useState)(0);
      (0, S.useEffect)(() => {
        let t = setInterval(() => {
          (e ?? Date.now() > Date.now() - 65e3) && i(r + 1);
        }, 200);
        return () => clearInterval(t);
      }, [e, r, i]);
      let s = e ?? Date.now(),
        a = s > Date.now() - 15e3;
      return (0, x.jsxs)("span", {
        children: [
          t,
          a
            ? (0, x.jsx)("span", {
                children: n(
                  t
                    ? "gitSync.status.justNow"
                    : "gitSync.status.justNowCapitalized",
                ),
              })
            : (0, X.timeAgo)(new Date(s), !0, Date.now(), !1),
        ],
      });
    }
    var ec = t,
      eu = M,
      ed = w,
      eh = v,
      ep = k,
      em = e.i(132666),
      ef = z;
    function eg({ chatId: e, projectId: t }) {
      let n = (0, ef.useT)(),
        { handleRetry: r, handleReport: i } = (0, em.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        });
      function s(e) {
        (e.preventDefault(), r());
      }
      return (0, ec.jsxs)("form", {
        id: "error-form",
        onSubmit: s,
        children: [
          (0, ec.jsx)(eh.PopoverContent, {
            children: (0, ec.jsx)(ep.EmptyState, {
              title: n("gitSync.error.title"),
              variant: "error",
              icon: (0, ec.jsx)(ed.Stop, {}),
              children: n("gitSync.error.description"),
            }),
          }),
          (0, ec.jsxs)(eh.PopoverActions, {
            children: [
              (0, ec.jsx)(eu.Button, {
                size: "sm",
                onClick: i,
                type: "button",
                variant: "secondary",
                children: n("gitSync.error.report"),
              }),
              (0, ec.jsx)(eu.Button, {
                size: "sm",
                type: "submit",
                children: n("gitSync.error.reload"),
              }),
            ],
          }),
        ],
      });
    }
    var ex = t,
      ev = v,
      ey = e.i(662429),
      eb = y,
      ej = em,
      ew = M,
      eC = s,
      ek = r,
      eS = e.i(607391),
      eN = B,
      eE = er,
      eA = n,
      eD = z;
    function eI({ chatId: e, projectId: t }) {
      let n = (0, eD.useT)(),
        r = (0, eC.getGitSyncAtoms)(e, t),
        i = (0, ek.useAtomValue)(r.selectedBranch),
        s = (0, eC.getGitSyncActions)(e),
        a = (0, ek.useAtomValue)(r.latestProjectGit),
        o = a.ok ? a.value.branches : void 0,
        { handleSyncToBranch: l } = (0, ej.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        c = (0, ek.useAtomValue)(r.asyncActionLoading),
        u = (0, ek.useAtomValue)(r.disableAsyncAction),
        d = (0, eC.isInState)(c, [
          "syncing-to-branch",
          "pushing-to-branch",
          "switching-branch",
          "updating-branch-connection",
        ]),
        h = "syncing-to-branch" === c;
      function p(e) {
        (e.preventDefault(), i)
          ? l(i).then(() => {
              s.setSelectedBranch(null);
            })
          : eN.toast.error(n("gitSync.selectBranch.pleaseSelectBranch"));
      }
      return (
        (0, eA.useEffect)(() => {
          o?.length === 1 && s.setSelectedBranch(o[0].name);
        }, [s, o]),
        (0, ex.jsxs)("form", {
          id: "sync-to-branch-form",
          onSubmit: p,
          children: [
            (0, ex.jsxs)(ev.PopoverContent, {
              children: [
                (0, ex.jsx)(ey.PopoverHeading, {
                  title: n("gitSync.selectBranch.title"),
                  children: n("gitSync.selectBranch.description"),
                }),
                (0, ex.jsxs)(ev.InputRow, {
                  children: [
                    (0, ex.jsx)(eb.Label, {
                      children: n("gitSync.selectBranch.projectRepository"),
                    }),
                    (0, ex.jsx)(eE.LinkOutToRepoButton, {
                      chatId: e,
                      projectId: t,
                    }),
                  ],
                }),
                (0, ex.jsxs)(ev.InputRow, {
                  children: [
                    (0, ex.jsx)(eb.Label, {
                      children: n("gitSync.selectBranch.activeBranch"),
                    }),
                    (0, ex.jsxs)("span", {
                      className: "flex items-center gap-2",
                      children: [
                        (0, ex.jsx)($, {
                          chatId: e,
                          projectId: t,
                          onBranchSelect: (e) => s.setSelectedBranch(e),
                        }),
                        (0, ex.jsx)(eE.CreateBranchButton, {
                          chatId: e,
                          projectId: t,
                          branchIcon: !0,
                        }),
                      ],
                    }),
                  ],
                }),
              ],
            }),
            (0, ex.jsx)(ev.PopoverActions, {
              children: (0, ex.jsx)(ew.Button, {
                size: "sm",
                disabled: !i || d || u,
                type: "submit",
                children: (0, ex.jsx)(eS.ActionStatus, {
                  isLoading: h,
                  loading: n("gitSync.selectBranch.settingActiveBranch"),
                  children: n("gitSync.selectBranch.setActiveBranch"),
                }),
              }),
            }),
          ],
        })
      );
    }
    var eM = t,
      eT = v,
      eL = em,
      eP = M,
      eR = s,
      eF = r,
      e_ = eS,
      eO = er,
      eB = ey,
      eV = y,
      ez = e.i(654335),
      eH = n,
      e$ = z;
    function eU({ chatId: e, projectId: t }) {
      let n = (0, e$.useT)(),
        r = (0, eR.getGitSyncAtoms)(e, t),
        i = (0, eF.useAtomValue)(r.externalChatMeta),
        s = i.ok ? i.value.git : void 0,
        a = (0, eF.useAtomValue)(r.currentBranch),
        o = (0, eH.useRef)(a).current,
        l = (0, eF.useAtomValue)(r.switchBranchTarget),
        { handleSwitchBranch: c } = (0, eL.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        u = "switching-branch" === (0, eF.useAtomValue)(r.asyncActionLoading);
      function d(e) {
        (e.preventDefault(), c());
      }
      if (!o || !l)
        return (0, eM.jsxs)(eM.Fragment, {
          children: [
            (0, eM.jsx)(eT.PopoverContent, {
              children: (0, eM.jsx)(eB.PopoverHeading, {
                title: n("gitSync.switchBranch.title"),
                children: n("gitSync.switchBranch.noBranchFound"),
              }),
            }),
            (0, eM.jsx)(eT.PopoverActions, {
              children: (0, eM.jsx)(eO.CancelIntentButton, {
                chatId: e,
                children: n("gitSync.switchBranch.okay"),
              }),
            }),
          ],
        });
      let h = (e) =>
        s ? `https://github.com/${s.ownerName}/${s.repoName}/tree/${e}` : "#";
      return (0, eM.jsxs)("form", {
        id: "switch-branch-form",
        onSubmit: d,
        children: [
          (0, eM.jsxs)(eT.PopoverContent, {
            children: [
              (0, eM.jsx)(eB.PopoverHeading, {
                title: n("gitSync.switchBranch.title"),
                children: n("gitSync.switchBranch.description"),
              }),
              (0, eM.jsxs)("div", {
                className: "flex flex-col items-center gap-3",
                children: [
                  (0, eM.jsx)(eG, {
                    title: n("gitSync.switchBranch.currentBranch"),
                    branch: o,
                    href: h(o),
                  }),
                  (0, eM.jsx)("span", {
                    className: "w-full border-t border-v0-gray-200",
                  }),
                  (0, eM.jsx)(eG, {
                    title: n("gitSync.switchBranch.newBranch"),
                    branch: l,
                    href: h(l),
                  }),
                ],
              }),
            ],
          }),
          (0, eM.jsxs)(eT.PopoverActions, {
            children: [
              (0, eM.jsx)(eO.CancelIntentButton, { chatId: e, disabled: u }),
              (0, eM.jsx)(eP.Button, {
                size: "sm",
                disabled: u,
                type: "submit",
                children: (0, eM.jsx)(e_.ActionStatus, {
                  isLoading: u,
                  loading: n("gitSync.switchBranch.switchingBranch"),
                  children: n("gitSync.switchBranch.switchBranchButton"),
                }),
              }),
            ],
          }),
        ],
      });
    }
    function eG({ title: e, branch: t, href: n }) {
      return (0, eM.jsxs)("div", {
        className: "flex w-full items-center justify-between gap-2",
        children: [
          (0, eM.jsx)(eV.Label, {
            className: "whitespace-nowrap",
            children: e,
          }),
          (0, eM.jsx)(ez.default, {
            href: n,
            target: "_blank",
            className: "decoration-v0-gray-500 hover:underline",
            children: (0, eM.jsx)(G, { children: t }),
          }),
        ],
      });
    }
    var eW = e.i(53223);
    function eq({ ...e }) {
      let t = (0, d.getGitSyncAtoms)(e.chatId, e.projectId),
        n = (0, l.useAtomValue)(t.stage);
      (0, u.useEffect)(() => {
        (0, eW.track)("GitSyncStageView", {
          chatId: e.chatId,
          stage: n,
          projectId: e.projectId,
        });
      }, [n, e.chatId, e.projectId]);
      let r = (0, u.useMemo)(() => {
        switch (n) {
          case "sign-in":
            return (0, o.jsx)(h.SignInStage, { ...e });
          case "reauth-required":
            return (0, o.jsx)(p.ReauthRequiredStage, { ...e });
          case "install-app":
            return (0, o.jsx)(m.InstallAppStage, { ...e });
          case "create-repo":
            return (0, o.jsx)(f.CreateRepoStage, { ...e });
          case "create-branch":
            return (0, o.jsx)(g.CreateBranchStage, { ...e });
          case "switch-branch-confirmation":
            return (0, o.jsx)(eU, { ...e });
          case "status":
            return (0, o.jsx)(ea, { ...e });
          case "select-branch":
            return (0, o.jsx)(eI, { ...e });
          case "error":
            return (0, o.jsx)(eg, { ...e });
        }
      }, [e, n]);
      return (0, o.jsx)(c.TransitionNode, {
        ...c.PRESETS.popoverContent,
        childClassName: "overflow-hidden",
        children: (0, o.jsx)("div", {
          className: "flex flex-col overflow-hidden",
          children: r,
        }),
      });
    }
    var eZ = O,
      eK = e.i(209819),
      eY = n,
      eJ = e.i(226368),
      eQ = e.i(449381),
      eX = r,
      e0 = s,
      e1 = em;
    function e2({ chatId: e, projectId: t }) {
      let n = (0, eJ.useRouter)(),
        r = (0, eJ.useSearchParams)(),
        i = (0, e0.getGitSyncAtoms)(e, t),
        s = (0, eY.useRef)(!1),
        { handlePushToBranch: a } = (0, e1.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        o = (0, eX.useAtomValue)(i.isConnectedToGit),
        l = (0, eQ.useActiveBlockState)(),
        c = (0, eX.useAtomValue)(i.asyncActionLoading),
        u = (0, eX.useAtomValue)(i.currentBranch),
        d = (0, eY.useCallback)(() => {
          let e = new URLSearchParams(r.toString());
          e.delete("assignBranch");
          let t =
            window.location.pathname + (e.toString() ? `?${e.toString()}` : "");
          n.replace(t);
        }, [r, n]),
        h = (0, eY.useMemo)(() => {
          let e = r.get("assignBranch");
          return e &&
            "pushing-to-branch" !== c &&
            o &&
            l?.id &&
            !u &&
            !s.current
            ? e
            : null;
        }, [r, c, o, l?.id, u]);
      (0, eY.useEffect)(() => {
        h &&
          !s.current &&
          ((s.current = !0),
          a(h).finally(() => {
            ((s.current = !1), d());
          }));
      }, [h, a, d]);
    }
    var e5 = B,
      e3 = O,
      e4 = s,
      e9 = n,
      e7 = r,
      e6 = em,
      e8 = z,
      te = H;
    function tt({ chatId: e, projectId: t }) {
      let n = (0, e8.useT)(),
        r = (0, e4.getGitSyncAtoms)(e, t),
        i = (0, e4.getGitSyncActions)(e),
        s = (0, e7.useAtomValue)(r.isOpen),
        { handleSyncToBranch: a } = (0, e6.useAsyncGitSyncActions)({
          chatId: e,
          projectId: t,
        }),
        o = (0, e7.useAtomValue)(r.externalChatMeta),
        l = o.ok ? o.value.git : void 0,
        c = (0, e7.useAtomValue)(r.currentBranch),
        u = (0, e7.useAtomValue)(r.upstreamSha),
        { vpifc: d } = (0, te.useFlags)(),
        { isLoading: h, isValidating: p } = (0, e3.useServerQuerySWR)(
          ["project", "latestGit"],
          { projectId: t, branch: c ?? void 0, chatId: d ? e : void 0 },
          { refreshInterval: 6e4, stopFetch: !t },
        ),
        m = (0, e9.useCallback)(() => {
          if (!u || !c || !l || !l.gitAutoPull || l.onProductionBranch) return;
          let e = a(c).then(() => {
            i.addSyncedSha(u);
          });
          s ||
            (0, e5.throttleById)("git-sync-promise", 5e3, () =>
              e5.toast.promise({
                promise: e,
                loading: n("gitSync.toast.syncingExternalChanges"),
                success: n("gitSync.toast.syncedExternalChanges"),
                error: n("gitSync.toast.failedToSyncExternalChanges"),
              }),
            );
        }, [u, c, l, a, s, i, n]);
      ((0, e9.useEffect)(() => {
        m();
      }, [u]),
        (0, e9.useEffect)(() => {
          i.updateIsRefreshingGitHead(h || p);
        }, [i, h, p]));
    }
    var tn = eW;
    function tr({ chatId: e }) {
      let { project: r, isLoading: i } = (0, eK.useChatMetadata)(e);
      return i
        ? (0, t.jsx)(a.GitSyncTriggerSkeleton, {})
        : r
          ? (0, t.jsx)(
              n.Suspense,
              {
                fallback: (0, t.jsx)(a.GitSyncTriggerSkeleton, {}),
                children: (0, t.jsx)(ti, { chatId: e, projectId: r.projectId }),
              },
              e,
            )
          : (0, t.jsx)(a.GitSyncCreateProjectTrigger, { chatId: e });
    }
    function ti({ chatId: e, projectId: n }) {
      ((0, eZ.useServerQuerySWR)(["scoped", "gitNamespaces"], {}),
        (0, eZ.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: e },
          { suspense: !0 },
        ),
        tt({ chatId: e, projectId: n }),
        e2({ chatId: e, projectId: n }));
      let o = (0, s.getGitSyncAtoms)(e, n),
        l = (0, s.getGitSyncActions)(e),
        c = (0, r.useAtomValue)(o.isOpen),
        u = (0, r.useAtomValue)(o.isConnectedToGit),
        d = (0, r.useAtomValue)(o.stage),
        h = (t) => {
          (l.setIsOpen(t),
            t
              ? (0, tn.track)("GitSyncPopoverOpen", {
                  chatId: e,
                  projectId: n,
                  isConnectedToGit: u,
                })
              : (0, tn.track)("GitSyncPopoverClose", { chatId: e, stage: d }));
        };
      return (0, t.jsxs)(i.Popover, {
        open: c,
        onOpenChange: h,
        modal: !0,
        children: [
          (0, t.jsx)(i.PopoverTrigger, {
            asChild: !0,
            children: (0, t.jsx)(a.GitSyncTrigger, { chatId: e, projectId: n }),
          }),
          (0, t.jsx)(i.PopoverContent, {
            className: "w-[400px] max-w-screen origin-top-right",
            align: "end",
            alignOffset: 1,
            children: (0, t.jsx)(eq, { chatId: e, projectId: n }),
          }),
        ],
      });
    }
    var ts = e.i(877318);
    let ta = (0, ts.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 4.5C14.3284 4.5 15 3.82843 15 3C15 2.17157 14.3284 1.5 13.5 1.5C13.1212 1.5 12.7752 1.64043 12.5111 1.87207C12.4768 1.89889 12.4444 1.92909 12.4143 1.96262L8.29606 6.55029L7.64437 4.68404C6.97852 2.77723 5.17966 1.5 3.15993 1.5H2V3H3.15993C4.54185 3 5.77265 3.87389 6.22823 5.17855L7.1522 7.82454L4.24177 11.0667C3.85139 11.5016 3.16427 11.5008 2.57158 11.5001C2.54756 11.5 2.52369 11.5 2.5 11.5C1.67157 11.5 1 12.1716 1 13C1 13.8284 1.67157 14.5 2.5 14.5C2.87465 14.5 3.21721 14.3627 3.48009 14.1356C3.52245 14.1049 3.56223 14.0692 3.59859 14.0287L7.71672 9.44115L8.87551 12.7596C9.23003 13.7748 10.1878 14.4548 11.2631 14.4548C11.9338 14.4548 12.5771 14.1884 13.0514 13.7141L14.5303 12.2352L13.4697 11.1745L11.9907 12.6534C11.7978 12.8464 11.536 12.9548 11.2631 12.9548C10.8256 12.9548 10.4359 12.6781 10.2917 12.2651L8.86058 8.1669L11.7636 4.93297C12.1536 4.49852 12.8399 4.49929 13.4317 4.49995C13.4546 4.49997 13.4774 4.5 13.5 4.5Z" fill="currentColor"/>',
    );
    e.s(["Variable", 0, ta], 700509);
    let to = (0, ts.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M3.75 0C2.50736 0 1.5 1.00736 1.5 2.25V13.744V13.75H1.50001C1.50323 14.9899 2.50935 15.994 3.75 15.994H13H14.5V14.494V13.7296V12.994V11.494V0.75V0H13.75H3.75ZM13 11.494V1.5H3.75C3.33579 1.5 3 1.83579 3 2.25V11.622C3.23458 11.5391 3.48702 11.494 3.75 11.494H13ZM3 13.744C3 14.1582 3.33579 14.494 3.75 14.494H13V13.7296V12.994H3.75C3.33579 12.994 3 13.3298 3 13.744Z" fill="currentColor"/>',
    );
    e.s(["BookClosed", 0, to], 601921);
    let tl = (0,
    ts.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M10.7499 1H9.99987V2.5H10.7499H12.4392L1.46954 13.4697L0.939209 14L1.99987 15.0607L2.5302 14.5303L13.4987 3.56182V5.25V6H14.9987V5.25V2C14.9987 1.44772 14.551 1 13.9987 1H10.7499Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.0002 7.06067L5.46983 6.53038L1.4691 2.53034L0.938721 2.00005L1.99929 0.939301L2.52967 1.46959L6.5304 5.46963L7.06077 5.99992L6.0002 7.06067ZM12.4377 13.4994H10.7499H9.99994V14.9994H10.7499H13.9994C14.5517 14.9994 14.9994 14.5517 14.9994 13.9994V10.75V9.99999H13.4994V10.75V12.4398L10.5305 9.46978L10.0003 8.93934L8.93944 9.99979L9.46966 10.5302L12.4377 13.4994Z" fill="currentColor"/>`);
    e.s(["ArrowCrossed", 0, tl], 909712);
  },
  980008,
  162889,
  438419,
  (e) => {
    "use strict";
    var t = e.i(877318);
    let n = (0, t.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 0.433594L8.65845 1.64093L10.5908 5.18412L14.5577 5.92698L15.9094 6.18011L14.9646 7.17942L12.192 10.1121L12.7113 14.1144L12.8883 15.4782L11.6459 14.8884L8.00001 13.1577L4.35408 14.8884L3.11173 15.4782L3.28869 14.1144L3.80802 10.1121L1.03538 7.17942L0.0906067 6.18011L1.44233 5.92698L5.40922 5.18412L7.34156 1.64093L8.00001 0.433594ZM8.00001 3.56646L6.55565 6.21487L6.38519 6.52743L6.03525 6.59296L3.07014 7.14822L5.14259 9.34029L5.38718 9.59899L5.34137 9.95205L4.95318 12.9436L7.67838 11.65L8.00001 11.4973L8.32163 11.65L11.0468 12.9436L10.6586 9.95205L10.6128 9.59899L10.8574 9.34029L12.9299 7.14822L9.96476 6.59296L9.61482 6.52743L9.44436 6.21487L8.00001 3.56646Z" fill="currentColor"/>',
    );
    e.s(["Star", 0, n], 980008);
    let r = (0, t.withNewIcon)(
      '<path d="M7.99999 0.489502L10.5734 5.20807L15.8562 6.19736L12.1638 10.1029L12.8554 15.4329L7.99999 13.1281L3.1446 15.4329L3.83621 10.1029L0.143799 6.19736L5.42663 5.20807L7.99999 0.489502Z" fill="currentColor"/>',
    );
    e.s(["StarFill", 0, r], 162889);
    var i = e.i(324834),
      s = e.i(127558),
      a = t;
    let o = {
        hover: {
          opacity: 1,
          y: [0, 2, 0],
          transition: {
            ...s.DEFAULT_TRANSITION,
            y: { ...s.DEFAULT_TRANSITION, duration: 1.1, repeat: 1 / 0 },
          },
        },
      },
      l = (e) => ({
        opacity: [0, 1],
        y: [16, 0],
        scaleX: 1,
        scaleY: 1,
        interruptible: !1,
        transition: { ease: [0.13, 0.65, 0.14, 1], duration: 0.25, delay: e },
      }),
      c = (0, a.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V13.5H8.75011V3.56062Z" fill="currentColor"/>',
      ),
      u = (0, a.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V11H8.75011V3.56062Z" fill="currentColor"/>',
      ),
      d = (0, a.withNewIcon)(
        '<path clip-rule="evenodd" d="M13.5 13.5L13.5 8.5L15 8.5L15 14C15 14.5523 14.5523 15 14 15L2 15C1.44771 15 1 14.5523 1 14L1 8.5L2.5 8.5L2.5 13.5L13.5 13.5Z" fill="currentColor" fill-rule="evenodd"/>',
      ),
      h = (0, i.jsxs)(s.AnimatedIconGroup, {
        hideOverflow: !0,
        children: [
          (0, i.jsx)(s.AnimatedIcon, {
            variants: {
              ...o,
              idle: { opacity: 0 },
              tap: {
                opacity: 0,
                y: -16,
                interruptible: !1,
                transition: { ease: [0.33, 0.03, 0.94, 0.42], duration: 0.5 },
              },
            },
            children: (0, i.jsx)(c, {}),
          }),
          (0, i.jsx)(s.AnimatedIcon, {
            variants: { ...o, idle: { opacity: 1 }, tap: l(0.4) },
            children: (0, i.jsx)(u, {}),
          }),
          (0, i.jsx)(s.AnimatedIcon, {
            variants: {
              hover: {
                opacity: 0,
                y: 4,
                scaleX: 0,
                scaleY: 0.5,
                transition: s.DEFAULT_TRANSITION,
              },
              idle: { opacity: 1, scaleX: 1, scaleY: 1 },
              tap: l(0.47),
            },
            children: (0, i.jsx)(d, {}),
          }),
        ],
      });
    e.s(["animatedShare", 0, h], 438419);
  },
  740292,
  804851,
  195292,
  (e) => {
    "use strict";
    e.s(
      [
        "SuspendingChatActions",
        () => R,
        "SuspendingFavoriteChatDropdownItem",
        () => O,
        "SuspendingRestoreButton",
        () => B,
      ],
      740292,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(176248),
      i = e.i(304649),
      s = e.i(556355),
      a = e.i(53223),
      o = e.i(659563),
      l = e.i(383790),
      c = e.i(749299),
      u = e.i(980008),
      d = e.i(162889),
      h = e.i(70165),
      p = e.i(438419);
    e.i(904347);
    var m = e.i(37737),
      f = e.i(297239);
    e.i(563948);
    var g = e.i(407562),
      x = e.i(246300),
      v = e.i(226368),
      y = e.i(32170),
      b = e.i(504066),
      j = e.i(919012),
      w = (0, j.createServerReference)(
        "40c34fb946aec285b77c20f68eeaa7f3c4f6b18d8d",
        j.callServer,
        void 0,
        j.findSourceMapURL,
        "favoriteChat",
      ),
      C = j,
      k = (0, C.createServerReference)(
        "405146e6bb90cf5c23bccd3677b2d9ccfdfadc1600",
        C.callServer,
        void 0,
        C.findSourceMapURL,
        "unfavoriteChat",
      ),
      S = e.i(783069);
    function N(e, t) {
      return (0, S.toSorted)(e, (e, n) =>
        null === e[t]
          ? 1
          : null === n[t]
            ? -1
            : new Date(n[t]).getTime() - new Date(e[t]).getTime(),
      );
    }
    (e.s(["sortByDateKey", () => N], 804851), e.i(472428));
    var E = e.i(296900),
      A = j,
      D = (0, A.createServerReference)(
        "40b0ef5adc857174ebfed0ceb496f2270abbb6bec8",
        A.callServer,
        void 0,
        A.findSourceMapURL,
        "restoreChat",
      );
    e.s(["restoreChat", () => D], 195292);
    var I = e.i(211976),
      M = e.i(120485),
      T = e.i(476171),
      L = e.i(387040);
    function P({ chat: e }) {
      let { user: n } = (0, y.useUser)(),
        r = (0, f.useT)(),
        i = e.authorId === n?.id,
        { copyToClipboard: o } = (0, b.useCopyToClipboard)({ timeout: 2e3 });
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(s.DropdownMenuItem, {
            onSelect: () => {
              (o(
                `${window.location.origin}/chat/${(0, T.getSluggifiedId)(e.chatId, e.title)}`,
              ),
                g.toast.success("Share link copied!"));
            },
            children: [
              p.animatedShare,
              (0, t.jsx)("span", { children: r("chatActions.share") }),
            ],
          }),
          i &&
            (0, t.jsxs)(s.DropdownMenuItem, {
              onSelect: () => {
                ((0, a.track)("RenameChat", { targetChatId: e.chatId }),
                  (0, m.openDialog)({
                    type: "updateChatTitle",
                    data: { chatId: e.chatId },
                  }));
              },
              children: [
                (0, t.jsx)(c.PencilEdit, {}),
                (0, t.jsx)("span", { children: r("chatActions.rename") }),
              ],
            }),
          i ? (0, t.jsx)(O, { chat: e }) : null,
          i &&
            (0, t.jsxs)(s.DropdownMenuItem, {
              onSelect: () => {
                (0, m.openDialog)({
                  type: "deleteChat",
                  data: { chatId: e.chatId },
                });
              },
              variant: "destructive",
              children: [
                (0, t.jsx)(l.Trash, {}),
                (0, t.jsx)("span", { children: r("chatActions.delete") }),
              ],
            }),
        ],
      });
    }
    function R({ chat: e, className: n, side: a = "bottom", ...l }) {
      let c = (0, h.useIsMobile)();
      return (0, t.jsxs)(s.DropdownMenu, {
        children: [
          (0, t.jsx)(s.DropdownMenuTrigger, {
            asChild: !0,
            children: (0, t.jsxs)(r.Button, {
              className: (0, i.cn)(
                "relative z-10 size-7 shrink-0 rounded-md p-0 transition-none has-[>svg]:p-0 ",
                n,
              ),
              "cmdk-item-actions": "",
              size: "sm",
              variant: "ghost",
              ...l,
              children: [
                (0, t.jsx)(o.MoreHorizontal, {}),
                (0, t.jsx)("span", {
                  className: "sr-only",
                  children: "Open chat actions",
                }),
              ],
            }),
          }),
          (0, t.jsx)(s.DropdownMenuContent, {
            align: c ? "end" : "right" === a ? "start" : "end",
            side: c ? "bottom" : a,
            sideOffset: 8,
            children: (0, t.jsx)(s.DropdownMenuGroup, {
              children: (0, t.jsx)(P, { chat: e, side: a }),
            }),
          }),
        ],
      });
    }
    function F({ setChatHistoryData: e, setChatFavoritesData: r, chat: i }) {
      let o = (0, f.useT)(),
        l = (0, v.usePathname)(),
        c = (0, v.useRouter)(),
        { data: h, mutate: p } = (0, E.useServerQuerySWR)(
          ["scoped", "chats"],
          {},
          { suspense: !0 },
        ),
        [m, g] = (0, n.useTransition)(),
        [x, y] = (0, n.useOptimistic)(i.favorite);
      return (0, t.jsxs)(s.DropdownMenuItem, {
        variant: x ? "gold" : "default",
        disabled: m,
        onSelect: async () => {
          let t = {
            ...i,
            title: i.title || "",
            privacy: "private",
            shareable: !1,
            authorId: "",
            updatedAt: i.updatedAt || new Date(),
            projectId: i.projectId || "",
          };
          (i.favorite
            ? ((0, a.track)("UnfavoriteChat", { targetChatId: i.chatId }),
              await p({
                serverMutate: k(i.chatId),
                optimisticData: (0, L.ok)({
                  favorites: h.ok
                    ? h.value.favorites.filter((e) => e.chatId !== i.chatId)
                    : [],
                  shared: h.ok ? h.value.shared : [],
                  history: N(
                    [...(h.ok ? h.value.history : []), t],
                    "updatedAt",
                  ),
                }),
              }))
            : ((0, a.track)("FavoriteChat", { targetChatId: i.chatId }),
              await p({
                serverMutate: w(i.chatId),
                optimisticData: (0, L.ok)({
                  favorites: N(
                    [...(h.ok ? h.value.favorites : []), t],
                    "updatedAt",
                  ),
                  shared: h.ok ? h.value.shared : [],
                  history: h.ok
                    ? h.value.history.filter((e) => e.chatId !== i.chatId)
                    : [],
                }),
              })),
            g(() => {
              (y((e) => !e),
                i.favorite
                  ? (e((e) => {
                      let t = e.findIndex(
                          (e) =>
                            e.updatedAt &&
                            i.updatedAt &&
                            e.updatedAt < i.updatedAt,
                        ),
                        n = {
                          ...i,
                          authorId: "",
                          privacy: "private",
                          shareable: !1,
                          favorite: !1,
                        };
                      return t < 0
                        ? [...e, n]
                        : [...e.slice(0, t), n, ...e.slice(t)];
                    }),
                    r((e) => e.filter((e) => e.chatId !== i.chatId)))
                  : (e((e) => e.filter((e) => e.chatId !== i.chatId)),
                    r((e) => {
                      let t = e.findIndex(
                          (e) =>
                            e.updatedAt &&
                            i.updatedAt &&
                            e.updatedAt < i.updatedAt,
                        ),
                        n = {
                          ...i,
                          authorId: "",
                          privacy: "private",
                          shareable: !1,
                          favorite: !0,
                        };
                      return t < 0
                        ? [...e, n]
                        : [...e.slice(0, t), n, ...e.slice(t)];
                    })),
                "/chat/history" === l && c.refresh());
            }));
        },
        children: [
          x ? (0, t.jsx)(d.StarFill, {}) : (0, t.jsx)(u.Star, {}),
          (0, t.jsx)("span", {
            children: o(x ? "chatActions.unfavorite" : "chatActions.favorite"),
          }),
        ],
      });
    }
    function _({ ...e }) {
      let { setData: n } = (0, x.useChatHistory)(),
        { setData: r } = (0, x.useChatFavorites)();
      return (0, t.jsx)(F, {
        ...e,
        setChatHistoryData: n,
        setChatFavoritesData: r,
      });
    }
    function O({ ...e }) {
      return e.setChatHistoryData && e.setChatFavoritesData
        ? (0, t.jsx)(F, {
            ...e,
            setChatHistoryData: e.setChatHistoryData,
            setChatFavoritesData: e.setChatFavoritesData,
          })
        : (0, t.jsx)(_, { ...e });
    }
    function B({ chatId: e }) {
      let { setData: r } = (0, x.useChatHistory)(),
        i = (0, f.useT)(),
        [s, a] = (0, n.useTransition)(),
        o = (0, v.useRouter)(),
        { data: l, mutate: c } = (0, E.useServerQuerySWR)(
          ["scoped", "chats"],
          {},
          { suspense: !0 },
        );
      return (0, t.jsx)(I.SpinnerButton, {
        variant: "outline",
        size: "sm",
        className: "relative z-20",
        pending: s,
        onClick: () => {
          a(async () => {
            try {
              let t = await c({
                serverMutate: D({ payload: { chatId: e } }),
                optimisticData: (0, L.ok)({
                  favorites: l.ok ? l.value.favorites : [],
                  shared: l.ok ? l.value.shared : [],
                  history: l.ok
                    ? l.value.history.filter((t) => t.chatId !== e)
                    : [],
                }),
              });
              if (t?.error) throw Error(t.error);
              (r((t) => t.filter((t) => t.chatId !== e)),
                g.toast.success(i("chatCard.restoreSuccess")));
            } catch (e) {
              (0, M.handleChatError)(e, o) ||
                g.toast.error(i("chatCard.restoreError"));
            }
          });
        },
        children: i("chatCard.restore"),
      });
    }
  },
  481498,
  950955,
  170786,
  250288,
  382741,
  592747,
  243093,
  155893,
  854218,
  471173,
  614539,
  966455,
  (e) => {
    "use strict";
    e.s(
      ["IntegrationOptions", () => F, "IntegrationOptionsSkeleton", () => T],
      481498,
    );
    var t = e.i(324834),
      n = e.i(762585),
      r = t,
      i = e.i(176248),
      s = e.i(707974),
      a = e.i(659563),
      o = e.i(459522),
      l = e.i(227152),
      c = e.i(996174),
      u = e.i(276507),
      d = n,
      h = e.i(297239),
      p = e.i(304649);
    function m({
      children: e,
      label: t,
      badge: n,
      onAdd: a,
      info: u,
      className: d,
    }) {
      let m = (0, h.useT)();
      return (0, r.jsxs)("div", {
        className: (0, p.cn)("flex flex-col gap-2", d),
        children: [
          (0, r.jsxs)("div", {
            className: "flex h-7 items-center justify-between",
            children: [
              (0, r.jsxs)("div", {
                className: "flex items-center gap-1",
                children: [
                  (0, r.jsxs)(s.Label, { children: [t, n] }),
                  u &&
                    (0, r.jsx)(c.Tooltip, {
                      content: (0, r.jsx)("div", { children: u }),
                      children: (0, r.jsx)(l.InformationFillSmall, {}),
                    }),
                ],
              }),
              a &&
                (0, r.jsx)(i.Button, {
                  "aria-label": m("projectSettings.add")(t),
                  className: "size-7 text-v0-gray-900",
                  size: "sm",
                  variant: "ghost",
                  onClick: a,
                  tooltip: { side: "bottom", content: `Add ${t}` },
                  children: (0, r.jsx)(o.Plus, {}),
                }),
            ],
          }),
          e,
        ],
      });
    }
    function f({ title: e, subtitle: t, children: n, className: i }) {
      return (0, r.jsx)(u.Empty, {
        className: (0, p.cn)(
          "relative h-[156px] rounded-md border border-dashed border-v0-gray-300 px-8",
          i,
        ),
        children: (0, r.jsxs)(u.EmptyContent, {
          children: [
            e &&
              (0, r.jsx)(u.EmptyTitle, {
                className: "text-sm text-v0-gray-1000",
                children: e,
              }),
            t &&
              (0, r.jsx)(u.EmptyDescription, {
                className: "text-pretty text-sm text-v0-gray-900",
                children: t,
              }),
            n,
          ],
        }),
      });
    }
    function g({ className: e, label: t, onClick: n, disabled: s }) {
      let o = (0, h.useT)(),
        l = t || o("projectSettings.moreOptions");
      return (0, r.jsxs)(i.Button, {
        className: (0, p.cn)(
          "flex size-7 rounded-md items-center justify-center text-v0-gray-900",
          e,
        ),
        size: "sm",
        variant: "ghost",
        disabled: s,
        onClick: n,
        "cmdk-item-actions": "",
        children: [
          (0, r.jsx)(a.MoreHorizontal, {}),
          (0, r.jsx)("span", { className: "sr-only", children: l }),
        ],
      });
    }
    function x({ children: e, suffix: t, className: n }) {
      return (0, r.jsxs)("div", {
        className: (0, p.cn)(
          "odd:bg-v0-background-200 flex h-[58px] w-full items-center justify-between gap-2 rounded-lg p-2",
          n,
        ),
        children: [e, t],
      });
    }
    function v({ title: e }) {
      return (0, r.jsxs)(m, {
        label: e,
        onAdd: () => {},
        children: [
          (0, r.jsxs)("div", {
            children: [
              (0, r.jsx)(x, {
                suffix: (0, r.jsx)(g, {}),
                children: (0, r.jsxs)("div", {
                  className: "flex flex-col gap-2.5",
                  children: [
                    (0, r.jsx)(d.Skeleton, { className: "h-3 w-40" }),
                    (0, r.jsx)(d.Skeleton, { className: "h-3 w-16" }),
                  ],
                }),
              }),
              (0, r.jsx)(x, {
                suffix: (0, r.jsx)(g, {}),
                children: (0, r.jsxs)("div", {
                  className: "flex flex-col gap-2.5",
                  children: [
                    (0, r.jsx)(d.Skeleton, { className: "h-3 w-40" }),
                    (0, r.jsx)(d.Skeleton, { className: "h-3 w-16" }),
                  ],
                }),
              }),
            ],
          }),
          (0, r.jsx)(i.Button, {
            size: "sm",
            variant: "secondary",
            disabled: !0,
            children: "Show More",
          }),
        ],
      });
    }
    e.s(
      [
        "EmptyState",
        () => f,
        "MoreButton",
        () => g,
        "Section",
        () => m,
        "SectionListSkeleton",
        () => v,
      ],
      950955,
    );
    var y = e.i(376346),
      b = e.i(643312),
      j = u,
      w = e.i(691701),
      C = i,
      k = e.i(576191),
      S = e.i(985005),
      N = e.i(449381),
      E = e.i(418270),
      A = e.i(794593);
    let D = [
        {
          title: "Required",
          description: "Integrations that are required for your generation.",
        },
        {
          title: "Installed",
          description:
            "Integrations that are already connected to this project.",
        },
        {
          title: "All Integrations",
          description:
            "Integrations that are available to connect to this project.",
        },
      ],
      I = (0, k.createContext)(null),
      M = () => (0, k.use)(I);
    function T({ count: e = 4 }) {
      return (0, t.jsxs)("div", {
        className: "@container",
        children: [
          (0, t.jsx)("div", {
            className: "flex flex-col p-4 pb-0",
            children: (0, t.jsx)("div", {
              className: "flex size-8 w-36 items-center",
              children: (0, t.jsx)(n.Skeleton, { className: "h-5 w-full" }),
            }),
          }),
          (0, t.jsx)("div", {
            className: "grid grid-cols-1 @[320px]:grid-cols-2 gap-3 p-4",
            style: {
              maskImage:
                "linear-gradient(to bottom, black 20%, transparent 100%)",
            },
            children: Array.from({ length: e }).map((e, r) =>
              (0, t.jsxs)(
                "div",
                {
                  className:
                    "border-v0-alpha-400 flex flex-col gap-3 rounded-lg border p-3",
                  children: [
                    (0, t.jsx)("div", {
                      className: "flex items-center justify-between",
                      children: (0, t.jsx)(n.Skeleton, {
                        className: "h-8 w-8 rounded-full",
                      }),
                    }),
                    (0, t.jsxs)("div", {
                      className: "flex flex-col gap-1.5",
                      children: [
                        (0, t.jsx)(n.Skeleton, { className: "h-[16px] w-20" }),
                        (0, t.jsx)(n.Skeleton, { className: "h-[14px] w-16" }),
                      ],
                    }),
                    (0, t.jsx)(n.Skeleton, { className: "h-7 w-full" }),
                  ],
                },
                r,
              ),
            ),
          }),
        ],
      });
    }
    function L() {
      let e = (0, b.useIntegrationsApi)();
      return (0, t.jsx)("div", {
        className: "flex size-full items-center justify-center p-4",
        children: (0, t.jsx)(j.Empty, {
          children: (0, t.jsxs)(j.EmptyContent, {
            children: [
              (0, t.jsx)(j.EmptyIcon, {
                className: "[&>svg]:text-v0-red-800!",
                children: (0, t.jsx)(w.Stop, {}),
              }),
              (0, t.jsx)(j.EmptyTitle, {
                children: "Error Loading Integrations",
              }),
              (0, t.jsx)(j.EmptyDescription, {
                children:
                  "error" === e.status ? e.message : "An error occurred",
              }),
              (0, t.jsx)(C.Button, {
                size: "sm",
                className: "h-7 rounded-md",
                onClick: () => {
                  e.refetch();
                },
                children: "Retry",
              }),
            ],
          }),
        }),
      });
    }
    function P({ integration: e }) {
      let n,
        r = (0, b.useIntegrationsApi)(),
        i = M()?.category;
      if ("ready" !== r.status) return null;
      let s = !!r.computed.connectingIntegrationNames.has(e.name),
        a = !!r.computed.optimisticConnectedIntegrationNames.has(e.name);
      return (
        (n = e.existingInstances.length > 0 ? "w-[calc(100%-28px)]" : "w-full"),
        (0, t.jsx)(S.ConnectIntegration.Provider, {
          state: {
            integration: { ...e, isConnected: e.isConnected || a },
            isConnecting: s,
            isDisabled: r.isUpdating,
            className: "w-full",
            installClassName: n,
          },
          actions: { handleConnect: (e) => r.update(e) },
          children: (0, t.jsx)(
            y.Card,
            {
              className: "shadow-none border border-v0-alpha-400",
              children: (0, t.jsxs)(y.CardContent, {
                className: "flex flex-col gap-3 p-3",
                children: [
                  (0, t.jsxs)("div", {
                    className: "flex items-center justify-between",
                    children: [
                      (0, t.jsx)(S.ConnectIntegration.Icon, {}),
                      (0, t.jsxs)("div", {
                        className: "flex items-center gap-1",
                        children: [
                          "Required" === i
                            ? (0, t.jsx)(A.Badge, {
                                contrast: "subtle",
                                variant: "amber",
                                size: "small",
                                children: "Required",
                              })
                            : null,
                          (0, t.jsx)(S.ConnectIntegration.Tooltip, {}),
                        ],
                      }),
                    ],
                  }),
                  (0, t.jsxs)("div", {
                    className: "flex flex-col gap-0.5",
                    children: [
                      (0, t.jsxs)("h3", {
                        className:
                          "font-medium text-sm flex items-center gap-1.5",
                        children: [
                          (0, t.jsx)("span", {
                            className: "truncate",
                            children: e.name,
                          }),
                          (0, t.jsx)(S.ConnectIntegration.Badge, {}),
                        ],
                      }),
                      (0, t.jsx)("p", {
                        className: "text-xs text-v0-gray-900 truncate",
                        children: e.connectedInstanceName || e.category,
                      }),
                    ],
                  }),
                  (0, t.jsx)(S.ConnectIntegration.Button, {}),
                ],
              }),
            },
            e.id,
          ),
        })
      );
    }
    function R() {
      let e = (0, b.useIntegrationsApi)(),
        t = (0, N.useActiveBlockState)(),
        n = (0, E.useWizardApi)({ blockId: t?.id || "", closed: !!t?.closed });
      return {
        state: {
          sections: (0, k.useMemo)(() => {
            if ("ready" !== e.status) return [];
            let t = e.computed.optimisticConnectedIntegrationNames;
            function r(e) {
              return e.isConnected || t.has(e.name)
                ? "Installed"
                : n.data?.integrations.some((t) => t.name === e.name)
                  ? "Required"
                  : "All Integrations";
            }
            return D.map((t) => ({
              title: t.title,
              description: t.description,
              integrations: e.data.filter((e) => r(e) === t.title),
            })).filter((e) => e.integrations.length > 0);
          }, [
            e.status,
            e.data,
            e.computed?.optimisticConnectedIntegrationNames,
            n.data,
          ]),
        },
        api: e,
      };
    }
    function F() {
      let {
        state: { sections: e },
        api: n,
      } = R();
      return "loading" === n.status
        ? (0, t.jsx)(T, {})
        : "error" === n.status
          ? (0, t.jsx)(L, {})
          : (0, t.jsx)("div", {
              className: "@container grid grid-cols-1",
              children: e.map((e) =>
                (0, t.jsx)(
                  m,
                  {
                    label: e.title,
                    info: e.description,
                    className: "gap-3 p-4 border-b",
                    children: (0, t.jsx)(I, {
                      value: { category: e.title },
                      children: (0, t.jsx)("div", {
                        className:
                          "grid grid-cols-1 @[320px]:grid-cols-2 gap-3",
                        children: e.integrations.map((e) =>
                          (0, t.jsx)(P, { integration: e }, e.id),
                        ),
                      }),
                    }),
                  },
                  e.title,
                ),
              ),
            });
    }
    var _ = e.i(919012),
      O = (0, _.createServerReference)(
        "400013bde2fd236d1f7e230d0637dd7af465c20960",
        _.callServer,
        void 0,
        _.findSourceMapURL,
        "createIntegrationLinkAction",
      );
    (e.s(["createIntegrationLinkAction", () => O], 170786),
      e.s(["EnvVars", () => eF], 155893));
    var B = t,
      V = i,
      z = o,
      H = h,
      $ = e.i(538553),
      U = e.i(32170);
    (e.s([], 243093),
      e.s(
        ["EnvVariablesProvider", () => Q, "useEnvVariables", () => X],
        250288,
      ));
    var G = t,
      W = e.i(199490),
      q = k;
    e.i(904347);
    var Z = e.i(37737),
      K = b,
      Y = e.i(667660);
    let J = (0, q.createContext)(void 0);
    function Q({ children: e }) {
      let t = (0, K.useIntegrationsApi)(),
        { hasVercelWritePermission: n } = (0, Y.useActiveScope)(),
        [r, i] = (0, q.useState)([
          W.EnvTarget.Production,
          W.EnvTarget.Preview,
          W.EnvTarget.Development,
        ]),
        s = (0, q.useMemo)(() => "loading" === t.status, [t.status]),
        a = (0, q.useMemo)(() => {
          let e = "ready" === t.status ? t.envVars : [],
            n = {};
          for (let t of e) n[t.id] = t;
          return n;
        }, [t.envVars, t.status]),
        o = (0, q.useCallback)((e) => {
          (0, Z.openDialog)({
            type: "deleteEnvVar",
            data: {
              envVarId: e.id,
              varKey: e.key,
              targets:
                Array.isArray(e.target) && e.target.length > 0
                  ? e.target
                  : e.target && !Array.isArray(e.target)
                    ? [e.target]
                    : [
                        W.EnvTarget.Development,
                        W.EnvTarget.Preview,
                        W.EnvTarget.Production,
                      ],
            },
          });
        }, []),
        l = (0, q.useCallback)((e) => {
          (0, Z.openDialog)({
            type: "editEnvVar",
            data: {
              envVarId: e.id,
              varKey: e.key,
              value: e.value,
              targets:
                Array.isArray(e.target) && e.target.length > 0
                  ? e.target
                  : e.target && !Array.isArray(e.target)
                    ? [e.target]
                    : [
                        W.EnvTarget.Development,
                        W.EnvTarget.Preview,
                        W.EnvTarget.Production,
                      ],
              comment: e.comment ?? void 0,
            },
          });
        }, []),
        c = (0, q.useCallback)(() => {
          (0, Z.openDialog)({ type: "createEnvVar", data: { mode: "create" } });
        }, []),
        u = (0, q.useMemo)(() => {
          if ("ready" === t.status && t.vercelProject?.project.url)
            return `${t.vercelProject.project.url}/settings/environment-variables`;
        }, [t]),
        d = (0, q.useMemo)(
          () => ({
            envVars: a,
            isLoading: s,
            addEnvVariable: c,
            deleteEnvVariable: o,
            hasVercelWritePermission: n,
            envVarCount: Object.keys(a).length,
            editEnvVariable: l,
            filterTargets: r,
            setFilterTargets: i,
            vercelDashboardUrl: u,
          }),
          [a, s, c, o, n, l, r, u],
        );
      return (0, G.jsx)(J.Provider, { value: d, children: e });
    }
    function X() {
      let e = (0, q.useContext)(J);
      if (void 0 === e)
        throw Error(
          "useEnvVariables must be used within an EnvVariablesProvider",
        );
      return e;
    }
    var ee = t,
      et = i,
      en = W,
      er = k,
      ei = p,
      es = a,
      ea = e.i(772438),
      eo = e.i(741006),
      el = e.i(749299),
      ec = e.i(383790),
      eu = e.i(366717);
    e.i(563948);
    var ed = e.i(407562),
      eh = c,
      ep = h,
      em = e.i(556355);
    let ef = "";
    function eg({ envVar: e, className: t, readOnly: n = !1 }) {
      let [r, i] = (0, er.useState)(!1),
        s = (0, ep.useT)(),
        {
          deleteEnvVariable: a,
          editEnvVariable: o,
          vercelDashboardUrl: l,
        } = X(),
        c = e.id.startsWith("temp-"),
        u = !n && !c,
        d = !n && !c,
        h = (0, er.useCallback)(() => {
          d && a(e);
        }, [a, e, d]),
        p = (0, er.useCallback)(() => {
          try {
            (navigator.clipboard.writeText(e.value),
              ed.toast.success(`Copied value of ${e.key} to clipboard`));
          } catch (t) {
            ed.toast.error(`Failed to copy value of ${e.key} to clipboard`);
          }
        }, [e.key, e.value]),
        m = (0, er.useCallback)(() => {
          u && o(e);
        }, [e, o, u]),
        f = (0, er.useMemo)(() => {
          let t = Array.isArray(e.target)
            ? e.target
            : e.target
              ? [e.target]
              : [];
          if (0 === t.length) return "No environments";
          if (
            3 === t.length &&
            t.includes(en.EnvTarget.Development) &&
            t.includes(en.EnvTarget.Preview) &&
            t.includes(en.EnvTarget.Production)
          )
            return "All Environments";
          let n = t.includes(en.EnvTarget.Production),
            r = t.includes(en.EnvTarget.Preview),
            i = t.includes(en.EnvTarget.Development);
          return !n && r && i
            ? "All Pre-Production Environments"
            : n && !r && i
              ? "Production and Development"
              : n && r && !i
                ? "Production and Preview"
                : t
                    .map((e) =>
                      e === en.EnvTarget.Development
                        ? "Development"
                        : e === en.EnvTarget.Preview
                          ? "Preview"
                          : e === en.EnvTarget.Production
                            ? "Production"
                            : e,
                    )
                    .join(", ");
        }, [e.target]);
      return (0, ee.jsxs)("div", {
        className: (0, ei.cn)(
          "flex items-center justify-between gap-4 w-full py-2 px-3 max-h-[68px] group/env-var rounded-lg border border-v0-gray-200",
          t,
        ),
        children: [
          (0, ee.jsxs)("div", {
            className: "flex flex-col gap-0.5 min-w-0 flex-1",
            children: [
              (0, ee.jsxs)("div", {
                className: "flex flex-col gap-0 min-w-0",
                children: [
                  (0, ee.jsx)(eh.Tooltip, {
                    content: e.key,
                    children: (0, ee.jsx)("span", {
                      className:
                        "min-w-0 w-fit max-w-full block truncate text-label-13-mono text-v0-gray-1000",
                      children: e.key,
                    }),
                  }),
                  (0, ee.jsxs)("div", {
                    className: "flex items-center gap-2.5 min-w-0",
                    children: [
                      (0, ee.jsx)(et.Button, {
                        variant: "ghost",
                        className: "text-v0-gray-900 shrink-0 p-0 h-auto",
                        size: "tiny",
                        onClick: () => i(!r),
                        "aria-label": s(
                          r
                            ? "projectSettings.hideValue"
                            : "projectSettings.showValue",
                        ),
                        children: r
                          ? (0, ee.jsx)(ea.EyeOff, { size: 14 })
                          : (0, ee.jsx)(eo.Eye, { size: 14 }),
                      }),
                      r
                        ? (0, ee.jsx)(eh.Tooltip, {
                            content: "Copy to clipboard",
                            children: (0, ee.jsx)("button", {
                              onClick: p,
                              className:
                                "text-left bg-v0-alpha-400 rounded-md px-1.5 min-w-0 max-w-full",
                              children: (0, ee.jsx)("code", {
                                className: "block text-label-13-mono truncate",
                                children: e.value,
                              }),
                            }),
                          })
                        : (0, ee.jsx)("span", {
                            className:
                              "tracking-widest truncate min-w-0 flex-1 text-label-13-mono",
                            children: ef,
                          }),
                    ],
                  }),
                ],
              }),
              (0, ee.jsx)("span", {
                className:
                  "text-[11px] leading-[16px] font-medium text-v0-gray-700 truncate",
                children: f,
              }),
            ],
          }),
          (0, ee.jsxs)(em.DropdownMenu, {
            children: [
              (0, ee.jsx)(em.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, ee.jsxs)(et.Button, {
                  className:
                    "relative z-10 size-7 shrink-0 rounded-sm p-1 transition-none",
                  size: "sm",
                  variant: "ghost",
                  children: [
                    (0, ee.jsx)(es.MoreHorizontal, { size: 16 }),
                    (0, ee.jsx)("span", {
                      className: "sr-only",
                      children: "Environment variable actions",
                    }),
                  ],
                }),
              }),
              (0, ee.jsx)(em.DropdownMenuContent, {
                align: "end",
                className: "min-w-0 w-[200px] p-1",
                children:
                  n && l
                    ? (0, ee.jsx)(em.DropdownMenuItem, {
                        asChild: !0,
                        children: (0, ee.jsxs)("a", {
                          href: l,
                          target: "_blank",
                          rel: "noopener noreferrer",
                          children: [
                            (0, ee.jsx)(eu.ExternalLinkIcon, {
                              className: "size-4",
                            }),
                            "Manage on Vercel",
                          ],
                        }),
                      })
                    : (0, ee.jsxs)(ee.Fragment, {
                        children: [
                          (0, ee.jsxs)(em.DropdownMenuItem, {
                            onClick: m,
                            disabled: !u,
                            children: [
                              (0, ee.jsx)(el.PencilEdit, { size: 16 }),
                              "Edit",
                            ],
                          }),
                          (0, ee.jsxs)(em.DropdownMenuItem, {
                            onClick: h,
                            variant: "destructive",
                            disabled: !d,
                            children: [
                              (0, ee.jsx)(ec.Trash, { size: 16 }),
                              "Delete",
                            ],
                          }),
                        ],
                      }),
              }),
            ],
          }),
        ],
      });
    }
    var ex = t,
      ev = p,
      ey = n,
      eb = eo;
    function ej({ className: e }) {
      return (0, ex.jsx)("div", {
        className: (0, ev.cn)(
          "flex items-center justify-between gap-4 w-full py-2 px-3 rounded-lg border border-v0-gray-200",
          e,
        ),
        children: (0, ex.jsxs)("div", {
          className: "flex flex-col gap-0.5 min-w-0 flex-1",
          children: [
            (0, ex.jsx)(ey.Skeleton, { className: "h-[13px] w-32 rounded" }),
            (0, ex.jsxs)("div", {
              className: "flex items-center gap-2.5 min-w-0 text-v0-gray-700",
              children: [
                (0, ex.jsx)("div", {
                  className: "shrink-0",
                  children: (0, ex.jsx)(eb.Eye, { size: 12 }),
                }),
                (0, ex.jsx)("span", {
                  className:
                    "tracking-widest truncate min-w-0 flex-1 text-label-13-mono",
                  children: "",
                }),
              ],
            }),
            (0, ex.jsx)(ey.Skeleton, { className: "h-[11px] w-24 rounded" }),
          ],
        }),
      });
    }
    e.s(["EnvVariablesList", () => eN], 382741);
    var ew = t,
      eC = k,
      ek = c,
      eS = l;
    function eN() {
      let { envVars: e, isLoading: t, envVarCount: n, filterTargets: r } = X(),
        { regularEnvVars: i, sharedEnvVars: s } = (0, eC.useMemo)(() => {
          if (!e) return { regularEnvVars: [], sharedEnvVars: [] };
          let t = Object.values(e).filter(
            (e) =>
              3 === r.length ||
              (0 !== r.length &&
                (Array.isArray(e.target) ? e.target : [e.target]).some((e) =>
                  r.includes(e),
                )),
          );
          return {
            regularEnvVars: t
              .filter((e) => !("source" in e) || "shared" !== e.source)
              .sort((e, t) => e.key.localeCompare(t.key)),
            sharedEnvVars: t
              .filter((e) => "source" in e && "shared" === e.source)
              .sort((e, t) => e.key.localeCompare(t.key)),
          };
        }, [e, r]);
      if (t && 0 === n)
        return (0, ew.jsxs)("div", {
          className: "flex flex-col gap-2",
          children: [
            (0, ew.jsx)(ej, { className: "opacity-100" }),
            (0, ew.jsx)(ej, { className: "opacity-100" }),
            (0, ew.jsx)(ej, { className: "opacity-90" }),
            (0, ew.jsx)(ej, { className: "opacity-70" }),
            (0, ew.jsx)(ej, { className: "opacity-50" }),
            (0, ew.jsx)(ej, { className: "opacity-30" }),
          ],
        });
      if (0 === n) return null;
      let a = i.length + s.length;
      return (0, ew.jsx)("div", {
        className: "flex flex-col gap-4",
        children:
          0 === a
            ? (0, ew.jsx)("div", {
                className: "text-sm text-v0-gray-700 text-center py-4",
                children: "No environment variables match the selected targets",
              })
            : (0, ew.jsxs)(ew.Fragment, {
                children: [
                  i.length > 0 &&
                    (0, ew.jsx)("div", {
                      className: "flex flex-col gap-2",
                      children: i.map((e) =>
                        (0, ew.jsx)(eg, { envVar: e }, e.id),
                      ),
                    }),
                  s.length > 0 &&
                    (0, ew.jsxs)("div", {
                      className: "flex flex-col gap-2",
                      children: [
                        (0, ew.jsxs)("div", {
                          className: "flex items-center gap-1",
                          children: [
                            (0, ew.jsx)("h3", {
                              className:
                                "text-sm font-medium text-v0-gray-1000",
                              children: "Shared Environment Variables",
                            }),
                            (0, ew.jsx)(ek.Tooltip, {
                              disableHoverableContent: !1,
                              content: (0, ew.jsxs)("span", {
                                children: [
                                  "Team-level variables that can be linked to multiple projects. Updates apply to all linked projects.",
                                  " ",
                                  (0, ew.jsx)("a", {
                                    href: "https://vercel.com/docs/environment-variables/shared-environment-variables",
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className:
                                      "text-v0-blue-900 underline hover:no-underline",
                                    children: "Learn more",
                                  }),
                                ],
                              }),
                              className: "max-w-[300px]",
                              children: (0, ew.jsx)(eS.InformationFillSmall, {
                                className: "text-v0-gray-900",
                              }),
                            }),
                          ],
                        }),
                        s.map((e) =>
                          (0, ew.jsx)(eg, { envVar: e, readOnly: !0 }, e.id),
                        ),
                      ],
                    }),
                ],
              }),
      });
    }
    e.s(["EnvVariablesFilter", () => eL], 592747);
    var eE = t,
      eA = i,
      eD = em,
      eI = W;
    let eM = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1 2H1.75H14.25H15V3.5H14.25H1.75H1V2ZM5 12H5.75H10.25H11V13.5H10.25H5.75H5V12ZM3.75 7H3V8.5H3.75H12.25H13V7H12.25H3.75Z" fill="currentColor" />',
    );
    var eT = e.i(480187);
    function eL({ disabled: e }) {
      let { filterTargets: t, setFilterTargets: n } = X(),
        r = (e) => {
          t.includes(e) ? n(t.filter((t) => t !== e)) : n([...t, e]);
        },
        i = t.length < 3;
      return (0, eE.jsxs)(eD.DropdownMenu, {
        children: [
          (0, eE.jsx)(eD.DropdownMenuTrigger, {
            asChild: !0,
            children: (0, eE.jsxs)(eA.Button, {
              variant: "ghost",
              size: "mini",
              disabled: e,
              children: [
                i
                  ? (0, eE.jsx)(eT.IconListFilterBadged, {
                      className: "size-4",
                    })
                  : (0, eE.jsx)(eM, { className: "size-4" }),
                (0, eE.jsx)("span", {
                  className: "sr-only",
                  children: "Filter environment variables",
                }),
              ],
            }),
          }),
          (0, eE.jsxs)(eD.DropdownMenuContent, {
            align: "end",
            className: "w-48 p-1.5",
            children: [
              (0, eE.jsx)(eD.DropdownMenuCheckboxItem, {
                checked: t.includes(eI.EnvTarget.Production),
                onCheckedChange: () => r(eI.EnvTarget.Production),
                onSelect: (e) => e.preventDefault(),
                variant: "checkbox",
                className: "rounded-md py-1.5 pr-2",
                children: "Production",
              }),
              (0, eE.jsx)(eD.DropdownMenuCheckboxItem, {
                checked: t.includes(eI.EnvTarget.Preview),
                onCheckedChange: () => r(eI.EnvTarget.Preview),
                onSelect: (e) => e.preventDefault(),
                variant: "checkbox",
                className: "rounded-md py-1.5 pr-2",
                children: "Preview",
              }),
              (0, eE.jsx)(eD.DropdownMenuCheckboxItem, {
                checked: t.includes(eI.EnvTarget.Development),
                onCheckedChange: () => r(eI.EnvTarget.Development),
                onSelect: (e) => e.preventDefault(),
                variant: "checkbox",
                className: "rounded-md py-1.5 pr-2",
                children: "Development",
              }),
            ],
          }),
        ],
      });
    }
    var eP = e.i(209819);
    function eR() {
      let { vercelProjectId: e } = (0, eP.useChatMetadata)(),
        { user: t } = (0, U.useUser)(),
        n = (0, H.useT)(),
        {
          isLoading: r,
          addEnvVariable: i,
          hasVercelWritePermission: s,
          envVarCount: a,
        } = X(),
        o = t?.isImpersonation;
      return r
        ? (0, B.jsx)(v, { title: n("projectSettings.environmentVariables") })
        : 0 === a
          ? o
            ? (0, B.jsx)(f, {
                title: "Additional Permissions Required",
                subtitle:
                  "You are impersonating a user. You do not have permission to view Environment Variables of this project.",
                className: "h-full",
              })
            : (0, B.jsx)(f, {
                title: n("projectSettings.noEnvVars"),
                subtitle: n("projectSettings.envVarSubtitle")(e ?? void 0),
                className: "h-full",
                children: (0, B.jsx)($.RbacTooltip, {
                  show: !s,
                  requiredRole: "V0Builder",
                  children: (0, B.jsxs)(V.Button, {
                    size: "sm",
                    variant: "secondary",
                    onClick: i,
                    disabled: !s,
                    children: [(0, B.jsx)(z.Plus, {}), "Add Variables"],
                  }),
                }),
              })
          : (0, B.jsxs)("div", {
              className: "flex flex-col gap-3",
              children: [
                s &&
                  (0, B.jsx)($.RbacTooltip, {
                    show: !s,
                    requiredRole: "V0Builder",
                    children: (0, B.jsxs)(V.Button, {
                      variant: "secondary",
                      size: "sm",
                      onClick: i,
                      disabled: !s,
                      children: [(0, B.jsx)(z.Plus, {}), "Add"],
                    }),
                  }),
                (0, B.jsx)(eN, {}),
              ],
            });
    }
    function eF() {
      return (0, B.jsx)(Q, { children: (0, B.jsx)(eR, {}) });
    }
    e.s(["Instructions", () => e5], 471173);
    var e_ = t,
      eO = i,
      eB = e.i(183673),
      eV = n;
    e.s(["ProjectInstructions", () => e2], 854218);
    var ez = t,
      eH = k,
      e$ = y,
      eU = e.i(211976),
      eG = ed,
      eW = e.i(226368),
      eq = e.i(889661),
      eZ = e.i(589910),
      eK = _,
      eY = (0, eK.createServerReference)(
        "603bf1aa4d6f21e957e3a643f1773075047cd85315",
        eK.callServer,
        void 0,
        eK.findSourceMapURL,
        "updateProjectSettingsInstructions",
      ),
      eJ = e.i(120485),
      eQ = e.i(51940),
      eX = e.i(216445),
      e0 = h,
      e1 = eB;
    function e2({
      readOnly: e,
      projectId: t,
      initialInstructions: n,
      textAreaMinHeight: r,
      buttonVariant: i,
      onSubmit: s,
      onFinish: a,
    }) {
      let [o, l] = (0, eH.useState)(n),
        [c, u] = (0, eH.useState)(!1),
        d = (0, eW.useRouter)(),
        [h, p] = (0, eH.useState)(!1),
        m = (0, e0.useT)(),
        { updateInstructions: f } = (0, e1.useProjectInstructions)(t),
        g = (0, eH.useCallback)(
          async (n) => {
            if ((n && n.preventDefault(), !e)) {
              (u(!0), s?.());
              try {
                let e = await eY(t, o);
                if (!0 === e)
                  (f(o),
                    eG.toast.success("Project Instructions updated"),
                    p(!0),
                    setTimeout(() => p(!1), 1e3),
                    d.refresh());
                else throw Error(e.error);
              } catch (e) {
                (0, eJ.handleChatError)(
                  e,
                  d,
                  "An error occurred while updating instructions",
                ) ||
                  eG.toast.error("Error", {
                    description:
                      "An error occurred while updating instructions.",
                  });
              } finally {
                (u(!1), a?.());
              }
            }
          },
          [e, s, t, o, f, d, a],
        ),
        { formRef: x, onKeyDown: v } = (0, eq.useEnterSubmit)({
          submitMessage: g,
          localFileInfos: [],
        });
      return (0, ez.jsx)(e$.Card, {
        className: "bg-v0-background-100 flex flex-col border-0 shadow-none",
        children: (0, ez.jsx)("form", {
          className: "flex flex-1 flex-col",
          onSubmit: g,
          ref: x,
          children: (0, ez.jsxs)(e$.CardContent, {
            className: "flex flex-1 flex-col gap-3 p-0",
            children: [
              (0, ez.jsxs)("div", {
                className: "flex flex-1 flex-col gap-2",
                children: [
                  (0, ez.jsx)("div", {
                    className: "flex flex-1 flex-col",
                    children: (0, ez.jsx)(eX.Textarea, {
                      asChild: !0,
                      children: (0, ez.jsx)(eQ.ResizableTextArea, {
                        className: "pointer-events-auto!",
                        disabled: e,
                        id: "instructions",
                        maxLength: 5e3,
                        minHeight: r,
                        onChange: (e) => l(e.target.value),
                        onKeyDown: v,
                        placeholder: m("projectInstructions.placeholder"),
                        value: o,
                      }),
                    }),
                  }),
                  (0, ez.jsx)(eZ.InputCounter, {
                    count: o.length,
                    max: 5e3,
                    message: "For larger context, consider using sources.",
                    messageThreshold: 5e3,
                  }),
                ],
              }),
              !e &&
                (0, ez.jsx)(eU.SpinnerButton, {
                  className: "ml-auto w-full h-7 rounded-md",
                  "data-testid": "save-instructions-button",
                  disabled: h || o === n || c,
                  pending: c,
                  variant: i,
                  size: "sm",
                  children: "Save Changes",
                }),
            ],
          }),
        }),
      });
    }
    function e5({ setSaving: e, projectId: t }) {
      let { instructions: n, isLoading: r } = (0, eB.useProjectInstructions)(t),
        i = (0, eB.useCanMakeProjectUpdates)();
      return t
        ? (0, e_.jsx)(m, {
            label: "Project Instructions",
            info: "Custom instructions and guidelines for v0 to follow in responses.",
            className: "gap-3 border-b p-4",
            children: r
              ? (0, e_.jsxs)("div", {
                  className: "flex flex-col gap-3",
                  children: [
                    (0, e_.jsx)(eV.Skeleton, { className: "h-36 w-full" }),
                    (0, e_.jsx)(eO.Button, {
                      disabled: !0,
                      variant: "secondary",
                      size: "sm",
                      children: "Save Changes",
                    }),
                  ],
                })
              : (0, e_.jsx)(e2, {
                  readOnly: !i,
                  projectId: t,
                  initialInstructions: n,
                  textAreaMinHeight: 144,
                  buttonVariant: "secondary",
                  onSubmit: () => {
                    e(!0);
                  },
                  onFinish: () => {
                    e(!1);
                  },
                }),
          })
        : null;
    }
    var e3 = t,
      e4 = eB,
      e9 = h,
      e7 = t,
      e6 = k,
      e8 = ed,
      te = i,
      tt = em,
      tn = ec,
      tr = el,
      ti = e.i(538096),
      ts = e.i(569175),
      ta = eB,
      to = u,
      tl = h,
      tc = p,
      tu = e.i(79259),
      td = e.i(818711),
      th = e.i(281808),
      tp = e.i(707827),
      tm = e.i(696871),
      tf = t,
      tg = e.i(268375);
    function tx({ fileName: e, fileType: t, imageUrl: n }) {
      let r = ((e) => {
          let t = e.split(".");
          return t.length > 1 ? t.pop()?.toLowerCase() : void 0;
        })(e || ""),
        i = t || (r ? r.toUpperCase() : void 0),
        s = ["jpg", "jpeg", "png", "gif", "svg", "webp", "bmp", "ico"],
        a = r && s.includes(r),
        o = () =>
          a && n
            ? (0, tf.jsxs)("div", {
                className: "absolute inset-0 rounded-sm overflow-hidden",
                children: [
                  (0, tf.jsx)("img", {
                    src: n,
                    alt: e || "Source file",
                    className: "w-full h-full object-cover",
                  }),
                  (0, tf.jsx)("div", {
                    className: "absolute inset-0 bg-black/5",
                  }),
                ],
              })
            : a
              ? (0, tf.jsx)("div", {
                  className: "flex items-center justify-center h-full",
                  children: (0, tf.jsx)(tg.Image, {
                    size: 28,
                    className: "!text-v0-gray-200",
                  }),
                })
              : (0, tf.jsxs)(tf.Fragment, {
                  children: [
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[50%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[95%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[65%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[90%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[75%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[80%]",
                    }),
                    (0, tf.jsx)("div", {
                      className: "bg-v0-gray-200 rounded-full h-1 w-[70%]",
                    }),
                    !i &&
                      (0, tf.jsxs)(tf.Fragment, {
                        children: [
                          (0, tf.jsx)("div", {
                            className:
                              "bg-v0-gray-200 rounded-full h-1 w-[60%]",
                          }),
                          (0, tf.jsx)("div", {
                            className:
                              "bg-v0-gray-200 rounded-full h-1 w-[85%]",
                          }),
                        ],
                      }),
                  ],
                });
      return (0, tf.jsxs)("div", {
        className:
          "relative w-[55px] h-[72px] rounded-sm bg-v0-background-300 shadow-sm flex flex-col gap-[3px] p-1.5 overflow-hidden",
        children: [
          o(),
          i &&
            (0, tf.jsx)("div", {
              className:
                "absolute bottom-0 left-0 bg-v0-gray-1000 text-v0-white rounded-tr-sm text-[11px] px-1 py-0.5 font-medium leading-none",
              children: i,
            }),
        ],
      });
    }
    function tv({ size: e, status: t, isUploaded: n, progress: r }) {
      let i = (0, tl.useT)();
      if ("processing" === t)
        return (0, e7.jsxs)("div", {
          className: "inline-flex items-center gap-1 text-v0-gray-900",
          children: [
            n
              ? (0, e7.jsx)("span", {
                  className: "text-[13px] leading-[18px]",
                  children: i("projectSettings.isIndexing"),
                })
              : (0, e7.jsx)("span", {
                  className: "text-[13px] leading-[18px]",
                  children: i("projectSettings.isUploading"),
                }),
            r
              ? (0, e7.jsxs)("span", {
                  className: "text-[13px] leading-[18px]",
                  children: ["(", Math.round(100 * r), "%)"],
                })
              : null,
          ],
        });
      if ("error" === t)
        return (0, e7.jsx)("div", {
          className:
            "inline-flex items-center gap-2 text-[13px] leading-[18px] text-v0-red-700",
          children: i("projectSettings.uploadError"),
        });
      let s = e
        ? e > 1048576
          ? `${(e / 1048576).toFixed(2)}MB`
          : `${(e / 1024).toFixed(2)}KB`
        : "---";
      return (0, e7.jsx)("div", {
        className:
          "inline-flex items-center text-[13px] leading-[18px] text-v0-gray-900",
        children: s,
      });
    }
    function ty({ source: e, className: t }) {
      let {
          metadata: n,
          url: r,
          sourceId: i,
          status: s,
          title: a,
          finishedAt: o,
          isOptimistic: l,
          progress: c,
        } = e,
        u = !l,
        d = a || "---",
        h = (0, tl.useT)(),
        p = (0, ta.useCanMakeProjectUpdates)(),
        [m, f] = (0, td.useDeleteSourceModal)(),
        { setSource: x } = (0, th.useRenameSourceModal)(),
        [v, y] = (0, e6.useTransition)(),
        b = (0, e6.useCallback)(() => {
          r &&
            y(async () => {
              try {
                let e = new URLSearchParams({ url: r, type: "blob" }),
                  t = await fetch(`/chat/api/chat/download?${e.toString()}`),
                  n = await t.blob(),
                  i = window.URL.createObjectURL(n),
                  s = document.createElement("a");
                ((s.href = i),
                  (s.download = d),
                  document.body.appendChild(s),
                  s.click(),
                  s.remove(),
                  window.URL.revokeObjectURL(i));
              } catch (e) {
                e8.toast.error(
                  h("projectSettings.downloadSourceError")(
                    e instanceof Error ? e.message : void 0,
                  ),
                );
              }
            });
        }, [r, d, h]),
        j = (0, e6.useMemo)(
          () =>
            "processing" !== s && "error" === s
              ? (0, e7.jsx)(te.Button, {
                  onClick: () => {
                    f(i);
                  },
                  size: "sm",
                  className: "h-7 rounded-md px-2",
                  variant: "destructive",
                  children: h("projectSettings.delete"),
                })
              : (0, e7.jsxs)(tt.DropdownMenu, {
                  children: [
                    (0, e7.jsx)(tt.DropdownMenuTrigger, {
                      children: (0, e7.jsx)(g, {
                        label: h("projectSettings.openSourceActions"),
                      }),
                    }),
                    (0, e7.jsx)(tt.DropdownMenuContent, {
                      align: "end",
                      side: "bottom",
                      sideOffset: 8,
                      children: (0, e7.jsxs)(tt.DropdownMenuGroup, {
                        children: [
                          p &&
                            (0, e7.jsxs)(tt.DropdownMenuItem, {
                              onSelect: () => {
                                x({ sourceId: i, sourceName: d });
                              },
                              children: [
                                (0, e7.jsx)(tr.PencilEdit, {}),
                                (0, e7.jsx)("span", {
                                  children: h("projectSettings.rename"),
                                }),
                              ],
                            }),
                          r
                            ? (0, e7.jsxs)(tt.DropdownMenuItem, {
                                onSelect: b,
                                disabled: v,
                                children: [
                                  (0, e7.jsx)(ti.Download, {}),
                                  (0, e7.jsx)("span", {
                                    children: h("projectSettings.download"),
                                  }),
                                  v ? (0, e7.jsx)(tp.Spinner, {}) : null,
                                ],
                              })
                            : null,
                          p &&
                            (0, e7.jsxs)(tt.DropdownMenuItem, {
                              onSelect: () => {
                                f(i);
                              },
                              variant: "destructive",
                              children: [
                                (0, e7.jsx)(tn.Trash, {}),
                                (0, e7.jsx)("span", {
                                  children: h("projectSettings.delete"),
                                }),
                              ],
                            }),
                        ],
                      }),
                    }),
                  ],
                }),
          [s, h, r, b, v, f, i, x, d, p],
        );
      return (0, e7.jsxs)("div", {
        className: (0, tc.cn)(
          "flex w-full items-center justify-between gap-3",
          "processing" === s && "animate-pulse",
          t,
        ),
        children: [
          (0, e7.jsx)(tx, { fileName: d, imageUrl: r || void 0 }),
          (0, e7.jsxs)("div", {
            className:
              "flex flex-col items-start gap-0.5 leading-5 min-w-0 flex-1 overflow-hidden",
            children: [
              (0, e7.jsx)("span", {
                className: "text-sm w-full font-medium break-all line-clamp-2",
                children: d,
              }),
              (0, e7.jsx)(tv, {
                size: n?.size,
                status: s,
                isUploaded: u,
                progress: c,
              }),
            ],
          }),
          p || r ? j : null,
        ],
      });
    }
    function tb({
      projectId: e,
      onSubmit: t,
      onFinish: n,
      emptyStateComponent: r,
      showEmptyTitle: i = !0,
    }) {
      let s = (0, tl.useT)(),
        {
          sources: a,
          isLoading: o,
          revalidateSources: l,
          setSources: c,
        } = (0, ta.useProjectSources)(e),
        u = (0, ta.useCanMakeProjectUpdates)(),
        d = a.length || 0,
        h = (0, e6.useRef)(null),
        {
          inputFileRef: p,
          onInputChange: m,
          isUploading: f,
          isDraggingFile: g,
        } = (0, tu.default)({
          isSignedIn: !0,
          disablePaste: !0,
          dragContainerRef: h,
          canUpload: (e) => {
            let t = tm.ALLOWED_FILE_COUNT["project-source"];
            return e.length > t
              ? { ok: !1, message: `You can only upload up to ${t} sources` }
              : { ok: !0 };
          },
          onUploadStart: (e) => {
            (t?.(),
              c(
                (t) => [
                  {
                    sourceId: e.id,
                    title: e.name,
                    type: "attachment",
                    url: e.url,
                    content: null,
                    description: null,
                    metadata: null,
                    isOptimistic: !0,
                    status: "processing",
                    progress: null,
                    finishedAt: null,
                  },
                  ...(t || []),
                ],
                { revalidate: !1 },
              ));
          },
          projectId: e || void 0,
          onFinish: () => {
            (n?.(), l());
          },
        }),
        x = (0, e6.useMemo)(
          () =>
            g
              ? (0, e7.jsxs)("div", {
                  className:
                    "absolute inset-0 z-20 flex flex-col items-center justify-center gap-2 rounded-lg border border-dashed border-v0-blue-700 bg-v0-blue-100 shadow-none",
                  children: [
                    (0, e7.jsx)(to.EmptyTitle, {
                      className: "text-sm text-v0-blue-700",
                      children: s("projectSettings.dropHere"),
                    }),
                    (0, e7.jsx)(to.EmptyDescription, {
                      className: "text-sm text-v0-blue-700",
                      children: s("projectSettings.dropHereDescription"),
                    }),
                  ],
                })
              : null,
          [g, s],
        );
      return o
        ? null
        : (0, e7.jsxs)(e7.Fragment, {
            children: [
              (0, e7.jsxs)("div", {
                className: "relative flex flex-col gap-3",
                ref: h,
                "data-sources-drop-container": !0,
                children: [
                  x,
                  (0, e7.jsx)("div", {
                    style: { visibility: g ? "hidden" : "visible" },
                    children:
                      0 === d
                        ? (0, e7.jsx)("div", {
                            ref: h,
                            children: r
                              ? (0, e7.jsx)(r, {
                                  title: i
                                    ? s("projectSettings.noSources")
                                    : void 0,
                                  subtitle: s(
                                    "projectSettings.noSourcesDescription",
                                  ),
                                  className: "h-56",
                                  children: (0, e7.jsxs)(te.Button, {
                                    size: "sm",
                                    variant: "secondary",
                                    onClick: () => {
                                      p.current?.click();
                                    },
                                    children: [
                                      (0, e7.jsx)(ts.CloudUpload, {}),
                                      "Upload",
                                    ],
                                  }),
                                })
                              : (0, e7.jsxs)("div", {
                                  className:
                                    "flex flex-col items-center justify-center gap-2 py-8",
                                  children: [
                                    i &&
                                      (0, e7.jsx)(to.EmptyTitle, {
                                        children: s(
                                          "projectSettings.noSources",
                                        ),
                                      }),
                                    (0, e7.jsx)(to.EmptyDescription, {
                                      children: s(
                                        "projectSettings.noSourcesDescription",
                                      ),
                                    }),
                                    (0, e7.jsxs)(te.Button, {
                                      size: "sm",
                                      variant: "secondary",
                                      onClick: () => {
                                        p.current?.click();
                                      },
                                      children: [
                                        (0, e7.jsx)(ts.CloudUpload, {}),
                                        "Upload",
                                      ],
                                    }),
                                  ],
                                }),
                          })
                        : (0, e7.jsxs)("div", {
                            className: "flex flex-col gap-3",
                            children: [
                              (0, e7.jsxs)(te.Button, {
                                variant: "secondary",
                                size: "sm",
                                className: "h-7 rounded-md w-full",
                                onClick: () => {
                                  u && p.current?.click();
                                },
                                children: [
                                  (0, e7.jsx)(ts.CloudUpload, {}),
                                  "Upload",
                                ],
                              }),
                              (0, e7.jsx)("div", {
                                className: "space-y-3",
                                children: a.map((e) =>
                                  (0, e7.jsx)(ty, { source: e }, e.sourceId),
                                ),
                              }),
                              (0, e7.jsx)(th.default, { projectId: e }),
                              (0, e7.jsx)(td.default, { projectId: e }),
                            ],
                          }),
                  }),
                ],
              }),
              (0, e7.jsx)("input", {
                className: "sr-only",
                "data-enable-grammarly": "false",
                "data-gramm": "false",
                "data-gramm_editor": "false",
                disabled: f,
                multiple: !0,
                onChange: (e) => {
                  m(e);
                },
                ref: p,
                type: "file",
              }),
            ],
          });
    }
    function tj({ setSaving: e, projectId: t }) {
      let n = (0, e9.useT)(),
        { isLoading: r } = (0, e4.useProjectSources)(t);
      return t
        ? r
          ? (0, e3.jsx)(v, { title: n("projectSettings.sources") })
          : (0, e3.jsx)(m, {
              label: n("projectSettings.sources"),
              info: "Sources let v0 use your files and information in responses.",
              className: "gap-3 p-4",
              children: (0, e3.jsx)(tb, {
                projectId: t,
                onSubmit: () => e(!0),
                onFinish: () => e(!1),
                emptyStateComponent: f,
              }),
            })
        : null;
    }
    (e.s(["ProjectSources", () => tb], 614539),
      e.s(["Sources", () => tj], 966455));
  },
  878418,
  (e) => {
    "use strict";
    e.s(["VercelProject", () => h], 878418);
    var t = e.i(324834),
      n = e.i(534962),
      r = t,
      i = e.i(376346),
      s = e.i(180367),
      a = e.i(762585),
      o = n,
      l = e.i(388334),
      c = e.i(781670);
    function u() {
      let { vercelProject: e, isLoading: t } = (0, o.useVercelProject)();
      return t
        ? (0, r.jsx)(d, {})
        : (0, r.jsx)(i.Card, {
            className: "shadow-none border border-v0-alpha-400",
            children: (0, r.jsxs)(i.CardContent, {
              className: "flex flex-col gap-3 p-3",
              children: [
                (0, r.jsx)("div", {
                  className: "flex items-center justify-between",
                  children: (0, r.jsx)("div", {
                    className:
                      "relative h-8 w-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400 bg-[#000000]",
                    children: (0, r.jsx)(s.LogoVercel, {
                      className:
                        "absolute inset-0 m-auto size-3.5 !text-v0-universal-white",
                    }),
                  }),
                }),
                (0, r.jsxs)("div", {
                  className: "flex flex-col gap-0.5",
                  children: [
                    (0, r.jsx)("h3", {
                      className: "font-medium text-sm",
                      children: (0, r.jsx)("span", {
                        className: "truncate",
                        children: "Vercel",
                      }),
                    }),
                    (0, r.jsx)("p", {
                      className: "text-xs text-v0-gray-900 truncate",
                      children: e ? e.project.name : "Not connected",
                    }),
                  ],
                }),
                e
                  ? (0, r.jsx)(c.ConnectedVercelProjectButton, {})
                  : (0, r.jsx)(l.ConnectVercelProjectButton, {}),
              ],
            }),
          });
    }
    function d() {
      return (0, r.jsx)(i.Card, {
        className: "shadow-none border border-v0-alpha-400",
        children: (0, r.jsxs)(i.CardContent, {
          className: "flex flex-col gap-3 p-3",
          children: [
            (0, r.jsx)("div", {
              className: "flex items-center justify-between",
              children: (0, r.jsx)("div", {
                className:
                  "relative h-8 w-8 overflow-hidden rounded-full flex-shrink-0 border border-v0-alpha-400 bg-[#000000]",
                children: (0, r.jsx)(s.LogoVercel, {
                  className:
                    "absolute inset-0 m-auto size-3.5 !text-v0-universal-white",
                }),
              }),
            }),
            (0, r.jsxs)("div", {
              className: "flex flex-col gap-0.5",
              children: [
                (0, r.jsx)("h3", {
                  className: "font-medium text-sm",
                  children: (0, r.jsx)("span", {
                    className: "truncate",
                    children: "Vercel",
                  }),
                }),
                (0, r.jsx)(a.Skeleton, { className: "h-3 w-36" }),
              ],
            }),
            (0, r.jsx)(a.Skeleton, { className: "h-7 w-full" }),
          ],
        }),
      });
    }
    function h() {
      return (0, t.jsx)(n.VercelProjectProvider, {
        children: (0, t.jsx)(u, {}),
      });
    }
  },
  689253,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(89440),
      i = e.i(548866),
      s = e.i(691701),
      a = e.i(762585),
      o = n;
    e.i(472428);
    var l = e.i(296900);
    let c = new Map();
    function u({ deploymentId: e }) {
      let [t, n] = (0, o.useState)(void 0),
        { data: r } = (0, l.useServerQuerySWR)(
          ["deployment", "logs"],
          { deploymentId: e, since: t },
          { refreshInterval: 1e3, keepPreviousData: !0 },
        ),
        [i, s] = (0, o.useState)([]),
        a = (0, o.useRef)(new Map());
      return (
        (0, o.useEffect)(() => {
          (c.has(e) || c.set(e, new Map()), (a.current = c.get(e)));
        }, [e]),
        (0, o.useEffect)(() => {
          (n(r?.ok ? r.value.nextSince : void 0),
            (r?.ok ? r.value.logs : []).forEach((e) => {
              e.id && a.current.set(e.id, e);
            }),
            s(Array.from(a.current.values())));
        }, [r]),
        { logs: i, data: r }
      );
    }
    var d = n;
    function h() {
      let e = (0, d.useRef)(null),
        t = (0, d.useRef)(!0);
      return (
        (0, d.useEffect)(() => {
          let n = e.current;
          if (!n) return;
          let r = () => {
              let { scrollHeight: e, scrollTop: r, clientHeight: i } = n;
              t.current = e - r - i < 200;
            },
            i = () => {
              if (e.current && t.current) {
                let {
                    scrollHeight: t,
                    scrollTop: n,
                    clientHeight: r,
                  } = e.current,
                  i = t - n - r;
                e.current.scrollTo({
                  top: e.current.scrollHeight,
                  behavior: i > 700 ? "auto" : "smooth",
                });
              }
            },
            s = new ResizeObserver(i),
            a = new MutationObserver(i);
          return (
            n.addEventListener("scroll", r),
            s.observe(n),
            a.observe(n, { childList: !0, subtree: !0, characterData: !0 }),
            i(),
            () => {
              (n.removeEventListener("scroll", r),
                s.disconnect(),
                a.disconnect());
            }
          );
        }, []),
        e
      );
    }
    function p({ deploymentId: e }) {
      let r = h(),
        { logs: o, data: l } = u({ deploymentId: e }),
        c = (0, n.useMemo)(
          () =>
            0 === o.length
              ? (0, t.jsx)(a.Skeleton, { className: "h-full w-full" })
              : l?.ok
                ? (0, t.jsx)("div", {
                    className: "text-[7px] font-mono flex flex-col",
                    children: o.map((e) =>
                      (0, t.jsx)(
                        "span",
                        {
                          className: m({ level: e.level ?? "info" }),
                          children: (0, t.jsx)("span", {
                            className: "overflow-wrap-anywhere break-all",
                            children: e.text,
                          }),
                        },
                        e.id,
                      ),
                    ),
                  })
                : (0, t.jsx)(i.EmptyState, {
                    title: "Unable to fetch logs",
                    variant: "error",
                    icon: (0, t.jsx)(s.Stop, {}),
                    children:
                      "There was an error deploying your chat. Please try again.",
                  }),
          [l, o],
        );
      return (0, t.jsx)("div", {
        className: "no-scrollbar flex h-full w-full flex-col overflow-y-scroll",
        ref: r,
        children: c,
      });
    }
    let m = (0, r.cva)(
      "relative flex flex-row items-start px-2 py-[2px] first:pt-1 last:pb-1",
      {
        variants: {
          level: {
            info: "text-v0-gray-900",
            error: "bg-v0-red-200 text-v0-red-900",
            warning: "bg-v0-amber-300 text-v0-amber-900",
          },
        },
      },
    );
    e.s(["DeploymentLogs", () => p], 689253);
  },
  633035,
  582010,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(691701),
      r = e.i(762585),
      i = e.i(431141),
      s = e.i(393799),
      a = e.i(576191),
      o = e.i(470259),
      l = e.i(452703),
      c = e.i(689253);
    e.i(528517);
    var u = e.i(435106),
      d = e.i(373998);
    function h({ deploymentId: e }) {
      let h = (0, l.getDeploymentAtoms)(e),
        p = (0, s.useAtomValue)(h.status),
        m = (0, s.useAtomValue)(h.state),
        f = (0, s.useAtomValue)((0, u.getUserInputAtoms)().isPointerDown),
        g = (0, d.getChatDeploymentAtoms)(e),
        x = (0, s.useAtomValue)(g.hasDeployableChanges),
        v = (0, a.useMemo)(() => {
          if (!p.ok && p.error.errorCode !== o.NOT_FOUND)
            return (0, t.jsx)(n.Stop, { className: "size-4 !text-v0-red-700" });
          let e = p.ok ? p.value.deployment : void 0;
          switch (m) {
            case "queued":
            case "deploying":
              return (0, t.jsx)("div", {
                className:
                  "text-label-14 flex items-center justify-center gap-2 text-v0-gray-900",
                children: "Loading...",
              });
            case "building":
            case "failed":
            case "error":
              if (!e) return null;
              return (0, t.jsx)("div", {
                className: "group relative h-full w-full",
                children: (0, t.jsx)(c.DeploymentLogs, { deploymentId: e.id }),
              });
            case "deployed":
            case "not-deployed":
              return (0, t.jsx)("div", {
                className:
                  "group relative flex h-full w-full items-center justify-center overflow-hidden",
                children: e?.screenshotUrl
                  ? (0, t.jsx)(i.default, {
                      src: e.screenshotUrl,
                      alt: "Deployment Card Preview",
                      width: 480,
                      height: 360,
                      className:
                        "absolute h-full w-full object-cover transition-all duration-300 group-hover:scale-105",
                    })
                  : (0, t.jsx)(r.Skeleton, {}),
              });
            default:
              return (0, t.jsx)(n.Stop, {
                className: "size-4 !text-v0-red-700",
              });
          }
        }, [p, m, f, x]);
      return (0, t.jsx)("div", {
        className:
          "border-v0-alpha-400 bg-v0-background-200 relative flex h-[88px] w-[130px] items-center justify-center overflow-hidden rounded-md border",
        children: v,
      });
    }
    e.s(["DeploymentPreview", () => h], 633035);
    var p = t,
      m = r,
      f = e.i(403055);
    function g({ title: e, children: t, className: n, ...r }) {
      return (0, p.jsxs)("div", {
        className: (0, f.cn)(
          "flex min-w-0 flex-col items-start gap-1 overflow-hidden",
          n,
        ),
        ...r,
        children: [e ? (0, p.jsx)(g.Title, { children: e }) : null, t],
      });
    }
    ((g.Title = function ({ children: e }) {
      return (0, p.jsx)("span", {
        className: "text-label-14 text-v0-gray-900",
        children: e,
      });
    }),
      (g.Item = function ({
        children: e,
        Icon: t,
        mono: n = !1,
        className: r,
        ...i
      }) {
        return (0, p.jsxs)("div", {
          className: (0, f.cn)(
            "flex h-5 w-full min-w-0 items-center gap-2 *:truncate [&_a:hover]:underline",
            n ? "text-label-13-mono" : "text-label-14",
            r,
          ),
          ...i,
          children: [
            t
              ? (0, p.jsx)("span", {
                  className: "min-w-4 text-v0-gray-900",
                  children: (0, p.jsx)(t, { className: "flex-none" }),
                })
              : null,
            e,
          ],
        });
      }),
      (g.ItemSkeleton = function ({ width: e }) {
        return (0, p.jsx)(g.Item, {
          children: (0, p.jsx)(m.Skeleton, {
            className: "h-4 w-full",
            style: { width: e },
          }),
        });
      }),
      e.s(["Attribute", () => g], 582010));
  },
  201394,
  (e) => {
    "use strict";
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(576191),
      i = e.i(996174),
      s = e.i(304649),
      a = e.i(452703),
      o = e.i(582010),
      l = e.i(900511),
      c = e.i(639090),
      u = e.i(507920),
      d = e.i(654335),
      h = e.i(762585),
      p = e.i(369218),
      m = e.i(675120),
      f = e.i(230766),
      g = e.i(350097),
      x = e.i(455690);
    function v({ deploymentId: e }) {
      let f = (0, a.getDeploymentAtoms)(e),
        g = (0, n.useAtomValue)(f.status),
        x = g.ok ? g.value.deployment : void 0,
        v = (0, r.useMemo)(() => {
          if (!x)
            return (0, t.jsx)(o.Attribute, {
              children: (0, t.jsx)(o.Attribute.Item, {
                children: "No domains available",
              }),
            });
          let e = x.filteredAliases.filter((e) => e.alias !== x.bestDomain);
          return (0, t.jsx)(o.Attribute, {
            title: x.git ? "Domain" : "",
            children: (0, t.jsx)(o.Attribute.Item, {
              children:
                x.bestDomain !== p.LOADING_SKELETON && x.bestDomain
                  ? (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(d.default, {
                          href: (0, s.addProtocol)(x.bestDomain),
                          target: "_blank",
                          children: x.bestDomain,
                        }),
                        (0, t.jsx)(l.ExternalSmall, {
                          className: "-ml-1 min-w-4",
                        }),
                        e.length
                          ? (0, t.jsx)(i.Tooltip, {
                              delayDuration: 200,
                              disableHoverableContent: !1,
                              content: (0, t.jsx)("div", {
                                className: "flex flex-col gap-1 px-1.5",
                                children: (0, t.jsx)("ul", {
                                  children: e.map((e) =>
                                    (0, t.jsxs)(
                                      "li",
                                      {
                                        className:
                                          "flex items-center justify-center space-x-1 text-[11px]",
                                        children: [
                                          (0, t.jsx)("a", {
                                            href: (0, s.addProtocol)(e.alias),
                                            target: "_blank",
                                            className: "hover:underline",
                                            children: e.alias,
                                          }),
                                          (0, t.jsx)(l.ExternalSmall, {
                                            className: "min-w-4",
                                          }),
                                        ],
                                      },
                                      e.alias,
                                    ),
                                  ),
                                }),
                              }),
                              children: (0, t.jsxs)("span", {
                                className:
                                  "flex h-6 w-6 cursor-default select-none items-center justify-center rounded-full bg-v0-gray-100 text-[10px] font-medium text-v0-gray-900",
                                children: ["+", e.length],
                              }),
                            })
                          : null,
                      ],
                    })
                  : (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)(h.Skeleton, { className: "h-4 w-[180px]" }),
                        (0, t.jsx)(l.ExternalSmall, {
                          className: "-ml-1 min-w-4",
                        }),
                      ],
                    }),
            }),
          });
        }, [x]),
        b = (0, r.useMemo)(() => {
          let n = x?.git;
          if (n) {
            let r = n.ref,
              i = n.sha,
              s = `https://github.com/${n.ownerName}/${n.repoName}`,
              a = `${s}/tree/${r}`,
              l = `${s}/commit/${i}`,
              m = (0, t.jsx)("span", {
                className: "text-label-13-mono",
                children: i.substring(0, 7),
              });
            return (0, t.jsxs)(o.Attribute, {
              title: "Source",
              children: [
                (0, t.jsx)(o.Attribute.Item, {
                  Icon: c.GitBranch,
                  children: (0, t.jsx)(d.default, {
                    href: a,
                    target: "_blank",
                    className: "text-label-13-mono",
                    children: r,
                  }),
                }),
                (0, t.jsxs)(o.Attribute.Item, {
                  Icon: u.GitCommit,
                  children: [
                    i === p.LOADING_SKELETON
                      ? (0, t.jsx)(h.Skeleton, {
                          className: "h-4 select-none text-transparent",
                          children: m,
                        })
                      : (0, t.jsx)(d.default, {
                          href: l,
                          target: "_blank",
                          className: "inline-flex gap-2",
                          children: m,
                        }),
                    (0, t.jsx)("span", { children: "" }),
                    (0, t.jsx)(y, { shortHand: !0, deploymentId: e }),
                  ],
                }),
              ],
            });
          }
          return (0, t.jsx)(o.Attribute, {
            children: (0, t.jsx)(o.Attribute.Item, {
              children: (0, t.jsx)(y, { deploymentId: e }),
            }),
          });
        }, [x?.git, e]);
      return (0, t.jsx)(m.TransitionNode, {
        ...m.PRESETS.fade,
        renderKey: e,
        childClassName: "overflow-hidden",
        children: (0, t.jsxs)("div", {
          className: "flex flex-col gap-2",
          children: [v, b],
        }),
      });
    }
    function y({ deploymentId: e, shortHand: i = !1 }) {
      let s = (0, a.getDeploymentAtoms)(e),
        o = (0, n.useAtomValue)(s.status),
        l = o.ok ? o.value.deployment : void 0,
        [c, u] = (0, r.useState)(0);
      return ((0, r.useEffect)(() => {
        if (!l?.createdAt) return;
        let e = setInterval(() => {
          l.createdAt > Date.now() - 65e3 && u(c + 1);
        }, 200);
        return () => clearInterval(e);
      }, [l, c, u]),
      l && l.creator)
        ? (0, t.jsxs)("div", {
            className: "text-label-14 flex items-center gap-1.5 tabular-nums",
            children: [
              (0, t.jsxs)("span", {
                children: [
                  (0, t.jsx)("span", { children: i ? null : "Last updated " }),
                  (0, t.jsx)("span", {
                    children:
                      0 === l.createdAt
                        ? "Just now"
                        : (0, g.timeAgo)(
                            new Date(l.createdAt),
                            !0,
                            Date.now(),
                            !1,
                          ),
                  }),
                ],
              }),
              (0, x.isGithubCommitByV0Bot)(l)
                ? null
                : (0, t.jsxs)(t.Fragment, {
                    children: [
                      (0, t.jsx)(f.AvatarUser, {
                        userId: l.creator.uid,
                        rounded: !0,
                        size: "xs",
                      }),
                      (0, t.jsx)("span", {
                        className: "font-medium",
                        children: l.creator.username,
                      }),
                    ],
                  }),
            ],
          })
        : null;
    }
    e.s(["DeploymentAttributes", () => v]);
  },
  618262,
  251198,
  41209,
  865228,
  74312,
  (e) => {
    "use strict";
    e.s(["SuspendingSettingsButton", () => tw], 618262);
    var t = e.i(324834),
      n = e.i(53223),
      r = e.i(749299),
      i = e.i(383790),
      s = e.i(700509),
      a = e.i(903500),
      o = e.i(601921),
      l = e.i(802008),
      c = e.i(443146),
      u = e.i(909712),
      d = e.i(646805),
      h = e.i(556355),
      p = e.i(176248),
      m = e.i(297239),
      f = e.i(740292),
      g = e.i(246300),
      x = e.i(576191),
      v = t,
      y = x,
      b = p,
      j = e.i(187511),
      w = e.i(459522),
      C = e.i(244008),
      k = e.i(84977),
      S = e.i(592885),
      N = e.i(389140),
      E = e.i(276507),
      A = m,
      D = e.i(60425),
      I = e.i(643312),
      M = e.i(914897),
      T = e.i(92479),
      L = e.i(242759),
      P = e.i(654335),
      R = e.i(226368),
      F = e.i(481498);
    (e.i(170786), e.i(563948));
    var _ = e.i(407562),
      O = e.i(316808),
      B = e.i(393799),
      V = e.i(620678),
      z = e.i(644471),
      H = e.i(155893),
      $ = e.i(471173),
      U = e.i(966455),
      G = e.i(878418),
      W = e.i(666425),
      q = e.i(304649);
    e.s(["Deployment", () => ek, "NewDeployment", () => eN], 251198);
    var Z = t,
      K = e.i(633035),
      Y = e.i(762585),
      J = x,
      Q = e.i(201394);
    e.i(472428);
    var X = e.i(296900),
      ee = e.i(72058),
      et = t,
      en = x,
      er = e.i(582010),
      ei = Y,
      es = e.i(369218),
      ea = t,
      eo = e.i(996174),
      el = P;
    function ec({
      bestDomain: e,
      filteredAliases: t,
      className: n = "",
      loading: r = !1,
    }) {
      let i = (e) => {
        window.open(e, "_blank");
      };
      return (0, ea.jsxs)("div", {
        className: `relative flex items-center gap-2 ${n} w-full`,
        children: [
          (0, ea.jsx)("div", {
            className: "relative flex-1 w-full min-w-0",
            children: (0, ea.jsx)(el.default, {
              href: `https://${e}`,
              target: "_blank",
              children: (0, ea.jsx)("div", {
                className:
                  "pl-0.5 focus:outline-none box-border w-full text-[14px] transition-all duration-200 cursor-pointer truncate hover:underline",
                children: e,
              }),
            }),
          }),
          t.length > 0 &&
            (0, ea.jsx)(eo.Tooltip, {
              content: (0, ea.jsx)("div", {
                children: t.map((e, t) =>
                  (0, ea.jsx)(
                    "button",
                    {
                      onClick: () => i(e.alias),
                      className:
                        "w-full px-2 py-1.5 text-left text-xs hover:bg-v0-background-200 hover:text-v0-gray-1000 transition-colors",
                      children: e.alias,
                    },
                    t,
                  ),
                ),
              }),
              children: (0, ea.jsx)("span", {
                className:
                  "flex justify-center items-center text-xs font-medium text-v0-gray-900 w-5 aspect-square hover:bg-v0-gray-100 rounded-full transition-all duration-200 cursor-pointer",
                children: (0, ea.jsxs)("div", { children: ["+", t.length] }),
              }),
            }),
        ],
      });
    }
    var eu = B,
      ed = e.i(452703);
    let eh = ({ deploymentId: e }) => {
      let t = (0, ed.getDeploymentAtoms)(e),
        n = (0, eu.useAtomValue)(t.status),
        r = n.ok ? n.value.deployment : void 0,
        i = (0, eu.useAtomValue)(t.state),
        s = "deploying" === i || "queued" === i || "building" === i;
      return (0, en.useMemo)(() => {
        if (!r)
          return (0, et.jsx)(er.Attribute, {
            children: (0, et.jsx)(er.Attribute.Item, {
              children: "No domains available",
            }),
          });
        let e = r.filteredAliases.filter((e) => e.alias !== r.bestDomain);
        return r.bestDomain !== es.LOADING_SKELETON && r.bestDomain
          ? (0, et.jsx)(ec, {
              bestDomain: r.bestDomain,
              filteredAliases: e,
              loading: s,
            })
          : (0, et.jsx)(ei.Skeleton, {
              className: "h-[21px] w-full rounded-[6px] pl-2",
            });
      }, [r, s]);
    };
    var ep = t,
      em = e.i(639090),
      ef = e.i(293475),
      eg = e.i(230766),
      ex = e.i(455690),
      ev = B,
      ey = ed,
      eb = x,
      ej = q;
    let ew = (e) => e.charAt(0).toUpperCase() + e.slice(1).toLowerCase(),
      eC = ({ deploymentId: e }) => {
        let t = (0, ey.getDeploymentAtoms)(e),
          n = (0, ev.useAtomValue)(t.status),
          r = n.ok ? n.value.deployment : void 0,
          i = r?.git?.ref,
          s = (0, eb.useMemo)(() => {
            switch (r?.readyState) {
              case "READY":
                return (0, ep.jsx)("div", {
                  className:
                    "w-4 h-4 rounded-full bg-v0-green-100 flex items-center justify-center",
                  children: (0, ep.jsx)("div", {
                    className: "w-2 h-2 rounded-full bg-v0-green-700",
                  }),
                });
              case "BUILDING":
              case "QUEUED":
              case "INITIALIZING":
                return (0, ep.jsxs)("div", {
                  className:
                    "relative w-4 h-4 rounded-full bg-v0-amber-200 flex items-center justify-center",
                  children: [
                    (0, ep.jsx)("div", {
                      className: "w-2 h-2 rounded-full bg-v0-amber-700",
                    }),
                    (0, ep.jsx)("div", {
                      className:
                        "absolute w-2 h-2 top-1 left-1 rounded-full bg-v0-amber-700 animate-ping opacity-80",
                      style: { animationDuration: "1s" },
                    }),
                  ],
                });
              case "CANCELED":
              case "ERROR":
              case "NOTREADY":
                return (0, ep.jsx)("div", {
                  className:
                    "w-4 h-4 rounded-full bg-v0-red-200 flex items-center justify-center",
                  children: (0, ep.jsx)("div", {
                    className: "w-2 h-2 rounded-full bg-v0-red-700",
                  }),
                });
              default:
                return (0, ep.jsx)("div", {
                  className:
                    "w-4 h-4 rounded-full bg-v0-gray-100 flex items-center justify-center",
                  children: (0, ep.jsx)("div", {
                    className: "w-2 h-2 rounded-full bg-v0-gray-900",
                  }),
                });
            }
          }, [r?.readyState]);
        return r
          ? (0, ep.jsxs)(ep.Fragment, {
              children: [
                (0, ep.jsxs)("div", {
                  className:
                    "text-[14px] flex flex-row justify-start items-center gap-x-1 w-full overflow-hidden",
                  children: [
                    r && !(0, ex.isGithubCommitByV0Bot)(r)
                      ? (0, ep.jsx)(eg.AvatarUser, {
                          userId: r.creator?.uid,
                          rounded: !0,
                          size: "xs",
                        })
                      : (0, ep.jsx)(ef.User, {
                          className: "text-v0-gray-900 w-4 aspect-square",
                        }),
                    " ",
                    (0, ep.jsxs)("span", {
                      className: "whitespace-nowrap shrink-0",
                      children: [
                        "Updated",
                        " ",
                        r.bootedAt
                          ? (0, ej.formatDate)(
                              new Date(r.bootedAt),
                              Intl.DateTimeFormat().resolvedOptions().timeZone,
                            )
                          : null,
                      ],
                    }),
                    i &&
                      (0, ep.jsxs)("div", {
                        className:
                          "flex items-center gap-x-1 flex-1 min-w-0 overflow-hidden",
                        children: [
                          (0, ep.jsx)("span", {
                            className: "text-v0-gray-900 shrink-0",
                            children: "",
                          }),
                          (0, ep.jsx)(em.GitBranch, {
                            className: "w-4 h-4 shrink-0",
                          }),
                          (0, ep.jsx)("span", {
                            className: "truncate",
                            children: i,
                          }),
                        ],
                      }),
                  ],
                }),
                (0, ep.jsxs)("div", {
                  className:
                    "text-[14px] flex flex-row justify-start items-center gap-x-1",
                  children: [
                    s,
                    (0, ep.jsx)("span", { children: ew(r.readyState ?? "") }),
                  ],
                }),
              ],
            })
          : null;
      };
    function ek({ deploymentId: e, stopFetch: t = !1 }) {
      return (0, Z.jsx)(J.Suspense, {
        fallback: (0, Z.jsx)(Y.Skeleton, { className: "h-[200px] w-full" }),
        children: (0, Z.jsx)(eS, { deploymentId: e, stopFetch: t }),
      });
    }
    function eS({ deploymentId: e, stopFetch: t = !0 }) {
      return (
        (0, X.useServerQuerySWR)(
          ["deployment", "status"],
          { deploymentId: e },
          { stopFetch: t },
        ),
        (0, Z.jsxs)("div", {
          className: "flex flex-col gap-4",
          children: [
            (0, Z.jsx)(K.DeploymentPreview, { deploymentId: e }),
            (0, Z.jsx)(Q.DeploymentAttributes, { deploymentId: e }),
          ],
        })
      );
    }
    function eN({ deploymentId: e, stopFetch: t = !0, chatId: n }) {
      return (
        (0, X.useServerQuerySWR)(
          ["deployment", "status"],
          { deploymentId: e },
          { stopFetch: t },
        ),
        (0, X.useServerQuerySWR)(["scoped", "editableTemplates"], {}),
        (0, Z.jsxs)("div", {
          className: "flex flex-col",
          children: [
            (0, Z.jsx)("div", {
              className: "px-2.5 py-1.5 border-b",
              children: (0, Z.jsx)("div", {
                className: "h-8 flex items-center pl-2 text-sm font-medium",
                children: "Published App",
              }),
            }),
            (0, Z.jsx)("div", {
              className: "p-4 w-full border-b",
              children: (0, Z.jsxs)("div", {
                className:
                  "w-full flex flex-row justify-start items-start h-[88px]",
                children: [
                  (0, Z.jsx)(K.DeploymentPreview, { deploymentId: e }),
                  (0, Z.jsxs)("div", {
                    className:
                      "flex flex-col justify-between items-start h-full pl-3 flex-1 w-[258px]",
                    children: [
                      (0, Z.jsx)(eh, { deploymentId: e }),
                      (0, Z.jsx)(eC, { deploymentId: e }),
                    ],
                  }),
                ],
              }),
            }),
            (0, Z.jsx)(J.Suspense, {
              fallback: (0, Z.jsx)(Y.Skeleton, { className: "h-10 w-full" }),
              children: (0, Z.jsx)(ee.SuspendingDeploymentActions, {
                deploymentId: e,
                chatId: n,
              }),
            }),
          ],
        })
      );
    }
    var eE = e.i(301331);
    e.i(624424);
    var eA = e.i(174890),
      eD = e.i(334548),
      eI = e.i(819969);
    let eM = [
      { value: "overview", label: "Overview" },
      { value: "integrations", label: "Integrations" },
      { value: "env", label: "Environment Variables" },
      { value: "knowledge", label: "Knowledge" },
    ];
    function eT({ isSheetOpen: e, onOpenChange: t, sheetOnly: n }) {
      let { bwvb: r } = (0, L.useFlags)(),
        i = (0, A.useT)(),
        s = (0, R.usePathname)(),
        { allBlocks: a } = (0, eE.useBlockHistory)({ searchAll: !1 }),
        o = (0, y.useMemo)(
          () => a.findLast((e) => "code-project" === e.type)?.id,
          [a],
        ),
        l = (0, T.assertChatId)((0, T.useChatId)().chatId),
        {
          vercelProject: c,
          refetch: u,
          status: d,
        } = (0, I.useIntegrationsApi)(),
        h = "loading" === d,
        { reassignPending: p, handleReassignProject: m } = (0,
        M.useReassignProject)(),
        [f, g] = (0, y.useState)(!1),
        [x, _] = (0, y.useState)(!1),
        [Z, K] = (0, B.useAtom)(V.settingsSheetTabAtom),
        Y = (0, B.useSetAtom)(V.settingsSheetTabAtom),
        { atoms: J } = (0, eI.useCurrentChat)(),
        Q = (0, B.useAtomValue)(J.title) ?? void 0,
        X = (0, B.useAtomValue)(J.project),
        ee = X?.projectId,
        et = (0, y.useRef)(null),
        en = c?.dashboardProject?.productionDeployment?.id,
        er = void 0 !== e ? e : f,
        ei = (0, y.useCallback)(
          (e) => {
            (t ? t(e) : g(e),
              setTimeout(() => {
                e || Y("overview");
              }, 200));
          },
          [t, Y],
        ),
        es = (0, y.useMemo)(() => s.split("/").includes("projects"), [s]),
        ea = (0, y.useCallback)((e) => {
          (e.preventDefault(),
            (e.target instanceof Element &&
              e.target.closest("[data-sources-drop-container]")) ||
              e.stopPropagation());
        }, []);
      return (0, v.jsxs)(j.Sheet, {
        open: er,
        onOpenChange: ei,
        children: [
          n
            ? null
            : (0, v.jsx)(j.SheetTrigger, {
                asChild: !0,
                children: (0, v.jsx)(b.Button, {
                  "aria-label": i("projectSettings.label"),
                  className: "size-7 rounded-md px-1 py-1.5 text-v0-gray-1000",
                  size: "sm",
                  variant: "ghost",
                  tooltip: { side: "bottom", content: "Project Settings" },
                  children: (0, v.jsx)(C.SettingsGear, {}),
                }),
              }),
          (0, v.jsx)(j.SheetContent, {
            className:
              "sm:max-w-[550px]! pointer-events-auto flex w-screen flex-col gap-0 overflow-hidden p-0 data-[state=closed]:duration-300 data-[state=open]:duration-300",
            "aria-describedby": void 0,
            onInteractOutside: (e) => {
              x && e.preventDefault();
            },
            onDragEnter: (e) => {
              (e.preventDefault(), e.stopPropagation());
            },
            onDragOver: (e) => {
              (e.preventDefault(), e.stopPropagation());
            },
            onMouseLeave: (e) => {
              (e.preventDefault(), e.stopPropagation());
            },
            onCloseAutoFocus: (e) => {
              e.preventDefault();
            },
            onDrop: ea,
            side: "right",
            showClose: !1,
            ref: et,
            children: ee
              ? (0, v.jsxs)(v.Fragment, {
                  children: [
                    (0, v.jsx)(j.SheetHeader, {
                      className: "sticky gap-1 p-4 text-left",
                      children: (0, v.jsxs)("div", {
                        className:
                          "flex w-full items-center justify-between gap-2",
                        children: [
                          (0, v.jsx)(j.SheetTitle, {
                            className: "text-base",
                            children: i("projectSettings.label"),
                          }),
                          (0, v.jsxs)("div", {
                            className: "flex gap-2",
                            children: [
                              !es &&
                                (0, v.jsx)(b.Button, {
                                  variant: "outline",
                                  className: "h-7 rounded-md",
                                  size: "sm",
                                  asChild: !0,
                                  children: (0, v.jsxs)(P.default, {
                                    href: `/chat/projects/${ee}`,
                                    target: "_blank",
                                    children: [
                                      "View Project ",
                                      (0, v.jsx)(N.External, {}),
                                    ],
                                  }),
                                }),
                              (0, v.jsx)(j.SheetClose, {
                                asChild: !0,
                                children: (0, v.jsx)(b.Button, {
                                  variant: "outline",
                                  className: "size-7 rounded-md",
                                  size: "sm",
                                  children: (0, v.jsx)(S.Cross, {}),
                                }),
                              }),
                            ],
                          }),
                        ],
                      }),
                    }),
                    (0, v.jsxs)(z.Tabs, {
                      variant: "underline",
                      value: Z,
                      onValueChange: (e) => {
                        ("overview" === e && u(), K(e));
                      },
                      className: (0, q.cn)(
                        "relative z-0 flex grow flex-col overflow-hidden",
                      ),
                      children: [
                        (0, v.jsx)("div", {
                          className:
                            "from-background bg-linear-to-r pointer-events-none absolute -left-px top-0 z-10 h-[31px] w-6 to-transparent",
                        }),
                        (0, v.jsx)("div", {
                          className:
                            "from-background bg-linear-to-l pointer-events-none absolute -right-px top-0 z-10 h-[31px] w-6 to-transparent",
                        }),
                        (0, v.jsx)(z.TabsList, {
                          className:
                            "no-scrollbar z-0 w-full shrink-0 overflow-x-auto px-2",
                          children: eM.map((e) =>
                            (0, v.jsx)(
                              z.TabsTrigger,
                              { value: e.value, children: e.label },
                              e.value,
                            ),
                          ),
                        }),
                        (0, v.jsx)(eL, {
                          value: "overview",
                          children: (0, v.jsxs)("div", {
                            className: "flex flex-col gap-4 p-4",
                            children: [
                              (0, v.jsx)(G.VercelProject, {}),
                              (0, v.jsx)(W.Git, {
                                vercelProjectWithDashboard: c ?? null,
                                isLoading: h,
                                v0ProjectId: ee,
                                closeSettingsSheet: () => ei(!1),
                                chatId: l,
                                latestBlockId: o,
                              }),
                              r &&
                                (0, v.jsx)(eA.BuiltWithV0Provider, {
                                  children: (0, v.jsx)(eD.ToggleSwitch, {}),
                                }),
                              ee && en && (0, v.jsx)(ek, { deploymentId: en }),
                            ],
                          }),
                        }),
                        (0, v.jsx)(eL, {
                          value: "integrations",
                          children: (0, v.jsx)(y.Suspense, {
                            fallback: (0, v.jsx)(
                              F.IntegrationOptionsSkeleton,
                              {},
                            ),
                            children: (0, v.jsx)(F.IntegrationOptions, {}),
                          }),
                        }),
                        (0, v.jsx)(eL, {
                          value: "env",
                          className: "p-4",
                          children: (0, v.jsx)(H.EnvVars, {}),
                        }),
                        (0, v.jsxs)(eL, {
                          value: "knowledge",
                          children: [
                            (0, v.jsx)($.Instructions, {
                              setSaving: _,
                              projectId: ee,
                            }),
                            (0, v.jsx)(U.Sources, {
                              setSaving: _,
                              projectId: ee,
                            }),
                          ],
                        }),
                      ],
                    }),
                  ],
                })
              : (0, v.jsxs)("div", {
                  className:
                    "bg-v0-background-200 flex grow flex-col items-center justify-center gap-3 rounded-md px-9 py-12",
                  children: [
                    (0, v.jsxs)("div", {
                      className: "flex flex-col items-center gap-2",
                      children: [
                        (0, v.jsx)(E.EmptyIcon, {
                          children: (0, v.jsx)(k.FolderClosed, {}),
                        }),
                        (0, v.jsx)("p", {
                          className: "font-medium text-v0-gray-1000",
                          children: "Add to a Project",
                        }),
                        (0, v.jsx)("p", {
                          className: "text-center text-sm text-v0-gray-900",
                          children:
                            "Add this chat to a project to add instructions, sources, environment variables, integrations, and more.",
                        }),
                      ],
                    }),
                    (0, v.jsx)(D.ProjectsDropdown, {
                      className: "w-auto",
                      handleProjectSelect: m,
                      projectName: Q,
                      onSuccess: (e) => {
                        l &&
                          (0, O.assignProjectToChat)({
                            chatId: l,
                            projectId: e,
                          });
                      },
                      quickCreate: !0,
                      align: "center",
                      triggerButton: (0, v.jsxs)(b.Button, {
                        size: "sm",
                        variant: "secondary",
                        disabled: p,
                        children: [(0, v.jsx)(w.Plus, {}), "Add Project"],
                      }),
                      disabled: p,
                    }),
                  ],
                }),
          }),
        ],
      });
    }
    function eL({ value: e, className: t, children: n }) {
      return (0, v.jsx)(z.TabsContent, {
        value: e,
        className: (0, q.cn)("grow overflow-y-auto", t),
        children: n,
      });
    }
    e.i(904347);
    var eP = e.i(37737),
      eR = B,
      eF = e.i(449381),
      e_ = e.i(296046),
      eO = eI,
      eB = V,
      eV = t,
      ez = e_;
    e.i(142219);
    var eH = e.i(404836),
      e$ = e.i(675120),
      eU = e.i(70165),
      eG = e.i(659563),
      eW = e.i(657736),
      eq = e.i(9654),
      eZ = B,
      eK = x;
    let eY = (0, eq.atom)(!1);
    function eJ() {
      let e = (0, eZ.useAtomValue)(eY),
        t = (0, eU.useIsMobile)(),
        n = (0, ez.useIsChatPage)() && e && !t;
      return (0, eV.jsx)(e$.TransitionNode, {
        duration: e0,
        delay: eX,
        justify: "center",
        children: n ? (0, eV.jsx)(eQ, {}) : (0, eV.jsx)(eG.MoreHorizontal, {}),
      });
    }
    function eQ() {
      let e = (0, eZ.useAtomValue)(eY),
        [t, n] = (0, eK.useState)(!1),
        r = (0, eK.useRef)(null);
      return (
        (0, eK.useEffect)(
          () => (
            r.current && clearTimeout(r.current),
            e
              ? (r.current = setTimeout(() => {
                  n(!0);
                }, tt))
              : n(!1),
            () => {
              r.current && clearTimeout(r.current);
            }
          ),
          [e],
        ),
        (0, eV.jsxs)(
          "div",
          {
            className: "flex items-center px-1.5",
            children: [
              (0, eV.jsx)("div", {
                className: "flex [&>*:not(:first-child)]:ml-[-4px]",
                children: [
                  (0, eV.jsx)(eH.SupabaseIcon, {}, "supabase"),
                  (0, eV.jsx)(eH.NeonIcon, {}, "neon"),
                  (0, eV.jsx)(eH.UpstashIcon, {}, "upstash"),
                ].map((e, t) =>
                  (0, eV.jsx)(
                    eW.motion.div,
                    {
                      className: "border-v0-background-100 rounded-full border",
                      initial: { opacity: 0, x: 8, scale: 1.3 },
                      animate: { opacity: 1, x: 0, scale: 1 },
                      transition: ti(e1, e3, te(t)),
                      children: e,
                    },
                    t,
                  ),
                ),
              }),
              (0, eV.jsx)(eW.motion.div, {
                initial: { width: 0 },
                animate: { width: t ? "auto" : 0, marginLeft: 6 * !!t },
                transition: ti(e4, e9, tn),
                children: (0, eV.jsx)(eW.motion.div, {
                  initial: { opacity: 0, scale: 0.9, filter: "blur(2px)" },
                  animate: { opacity: 1, scale: 1, filter: "blur(0px)" },
                  className: "flex items-center gap-1",
                  transition: ti(e7, e6, tr),
                  children: "Add Integration",
                }),
              }),
            ],
          },
          "integrations",
        )
      );
    }
    let eX = 0.4,
      e0 = 0.6,
      e1 = 0.4,
      e2 = -0.5,
      e5 = 0.2,
      e3 = 0.7,
      e4 = 0.2,
      e9 = 0.9,
      e7 = 0.05,
      e6 = 0.7,
      e8 = 1,
      te = (e) => e8 + e2 + e5 * e,
      tt = 0.7 + e8 + 3 * e5,
      tn = tt + -0.65,
      tr = tt + -0.65 + 0.9 + -0.5,
      ti = (e, t, n) => ({ type: "spring", bounce: e, delay: n, duration: t });
    var ts = t,
      ta = eH,
      to = e.i(917772),
      tl = e$;
    let tc = (0, e.i(877318).withNewIcon)(
      '<path d="M12.25 14.25V10L12.9212 10.1119C14.1403 10.315 15.25 9.37496 15.25 8.13908V7.86092C15.25 6.62504 14.1403 5.68496 12.9212 5.88813L12.25 6V1.75H8.235L8.30764 2.50382C8.41075 3.57386 7.56957 4.5 6.49457 4.5C5.42349 4.5 4.58361 3.58031 4.68058 2.51362L4.75 1.75H0.75V14.25H12.25Z" stroke="currentColor" fill="transparent" stroke-width="1.5"/>',
    );
    e.s(["Puzzle", 0, tc], 41209);
    var tu = x;
    function td({ showIcons: e }) {
      let t = (0, tu.useMemo)(
        () =>
          [ta.NeonIcon, ta.SupabaseIcon, ta.UpstashIcon, ta.BlobIcon].map(
            (e, t) => (0, ts.jsx)(e, {}, t),
          ),
        [],
      );
      return (0, ts.jsx)(tl.TransitionNode, {
        className: "h-4 w-4",
        enter: { y: 16 },
        exit: { y: -16 },
        duration: 0.3,
        delay: 0.1,
        children: e
          ? (0, ts.jsx)(to.MarchingChildren, {
              shouldMarch: !0,
              size: 16,
              stepDurationMs: 1e3,
              direction: "vertical",
              numberOfVisibleChildren: 1,
              overlap: -12,
              waitMs: 1e3,
              animation: { scale: 0.85, transformMultiplier: 0.5 },
              children: t,
            })
          : (0, ts.jsx)(tc, {}),
      });
    }
    var th = e.i(667660),
      tp = e.i(206037),
      tm = e.i(403055),
      tf = e.i(794593),
      tg = X,
      tx = e.i(373998),
      tv = e.i(729602),
      ty = T,
      tb = e.i(499282),
      tj = L;
    function tw({ project: e, screen: v }) {
      let y = (0, ty.assertChatId)((0, tv.useChatId)()),
        b = (0, eF.useActiveBlockState)(),
        [j, w] = (0, x.useState)(!1),
        C = (0, eR.useAtomValue)(eY),
        { data: k } = (0, tg.useServerQuerySWR)(["chat", "template"], {
          chatId: y,
        }),
        [S, N] = (0, x.useState)(!1),
        { data: E } = (0, g.useChatFavorites)(),
        A = (0, x.useMemo)(() => E?.find((e) => e.chatId === y), [E, y]),
        { atoms: D } = (0, eO.useCurrentChat)(),
        I = (0, eR.useAtomValue)(D.title),
        M = (0, m.useT)(),
        { setData: T } = (0, g.useChatHistory)(),
        [L, P] = (0, eR.useAtom)(eB.isSettingsSheetOpenAtom),
        R = (0, eR.useSetAtom)(eB.settingsSheetTabAtom),
        F = S || C,
        _ = (0, e_.useIsChatPage)(),
        {
          activeScope: O,
          hasVercelWritePermission: B,
          user: V,
        } = (0, th.useActiveScope)();
      (e?.projectId,
        (0, x.useMemo)(() => e && e.creatorId === V?.id, [e, V?.id]));
      let { planSlug: z } = (0, tp.usePlanInfo)(!0, O?.id),
        H = "v0-enterprise" === z,
        $ = (0, x.useMemo)(() => b && (0, tb.canBeDeployed)(b), [b]),
        { gwe: U } = (0, tj.useFlags)();
      function G(e) {
        ((0, n.track)("OpenSettingsSheet", { chatId: y, tab: e }), R(e), P(!0));
      }
      let W = "chat" === v,
        q = [
          {
            type: "item",
            Icon: (0, t.jsx)(c.GridSquare, {}),
            label: "Overview",
            onSelect: () => {
              G("overview");
            },
            className: W ? "sm:hidden" : void 0,
          },
          {
            type: "item",
            Icon: (0, t.jsx)(td, { showIcons: F }),
            label: "Integrations",
            onMouseEnter: () => N(!0),
            onMouseLeave: () => N(!1),
            onSelect: () => {
              G("integrations");
            },
            className: W ? "sm:hidden" : void 0,
          },
          {
            type: "item",
            Icon: (0, t.jsx)(s.Variable, {}),
            label: "Env. Variables",
            onSelect: () => {
              G("env");
            },
            className: W ? "sm:hidden" : void 0,
          },
          {
            type: "item",
            Icon: (0, t.jsx)(o.BookClosed, {}),
            label: "Knowledge",
            onSelect: () => {
              G("knowledge");
            },
            className: W ? "sm:hidden" : void 0,
          },
          ...(H
            ? [
                {
                  type: "item",
                  Icon: (0, t.jsx)(l.LockClosed, {}),
                  label: "Password Protection",
                  onSelect: () => {
                    (0, eP.openDialog)({
                      type: "passwordProtection",
                      data: { chatId: y },
                    });
                  },
                },
              ]
            : []),
          ...(y
            ? [
                {
                  type: "item",
                  Icon: (0, t.jsx)(a.Globe, {}),
                  label: "Publish as Template",
                  disabled: !$,
                  disabledReason:
                    "You can only publish previewable apps as templates.",
                  onSelect: () => {
                    let e,
                      { setTemplateAction: t } = (0,
                      tx.getChatDeploymentActions)(y);
                    (k?.ok && k.value
                      ? (t("updated"), (e = "publish-template-changes"))
                      : (t("created"), (e = "template-entry")),
                      (0, eP.openDialog)({
                        type: "templateWizard",
                        data: { chatId: y, initialStage: e },
                      }));
                  },
                },
              ]
            : []),
          ...(B && "_no_chat_" !== y
            ? [
                {
                  type: "item",
                  Icon: (0, t.jsx)(u.ArrowCrossed, {}),
                  label: "Transfer Chat",
                  onSelect: () => {
                    (0, eP.openDialog)({
                      type: "transferChat",
                      data: { chatId: y },
                    });
                  },
                },
              ]
            : []),
        ],
        Z = [
          {
            type: "item",
            Icon: (0, t.jsx)(r.PencilEdit, {}),
            label: M("chatOptionsDropdown.renameChat"),
            onSelect: () => {
              y &&
                ((0, n.track)("RenameChat", { targetChatId: y }),
                (0, eP.openDialog)({
                  type: "updateChatTitle",
                  data: { chatId: y },
                }));
            },
          },
          {
            type: "item",
            Icon: (0, t.jsx)(u.ArrowCrossed, {}),
            label: "Move Chat",
            onSelect: () => {
              y &&
                (0, eP.openDialog)({
                  type: "reassignProject",
                  data: { chatId: y },
                });
            },
          },
          {
            type: "component",
            component: (0, t.jsx)(f.SuspendingFavoriteChatDropdownItem, {
              chat: {
                chatId: y || "NO_CHAT_ID",
                title: I || "",
                favorite: !!A,
                updatedAt: A?.updatedAt || null,
              },
              setChatHistoryData: T,
            }),
          },
          {
            type: "item",
            Icon: (0, t.jsx)(d.Duplicate, {}),
            label: M("duplicateBlockButton.duplicate"),
            disabled: !b || !y,
            disabledReason:
              "Nothing to duplicate yet  try generating an app first",
            onSelect: () => {
              b &&
                y &&
                ((0, n.track)("ClickForkBlock"),
                U
                  ? (0, eP.openDialog)({
                      type: "duplicateChat",
                      data: { chatId: y, blockId: b.id },
                    })
                  : (0, eP.openDialog)({
                      type: "forkBlock",
                      data: {
                        blockId: b.id,
                        page: "chat",
                        canWriteToChat: !0,
                        actionType: "duplicate",
                      },
                    }));
            },
          },
          {
            type: "item",
            Icon: (0, t.jsx)(i.Trash, {}),
            label: M("chatOptionsDropdown.deleteChat"),
            onSelect: () => {
              y &&
                (0, eP.openDialog)({ type: "deleteChat", data: { chatId: y } });
            },
            variant: "destructive",
          },
        ];
      return (0, t.jsxs)(t.Fragment, {
        children: [
          (0, t.jsxs)(h.DropdownMenu, {
            onOpenChange: w,
            open: j,
            modal: !0,
            children: [
              (0, t.jsx)(h.DropdownMenuTrigger, {
                asChild: !0,
                children: (0, t.jsxs)(p.Button, {
                  size: "sm",
                  className: (0, tm.cn)(
                    "h-7 min-w-7 overflow-hidden rounded-[6px] !px-0",
                    !_ && "border-none",
                  ),
                  variant: "secondary",
                  tooltip: "Settings",
                  tooltipDirection: "bottom",
                  children: [
                    (0, t.jsx)(eJ, {}),
                    (0, t.jsx)("span", {
                      className: "sr-only",
                      children: "Settings",
                    }),
                  ],
                }),
              }),
              (0, t.jsxs)(h.DropdownMenuContent, {
                align: "end",
                children: [
                  (0, t.jsxs)(h.DropdownMenuGroup, {
                    children: [
                      (0, t.jsx)(h.DropdownMenuLabel, {
                        children: "Project Settings",
                      }),
                      (0, t.jsx)(tC, { items: q }),
                    ],
                  }),
                  (0, t.jsx)(h.DropdownMenuSeparator, {}),
                  _
                    ? (0, t.jsxs)(h.DropdownMenuGroup, {
                        children: [
                          (0, t.jsx)(h.DropdownMenuLabel, {
                            children: "Chat Settings",
                          }),
                          (0, t.jsx)(tC, { items: Z }),
                        ],
                      })
                    : null,
                ],
              }),
            ],
          }),
          (0, t.jsx)(eT, { isSheetOpen: L, onOpenChange: P, sheetOnly: !0 }),
        ],
      });
    }
    function tC({ items: e }) {
      return (0, t.jsx)(t.Fragment, {
        children: e.map((e) => {
          if ("type" in e && "component" === e.type) return e.component;
          if ("type" in e && "item" === e.type) {
            let { isNew: n, className: r, ...i } = e;
            return (0, t.jsxs)(
              h.DropdownMenuItem,
              {
                className: (0, tm.cn)("cursor-pointer overflow-hidden", r),
                variant: e.variant,
                ...i,
                disabled: e.disabled,
                disabledReason: e.disabledReason,
                children: [
                  e.Icon,
                  e.label,
                  e.isNew
                    ? (0, t.jsx)(tf.Badge, { variant: "blue", children: "New" })
                    : null,
                ],
              },
              String(e.label),
            );
          }
          return null;
        }),
      });
    }
    e.s(["ChatPermissions", () => tV], 865228);
    var tk = t,
      tS = e.i(418625),
      tN = e.i(577483),
      tE = tm,
      tA = e.i(32170),
      tD = eg,
      tI = T,
      tM = Y,
      tT = x,
      tL = _,
      tP = e.i(602544),
      tR = e.i(222431),
      tF = e.i(120485),
      t_ = q,
      tO = h,
      tB = p;
    function tV() {
      let { chatId: e } = (0, tI.useChatId)(),
        {
          data: t,
          isLoading: n,
          mutate: r,
        } = (0, tS.default)(
          e ? `/api/chat/${e}/permissions` : null,
          tE.fetcher,
        ),
        i = (0, tT.useRef)(null),
        [s, a] = (0, tT.useState)(!1),
        [o, l] = (0, tT.useState)(!1);
      return ((0, tT.useEffect)(() => {
        let e = i.current;
        if (!e) return;
        let t = () => {
          (a(e.scrollTop > 0),
            l(e.scrollHeight - e.scrollTop > e.clientHeight + 1));
        };
        return (
          t(),
          e.addEventListener("scroll", t),
          () => e.removeEventListener("scroll", t)
        );
      }, [n]),
      n)
        ? (0, tk.jsxs)("div", {
            className: "flex items-center gap-2 h-10",
            children: [
              (0, tk.jsx)(tM.Skeleton, { className: "rounded-full size-8" }),
              (0, tk.jsxs)("div", {
                children: [
                  (0, tk.jsx)("div", {
                    className: "h-5 flex items-center",
                    children: (0, tk.jsx)(tM.Skeleton, {
                      className: "h-4 w-32",
                    }),
                  }),
                  (0, tk.jsx)("div", {
                    className: "h-5 flex items-center",
                    children: (0, tk.jsx)(tM.Skeleton, {
                      className: "h-4 w-48",
                    }),
                  }),
                ],
              }),
            ],
          })
        : (0, tk.jsxs)("div", {
            className: "relative max-h-72",
            children: [
              (0, tk.jsx)("div", {
                className: (0, t_.cn)(
                  "pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",
                  s ? "opacity-100" : "opacity-0",
                ),
              }),
              (0, tk.jsx)("div", {
                className: "max-h-72 overflow-y-auto space-y-2",
                ref: i,
                children: t?.map((e) =>
                  (0, tk.jsx)(
                    tz,
                    { permission: e, mutate: r },
                    "author" === e.type ? "author" : e.permissionId,
                  ),
                ),
              }),
              (0, tk.jsx)("div", {
                className: (0, t_.cn)(
                  "pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",
                  o ? "opacity-100" : "opacity-0",
                ),
              }),
            ],
          });
    }
    function tz({ permission: e, mutate: t }) {
      let { user: n } = (0, tA.useUser)(),
        { chatId: r } = (0, tI.useChatId)(),
        i = (0, tT.useCallback)(
          (n) => {
            t(
              async (t) => {
                if (!r || "author" === e.type) throw Error();
                let i = await fetch(
                  `/api/chat/${r}/permissions/${e.permissionId}`,
                  {
                    method: "remove" === n ? "DELETE" : "PATCH",
                    headers: { "Content-Type": "application/json" },
                    body:
                      "remove" === n
                        ? void 0
                        : JSON.stringify({ permission: n }),
                  },
                );
                if (!i.ok) {
                  let e = Error(await i.text());
                  throw (
                    (0, tF.handleChatError)(e) ||
                      tL.toast.error("Failed to update permission"),
                    e
                  );
                }
                return ((0, tN.mutate)(
                  (e) =>
                    "string" == typeof e &&
                    e.startsWith(`/api/chat/${r}/permissions/search`),
                  void 0,
                  { revalidate: !1 },
                ),
                "remove" === n)
                  ? t?.filter(
                      (t) =>
                        "author" === t.type ||
                        t.permissionId !== e.permissionId,
                    )
                  : t?.map((t) =>
                      "author" === t.type || t.permissionId !== e.permissionId
                        ? t
                        : { ...t, permission: n },
                    );
              },
              {
                optimisticData: (t) =>
                  t
                    ? "author" === e.type
                      ? t
                      : "remove" === n
                        ? t.filter(
                            (t) =>
                              "author" === t.type ||
                              t.permissionId !== e.permissionId,
                          )
                        : t.map((t) =>
                            "author" === t.type ||
                            t.permissionId !== e.permissionId
                              ? t
                              : { ...t, permission: n },
                          )
                    : [],
              },
            );
          },
          [r, t, e],
        );
      return (0, tk.jsxs)("div", {
        className: "flex items-center gap-2",
        children: [
          (0, tk.jsxs)("div", {
            className: "grow flex items-center gap-2",
            children: [
              (0, tk.jsx)(tD.AvatarUser, { userId: e.userId, rounded: !0 }),
              (0, tk.jsxs)("div", {
                children: [
                  (0, tk.jsxs)("div", {
                    className: "text-sm font-medium",
                    children: [
                      (0, tk.jsx)("span", { children: e.name || e.username }),
                      e.userId === n?.id
                        ? (0, tk.jsx)("span", { children: " (you)" })
                        : null,
                    ],
                  }),
                  (0, tk.jsx)("div", {
                    className: "text-sm text-v0-gray-900",
                    children: e.email,
                  }),
                ],
              }),
            ],
          }),
          (0, tk.jsxs)(tO.DropdownMenu, {
            children: [
              (0, tk.jsx)(tO.DropdownMenuTrigger, {
                disabled: "author" === e.type,
                asChild: !0,
                children: (0, tk.jsxs)(tB.Button, {
                  variant: "outline",
                  size: "xs",
                  className: "font-normal gap-1 rounded-sm",
                  children: [
                    (0, tk.jsx)("span", { children: tH(e) }),
                    (0, tk.jsx)("div", {
                      className: (0, t_.cn)(
                        "size-4 flex items-center justify-center text-v0-gray-900",
                        "author" === e.type && "text-v0-gray-500",
                      ),
                      children: (0, tk.jsx)(tR.ChevronDown, {
                        className: "size-3",
                      }),
                    }),
                  ],
                }),
              }),
              (0, tk.jsx)(tO.DropdownMenuContent, {
                align: "end",
                children:
                  "author" === e.type
                    ? null
                    : (0, tk.jsxs)(tk.Fragment, {
                        children: [
                          (0, tk.jsxs)(tO.DropdownMenuGroup, {
                            className: "p-1.5",
                            children: [
                              (0, tk.jsxs)(tO.DropdownMenuItem, {
                                onSelect: () => i("view"),
                                className: "px-2 py-1.5 h-auto gap-8",
                                children: [
                                  (0, tk.jsxs)("div", {
                                    children: [
                                      (0, tk.jsx)("div", {
                                        className: "font-medium",
                                        children: "Can View",
                                      }),
                                      (0, tk.jsx)("div", {
                                        className: "text-v0-gray-900",
                                        children:
                                          "View chat and project information",
                                      }),
                                    ],
                                  }),
                                  "view" === e.permission
                                    ? (0, tk.jsx)(tP.Check, {
                                        className: "size-4",
                                      })
                                    : null,
                                ],
                              }),
                              (0, tk.jsxs)(tO.DropdownMenuItem, {
                                onSelect: () => i("edit"),
                                className: "px-2 py-1.5 h-auto gap-8",
                                children: [
                                  (0, tk.jsxs)("div", {
                                    children: [
                                      (0, tk.jsx)("div", {
                                        className: "font-medium",
                                        children: "Can Edit",
                                      }),
                                      (0, tk.jsx)("div", {
                                        className: "text-v0-gray-900",
                                        children:
                                          "Edit chat and project information",
                                      }),
                                    ],
                                  }),
                                  "edit" === e.permission
                                    ? (0, tk.jsx)(tP.Check, {
                                        className: "size-4",
                                      })
                                    : null,
                                ],
                              }),
                            ],
                          }),
                          (0, tk.jsx)(tO.DropdownMenuSeparator, {}),
                          (0, tk.jsx)(tO.DropdownMenuGroup, {
                            className: "p-1.5",
                            children: (0, tk.jsx)(tO.DropdownMenuItem, {
                              variant: "destructive",
                              onSelect: () => i("remove"),
                              className: "px-2 py-1.5 h-auto",
                              children: "Remove",
                            }),
                          }),
                        ],
                      }),
              }),
            ],
          }),
        ],
      });
    }
    function tH(e) {
      if ("author" === e.type) return "Owner";
      switch (e.permission) {
        case "view":
          return "Can View";
        case "edit":
          return "Can Edit";
      }
    }
    var t$ = e.i(919012),
      tU = (0, t$.createServerReference)(
        "40303d5b1cc2911618e5abdc00afe1472d94f2c8ed",
        t$.callServer,
        void 0,
        t$.findSourceMapURL,
        "updateChatPrivacy",
      );
    e.s(["updateChatPrivacy", () => tU], 74312);
  },
  344290,
  907116,
  365449,
  867160,
  14791,
  416959,
  (e) => {
    "use strict";
    e.s(["ChatShareButton", () => eN], 344290);
    var t = e.i(324834),
      n = e.i(574768),
      r = e.i(576191);
    e.s(["ChatSharePopoverContent", () => G], 907116);
    var i = t,
      s = e.i(227152),
      a = e.i(926297),
      o = e.i(602544),
      l = e.i(654335),
      c = r,
      u = e.i(176248),
      d = e.i(707974),
      h = e.i(297239),
      p = e.i(504066);
    e.i(563948);
    var m = e.i(407562),
      f = e.i(865228),
      g = t,
      x = o,
      v = e.i(222431),
      y = e.i(903500),
      b = a,
      j = e.i(802008),
      w = r,
      C = e.i(230766),
      k = e.i(592258),
      S = e.i(74312),
      N = e.i(667660),
      E = e.i(120485),
      A = m,
      D = e.i(209819),
      I = e.i(92479),
      M = e.i(53223),
      T = e.i(714249),
      L = e.i(556355),
      P = u;
    function R() {
      let { isTeam: e, activeScope: t } = (0, N.useActiveScope)(),
        { chatId: n } = (0, I.useChatId)(),
        { chatPrivacy: r, setChatPrivacy: i } = (0, D.useChatPrivacy)(),
        { settings: s } = (0, T.useTeamSettings)(),
        a = (0, w.useCallback)(
          (e) => {
            !(async function () {
              if (n)
                try {
                  (await i(
                    async () => {
                      ("public" === e || "team" === e) &&
                        (0, M.track)("ShareChat", {
                          targetChatId: n,
                          team: "team" === e,
                        });
                      let t = await (0, S.updateChatPrivacy)({
                        chatId: n,
                        privacy: e,
                      });
                      if (!t.success) throw Error(t.error);
                      return e;
                    },
                    { optimisticData: e },
                  ),
                    A.toast.success("Chat privacy updated"));
                } catch (e) {
                  (0, E.handleChatError)(e) ||
                    A.toast.error("Failed to update chat visibility");
                }
            })();
          },
          [i, n],
        );
      return (0, g.jsxs)("div", {
        className: "flex items-center gap-2",
        children: [
          (0, g.jsxs)(k.Select, {
            value: "team-edit" === r ? "team" : r,
            onValueChange: a,
            children: [
              (0, g.jsx)(k.SelectTrigger, {
                className:
                  "grow h-8 [&_svg]:text-v0-gray-1000! px-2 hover:border-v0-alpha-500",
                children: (0, g.jsx)(k.SelectValue, {}),
              }),
              (0, g.jsxs)(k.SelectContent, {
                children: [
                  (0, g.jsx)(k.SelectItem, {
                    value: "private",
                    iconOnRight: !0,
                    className:
                      "text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",
                    children: (0, g.jsxs)("div", {
                      className: "flex items-center gap-2",
                      children: [
                        (0, g.jsx)(j.LockClosed, {}),
                        (0, g.jsx)("span", {
                          className: "text-v0-gray-1000",
                          children: e ? "Only people with access" : "Private",
                        }),
                      ],
                    }),
                  }),
                  e &&
                    (0, g.jsx)(k.SelectItem, {
                      value: "team",
                      iconOnRight: !0,
                      className: "px-2",
                      children: (0, g.jsxs)("div", {
                        className: "flex items-center gap-2",
                        children: [
                          (0, g.jsx)(C.AvatarUser, {
                            size: "xs",
                            rounded: !0,
                            teamId: t?.id,
                          }),
                          (0, g.jsxs)("div", {
                            className: "grow text-start max-w-52 truncate",
                            children: [
                              "Everyone",
                              " ",
                              t?.name
                                ? (0, g.jsxs)(g.Fragment, {
                                    children: ["at ", t.name],
                                  })
                                : (0, g.jsx)(g.Fragment, {
                                    children: "on team",
                                  }),
                            ],
                          }),
                        ],
                      }),
                    }),
                  !s?.disablePublicSharing &&
                    (0, g.jsxs)(g.Fragment, {
                      children: [
                        (0, g.jsx)(k.SelectItem, {
                          value: "unlisted",
                          iconOnRight: !0,
                          className:
                            "text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",
                          children: (0, g.jsxs)("div", {
                            className: "flex items-center gap-2",
                            children: [
                              (0, g.jsx)(b.Link, {}),
                              (0, g.jsx)("span", {
                                className: "text-v0-gray-1000",
                                children: "Anyone with the link",
                              }),
                            ],
                          }),
                        }),
                        (0, g.jsx)(k.SelectItem, {
                          value: "public",
                          iconOnRight: !0,
                          className:
                            "text-v0-gray-1000 data-[state=checked]:text-primary data-highlighted:text-v0-gray-1000 px-2",
                          children: (0, g.jsxs)("div", {
                            className: "flex items-center gap-2",
                            children: [
                              (0, g.jsx)(y.Globe, {}),
                              (0, g.jsx)("span", {
                                className: "text-v0-gray-1000",
                                children: "Anyone on the web",
                              }),
                            ],
                          }),
                        }),
                      ],
                    }),
                ],
              }),
            ],
          }),
          "private" !== r &&
            (0, g.jsxs)(L.DropdownMenu, {
              children: [
                (0, g.jsx)(L.DropdownMenuTrigger, {
                  asChild: !0,
                  disabled: "unlisted" === r || "public" === r,
                  children: (0, g.jsxs)(P.Button, {
                    variant: "outline",
                    size: "sm",
                    className:
                      "font-normal justify-between rounded-md min-w-[120px]",
                    children: [
                      (0, g.jsxs)("span", {
                        children: ["Can ", "team-edit" === r ? "Edit" : "View"],
                      }),
                      (0, g.jsx)("div", {
                        className:
                          "size-4 flex items-center justify-center text-v0-gray-900",
                        children: (0, g.jsx)(v.ChevronDown, {
                          className: "size-3",
                        }),
                      }),
                    ],
                  }),
                }),
                (0, g.jsxs)(L.DropdownMenuContent, {
                  align: "end",
                  className: "p-1",
                  children: [
                    (0, g.jsxs)(L.DropdownMenuItem, {
                      onSelect: () => a("team"),
                      className: "px-2 py-1.5 h-auto gap-8",
                      children: [
                        (0, g.jsxs)("div", {
                          children: [
                            (0, g.jsx)("div", {
                              className: "font-medium",
                              children: "Can View",
                            }),
                            (0, g.jsx)("div", {
                              className: "text-v0-gray-900",
                              children: "View chat and project information",
                            }),
                          ],
                        }),
                        "team" === r
                          ? (0, g.jsx)(x.Check, { className: "size-4" })
                          : null,
                      ],
                    }),
                    (0, g.jsxs)(L.DropdownMenuItem, {
                      onSelect: () => a("team-edit"),
                      className: "px-2 py-1.5 h-auto gap-8",
                      children: [
                        (0, g.jsxs)("div", {
                          children: [
                            (0, g.jsx)("div", {
                              className: "font-medium",
                              children: "Can Edit",
                            }),
                            (0, g.jsx)("div", {
                              className: "text-v0-gray-900",
                              children: "Edit chat and project information",
                            }),
                          ],
                        }),
                        "team-edit" === r
                          ? (0, g.jsx)(x.Check, { className: "size-4" })
                          : null,
                      ],
                    }),
                  ],
                }),
              ],
            }),
        ],
      });
    }
    var F = N,
      _ = t,
      O = e.i(107296),
      B = e.i(710825);
    function V() {
      return (0, _.jsxs)(O.Alert, {
        variant: "default",
        className:
          "relative flex flex-row gap-1 rounded-md border-none bg-v0-gray-100 px-2 py-1.5",
        children: [
          (0, _.jsx)("div", {
            className:
              "absolute left-[9px] top-1/2 -translate-y-1/2 text-v0-gray-900",
            children: (0, _.jsx)(B.Information, { className: "h-4 w-4" }),
          }),
          (0, _.jsx)(O.AlertDescription, {
            className: "ml-6 text-v0-gray-1000",
            children:
              "Viewers will have access to all code and assets in this chat. Public chats may appear in search results.",
          }),
        ],
      });
    }
    var z = D,
      H = e.i(515734),
      $ = I,
      U = M;
    function G({ onSearch: e }) {
      let t = (0, h.useT)(),
        { copyToClipboard: n, isCopied: r } = (0, p.useCopyToClipboard)({
          timeout: 2e3,
        }),
        { isTeam: g } = (0, F.useActiveScope)(),
        { chatId: x } = (0, $.useChatId)(),
        { chatPrivacy: v } = (0, z.useChatPrivacy)(),
        { link: y, affiliate: b } = (0, H.useReferralLink)(
          window.location.href,
        ),
        j = (0, c.useCallback)(() => {
          ((0, U.track)("CopyShareLink", { chatId: x }),
            n(new URL(y || window.location.href).toString()),
            m.toast.success(
              b ? "Affiliate link copied!" : "Share link copied!",
            ));
        }, [x, n, y, b]);
      return (0, i.jsxs)("div", {
        className: "space-y-4 pt-4",
        children: [
          (0, i.jsxs)("div", {
            className: "space-y-2 px-4",
            children: [
              g &&
                (0, i.jsx)("button", {
                  className:
                    "border w-full h-8 rounded-md text-left text-v0-gray-500 text-label-14 px-2 hover:border-v0-alpha-500",
                  onClick: e,
                  children: "Search for a user",
                }),
              (0, i.jsxs)("div", {
                className: "space-y-2",
                children: [
                  (0, i.jsx)(d.Label, {
                    className: "h-[30px] flex items-center font-medium",
                    asChild: !0,
                    children: (0, i.jsx)("div", {
                      children: "People with access",
                    }),
                  }),
                  (0, i.jsx)(f.ChatPermissions, {}),
                ],
              }),
              (0, i.jsx)(d.Label, {
                className: "h-[30px] flex items-center font-medium",
                asChild: !0,
                children: (0, i.jsx)("div", { children: "Visibility" }),
              }),
              (0, i.jsx)(R, {}),
              "public" === v && (0, i.jsx)(V, {}),
            ],
          }),
          (0, i.jsxs)("div", {
            className: "border-t flex items-center justify-between p-4",
            children: [
              (0, i.jsxs)("div", {
                className: "flex items-center gap-1",
                children: [
                  (0, i.jsx)(s.InformationFillSmall, {
                    className: "text-v0-gray-900",
                  }),
                  (0, i.jsx)(l.default, {
                    href: "/docs/teams#sharing-projects",
                    target: "_blank",
                    className:
                      "text-sm text-v0-gray-900 hover:text-v0-gray-1000",
                    children: "How does sharing chats work?",
                  }),
                ],
              }),
              (0, i.jsxs)(u.Button, {
                variant: "secondary",
                onClick: j,
                className: "h-8 rounded-md px-1.5 gap-0",
                children: [
                  r ? (0, i.jsx)(o.Check, {}) : (0, i.jsx)(a.Link, {}),
                  (0, i.jsx)("span", {
                    className: "px-1.5",
                    children: t("shareDialog.copyLink"),
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    var W = u,
      q = e.i(409182),
      Z = h;
    e.s(["ChatPermissionsSearch", () => ey], 867160);
    var K = t,
      Y = e.i(228141),
      J = e.i(672001),
      Q = u,
      X = I,
      ee = e.i(610726),
      et = e.i(418625),
      en = e.i(577483),
      er = k,
      ei = r,
      es = e.i(403055),
      ea = C,
      eo = e.i(762585),
      el = e.i(707827),
      ec = m,
      eu = E,
      ed = e.i(794593),
      eh = e.i(304649),
      ep = t,
      em = e.i(457918),
      ef = u;
    let eg = ({ onBack: e, title: t }) =>
      (0, ep.jsx)("div", {
        className: "px-2.5 py-1.5 border-b",
        children: (0, ep.jsxs)(ef.Button, {
          size: "sm",
          variant: "ghost",
          onClick: e,
          className: "hover:bg-transparent px-0!",
          children: [(0, ep.jsx)(em.ChevronLeft, {}), t],
        }),
      });
    e.s(["default", 0, eg], 365449);
    var ex = e.i(969372);
    function ev({ className: e }) {
      return (0, K.jsxs)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "none",
        className: e,
        children: [
          (0, K.jsx)("g", {
            clipPath: "url(#clip0_13783_5431)",
            children: (0, K.jsx)("path", {
              d: "M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5Z",
              fill: "currentColor",
            }),
          }),
          (0, K.jsx)("defs", {
            children: (0, K.jsx)("clipPath", {
              id: "clip0_13783_5431",
              children: (0, K.jsx)("rect", {
                width: "16",
                height: "16",
                fill: "white",
              }),
            }),
          }),
        ],
      });
    }
    function ey({ onBack: e }) {
      let { chatId: t } = (0, X.useChatId)(),
        [n, r] = (0, ei.useState)(""),
        [i] = (0, ee.useDebounceValue)(n, 500),
        s = new URLSearchParams();
      i && s.set("q", i);
      let {
          data: a,
          isLoading: o,
          mutate: l,
        } = (0, et.default)(
          t ? `/api/chat/${t}/permissions/search?${s.toString()}` : null,
          es.fetcher,
        ),
        c = (0, ei.useRef)(null),
        [u, d] = (0, ei.useState)("view"),
        [h, p] = (0, ei.useState)([]),
        [m, f] = (0, ei.useState)(!1),
        g = (0, ei.useCallback)(async () => {
          f(!0);
          let n = await fetch(`/api/chat/${t}/permissions`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(
              h.map(({ userId: e }) => ({ userId: e, permission: u })),
            ),
          });
          if (!n.ok) {
            f(!1);
            let e = Error(await n.text());
            (0, eu.handleChatError)(e) ||
              ec.toast.error("Failed to send invite");
            return;
          }
          (await Promise.all([
            (0, en.mutate)(
              (e) => "string" == typeof e && e === `/api/chat/${t}/permissions`,
              (e) =>
                (e ?? []).concat(
                  ...h.map((e) => ({
                    permissionId: `optimistic-${e.userId}`,
                    type: "user",
                    userId: e.userId,
                    name: e.name,
                    username: e.username,
                    email: e.email,
                    avatarUrl: e.avatarUrl,
                    permission: u,
                  })),
                ),
            ),
            l(void 0, { revalidate: !1 }),
          ]),
            e());
        }, [t, h, u, l, e]),
        x = (0, ei.useRef)(null),
        [v, y] = (0, ei.useState)(!1),
        [b, j] = (0, ei.useState)(!1);
      return (
        (0, ei.useEffect)(() => {
          let e = x.current;
          if (!e) return;
          let t = () => {
            (y(e.scrollTop > 0),
              j(e.scrollHeight - e.scrollTop > e.clientHeight + 1));
          };
          return (
            t(),
            e.addEventListener("scroll", t),
            () => e.removeEventListener("scroll", t)
          );
        }, [o]),
        (0, K.jsxs)("div", {
          children: [
            (0, K.jsx)(eg, { onBack: e, title: "Invite Users" }),
            (0, K.jsxs)("div", {
              className: "space-y-2 px-4 py-4",
              children: [
                (0, K.jsxs)("div", {
                  className: "flex gap-2",
                  children: [
                    (0, K.jsx)("div", {
                      className: "grow",
                      children: (0, K.jsx)(eb, {
                        search: n,
                        setSearch: r,
                        selectedUsers: h,
                        onRemove: (e) => {
                          p(h.filter((t) => t.userId !== e));
                        },
                        inputRef: c,
                      }),
                    }),
                    (0, K.jsx)("div", {
                      className: "flex-shrink-0",
                      children: (0, K.jsxs)(er.Select, {
                        value: u,
                        onValueChange: d,
                        children: [
                          (0, K.jsxs)(er.SelectTrigger, {
                            className:
                              "h-8 rounded-md gap-2 pr-1.5 w-auto min-w-fit",
                            hideChevron: !0,
                            children: [
                              (0, K.jsx)(er.SelectValue, {}),
                              (0, K.jsx)(ex.ChevronDownSmall, {}),
                            ],
                          }),
                          (0, K.jsxs)(er.SelectContent, {
                            children: [
                              (0, K.jsx)(er.SelectItem, {
                                value: "view",
                                children: "Can View",
                              }),
                              (0, K.jsx)(er.SelectItem, {
                                value: "edit",
                                children: "Can Edit",
                              }),
                            ],
                          }),
                        ],
                      }),
                    }),
                  ],
                }),
                (0, K.jsx)("div", {
                  className: "pb-2",
                  children: o
                    ? (0, K.jsx)("div", {
                        className: "space-y-2",
                        children: [, , , , ,]
                          .fill(null)
                          .map((e, t) =>
                            (0, K.jsxs)(
                              "div",
                              {
                                className: "flex items-center gap-2",
                                children: [
                                  (0, K.jsx)(eo.Skeleton, {
                                    className: "size-8 rounded-full",
                                  }),
                                  (0, K.jsxs)("div", {
                                    children: [
                                      (0, K.jsx)("div", {
                                        className: "h-5 flex items-center",
                                        children: (0, K.jsx)(eo.Skeleton, {
                                          className: "h-4 w-32",
                                        }),
                                      }),
                                      (0, K.jsx)("div", {
                                        className: "h-5 flex items-center",
                                        children: (0, K.jsx)(eo.Skeleton, {
                                          className: "h-4 w-48",
                                        }),
                                      }),
                                    ],
                                  }),
                                ],
                              },
                              t,
                            ),
                          ),
                      })
                    : a?.length
                      ? (0, K.jsxs)("div", {
                          className: "relative max-h-[232px]",
                          children: [
                            (0, K.jsx)("div", {
                              className: (0, eh.cn)(
                                "pointer-events-none absolute top-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-b from-background via-background/30 to-transparent",
                                v ? "opacity-100" : "opacity-0",
                              ),
                            }),
                            (0, K.jsx)("div", {
                              ref: x,
                              className:
                                "max-h-[232px] overflow-y-auto space-y-2",
                              children: a.map((e) =>
                                (0, K.jsxs)(
                                  "button",
                                  {
                                    className:
                                      "flex items-center justify-between w-full text-left",
                                    onClick: () => {
                                      h.some((t) => t.userId === e.userId)
                                        ? p(
                                            h.filter(
                                              (t) => t.userId !== e.userId,
                                            ),
                                          )
                                        : (p(h.concat(e)),
                                          r(""),
                                          c.current?.focus());
                                    },
                                    children: [
                                      (0, K.jsxs)("div", {
                                        className:
                                          "flex items-center gap-2 h-10",
                                        children: [
                                          (0, K.jsx)(ea.AvatarUser, {
                                            userId: e.userId,
                                            rounded: !0,
                                          }),
                                          (0, K.jsxs)("div", {
                                            className: "text-sm",
                                            children: [
                                              (0, K.jsx)("div", {
                                                className: "font-medium",
                                                children: e.name || e.username,
                                              }),
                                              (0, K.jsx)("div", {
                                                className: "text-v0-gray-900",
                                                children: e.email,
                                              }),
                                            ],
                                          }),
                                        ],
                                      }),
                                      h.some((t) => t.userId === e.userId)
                                        ? (0, K.jsx)(Y.CheckCircleFill, {
                                            className: "!text-v0-blue-700",
                                          })
                                        : (0, K.jsx)(ev, {
                                            className: "text-v0-gray-300",
                                          }),
                                    ],
                                  },
                                  e.userId,
                                ),
                              ),
                            }),
                            (0, K.jsx)("div", {
                              className: (0, eh.cn)(
                                "pointer-events-none absolute bottom-0 left-0 right-0 h-6 z-10 transition-opacity bg-gradient-to-t from-background via-background/30 to-transparent",
                                b ? "opacity-100" : "opacity-0",
                              ),
                            }),
                          ],
                        })
                      : (0, K.jsx)("div", {
                          className: "mt-5 text-sm text-v0-gray-900",
                          children: "No results",
                        }),
                }),
              ],
            }),
            (0, K.jsx)("div", {
              className: "bg-v0-background-200 border-t p-4",
              children: (0, K.jsxs)(Q.Button, {
                disabled: 0 === h.length || m,
                size: "sm",
                className: "w-full",
                onClick: g,
                children: [
                  m && (0, K.jsx)(el.Spinner, {}),
                  (0, K.jsx)("span", { children: "Invite" }),
                ],
              }),
            }),
          ],
        })
      );
    }
    function eb({
      search: e,
      setSearch: t,
      selectedUsers: n,
      onRemove: r,
      inputRef: i,
    }) {
      return (0, K.jsxs)("div", {
        className:
          "bg-v0-background-100 focus-within:border-v0-alpha-500 disabled:border-v0-alpha-400 flex flex-wrap gap-0.5 w-full shrink-0 items-center rounded-md border p-0.5 outline-hidden transition-all disabled:pointer-events-none disabled:bg-v0-gray-100 disabled:text-v0-gray-500 h-auto min-h-8",
        children: [
          n.map((e) =>
            (0, K.jsx)(
              ed.Badge,
              {
                prefix: (0, K.jsx)("button", {
                  className: "p-1 cursor-pointer",
                  onClick: () => r(e.userId),
                  children: (0, K.jsx)(J.CrossSmall, {}),
                }),
                children: e.name || e.email,
              },
              e.userId,
            ),
          ),
          (0, K.jsx)("input", {
            className:
              "text-label-14 bg-transparent outline-hidden file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-v0-gray-500 disabled:cursor-not-allowed disabled:text-v0-gray-500 flex-1 min-w-20 h-6 px-1.5",
            placeholder: 0 === n.length ? "Search for a user" : "",
            value: e,
            onChange: (e) => t(e.target.value),
            autoFocus: !0,
            ref: i,
          }),
        ],
      });
    }
    var ej = p,
      ew = m,
      eC = e.i(819969),
      ek = e.i(393799);
    function eS() {
      let e = (0, Z.useT)(),
        { copyToClipboard: n } = (0, ej.useCopyToClipboard)({ timeout: 2e3 }),
        i = (0, r.useCallback)(() => {
          (n(window.location.href), ew.toast.success("Share link copied!"));
        }, [n]);
      return (0, t.jsx)(W.Button, {
        variant: "secondary",
        className: "h-7 rounded-md px-2",
        size: "sm",
        onClick: i,
        children: e("shareDialog.share"),
      });
    }
    function eN() {
      let e = (0, Z.useT)(),
        { atoms: i } = (0, eC.useCurrentChat)(),
        s = (0, ek.useAtomValue)(i.canWriteToChat),
        [a, o] = (0, r.useState)(!1);
      return s
        ? (0, t.jsxs)(n.Popover, {
            onOpenChange: (e) => {
              e && o(!1);
            },
            children: [
              (0, t.jsx)(n.PopoverTrigger, {
                asChild: !0,
                children: (0, t.jsxs)(W.Button, {
                  className: "h-7 rounded-md sm:px-2 sm:w-fit w-7",
                  size: "sm",
                  "data-testid": "share-block-button",
                  variant: "secondary",
                  children: [
                    (0, t.jsx)("span", {
                      className: "sm:block hidden",
                      children: e("shareDialog.share"),
                    }),
                    (0, t.jsx)("span", {
                      className: "sm:hidden block",
                      children: (0, t.jsx)(q.Share, {}),
                    }),
                  ],
                }),
              }),
              (0, t.jsx)(n.PopoverContent, {
                className: "w-[440px] max-w-screen origin-top-right",
                align: "end",
                alignOffset: 1,
                withOverlay: !0,
                children: a
                  ? (0, t.jsx)(ey, { onBack: () => o(!1) })
                  : (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)("div", {
                          className: "px-2.5 py-1.5 border-b",
                          children: (0, t.jsx)("div", {
                            className:
                              "h-8 flex items-center pl-2 text-sm font-medium",
                            children: "Share",
                          }),
                        }),
                        (0, t.jsx)(G, { onSearch: () => o(!0) }),
                      ],
                    }),
              }),
            ],
          })
        : (0, t.jsx)(eS, {});
    }
    var eE = t,
      eA = e.i(89440),
      eD = ek,
      eI = e.i(365290),
      eM = e.i(691701);
    e.i(180367);
    var eT = Y,
      eL = e.i(361103),
      eP = y,
      eR = el,
      eF = es,
      e_ = e.i(470259),
      eO = r,
      eB = e.i(675120),
      eV = e.i(373998),
      ez = e.i(857371),
      eH = M,
      e$ = e.i(996174),
      eU = h,
      eG = e.i(758118);
    let eW = (0, eA.cva)(
        "group relative flex h-7 cursor-pointer! items-center justify-center overflow-hidden whitespace-nowrap rounded-[6px] border px-0 w-7 sm:w-fit sm:px-2 sm:pr-2.5 font-medium",
        {
          variants: {
            variant: {
              primary:
                "text-v0-background-100 border-v0-gray-1000 bg-v0-gray-1000 hover:border-v0-gray-1000 hover:bg-v0-gray-1000",
              secondary:
                "bg-v0-background-300 hover:border-v0-alpha-400 border-v0-gray-200 text-v0-gray-1000 hover:bg-v0-gray-200",
              blue: "text-v0-background-100 border-v0-blue-700 bg-v0-blue-700",
              red: "text-v0-background-100 border-v0-red-700 bg-v0-red-700",
            },
          },
        },
      ),
      eq = (0, eA.cva)(
        "border-v0-background-200 h-3 min-h-3 w-3 min-w-3 rounded-full border-[1.5px]",
        {
          variants: {
            variant: { success: "bg-v0-blue-700", error: "bg-v0-red-700" },
          },
        },
      );
    function eZ({ chatId: e, ...t }) {
      let n = (0, eV.getChatDeploymentAtoms)(e),
        r = (0, eD.useAtomValue)(n.statusDotVariant),
        i = (0, eD.useAtomValue)(n.buttonVariant),
        s = (0, eU.useT)();
      return (0, eE.jsxs)("div", {
        className: "text-label-14 relative",
        children: [
          (0, eE.jsx)(e$.Tooltip, {
            side: "bottom",
            content: s("deployBlockPopover.deployToVercel"),
            children: (0, eE.jsx)("button", {
              "data-testid": "deploy-block-button",
              className: (0, eF.cn)(eW({ variant: i }), t.className),
              style: {
                ...(0, eI.transitionStyles)([
                  "background",
                  "color",
                  "border-color",
                ]),
                ...t.style,
              },
              ...t,
              children: (0, eE.jsx)(eY, { chatId: e }),
            }),
          }),
          (0, eE.jsx)("div", {
            className: "absolute right-[-5px] top-[-4px]",
            children: (0, eE.jsx)("div", {
              className: eq({ variant: r }),
              style: {
                transform: r
                  ? "scale(1) translate(0px, 0px)"
                  : "scale(0.7) translate(-2px, 2px)",
                ...(0, eG.visibleStylesIf)(!!r),
                ...(0, eI.transitionStyles)(
                  ["opacity", "transform", "background"],
                  { duration: 200 },
                ),
              },
            }),
          }),
        ],
      });
    }
    function eK({ chatId: e }) {
      let t = (0, eV.getChatDeploymentAtoms)(e),
        n = (0, eD.useAtomValue)(t.deploymentState),
        r = (0, ez.usePreviousValue)(n),
        i = (0, eD.useAtomValue)(t.externalMeta),
        s = i.ok ? i.value.deployment : void 0,
        a = i.ok ? i.value.git : void 0,
        o = (0, eD.useAtomValue)(t.deployButtonClickedAtTimestamp),
        l = (0, eD.useAtomValue)(t.deployCreationStartTimestamp),
        c = (0, eD.useAtomValue)(t.deployCreationEndTimestamp);
      (0, eO.useEffect)(() => {
        if (!o || !l || !c || !r || !s?.id) return;
        let e = Date.now();
        "building" === n
          ? (0, eH.track)("DeployStartedBuild", {
              msSinceDeployClick: e - o,
              msStepPreDeploy: l - o,
              msStepDeploy: c - l,
              msStepPostDeploy: e - c,
              deploymentState: n,
              previousDeploymentState: r,
              targetDeploymentId: s.id,
              deploymentSource: a && "sha" in a ? "git" : "api",
            })
          : "deployed" === n &&
            (0, eH.track)("DeployFinishedBuild", {
              msSinceDeployClick: e - o,
              msStepPostDeploy: e - c,
              deploymentState: n,
              previousDeploymentState: r,
              targetDeploymentId: s.id,
              deploymentSource: a && "sha" in a ? "git" : "api",
            });
      }, [r, n, o, l, c, s?.id, a]);
    }
    function eY({ chatId: e }) {
      let t = (0, eV.getChatDeploymentAtoms)(e),
        n = (0, eD.useAtomValue)(t.deploymentState),
        r = (0, eD.useAtomValue)(t.passingState),
        i = (0, eD.useAtomValue)(t.hasDeployableChanges),
        s = (0, eD.useAtomValue)(t.externalMeta),
        a = (0, eU.useT)();
      eK({ chatId: e });
      let o = (0, eO.useMemo)(() => {
        if (!s.ok && s.error.errorCode !== e_.NOT_FOUND)
          return {
            icon: (0, eE.jsx)("span", {
              className: "text-v0-red-700",
              children: (0, eE.jsx)(eL.StopFill, {}),
            }),
            text: a("deployBlockPopover.deploy"),
          };
        if (r)
          switch (r) {
            case "passing-deployed":
              return {
                icon: (0, eE.jsx)("span", {
                  className: "text-v0-blue-700",
                  children: (0, eE.jsx)(eT.CheckCircleFill, {}),
                }),
                text: a("deployBlockPopover.deploy"),
              };
            case "passing-error":
              return {
                icon: (0, eE.jsx)("span", {
                  className:
                    "text-v0-background-100 flex items-center justify-center",
                  children: (0, eE.jsx)(eM.Stop, {}),
                }),
                text: void 0,
              };
          }
        switch (n) {
          case "not-deployed":
          case "deployed":
          case "failed":
            if (!i && "failed" === n)
              return {
                icon: (0, eE.jsx)(eM.Stop, {}),
                text: a("deployBlockPopover.deploy"),
              };
            return { icon: void 0, text: a("deployBlockPopover.deploy") };
          case "deploying":
          case "queued":
          case "building":
            return {
              icon: (0, eE.jsx)(eR.Spinner, { size: 16 }),
              text: a("deployBlockPopover.deploy"),
            };
        }
      }, [n, s, i, r, a]);
      return (0, eE.jsx)(eB.TransitionNode, {
        ...eB.PRESETS.buttonContent,
        children: (0, eE.jsxs)("span", {
          className: "flex items-center justify-center",
          children: [
            (0, eE.jsx)("span", {
              className: "sm:hidden",
              children: o?.icon || (0, eE.jsx)(eP.Globe, {}),
            }),
            (0, eE.jsxs)("span", {
              className: "hidden sm:flex items-center gap-1.5 ",
              children: [o?.icon, o?.text],
            }),
          ],
        }),
      });
    }
    e.s(["ChatDeploymentTrigger", () => eZ], 14791);
    var eJ = t,
      eQ = u,
      eX = es,
      e0 = l;
    function e1({ link: e, children: t, className: n }) {
      return (0, eJ.jsxs)("div", {
        className: (0, eX.cn)(
          "flex flex-row justify-between gap-3 p-3 border-t border-v0-alpha-400 bg-v0-background-200",
          e && "pl-1.5",
        ),
        children: [
          e
            ? (0, eJ.jsx)(eQ.Button, {
                variant: "ghost",
                size: "sm",
                className: "shrink-0",
                asChild: !0,
                children: (0, eJ.jsx)(e0.default, {
                  href: e.href,
                  target: "_blank",
                  className: "text-label-14 flex items-center gap-2",
                  children: e.label,
                }),
              })
            : null,
          (0, eJ.jsx)("span", {
            className: (0, eX.cn)(
              "flex flex-1 items-center justify-end gap-3",
              e ? "" : "*:flex-1",
              n,
            ),
            children: t,
          }),
        ],
      });
    }
    function e2({ children: e, className: t, key: n }) {
      return (0, eJ.jsx)(
        "div",
        {
          className: (0, eX.cn)("flex w-full flex-col overflow-hidden p-4", t),
          children: e,
        },
        n,
      );
    }
    e.s(["PopoverActions", () => e1, "PopoverContent", () => e2], 416959);
  },
  251016,
  332991,
  479963,
  (e) => {
    "use strict";
    e.s(["DeploymentStage", () => B], 251016);
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(176248),
      i = e.i(576191),
      s = e.i(900511),
      a = e.i(903500),
      o = e.i(691701),
      l = e.i(416959),
      c = e.i(251198),
      u = e.i(548866),
      d = e.i(373998),
      h = e.i(470259);
    e.s(
      [
        "DeployOrPushButton",
        () => L,
        "FixDeploymentErrorsButton",
        () => T,
        "FixDeploymentWarningButton",
        () => M,
      ],
      332991,
    );
    var p = t,
      m = e.i(616216),
      f = e.i(607391),
      g = u,
      x = d,
      v = e.i(348327),
      y = r,
      b = e.i(297239),
      j = e.i(667660);
    e.i(472428);
    var w = e.i(296900),
      C = n,
      k = e.i(180367),
      S = e.i(643312),
      N = e.i(620678),
      E = i,
      A = e.i(538553),
      D = e.i(242759),
      I = e.i(436311);
    function M({ chatId: e }) {
      let t = (0, x.getChatDeploymentAtoms)(e),
        n = "auto-fixing-warning" === (0, C.useAtomValue)(t.asyncActionLoading),
        { hasVercelWritePermission: r } = (0, j.useActiveScope)(),
        { ffw0: i } = (0, D.useFlags)(),
        { hasRemaining: s } = (0, I.useFreeFixWithV0Usage)(),
        { handleFixDeployWarning: a } = (0, v.useAsyncChatDeploymentActions)({
          chatId: e,
        }),
        o = (0, E.useCallback)(() => {
          a();
        }, [a]),
        l = (0, E.useMemo)(
          () => ({
            disabled: !r || n,
            isLoading: n,
            loadingText: "Fixing warning",
          }),
          [r, n],
        );
      return (0, p.jsx)(A.RbacTooltip, {
        show: !r,
        requiredRole: "V0Builder",
        children: (0, p.jsx)(y.Button, {
          size: "sm",
          variant: "default",
          onClick: o,
          disabled: l.disabled,
          children: (0, p.jsxs)(f.ActionStatus, {
            isLoading: l.isLoading,
            loading: l.loadingText,
            children: [
              (0, p.jsx)("span", { children: "Fix with " }),
              (0, p.jsx)(m.V0LoadableLogo, { invert: !l.disabled }),
              i && s
                ? (0, p.jsx)("span", {
                    className:
                      "rounded light:bg-[#FFFFFF]/12.5 dark:bg-[#000000]/10 px-1 py-0.5 text-[10px] leading-none",
                    children: "Free",
                  })
                : null,
            ],
          }),
        }),
      });
    }
    function T({ chatId: e, deploymentId: t, variant: n = "default" }) {
      let r = (0, x.getChatDeploymentAtoms)(e),
        i = "auto-fixing-errors" === (0, C.useAtomValue)(r.asyncActionLoading),
        { data: s } = (0, w.useServerQuerySWR)(["deployment", "errors"], {
          deploymentId: t,
        }),
        { handleFixWithV0: a } = (0, v.useAsyncChatDeploymentActions)({
          chatId: e,
        }),
        { hasVercelWritePermission: o } = (0, j.useActiveScope)(),
        { ffw0: l } = (0, D.useFlags)(),
        { hasRemaining: c } = (0, I.useFreeFixWithV0Usage)(),
        u = (0, E.useMemo)(() => !!s?.ok && !!s.value.fullErrorText, [s]),
        d = (0, E.useCallback)(() => {
          s?.ok && s.value.fullErrorText && a(s.value.fullErrorText);
        }, [s, a]),
        h = (0, E.useMemo)(() => {
          let e = "Collecting errors";
          u && (e = "Auto-fixing errors");
          let t = !o || !u || i;
          return { onClick: d, isLoading: t, loadingText: e, disabled: t };
        }, [d, o, u, i]);
      return (0, p.jsx)(A.RbacTooltip, {
        show: !o,
        requiredRole: "V0Builder",
        children: (0, p.jsx)(y.Button, {
          size: "sm",
          onClick: h.onClick,
          disabled: h.disabled,
          variant: n,
          children: (0, p.jsxs)(f.ActionStatus, {
            isLoading: h.isLoading,
            loading: h.loadingText,
            children: [
              l && c
                ? (0, p.jsx)("span", {
                    className:
                      "rounded light:bg-[#FFFFFF]/12.5 dark:bg-[#000000]/10 px-1 py-0.5 text-[10px] leading-none",
                    children: "Free",
                  })
                : null,
              (0, p.jsx)("span", { children: "Fix with " }),
              (0, p.jsx)(m.V0LoadableLogo, {
                invert: "default" === n && !h.disabled,
                loading: h.disabled,
              }),
            ],
          }),
        }),
      });
    }
    function L({ chatId: e, variant: t = "default", ...n }) {
      let r = (0, x.getChatDeploymentAtoms)(e),
        i = (0, C.useAtomValue)(r.externalMeta),
        s = (0, C.useAtomValue)(r.deployWarning),
        a = (0, C.useAtomValue)(r.isAbleToPushChanges),
        o = (0, C.useAtomValue)(r.isAbleToDeploy),
        l = (0, C.useAtomValue)(r.hasDeployableChanges),
        c = (0, C.useAtomValue)(r.selectedEnvironment),
        u = (0, C.useAtomValue)(r.asyncActionLoading),
        d = (0, C.useAtomValue)(r.asyncActionLoadingLabel),
        { handlePushChanges: h, handleDeploy: m } = (0,
        v.useAsyncChatDeploymentActions)({ chatId: e }),
        { hasVercelWritePermission: w } = (0, j.useActiveScope)(),
        D = (0, b.useT)(),
        { vercelProject: I, status: M } = (0, S.useIntegrationsApi)(),
        T = I?.project.id,
        L = !!I,
        P = (0, C.useSetAtom)(N.isSettingsSheetOpenAtom),
        R = (0, C.useSetAtom)(N.settingsSheetTabAtom),
        { setIsOpenForLocation: F } = (0, x.getChatDeploymentActions)(e),
        _ = (0, E.useCallback)(
          (e) => {
            (e?.preventDefault(),
              e?.stopPropagation(),
              F(!1, null),
              R("overview"),
              P(!0));
          },
          [F, R, P],
        ),
        O = (0, E.useMemo)(() => {
          let e = i.ok && !!i.value.deployment,
            t = !!s?.warning,
            n = i.ok ? i.value.git : void 0,
            r = "Publish to Production";
          if (
            ("preview" === c && (r = "Publish to a Preview"),
            e && ((r = "Update"), l && (r = "Publish Changes")),
            t && (r = D("deployBlockPopover.deploy")),
            n)
          ) {
            let e = "pushing" === u;
            return {
              onClick: h,
              disabled: !w || !a || e,
              text: r,
              isLoading: e,
              loadingText: d,
            };
          }
          {
            let e = "deploy" === u;
            return {
              onClick: m,
              disabled: !w || !o || e || "ready" !== M,
              text: r,
              isLoading: e,
              loadingText: d,
            };
          }
        }, [i, s?.warning, c, l, D, u, w, a, h, d, o, M, m]);
      function B(e) {
        (e.preventDefault(), O.onClick());
      }
      return T && "ready" === M && !L
        ? (0, p.jsxs)("div", {
            className: "flex flex-col gap-3",
            children: [
              (0, p.jsx)(g.EmptyState, {
                title: "Connect to Vercel to publish",
                icon: (0, p.jsx)(k.LogoVercel, {}),
                children:
                  "Connect your project to Vercel to publish your changes.",
              }),
              (0, p.jsx)(y.Button, {
                type: "button",
                size: "sm",
                variant: "secondary",
                onClick: _,
                children: "Open Project Settings",
              }),
            ],
          })
        : (0, p.jsx)(A.RbacTooltip, {
            show: !w,
            requiredRole: "V0Builder",
            children: (0, p.jsx)(y.Button, {
              size: "sm",
              onClick: O.onClick,
              disabled: O.disabled,
              variant: t,
              onSubmit: B,
              ...n,
              children: (0, p.jsx)(f.ActionStatus, {
                isLoading: O.isLoading,
                loading: O.loadingText,
                children: O.text,
              }),
            }),
          });
    }
    var P = v,
      R = e.i(675120),
      F = j,
      _ = A,
      O = e.i(369218);
    function B({ chatId: e }) {
      let a = (0, d.getChatDeploymentAtoms)(e),
        p = (0, n.useAtomValue)(a.deploymentState),
        m = (0, n.useAtomValue)(a.hasDeployableChanges),
        f = (0, n.useAtomValue)(a.externalMeta),
        { handleRetry: g } = (0, P.useAsyncChatDeploymentActions)({
          chatId: e,
        }),
        { hasVercelWritePermission: x } = (0, F.useActiveScope)(),
        v = (0, i.useMemo)(() => {
          if (!f.ok && f.error.errorCode !== h.NOT_FOUND)
            return {
              content: (0, t.jsx)(l.PopoverContent, {
                children: (0, t.jsx)(u.EmptyState, {
                  title: "Failed to load deployment",
                  variant: "error",
                  icon: (0, t.jsx)(o.Stop, {}),
                  children: "There was an error loading your deployment.",
                }),
              }),
              actions: (0, t.jsx)(l.PopoverActions, {
                children: (0, t.jsx)(_.RbacTooltip, {
                  show: !x,
                  requiredRole: "V0Builder",
                  children: (0, t.jsx)(r.Button, {
                    size: "sm",
                    onClick: g,
                    disabled: !x,
                    children: "Reload",
                  }),
                }),
              }),
            };
          let n = f.ok ? f.value.deployment : void 0;
          if (!n)
            return {
              content: (0, t.jsx)(l.PopoverContent, {
                children: (0, t.jsx)(V, {}),
              }),
              actions: null,
            };
          let i = n.inspectorUrl
              ? { href: n.inspectorUrl, label: "Inspect on Vercel" }
              : void 0,
            a = (0, t.jsxs)(l.PopoverActions, {
              link: i,
              className: `${m && "flex-row-reverse"}`,
              children: [
                (0, t.jsx)(L, {
                  variant: m ? "default" : "secondary",
                  chatId: e,
                }),
                (0, t.jsx)(T, {
                  variant: m ? "secondary" : "default",
                  chatId: e,
                  deploymentId: n.id,
                }),
              ],
            }),
            d = (0, t.jsxs)(l.PopoverActions, {
              children: [
                (0, t.jsxs)(r.Button, {
                  size: "sm",
                  className: "w-full",
                  variant: "secondary",
                  onClick: () => {
                    window.open(`https://${n.bestDomain}`, "_blank");
                  },
                  disabled: n.bestDomain === O.LOADING_SKELETON,
                  children: ["Visit Site", (0, t.jsx)(s.ExternalSmall, {})],
                }),
                (0, t.jsx)(L, {
                  chatId: e,
                  className: "w-full",
                  variant: m ? "default" : "secondary",
                }),
              ],
            }),
            v = null;
          return (
            "failed" === p && (v = a),
            "deployed" === p && (v = d),
            {
              content: (0, t.jsx)(l.PopoverContent, {
                className: "p-0 max-w-[440px]",
                children: (0, t.jsx)(c.NewDeployment, {
                  deploymentId: n.id,
                  stopFetch: !0,
                  chatId: e,
                }),
              }),
              actions: v,
            }
          );
        }, [f, m, e, p, g, x]);
      return (0, t.jsx)(R.TransitionNode, {
        ...R.PRESETS.popoverContent,
        renderKey: `${p}-${v.actions ? "withActions" : "noActions"}`,
        children: (0, t.jsxs)("div", {
          className: "flex flex-col",
          children: [v.content, v.actions],
        }),
      });
    }
    function V() {
      return (0, t.jsx)(u.EmptyState, {
        title: "No deployment found",
        icon: (0, t.jsx)(a.Globe, {}),
        children: "This chat has not been deployed yet.",
      });
    }
    e.s(["AssignDomainStage", () => et], 479963);
    var z = t,
      H = n,
      $ = r,
      U = e.i(763480),
      G = l,
      W = f,
      q = d,
      Z = v,
      K = e.i(654335),
      Y = i,
      J = e.i(365449),
      Q = j,
      X = A,
      ee = O;
    function et({ chatId: e }) {
      let t = (0, q.getChatDeploymentAtoms)(e),
        { handleAssignDomain: n } = (0, Z.useAsyncChatDeploymentActions)({
          chatId: e,
        }),
        {
          setNewDomain: r,
          setStageIntent: i,
          setDomainError: s,
          setDomainErrorRedirect: a,
        } = (0, q.getChatDeploymentActions)(e),
        o = (0, H.useAtomValue)(t.externalMeta),
        l = o.ok ? o.value.deployment : void 0,
        c = (0, H.useAtomValue)(t.newDomain),
        u = (0, H.useAtomValue)(t.asyncActionLoading),
        d = (0, H.useAtomValue)(t.asyncActionLoadingLabel),
        h = (0, H.useAtomValue)(t.domainError),
        p = (0, H.useAtomValue)(t.domainErrorRedirect),
        { hasVercelWritePermission: m } = (0, Q.useActiveScope)(),
        f = "assigning-domain" === u;
      function g(e) {
        (e.preventDefault(), m && n());
      }
      let x = (0, Y.useMemo)(
        () =>
          h ? (p ? (0, z.jsx)(K.default, { href: p, children: h }) : h) : null,
        [h, p],
      );
      return (0, z.jsxs)(z.Fragment, {
        children: [
          (0, z.jsx)(J.default, {
            onBack: () => {
              (r(null), s(null), a(null), i(null));
            },
            title: "Add a Custom Domain",
          }),
          (0, z.jsxs)("form", {
            id: "assign-domain-form",
            onSubmit: g,
            children: [
              (0, z.jsxs)(G.PopoverContent, {
                className: "gap-4",
                children: [
                  (0, z.jsx)("span", {
                    className: "text-label-14 text-v0-gray-900",
                    children:
                      "Assign a custom vercel.app subdomain to make your project more memorable.",
                  }),
                  (0, z.jsx)("div", {
                    className: "flex flex-col gap-2",
                    children: (0, z.jsx)(U.Input, {
                      placeholder:
                        l?.bestDomain && l.bestDomain !== ee.LOADING_SKELETON
                          ? en(l.bestDomain)
                          : "your-domain",
                      value: c ?? "",
                      onChange: (e) => {
                        (r(e.target.value), s(null), a(null));
                      },
                      disabled: f,
                      error: x,
                      suffix: ".vercel.app",
                    }),
                  }),
                ],
              }),
              (0, z.jsx)(G.PopoverActions, {
                children: (0, z.jsx)(X.RbacTooltip, {
                  show: !m,
                  requiredRole: "V0Builder",
                  children: (0, z.jsx)($.Button, {
                    size: "sm",
                    type: "submit",
                    form: "assign-domain-form",
                    disabled: !m || f,
                    children: (0, z.jsx)(W.ActionStatus, {
                      isLoading: f,
                      loading: d,
                      children: "Add Domain",
                    }),
                  }),
                }),
              }),
            ],
          }),
        ],
      });
    }
    function en(e) {
      return e.replace(/\.vercel\.(app|sh)$/, "");
    }
  },
  510266,
  348841,
  56535,
  712007,
  74992,
  135224,
  84057,
  383543,
  866838,
  175457,
  (e) => {
    "use strict";
    e.s(["SuspendingChatDeploymentPopoverContent", () => ts], 510266);
    var t = e.i(324834),
      n = e.i(393799),
      r = e.i(251016),
      i = e.i(479963),
      s = e.i(675120),
      a = e.i(576191),
      o = t,
      l = n,
      c = e.i(416959),
      u = e.i(386688),
      d = e.i(763480),
      h = s,
      p = e.i(903500),
      m = e.i(802008),
      f = e.i(264050),
      g = e.i(749299),
      x = e.i(741006),
      v = e.i(373998),
      y = e.i(332991),
      b = a,
      j = e.i(242759),
      w = e.i(662429),
      C = e.i(749709);
    e.i(472428);
    var k = e.i(296900),
      S = e.i(72058);
    e.i(904347);
    var N = e.i(37737);
    e.i(624424);
    var E = e.i(174890),
      A = e.i(539338),
      D = e.i(449381),
      I = e.i(499282);
    function M({ chatId: e }) {
      let t = (0, v.getChatDeploymentAtoms)(e),
        n = (0, l.useAtomValue)(t.externalMeta),
        r = (0, l.useAtomValue)(t.activeBlockVersionNumber),
        i = (0, D.useActiveBlockState)(e),
        s = (0, b.useMemo)(() => i && (0, I.canBeDeployed)(i), [i]),
        a = (0, l.useAtomValue)(t.newBranchName),
        M = (0, l.useAtomValue)(t.selectedEnvironment),
        T = (0, l.useAtomValue)(t.protection),
        L = (e) => {
          switch (e) {
            case "public":
            default:
              return "Public";
            case "team":
              return "Team Only";
            case "password":
              return "Password Protected";
          }
        },
        {
          setSelectedEnvironment: P,
          updateNewBranchName: R,
          setTemplateAction: F,
          setStageIntent: _,
        } = (0, v.getChatDeploymentActions)(e),
        O = !!(0, l.useAtomValue)(t.asyncActionLoading),
        B = (0, b.useMemo)(
          () =>
            n.ok && n.value.git?.ref
              ? n.value.git.onProductionBranch
                ? (P("production"),
                  {
                    shouldForce: !0,
                    previewDisabled: !0,
                    productionDisabled: !1,
                    branchName: n.value.git.ref,
                    branchInputDisabled: !0,
                  })
                : (P("preview"),
                  R(n.value.git.ref),
                  {
                    shouldForce: !0,
                    previewDisabled: !1,
                    productionDisabled: !0,
                    branchName: n.value.git.ref,
                    branchInputDisabled: !0,
                  })
              : {
                  shouldForce: !1,
                  previewDisabled: !1,
                  productionDisabled: !1,
                  branchName: a,
                  branchInputDisabled: !1,
                },
          [a, P, R, n],
        ),
        { data: V } = (0, k.useServerQuerySWR)(
          ["chat", "template"],
          { chatId: e },
          { suspense: !0 },
        ),
        z = B.previewDisabled || O,
        H = B.productionDisabled || O,
        $ = B.branchInputDisabled || O,
        U = B.branchName,
        G = V.ok && V.value,
        { dpe: W } = (0, j.useFlags)();
      return (
        (0, b.useEffect)(() => {
          H || P("production");
        }, []),
        (0, o.jsxs)("form", {
          children: [
            (0, o.jsxs)(c.PopoverContent, {
              className: "p-0",
              children: [
                n.ok && n.value.git
                  ? (0, o.jsxs)(w.PopoverHeading, {
                      title: "Select a Branch",
                      className: "p-4 border-b border-v0-alpha-400",
                      children: [
                        (0, o.jsxs)(u.ChoiceBoxGroup, {
                          value: M,
                          onChange: (e) => {
                            P(e);
                          },
                          className: "flex flex-col gap-2",
                          children: [
                            (0, o.jsx)(u.ChoiceBoxGroup.Item, {
                              disabled: H,
                              Icon: (0, o.jsx)(p.Globe, {}),
                              title: "Production",
                              description: B.productionDisabled
                                ? "Only main can be to deployed to production."
                                : "Make your changes live to all users.",
                              value: "production",
                            }),
                            (0, o.jsx)(u.ChoiceBoxGroup.Item, {
                              disabled: z,
                              Icon: (0, o.jsx)(f.PreviewEye, {}),
                              title: "Preview",
                              description:
                                "Test your changes on a branch before going live.",
                              value: "preview",
                            }),
                          ],
                        }),
                        (0, o.jsx)(h.TransitionNode, {
                          ...h.PRESETS.popoverContent,
                          renderKey: M ?? "",
                          children:
                            "preview" === M
                              ? (0, o.jsx)("div", {
                                  className: "flex flex-col gap-2 pt-3",
                                  children: (0, o.jsx)(d.Input, {
                                    label: "Branch name",
                                    prefix: B.shouldForce
                                      ? (0, o.jsx)(m.LockClosed, {})
                                      : void 0,
                                    disabled: $,
                                    id: "branch-name",
                                    placeholder: "your-branch-name",
                                    value: U ?? "",
                                    onChange: (e) => R(e.target.value),
                                  }),
                                })
                              : null,
                        }),
                      ],
                    })
                  : (0, o.jsx)(w.PopoverHeading, {
                      title: "Publish to the Web",
                      className:
                        "p-4 border-b border-v0-alpha-400 max-w-[440px]",
                      children: (0, o.jsxs)("span", {
                        children: [
                          (0, o.jsx)("span", { children: "Publish " }),
                          r
                            ? (0, o.jsxs)("span", {
                                className: "font-medium",
                                children: ["version ", r],
                              })
                            : (0, o.jsx)("span", { children: "your app" }),
                          (0, o.jsxs)("span", {
                            children: [
                              " ",
                              "to the web using Vercel. After you publish your app, you can feature it in the community as a template.",
                            ],
                          }),
                        ],
                      }),
                    }),
                (0, o.jsxs)("div", {
                  className: "flex flex-col gap-1 p-3",
                  children: [
                    (0, o.jsx)(C.default, {
                      title: "Customize Domain",
                      icon: (0, o.jsx)(g.PencilEdit, {
                        className: "!text-v0-gray-900 size-4",
                      }),
                      onClick: () => {
                        (0, N.openDialog)({
                          type: "settings",
                          data: { initialSection: "domains" },
                        });
                      },
                      disabledReason:
                        "You can only set a custom domain after publishing your app.",
                      disabled: !W || "preview" === M,
                    }),
                    (0, o.jsx)(C.default, {
                      title: "Publish as Template",
                      icon: (0, o.jsx)(p.Globe, {
                        className: "!text-v0-gray-900 size-4",
                      }),
                      badge: (0, S.renderTemplateStatus)(
                        V.ok
                          ? V.value?.templateVersion.publishedToCommunity
                          : void 0,
                      ),
                      onClick: () => {
                        let t;
                        (V.ok && V.value
                          ? (F("updated"), (t = "publish-template-changes"))
                          : (F("created"), (t = "template-entry")),
                          (0, N.openDialog)({
                            type: "templateWizard",
                            data: { chatId: e, initialStage: t },
                          }));
                      },
                      label: G ? "Update" : void 0,
                      disabled: !s,
                      disabledReason:
                        "You can only publish previewable apps as templates.",
                    }),
                    (0, o.jsx)(C.default, {
                      title: "Visibility",
                      icon: (0, o.jsx)(x.Eye, {
                        className: "!text-v0-gray-900 size-4",
                      }),
                      onClick: () => {
                        _("password-protection");
                      },
                      disabledReason:
                        "You can only set visibility after publishing your app.",
                      label: L(T),
                      disabled: !W || "preview" === M,
                    }),
                    (0, o.jsx)(E.BuiltWithV0Provider, {
                      children: (0, o.jsx)(A.ToggleMenuItem, {}),
                    }),
                  ],
                }),
              ],
            }),
            (0, o.jsx)(c.PopoverActions, {
              children: (0, o.jsx)(y.DeployOrPushButton, { chatId: e }),
            }),
          ],
        })
      );
    }
    var T = v,
      L = t,
      P = n,
      R = e.i(602544),
      F = e.i(691701),
      _ = e.i(147675),
      O = c,
      B = e.i(548866),
      V = v,
      z = a,
      H = y,
      $ = s,
      U = e.i(93190);
    function G({ chatId: e }) {
      let t = (0, V.getChatDeploymentAtoms)(e),
        n = (0, P.useAtomValue)(t.deployWarning),
        r = (0, z.useMemo)(() => {
          if (!n)
            return {
              content: (0, L.jsx)(B.EmptyState, {
                title: "No deployment warnings",
                variant: "success",
                icon: (0, L.jsx)(R.Check, {}),
                children:
                  "The source has been checked and no deployment warnings were found.",
              }),
              actions: (0, L.jsx)(H.DeployOrPushButton, { chatId: e }),
            };
          let { isSecurityRisk: t, warning: r } = n;
          return {
            content: (0, L.jsx)(O.PopoverContent, {
              children: (0, L.jsxs)(B.EmptyState, {
                title: t ? "Security Risk Found" : "Deployment Warning",
                variant: t ? "error" : "warning",
                icon: t ? (0, L.jsx)(F.Stop, {}) : (0, L.jsx)(_.Warning, {}),
                children: [
                  r,
                  r === U.CVE_WARNING_MESSAGE
                    ? (0, L.jsx)("div", {
                        className: "mt-2",
                        children: (0, L.jsx)("a", {
                          href: "https://github.com/vercel/next.js/security/advisories/GHSA-9qr9-h5gf-34mp",
                          target: "_blank",
                          rel: "noopener noreferrer",
                          className: "text-v0-blue-600 hover:underline",
                          children: "Learn more",
                        }),
                      })
                    : null,
                ],
              }),
            }),
            actions: (0, L.jsxs)(O.PopoverActions, {
              children: [
                (0, L.jsx)(H.FixDeploymentWarningButton, { chatId: e }),
                (0, L.jsx)(H.DeployOrPushButton, {
                  variant: "secondary",
                  chatId: e,
                }),
              ],
            }),
          };
        }, [e, n]);
      return (0, L.jsx)($.TransitionNode, {
        ...$.PRESETS.popoverContent,
        children: (0, L.jsxs)("div", {
          className: "flex flex-col gap-2 max-w-[440px]",
          children: [r.content, r.actions],
        }),
      });
    }
    var W = t,
      q = e.i(176248),
      Z = F,
      K = c,
      Y = B,
      J = e.i(226368),
      Q = e.i(691175),
      X = e.i(667660);
    function ee({ chatId: e }) {
      let t = (0, J.useRouter)(),
        { activeScopeSlug: n, isTeam: r } = (0, X.useActiveScope)();
      return (0, W.jsxs)(W.Fragment, {
        children: [
          (0, W.jsx)(K.PopoverContent, {
            children: (0, W.jsx)(Y.EmptyState, {
              title: "Failed to load deployment",
              variant: "error",
              icon: (0, W.jsx)(Z.Stop, {}),
              children:
                "You must set up two-factor authentication before accessing this deployment.",
            }),
          }),
          r && n
            ? (0, W.jsx)(K.PopoverActions, {
                children: (0, W.jsx)(q.Button, {
                  size: "sm",
                  onClick: () =>
                    t.push(
                      (0, Q.getTwoFactorRequiredUrlClient)({
                        slug: n,
                        path: `/chat/${e}`,
                      }),
                    ),
                  children: "Enable",
                }),
              })
            : null,
        ],
      });
    }
    var et = t,
      en = q,
      er = F,
      ei = c,
      es = B,
      ea = e.i(348327);
    function eo({ chatId: e }) {
      let { handleRetry: t, handleReport: n } = (0,
      ea.useAsyncChatDeploymentActions)({ chatId: e });
      return (0, et.jsxs)(et.Fragment, {
        children: [
          (0, et.jsx)(ei.PopoverContent, {
            children: (0, et.jsx)(es.EmptyState, {
              title: "Failed to load deployment",
              variant: "error",
              icon: (0, et.jsx)(er.Stop, {}),
              children:
                "An issue occurred with our servers or your network connection. Please reload or report the problem if it persists.",
            }),
          }),
          (0, et.jsxs)(ei.PopoverActions, {
            children: [
              (0, et.jsx)(en.Button, {
                size: "sm",
                onClick: n,
                variant: "secondary",
                children: "Report",
              }),
              (0, et.jsx)(en.Button, {
                size: "sm",
                onClick: t,
                children: "Reload",
              }),
            ],
          }),
        ],
      });
    }
    var el = t,
      ec = q,
      eu = c,
      ed = e.i(607391),
      eh = e.i(365449),
      ep = v,
      em = t,
      ef = d,
      eg = p,
      ex = m,
      ev = e.i(707974),
      ey = e.i(592258),
      eb = e.i(230766),
      ej = a,
      ew = v,
      eC = n,
      ek = k,
      eS = e.i(32170),
      eN = X,
      eE = j,
      eA = e.i(819969);
    function eD({
      value: e,
      icon: t,
      title: n,
      description: r,
      disabled: i,
      disabledReason: s,
    }) {
      return i
        ? (0, em.jsx)("div", {
            className:
              "px-3 py-1 w-full group relative cursor-not-allowed opacity-50 focus:bg-v0-gray-100 focus:text-accent-foreground flex select-none items-center rounded-sm text-sm outline-hidden",
            title: s,
            "aria-disabled": !0,
            onClick: (e) => {
              (e.preventDefault(), e.stopPropagation());
            },
            children: (0, em.jsxs)("div", {
              className: "flex items-center gap-3 min-w-96",
              children: [
                (0, em.jsx)("span", {
                  className: "text-v0-gray-900",
                  children: t,
                }),
                (0, em.jsxs)("div", {
                  className: "flex flex-col text-left w-full",
                  children: [
                    (0, em.jsx)("span", {
                      className: "text-sm font-medium w-full",
                      children: n,
                    }),
                    s
                      ? (0, em.jsxs)("span", {
                          className:
                            "h-4 overflow-hidden block w-full relative",
                          children: [
                            (0, em.jsx)("span", {
                              className:
                                "absolute inset-x-0 top-0 transition-transform duration-200 group-hover:-translate-y-full text-xs text-v0-gray-900 whitespace-nowrap w-full",
                              children: r,
                            }),
                            (0, em.jsx)("span", {
                              className:
                                "absolute inset-x-0 top-full transition-transform duration-200 group-hover:-translate-y-full text-xs text-v0-gray-900 whitespace-nowrap w-full",
                              children: s,
                            }),
                          ],
                        })
                      : (0, em.jsx)("span", {
                          className: "text-xs text-v0-gray-900",
                          children: r,
                        }),
                  ],
                }),
              ],
            }),
          })
        : (0, em.jsx)(ey.SelectItem, {
            value: e,
            title: n,
            className: "px-3 py-1 w-full group relative",
            iconOnRight: !0,
            children: (0, em.jsxs)("div", {
              className: "flex items-center gap-3 min-w-96",
              children: [
                (0, em.jsx)("span", {
                  className: "text-v0-gray-900",
                  children: t,
                }),
                (0, em.jsxs)("div", {
                  className: "flex flex-col text-left w-full",
                  children: [
                    (0, em.jsx)("span", {
                      className: "text-sm font-medium w-full",
                      children: n,
                    }),
                    (0, em.jsx)("span", {
                      className: "text-xs text-v0-gray-900",
                      children: r,
                    }),
                  ],
                }),
              ],
            }),
          });
    }
    let eI = ({ chatId: e }) => {
      let { dpe: t } = (0, eE.useFlags)(),
        { data: n } = (0, ek.useServerQuerySWR)(
          ["scoped", "team"],
          {},
          { revalidateNever: !0, stopFetch: !t },
        );
      (0, ek.useServerQuerySWR)(
        ["chat", "attributes"],
        { chatId: e },
        { stopFetch: !t, suspense: !0 },
      );
      let r = (0, ew.getChatDeploymentAtoms)(e),
        i = (0, eA.getChatAtoms)(e),
        s = (0, eC.useAtomValue)(r.selectedEnvironment),
        a = (0, eC.useAtomValue)(r.protection),
        o = (0, eC.useAtomValue)(r.protectionPassword),
        { setProtection: l, setProtectionPassword: c } = (0,
        ew.getChatDeploymentActions)(e),
        { user: u } = (0, eS.useUser)(),
        { isNewV0Rbac: d, hasVercelWritePermission: h } = (0,
        eN.useActiveScope)(),
        p = !!(d ? h : u && ["OWNER", "MEMBER"].includes(u.teamRole ?? "")),
        m =
          !!n?.ok &&
          (n.value.enabledInvoiceItems?.passwordProtection?.enabled ?? !1),
        f = n?.ok
          ? n.value.defaultDeploymentProtection?.passwordProtection
          : void 0,
        g = f?.deploymentType,
        x = n?.ok ? n.value.defaultDeploymentProtection?.ssoProtection : void 0,
        v = x?.deploymentType,
        y = (e) => {
          switch (e) {
            case void 0:
              return !1;
            case "all":
              return !0;
            case "preview":
            case "all_except_custom_domains":
              return "preview" === s;
            case "prod_deployment_urls_and_all_previews":
              return "preview" === s || "production" === s;
          }
        },
        b =
          n && s
            ? f && y(g)
              ? "password"
              : x && y(v)
                ? "team"
                : "public"
            : "public",
        j =
          "all" === g || ("all_except_custom_domains" === g && "preview" === s),
        w =
          "all" === v || ("all_except_custom_domains" === v && "preview" === s),
        C = j ? "password" : w ? "team" : null,
        k = "password" === C ? !p : !p || !m;
      (0, ej.useEffect)(() => {
        C && a !== C && l(C);
      }, [C, a, l]);
      let S = (0, eC.useAtomValue)(i.projectProtection);
      (0, ej.useEffect)(() => {
        if (C) return;
        let e = "public" !== S ? S : b;
        a !== e && l(e);
      }, [S, C, b]);
      let N = (0, ej.useCallback)(
        (e) => {
          switch (e) {
            case "public":
              return C
                ? "Enforced by team policy"
                : p
                  ? void 0
                  : d
                    ? "Requires builder permission"
                    : "Requires Owner or Member role";
            case "team":
              return "password" === C
                ? "Enforced by team policy"
                : m
                  ? p
                    ? void 0
                    : d
                      ? "Requires builder permission"
                      : "Requires Owner or Member role"
                  : "Requires Advanced Deployment Protection or v0 Enterprise";
            case "password":
              return "team" === C
                ? "Enforced by team policy"
                : m
                  ? p
                    ? void 0
                    : d
                      ? "Requires v0 Builder permission"
                      : "Requires Owner or Member role"
                  : "Requires Advanced Deployment Protection or v0 Enterprise";
          }
        },
        [C, p, d, m],
      );
      return t
        ? (0, em.jsxs)("div", {
            className: "flex flex-col gap-2",
            children: [
              (0, em.jsx)(ev.Label, {
                htmlFor: "deployment-protection",
                children: "Visibility",
              }),
              (0, em.jsxs)(ey.Select, {
                value: a,
                onValueChange: (e) => {
                  !p ||
                    (C && e !== C) ||
                    ((("password" !== e && "team" !== e) || m) &&
                      (l(e), "password" !== e && c(null)));
                },
                children: [
                  (0, em.jsx)(ey.SelectTrigger, {
                    id: "deployment-protection",
                    className: "h-8 rounded-md",
                    children: (0, em.jsx)(ey.SelectValue, {
                      children: (0, em.jsxs)("span", {
                        className: "flex items-center gap-2",
                        children: [
                          "team" === a
                            ? (0, em.jsx)(eb.AvatarUser, {
                                teamId: n?.ok ? n.value.id : void 0,
                                rounded: !0,
                                size: "xs",
                              })
                            : "password" === a
                              ? (0, em.jsx)(ex.LockClosed, {
                                  className: "text-v0-gray-900",
                                })
                              : (0, em.jsx)(eg.Globe, {
                                  className: "text-v0-gray-900",
                                }),
                          (0, em.jsx)("span", {
                            children:
                              "team" === a
                                ? `Everyone in ${n?.ok ? n.value.name : "team"}`
                                : "password" === a
                                  ? "Password Protected"
                                  : "Public",
                          }),
                        ],
                      }),
                    }),
                  }),
                  (0, em.jsxs)(ey.SelectContent, {
                    children: [
                      (0, em.jsx)(eD, {
                        value: "public",
                        icon: (0, em.jsx)(eg.Globe, {}),
                        title: "Public",
                        description: "Anyone with the URL can view your app",
                        disabled: !!C || !p,
                        disabledReason: N("public"),
                      }),
                      n?.ok &&
                        (0, em.jsx)(eD, {
                          value: "team",
                          icon: (0, em.jsx)(eb.AvatarUser, {
                            teamId: n.value.id,
                            rounded: !0,
                            size: "xs",
                          }),
                          title: `Everyone in ${n.value.name}`,
                          description: `Anyone in the ${n.value.name} team can view your app`,
                          disabled: "password" === C || !p || !m,
                          disabledReason: N("team"),
                        }),
                      (0, em.jsx)(eD, {
                        value: "password",
                        icon: (0, em.jsx)(ex.LockClosed, {}),
                        title: "Password Protected",
                        description:
                          "Anyone with the password can view your app",
                        disabled: k || "team" === C,
                        disabledReason: N("password"),
                      }),
                    ],
                  }),
                ],
              }),
              "password" === a &&
                (0, em.jsx)("div", {
                  className: "flex flex-col gap-2 pt-2",
                  children: (0, em.jsx)(ef.Input, {
                    label: "Password",
                    id: "deployment-password",
                    placeholder:
                      "password" !== C || p
                        ? "Enter password"
                        : "Default password already set",
                    type: "password",
                    value: o ?? "",
                    onChange: (e) => c(e.target.value),
                    disabled: k,
                  }),
                }),
            ],
          })
        : null;
    };
    var eM = n,
      eT = a;
    e.i(563948);
    var eL = e.i(407562),
      eP = e.i(724560),
      eR = k,
      eF = e.i(144019),
      e_ = D,
      eO = e.i(762585),
      eB = e.i(717752),
      eV = j,
      ez = e.i(387040),
      eH = e.i(643312);
    function e$({ chatId: e }) {
      let { setStageIntent: t } = (0, ep.getChatDeploymentActions)(e),
        n = (0, ep.getChatDeploymentAtoms)(e),
        r = (0, eM.useAtomValue)(n.protection),
        i = (0, eM.useAtomValue)(n.protectionPassword),
        { vercelProject: s } = (0, eH.useIntegrationsApi)(),
        a = s?.project.id,
        [o, l] = (0, eT.useState)(!1),
        c = (0, e_.useActiveBlockState)(),
        u = (0, eF.useAutoCreateProject)({ chatId: e, activeBlock: c }),
        { data: d, mutate: h } = (0, eR.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: e },
          { suspense: !0 },
        ),
        { vpifc: p } = (0, eV.useFlags)();
      if (!d.ok)
        return (0, el.jsxs)(el.Fragment, {
          children: [
            (0, el.jsx)(eh.default, {
              title: "Visibility",
              onBack: () => {
                t(null);
              },
            }),
            (0, el.jsx)(eu.PopoverContent, {
              className: "gap-4",
              children: (0, el.jsxs)("div", {
                className: "flex flex-col gap-2",
                children: [
                  (0, el.jsx)(eB.Label, {
                    htmlFor: "deployment-protection",
                    children: "Visibility",
                  }),
                  (0, el.jsx)(eO.Skeleton, { className: "h-[32px] w-full" }),
                ],
              }),
            }),
            (0, el.jsxs)(eu.PopoverActions, {
              children: [
                (0, el.jsx)(ec.Button, {
                  size: "sm",
                  variant: "outline",
                  disabled: !0,
                  type: "button",
                  children: "Cancel",
                }),
                (0, el.jsx)(ec.Button, {
                  size: "sm",
                  disabled: !0,
                  children: "Save",
                }),
              ],
            }),
          ],
        });
      let m = d.value.project;
      if (!m && !p) return null;
      let f = m?.projectId,
        g = async () => {
          if (!f && !p) return void eL.toast.error("Project not found");
          if (!a) {
            l(!0);
            let e = await u();
            if (!e.ok) {
              (eL.toast.error(`Unable to create project: ${e.error}`), l(!1));
              return;
            }
          }
          l(!0);
          let n = !1;
          try {
            if ("password" === r) {
              let t = await (0, eP.configureDeploymentProtectionAction)({
                projectId: f,
                kind: "password",
                password: i ?? void 0,
                chatId: e,
              });
              ((n = !0 === t),
                await h({
                  serverMutate: Promise.resolve(!0),
                  optimisticData: (0, ez.ok)({
                    ...d.value,
                    project: {
                      ...d.value.project,
                      vercelProject: d.value.project?.vercelProject
                        ? {
                            ...d.value.project.vercelProject,
                            project: {
                              ...d.value.project.vercelProject.project,
                              passwordProtection: { deploymentType: "all" },
                            },
                          }
                        : null,
                    },
                  }),
                }));
            } else if ("team" === r) {
              let t = await (0, eP.configureDeploymentProtectionAction)({
                projectId: f,
                kind: "sso",
                enabled: !0,
                chatId: e,
              });
              ((n = !0 === t),
                await h({
                  serverMutate: Promise.resolve(!0),
                  optimisticData: (0, ez.ok)({
                    ...d.value,
                    project: {
                      ...d.value.project,
                      vercelProject: d.value.project?.vercelProject
                        ? {
                            ...d.value.project.vercelProject,
                            project: {
                              ...d.value.project.vercelProject.project,
                              ssoProtection: { deploymentType: "all" },
                            },
                          }
                        : null,
                    },
                  }),
                }));
            } else {
              let t = await (0, eP.configureDeploymentProtectionAction)({
                projectId: f,
                kind: "password",
                password: null,
                chatId: e,
              });
              (!0 === t &&
                (await (0, eP.configureDeploymentProtectionAction)({
                  projectId: f,
                  kind: "sso",
                  enabled: !1,
                  chatId: e,
                })),
                await h({
                  serverMutate: Promise.resolve(!0),
                  optimisticData: (0, ez.ok)({
                    ...d.value,
                    project: {
                      ...d.value.project,
                      vercelProject: d.value.project?.vercelProject
                        ? {
                            ...d.value.project.vercelProject,
                            project: {
                              ...d.value.project.vercelProject.project,
                              ssoProtection: void 0,
                              passwordProtection: void 0,
                            },
                          }
                        : null,
                    },
                  }),
                }));
            }
            n
              ? (eL.toast.success("Deployment protection updated"), t(null))
              : eL.toast.error("Failed to update protection");
          } catch (e) {
            eL.toast.error("Failed to update protection");
          } finally {
            l(!1);
          }
        };
      return (0, el.jsxs)(el.Fragment, {
        children: [
          (0, el.jsx)(eh.default, {
            title: "Visibility",
            onBack: () => {
              t(null);
            },
          }),
          (0, el.jsx)(eu.PopoverContent, {
            className: "gap-4",
            children: (0, el.jsx)(eI, { chatId: e }),
          }),
          (0, el.jsxs)(eu.PopoverActions, {
            children: [
              (0, el.jsx)(ec.Button, {
                size: "sm",
                variant: "outline",
                onClick: () => t(null),
                disabled: o,
                type: "button",
                children: "Cancel",
              }),
              (0, el.jsx)(ec.Button, {
                size: "sm",
                onClick: g,
                disabled: o,
                children: (0, el.jsx)(ed.ActionStatus, {
                  isLoading: o,
                  loading: o,
                  children: "Save",
                }),
              }),
            ],
          }),
        ],
      });
    }
    var eU = t,
      eG = c,
      eW = B,
      eq = q,
      eZ = e.i(53223),
      eK = v,
      eY = e.i(985005),
      eJ = a,
      eQ = eH;
    function eX() {
      let e = (0, eQ.useIntegrationsApi)();
      return (0, eJ.useMemo)(() => {
        if ("ready" !== e.status) return null;
        let t = e.data.find(
          (e) => "Stripe" === e.name && e.isConnected && e.claimFlow,
        );
        return t?.claimFlow || null;
      }, [e]);
    }
    function e0({ chatId: e }) {
      let { setHasUnclaimedStripeSandbox: t, setStageIntent: n } = (0,
        eK.getChatDeploymentActions)(e),
        r = eX(),
        { actions: i } = (0, eY.useConnectIntegrationAtoms)(),
        s = () => {
          if (r)
            try {
              ((0, eZ.track)("ClickClaimSandbox", {
                integrationId: r.integrationConfigurationId,
                resourceId: r.resourceId,
              }),
                window.open(r.url, "_blank"),
                i.setPendingIntegrationCheck("Stripe"),
                t(!1),
                n("stripe-enter-keys"));
            } catch (e) {
              console.error("Error opening claim URL:", e);
            }
        },
        a = () => {
          (t(!1), n(null));
        },
        o = (0, eU.jsx)(eY.ConnectIntegration.Provider, {
          state: (0, eY.createForbiddenIntegrationState)("Stripe"),
          actions: { handleConnect: null },
          children: (0, eU.jsx)(eY.ConnectIntegration.Icon, {
            containerClassName: "size-6",
          }),
        });
      return (0, eU.jsxs)(eU.Fragment, {
        children: [
          (0, eU.jsx)(eG.PopoverContent, {
            children: (0, eU.jsx)(eW.EmptyState, {
              title: "Unclaimed Stripe Sandbox",
              variant: "warning",
              icon: o,
              children: (0, eU.jsxs)("ol", {
                className: "space-y-2 pt-2",
                children: [
                  (0, eU.jsx)(e1, {
                    number: 1,
                    children: "Claim your sandbox",
                  }),
                  (0, eU.jsx)(e1, {
                    number: 2,
                    children: "Copy live API keys from Stripe",
                  }),
                  (0, eU.jsx)(e1, {
                    number: 3,
                    children: "Add as production env vars in v0",
                  }),
                ],
              }),
            }),
          }),
          (0, eU.jsxs)(eG.PopoverActions, {
            children: [
              (0, eU.jsx)(eq.Button, {
                size: "sm",
                variant: "secondary",
                onClick: a,
                children: "Continue in Test Mode",
              }),
              (0, eU.jsx)(eq.Button, {
                size: "sm",
                onClick: s,
                children: "Claim & Add Keys",
              }),
            ],
          }),
        ],
      });
    }
    function e1({ number: e, children: t }) {
      return (0, eU.jsxs)("li", {
        className: "flex gap-2.5 items-center",
        children: [
          (0, eU.jsx)("div", {
            className:
              "flex size-5 shrink-0 items-center justify-center rounded-full bg-v0-gray-200 text-label-12 font-semibold text-v0-gray-1000",
            children: e,
          }),
          (0, eU.jsx)("span", { className: "text-label-13", children: t }),
        ],
      });
    }
    var e2 = t,
      e5 = a,
      e3 = c,
      e4 = q,
      e9 = d,
      e7 = ev,
      e6 = v,
      e8 = eH,
      te = eL,
      tt = w,
      tn = e.i(227152),
      tr = e.i(996174);
    function ti({ chatId: e }) {
      let [t, n] = (0, e5.useState)(""),
        [r, i] = (0, e5.useState)(""),
        [s, a] = (0, e5.useState)(!1),
        { setHasUnclaimedStripeSandbox: o, setStageIntent: l } = (0,
        e6.getChatDeploymentActions)(e),
        c = (0, e8.useIntegrationsApi)(),
        u = async () => {
          if (!t || !r)
            return void te.toast.error(
              "Secret key and publishable key are required",
            );
          if ("ready" !== c.status)
            return void te.toast.error("Unable to save keys at this time");
          a(!0);
          try {
            let e = [
                { key: "STRIPE_SECRET_KEY", value: t, targets: ["production"] },
                {
                  key: "STRIPE_PUBLISHABLE_KEY",
                  value: r,
                  targets: ["production"],
                },
                {
                  key: "NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY",
                  value: r,
                  targets: ["production"],
                },
              ],
              n = await c.update({ setEnvironmentVariables: e });
            if ("error" === n.status) return void te.toast.error(n.message);
            (te.toast.success("Stripe keys saved successfully"),
              o(!1),
              l(null));
          } catch (e) {
            (te.toast.error("Failed to save Stripe keys"),
              console.error("Error saving Stripe keys:", e));
          } finally {
            a(!1);
          }
        },
        d = () => {
          (o(!1), l(null));
        };
      return (0, e2.jsxs)(e2.Fragment, {
        children: [
          (0, e2.jsx)(e3.PopoverContent, {
            className: "p-0",
            children: (0, e2.jsx)(tt.PopoverHeading, {
              title: "Add Production Stripe Keys",
              titleSuffix: (0, e2.jsx)(tr.Tooltip, {
                content:
                  "These production keys will replace STRIPE_SECRET_KEY, NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY, and STRIPE_PUBLISHABLE_KEY in your production environment only. You can access these keys from the Stripe dashboard.",
                children: (0, e2.jsx)(tn.InformationFillSmall, {
                  className:
                    "shrink-0 text-v0-gray-600 hover:text-v0-gray-800 cursor-help",
                  size: 16,
                }),
              }),
              className: "p-4 border-b border-v0-alpha-400",
              children: (0, e2.jsxs)("div", {
                className: "space-y-4",
                children: [
                  (0, e2.jsxs)("div", {
                    className: "space-y-2",
                    children: [
                      (0, e2.jsx)(e7.Label, {
                        htmlFor: "secret-key",
                        children: "Secret Key *",
                      }),
                      (0, e2.jsx)(e9.Input, {
                        id: "secret-key",
                        type: "password",
                        placeholder: "sk_live_...",
                        value: t,
                        onChange: (e) => n(e.target.value),
                        disabled: s,
                      }),
                    ],
                  }),
                  (0, e2.jsxs)("div", {
                    className: "space-y-2",
                    children: [
                      (0, e2.jsx)(e7.Label, {
                        htmlFor: "publishable-key",
                        children: "Publishable Key *",
                      }),
                      (0, e2.jsx)(e9.Input, {
                        id: "publishable-key",
                        type: "text",
                        placeholder: "pk_live_...",
                        value: r,
                        onChange: (e) => i(e.target.value),
                        disabled: s,
                      }),
                    ],
                  }),
                ],
              }),
            }),
          }),
          (0, e2.jsxs)(e3.PopoverActions, {
            children: [
              (0, e2.jsx)(e4.Button, {
                size: "sm",
                variant: "secondary",
                onClick: d,
                disabled: s,
                children: "Continue in Test Mode",
              }),
              (0, e2.jsx)(e4.Button, {
                size: "sm",
                onClick: u,
                disabled: s,
                children: s ? "Saving..." : "Save Keys",
              }),
            ],
          }),
        ],
      });
    }
    function ts({ chatId: e }) {
      let o = (0, T.getChatDeploymentAtoms)(e),
        l = (0, n.useAtomValue)(o.stage),
        c = (0, a.useMemo)(() => {
          switch (l) {
            case "create":
              return (0, t.jsx)(M, { chatId: e });
            case "deployment":
              return (0, t.jsx)(r.DeploymentStage, { chatId: e });
            case "assign-domain":
              return (0, t.jsx)(i.AssignDomainStage, { chatId: e });
            case "deploy-warning":
              return (0, t.jsx)(G, { chatId: e });
            case "two-factor-error":
              return (0, t.jsx)(ee, { chatId: e });
            case "error":
              return (0, t.jsx)(eo, { chatId: e });
            case "password-protection":
              return (0, t.jsx)(e$, { chatId: e });
            case "stripe-claim-warning":
              return (0, t.jsx)(e0, { chatId: e });
            case "stripe-enter-keys":
              return (0, t.jsx)(ti, { chatId: e });
          }
        }, [e, l]);
      return (0, t.jsx)(s.TransitionNode, {
        ...s.PRESETS.popoverContent,
        children: (0, t.jsx)("div", {
          className: "flex flex-col",
          children: c,
        }),
      });
    }
    var ta = e.i(452703),
      to = k,
      tl = a,
      tc = k;
    function tu(e, t) {
      return (0, tc.useServerQuerySWR)(
        ["deployment", "screenshot"],
        { deploymentId: e },
        { refreshInterval: t && e ? 3e3 : void 0, stopFetch: !t },
      );
    }
    var td = ez;
    function th({ chatId: e }) {
      let [t, n] = (0, tl.useState)(void 0),
        { data: r } = (0, to.useServerQuerySWR)(
          ["chat", "externalMeta"],
          { chatId: e },
          { refreshInterval: t, suspense: !0 },
        );
      (0, tl.useEffect)(() => {
        let e;
        if (!r.ok || !r.value.deployment) return;
        let t = r.value.deployment.readyState,
          i = r.value.deployment.id,
          { setDeploymentStatus: s } = (0, ta.getDeploymentActions)(i);
        (s((0, td.ok)({ deployment: r.value.deployment })),
          ["QUEUED", "INITIALIZING", "NOTREADY"].includes(t) && (e = 500),
          ["BUILDING"].includes(t) && (e = 2e3),
          "READY" === t && (e = void 0),
          n(e));
      }, [r, n]);
      let i = r.ok ? r.value.deployment?.id : void 0,
        s =
          r.ok &&
          r.value.deployment?.readyState === "READY" &&
          !r.value.deployment.screenshotUrl,
        { data: a } = tu(r.ok ? r.value.deployment?.id : void 0, s);
      return (
        (0, tl.useEffect)(() => {
          if (a?.ok && a.value.url && i && r.ok && r.value.deployment) {
            let { setDeploymentStatus: e } = (0, ta.getDeploymentActions)(i);
            e(
              (0, td.ok)({
                deployment: {
                  ...r.value.deployment,
                  screenshotUrl: a.value.url,
                },
              }),
            );
          }
        }, [a, i, r]),
        { externalMeta: r }
      );
    }
    (e.s(["useSuspenseIntervalExternalMeta", () => th], 348841),
      e.s(["useHasDeployableChanges", () => ty], 56535));
    var tp = a,
      tm = D,
      tf = v,
      tg = n,
      tx = e.i(370912),
      tv = e.i(301331);
    function ty({ chatId: e }) {
      let t = (0, tm.useActiveBlockState)(),
        { getBlockCreatedAt: n } = (0, tx.useBlockCreatedAt)(),
        { currentBlockIndex: r } = (0, tv.useBlockHistory)({
          blockId: t?.id,
          searchAll: !0,
        }),
        i = (0, tf.getChatDeploymentAtoms)(e),
        s = (0, tg.useAtomValue)(i.externalMeta),
        a = s.ok ? s.value.deployment : void 0,
        { setActiveBlockVersionNumber: o, setHasDeployableChanges: l } = (0,
        tf.getChatDeploymentActions)(e),
        c = (e) => (e ? new Date(e).getTime() : 0),
        u = (0, tp.useMemo)(
          () =>
            !!t &&
            (c(t.lastEditedAt) > c(a?.createdAt) ||
              c(n(t.id)) > c(a?.createdAt)),
          [t, a, n],
        ),
        d = (0, tp.useMemo)(() => r + 1, [r]);
      return (
        (0, tp.useLayoutEffect)(() => {
          let e = requestAnimationFrame(() => {
            (l(u), o(d));
          });
          return () => cancelAnimationFrame(e);
        }, [u, l, o, d]),
        { hasDeployableChanges: u }
      );
    }
    var tb = n,
      tj = a,
      tw = eL,
      tC = v,
      tk = e.i(626085);
    function tS({ chatId: e }) {
      let t = (0, tC.getChatDeploymentAtoms)(e),
        n = (0, tb.useAtomValue)(t.externalMeta),
        r = n.ok ? n.value.deployment : void 0,
        i = (0, tb.useAtomValue)(t.isOpen),
        s = (0, tb.useAtomValue)(t.deploymentState),
        { triggerPassingState: a } = (0, tC.getChatDeploymentActions)(e),
        o = (0, tk.usePrevious)(s),
        l = (0, tj.useCallback)(() => {
          !i && r?.id && tw.toast.deployment({ id: r.id });
        }, [i, r?.id]);
      (0, tj.useEffect)(() => {
        r?.id &&
          o &&
          (["queued", "failed", "error", "not-deployed", "deploying"].includes(
            o,
          ) &&
            "building" === s &&
            l(),
          "building" === o && "failed" === s && (a("passing-error", 3e3), l()),
          "building" === o && "deployed" === s && (a("passing-deployed"), l()));
      }, [r?.id, o, s, l, a]);
    }
    (e.s(["useDeploymentPassingStates", () => tS], 712007),
      e.s(["useCheckStripeClaim", () => tD], 74992));
    var tN = a,
      tE = v,
      tA = n;
    function tD({ chatId: e }) {
      let t = eX(),
        { setHasUnclaimedStripeSandbox: n } = (0, tE.getChatDeploymentActions)(
          e,
        ),
        r = (0, tE.getChatDeploymentAtoms)(e),
        i = (0, tA.useAtomValue)(r.hasUnclaimedStripeSandbox),
        s = (0, tN.useCallback)(() => {
          if (i) return { set: !1 };
          let e = !!t;
          return (n(e), { set: e });
        }, [t, n, i]);
      return {
        prewarmStripeClaim: (0, tN.useCallback)(() => {
          s();
        }, [s]),
      };
    }
    var tI = j,
      tM = e.i(418625);
    function tT(e) {
      let { sie: t } = (0, tI.useFlags)(),
        {
          data: n,
          error: r,
          isLoading: i,
        } = (0, tM.default)(
          t ? `/chat/api/snowflake/snowflake-integration-status/${e}` : null,
          async (e) => {
            let t = await fetch(e);
            if (!t.ok)
              throw Error(
                `Failed to check Snowflake integration: ${t.status} ${t.statusText}`,
              );
            return t.json();
          },
          { revalidateOnFocus: !1 },
        );
      return {
        isConnected: t && (n?.isConnected ?? !1),
        isLoading: i,
        error: r,
      };
    }
    (e.s(["useSnowflakeIntegration", () => tT], 135224),
      e.s(["SnowflakePublishTrigger", () => t3], 383543));
    var tL = t,
      tP = e.i(89440),
      tR = e.i(365290),
      tF = e.i(228141),
      t_ = e.i(361103),
      tO = e.i(707827),
      tB = e.i(403055),
      tV = a,
      tz = s,
      tH = a,
      t$ = n,
      tU = tM,
      tG = e.i(227423),
      tW = D,
      tq = e.i(9654),
      tZ = e.i(314907);
    let tK = (0, tZ.atomFamily)((e) => (0, tq.atom)(null)),
      tY = (0, tZ.atomFamily)((e) => (0, tq.atom)(!1)),
      tJ = (0, tZ.atomFamily)((e) => (0, tq.atom)(null));
    function tQ(e) {
      return { stageIntent: tK(e), popoverOpen: tY(e), error: tJ(e) };
    }
    function tX(e) {
      let t = (0, tW.useActiveBlockId)();
      if (!e) throw Error("useSnowflakeDeployment requires a valid chatId");
      let n = tQ(e),
        r = (0, t$.useAtomValue)(n.stageIntent),
        i = (0, t$.useSetAtom)(n.stageIntent),
        s = (0, t$.useAtomValue)(n.error),
        a = (0, t$.useSetAtom)(n.error),
        {
          data: o,
          error: l,
          mutate: c,
        } = (0, tU.default)(
          t ? `/chat/api/snowflake/snowflake-deploy/${t}` : null,
          async (e) => {
            let t = await fetch(e);
            if (!t.ok) {
              if (404 === t.status) return null;
              throw Error("Failed to fetch deployment status");
            }
            return t.json();
          },
          {
            refreshInterval: (e) =>
              e?.status === "success" || e?.status === "error"
                ? 0
                : 2e3 * (e?.status === "pending" || e?.status === "deploying"),
            revalidateOnFocus: !1,
            dedupingInterval: 0,
          },
        ),
        { trigger: u, isMutating: d } = (0, tG.default)(
          t ? `/chat/api/snowflake/snowflake-deploy/${t}` : null,
          async (e) => {
            let t = await fetch(e, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({}),
            });
            if (!t.ok)
              throw Error(
                (await t.json()).error || "Failed to start deployment",
              );
            return t.json();
          },
          {
            onSuccess: () => {
              (i("publishing"), a(null));
            },
            onError: (e) => {
              (a(e instanceof Error ? e.message : "Failed to start deployment"),
                i(null));
            },
          },
        ),
        { trigger: h } = (0, tG.default)(
          t ? `/chat/api/snowflake/snowflake-deploy/${t}` : null,
          async (e) => {
            await fetch(e, { method: "DELETE" });
          },
          {
            onSuccess: () => {
              (i(null), a(null), c());
            },
          },
        ),
        p = (0, tH.useMemo)(
          () =>
            r ||
            (s
              ? "error"
              : o
                ? "pending" === o.status || "deploying" === o.status
                  ? "publishing"
                  : "success" === o.status
                    ? "success"
                    : "error" === o.status
                      ? "error"
                      : "configure"
                : "configure"),
          [r, s, o],
        );
      return (
        (0, tH.useEffect)(() => {
          "publishing" === r &&
            (o?.status === "success" || o?.status === "error") &&
            (i(null), a(null));
        }, [r, o?.status, i, a]),
        {
          deploymentStatus: o,
          stage: p,
          isDeploying: d,
          pollError: l,
          deploymentError: s,
          startDeployment: u,
          clearDeployment: h,
          revalidate: c,
        }
      );
    }
    e.s(["getSnowflakeAtoms", () => tQ], 84057);
    var t0 = e.i(758118);
    function t1({ className: e }) {
      return (0, tL.jsx)("svg", {
        width: "16",
        height: "16",
        viewBox: "0 0 16 16",
        fill: "currentColor",
        className: e,
        children: (0, tL.jsx)("image", {
          href: "/chat-static/icons/snowflake.svg",
          width: "16",
          height: "16",
        }),
      });
    }
    let t2 = (0, tP.cva)(
        "group relative flex h-7 cursor-pointer! items-center justify-center overflow-hidden whitespace-nowrap rounded-[6px] border px-0 w-7 sm:w-fit sm:px-2 sm:pr-2.5 font-medium",
        {
          variants: {
            variant: {
              primary:
                "text-v0-background-100 border-v0-gray-1000 bg-v0-gray-1000 hover:border-v0-gray-1000 hover:bg-v0-gray-1000",
              secondary:
                "bg-v0-background-300 hover:border-v0-alpha-400 border-v0-gray-200 text-v0-gray-1000 hover:bg-v0-gray-200",
              blue: "text-v0-background-100 border-v0-blue-700 bg-v0-blue-700",
              red: "text-v0-background-100 border-v0-red-700 bg-v0-red-700",
            },
          },
        },
      ),
      t5 = (0, tP.cva)(
        "border-v0-background-200 h-3 min-h-3 w-3 min-w-3 rounded-full border-[1.5px]",
        {
          variants: {
            variant: { success: "bg-v0-blue-700", error: "bg-v0-red-700" },
          },
        },
      );
    function t3({ chatId: e, ...t }) {
      let { stage: n, deploymentStatus: r } = tX(e),
        i = (0, tV.useMemo)(
          () => ("error" === n ? "red" : "success" === n ? "blue" : "primary"),
          [n],
        ),
        s = (0, tV.useMemo)(
          () => ("success" === n ? "success" : "error" === n ? "error" : null),
          [n],
        );
      return (0, tL.jsxs)("div", {
        className: "text-label-14 relative",
        children: [
          (0, tL.jsx)("button", {
            "data-testid": "snowflake-publish-button",
            className: (0, tB.cn)(t2({ variant: i }), t.className),
            style: {
              ...(0, tR.transitionStyles)([
                "background",
                "color",
                "border-color",
              ]),
              ...t.style,
            },
            ...t,
            children: (0, tL.jsx)(t4, { chatId: e }),
          }),
          (0, tL.jsx)("div", {
            className: "absolute right-[-5px] top-[-4px]",
            children: (0, tL.jsx)("div", {
              className: t5({ variant: s }),
              style: {
                transform: s
                  ? "scale(1) translate(0px, 0px)"
                  : "scale(0.7) translate(-2px, 2px)",
                ...(0, t0.visibleStylesIf)(!!s),
                ...(0, tR.transitionStyles)(
                  ["opacity", "transform", "background"],
                  { duration: 200 },
                ),
              },
            }),
          }),
        ],
      });
    }
    function t4({ chatId: e }) {
      let { stage: t } = tX(e),
        n = (0, tV.useMemo)(() => {
          switch (t) {
            case "configure":
              return { icon: void 0, text: "Publish" };
            case "publishing":
              return {
                icon: (0, tL.jsx)(tO.Spinner, { size: 16 }),
                text: "Publish",
              };
            case "success":
              return {
                icon: (0, tL.jsx)(tF.CheckCircleFill, {}),
                text: "Publish",
              };
            case "error":
              return { icon: (0, tL.jsx)(t_.StopFill, {}), text: "Publish" };
          }
        }, [t]);
      return (0, tL.jsx)(tz.TransitionNode, {
        ...tz.PRESETS.buttonContent,
        children: (0, tL.jsxs)("span", {
          className: "flex items-center justify-center",
          children: [
            (0, tL.jsx)("span", {
              className: "sm:hidden",
              children: n.icon || (0, tL.jsx)(t1, { className: "w-4 h-4" }),
            }),
            (0, tL.jsxs)("span", {
              className: "hidden sm:flex items-center gap-1.5 ",
              children: [n.icon, n.text],
            }),
          ],
        }),
      });
    }
    e.s(["SnowflakePopoverContent", () => nR], 866838);
    var t9 = t,
      t7 = a,
      t6 = t,
      t8 = c,
      ne = q,
      nt = w;
    function nn({ chatId: e }) {
      let { startDeployment: t, isDeploying: n } = tX(e),
        r = async () => {
          try {
            await t();
          } catch (e) {
            console.error("Deploy failed:", e);
          }
        };
      return (0, t6.jsxs)(t6.Fragment, {
        children: [
          (0, t6.jsx)(t8.PopoverContent, {
            className: "p-0 max-w-[440px]",
            children: (0, t6.jsxs)(nt.PopoverHeading, {
              title: "Deploy to Snowflake",
              className: "p-4 border-b border-v0-alpha-400",
              children: [
                "Deploy your ",
                (0, t6.jsx)("span", { className: "font-mono", children: "v0" }),
                " app to Snowflake with one click. Your app will be hosted on Snowflake's infrastructure.",
              ],
            }),
          }),
          (0, t6.jsx)(t8.PopoverActions, {
            children: (0, t6.jsx)(ne.Button, {
              onClick: r,
              disabled: n,
              size: "sm",
              children: "Deploy to Snowflake",
            }),
          }),
        ],
      });
    }
    var nr = t,
      ni = a,
      ns = e.i(431141),
      na = c,
      no = q,
      nl = eS,
      nc = e.i(304649);
    let nu = [
      { id: "preparing", label: "Preparing" },
      { id: "uploading", label: "Uploading" },
      { id: "building", label: "Building" },
      { id: "deploying", label: "Deploying" },
      { id: "finalizing", label: "Finishing" },
    ];
    function nd(e) {
      try {
        return JSON.parse(e);
      } catch {
        return { type: "status", level: "info", msg: e };
      }
    }
    function nh(e) {
      if (!e.length) return "preparing";
      for (let t = e.length - 1; t >= 0; t--) {
        let n = e[t];
        if (!n) continue;
        let r = nd(n);
        if ("stage" === r.type && r.stage) return r.stage;
      }
      return "preparing";
    }
    function np(e) {
      return "stage" === e.type;
    }
    function nm({ phase: e, currentPhase: t, index: n, currentIndex: r }) {
      let i = e.id === t,
        s = n < r,
        a = n > r;
      return (0, nr.jsxs)("div", {
        className: "flex flex-col items-center gap-1.5",
        children: [
          (0, nr.jsx)("div", {
            className: (0, nc.cn)(
              "relative w-2 h-2 rounded-full transition-all duration-500",
              s && "bg-v0-blue-500",
              i && "bg-v0-blue-500 scale-125",
              a && "bg-v0-gray-300",
            ),
            children:
              i &&
              (0, nr.jsx)("div", {
                className:
                  "absolute inset-0 rounded-full bg-v0-blue-500 animate-ping opacity-75",
              }),
          }),
          (0, nr.jsx)("span", {
            className: (0, nc.cn)(
              "text-[10px] font-medium transition-colors duration-300",
              i && "text-v0-gray-900",
              s && "text-v0-blue-600",
              a && "text-v0-gray-400",
            ),
            children: e.label,
          }),
        ],
      });
    }
    function nf({ log: e }) {
      let t = (0, ni.useMemo)(() => nd(e), [e]);
      return (0, nr.jsx)("div", {
        className: (0, nc.cn)(
          "relative px-2 py-[2px] first:pt-1 last:pb-1",
          "error" === t.level && "bg-v0-red-100 text-v0-red-900",
          "warning" === t.level && "bg-v0-amber-100 text-v0-amber-900",
          "info" === t.level && "text-v0-gray-600",
        ),
        style: { wordBreak: "break-all", overflowWrap: "anywhere" },
        children: t.msg,
      });
    }
    function ng() {
      return (0, nr.jsxs)("div", {
        className: "relative",
        children: [
          (0, nr.jsx)("div", {
            className: "absolute -inset-4 rounded-full bg-[#29B5E8]/15 blur-xl",
            style: { animation: "pulse 2.5s ease-in-out infinite" },
          }),
          (0, nr.jsxs)("div", {
            className: "relative w-16 h-16",
            children: [
              (0, nr.jsx)("svg", {
                className: "absolute -inset-2 w-20 h-20 text-[#29B5E8]",
                viewBox: "0 0 80 80",
                fill: "none",
                style: { animation: "spin 10s linear infinite" },
                children: (0, nr.jsx)("circle", {
                  cx: "40",
                  cy: "40",
                  r: "36",
                  stroke: "currentColor",
                  strokeWidth: "1",
                  strokeDasharray: "6 10",
                  opacity: "0.4",
                }),
              }),
              (0, nr.jsx)("div", {
                className:
                  "relative w-16 h-16 flex items-center justify-center",
                children: (0, nr.jsx)(ns.default, {
                  src: "/chat-static/icons/snowflake.svg",
                  alt: "Snowflake",
                  width: 40,
                  height: 40,
                  className: "relative z-10",
                }),
              }),
            ],
          }),
          (0, nr.jsx)("style", {
            children: `
        @keyframes pulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.6; transform: scale(1.15); }
        }
      `,
          }),
        ],
      });
    }
    function nx({ chatId: e }) {
      let { deploymentStatus: t, clearDeployment: n } = tX(e),
        r = (0, ni.useRef)(null),
        { user: i } = (0, nl.useUser)(),
        [s, a] = (0, ni.useState)(!1),
        o = (0, ni.useMemo)(() => nh(t?.logs || []), [t?.logs]),
        l = nu.findIndex((e) => e.id === o),
        c = (0, ni.useMemo)(
          () => (t?.logs || []).filter((e) => !!e && !np(nd(e))),
          [t?.logs],
        );
      (0, ni.useEffect)(() => {
        s && r.current?.scrollIntoView({ behavior: "smooth" });
      }, [c.length, s]);
      let u = (0, ni.useMemo)(() => {
        let e = t?.logs || [];
        for (let t = e.length - 1; t >= 0; t--) {
          let n = e[t];
          if (!n) continue;
          let r = nd(n);
          if ("status" === r.type && r.msg) return r.msg;
        }
        return "Initializing deployment...";
      }, [t?.logs]);
      return (0, nr.jsxs)(nr.Fragment, {
        children: [
          (0, nr.jsx)(na.PopoverContent, {
            className: "p-0 max-w-[440px]",
            children: (0, nr.jsxs)("div", {
              className: "flex flex-col",
              children: [
                (0, nr.jsxs)("div", {
                  className: "px-6 pt-8 pb-6 flex flex-col items-center gap-6",
                  children: [
                    (0, nr.jsx)(ng, {}),
                    (0, nr.jsxs)("div", {
                      className: "text-center space-y-1",
                      children: [
                        (0, nr.jsx)("h3", {
                          className: "text-sm font-semibold text-v0-gray-900",
                          children: "Deploying to Snowflake",
                        }),
                        (0, nr.jsx)("p", {
                          className:
                            "text-xs text-v0-gray-500 max-w-[280px] line-clamp-1",
                          children: u,
                        }),
                      ],
                    }),
                    (0, nr.jsxs)("div", {
                      className: "relative w-full px-2",
                      children: [
                        (0, nr.jsx)("div", {
                          className:
                            "absolute top-[3px] left-[calc(10%+4px)] right-[calc(10%+4px)] h-px bg-v0-gray-200",
                        }),
                        (0, nr.jsx)("div", {
                          className:
                            "absolute top-[3px] left-[calc(10%+4px)] h-px bg-v0-blue-500 transition-all duration-700",
                          style: {
                            width: `${Math.max(0, (l / (nu.length - 1)) * 80)}%`,
                          },
                        }),
                        (0, nr.jsx)("div", {
                          className: "flex items-start justify-between",
                          children: nu.map((e, t) =>
                            (0, nr.jsx)(
                              nm,
                              {
                                phase: e,
                                currentPhase: o,
                                index: t,
                                currentIndex: l,
                              },
                              e.id,
                            ),
                          ),
                        }),
                      ],
                    }),
                  ],
                }),
                (0, nr.jsxs)("div", {
                  className: "border-t",
                  children: [
                    (0, nr.jsxs)("button", {
                      onClick: () => a(!s),
                      className:
                        "w-full px-4 py-2 flex items-center justify-between text-xs text-v0-gray-500 hover:bg-v0-gray-50 transition-colors",
                      children: [
                        (0, nr.jsx)("span", {
                          className: "font-medium",
                          children: s ? "Hide logs" : "Show logs",
                        }),
                        (0, nr.jsx)("svg", {
                          className: (0, nc.cn)(
                            "w-4 h-4 transition-transform duration-200",
                            s && "rotate-180",
                          ),
                          fill: "none",
                          viewBox: "0 0 24 24",
                          stroke: "currentColor",
                          children: (0, nr.jsx)("path", {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M19 9l-7 7-7-7",
                          }),
                        }),
                      ],
                    }),
                    s &&
                      (0, nr.jsx)("div", {
                        className:
                          "bg-v0-gray-50 border-t max-h-[120px] overflow-y-auto overflow-x-hidden",
                        children: (0, nr.jsx)("div", {
                          className: "text-[10px] font-mono flex flex-col",
                          children:
                            c.length > 0
                              ? (0, nr.jsxs)(nr.Fragment, {
                                  children: [
                                    c.map((e, t) =>
                                      (0, nr.jsx)(nf, { log: e }, t),
                                    ),
                                    (0, nr.jsx)("div", { ref: r }),
                                  ],
                                })
                              : (0, nr.jsx)("div", {
                                  className: "px-2 py-2 text-v0-gray-400",
                                  children: "Waiting for logs...",
                                }),
                        }),
                      }),
                  ],
                }),
              ],
            }),
          }),
          i?.isAdminMode &&
            (0, nr.jsx)(na.PopoverActions, {
              children: (0, nr.jsx)(no.Button, {
                onClick: () => n(),
                variant: "secondary",
                size: "sm",
                className: "w-full",
                children: "Stop & Clear Status (Admin)",
              }),
            }),
        ],
      });
    }
    var nv = t,
      ny = n,
      nb = c,
      nj = q,
      nw = tF,
      nC = e.i(1740),
      nk = eS,
      nS = tr;
    function nN({ chatId: e }) {
      let {
          deploymentStatus: t,
          startDeployment: n,
          clearDeployment: r,
          isDeploying: i,
        } = tX(e),
        s = (0, ny.useSetAtom)(tQ(e).popoverOpen),
        { user: a } = (0, nk.useUser)(),
        o = async () => {
          try {
            await n();
          } catch (e) {
            console.error("Redeploy failed:", e);
          }
        };
      return (0, nv.jsxs)(nv.Fragment, {
        children: [
          (0, nv.jsxs)(nb.PopoverContent, {
            className: "p-0 max-w-[440px]",
            children: [
              (0, nv.jsxs)("div", {
                className:
                  "px-2.5 py-1.5 border-b flex items-center justify-between",
                children: [
                  (0, nv.jsx)("div", {
                    className: "h-8 flex items-center pl-2 text-sm font-medium",
                    children: "Deployed to Snowflake",
                  }),
                  (0, nv.jsxs)(nS.TooltipRoot, {
                    children: [
                      (0, nv.jsx)(nS.TooltipTrigger, {
                        asChild: !0,
                        children: (0, nv.jsx)("button", {
                          onClick: o,
                          disabled: i,
                          className:
                            "p-1.5 rounded-md text-v0-gray-500 hover:text-v0-gray-900 hover:bg-v0-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                          children: (0, nv.jsx)(nC.RefreshClockwise, {
                            size: 16,
                          }),
                        }),
                      }),
                      (0, nv.jsx)(nS.TooltipContent, { children: "Re-deploy" }),
                    ],
                  }),
                ],
              }),
              (0, nv.jsx)("div", {
                className: "flex flex-col gap-4 p-4",
                children: (0, nv.jsxs)("div", {
                  className: "flex items-center gap-3",
                  children: [
                    (0, nv.jsx)("span", {
                      className: "text-v0-green-700",
                      children: (0, nv.jsx)(nw.CheckCircleFill, { size: 24 }),
                    }),
                    (0, nv.jsx)("div", {
                      children: (0, nv.jsx)("p", {
                        className: "text-label-14 text-v0-gray-900",
                        children: "Your app has been deployed to Snowflake",
                      }),
                    }),
                  ],
                }),
              }),
            ],
          }),
          (0, nv.jsx)(nb.PopoverActions, {
            children: (0, nv.jsxs)("div", {
              className: "flex flex-col gap-2 w-full",
              children: [
                t?.appUrl
                  ? (0, nv.jsxs)("div", {
                      className: "flex flex-row gap-1",
                      children: [
                        (0, nv.jsx)(nj.Button, {
                          size: "sm",
                          className: "w-1/2",
                          onClick: () => s(!1),
                          variant: "secondary",
                          children: "Close",
                        }),
                        (0, nv.jsx)(nj.Button, {
                          asChild: !0,
                          size: "sm",
                          className: "w-1/2",
                          children: (0, nv.jsx)("a", {
                            href: t.appUrl,
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: "Visit",
                          }),
                        }),
                      ],
                    })
                  : (0, nv.jsx)(nj.Button, {
                      size: "sm",
                      className: "w-full",
                      onClick: () => s(!1),
                      children: "Done",
                    }),
                a?.isAdminMode &&
                  (0, nv.jsx)(nj.Button, {
                    onClick: () => r(),
                    variant: "secondary",
                    size: "sm",
                    className: "w-full",
                    children: "Clear Status (Admin)",
                  }),
              ],
            }),
          }),
        ],
      });
    }
    var nE = t,
      nA = c,
      nD = F,
      nI = q,
      nM = B,
      nT = eS;
    function nL({ chatId: e }) {
      let {
          deploymentStatus: t,
          deploymentError: n,
          startDeployment: r,
          clearDeployment: i,
          isDeploying: s,
        } = tX(e),
        { user: a } = (0, nT.useUser)(),
        o = async () => {
          try {
            await r();
          } catch (e) {
            console.error("Retry failed:", e);
          }
        },
        l = n || t?.error || "Failed to deploy to Snowflake";
      return (0, nE.jsxs)(nE.Fragment, {
        children: [
          (0, nE.jsx)(nA.PopoverContent, {
            className: "max-w-[440px]",
            children: (0, nE.jsx)(nM.EmptyState, {
              title: "Deployment Failed",
              variant: "error",
              icon: (0, nE.jsx)(nD.Stop, {}),
              children: l,
            }),
          }),
          (0, nE.jsx)(nA.PopoverActions, {
            children: (0, nE.jsxs)("div", {
              className: "flex flex-col gap-2 w-full",
              children: [
                (0, nE.jsx)(nI.Button, {
                  size: "sm",
                  onClick: o,
                  disabled: s,
                  className: "w-full",
                  children: "Try Again",
                }),
                a?.isAdminMode &&
                  (0, nE.jsx)(nI.Button, {
                    onClick: () => i(),
                    variant: "secondary",
                    size: "sm",
                    className: "w-full",
                    children: "Clear Status (Admin)",
                  }),
              ],
            }),
          }),
        ],
      });
    }
    var nP = s;
    function nR({ chatId: e }) {
      let { stage: t } = tX(e),
        n = (0, t7.useMemo)(() => {
          switch (t) {
            case "configure":
              return (0, t9.jsx)(nn, { chatId: e });
            case "publishing":
              return (0, t9.jsx)(nx, { chatId: e });
            case "success":
              return (0, t9.jsx)(nN, { chatId: e });
            case "error":
              return (0, t9.jsx)(nL, { chatId: e });
          }
        }, [e, t]);
      return (0, t9.jsx)(nP.TransitionNode, {
        ...nP.PRESETS.popoverContent,
        children: (0, t9.jsx)("div", {
          className: "flex flex-col",
          children: n,
        }),
      });
    }
    let nF = (0,
    e.i(877318)
      .withNewIcon)(`<path d="M4 6.25V14.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12ZM9.079 12.6869C9.38957 14.0127 10.5795 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.6293 9 9.47333 9.91924 9.1149 11.1749C8.05096 10.9929 7.0611 10.4857 6.28769 9.71231C5.51428 8.9389 5.0071 7.94904 4.82513 6.8851C6.08076 6.52667 7 5.37069 7 4C7 2.34315 5.65685 1 4 1C2.34315 0.999999 1 2.34315 1 4C1 5.42051 1.98728 6.61042 3.3131 6.921C3.51279 8.37102 4.18025 9.72619 5.22703 10.773C6.2738 11.8197 7.62898 12.4872 9.079 12.6869ZM2.5 4C2.5 4.82843 3.17157 5.5 4 5.5C4.82843 5.5 5.5 4.82843 5.5 4C5.5 3.17157 4.82843 2.5 4 2.5C3.17157 2.5 2.5 3.17157 2.5 4Z" fill="currentColor"/>`);
    e.s(["GitMerge", 0, nF], 175457);
  },
  613922,
  975479,
  (e) => {
    "use strict";
    e.s(["DeploymentButton", () => _], 613922);
    var t = e.i(324834),
      n = e.i(14791),
      r = e.i(574768),
      i = e.i(762585),
      s = e.i(576191),
      a = e.i(510266),
      o = e.i(348841),
      l = e.i(56535),
      c = e.i(712007);
    e.i(472428);
    var u = e.i(296900),
      d = e.i(393799),
      h = e.i(373998),
      p = e.i(280419),
      m = e.i(74992),
      f = e.i(135224),
      g = e.i(383543),
      x = e.i(866838),
      v = e.i(84057),
      y = e.i(242759),
      b = e.i(646805),
      j = t,
      w = r,
      C = h,
      k = d,
      S = e.i(176248),
      N = e.i(175457),
      E = e.i(89625),
      A = e.i(633661),
      D = e.i(290151),
      I = u,
      M = e.i(86617),
      T = i,
      L = s,
      P = e.i(520234);
    function R({ chatId: e }) {
      let t = (0, C.getChatDeploymentAtoms)(e),
        n = (0, C.getChatDeploymentActions)(e),
        r = (0, k.useAtomValue)(t.openLocation),
        { data: i } = (0, M.useGitConnection)(e),
        s = i?.ok && i.value.connected,
        { data: a } = (0, I.useServerQuerySWR)(
          ["chat", "gitStatus"],
          { chatId: e },
          { stopFetch: !s, suspense: !0, revalidateNever: !0 },
        ),
        o = a.ok ? a.value.pr?.state : null,
        l = (0, P.match)(o)
          .with("merged", () => ({
            variant: "secondary",
            label: "View PR",
            icon: (0, j.jsx)(N.GitMerge, {
              className: "text-v0-purple-700! size-4",
            }),
          }))
          .with("open", () => ({
            variant: "secondary",
            label: "View PR",
            icon: (0, j.jsx)(N.GitMerge, {
              className: "text-v0-green-800! size-4",
            }),
          }))
          .otherwise(() => ({
            variant: "default",
            label: "Publish",
            icon: (0, j.jsx)(E.GitPullRequest, {}),
          }));
      return (0, j.jsxs)(w.Popover, {
        open: "chat-header" === r,
        onOpenChange: (e) => {
          n.setIsOpenForLocation(e, "chat-header");
        },
        children: [
          (0, j.jsx)(w.PopoverTrigger, {
            asChild: !0,
            children: (0, j.jsxs)(S.Button, {
              "data-testid": "deploy-block-button",
              variant: l.variant,
              className: "h-7 rounded-md px-2",
              size: "sm",
              children: [l.icon, l.label],
            }),
          }),
          (0, j.jsx)(w.PopoverContent, {
            className: "sm:w-[440px] max-w-screen origin-top-right",
            align: "end",
            alignOffset: 1,
            withOverlay: !0,
            children: (0, j.jsx)(A.PullRequestProvider, {
              chatId: e,
              children: (0, j.jsx)(D.OpenPRPopoverContent, {}),
            }),
          }),
        ],
      });
    }
    function F({ chatId: e }) {
      return (0, j.jsx)(L.Suspense, {
        fallback: (0, j.jsx)(T.Skeleton, {
          className: "h-7 w-[69px] rounded-[6px]",
        }),
        children: (0, j.jsx)(R, { chatId: e }),
      });
    }
    function _({ activeBlockId: e, chatId: n, canWriteToChat: r }) {
      return (0, t.jsx)(s.Suspense, {
        fallback: (0, t.jsx)(O, {}),
        children: (0, t.jsx)(B, {
          activeBlockId: e,
          chatId: n,
          canWriteToChat: r,
        }),
      });
    }
    function O() {
      return (0, t.jsx)(i.Skeleton, {
        className: "h-7 w-[69px] rounded-[6px]",
      });
    }
    function B({ activeBlockId: e, chatId: i, canWriteToChat: s }) {
      (0, u.useServerQuerySWR)(
        ["scoped", "team"],
        {},
        { suspense: !0, revalidateNever: !0, stopFetch: !0 },
      );
      let { data: j } = (0, u.useServerQuerySWR)(
        ["chat", "attributes"],
        { chatId: i },
        { suspense: !0 },
      );
      ((0, o.useSuspenseIntervalExternalMeta)({ chatId: i }),
        (0, l.useHasDeployableChanges)({ chatId: i }),
        (0, c.useDeploymentPassingStates)({ chatId: i }));
      let w = (0, h.getChatDeploymentAtoms)(i),
        C = (0, h.getChatDeploymentActions)(i),
        k = (0, d.useAtomValue)(w.openLocation),
        { prewarmDeployWarning: S } = (0, p.usePrewarmDeployWarnings)({
          chatId: i,
        }),
        { prewarmStripeClaim: N } = (0, m.useCheckStripeClaim)({ chatId: i }),
        { isConnected: E, isLoading: A } = (0, f.useSnowflakeIntegration)(i),
        D = (0, v.getSnowflakeAtoms)(i),
        I = (0, d.useAtomValue)(D.popoverOpen),
        M = (0, d.useSetAtom)(D.popoverOpen),
        { gwe: T } = (0, y.useFlags)();
      return T && j.ok && j.value.hasGitConnection
        ? (0, t.jsx)(F, { chatId: i })
        : s
          ? E && !A
            ? (0, t.jsxs)(r.Popover, {
                open: I,
                onOpenChange: M,
                children: [
                  (0, t.jsx)(r.PopoverTrigger, {
                    asChild: !0,
                    children: (0, t.jsx)(g.SnowflakePublishTrigger, {
                      chatId: i,
                    }),
                  }),
                  (0, t.jsx)(r.PopoverContent, {
                    className:
                      "min-w-[440px] w-fit max-w-screen origin-top-right",
                    align: "end",
                    alignOffset: 1,
                    onOpenAutoFocus: (e) => {
                      e.preventDefault();
                    },
                    children: (0, t.jsx)(x.SnowflakePopoverContent, {
                      chatId: i,
                    }),
                  }),
                ],
              })
            : (0, t.jsxs)(r.Popover, {
                open: "chat-header" === k,
                onOpenChange: (e) => {
                  C.setIsOpenForLocation(e, "chat-header");
                },
                children: [
                  (0, t.jsx)(r.PopoverTrigger, {
                    asChild: !0,
                    children: (0, t.jsx)(n.ChatDeploymentTrigger, {
                      chatId: i,
                      onMouseOver: () => {
                        (S(!1), N());
                      },
                    }),
                  }),
                  (0, t.jsx)(r.PopoverContent, {
                    className:
                      "sm:min-w-[440px] w-fit max-w-[90vw] origin-top-right",
                    align: "end",
                    alignOffset: 1,
                    withOverlay: !0,
                    children: (0, t.jsx)(
                      a.SuspendingChatDeploymentPopoverContent,
                      { chatId: i },
                    ),
                  }),
                ],
              })
          : e
            ? (0, t.jsx)(b.RemixBlockButton, { blockId: e, canWriteToChat: s })
            : null;
    }
    e.s(["OldBlockVersionButtons", () => Y], 975479);
    var V = t,
      z = e.i(92479),
      H = e.i(449381),
      $ = e.i(301331),
      U = S,
      G = e.i(76866),
      W = e.i(534607),
      q = s,
      Z = e.i(127169),
      K = e.i(443265);
    function Y({ currentVersion: e, latestVersion: t }) {
      let n = (0, H.useActiveBlockState)(),
        { history: r } = (0, $.useBlockHistory)({
          blockId: n?.id,
          searchAll: !0,
        }),
        {
          restoreCurrentBlock: i,
          exitToLatest: s,
          isRestoring: a,
        } = (0, G.useRestoreBlockVersion)(n?.id),
        {
          isStreaming: o,
          isLoading: l,
          isRestoring: c,
          isSyncing: u,
        } = (0, z.useChatLoadingState)(),
        d = (0, q.useMemo)(() => o || l || c || u, [o, l, c, u]),
        h = (0, W.useMac)(),
        p = (0, q.useCallback)(() => {
          n && s(n);
        }, [s, n]),
        m = (0, q.useCallback)(() => {
          i();
        }, [i]);
      return (
        (0, Z.useShortcut)(
          (e) => {
            "KeyQ" === e.code &&
              (e.altKey || e.metaKey) &&
              (e.preventDefault(), p());
          },
          [p],
        ),
        (0, V.jsxs)("div", {
          className: "flex items-center gap-[6px]",
          children: [
            (0, V.jsxs)(U.Button, {
              variant: "outline",
              size: "sm",
              tooltip: {
                content: (0, V.jsxs)(V.Fragment, {
                  children: [
                    (0, V.jsx)("span", { children: "Go to latest version" }),
                    (0, V.jsxs)(K.KbdGroup, {
                      children: [
                        h
                          ? (0, V.jsx)(K.Kbd, { children: "" })
                          : (0, V.jsx)(K.Kbd, { children: "Alt" }),
                        (0, V.jsx)(K.Kbd, { children: "Q" }),
                      ],
                    }),
                  ],
                }),
              },
              onClick: p,
              disabled: !n || 0 === r.length || d || a,
              className: "flex items-center gap-2 h-7 rounded-[6px] px-2",
              children: [
                (0, V.jsx)("span", {
                  className: "hidden sm:flex",
                  children: "Back to Latest",
                }),
                (0, V.jsx)("span", {
                  className: "sm:hidden",
                  children: "Latest",
                }),
              ],
            }),
            (0, V.jsx)(U.Button, {
              variant: "blue",
              size: "sm",
              tooltip: `Restore v${e}`,
              onClick: m,
              disabled: !n || d || a,
              className: "h-7 rounded-[6px] px-2",
              children: a ? "Restoring..." : "Restore",
            }),
          ],
        })
      );
    }
  },
  430681,
  189716,
  (e) => {
    "use strict";
    e.s(["useAutoPrewarmDeployWarnings", () => i], 430681);
    var t = e.i(449381),
      n = e.i(280419),
      r = e.i(18547);
    function i({ chatId: e }) {
      let i = (0, t.useActiveBlockState)(),
        { prewarmDeployWarning: s } = (0, n.usePrewarmDeployWarnings)({
          chatId: e,
        });
      (0, r.useChatMessageFinishedListener)(() => {
        e && i?.id && "code-project" === i.type && s(!1);
      });
    }
    var s = e.i(324834),
      a = e.i(576191);
    class o extends a.Component {
      state = { error: null, errorId: void 0 };
      componentDidCatch(e) {
        this.setState({ error: e, errorId: this.props.id });
      }
      render() {
        if (this.props.id === this.state.errorId && this.state.error) {
          let e = this.props.fallback;
          return (0, s.jsx)(e, { error: this.state.error });
        }
        return this.props.children;
      }
    }
    e.s(["ErrorBoundary", () => o], 189716);
  },
  620678,
  (e) => {
    "use strict";
    e.s([
      "ChatHeaderActionsErrorBoundary",
      () => E,
      "ChatHeaderActionsSkeleton",
      () => D,
      "SuspendingChatHeaderActions",
      () => I,
      "isSettingsSheetOpenAtom",
      () => S,
      "settingsSheetTabAtom",
      () => N,
    ]);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(762585),
      i = e.i(564997),
      s = e.i(209819),
      a = e.i(625402),
      o = e.i(667660),
      l = e.i(449381),
      c = e.i(697856),
      u = e.i(499282),
      d = e.i(9654),
      h = e.i(5894),
      p = e.i(184645),
      m = e.i(618262),
      f = e.i(344290),
      g = e.i(613922),
      x = e.i(262553),
      v = e.i(519738),
      y = e.i(975479),
      b = e.i(430681);
    e.i(472428);
    var j = e.i(296900),
      w = e.i(189716),
      C = e.i(775846),
      k = e.i(242759);
    let S = (0, d.atom)(!1),
      N = (0, d.atom)("overview");
    function E({ children: e }) {
      return (0, t.jsx)(w.ErrorBoundary, { fallback: A, children: e });
    }
    function A() {
      return (0, t.jsx)("div", {
        className: "text-v0-red-700",
        children: null,
      });
    }
    function D() {
      return (0, t.jsxs)("div", {
        className: "flex items-center gap-1.5",
        style: {
          maskImage: "linear-gradient(to left, black 0%, transparent 100%)",
        },
        children: [
          (0, t.jsx)(r.Skeleton, { className: "size-7" }),
          (0, t.jsx)(r.Skeleton, { className: "size-7" }),
          (0, t.jsx)(r.Skeleton, { className: "h-7 w-[56px]" }),
          (0, t.jsx)(r.Skeleton, { className: "h-7 w-[69px]" }),
        ],
      });
    }
    function I({ chatId: e, immutable: d }) {
      let { user: w } = (0, o.useActiveScope)(),
        { data: S } = (0, j.useServerQuerySWR)(
          ["chat", "attributes"],
          { chatId: e },
          { suspense: !0, stopFetch: d },
        ),
        N = S.ok ? S.value.project : null,
        E = S.ok && S.value.canWriteToChat,
        A = S.ok && S.value.hasBlock,
        I = S.ok && S.value.authorId === w?.id,
        M = (0, l.useActiveBlockState)(e),
        { chatPrivacy: T } = (0, s.useChatPrivacy)(),
        { getBlockShared: L } = (0, c.useSharedBlocks)(),
        { isReadOnlyMode: P, isLatest: R } = (0, x.useReadOnlyMode)(),
        { currentVersion: F, latestVersion: _ } = (0, v.useBlockVersionInfo)(
          M?.id,
        );
      (0, b.useAutoPrewarmDeployWarnings)({ chatId: e });
      let { gwe: O } = (0, k.useFlags)(),
        B = (0, n.useMemo)(
          () => !E && ("public" === T || "unlisted" === T || "team" === T),
          [E, T],
        ),
        V = (0, n.useMemo)(() => M && (0, u.canBeDeployed)(M), [M]),
        z = (0, n.useMemo)(() => !!M && L(M.id), [M, L]),
        H = (0, n.useMemo)(() => w?.isImpersonation, [w?.isImpersonation]),
        $ = M && A,
        U = (0, n.useMemo)(
          () =>
            !I || O
              ? null
              : (0, t.jsx)(C.ReferralButton, {
                  className: "hidden sm:inline-flex",
                }),
          [I, O],
        ),
        G = (0, n.useMemo)(
          () =>
            (!P && E) || H
              ? (0, t.jsx)(
                  n.Suspense,
                  {
                    fallback: (0, t.jsx)(r.Skeleton, { className: "size-7" }),
                    children: (0, t.jsx)(m.SuspendingSettingsButton, {
                      screen: "chat",
                      project:
                        N && "projectId" in N && "creatorId" in N
                          ? { projectId: N.projectId, creatorId: N.creatorId }
                          : void 0,
                    }),
                  },
                  e,
                )
              : null,
          [P, E, H, e, N],
        ),
        W = (0, n.useMemo)(() => {
          if (B && $)
            return (0, t.jsx)(h.FlagBlockButton, {
              variant: "secondary",
              blockId: M.id,
            });
        }, [B, $, M]),
        q = (0, n.useMemo)(() => {
          if (E && !P && $ && e && V && !z && !O)
            return (0, t.jsx)("div", {
              className: "hidden sm:block",
              children: (0, t.jsx)(p.GitSyncButton, { chatId: e }),
            });
        }, [E, P, $, e, V, z, O]),
        Z = (0, n.useMemo)(() => {
          if ((!E || R) && e) return (0, t.jsx)(f.ChatShareButton, {});
        }, [E, R, e]),
        K = (0, n.useMemo)(() => {
          if (R && e && V && !z)
            return (0, t.jsx)(g.DeploymentButton, {
              activeBlockId: M?.id,
              chatId: e,
              canWriteToChat: E,
            });
        }, [E, R, e, V, z, M]),
        Y = (0, n.useMemo)(() => {
          if (P)
            return (0, t.jsx)(y.OldBlockVersionButtons, {
              currentVersion: F,
              latestVersion: _,
            });
        }, [P, F, _]),
        J = (0, n.useMemo)(() => {
          if (w?.isAdminMode && e)
            return (0, t.jsxs)(t.Fragment, {
              children: [
                (0, t.jsx)(a.OpenInInternalButton, {
                  chatId: e,
                  className: "sm:hidden md:flex",
                }),
                (0, t.jsx)(i.ExportChatButton, { className: "hidden md:flex" }),
              ],
            });
        }, [w?.isAdminMode, e]);
      return void 0 === M && A
        ? (0, t.jsx)(D, {})
        : (0, t.jsxs)("div", {
            className: "flex items-center gap-1.5",
            children: [U, G, J, W, q, Y, Z, K],
          });
    }
  },
  101387,
  (e) => {
    "use strict";
    e.s(["SuggestedAction", () => z, "SuggestedActions", () => V], 101387);
    var t = e.i(324834),
      n = e.i(576191),
      r = t,
      i = e.i(404836),
      s = e.i(176248),
      a = n,
      o = e.i(917772),
      l = e.i(144019),
      c = e.i(92479),
      u = e.i(449381),
      d = e.i(393799),
      h = e.i(675120),
      p = e.i(707827);
    e.i(563948);
    var m = e.i(407562),
      f = e.i(620678),
      g = e.i(403055),
      x = e.i(667660),
      v = e.i(538553);
    function y({ className: e, text: t = "Integrations" }) {
      let { hasVercelWritePermission: n } = (0, x.useActiveScope)(),
        y = (0, d.useSetAtom)(f.isSettingsSheetOpenAtom),
        j = (0, d.useSetAtom)(f.settingsSheetTabAtom),
        [w, C] = (0, a.useState)("idle"),
        [k, S] = (0, a.useState)(!1),
        { chatId: N } = (0, c.useChatId)(),
        E = (0, u.useActiveBlockState)(),
        A = (0, l.useAutoCreateProject)({ chatId: N, activeBlock: E }),
        D = (0, a.useMemo)(
          () =>
            [i.NeonIcon, i.SupabaseIcon, i.UpstashIcon, i.BlobIcon].map(
              (e, t) =>
                (0, r.jsx)(
                  "div",
                  {
                    className:
                      "bg-v0-background-100 flex h-full w-full items-center justify-center rounded-full transition-colors duration-200 group-hover:bg-v0-gray-200",
                    children: (0, r.jsx)(e, {}),
                  },
                  t,
                ),
            ),
          [],
        ),
        I = (0, a.useCallback)(async () => {
          if ("loading" === w) return;
          C("loading");
          let e = await A();
          (C("idle"), e.ok)
            ? setTimeout(() => {
                (y(!0), j("integrations"));
              }, 100)
            : m.toast.error("Failed to create project");
        }, [w, A, y, j]),
        M = (0, a.useMemo)(() => {
          switch (w) {
            case "idle":
              return (0, r.jsxs)(b, {
                children: [
                  (0, r.jsx)(o.MarchingChildren, {
                    shouldMarch: k,
                    size: 18,
                    overlap: 4,
                    children: D,
                  }),
                  t,
                ],
              });
            case "loading":
              return (0, r.jsxs)(b, {
                children: [
                  (0, r.jsx)(p.Spinner, { size: 16 }),
                  "Connecting...",
                ],
              });
          }
        }, [D, w, k, t]);
      return (0, r.jsx)(v.RbacTooltip, {
        show: !n,
        requiredRole: "V0Builder",
        children: (0, r.jsx)(s.Button, {
          size: "sm",
          variant: "secondary",
          className: (0, g.cn)("h-7 w-[144px] select-none rounded-md", e),
          onMouseEnter: () => S(!0),
          onMouseLeave: () => S(!1),
          onClick: I,
          "data-slot": "integrations-connect-button",
          disabled: !n,
          children: (0, r.jsx)(h.TransitionNode, {
            renderKey: w,
            ...h.PRESETS.buttonContent,
            children: M,
          }),
        }),
      });
    }
    function b({ children: e }) {
      return (0, r.jsx)("span", {
        className: "flex items-center gap-1",
        children: e,
      });
    }
    var j = e.i(745197),
      w = e.i(323194),
      C = e.i(276302),
      k = e.i(229983),
      S = e.i(472166),
      N = e.i(53223),
      E = e.i(589654),
      A = e.i(657736),
      D = n;
    let I = !1;
    function M() {
      let [e, t] = (0, D.useState)(I);
      return (
        (0, D.useEffect)(() => {
          ((I = !0), t(!0));
        }, []),
        e
      );
    }
    var T = e.i(668887);
    e.i(904347);
    var L = e.i(37737),
      P = e.i(297239),
      R = e.i(572934),
      F = e.i(418929),
      _ = d;
    e.i(168204);
    var O = e.i(225695),
      B = e.i(819969);
    function V({ elementProps: e, children: r, isLast: i, messageId: s }) {
      let { atoms: a } = (0, F.useCurrentChatPrompt)(),
        o = (0, _.useAtomValue)(a.editingMessage),
        [l, c] = (0, n.useState)(!1),
        [u] = (0, R.useSuggestionsSetting)(),
        { atoms: d } = (0, B.useCurrentChat)(),
        h = (0, _.useAtomValue)(d.canWriteToChat),
        p = M(),
        m = (0, T.useDesignModeEnabled)();
      (0, n.useEffect)(() => {
        c(!0);
      }, [s, c]);
      let { showBannerLimit: f } = (0, j.useShowUpgradeBanner)();
      return !f && !o && !m && i && h && p && u
        ? (0, t.jsx)(E.AnimatePresence, {
            initial: !1,
            mode: "wait",
            children: l && (0, t.jsx)(H, { elementProps: e, children: r }),
          })
        : null;
    }
    function z({ name: e, description: r, elementProps: i, messageId: s }) {
      let [a] = (0, j.useRateLimit)(),
        o = !!(a?.remaining !== void 0 && a.remaining <= 0),
        { setShowSignInDialog: l } = (0, w.useSignInDialog)(),
        { submit: c } = (0, S.useV0Chat)(),
        u = (0, n.useCallback)(() => {
          l({ content: (0, O.createMDXMessageContent)(r) });
        }, [r, l]),
        d = !!(0, n.useMemo)(() => (0, C.getAnonId)(), []),
        h = (0, n.useCallback)(() => {
          d
            ? u()
            : o
              ? (0, L.openDialog)({ type: "upgradePlan" })
              : (c({
                  action: "new",
                  content: (0, O.createMDXMessageContent)(r),
                }),
                (0, N.track)("ClickSuggestedAction", {
                  actionName: e,
                  actionDescription: r,
                  messageId: s,
                }));
        }, [d, o, c, r, e, s, u]);
      return (0, t.jsx)(k.SuggestedNextStepButton, {
        ...i,
        onClick: h,
        children: e,
      });
    }
    function H({ elementProps: e, children: n }) {
      let r = (0, P.useT)();
      return (0, t.jsxs)(A.motion.div, {
        ...e,
        "data-slot": "prompt-actions-container",
        className:
          "bg-v0-background-100 relative rounded-lg pb-2.5 pt-2 [&_[data-slot=integrations-connect-button]>div]:w-full! **:data-[slot=integrations-connect-button]:w-fit [&_button]:h-7 [&_button]:rounded-lg",
        initial: { opacity: 0, y: 32 },
        animate: { opacity: 1, y: 0 },
        exit: { opacity: 0, y: 32 },
        transition: { duration: 0.25, ease: "easeInOut" },
        children: [
          (0, t.jsx)("div", {
            className:
              "from-background absolute -top-8 left-0 right-2 z-10 h-8 bg-linear-to-t to-transparent",
          }),
          (0, t.jsx)("span", {
            className:
              "w-fit !m-0 self-start px-0.5 py-1 text-label-14 text-v0-gray-900",
            children: r("promptForm.suggestions"),
          }),
          (0, t.jsxs)("div", {
            className: "flex flex-wrap gap-2 py-1.5",
            children: [
              (0, t.jsx)(y, { text: r("integrations.addIntegration") }),
              n,
            ],
          }),
        ],
      });
    }
  },
  243954,
  (e) => {
    "use strict";
    let t = (0, e.i(819696).default)("Minus", [
      ["path", { d: "M5 12h14", key: "1ays0h" }],
    ]);
    e.s(["default", () => t]);
  },
  393182,
  (e) => {
    e.v({
      alignEnd: "trace-viewer-module__L-vySG__alignEnd",
      alignStart: "trace-viewer-module__L-vySG__alignStart",
      ancestorDuration: "trace-viewer-module__L-vySG__ancestorDuration",
      ancestorLine: "trace-viewer-module__L-vySG__ancestorLine",
      ancestorLineContainer:
        "trace-viewer-module__L-vySG__ancestorLineContainer",
      ancestorName: "trace-viewer-module__L-vySG__ancestorName",
      ancestorNode: "trace-viewer-module__L-vySG__ancestorNode",
      ancestorText: "trace-viewer-module__L-vySG__ancestorText",
      childRow: "trace-viewer-module__L-vySG__childRow",
      collapsed: "trace-viewer-module__L-vySG__collapsed",
      color0: "trace-viewer-module__L-vySG__color0",
      color1: "trace-viewer-module__L-vySG__color1",
      color2: "trace-viewer-module__L-vySG__color2",
      color3: "trace-viewer-module__L-vySG__color3",
      colorHighlight: "trace-viewer-module__L-vySG__colorHighlight",
      colorVercel: "trace-viewer-module__L-vySG__colorVercel",
      cursorMarker: "trace-viewer-module__L-vySG__cursorMarker",
      cursorMarkerContainer:
        "trace-viewer-module__L-vySG__cursorMarkerContainer",
      cursorMarkerLabel: "trace-viewer-module__L-vySG__cursorMarkerLabel",
      cursorMarkerLabelContainer:
        "trace-viewer-module__L-vySG__cursorMarkerLabelContainer",
      cursorMarkerStickyParent:
        "trace-viewer-module__L-vySG__cursorMarkerStickyParent",
      cursorSelection: "trace-viewer-module__L-vySG__cursorSelection",
      detailGroup: "trace-viewer-module__L-vySG__detailGroup",
      detailHeading: "trace-viewer-module__L-vySG__detailHeading",
      detailHeadingIcon: "trace-viewer-module__L-vySG__detailHeadingIcon",
      divider: "trace-viewer-module__L-vySG__divider",
      eventDiamond: "trace-viewer-module__L-vySG__eventDiamond",
      eventMarker: "trace-viewer-module__L-vySG__eventMarker",
      eventMarkers: "trace-viewer-module__L-vySG__eventMarkers",
      eventMarkersContainer:
        "trace-viewer-module__L-vySG__eventMarkersContainer",
      eventName: "trace-viewer-module__L-vySG__eventName",
      eventTimestamp: "trace-viewer-module__L-vySG__eventTimestamp",
      hidden: "trace-viewer-module__L-vySG__hidden",
      hoverInfo: "trace-viewer-module__L-vySG__hoverInfo",
      huge: "trace-viewer-module__L-vySG__huge",
      inert: "trace-viewer-module__L-vySG__inert",
      infraSpanDescription: "trace-viewer-module__L-vySG__infraSpanDescription",
      mapCanvas: "trace-viewer-module__L-vySG__mapCanvas",
      mapContainer: "trace-viewer-module__L-vySG__mapContainer",
      mapThumb: "trace-viewer-module__L-vySG__mapThumb",
      marker: "trace-viewer-module__L-vySG__marker",
      markerLabel: "trace-viewer-module__L-vySG__markerLabel",
      markers: "trace-viewer-module__L-vySG__markers",
      markersContainer: "trace-viewer-module__L-vySG__markersContainer",
      mobile: "trace-viewer-module__L-vySG__mobile",
      notch: "trace-viewer-module__L-vySG__notch",
      searchBar: "trace-viewer-module__L-vySG__searchBar",
      searchInput: "trace-viewer-module__L-vySG__searchInput",
      selected: "trace-viewer-module__L-vySG__selected",
      skeleton: "trace-viewer-module__L-vySG__skeleton",
      small: "trace-viewer-module__L-vySG__small",
      "span-skeleton": "trace-viewer-module__L-vySG__span-skeleton",
      spanDetailPanel: "trace-viewer-module__L-vySG__spanDetailPanel",
      spanDetailPanelAttribute:
        "trace-viewer-module__L-vySG__spanDetailPanelAttribute",
      spanDetailPanelAttributeKey:
        "trace-viewer-module__L-vySG__spanDetailPanelAttributeKey",
      spanDetailPanelAttributeValue:
        "trace-viewer-module__L-vySG__spanDetailPanelAttributeValue",
      spanDetailPanelBody: "trace-viewer-module__L-vySG__spanDetailPanelBody",
      spanDetailPanelClose: "trace-viewer-module__L-vySG__spanDetailPanelClose",
      spanDetailPanelCloseVerticalRule:
        "trace-viewer-module__L-vySG__spanDetailPanelCloseVerticalRule",
      spanDetailPanelCorner:
        "trace-viewer-module__L-vySG__spanDetailPanelCorner",
      spanDetailPanelDuration:
        "trace-viewer-module__L-vySG__spanDetailPanelDuration",
      spanDetailPanelName: "trace-viewer-module__L-vySG__spanDetailPanelName",
      spanDetailPanelQuickLink:
        "trace-viewer-module__L-vySG__spanDetailPanelQuickLink",
      spanDetailPanelQuickLinkLabel:
        "trace-viewer-module__L-vySG__spanDetailPanelQuickLinkLabel",
      spanDetailPanelResizer:
        "trace-viewer-module__L-vySG__spanDetailPanelResizer",
      spanDetailPanelTop: "trace-viewer-module__L-vySG__spanDetailPanelTop",
      spanDetailPanelTopInfo:
        "trace-viewer-module__L-vySG__spanDetailPanelTopInfo",
      spanDetailPanelTraceViewer:
        "trace-viewer-module__L-vySG__spanDetailPanelTraceViewer",
      spanDetailPanelTruncatedHeading:
        "trace-viewer-module__L-vySG__spanDetailPanelTruncatedHeading",
      spanDuration: "trace-viewer-module__L-vySG__spanDuration",
      spanName: "trace-viewer-module__L-vySG__spanName",
      spanNameDetailPanel: "trace-viewer-module__L-vySG__spanNameDetailPanel",
      spanNode: "trace-viewer-module__L-vySG__spanNode",
      spanNodeEvent: "trace-viewer-module__L-vySG__spanNodeEvent",
      spanSpacer: "trace-viewer-module__L-vySG__spanSpacer",
      timeline: "trace-viewer-module__L-vySG__timeline",
      traceNode: "trace-viewer-module__L-vySG__traceNode",
      traceViewer: "trace-viewer-module__L-vySG__traceViewer",
      traceViewerContent: "trace-viewer-module__L-vySG__traceViewerContent",
      unlit: "trace-viewer-module__L-vySG__unlit",
      xHover: "trace-viewer-module__L-vySG__xHover",
      "zoom-buttons-fade-in":
        "trace-viewer-module__L-vySG__zoom-buttons-fade-in",
      zoomButton: "trace-viewer-module__L-vySG__zoomButton",
      zoomButtonGroup: "trace-viewer-module__L-vySG__zoomButtonGroup",
      zoomButtonTraceViewer:
        "trace-viewer-module__L-vySG__zoomButtonTraceViewer",
    });
  },
  422547,
  (e) => {
    e.v({
      line: "spinner-module__MT3H9a__line",
      spin: "spinner-module__MT3H9a__spin",
    });
  },
  60407,
  (e) => {
    e.v({
      reset: "reset-module__TvwMbG__reset",
      visuallyHidden: "reset-module__TvwMbG__visuallyHidden",
    });
  },
  476133,
  (e) => {
    e.v({
      base: "button-module__eNO1GG__base " + e.i(60407).reset,
      button: "button-module__eNO1GG__button " + e.i(60407).reset,
      center: "button-module__eNO1GG__center",
      circle: "button-module__eNO1GG__circle",
      content: "button-module__eNO1GG__content",
      customHoverStyles: "button-module__eNO1GG__customHoverStyles",
      customStyles: "button-module__eNO1GG__customStyles",
      flex: "button-module__eNO1GG__flex",
      flexGrow: "button-module__eNO1GG__flexGrow",
      grow: "button-module__eNO1GG__grow",
      invert: "button-module__eNO1GG__invert",
      large: "button-module__eNO1GG__large",
      loading: "button-module__eNO1GG__loading",
      prefix: "button-module__eNO1GG__prefix",
      responsive: "button-module__eNO1GG__responsive",
      rounded: "button-module__eNO1GG__rounded",
      secondary: "button-module__eNO1GG__secondary",
      shadow: "button-module__eNO1GG__shadow",
      shape: "button-module__eNO1GG__shape",
      small: "button-module__eNO1GG__small",
      start: "button-module__eNO1GG__start",
      suffix: "button-module__eNO1GG__suffix",
      tertiary: "button-module__eNO1GG__tertiary",
      tiny: "button-module__eNO1GG__tiny",
    });
  },
  646909,
  (e) => {
    e.v({
      debug: "stack-module__1MrCyW__debug",
      padding: "stack-module__1MrCyW__padding",
      stack: "stack-module__1MrCyW__stack",
    });
  },
  580769,
  (e) => {
    e.v({
      action: "note-module__vy4f3W__action",
      center: "note-module__vy4f3W__center",
      content: "note-module__vy4f3W__content",
      disabled: "note-module__vy4f3W__disabled",
      hasLabel: "note-module__vy4f3W__hasLabel",
      large: "note-module__vy4f3W__large",
      note: "note-module__vy4f3W__note",
      small: "note-module__vy4f3W__small",
    });
  },
  522387,
  (e) => {
    e.v({
      clamp: "text-module__Cbnwyq__clamp",
      monospace: "text-module__Cbnwyq__monospace",
      nowrap: "text-module__Cbnwyq__nowrap",
      truncate: "text-module__Cbnwyq__truncate",
      wrapper: "text-module__Cbnwyq__wrapper",
    });
  },
  334660,
  (e) => {
    e.v({
      alwaysUnderline: "link-module___yGtdG__alwaysUnderline",
      blend: "link-module___yGtdG__blend",
      disabled: "link-module___yGtdG__disabled",
      external: "link-module___yGtdG__external",
      highlight: "link-module___yGtdG__highlight",
      link: "link-module___yGtdG__link",
      primary: "link-module___yGtdG__primary",
      secondary: "link-module___yGtdG__secondary",
      underline: "link-module___yGtdG__underline",
    });
  },
  239236,
  (e) => {
    e.v({
      inline: "skeleton-module__VYvCuW__inline",
      loaded: "skeleton-module__VYvCuW__loaded",
      loading: "skeleton-module__VYvCuW__loading",
      noAnimation: "skeleton-module__VYvCuW__noAnimation",
      pill: "skeleton-module__VYvCuW__pill",
      rounded: "skeleton-module__VYvCuW__rounded",
      show: "skeleton-module__VYvCuW__show",
      skeleton: "skeleton-module__VYvCuW__skeleton",
      squared: "skeleton-module__VYvCuW__squared",
      wrapper: "skeleton-module__VYvCuW__wrapper",
    });
  },
  581255,
  (e) => {
    e.v(
      e.b([
        "static/chunks/d15f73004af34f07.js",
        "static/chunks/turbopack-91e254e33f43f4bd.js",
      ]),
    );
  },
  911390,
  (e) => {
    e.v({
      "action-link": "error-module__q0UXgW__action-link",
      error: "error-module__q0UXgW__error",
      label: "error-module__q0UXgW__label",
      large: "error-module__q0UXgW__large",
      small: "error-module__q0UXgW__small",
      text: "error-module__q0UXgW__text",
    });
  },
  55641,
  (e) => {
    e.v({
      capitalize: "label-module__BTEuVG__capitalize",
      input: "label-module__BTEuVG__input",
      label: "label-module__BTEuVG__label",
    });
  },
  919196,
  (e) => {
    e.v({
      container: "input-module__kp3miG__container",
      error: "input-module__kp3miG__error",
      input: "input-module__kp3miG__input",
      keyboardFocus: "input-module__kp3miG__keyboardFocus",
      large: "input-module__kp3miG__large",
      mediumSmall: "input-module__kp3miG__mediumSmall",
      noPrefixStyle: "input-module__kp3miG__noPrefixStyle",
      noSuffixStyle: "input-module__kp3miG__noSuffixStyle",
      prefix: "input-module__kp3miG__prefix",
      rounded: "input-module__kp3miG__rounded",
      small: "input-module__kp3miG__small",
      suffix: "input-module__kp3miG__suffix",
      xSmall: "input-module__kp3miG__xSmall",
    });
  },
  94603,
  (e) => {
    e.v({ kbd: "kbd-module__H7v-jG__kbd", small: "kbd-module__H7v-jG__small" });
  },
  904593,
  (e) => {
    e.v({
      button: "clearable-module__JZlfFW__button " + e.i(60407).reset,
      cmdk: "clearable-module__JZlfFW__cmdk",
      command: "clearable-module__JZlfFW__command",
      disabled: "clearable-module__JZlfFW__disabled",
      k: "clearable-module__JZlfFW__k",
      kbd: "clearable-module__JZlfFW__kbd",
      suffixContainer: "clearable-module__JZlfFW__suffixContainer",
    });
  },
  299014,
  (e, t, n) => {
    "use strict";
    var r = e.i(134542);
    (Object.defineProperty(n, "__esModule", { value: !0 }),
      (n.default = function (e) {
        var t = 4,
          n = e.length,
          i = n % t;
        if (!i) return e;
        var s = n,
          a = t - i,
          o = n + a,
          l = r.Buffer.alloc(o);
        for (l.write(e); a--; ) l.write("=", s++);
        return l.toString();
      }));
  },
  239598,
  (e, t, n) => {
    "use strict";
    var r = e.i(134542);
    Object.defineProperty(n, "__esModule", { value: !0 });
    var i = e.r(299014);
    function s(e, t) {
      return (void 0 === t && (t = "utf8"), r.Buffer.isBuffer(e))
        ? l(e.toString("base64"))
        : l(r.Buffer.from(e, t).toString("base64"));
    }
    function a(e, t) {
      return (
        void 0 === t && (t = "utf8"),
        r.Buffer.from(o(e), "base64").toString(t)
      );
    }
    function o(e) {
      return (
        (e = e.toString()),
        i.default(e).replace(/\-/g, "+").replace(/_/g, "/")
      );
    }
    function l(e) {
      return e.replace(/=/g, "").replace(/\+/g, "-").replace(/\//g, "_");
    }
    function c(e) {
      return r.Buffer.from(o(e), "base64");
    }
    var u = s;
    ((u.encode = s),
      (u.decode = a),
      (u.toBase64 = o),
      (u.fromBase64 = l),
      (u.toBuffer = c),
      (n.default = u));
  },
  335249,
  (e, t, n) => {
    ((t.exports = e.r(239598).default), (t.exports.default = t.exports));
  },
  302998,
  968552,
  490838,
  (e) => {
    "use strict";
    let t;
    var n,
      r = e.i(324834),
      i = e.i(707827),
      s = e.i(376346),
      a = e.i(60339),
      o = e.i(678845),
      l = e.i(621553),
      c = e.i(243954),
      c = c,
      u = r,
      d = e.i(576191),
      h = e.i(722978),
      p = e.i(393182),
      m = r,
      f = d,
      g = h,
      x = r,
      v = d,
      y = e.i(654335),
      b = h;
    function j(...e) {
      return (...t) => {
        for (let n of e) "function" == typeof n && n(...t);
      };
    }
    var w = d;
    let C =
      "undefined" != typeof document ? w.default.useLayoutEffect : () => {};
    var k = d;
    let S = null != (n = k.default.useInsertionEffect) ? n : C;
    function N(e) {
      let t = (0, k.useRef)(null);
      return (
        S(() => {
          t.current = e;
        }, [e]),
        (0, k.useCallback)((...e) => {
          let n = t.current;
          return null == n ? void 0 : n(...e);
        }, [])
      );
    }
    var E = e.i(439235),
      A = d;
    let D = { prefix: String(Math.round(1e10 * Math.random())), current: 0 },
      I = A.default.createContext(D),
      M = A.default.createContext(!1);
    "undefined" != typeof window &&
      window.document &&
      window.document.createElement;
    new WeakMap();
    (A.default.useId,
      "undefined" != typeof window &&
        window.document &&
        window.document.createElement);
    let T = new Map();
    function L(e, t) {
      if (e === t) return e;
      let n = T.get(e);
      if (n) return (n.forEach((e) => (e.current = t)), t);
      let r = T.get(t);
      return r ? (r.forEach((t) => (t.current = e)), e) : t;
    }
    "undefined" != typeof FinalizationRegistry &&
      (t = new FinalizationRegistry((e) => {
        T.delete(e);
      }));
    var P = e.i(7284);
    function R(...e) {
      let t = { ...e[0] };
      for (let n = 1; n < e.length; n++) {
        let r = e[n];
        for (let e in r) {
          let n = t[e],
            i = r[e];
          "function" == typeof n &&
          "function" == typeof i &&
          "o" === e[0] &&
          "n" === e[1] &&
          e.charCodeAt(2) >= 65 &&
          90 >= e.charCodeAt(2)
            ? (t[e] = j(n, i))
            : ("className" === e || "UNSAFE_className" === e) &&
                "string" == typeof n &&
                "string" == typeof i
              ? (t[e] = (0, P.default)(n, i))
              : "id" === e && n && i
                ? (t.id = L(n, i))
                : (t[e] = void 0 !== i ? i : n);
        }
      }
      return t;
    }
    let F = new Set(["id"]),
      _ = new Set([
        "aria-label",
        "aria-labelledby",
        "aria-describedby",
        "aria-details",
      ]),
      O = new Set([
        "href",
        "hrefLang",
        "target",
        "rel",
        "download",
        "ping",
        "referrerPolicy",
      ]),
      B = new Set(["dir", "lang", "hidden", "inert", "translate"]),
      V = new Set([
        "onClick",
        "onAuxClick",
        "onContextMenu",
        "onDoubleClick",
        "onMouseDown",
        "onMouseEnter",
        "onMouseLeave",
        "onMouseMove",
        "onMouseOut",
        "onMouseOver",
        "onMouseUp",
        "onTouchCancel",
        "onTouchEnd",
        "onTouchMove",
        "onTouchStart",
        "onPointerDown",
        "onPointerMove",
        "onPointerUp",
        "onPointerCancel",
        "onPointerEnter",
        "onPointerLeave",
        "onPointerOver",
        "onPointerOut",
        "onGotPointerCapture",
        "onLostPointerCapture",
        "onScroll",
        "onWheel",
        "onAnimationStart",
        "onAnimationEnd",
        "onAnimationIteration",
        "onTransitionCancel",
        "onTransitionEnd",
        "onTransitionRun",
        "onTransitionStart",
      ]),
      z = /^(data-.*)$/;
    function H(e, t = {}) {
      let {
          labelable: n,
          isLink: r,
          global: i,
          events: s = i,
          propNames: a,
        } = t,
        o = {};
      for (let t in e)
        Object.prototype.hasOwnProperty.call(e, t) &&
          (F.has(t) ||
            (n && _.has(t)) ||
            (r && O.has(t)) ||
            (i && B.has(t)) ||
            (s && V.has(t)) ||
            (t.endsWith("Capture") && V.has(t.slice(0, -7))) ||
            (null == a ? void 0 : a.has(t)) ||
            z.test(t)) &&
          (o[t] = e[t]);
      return o;
    }
    let $ = (e) => {
        var t;
        return null != (t = null == e ? void 0 : e.ownerDocument)
          ? t
          : document;
      },
      U = (e) =>
        e && "window" in e && e.window === e ? e : $(e).defaultView || window;
    function G(e) {
      return (
        null !== e &&
        "object" == typeof e &&
        "nodeType" in e &&
        "number" == typeof e.nodeType
      );
    }
    function W(e) {
      return G(e) && e.nodeType === Node.DOCUMENT_FRAGMENT_NODE && "host" in e;
    }
    let q =
      "undefined" != typeof Element && "checkVisibility" in Element.prototype;
    function Z(e) {
      let t = U(e);
      if (!(e instanceof t.HTMLElement) && !(e instanceof t.SVGElement))
        return !1;
      let { display: n, visibility: r } = e.style,
        i = "none" !== n && "hidden" !== r && "collapse" !== r;
      if (i) {
        let { getComputedStyle: t } = e.ownerDocument.defaultView,
          { display: n, visibility: r } = t(e);
        i = "none" !== n && "hidden" !== r && "collapse" !== r;
      }
      return i;
    }
    function K(e, t) {
      return (
        !e.hasAttribute("hidden") &&
        !e.hasAttribute("data-react-aria-prevent-focus") &&
        ("DETAILS" !== e.nodeName ||
          !t ||
          "SUMMARY" === t.nodeName ||
          e.hasAttribute("open"))
      );
    }
    function Y(e, t) {
      return q
        ? e.checkVisibility()
        : "#comment" !== e.nodeName &&
            Z(e) &&
            K(e, t) &&
            (!e.parentElement || Y(e.parentElement, e));
    }
    let J = [
        "input:not([disabled]):not([type=hidden])",
        "select:not([disabled])",
        "textarea:not([disabled])",
        "button:not([disabled])",
        "a[href]",
        "area[href]",
        "summary",
        "iframe",
        "object",
        "embed",
        "audio[controls]",
        "video[controls]",
        '[contenteditable]:not([contenteditable^="false"])',
        "permission",
      ],
      Q =
        J.join(":not([hidden]),") + ",[tabindex]:not([disabled]):not([hidden])";
    function X(e) {
      return e.matches(Q) && Y(e) && !ee(e);
    }
    function ee(e) {
      let t = e;
      for (; null != t; ) {
        if (t instanceof t.ownerDocument.defaultView.HTMLElement && t.inert)
          return !0;
        t = t.parentElement;
      }
      return !1;
    }
    function et(e) {
      if (er()) e.focus({ preventScroll: !0 });
      else {
        let t = ei(e);
        (e.focus(), es(t));
      }
    }
    (J.push('[tabindex]:not([tabindex="-1"]):not([disabled])'),
      J.join(':not([hidden]):not([tabindex="-1"]),'));
    let en = null;
    function er() {
      if (null == en) {
        en = !1;
        try {
          document.createElement("div").focus({
            get preventScroll() {
              return ((en = !0), !0);
            },
          });
        } catch {}
      }
      return en;
    }
    function ei(e) {
      let t = e.parentNode,
        n = [],
        r = document.scrollingElement || document.documentElement;
      for (; t instanceof HTMLElement && t !== r; )
        ((t.offsetHeight < t.scrollHeight || t.offsetWidth < t.scrollWidth) &&
          n.push({
            element: t,
            scrollTop: t.scrollTop,
            scrollLeft: t.scrollLeft,
          }),
          (t = t.parentNode));
      return (
        r instanceof HTMLElement &&
          n.push({
            element: r,
            scrollTop: r.scrollTop,
            scrollLeft: r.scrollLeft,
          }),
        n
      );
    }
    function es(e) {
      for (let { element: t, scrollTop: n, scrollLeft: r } of e)
        ((t.scrollTop = n), (t.scrollLeft = r));
    }
    var ea = d;
    function eo(e) {
      let t = e;
      return (
        (t.nativeEvent = e),
        (t.isDefaultPrevented = () => t.defaultPrevented),
        (t.isPropagationStopped = () => t.cancelBubble),
        (t.persist = () => {}),
        t
      );
    }
    function el(e, t) {
      (Object.defineProperty(e, "target", { value: t }),
        Object.defineProperty(e, "currentTarget", { value: t }));
    }
    function ec(e) {
      let t = (0, ea.useRef)({ isFocused: !1, observer: null });
      C(() => {
        let e = t.current;
        return () => {
          e.observer && (e.observer.disconnect(), (e.observer = null));
        };
      }, []);
      let n = N((t) => {
        null == e || e(t);
      });
      return (0, ea.useCallback)(
        (e) => {
          if (
            e.target instanceof HTMLButtonElement ||
            e.target instanceof HTMLInputElement ||
            e.target instanceof HTMLTextAreaElement ||
            e.target instanceof HTMLSelectElement
          ) {
            t.current.isFocused = !0;
            let r = e.target,
              i = (e) => {
                ((t.current.isFocused = !1),
                  r.disabled && n(eo(e)),
                  t.current.observer &&
                    (t.current.observer.disconnect(),
                    (t.current.observer = null)));
              };
            (r.addEventListener("focusout", i, { once: !0 }),
              (t.current.observer = new MutationObserver(() => {
                if (t.current.isFocused && r.disabled) {
                  var e;
                  null == (e = t.current.observer) || e.disconnect();
                  let n =
                    r === document.activeElement
                      ? null
                      : document.activeElement;
                  (r.dispatchEvent(
                    new FocusEvent("blur", { relatedTarget: n }),
                  ),
                    r.dispatchEvent(
                      new FocusEvent("focusout", {
                        bubbles: !0,
                        relatedTarget: n,
                      }),
                    ));
                }
              })),
              t.current.observer.observe(r, {
                attributes: !0,
                attributeFilter: ["disabled"],
              }));
          }
        },
        [n],
      );
    }
    let eu = !1;
    function ed(e) {
      for (; e && !X(e); ) e = e.parentElement;
      let t = U(e),
        n = t.document.activeElement;
      if (!n || n === e) return;
      eu = !0;
      let r = !1,
        i = (e) => {
          (e.target === n || r) && e.stopImmediatePropagation();
        },
        s = (t) => {
          (t.target === n || r) &&
            (t.stopImmediatePropagation(), e || r || ((r = !0), et(n), l()));
        },
        a = (t) => {
          (t.target === e || r) && t.stopImmediatePropagation();
        },
        o = (t) => {
          (t.target === e || r) &&
            (t.stopImmediatePropagation(), r || ((r = !0), et(n), l()));
        };
      (t.addEventListener("blur", i, !0),
        t.addEventListener("focusout", s, !0),
        t.addEventListener("focusin", o, !0),
        t.addEventListener("focus", a, !0));
      let l = () => {
          (cancelAnimationFrame(c),
            t.removeEventListener("blur", i, !0),
            t.removeEventListener("focusout", s, !0),
            t.removeEventListener("focusin", o, !0),
            t.removeEventListener("focus", a, !0),
            (eu = !1),
            (r = !1));
        },
        c = requestAnimationFrame(l);
      return l;
    }
    function eh(e) {
      var t;
      if ("undefined" == typeof window || null == window.navigator) return !1;
      let n = null == (t = window.navigator.userAgentData) ? void 0 : t.brands;
      return (
        (Array.isArray(n) && n.some((t) => e.test(t.brand))) ||
        e.test(window.navigator.userAgent)
      );
    }
    function ep(e) {
      var t;
      return (
        "undefined" != typeof window &&
        null != window.navigator &&
        e.test(
          (null == (t = window.navigator.userAgentData)
            ? void 0
            : t.platform) || window.navigator.platform,
        )
      );
    }
    function em(e) {
      let t = null;
      return () => (null == t && (t = e()), t);
    }
    let ef = em(function () {
        return ep(/^Mac/i);
      }),
      eg = em(function () {
        return ep(/^iPhone/i);
      }),
      ex = em(function () {
        return ep(/^iPad/i) || (ef() && navigator.maxTouchPoints > 1);
      }),
      ev = em(function () {
        return eg() || ex();
      });
    em(function () {
      return ef() || ev();
    });
    let ey = em(function () {
        return eh(/AppleWebKit/i) && !eb();
      }),
      eb = em(function () {
        return eh(/Chrome/i);
      }),
      ej = em(function () {
        return eh(/Android/i);
      }),
      ew = em(function () {
        return eh(/Firefox/i);
      }),
      eC = new Map(),
      ek = new Set();
    function eS() {
      if ("undefined" == typeof window) return;
      function e(e) {
        return "propertyName" in e;
      }
      let t = (t) => {
          if (!e(t) || !t.target) return;
          let r = eC.get(t.target);
          (r ||
            ((r = new Set()),
            eC.set(t.target, r),
            t.target.addEventListener("transitioncancel", n, { once: !0 })),
            r.add(t.propertyName));
        },
        n = (t) => {
          if (!e(t) || !t.target) return;
          let r = eC.get(t.target);
          if (
            r &&
            (r.delete(t.propertyName),
            0 === r.size &&
              (t.target.removeEventListener("transitioncancel", n),
              eC.delete(t.target)),
            0 === eC.size)
          ) {
            for (let e of ek) e();
            ek.clear();
          }
        };
      (document.body.addEventListener("transitionrun", t),
        document.body.addEventListener("transitionend", n));
    }
    function eN() {
      for (let [e] of eC) "isConnected" in e && !e.isConnected && eC.delete(e);
    }
    function eE(e) {
      requestAnimationFrame(() => {
        (eN(), 0 === eC.size ? e() : ek.add(e));
      });
    }
    "undefined" != typeof document &&
      ("loading" !== document.readyState
        ? eS()
        : document.addEventListener("DOMContentLoaded", eS));
    let eA = "default",
      eD = "",
      eI = new WeakMap();
    function eM(e) {
      if (ev()) {
        if ("default" === eA) {
          let t = $(e);
          ((eD = t.documentElement.style.webkitUserSelect),
            (t.documentElement.style.webkitUserSelect = "none"));
        }
        eA = "disabled";
      } else if (e instanceof HTMLElement || e instanceof SVGElement) {
        let t = "userSelect" in e.style ? "userSelect" : "webkitUserSelect";
        (eI.set(e, e.style[t]), (e.style[t] = "none"));
      }
    }
    function eT(e) {
      if (ev())
        "disabled" === eA &&
          ((eA = "restoring"),
          setTimeout(() => {
            eE(() => {
              if ("restoring" === eA) {
                let t = $(e);
                ("none" === t.documentElement.style.webkitUserSelect &&
                  (t.documentElement.style.webkitUserSelect = eD || ""),
                  (eD = ""),
                  (eA = "default"));
              }
            });
          }, 300));
      else if (
        (e instanceof HTMLElement || e instanceof SVGElement) &&
        e &&
        eI.has(e)
      ) {
        let t = eI.get(e),
          n = "userSelect" in e.style ? "userSelect" : "webkitUserSelect";
        ("none" === e.style[n] && (e.style[n] = t),
          "" === e.getAttribute("style") && e.removeAttribute("style"),
          eI.delete(e));
      }
    }
    let eL = d.default.createContext({ register: () => {} });
    function eP(e, t) {
      return t.get ? t.get.call(e) : t.value;
    }
    function eR(e, t, n) {
      if (!t.has(e))
        throw TypeError("attempted to " + n + " private field on non-instance");
      return t.get(e);
    }
    function eF(e, t) {
      var n = eR(e, t, "get");
      return eP(e, n);
    }
    function e_(e, t) {
      if (t.has(e))
        throw TypeError(
          "Cannot initialize the same private elements twice on an object",
        );
    }
    function eO(e, t, n) {
      (e_(e, t), t.set(e, n));
    }
    function eB(e, t, n) {
      if (t.set) t.set.call(e, n);
      else {
        if (!t.writable)
          throw TypeError("attempted to set read only private field");
        t.value = n;
      }
    }
    function eV(e, t, n) {
      var r = eR(e, t, "set");
      return (eB(e, r, n), n);
    }
    function ez(e, t) {
      C(() => {
        if (e && e.ref && t)
          return (
            (e.ref.current = t.current),
            () => {
              e.ref && (e.ref.current = null);
            }
          );
      });
    }
    eL.displayName = "PressResponderContext";
    var eH = d;
    function e$() {
      let e = (0, eH.useRef)(new Map()),
        t = (0, eH.useCallback)((t, n, r, i) => {
          let s = (null == i ? void 0 : i.once)
            ? (...t) => {
                (e.current.delete(r), r(...t));
              }
            : r;
          (e.current.set(r, { type: n, eventTarget: t, fn: s, options: i }),
            t.addEventListener(n, s, i));
        }, []),
        n = (0, eH.useCallback)((t, n, r, i) => {
          var s;
          let a = (null == (s = e.current.get(r)) ? void 0 : s.fn) || r;
          (t.removeEventListener(n, a, i), e.current.delete(r));
        }, []),
        r = (0, eH.useCallback)(() => {
          e.current.forEach((e, t) => {
            n(e.eventTarget, e.type, t, e.options);
          });
        }, [n]);
      return (
        (0, eH.useEffect)(() => r, [r]),
        {
          addGlobalListener: t,
          removeGlobalListener: n,
          removeAllGlobalListeners: r,
        }
      );
    }
    let eU = !1;
    function eG() {
      return eU;
    }
    function eW(e, t) {
      if (!eG()) return !!t && !!e && e.contains(t);
      if (!e || !t) return !1;
      let n = t;
      for (; null !== n; ) {
        if (n === e) return !0;
        n =
          "SLOT" === n.tagName && n.assignedSlot
            ? n.assignedSlot.parentNode
            : W(n)
              ? n.host
              : n.parentNode;
      }
      return !1;
    }
    let eq = (e = document) => {
      var t;
      if (!eG()) return e.activeElement;
      let n = e.activeElement;
      for (
        ;
        n &&
        "shadowRoot" in n &&
        (null == (t = n.shadowRoot) ? void 0 : t.activeElement);

      )
        n = n.shadowRoot.activeElement;
      return n;
    };
    function eZ(e) {
      return eG() && e.target.shadowRoot && e.composedPath
        ? e.composedPath()[0]
        : e.target;
    }
    function eK(e, t, n = !0) {
      var r, i;
      let { metaKey: s, ctrlKey: a, altKey: o, shiftKey: l } = t;
      ew() &&
        (null == (i = window.event) || null == (r = i.type)
          ? void 0
          : r.startsWith("key")) &&
        "_blank" === e.target &&
        (ef() ? (s = !0) : (a = !0));
      let c =
        ey() && ef() && !ex() && 1
          ? new KeyboardEvent("keydown", {
              keyIdentifier: "Enter",
              metaKey: s,
              ctrlKey: a,
              altKey: o,
              shiftKey: l,
            })
          : new MouseEvent("click", {
              metaKey: s,
              ctrlKey: a,
              altKey: o,
              shiftKey: l,
              bubbles: !0,
              cancelable: !0,
            });
      ((eK.isOpening = n), et(e), e.dispatchEvent(c), (eK.isOpening = !1));
    }
    function eY(e) {
      return (
        (0 === e.mozInputSource && !!e.isTrusted) ||
        (ej() && e.pointerType
          ? "click" === e.type && 1 === e.buttons
          : 0 === e.detail && !e.pointerType)
      );
    }
    function eJ(e) {
      return (
        (!ej() && 0 === e.width && 0 === e.height) ||
        (1 === e.width &&
          1 === e.height &&
          0 === e.pressure &&
          0 === e.detail &&
          "mouse" === e.pointerType)
      );
    }
    eK.isOpening = !1;
    var eQ = e.i(405193),
      eX = d;
    function e0(e) {
      let t = (0, eX.useContext)(eL);
      if (t) {
        let { register: n, ...r } = t;
        ((e = R(r, e)), n());
      }
      return (ez(t, e.ref), e);
    }
    var e1 = new WeakMap();
    class e2 {
      continuePropagation() {
        eV(this, e1, !1);
      }
      get shouldStopPropagation() {
        return eF(this, e1);
      }
      constructor(e, t, n, r) {
        var i;
        (eO(this, e1, { writable: !0, value: void 0 }), eV(this, e1, !0));
        let s =
          null != (i = null == r ? void 0 : r.target) ? i : n.currentTarget;
        const a = null == s ? void 0 : s.getBoundingClientRect();
        let o,
          l = 0,
          c,
          u = null;
        (null != n.clientX &&
          null != n.clientY &&
          ((c = n.clientX), (u = n.clientY)),
          a &&
            (null != c && null != u
              ? ((o = c - a.left), (l = u - a.top))
              : ((o = a.width / 2), (l = a.height / 2))),
          (this.type = e),
          (this.pointerType = t),
          (this.target = n.currentTarget),
          (this.shiftKey = n.shiftKey),
          (this.metaKey = n.metaKey),
          (this.ctrlKey = n.ctrlKey),
          (this.altKey = n.altKey),
          (this.x = o),
          (this.y = l));
      }
    }
    let e5 = Symbol("linkClicked"),
      e3 = "react-aria-pressable-style",
      e4 = "data-react-aria-pressable";
    function e9(e) {
      let {
          onPress: t,
          onPressChange: n,
          onPressStart: r,
          onPressEnd: i,
          onPressUp: s,
          onClick: a,
          isDisabled: o,
          isPressed: l,
          preventFocusOnPress: c,
          shouldCancelOnPointerExit: u,
          allowTextSelectionOnPress: d,
          ref: h,
          ...p
        } = e0(e),
        [m, f] = (0, eX.useState)(!1),
        g = (0, eX.useRef)({
          isPressed: !1,
          ignoreEmulatedMouseEvents: !1,
          didFirePressStart: !1,
          isTriggeringEvent: !1,
          activePointerId: null,
          target: null,
          isOverTarget: !1,
          pointerType: null,
          disposables: [],
        }),
        { addGlobalListener: x, removeAllGlobalListeners: v } = e$(),
        y = N((e, t) => {
          let i = g.current;
          if (o || i.didFirePressStart) return !1;
          let s = !0;
          if (((i.isTriggeringEvent = !0), r)) {
            let n = new e2("pressstart", t, e);
            (r(n), (s = n.shouldStopPropagation));
          }
          return (
            n && n(!0),
            (i.isTriggeringEvent = !1),
            (i.didFirePressStart = !0),
            f(!0),
            s
          );
        }),
        b = N((e, r, s = !0) => {
          let a = g.current;
          if (!a.didFirePressStart) return !1;
          ((a.didFirePressStart = !1), (a.isTriggeringEvent = !0));
          let l = !0;
          if (i) {
            let t = new e2("pressend", r, e);
            (i(t), (l = t.shouldStopPropagation));
          }
          if ((n && n(!1), f(!1), t && s && !o)) {
            let n = new e2("press", r, e);
            (t(n), l && (l = n.shouldStopPropagation));
          }
          return ((a.isTriggeringEvent = !1), l);
        }),
        w = N((e, t) => {
          let n = g.current;
          if (o) return !1;
          if (s) {
            n.isTriggeringEvent = !0;
            let r = new e2("pressup", t, e);
            return (s(r), (n.isTriggeringEvent = !1), r.shouldStopPropagation);
          }
          return !0;
        }),
        C = N((e) => {
          let t = g.current;
          if (t.isPressed && t.target) {
            for (let n of (t.didFirePressStart &&
              null != t.pointerType &&
              b(e8(t.target, e), t.pointerType, !1),
            (t.isPressed = !1),
            (t.isOverTarget = !1),
            (t.activePointerId = null),
            (t.pointerType = null),
            v(),
            d || eT(t.target),
            t.disposables))
              n();
            t.disposables = [];
          }
        }),
        k = N((e) => {
          u && C(e);
        }),
        S = N((e) => {
          null == a || a(e);
        }),
        E = N((e, t) => {
          if (a) {
            let n = new MouseEvent("click", e);
            (el(n, t), a(eo(n)));
          }
        }),
        A = (0, eX.useMemo)(() => {
          let e = g.current,
            t = {
              onKeyDown(t) {
                if (
                  e6(t.nativeEvent, t.currentTarget) &&
                  eW(t.currentTarget, eZ(t.nativeEvent))
                ) {
                  var r;
                  tt(eZ(t.nativeEvent), t.key) && t.preventDefault();
                  let i = !0;
                  if (!e.isPressed && !t.repeat) {
                    ((e.target = t.currentTarget),
                      (e.isPressed = !0),
                      (e.pointerType = "keyboard"),
                      (i = y(t, "keyboard")));
                    let r = t.currentTarget,
                      s = (t) => {
                        e6(t, r) &&
                          !t.repeat &&
                          eW(r, eZ(t)) &&
                          e.target &&
                          w(e8(e.target, t), "keyboard");
                      };
                    x($(t.currentTarget), "keyup", j(s, n), !0);
                  }
                  (i && t.stopPropagation(),
                    t.metaKey &&
                      ef() &&
                      (null == (r = e.metaKeyEvents) ||
                        r.set(t.key, t.nativeEvent)));
                } else "Meta" === t.key && (e.metaKeyEvents = new Map());
              },
              onClick(t) {
                if (
                  (!t || eW(t.currentTarget, eZ(t.nativeEvent))) &&
                  t &&
                  0 === t.button &&
                  !e.isTriggeringEvent &&
                  !eK.isOpening
                ) {
                  let n = !0;
                  if (
                    (o && t.preventDefault(),
                    !e.ignoreEmulatedMouseEvents &&
                      !e.isPressed &&
                      ("virtual" === e.pointerType || eY(t.nativeEvent)))
                  ) {
                    let e = y(t, "virtual"),
                      r = w(t, "virtual"),
                      i = b(t, "virtual");
                    (S(t), (n = e && r && i));
                  } else if (e.isPressed && "keyboard" !== e.pointerType) {
                    let r =
                        e.pointerType || t.nativeEvent.pointerType || "virtual",
                      i = w(e8(t.currentTarget, t), r),
                      s = b(e8(t.currentTarget, t), r, !0);
                    ((n = i && s), (e.isOverTarget = !1), S(t), C(t));
                  }
                  ((e.ignoreEmulatedMouseEvents = !1),
                    n && t.stopPropagation());
                }
              },
            },
            n = (t) => {
              var n, r, i;
              if (e.isPressed && e.target && e6(t, e.target)) {
                tt(eZ(t), t.key) && t.preventDefault();
                let n = eZ(t),
                  i = eW(e.target, eZ(t));
                (b(e8(e.target, t), "keyboard", i),
                  i && E(t, e.target),
                  v(),
                  "Enter" !== t.key &&
                    e7(e.target) &&
                    eW(e.target, n) &&
                    !t[e5] &&
                    ((t[e5] = !0), eK(e.target, t, !1)),
                  (e.isPressed = !1),
                  null == (r = e.metaKeyEvents) || r.delete(t.key));
              } else if (
                "Meta" === t.key &&
                (null == (n = e.metaKeyEvents) ? void 0 : n.size)
              ) {
                let t = e.metaKeyEvents;
                for (let n of ((e.metaKeyEvents = void 0), t.values()))
                  null == (i = e.target) ||
                    i.dispatchEvent(new KeyboardEvent("keyup", n));
              }
            };
          if ("undefined" != typeof PointerEvent) {
            ((t.onPointerDown = (t) => {
              if (0 !== t.button || !eW(t.currentTarget, eZ(t.nativeEvent)))
                return;
              if (eJ(t.nativeEvent)) {
                e.pointerType = "virtual";
                return;
              }
              e.pointerType = t.pointerType;
              let i = !0;
              if (!e.isPressed) {
                ((e.isPressed = !0),
                  (e.isOverTarget = !0),
                  (e.activePointerId = t.pointerId),
                  (e.target = t.currentTarget),
                  d || eM(e.target),
                  (i = y(t, e.pointerType)));
                let s = eZ(t.nativeEvent);
                ("releasePointerCapture" in s &&
                  s.releasePointerCapture(t.pointerId),
                  x($(t.currentTarget), "pointerup", n, !1),
                  x($(t.currentTarget), "pointercancel", r, !1));
              }
              i && t.stopPropagation();
            }),
              (t.onMouseDown = (t) => {
                if (eW(t.currentTarget, eZ(t.nativeEvent)) && 0 === t.button) {
                  if (c) {
                    let n = ed(t.target);
                    n && e.disposables.push(n);
                  }
                  t.stopPropagation();
                }
              }),
              (t.onPointerUp = (t) => {
                eW(t.currentTarget, eZ(t.nativeEvent)) &&
                  "virtual" !== e.pointerType &&
                  (0 !== t.button ||
                    e.isPressed ||
                    w(t, e.pointerType || t.pointerType));
              }),
              (t.onPointerEnter = (t) => {
                t.pointerId === e.activePointerId &&
                  e.target &&
                  !e.isOverTarget &&
                  null != e.pointerType &&
                  ((e.isOverTarget = !0), y(e8(e.target, t), e.pointerType));
              }),
              (t.onPointerLeave = (t) => {
                t.pointerId === e.activePointerId &&
                  e.target &&
                  e.isOverTarget &&
                  null != e.pointerType &&
                  ((e.isOverTarget = !1),
                  b(e8(e.target, t), e.pointerType, !1),
                  k(t));
              }));
            let n = (t) => {
                if (
                  t.pointerId === e.activePointerId &&
                  e.isPressed &&
                  0 === t.button &&
                  e.target
                ) {
                  if (eW(e.target, eZ(t)) && null != e.pointerType) {
                    let n = !1,
                      r = setTimeout(() => {
                        e.isPressed &&
                          e.target instanceof HTMLElement &&
                          (n ? C(t) : (et(e.target), e.target.click()));
                      }, 80);
                    (x(t.currentTarget, "click", () => (n = !0), !0),
                      e.disposables.push(() => clearTimeout(r)));
                  } else C(t);
                  e.isOverTarget = !1;
                }
              },
              r = (e) => {
                C(e);
              };
            t.onDragStart = (e) => {
              eW(e.currentTarget, eZ(e.nativeEvent)) && C(e);
            };
          }
          return t;
        }, [x, o, c, v, d, C, k, b, y, w, S, E]);
      return (
        (0, eX.useEffect)(() => {
          if (!h) return;
          let e = $(h.current);
          if (!e || !e.head || e.getElementById(e3)) return;
          let t = e.createElement("style");
          ((t.id = e3),
            (t.textContent = `
@layer {
  [${e4}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim()),
            e.head.prepend(t));
        }, [h]),
        (0, eX.useEffect)(() => {
          let e = g.current;
          return () => {
            var t;
            for (let n of (d || eT(null != (t = e.target) ? t : void 0),
            e.disposables))
              n();
            e.disposables = [];
          };
        }, [d]),
        { isPressed: l || m, pressProps: R(p, A, { [e4]: !0 }) }
      );
    }
    function e7(e) {
      return "A" === e.tagName && e.hasAttribute("href");
    }
    function e6(e, t) {
      let { key: n, code: r } = e,
        i = t,
        s = i.getAttribute("role");
      return (
        ("Enter" === n || " " === n || "Spacebar" === n || "Space" === r) &&
        !(
          (i instanceof U(i).HTMLInputElement && !tr(i, n)) ||
          i instanceof U(i).HTMLTextAreaElement ||
          i.isContentEditable
        ) &&
        !(("link" === s || (!s && e7(i))) && "Enter" !== n)
      );
    }
    function e8(e, t) {
      let n = t.clientX,
        r = t.clientY;
      return {
        currentTarget: e,
        shiftKey: t.shiftKey,
        ctrlKey: t.ctrlKey,
        metaKey: t.metaKey,
        altKey: t.altKey,
        clientX: n,
        clientY: r,
      };
    }
    function te(e) {
      return (
        !(e instanceof HTMLInputElement) &&
        (e instanceof HTMLButtonElement
          ? "submit" !== e.type && "reset" !== e.type
          : !e7(e))
      );
    }
    function tt(e, t) {
      return e instanceof HTMLInputElement ? !tr(e, t) : te(e);
    }
    let tn = new Set([
      "checkbox",
      "radio",
      "range",
      "color",
      "file",
      "image",
      "button",
      "submit",
      "reset",
    ]);
    function tr(e, t) {
      return "checkbox" === e.type || "radio" === e.type
        ? " " === t
        : tn.has(e.type);
    }
    var ti = d;
    let ts = null,
      ta = new Set(),
      to = new Map(),
      tl = !1,
      tc = !1,
      tu = { Tab: !0, Escape: !0 };
    function td(e, t) {
      for (let n of ta) n(e, t);
    }
    function th(e) {
      return !(
        e.metaKey ||
        (!ef() && e.altKey) ||
        e.ctrlKey ||
        "Control" === e.key ||
        "Shift" === e.key ||
        "Meta" === e.key
      );
    }
    function tp(e) {
      ((tl = !0), th(e) && ((ts = "keyboard"), td("keyboard", e)));
    }
    function tm(e) {
      ((ts = "pointer"),
        ("mousedown" === e.type || "pointerdown" === e.type) &&
          ((tl = !0), td("pointer", e)));
    }
    function tf(e) {
      eY(e) && ((tl = !0), (ts = "virtual"));
    }
    function tg(e) {
      e.target !== window &&
        e.target !== document &&
        !eu &&
        e.isTrusted &&
        (tl || tc || ((ts = "virtual"), td("virtual", e)),
        (tl = !1),
        (tc = !1));
    }
    function tx() {
      eu || ((tl = !1), (tc = !0));
    }
    function tv(e) {
      if (
        "undefined" == typeof window ||
        "undefined" == typeof document ||
        to.get(U(e))
      )
        return;
      let t = U(e),
        n = $(e),
        r = t.HTMLElement.prototype.focus;
      ((t.HTMLElement.prototype.focus = function () {
        ((tl = !0), r.apply(this, arguments));
      }),
        n.addEventListener("keydown", tp, !0),
        n.addEventListener("keyup", tp, !0),
        n.addEventListener("click", tf, !0),
        t.addEventListener("focus", tg, !0),
        t.addEventListener("blur", tx, !1),
        "undefined" != typeof PointerEvent &&
          (n.addEventListener("pointerdown", tm, !0),
          n.addEventListener("pointermove", tm, !0),
          n.addEventListener("pointerup", tm, !0)),
        t.addEventListener(
          "beforeunload",
          () => {
            ty(e);
          },
          { once: !0 },
        ),
        to.set(t, { focus: r }));
    }
    let ty = (e, t) => {
      let n = U(e),
        r = $(e);
      (t && r.removeEventListener("DOMContentLoaded", t),
        to.has(n) &&
          ((n.HTMLElement.prototype.focus = to.get(n).focus),
          r.removeEventListener("keydown", tp, !0),
          r.removeEventListener("keyup", tp, !0),
          r.removeEventListener("click", tf, !0),
          n.removeEventListener("focus", tg, !0),
          n.removeEventListener("blur", tx, !1),
          "undefined" != typeof PointerEvent &&
            (r.removeEventListener("pointerdown", tm, !0),
            r.removeEventListener("pointermove", tm, !0),
            r.removeEventListener("pointerup", tm, !0)),
          to.delete(n)));
    };
    function tb(e) {
      let t,
        n = $(e);
      return (
        "loading" !== n.readyState
          ? tv(e)
          : ((t = () => {
              tv(e);
            }),
            n.addEventListener("DOMContentLoaded", t)),
        () => ty(e, t)
      );
    }
    function tj() {
      return "pointer" !== ts;
    }
    function tw() {
      return ts;
    }
    "undefined" != typeof document && tb();
    let tC = new Set([
      "checkbox",
      "radio",
      "range",
      "color",
      "file",
      "image",
      "button",
      "submit",
      "reset",
    ]);
    function tk(e, t, n) {
      let r = $(null == n ? void 0 : n.target),
        i =
          "undefined" != typeof window
            ? U(null == n ? void 0 : n.target).HTMLInputElement
            : HTMLInputElement,
        s =
          "undefined" != typeof window
            ? U(null == n ? void 0 : n.target).HTMLTextAreaElement
            : HTMLTextAreaElement,
        a =
          "undefined" != typeof window
            ? U(null == n ? void 0 : n.target).HTMLElement
            : HTMLElement,
        o =
          "undefined" != typeof window
            ? U(null == n ? void 0 : n.target).KeyboardEvent
            : KeyboardEvent;
      return !(
        (e =
          e ||
          (r.activeElement instanceof i && !tC.has(r.activeElement.type)) ||
          r.activeElement instanceof s ||
          (r.activeElement instanceof a &&
            r.activeElement.isContentEditable)) &&
        "keyboard" === t &&
        n instanceof o &&
        !tu[n.key]
      );
    }
    function tS(e, t, n) {
      (tv(),
        (0, ti.useEffect)(() => {
          let t = (t, r) => {
            tk(!!(null == n ? void 0 : n.isTextInput), t, r) && e(tj());
          };
          return (
            ta.add(t),
            () => {
              ta.delete(t);
            }
          );
        }, t));
    }
    function tN(e) {
      let t = $(e),
        n = eq(t);
      if ("virtual" === tw()) {
        let r = n;
        eE(() => {
          eq(t) === r && e.isConnected && et(e);
        });
      } else et(e);
    }
    var tE = d;
    function tA(e) {
      let { isDisabled: t, onFocus: n, onBlur: r, onFocusChange: i } = e,
        s = (0, tE.useCallback)(
          (e) => {
            if (e.target === e.currentTarget)
              return (r && r(e), i && i(!1), !0);
          },
          [r, i],
        ),
        a = ec(s),
        o = (0, tE.useCallback)(
          (e) => {
            let t = $(e.target),
              r = t ? eq(t) : eq();
            e.target === e.currentTarget &&
              r === eZ(e.nativeEvent) &&
              (n && n(e), i && i(!0), a(e));
          },
          [i, n, a],
        );
      return {
        focusProps: {
          onFocus: !t && (n || i || r) ? o : void 0,
          onBlur: !t && (r || i) ? s : void 0,
        },
      };
    }
    function tD(e) {
      if (!e) return;
      let t = !0;
      return (n) => {
        (e({
          ...n,
          preventDefault() {
            n.preventDefault();
          },
          isDefaultPrevented: () => n.isDefaultPrevented(),
          stopPropagation() {
            t = !0;
          },
          continuePropagation() {
            t = !1;
          },
          isPropagationStopped: () => t,
        }),
          t && n.stopPropagation());
      };
    }
    function tI(e) {
      return {
        keyboardProps: e.isDisabled
          ? {}
          : { onKeyDown: tD(e.onKeyDown), onKeyUp: tD(e.onKeyUp) },
      };
    }
    var tM = d;
    function tT(e) {
      let t = (0, tM.useRef)(null),
        n = (0, tM.useRef)(void 0),
        r = (0, tM.useCallback)(
          (t) => {
            if ("function" == typeof e) {
              let n = e,
                r = n(t);
              return () => {
                "function" == typeof r ? r() : n(null);
              };
            }
            if (e)
              return (
                (e.current = t),
                () => {
                  e.current = null;
                }
              );
          },
          [e],
        );
      return (0, tM.useMemo)(
        () => ({
          get current() {
            return t.current;
          },
          set current(value) {
            ((t.current = value),
              n.current && (n.current(), (n.current = void 0)),
              null != value && (n.current = r(value)));
          },
        }),
        [r],
      );
    }
    var tL = d;
    let tP = tL.default.createContext(null);
    function tR(e) {
      let t = (0, tL.useContext)(tP) || {};
      ez(t, e);
      let { ref: n, ...r } = t;
      return r;
    }
    function tF(e, t) {
      let { focusProps: n } = tA(e),
        { keyboardProps: r } = tI(e),
        i = R(n, r),
        s = tR(t),
        a = e.isDisabled ? {} : s,
        o = (0, tL.useRef)(e.autoFocus);
      (0, tL.useEffect)(() => {
        (o.current && t.current && tN(t.current), (o.current = !1));
      }, [t]);
      let l = e.excludeFromTabOrder ? -1 : 0;
      return (
        e.isDisabled && (l = void 0),
        { focusableProps: R({ ...i, tabIndex: l }, a) }
      );
    }
    function t_(e, t) {
      let n,
        {
          elementType: r = "button",
          isDisabled: i,
          onPress: s,
          onPressStart: a,
          onPressEnd: o,
          onPressUp: l,
          onPressChange: c,
          preventFocusOnPress: u,
          allowFocusWhenDisabled: d,
          onClick: h,
          href: p,
          target: m,
          rel: f,
          type: g = "button",
        } = e;
      n =
        "button" === r
          ? {
              type: g,
              disabled: i,
              form: e.form,
              formAction: e.formAction,
              formEncType: e.formEncType,
              formMethod: e.formMethod,
              formNoValidate: e.formNoValidate,
              formTarget: e.formTarget,
              name: e.name,
              value: e.value,
            }
          : {
              role: "button",
              href: "a" !== r || i ? void 0 : p,
              target: "a" === r ? m : void 0,
              type: "input" === r ? g : void 0,
              disabled: "input" === r ? i : void 0,
              "aria-disabled": i && "input" !== r ? i : void 0,
              rel: "a" === r ? f : void 0,
            };
      let { pressProps: x, isPressed: v } = e9({
          onPressStart: a,
          onPressEnd: o,
          onPressChange: c,
          onPress: s,
          onPressUp: l,
          onClick: h,
          isDisabled: i,
          preventFocusOnPress: u,
          ref: t,
        }),
        { focusableProps: y } = tF(e, t);
      d && (y.tabIndex = i ? -1 : y.tabIndex);
      let b = R(y, x, H(e, { labelable: !0 }));
      return {
        isPressed: v,
        buttonProps: R(n, b, {
          "aria-haspopup": e["aria-haspopup"],
          "aria-expanded": e["aria-expanded"],
          "aria-controls": e["aria-controls"],
          "aria-pressed": e["aria-pressed"],
          "aria-current": e["aria-current"],
        }),
      };
    }
    tL.default.forwardRef(function (e, t) {
      let { children: n, ...r } = e,
        i = tT(t),
        s = { ...r, ref: i };
      return tL.default.createElement(tP.Provider, { value: s }, n);
    });
    var tO = d;
    let tB = !1,
      tV = 0;
    function tz() {
      ((tB = !0),
        setTimeout(() => {
          tB = !1;
        }, 50));
    }
    function tH(e) {
      "touch" === e.pointerType && tz();
    }
    function t$() {
      if ("undefined" != typeof document)
        return (
          0 === tV &&
            "undefined" != typeof PointerEvent &&
            document.addEventListener("pointerup", tH),
          tV++,
          () => {
            --tV > 0 ||
              ("undefined" != typeof PointerEvent &&
                document.removeEventListener("pointerup", tH));
          }
        );
    }
    function tU(e) {
      let {
          onHoverStart: t,
          onHoverChange: n,
          onHoverEnd: r,
          isDisabled: i,
        } = e,
        [s, a] = (0, tO.useState)(!1),
        o = (0, tO.useRef)({
          isHovered: !1,
          ignoreEmulatedMouseEvents: !1,
          pointerType: "",
          target: null,
        }).current;
      (0, tO.useEffect)(t$, []);
      let { addGlobalListener: l, removeAllGlobalListeners: c } = e$(),
        { hoverProps: u, triggerHoverEnd: d } = (0, tO.useMemo)(() => {
          let e = (e, r) => {
              if (
                ((o.pointerType = r),
                i ||
                  "touch" === r ||
                  o.isHovered ||
                  !e.currentTarget.contains(e.target))
              )
                return;
              o.isHovered = !0;
              let c = e.currentTarget;
              ((o.target = c),
                l(
                  $(e.target),
                  "pointerover",
                  (e) => {
                    o.isHovered &&
                      o.target &&
                      !eW(o.target, e.target) &&
                      s(e, e.pointerType);
                  },
                  { capture: !0 },
                ),
                t && t({ type: "hoverstart", target: c, pointerType: r }),
                n && n(!0),
                a(!0));
            },
            s = (e, t) => {
              let i = o.target;
              ((o.pointerType = ""),
                (o.target = null),
                "touch" !== t &&
                  o.isHovered &&
                  i &&
                  ((o.isHovered = !1),
                  c(),
                  r && r({ type: "hoverend", target: i, pointerType: t }),
                  n && n(!1),
                  a(!1)));
            },
            u = {};
          return (
            "undefined" != typeof PointerEvent &&
              ((u.onPointerEnter = (t) => {
                (tB && "mouse" === t.pointerType) || e(t, t.pointerType);
              }),
              (u.onPointerLeave = (e) => {
                !i && e.currentTarget.contains(e.target) && s(e, e.pointerType);
              })),
            { hoverProps: u, triggerHoverEnd: s }
          );
        }, [t, n, r, i, o, l, c]);
      return (
        (0, tO.useEffect)(() => {
          i && d({ currentTarget: o.target }, o.pointerType);
        }, [i]),
        { hoverProps: u, isHovered: s }
      );
    }
    var tG = d,
      tW = d;
    function tq(e) {
      let {
          isDisabled: t,
          onBlurWithin: n,
          onFocusWithin: r,
          onFocusWithinChange: i,
        } = e,
        s = (0, tW.useRef)({ isFocusWithin: !1 }),
        { addGlobalListener: a, removeAllGlobalListeners: o } = e$(),
        l = (0, tW.useCallback)(
          (e) => {
            e.currentTarget.contains(e.target) &&
              s.current.isFocusWithin &&
              !e.currentTarget.contains(e.relatedTarget) &&
              ((s.current.isFocusWithin = !1), o(), n && n(e), i && i(!1));
          },
          [n, i, s, o],
        ),
        c = ec(l),
        u = (0, tW.useCallback)(
          (e) => {
            if (!e.currentTarget.contains(e.target)) return;
            let t = $(e.target),
              n = eq(t);
            if (!s.current.isFocusWithin && n === eZ(e.nativeEvent)) {
              (r && r(e), i && i(!0), (s.current.isFocusWithin = !0), c(e));
              let n = e.currentTarget;
              a(
                t,
                "focus",
                (e) => {
                  if (s.current.isFocusWithin && !eW(n, e.target)) {
                    let r = new t.defaultView.FocusEvent("blur", {
                      relatedTarget: e.target,
                    });
                    (el(r, n), l(eo(r)));
                  }
                },
                { capture: !0 },
              );
            }
          },
          [r, i, c, a, l],
        );
      return t
        ? { focusWithinProps: { onFocus: void 0, onBlur: void 0 } }
        : { focusWithinProps: { onFocus: u, onBlur: l } };
    }
    var tZ = h;
    function tK(e, t, n, r) {
      Object.defineProperty(e, t, {
        get: n,
        set: r,
        enumerable: !0,
        configurable: !0,
      });
    }
    var tY = {};
    function tJ(e) {
      if ("virtual" === tw()) {
        let t = document.activeElement;
        eE(() => {
          document.activeElement === t && document.contains(e) && et(e);
        });
      } else et(e);
    }
    function tQ(e) {
      if (!(e instanceof HTMLElement) && !(e instanceof SVGElement)) return !1;
      let { display: t, visibility: n } = e.style,
        r = "none" !== t && "hidden" !== n && "collapse" !== n;
      if (r) {
        let { getComputedStyle: t } = e.ownerDocument.defaultView,
          { display: n, visibility: i } = t(e);
        r = "none" !== n && "hidden" !== i && "collapse" !== i;
      }
      return r;
    }
    function tX(e, t) {
      return (
        !e.hasAttribute("hidden") &&
        ("DETAILS" !== e.nodeName ||
          !t ||
          "SUMMARY" === t.nodeName ||
          e.hasAttribute("open"))
      );
    }
    function t0(e, t) {
      return (
        "#comment" !== e.nodeName &&
        tQ(e) &&
        tX(e, t) &&
        (!e.parentElement || t0(e.parentElement, e))
      );
    }
    (tK(tY, "FocusScope", () => t3),
      tK(tY, "useFocusManager", () => t4),
      tK(tY, "getFocusableTreeWalker", () => nu),
      tK(tY, "createFocusManager", () => nd),
      tK({}, "focusSafely", () => tJ));
    let t1 = tG.default.createContext(null),
      t2 = null,
      t5 = new Map();
    function t3(e) {
      let { children: t, contain: n, restoreFocus: r, autoFocus: i } = e,
        s = (0, tG.useRef)(),
        a = (0, tG.useRef)(),
        o = (0, tG.useRef)([]),
        l = (0, tG.useContext)(t1),
        c = null == l ? void 0 : l.scopeRef;
      (C(() => {
        let e = s.current.nextSibling,
          t = [];
        for (; e && e !== a.current; ) (t.push(e), (e = e.nextSibling));
        o.current = t;
      }, [t, c]),
        C(
          () => (
            t5.set(o, c),
            () => {
              ((o === t2 || ns(o, t2)) && (!c || t5.has(c)) && (t2 = c),
                t5.delete(o));
            }
          ),
          [o, c],
        ),
        nt(o, n),
        nc(o, r, n),
        nl(o, i));
      let u = t9(o);
      return tG.default.createElement(
        t1.Provider,
        { value: { scopeRef: o, focusManager: u } },
        tG.default.createElement("span", {
          "data-focus-scope-start": !0,
          hidden: !0,
          ref: s,
        }),
        t,
        tG.default.createElement("span", {
          "data-focus-scope-end": !0,
          hidden: !0,
          ref: a,
        }),
      );
    }
    function t4() {
      var e;
      return null == (e = (0, tG.useContext)(t1)) ? void 0 : e.focusManager;
    }
    function t9(e) {
      return {
        focusNext(t = {}) {
          let n = e.current,
            { from: r, tabbable: i, wrap: s } = t,
            a = r || document.activeElement,
            o = n[0].previousElementSibling,
            l = nu(ne(n), { tabbable: i }, n);
          l.currentNode = nr(a, n) ? a : o;
          let c = l.nextNode();
          return (
            !c && s && ((l.currentNode = o), (c = l.nextNode())),
            c && na(c, !0),
            c
          );
        },
        focusPrevious(t = {}) {
          let n = e.current,
            { from: r, tabbable: i, wrap: s } = t,
            a = r || document.activeElement,
            o = n[n.length - 1].nextElementSibling,
            l = nu(ne(n), { tabbable: i }, n);
          l.currentNode = nr(a, n) ? a : o;
          let c = l.previousNode();
          return (
            !c && s && ((l.currentNode = o), (c = l.previousNode())),
            c && na(c, !0),
            c
          );
        },
        focusFirst(t = {}) {
          let n = e.current,
            { tabbable: r } = t,
            i = nu(ne(n), { tabbable: r }, n);
          i.currentNode = n[0].previousElementSibling;
          let s = i.nextNode();
          return (s && na(s, !0), s);
        },
        focusLast(t = {}) {
          let n = e.current,
            { tabbable: r } = t,
            i = nu(ne(n), { tabbable: r }, n);
          i.currentNode = n[n.length - 1].nextElementSibling;
          let s = i.previousNode();
          return (s && na(s, !0), s);
        },
      };
    }
    let t7 = [
        "input:not([disabled]):not([type=hidden])",
        "select:not([disabled])",
        "textarea:not([disabled])",
        "button:not([disabled])",
        "a[href]",
        "area[href]",
        "summary",
        "iframe",
        "object",
        "embed",
        "audio[controls]",
        "video[controls]",
        "[contenteditable]",
      ],
      t6 =
        t7.join(":not([hidden]),") +
        ",[tabindex]:not([disabled]):not([hidden])";
    t7.push('[tabindex]:not([tabindex="-1"]):not([disabled])');
    let t8 = t7.join(':not([hidden]):not([tabindex="-1"]),');
    function ne(e) {
      return e[0].parentElement;
    }
    function nt(e, t) {
      let n = (0, tG.useRef)(),
        r = (0, tG.useRef)(null);
      (C(() => {
        let i = e.current;
        if (!t) return;
        let s = (t) => {
            if (
              "Tab" !== t.key ||
              t.altKey ||
              t.ctrlKey ||
              t.metaKey ||
              e !== t2
            )
              return;
            let n = document.activeElement,
              r = e.current;
            if (!nr(n, r)) return;
            let i = nu(ne(r), { tabbable: !0 }, r);
            i.currentNode = n;
            let s = t.shiftKey ? i.previousNode() : i.nextNode();
            (s ||
              ((i.currentNode = t.shiftKey
                ? r[r.length - 1].nextElementSibling
                : r[0].previousElementSibling),
              (s = t.shiftKey ? i.previousNode() : i.nextNode())),
              t.preventDefault(),
              s && na(s, !0));
          },
          a = (t) => {
            !t2 || ns(t2, e)
              ? ((t2 = e), (n.current = t.target))
              : e !== t2 || ni(t.target, e)
                ? e === t2 && (n.current = t.target)
                : n.current
                  ? n.current.focus()
                  : t2 && no(t2.current);
          },
          o = (t) => {
            r.current = requestAnimationFrame(() => {
              e !== t2 ||
                ni(document.activeElement, e) ||
                ((t2 = e), (n.current = t.target), n.current.focus());
            });
          };
        return (
          document.addEventListener("keydown", s, !1),
          document.addEventListener("focusin", a, !1),
          i.forEach((e) => e.addEventListener("focusin", a, !1)),
          i.forEach((e) => e.addEventListener("focusout", o, !1)),
          () => {
            (document.removeEventListener("keydown", s, !1),
              document.removeEventListener("focusin", a, !1),
              i.forEach((e) => e.removeEventListener("focusin", a, !1)),
              i.forEach((e) => e.removeEventListener("focusout", o, !1)));
          }
        );
      }, [e, t]),
        (0, tG.useEffect)(() => () => cancelAnimationFrame(r.current), [r]));
    }
    function nn(e) {
      for (let t of t5.keys()) if (nr(e, t.current)) return !0;
      return !1;
    }
    function nr(e, t) {
      return t.some((t) => t.contains(e));
    }
    function ni(e, t) {
      for (let n of t5.keys())
        if ((n === t || ns(t, n)) && nr(e, n.current)) return !0;
      return !1;
    }
    function ns(e, t) {
      let n = t5.get(t);
      return !!n && (n === e || ns(e, n));
    }
    function na(e, t = !1) {
      if (null == e || t) {
        if (null != e)
          try {
            e.focus();
          } catch (e) {}
      } else
        try {
          tJ(e);
        } catch (e) {}
    }
    function no(e) {
      let t = e[0].previousElementSibling,
        n = nu(ne(e), { tabbable: !0 }, e);
      ((n.currentNode = t), na(n.nextNode()));
    }
    function nl(e, t) {
      let n = tG.default.useRef(t);
      (0, tG.useEffect)(() => {
        (n.current &&
          ((t2 = e), nr(document.activeElement, t2.current) || no(e.current)),
          (n.current = !1));
      }, []);
    }
    function nc(e, t, n) {
      let r = (0, tG.useRef)(
        "undefined" != typeof document ? document.activeElement : null,
      );
      C(() => {
        let i = r.current;
        if (!t) return;
        let s = (t) => {
          if ("Tab" !== t.key || t.altKey || t.ctrlKey || t.metaKey) return;
          let n = document.activeElement;
          if (!nr(n, e.current)) return;
          let r = nu(document.body, { tabbable: !0 });
          r.currentNode = n;
          let s = t.shiftKey ? r.previousNode() : r.nextNode();
          if (
            ((document.body.contains(i) && i !== document.body) || (i = null),
            (!s || !nr(s, e.current)) && i)
          ) {
            r.currentNode = i;
            do s = t.shiftKey ? r.previousNode() : r.nextNode();
            while (nr(s, e.current));
            (t.preventDefault(),
              t.stopPropagation(),
              s ? na(s, !0) : nn(i) ? na(i, !0) : n.blur());
          }
        };
        return (
          n || document.addEventListener("keydown", s, !0),
          () => {
            (n || document.removeEventListener("keydown", s, !0),
              t &&
                i &&
                nr(document.activeElement, e.current) &&
                requestAnimationFrame(() => {
                  document.body.contains(i) && na(i);
                }));
          }
        );
      }, [e, t, n]);
    }
    function nu(e, t, n) {
      let r = (null == t ? void 0 : t.tabbable) ? t8 : t6,
        i = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
          acceptNode(e) {
            var i;
            return (null == t || null == (i = t.from) ? void 0 : i.contains(e))
              ? NodeFilter.FILTER_REJECT
              : e.matches(r) && t0(e) && (!n || nr(e, n))
                ? NodeFilter.FILTER_ACCEPT
                : NodeFilter.FILTER_SKIP;
          },
        });
      return ((null == t ? void 0 : t.from) && (i.currentNode = t.from), i);
    }
    function nd(e) {
      return {
        focusNext(t = {}) {
          let n = e.current,
            { from: r, tabbable: i, wrap: s } = t,
            a = r || document.activeElement,
            o = nu(n, { tabbable: i });
          n.contains(a) && (o.currentNode = a);
          let l = o.nextNode();
          return (
            !l && s && ((o.currentNode = n), (l = o.nextNode())),
            l && na(l, !0),
            l
          );
        },
        focusPrevious(t = {}) {
          let n = e.current,
            { from: r, tabbable: i, wrap: s } = t,
            a = r || document.activeElement,
            o = nu(n, { tabbable: i });
          if (n.contains(a)) o.currentNode = a;
          else {
            let e = nh(o);
            return (e && na(e, !0), e);
          }
          let l = o.previousNode();
          return (
            !l && s && ((o.currentNode = n), (l = nh(o))),
            l && na(l, !0),
            l
          );
        },
        focusFirst(t = {}) {
          let n = e.current,
            { tabbable: r } = t,
            i = nu(n, { tabbable: r }).nextNode();
          return (i && na(i, !0), i);
        },
        focusLast(t = {}) {
          let n = e.current,
            { tabbable: r } = t,
            i = nh(nu(n, { tabbable: r }));
          return (i && na(i, !0), i);
        },
      };
    }
    function nh(e) {
      let t, n;
      do (n = e.lastChild()) && (t = n);
      while (n);
      return t;
    }
    function np(e = {}) {
      let { autoFocus: t = !1, isTextInput: n, within: r } = e,
        i = (0, tG.useRef)({
          isFocused: !1,
          isFocusVisible: t || tj(),
        }).current,
        [s, a] = (0, tG.useState)(!1),
        [o, l] = (0, tG.useState)(() => i.isFocused && i.isFocusVisible),
        c = () => l(i.isFocused && i.isFocusVisible),
        u = (e) => {
          ((i.isFocused = e), a(e), c());
        };
      tS(
        (e) => {
          ((i.isFocusVisible = e), c());
        },
        [],
        { isTextInput: n },
      );
      let { focusProps: d } = tA({ isDisabled: r, onFocusChange: u }),
        { focusWithinProps: h } = tq({
          isDisabled: !r,
          onFocusWithinChange: u,
        });
      return {
        isFocused: s,
        isFocusVisible: i.isFocused && o,
        focusProps: r ? h : d,
      };
    }
    function nm(e) {
      let { children: t, focusClass: n, focusRingClass: r } = e,
        { isFocused: i, isFocusVisible: s, focusProps: a } = np(e),
        o = tG.default.Children.only(t);
      return tG.default.cloneElement(
        o,
        R(o.props, {
          ...a,
          className: (0, tZ.default)({ [n || ""]: i, [r || ""]: s }),
        }),
      );
    }
    (tK({}, "FocusRing", () => nm), tK({}, "useFocusRing", () => np));
    var nf = {};
    (tK(nf, "FocusableProvider", () => ny), tK(nf, "useFocusable", () => nb));
    let ng = tG.default.createContext(null);
    function nx(e) {
      let t = (0, tG.useContext)(ng) || {};
      ez(t, e);
      let { ref: n, ...r } = t;
      return r;
    }
    function nv(e, t) {
      let { children: n, ...r } = e,
        i = { ...r, ref: t };
      return tG.default.createElement(ng.Provider, { value: i }, n);
    }
    let ny = tG.default.forwardRef(nv);
    function nb(e, t) {
      let { focusProps: n } = tA(e),
        { keyboardProps: r } = tI(e),
        i = R(n, r),
        s = nx(t),
        a = e.isDisabled ? {} : s,
        o = (0, tG.useRef)(e.autoFocus);
      return (
        (0, tG.useEffect)(() => {
          (o.current && t.current && t.current.focus(), (o.current = !1));
        }, []),
        {
          focusableProps: R(
            {
              ...i,
              tabIndex: e.excludeFromTabOrder && !e.isDisabled ? -1 : void 0,
            },
            a,
          ),
        }
      );
    }
    function nj(e) {
      return (t) => {
        e.forEach((e) => {
          "function" == typeof e ? e(t) : null != e && (e.current = t);
        });
      };
    }
    var nw = r,
      nC = h;
    let nk = (e) => ("number" == typeof e ? `${e}px` : e);
    var nS = e.i(422547);
    function nN({
      color: e,
      className: t,
      size: n = 20,
      wrapperClassName: r,
      style: i,
      ...s
    }) {
      let { numericValue: a, pixelValue: o } = nM(n);
      return (0, nw.jsx)("div", {
        className: (0, nC.clsx)(r),
        "data-geist-spinner": "",
        "data-version": "v1",
        style: { height: o, width: o, ...i },
        ...s,
        children: (0, nw.jsx)("div", {
          className: (0, nC.clsx)("relative left-1/2 top-1/2", t),
          style: { height: o, width: o, color: e || "var(--ds-gray-700)" },
          children: (0, nw.jsx)(nE, { size: a }),
        }),
      });
    }
    function nE({ size: e = 20 }) {
      let {
        delays: t,
        angleIncrement: n,
        lineDimensions: r,
        duration: i,
      } = nT(e);
      return (0, nw.jsx)(nw.Fragment, {
        children: t.map((e, t) =>
          (0, nw.jsx)(
            "div",
            {
              className: (0, nC.clsx)(
                "absolute left-[-10%] top-[-3.9%] bg-current",
                nS.default.line,
                r,
              ),
              style: {
                "--animation-delay": `${e}ms`,
                "--animation-duration": `${i}ms`,
                transform: `rotate(${0 === t ? 0 : t * n}deg) translate(146%)`,
              },
            },
            `spinner-line-${e}`,
          ),
        ),
      });
    }
    let nA = {
        angleIncrement: 45,
        lineDimensions: "h-[1.5px] w-[3px]",
        delays: [-875, -750, -625, -500, -375, -250, -125, 0],
        duration: 1e3,
      },
      nD = {
        angleIncrement: 36,
        lineDimensions: "h-[1.5px] w-[4px]",
        delays: [-900, -800, -700, -600, -500, -400, -300, -200, -100, 0],
        duration: 1e3,
      },
      nI = {
        angleIncrement: 30,
        lineDimensions: "h-[8%] w-[24%]",
        delays: [
          -1100, -1e3, -900, -800, -700, -600, -500, -400, -300, -200, -100, 0,
        ],
        duration: 1200,
      };
    function nM(e = 20) {
      let t = nk(e),
        n = "string" == typeof e ? Number.parseInt(e, 10) : e;
      return (
        Number.isNaN(n) && (t = nk((n = 20))),
        { numericValue: n, pixelValue: t }
      );
    }
    function nT(e = 20) {
      return e <= 12 ? nA : e <= 16 ? nD : nI;
    }
    let nL = (e, t, n) =>
        e
          ? [
              "geist-themed",
              `geist-${e}`,
              t ? `geist-${e}-fill` : null,
              n ? `geist-${e}-${n}` : null,
            ]
          : "",
      nP = (e, t, n, r) =>
        e
          ? [
              "geist-new-themed",
              `geist-new-${e}`,
              t ? `geist-new-${e}-fill` : null,
              n ? `geist-new-${e}-${n}` : null,
              "tooltip" === r ? "geist-new-tooltip" : "",
            ]
          : "";
    var nR = e.i(956786),
      nF = d;
    let n_ = (0, nF.createContext)(!1);
    n_.displayName = "DisabledContext";
    let nO = (e) => {
        let t = (0, nF.useContext)(n_);
        return e ?? t;
      },
      nB = "production";
    var nV = e.i(476133);
    let nz = "production" !== nB,
      nH = (e) => "object" == typeof e && null !== e && "type" in e;
    function n$(e) {
      return { sm: e.sm, md: e.md || e.sm, lg: e.lg || e.md || e.sm };
    }
    let nU = {
      small: { padding: "6px", height: "32px" },
      medium: { padding: "10px", height: "40px" },
      large: { padding: "14px", height: "48px" },
    };
    function nG(e, t) {
      return {
        [`--${e}-x-padding`]: nU[t].padding,
        [`--${e}-height`]: nU[t].height,
      };
    }
    function nW(e) {
      if ("object" != typeof e || null === e) return {};
      let t = n$(e);
      return Object.keys(t).reduce((e, n) => {
        let r = t[n];
        return r ? { ...e, ...nG(n, r) } : e;
      }, {});
    }
    let nq = (e, t, n) => {
        let r = !1,
          [i, ...s] = v.Children.toArray(e);
        if (
          i &&
          !(s.length >= 1) &&
          (nH(i) &&
            ("svg" === i.type ||
              ("string" != typeof i.type &&
                "name" in i.type &&
                "Icon" === i.type.name)) &&
            (r = !0),
          r && (!t || !n["aria-label"]))
        )
          throw Error(
            "SVG/Icon-only Buttons must include both an `aria-label` and the `svgOnly` prop.",
          );
      },
      nZ = (0, v.forwardRef)(
        (
          {
            Component: e = "button",
            typeName: t = "submit",
            className: n,
            href: r,
            as: i,
            target: s,
            rel: a,
            disabled: o,
            loading: l,
            width: c,
            type: u,
            size: d,
            prefix: h,
            normalStyle: p,
            hoverStyle: m,
            suffix: f,
            onClick: g,
            variant: j = "invert",
            shape: w,
            align: C,
            children: k,
            onMouseDown: S,
            onMouseUp: N,
            svgOnly: E,
            shadow: A,
            passthroughOnClick: D,
            passthroughOnMouseEnter: I,
            touchEventWorkaround: M = !1,
            role: T,
            ...L
          },
          P,
        ) => {
          let F = nO(),
            _ = o || l || F,
            O = nP(u, !0),
            B = (0, v.useRef)(null),
            { focusProps: V, isFocusVisible: z } = np(),
            { hoverProps: H, isHovered: $ } = tU({ isDisabled: _ }),
            { buttonProps: U, isPressed: G } = t_(
              {
                isDisabled: _,
                target: s,
                rel: a,
                elementType: e,
                onPress: g,
                onPressStart: S,
                onPressUp: N,
              },
              B,
            );
          (nz && nq(k, E, L),
            (0, v.useEffect)(() => {
              if (!M) return;
              function e(e) {
                e.preventDefault();
              }
              let t = B.current;
              return (
                t?.addEventListener("touchstart", e),
                () => {
                  t?.removeEventListener("touchstart", e);
                }
              );
            }, [M]));
          let W = { ...R({ onClick: D, onMouseEnter: I }, H, V, U) },
            q = "a" === e || e === y.default;
          return (0, x.jsxs)(e, {
            ...W,
            ...L,
            as: i,
            className:
              "unstyled" === j
                ? (0, b.clsx)(nV.default.base, n)
                : (0, b.clsx)(
                    nV.default.base,
                    nV.default.button,
                    n,
                    "secondary" !== u ? O : null,
                    {
                      [nV.default.secondary || ""]: "secondary" === u,
                      [nV.default.tertiary || ""]: "tertiary" === u,
                      [nV.default.shape || ""]:
                        "circle" === w || "square" === w,
                      [nV.default.circle || ""]: "circle" === w,
                      [nV.default.rounded || ""]: "rounded" === w,
                      [nV.default.loading || ""]: l,
                      [nV.default.shadow || ""]: A,
                      [nV.default.tiny || ""]: "tiny" === d,
                      [nV.default.small || ""]: "small" === d,
                      [nV.default.large || ""]: "large" === d,
                      [nV.default.responsive || ""]:
                        "object" == typeof d && null !== d,
                      [nV.default.customStyles || ""]: !!p,
                      [nV.default.customHoverStyles || ""]: !!m,
                    },
                    nV.default[j],
                  ),
            "data-active": o ? void 0 : nK(G),
            "data-focus": o ? void 0 : nK(z),
            "data-geist-button": "",
            "data-hover": o ? void 0 : nK($),
            "data-prefix": h || l ? "true" : "false",
            "data-suffix": f ? "true" : "false",
            "data-testid": L["data-testid"],
            "data-version": "v1",
            href: r,
            ref: nj([B, P]),
            role: q ? "link" : W.role || T,
            style: {
              ...L.style,
              minWidth: c,
              maxWidth: c,
              ...(p
                ? {
                    "--custom-bg-color": p.backgroundColor,
                    "--custom-color": p.color,
                    "--custom-border-color": p.borderColor,
                  }
                : {}),
              ...(m
                ? {
                    "--custom-bg-hover-color": m.backgroundColor,
                    "--custom-hover-color": m.color,
                    "--custom-border-hover-color": m.borderColor,
                  }
                : {}),
              "--geist-icon-size": "16px",
              ...nW(d),
            },
            target: q ? s : void 0,
            type: t,
            tabIndex: 0,
            children: [
              h || l
                ? (0, x.jsx)("span", {
                    className: nV.default.prefix,
                    children: l
                      ? (0, x.jsx)(nN, {
                          color: "var(--accents-5)",
                          size: (0, nR.getIxIconSize)(d),
                        })
                      : h,
                  })
                : null,
              (0, x.jsx)("span", {
                className: (0, b.clsx)(nV.default.content, {
                  [nV.default.flex || ""]: E,
                  [nV.default.start || ""]: "start" === C,
                  [nV.default.grow || ""]: "grow" === C,
                  [nV.default.flexGrow || ""]: "flex-grow" === C,
                  [nV.default.center || ""]: "center" === C,
                }),
                children: k,
              }),
              f
                ? (0, x.jsx)("span", {
                    className: nV.default.suffix,
                    children: f,
                  })
                : null,
            ],
          });
        },
      );
    nZ.displayName = "Button";
    let nK = (e) => (e ? "" : void 0);
    var nY = e.i(592885),
      nJ = e.i(222431),
      nQ = r,
      nX = d,
      n0 = h;
    let n1 = 4,
      n2 = ["sm", "md", "lg", "xl"];
    function n5(e, t) {
      let n = {};
      if ("object" != typeof t) null !== t && (n[`--${e}`] = t);
      else {
        let r;
        n2.forEach((i) => {
          let s = t[i];
          null !== s && s !== r && ((n[`--${i}-${e}`] = s), (r = s));
        });
      }
      return n;
    }
    function n3(e) {
      return "number" == typeof e ? `${e * n1}px` : void 0;
    }
    function n4(e) {
      if ("number" == typeof e) {
        let t = n3(e);
        return { sm: t, md: t, lg: t, xl: t };
      }
      return { sm: n3(e.sm), md: n3(e.md), lg: n3(e.lg), xl: n3(e.xl) };
    }
    function n9(e) {
      return {
        sm: e.sm,
        md: e.md || e.sm,
        lg: e.lg || e.md || e.sm,
        xl: e.xl || e.lg || e.md || e.sm,
      };
    }
    function n7(e, t, n, r) {
      return e === t && e === n && e === r
        ? e
        : e === n && t === r
          ? `${e} ${t}`
          : t === r
            ? `${e} ${t} ${n}`
            : `${e} ${t} ${n} ${r}`;
    }
    function n6(e, t, n, r) {
      let i = n9(e),
        s = n9(t),
        a = n9(n),
        o = n9(r);
      return {
        sm: n7(i.sm || "", s.sm || "", a.sm || "", o.sm || ""),
        md: n7(i.md || "", s.md || "", a.md || "", o.md || ""),
        lg: n7(i.lg || "", s.lg || "", a.lg || "", o.lg || ""),
        xl: n7(i.xl || "", s.xl || "", a.xl || "", o.xl || ""),
      };
    }
    function n8(e, t, n, r, i, s, a, o) {
      if (
        void 0 === t &&
        void 0 === n &&
        void 0 === r &&
        void 0 === i &&
        void 0 === s &&
        void 0 === a &&
        void 0 === o
      )
        return { [`--${e}`]: "0px" };
      let l = n6(
          n4(i ?? r ?? t ?? 0),
          n4(s ?? n ?? t ?? 0),
          n4(a ?? r ?? t ?? 0),
          n4(o ?? n ?? t ?? 0),
        ),
        c = Object.keys(l).reduce(
          (t, n) => ({ ...t, [`--${n}-${e}`]: l[n] }),
          {},
        );
      return c[`--sm-${e}`] === c[`--md-${e}`] &&
        c[`--md-${e}`] === c[`--lg-${e}`] &&
        c[`--lg-${e}`] === c[`--xl-${e}`]
        ? { [`--${e}`]: c[`--sm-${e}`] }
        : c;
    }
    var re = e.i(646909);
    let rt = (0, nX.memo)(function ({
      as: e = "div",
      children: t,
      padding: n,
      paddingX: r,
      paddingY: i,
      paddingTop: s,
      paddingRight: a,
      paddingBottom: o,
      paddingLeft: l,
      gap: c,
      direction: u = "column",
      align: d = "stretch",
      justify: h = "flex-start",
      flex: p = "initial",
      debug: m,
      style: f,
      className: g,
      ref: x,
      ...v
    }) {
      let y = e,
        b = [n, r, i, s, a, o, l].some((e) => void 0 !== e);
      return (0, nQ.jsx)(y, {
        className: (0, n0.clsx)(re.default.stack, "stack", g, {
          [re.default.debug]: m,
          [re.default.padding]: b,
        }),
        "data-testid": v["data-testid"],
        "data-version": "v1",
        ref: x,
        style: {
          ...f,
          "--stack-flex": p,
          ...n5("stack-direction", u),
          ...n5("stack-align", d),
          ...n5("stack-justify", h),
          ...n8("stack-padding", n, r, i, s, a, o, l),
          ...n8("stack-gap", c),
        },
        ...v,
        children: t,
      });
    });
    var rn = r,
      rr = d,
      ri = h,
      rs = e.i(198737),
      ra = e.i(710825),
      ro = e.i(691701),
      rl = e.i(147675),
      rc = e.i(580769);
    let ru = ({
      children: e,
      className: t,
      type: n,
      fill: r,
      label: i,
      size: s,
      center: a,
      variant: o,
      action: l,
      style: c,
      disabled: u,
      icon: d,
      ...h
    }) => {
      let p = nL(n, r, o);
      Array.isArray(p) && p.shift();
      let m = (0, rr.useMemo)(
          () => (i ? 4 : void 0 !== s ? rh[s] : 12),
          [i, s],
        ),
        f = (0, rr.useCallback)(
          () =>
            !1 === i
              ? null
              : i
                ? (0, rn.jsxs)("span", {
                    style: { whiteSpace: "nowrap", fontWeight: 600 },
                    children: [i, ":", " "],
                  })
                : (0, rn.jsx)("span", {
                    style: { display: "flex", height: 16 },
                    children: (0, rn.jsx)(rd, { icon: d, type: n }),
                  }),
          [i, d, n],
        );
      return (0, rn.jsxs)("div", {
        className: (0, ri.clsx)(
          rc.default.note,
          t,
          p,
          {
            [String(rc.default.action)]: l,
            [String(rc.default.small)]: "small" === s,
            [String(rc.default.large)]: "large" === s,
            [String(rc.default.center)]: a,
            [String(rc.default.disabled)]: u,
          },
          "v3-colors",
        ),
        ...h,
        "data-geist-note": "",
        "data-version": "v1",
        style: c,
        children: [
          (0, rn.jsxs)("div", {
            className: (0, ri.clsx)(
              rc.default.content,
              i ? rc.default.hasLabel : "",
            ),
            style: { gap: m },
            children: [
              (0, rn.jsx)(f, {}),
              (0, rn.jsx)("span", { children: e }),
            ],
          }),
          l ? (0, rn.jsx)("div", { children: l }) : null,
        ],
      });
    };
    function rd({ icon: e, type: t }) {
      return (
        e ||
        ("success" === t
          ? (0, rn.jsx)(rs.CheckCircle, { color: "blue-900", size: 16 })
          : "error" === t
            ? (0, rn.jsx)(ro.Stop, { color: "red-900", size: 16 })
            : "warning" === t
              ? (0, rn.jsx)(rl.Warning, { color: "amber-900", size: 16 })
              : (0, rn.jsx)(ra.Information, { color: "currentColor" }))
      );
    }
    let rh = { xSmall: 8, small: 8, mediumSmall: 8, large: 12 };
    var rp = r,
      rm = h,
      rf = d,
      rg = e.i(522387);
    function rx(e, t = 16) {
      let n = e / t;
      return `${n}rem`;
    }
    function rv(e) {
      if ("object" == typeof e && null !== e) {
        if (!("sm" in e))
          throw Error(
            "Failed to restrict responsive prop, an object was passed without an sm key",
          );
        let t = {
          xs: e.xs || e.sm || null,
          sm: e.sm || null,
          smd: e.smd || e.md || e.sm || null,
          md: e.md || e.smd || e.sm || null,
          lg: e.lg || e.md || e.sm || null,
        };
        if (Object.values(t).some((e) => null == e))
          throw Error(
            "Failed to restrict responsive prop, an invalid value was passed to sm, md or lg",
          );
        return t;
      }
      return { xs: e, sm: e, smd: e, md: e, lg: e };
    }
    let ry = {
        48: "3.5rem",
        40: "3.5rem",
        32: "2.5rem",
        24: "2rem",
        20: "1.5rem",
        18: "1.5rem",
        16: "1.5rem",
        14: "1.25rem",
        13: "1.125rem",
        12: "1rem",
        10: "0.75rem",
      },
      rb = {
        48: "-0.066875rem",
        40: "-0.058125rem",
        32: "-0.049375rem",
        24: "-0.029375rem",
        20: "-0.020625rem",
        18: "initial",
        16: "initial",
        14: "initial",
        13: "initial",
        12: "initial",
        10: "initial",
      },
      rj = {
        48: "700",
        40: "600",
        32: "600",
        24: "600",
        20: "600",
        16: "400",
        14: "400",
        13: "400",
        18: "400",
        12: "400",
        10: "400",
      },
      rw = {
        "heading-72": {
          size: 72,
          lineHeight: 72,
          weight: 600,
          letterSpacing: -4.32,
        },
        "heading-64": {
          size: 64,
          lineHeight: 64,
          weight: 600,
          letterSpacing: -3.84,
        },
        "heading-56": {
          size: 56,
          lineHeight: 56,
          weight: 600,
          letterSpacing: -3.36,
        },
        "heading-48": {
          size: 48,
          lineHeight: 56,
          weight: 600,
          letterSpacing: -2.88,
        },
        "heading-40": {
          size: 40,
          lineHeight: 48,
          weight: 600,
          letterSpacing: -2.4,
        },
        "heading-32": {
          size: 32,
          lineHeight: 40,
          weight: 600,
          letterSpacing: -1.28,
        },
        "heading-24": {
          size: 24,
          lineHeight: 32,
          weight: 600,
          letterSpacing: -0.96,
        },
        "heading-20": {
          size: 20,
          lineHeight: 26,
          weight: 600,
          letterSpacing: -0.4,
        },
        "heading-16": {
          size: 16,
          lineHeight: 24,
          weight: 600,
          letterSpacing: -0.32,
        },
        "heading-14": {
          size: 14,
          lineHeight: 20,
          weight: 600,
          letterSpacing: -0.28,
        },
        "button-16": { size: 16, lineHeight: 20, weight: 500 },
        "button-14": { size: 14, lineHeight: 20, weight: 500 },
        "button-12": { size: 12, lineHeight: 16, weight: 500 },
        "label-20": { size: 20, lineHeight: 32, weight: 400 },
        "label-18": { size: 18, lineHeight: 20, weight: 400 },
        "label-16": { size: 16, lineHeight: 20, weight: 400 },
        "label-14": { size: 14, lineHeight: 20, weight: 400 },
        "label-13": { size: 13, lineHeight: 16, weight: 400 },
        "label-12": { size: 12, lineHeight: 16, weight: 400 },
        "copy-24": { size: 24, lineHeight: 36, weight: 400 },
        "copy-20": { size: 20, lineHeight: 36, weight: 400 },
        "copy-18": { size: 18, lineHeight: 28, weight: 400 },
        "copy-16": { size: 16, lineHeight: 24, weight: 400 },
        "copy-14": { size: 14, lineHeight: 20, weight: 400 },
        "copy-13": { size: 13, lineHeight: 18, weight: 400 },
      };
    function rC({ size: e, variant: t, lineHeight: n, weight: r }) {
      if (t) {
        if ("string" == typeof t) {
          let e = rw[t];
          return {
            "--text-size": rx(e.size),
            "--text-line-height": rx(e.lineHeight),
            "--text-letter-spacing": `${e.letterSpacing || 0}px`,
            "--text-weight": r ?? e.weight,
          };
        }
        let e = rv(t);
        return Object.keys(e).reduce((t, n) => {
          let i = rw[e[n]];
          return {
            ...t,
            [`--${n}-text-size`]: rx(i.size),
            [`--${n}-text-line-height`]: rx(i.lineHeight),
            [`--${n}-text-weight`]: r ?? i.weight,
            [`--${n}-text-letter-spacing`]: `${i.letterSpacing || 0}px`,
          };
        }, {});
      }
      if ("number" == typeof e)
        return {
          "--text-size": rx(e),
          "--text-line-height": n ? rx(n) : ry[e],
          "--text-letter-spacing": rb[e],
          "--text-weight": r || rj[e],
        };
      let i = rv(e);
      return Object.keys(i).reduce((e, t) => {
        let s = i[t];
        return {
          ...e,
          [`--${t}-text-size`]: rx(s),
          [`--${t}-text-line-height`]: n ? rx(n) : ry[s],
          [`--${t}-text-weight`]: r || rj[s],
          [`--${t}-text-letter-spacing`]: rb[s],
        };
      }, {});
    }
    let rk = function ({
        children: e,
        as: t = "p",
        size: n = 14,
        lineHeight: r,
        weight: i,
        color: s = "gray-1000",
        transform: a,
        align: o,
        truncate: l,
        wrap: c = !0,
        className: u,
        style: d,
        monospace: h = !1,
        variant: p,
        ref: m,
        ...f
      }) {
        let g = t,
          x = "inherit" === s ? "inherit" : `var(--ds-${s})`;
        return (0, rp.jsx)(g, {
          className: (0, rm.clsx)(rg.default.wrapper, u, {
            [rg.default.truncate]: !0 === l,
            [rg.default.clamp]: "number" == typeof l,
            [rg.default.nowrap]: !c,
            [rg.default.monospace]: h,
          }),
          "data-version": "v1",
          ref: m,
          style: {
            ...("number" == typeof l && { "--text-clamp": l }),
            "--text-color": x,
            ...rC({ size: n, lineHeight: r, weight: i, variant: p }),
            ...("string" == typeof a && { "--text-transform": a }),
            ...("string" == typeof o && { "--text-align": o }),
            ...d,
          },
          ...f,
          children: e,
        });
      },
      rS = (0, rf.memo)(rk);
    var rN = r,
      rE = d,
      rA = y,
      rD = e.i(389140);
    function rI(e) {
      let t = "string" == typeof e ? e : e.pathname;
      return (
        !(!t || /^https?:\/\/$/.exec(t) || t.includes("*")) && t.startsWith("/")
      );
    }
    var rM = E,
      rT = e.i(226368),
      rL = e.i(387726),
      rP = d;
    function rR({
      prefetch: e,
      prefetchStrategy: t,
      isDifferentZone: n,
      href: r,
    }) {
      let i = (0, rT.useRouter)(),
        s = r && rI(r),
        a =
          "visible" === t &&
          !n &&
          s &&
          "true" !== rM.default.env.NEXT_PUBLIC_TESTMODE &&
          "true" !== rM.default.env.NEXT_PUBLIC_TESTSERVER,
        o = (0, rP.useCallback)(() => {
          "string" == typeof r && i.prefetch(r, { kind: rL.PrefetchKind.FULL });
        }, [r, i]);
      return {
        onMouseEnter: "hover" === t && s ? o : void 0,
        prefetch: !!a && e,
      };
    }
    function rF({
      href: e,
      as: t,
      tab: n,
      shallow: r,
      scroll: i,
      children: s,
      prefetch: a,
      prefetchStrategy: o = "visible",
      icon: l,
      isDifferentZone: c,
      onNavigate: u,
      ...d
    }) {
      let h = rR({
        href: e,
        isDifferentZone: c,
        prefetch: a,
        prefetchStrategy: o,
      });
      return d.disabled || d.loading
        ? (0, rN.jsx)(nZ, { ...d, children: s })
        : "string" == typeof e && (n || !rI(e) || d.download || c)
          ? (0, rN.jsxs)(nZ, {
              Component: "a",
              href: d.disabled ? void 0 : e,
              rel: n ? "noopener" : void 0,
              target: n ? "_blank" : void 0,
              ...d,
              children: [s, l ? (0, rN.jsx)(rD.External, {}) : null],
            })
          : "string" == typeof e
            ? (0, rN.jsx)(nZ, {
                Component: rA.default,
                href: e,
                rel: n ? "noopener" : void 0,
                target: n ? "_blank" : void 0,
                onNavigate: u,
                prefetch: h.prefetch,
                scroll: i,
                shallow: r,
                ...d,
                children: s,
              })
            : (0, rN.jsx)(r_, {
                Component: rA.default,
                onMouseEnter: h.onMouseEnter,
                rel: n ? "noopener" : void 0,
                target: n ? "_blank" : void 0,
                ...d,
                as: t,
                href: e,
                prefetch: h.prefetch,
                scroll: i,
                shallow: r,
                children: s,
              });
    }
    let r_ = (0, rE.forwardRef)((e, t) => {
      let { children: n, onClick: r, onMouseEnter: i, ...s } = e;
      return (0, rN.jsx)(nZ, {
        ref: t,
        ...s,
        passthroughOnClick: r,
        passthroughOnMouseEnter: i,
        children: n,
      });
    });
    r_.displayName = "ButtonWrapper";
    var rO = r,
      rB = d,
      rV = y,
      rz = h,
      rH = e.i(900511),
      r$ = e.i(334660);
    let rU = (0, rB.forwardRef)(
      (
        {
          as: e,
          type: t,
          variant: n,
          external: r,
          icon: i,
          tab: s,
          href: a,
          children: o,
          className: l,
          prefetch: c,
          canPrefetch: u = rI,
          prefetchStrategy: d = "visible",
          isDifferentZone: h,
          onNavigate: p,
          ...m
        },
        f,
      ) => {
        let g = rR({
            href: a,
            isDifferentZone: h,
            prefetch: c,
            prefetchStrategy: d,
          }),
          x = s || r || (a && !u(a) && !a.startsWith("#")),
          v = n || t,
          y = v ? r$.default[v] : "",
          { underline: b, ...j } = m,
          w = !!r && !1 !== i;
        if (a && (h || x))
          return (0, rO.jsxs)("a", {
            href: a,
            rel: x ? "noopener" : void 0,
            target: x ? "_blank" : void 0,
            ...m,
            className: (0, rz.clsx)(
              r$.default.link,
              {
                [String(r$.default.external)]: w,
                [String(r$.default.alwaysUnderline)]: !!b,
              },
              y,
              l,
            ),
            ref: f,
            children: [o, w ? (0, rO.jsx)(rH.ExternalSmall, {}) : null],
          });
        if (!a && !m.onClick)
          return (0, rO.jsx)("span", {
            ...j,
            "aria-disabled": !0,
            className: (0, rz.clsx)(r$.default.disabled, y, l),
            ref: f,
            role: "link",
            tabIndex: -1,
            children: o,
          });
        let C = (0, rz.clsx)(
          r$.default.link,
          { [String(r$.default.alwaysUnderline)]: !!b },
          y,
          l,
        );
        return a
          ? (0, rO.jsx)(rV.default, {
              href: e || a,
              ...j,
              ...g,
              onNavigate: p,
              className: C,
              ref: f,
              children: o,
            })
          : (0, rO.jsx)("span", {
              ...j,
              className: C,
              onKeyDown: (e) => {
                "Enter" === e.key && j.onClick?.();
              },
              ref: f,
              role: "link",
              tabIndex: 0,
              children: o,
            });
      },
    );
    rU.displayName = "Link";
    var rG = r,
      rW = h,
      rq = e.i(858269);
    let rZ = "/",
      rK = {},
      rY = (e) => {
        let t = rK[e];
        if (t) return t;
        let n = (0, rq.default)(e);
        return ((rK[e] = n), n);
      },
      rJ = function (e, t, ...n) {
        return [...e.split(rZ), t, ...n].filter(Boolean).map(rY).join(rZ);
      };
    var rQ = e.i(239236);
    function rX({
      as: e = "span",
      width: t,
      height: n,
      boxHeight: r = n,
      button: i,
      pill: s,
      rounded: a,
      squared: o,
      style: l,
      show: c = !0,
      block: u = !0,
      className: d,
      vcenter: h,
      children: p,
      autoSize: m = !1,
      animated: f = !0,
    }) {
      let g = e,
        x = m || !!(p && !(t || n));
      ((t = t || 24), (n = n || 24), (r = r || n));
      let v = x ? 0 : Number(r) - Number(n);
      return (0, rG.jsx)(g, {
        className: (0, rW.clsx)(rQ.default.skeleton, d, {
          [rQ.default.show]: c,
          [rQ.default.wrapper]: x,
          [rQ.default.loaded]: !x && !!p,
          [rQ.default.inline]: !u,
          [rQ.default.pill]: s,
          [rQ.default.rounded]: a,
          [rQ.default.squared]: o,
          [rQ.default.noAnimation]: !f,
          [rQ.default.button]: i,
        }),
        "data-geist-skeleton": "",
        "data-testid": rJ("legacy", "skeleton"),
        "data-version": "v1",
        style: x
          ? l
          : {
              width: nk(t),
              minHeight: nk(n),
              marginBottom: (h ? v / 2 : v) || void 0,
              marginTop: (h ? v / 2 : void 0) || void 0,
              ...l,
            },
        children: p,
      });
    }
    var r0 = rH,
      r1 = p,
      r2 = r,
      r5 = d;
    let r3 = () => {
        if (!("document" in globalThis)) return 0;
        let e = 400,
          t = document.createElement("div");
        ((t.style.width = `${e}px`),
          (t.style.height = `${e}px`),
          (t.style.overflow = "scroll"),
          document.body.appendChild(t));
        let n = e - t.scrollWidth;
        return (t.remove(), n);
      },
      r4 = 40,
      r9 = 8,
      r7 = 56,
      r6 = 8,
      r8 = 2,
      ie = 24,
      it = 24,
      ir = 8,
      ii = {
        root: { startTime: 0, endTime: 1, duration: 1, depth: 0, children: [] },
        spanMap: {},
        resourceMap: {},
        filter: "",
        selected: null,
        baseScale: 1,
        scaleRatio: 1,
        scale: 1,
        width: 640,
        height: 480,
        timelineWidth: 640,
        timelineHeight: 480,
        panelWidth: 380,
        panelHeight: 480,
        scrollbarWidth: 0,
        timelineRef: { current: null },
        scrollSnapshotRef: { current: void 0 },
        memoCacheRef: { current: new Map() },
        getQuickLinks: () => [],
        withPanel: !1,
        isMobile: !1,
      },
      is = (e) =>
        (e.width -
          e.scrollbarWidth -
          Number(!!(e.selected && e.withPanel)) * e.panelWidth) /
        e.root.duration,
      ia = (0, r5.createContext)({ state: ii, dispatch: () => {} });
    ia.displayName = "TraceViewerContext";
    let io = (e, t) => {
      switch (t.type) {
        case "setRoot":
          return (
            (e.scrollSnapshotRef.current = void 0),
            e.memoCacheRef.current.clear(),
            io(
              {
                ...e,
                root: t.root,
                spanMap: t.spanMap,
                resourceMap: Object.fromEntries(
                  t.resources.map(({ name: e, attributes: t }) => [e, t]),
                ),
              },
              { type: "detectBaseScale" },
            )
          );
        case "setSize": {
          let n = t.height - r7 - r4 - 3 * r9,
            r = e.withPanel && t.width <= 768,
            i = {
              ...e,
              width: t.width,
              height: t.height,
              timelineWidth:
                t.width -
                Number(!!(e.selected && e.withPanel && !r)) * e.panelWidth,
              timelineHeight: n,
              panelHeight: n,
              isMobile: r,
            };
          return (
            i.width !== e.width && (i = io(i, { type: "detectBaseScale" })),
            i
          );
        }
        case "setPanelWidth": {
          let n = Math.max(240, Math.min(t.width, e.width - 240));
          return { ...e, timelineWidth: e.width - n, panelWidth: n };
        }
        case "setFilter":
          return { ...e, filter: t.filter };
        case "deselect":
          return io(
            { ...e, selected: null, timelineWidth: e.width },
            { type: "minScale" },
          );
        case "select": {
          let n = e.spanMap[t.id];
          if (!n) return e;
          return {
            ...e,
            selected: n,
            timelineWidth:
              e.width - (e.withPanel && !e.isMobile ? e.panelWidth : 0),
          };
        }
        case "escape":
          if (e.selected) return io(e, { type: "deselect" });
          return io(e, { type: "resetScale" });
        case "toggleSelection": {
          let n = e;
          if (
            (e.selected && (n = io(n, { type: "deselect" })),
            e.selected?.span.spanId === t.id)
          )
            return n;
          return io(n, { type: "select", id: t.id });
        }
        case "detectBaseScale": {
          let t = (e.width - e.scrollbarWidth) / e.root.duration;
          return { ...e, baseScale: t, scale: t * e.scaleRatio };
        }
        case "setScale":
          return { ...e, scaleRatio: t.scale, scale: e.baseScale * t.scale };
        case "resetScale":
          return io(e, {
            type: "scaleToRange",
            t1: e.root.startTime,
            t2: e.root.endTime,
          });
        case "scaleToNode": {
          let n = e.spanMap[t.id];
          if (!n) return e;
          return io(
            io(e, {
              type: "setScale",
              scale:
                (e.width -
                  e.scrollbarWidth -
                  (e.withPanel && !e.isMobile ? e.panelWidth : 0)) /
                n.duration /
                e.baseScale,
            }),
            {
              type: "setScrollSnapshot",
              anchorT: n.startTime - e.root.startTime,
              anchorX: 0,
            },
          );
        }
        case "scaleToRange": {
          let n = Math.abs(t.t1 - t.t2);
          return io(
            io(e, {
              type: "setScale",
              scale:
                (e.width -
                  e.scrollbarWidth -
                  (e.selected && e.withPanel ? e.panelWidth : 0)) /
                n /
                e.baseScale,
            }),
            {
              type: "setScrollSnapshot",
              anchorT: Math.min(t.t1, t.t2) - e.root.startTime,
              anchorX: 0,
            },
          );
        }
        case "adjustScaleRatio": {
          let { scaleRatio: n } = e;
          switch (t.direction) {
            case -1:
              n *= 0.8;
              break;
            case 1:
              n *= 1.25;
              break;
            default:
              n = 1;
          }
          let r = e.timelineRef.current;
          if (!r) return (console.warn("timelineRef is null"), e);
          let { clientWidth: i, scrollLeft: s } = r;
          return io(
            io(
              { ...e, scaleRatio: n, scale: e.baseScale * n },
              { type: "minScale" },
            ),
            {
              type: "setScrollSnapshot",
              anchorT: (s + 0.5 * i) / e.scale,
              anchorX: 0.5 * i,
            },
          );
        }
        case "trackpadScale": {
          let n = Math.max(
            is(e) / e.baseScale,
            e.scaleRatio *
              (1 + 0.2 * Math.sign(t.delta) * Math.sqrt(Math.abs(t.delta))),
          );
          return io(
            { ...e, scaleRatio: n, scale: e.baseScale * n },
            {
              type: "setScrollSnapshot",
              anchorT: t.anchorT,
              anchorX: t.anchorX,
            },
          );
        }
        case "minScale": {
          let t = is(e);
          if (e.scale >= t) return e;
          return { ...e, scale: t, scaleRatio: t / e.baseScale };
        }
        case "setScrollSnapshot": {
          let n = e.timelineRef.current;
          if (!n) return e;
          let { anchorT: r, anchorX: i } = t,
            s = r * e.scale - i,
            { scrollTop: a } = n,
            o = (a - it - r6) / (ie + r8),
            l = o + Math.ceil(e.timelineHeight / (ie + r8));
          return (
            (e.scrollSnapshotRef.current = {
              anchorT: r,
              anchorX: i,
              scrollLeft: s,
              scrollTop: a,
              startTime: e.root.startTime + s / e.scale,
              endTime: e.root.startTime + (s + e.timelineWidth) / e.scale,
              startRow: o,
              endRow: l,
              scale: e.scale,
            }),
            e
          );
        }
        case "setWithPanel":
          if (e.withPanel === t.withPanel) return e;
          return { ...e, withPanel: t.withPanel };
        case "forceRender":
          return (e.memoCacheRef.current.set("", {}), { ...e });
      }
    };
    function il({ getQuickLinks: e, withPanel: t = !1, children: n }) {
      let r = (0, r5.useRef)(null),
        i = (0, r5.useRef)(void 0),
        s = (0, r5.useRef)(e);
      s.current = e;
      let a = (0, r5.useRef)(new Map()),
        o = (0, r5.useRef)(new Map()),
        [l, c] = (0, r5.useReducer)(io, ii, (e) => ({
          ...e,
          scrollbarWidth: r3(),
          timelineRef: r,
          scrollSnapshotRef: i,
          memoCacheRef: a,
          withPanel: t,
          getQuickLinks: (e) => {
            let t = e.spanId,
              n = o.current.get(t);
            if (n) return n;
            let r = s.current?.(e) || [];
            return (o.current.set(t, r), r);
          },
        }));
      (0, r5.useEffect)(() => c({ type: "setWithPanel", withPanel: t }), [t]);
      let u = (0, r5.useMemo)(() => ({ state: l, dispatch: c }), [l, c]);
      return (0, r2.jsx)(ia.Provider, { value: u, children: n });
    }
    let ic = () => (0, r5.useContext)(ia);
    var iu = e.i(725927),
      id = r,
      ih = d,
      ip = h,
      im = p,
      ig = iu;
    let ix = (e, t) => e.duration * t < 64,
      iv = (e, t) => e.duration * t >= 500,
      iy = (e) =>
        e.isVercel
          ? String(im.default.colorVercel)
          : String(im.default[`color${e.resourceIndex % 5}`]),
      ib = (e, t) => {
        let n = iv(e, t),
          r = e.isHovered && !n && !1 !== e.isHighlighted;
        return (0, ip.clsx)(
          im.default.spanNode,
          n && im.default.huge,
          ix(e, t) && im.default.small,
          e.isSelected && im.default.selected,
          r && im.default.xHover,
          e.isHighlighted ? im.default.colorHighlight : iy(e),
          !1 === e.isHighlighted && im.default.unlit,
        );
      },
      ij = (e) =>
        e.isInstrumentationHint
          ? "Get Started"
          : (0, ig.formatDuration)(e.duration),
      iw = (0, ih.memo)(function ({
        root: e,
        scale: t,
        spans: n,
        scrollSnapshotRef: r,
        cache: i,
      }) {
        return n.map((n) =>
          (0, id.jsx)(
            iC,
            {
              cacheKey: i.get(n.span.spanId),
              node: n,
              root: e,
              scale: t,
              scrollSnapshotRef: r,
            },
            n.span.spanId,
          ),
        );
      }),
      iC = (0, ih.memo)(function ({
        node: e,
        root: t,
        scale: n,
        scrollSnapshotRef: r,
      }) {
        let i = (0, ih.useRef)(null);
        e.ref = i;
        let { span: s } = e,
          a = ij(e),
          o = (e.startTime - t.startTime) * n,
          l = it + (ie + r8) * e.row,
          c = e.duration * n,
          u = ie,
          d = iv(e, n),
          h = ix(e, n),
          p = e.isHovered && !d && !1 !== e.isHighlighted;
        h && !p && ((u *= 0.4), (l += (ie - u) * 0.5));
        let m = !1;
        if (p) {
          let { duration: n, endTime: i } = t,
            s = r.current;
          (s && ((n = s.endTime - s.startTime), (i = s.endTime)),
            (m = i - e.startTime < 0.25 * n));
        }
        return (0, id.jsxs)(id.Fragment, {
          children: [
            (0, id.jsx)("button", {
              "aria-label": `${s.name} - ${a}`,
              className: ib(e, n),
              "data-span-id": s.spanId,
              "data-start-time": e.startTime - t.startTime,
              "data-right-side": m,
              ref: i,
              style: {
                "--span-width": `${c}px`,
                minWidth: p ? c : void 0,
                width: p ? void 0 : c,
                height: u,
                maxWidth: p && !m ? (t.endTime - e.startTime) * n : void 0,
                containIntrinsicWidth: p ? void 0 : c,
                containIntrinsicHeight: u,
                left: m ? void 0 : o,
                right: m ? (t.endTime - e.endTime) * n : void 0,
                top: l,
              },
              type: "button",
              children:
                h && !p
                  ? null
                  : (0, id.jsxs)(id.Fragment, {
                      children: [
                        (0, id.jsx)("span", {
                          className: im.default.spanName,
                          children: e.label || s.name,
                        }),
                        d
                          ? (0, id.jsx)("span", {
                              className: im.default.spanSpacer,
                            })
                          : null,
                        p || c > 128
                          ? (0, id.jsx)("span", {
                              className: im.default.spanDuration,
                              children: a,
                            })
                          : null,
                      ],
                    }),
            }),
            e.events && !h
              ? e.events.map((r) =>
                  (0, id.jsx)(
                    ik,
                    { event: r, node: e, root: t, scale: n },
                    r.key,
                  ),
                )
              : null,
          ],
        });
      }),
      ik = (0, ih.memo)(function ({ event: e, node: t, root: n, scale: r }) {
        let i = (0, ih.useRef)(null);
        e.ref = i;
        let {
            event: { name: s },
          } = e,
          a = (0, ig.formatDuration)(e.timestamp - n.startTime),
          o = (e.timestamp - n.startTime) * r,
          l = it + (ie + r8) * t.row;
        return (0, id.jsxs)("div", {
          "aria-label": `${s} - ${a}`,
          className: (0, ip.clsx)(
            im.default.spanNodeEvent,
            t.isHighlighted ? im.default.colorHighlight : iy(t),
            !1 === t.isHighlighted && im.default.unlit,
          ),
          "data-hovered": e.isHovered,
          ref: i,
          style: { left: o, top: l },
          children: [
            (0, id.jsxs)("div", {
              className: (0, ip.clsx)(
                im.default.hoverInfo,
                (e.timestamp - t.startTime) / t.duration < 0.5
                  ? im.default.alignStart
                  : im.default.alignEnd,
              ),
              children: [
                (0, id.jsx)("span", {
                  className: im.default.eventName,
                  children: s,
                }),
                (0, id.jsx)("span", {
                  className: im.default.eventTimestamp,
                  children: a,
                }),
              ],
            }),
            (0, id.jsx)("div", { className: im.default.eventDiamond }),
          ],
        });
      }),
      iS = (e) => `${(100 * e).toFixed(3)}%`,
      iN = (e, t) => (e < t ? -1 : +(e > t)),
      iE = (e) => {
        let t = {};
        for (let [n, r] of Object.entries(e)) {
          let e = n.indexOf("."),
            i = "",
            s = "";
          -1 !== e
            ? ((i = n.substring(0, e)), (s = n.substring(e + 1)))
            : (s = n);
          let a = t[i];
          (a || ((a = { prefix: i, attributes: [] }), (t[i] = a)),
            a.attributes.push({ key: n, suffix: s, value: String(r) }));
        }
        let n = Array.from(Object.values(t)).sort((e, t) =>
          iN(e.prefix, t.prefix),
        );
        for (let e of n) e.attributes.sort((e, t) => iN(e.suffix, t.suffix));
        return n;
      },
      iA = (e, t) => {
        let n = [];
        if (!t) return n;
        for (let e = t; "parent" in e; e = e.parent) n.unshift(e);
        return n;
      };
    function iD({ attached: e = !1 }) {
      let {
          state: {
            root: t,
            selected: n,
            resourceMap: r,
            getQuickLinks: i,
            isMobile: s,
          },
          dispatch: a,
        } = ic(),
        o = (0, f.useMemo)(() => iE(n?.span.attributes ?? {}), [n]),
        l = (0, f.useMemo)(() => {
          let e = n?.span.resource;
          if (!e) return [];
          let t = r[e];
          return t ? iE(t) : [];
        }, [r, n]),
        c = (0, f.useMemo)(() => iA(t, n), [t, n]);
      if (!n) return null;
      let { span: u } = n,
        d = i_(n);
      return (0, m.jsxs)(rt, {
        className: (0, g.clsx)(
          r1.default.spanDetailPanel,
          s && r1.default.mobile,
        ),
        children: [
          e && !s ? (0, m.jsx)(iU, {}) : null,
          (0, m.jsx)(rt, {
            className: r1.default.spanDetailPanelTop,
            direction: "row",
            children: (0, m.jsxs)(rt, {
              align: "center",
              className: r1.default.spanDetailPanelTopInfo,
              direction: "row",
              gap: 3,
              justify: "space-between",
              children: [
                (0, m.jsxs)(rt, {
                  align: "center",
                  className: r1.default.spanDetailPanelTruncatedHeading,
                  direction: "row",
                  gap: 3,
                  children: [
                    n.isInstrumentationHint
                      ? null
                      : (0, m.jsx)(rS, {
                          as: "span",
                          className: r1.default.spanDetailPanelDuration,
                          monospace: !0,
                          size: 13,
                          children: (0, iu.formatDuration)(n.duration),
                        }),
                    (0, m.jsx)(rS, {
                      as: "span",
                      className: r1.default.spanDetailPanelName,
                      size: 13,
                      title: u.name,
                      children: u.name,
                    }),
                  ],
                }),
                (0, m.jsxs)(rt, {
                  align: "center",
                  className: r1.default.spanDetailPanelCorner,
                  direction: "row",
                  gap: 2,
                  children: [
                    (0, m.jsx)(rt, {
                      direction: "row",
                      children: (0, m.jsx)("div", {
                        className: r1.default.spanDetailPanelCloseVerticalRule,
                      }),
                    }),
                    (0, m.jsx)(nZ, {
                      "aria-label": "Close Span Details",
                      className: r1.default.spanDetailPanelClose,
                      onClick: () => a({ type: "deselect" }),
                      shape: "square",
                      size: "small",
                      svgOnly: !0,
                      touchEventWorkaround: !0,
                      type: "tertiary",
                      children: (0, m.jsx)(nY.Cross, {
                        color: "gray-700",
                        size: 20,
                      }),
                    }),
                  ],
                }),
              ],
            }),
          }),
          (0, m.jsxs)(rt, {
            className: r1.default.spanDetailPanelBody,
            gap: 3,
            children: [
              n.isVercel ? (0, m.jsx)(iO, { node: n }) : null,
              n.isInstrumentationHint ? (0, m.jsx)(iH, {}) : null,
              !n.isInstrumentationHint && c.length
                ? (0, m.jsx)(iM, {
                    className: r1.default.ancestorGroup,
                    name: "Location",
                    children: c.map((e) =>
                      (0, m.jsxs)(
                        "button",
                        {
                          className: r1.default.ancestorNode,
                          onClick: () =>
                            a({ type: "select", id: e.span.spanId }),
                          type: "button",
                          children: [
                            (0, m.jsxs)("div", {
                              className: r1.default.ancestorText,
                              children: [
                                (0, m.jsx)("span", {
                                  className: r1.default.ancestorName,
                                  children: e.label || e.span.name,
                                }),
                                (0, m.jsx)("span", {
                                  className: r1.default.ancestorDuration,
                                  children: (0, iu.formatDuration)(e.duration),
                                }),
                              ],
                            }),
                            (0, m.jsx)("span", {
                              "aria-hidden": !0,
                              className: r1.default.ancestorLineContainer,
                              children: (0, m.jsx)("span", {
                                className: (0, g.clsx)(
                                  r1.default.ancestorLine,
                                  iy(e),
                                ),
                                style: {
                                  left: iS(
                                    (e.startTime - t.startTime) / t.duration,
                                  ),
                                  width: iS(e.duration / t.duration),
                                },
                              }),
                            }),
                          ],
                        },
                        `${n.span.spanId}.${e.span.spanId}`,
                      ),
                    ),
                  })
                : null,
              d ? (0, m.jsx)(iB, { getQuickLinks: i, span: n.span }) : null,
              n.events?.length
                ? (0, m.jsx)(iM, {
                    name: "Events",
                    children: n.events.map((e) =>
                      (0, m.jsxs)(
                        f.Fragment,
                        {
                          children: [
                            (0, m.jsxs)("dl", {
                              className: r1.default.spanDetailPanelAttribute,
                              children: [
                                (0, m.jsx)("dt", {
                                  className:
                                    r1.default.spanDetailPanelAttributeKey,
                                  children: e.event.name,
                                }),
                                (0, m.jsx)("dd", {
                                  className:
                                    r1.default.spanDetailPanelAttributeValue,
                                  children: (0, iu.formatDuration)(
                                    e.timestamp - t.startTime,
                                  ),
                                }),
                              ],
                            }),
                            Object.entries(e.event.attributes).map(([t, n]) =>
                              (0, m.jsx)(
                                i$,
                                { name: `${e.event.name}.${t}`, value: n },
                                t,
                              ),
                            ),
                          ],
                        },
                        e.key,
                      ),
                    ),
                  })
                : null,
              o.length
                ? (0, m.jsx)(iM, {
                    name: "Attributes",
                    children: o.map((e) =>
                      (0, m.jsx)(
                        f.Fragment,
                        {
                          children: e.attributes.map(({ key: e, value: t }) =>
                            (0, m.jsx)(i$, { name: e, value: t }, e),
                          ),
                        },
                        e.prefix,
                      ),
                    ),
                  })
                : null,
              l.length
                ? (0, m.jsx)(iM, {
                    name: "Resource",
                    children: l.map((e) =>
                      (0, m.jsx)(
                        f.Fragment,
                        {
                          children: e.attributes.map(({ key: e, value: t }) =>
                            (0, m.jsx)(i$, { name: e, value: t }, e),
                          ),
                        },
                        e.prefix,
                      ),
                    ),
                  })
                : null,
              n.isInstrumentationHint
                ? null
                : (0, m.jsxs)(iM, {
                    name: "Library",
                    children: [
                      (0, m.jsx)(i$, { name: "name", value: u.library.name }),
                      u.library.version
                        ? (0, m.jsx)(i$, {
                            name: "version",
                            value: u.library.version,
                          })
                        : null,
                    ],
                  }),
            ],
          }),
        ],
      });
    }
    let iI = "vc-trace-span-exp:";
    function iM({ name: e, className: t = "", children: n }) {
      let [r, i] = (0, f.useState)(
          () =>
            !("localStorage" in globalThis) ||
            "0" !== localStorage.getItem(`${iI}${e}`),
        ),
        s = (0, f.useCallback)(() => {
          i((t) => {
            let n = !t;
            return (localStorage.setItem(`${iI}${e}`, String(Number(n))), n);
          });
        }, [e]);
      return (0, m.jsxs)(rt, {
        className: (0, g.clsx)(
          r1.default.detailGroup,
          r ? r1.default.expanded : r1.default.collapsed,
          t,
        ),
        children: [
          (0, m.jsxs)("button", {
            className: r1.default.detailHeading,
            onClick: s,
            type: "button",
            children: [
              (0, m.jsx)("span", { children: e }),
              (0, m.jsx)(nJ.ChevronDown, {
                className: r1.default.detailHeadingIcon,
              }),
            ],
          }),
          r ? n : null,
        ],
      });
    }
    let iT = new Set(["OPTIONS", "HEAD", "GET", "PUT", "POST", "DELETE"]),
      iL = {
        "Resolve Deployment":
          "How long it took Vercel's routing layer to retrieve details for the deployment.",
        "Resolve Cache":
          "How long it took Vercel's routing layer to check for a cached function invocation.",
        "Resolve Route":
          "How long it took Vercel's routing layer to resolve routing rules, including redirects and rewrites.",
        "Invoke Middleware":
          "How long it took this middleware to start and run user code.",
        "Invoke Function":
          "How long it took this Vercel Function to start and run user code.",
        waitUntil: "How long it took to run user code inside of waitUntil.",
        "Start VM":
          "How long it took to start the Virtual Machine which contains the Vercel Function.",
        "Spawn Node.js":
          "How long it took the Virtual Machine to start the Node.js runtime.",
        "Spawn Python":
          "How long it took the Virtual Machine to start the Python runtime.",
        "Init User Code":
          "How long it took to import the user code and run any globally-scoped code.",
      },
      iP = new Set([
        "Start VM",
        "Spawn Node.js",
        "Spawn Python",
        "Init User Code",
      ]),
      iR = (e) => {
        if (!e || !("span" in e)) return null;
        let t = e.span.attributes,
          n = t["vercel.region"] || t["vercel.function.region"];
        return n ? String(n) : null;
      },
      iF = (e) => {
        let { name: t } = e.span,
          n = iR(e),
          r = iR(e.parent);
        return "true" === e.span.attributes["vercel.middleware.internal"]
          ? "The Vercel Toolbar created this middleware."
          : iP.has(t) ||
              ("Invoke Function" === t &&
                e.children.some((e) => iP.has(e.span.name)))
            ? "This function encountered a cold start."
            : n && r && n !== r
              ? "This request was routed across regions."
              : null;
      },
      i_ = (e) => {
        if (!e.isVercel) return !1;
        let { name: t } = e.span,
          n = t.indexOf(" ");
        if (-1 === n) return !1;
        let r = t.substring(0, n);
        return iT.has(r);
      };
    function iO({ node: e }) {
      let { name: t } = e.span,
        n = iL[t];
      if (
        (!n &&
          i_(e) &&
          (n =
            "How long it took for Vercel to process the request and send the response."),
        !n)
      )
        return null;
      let r = iF(e);
      return (0, m.jsx)(iM, {
        name: "What is this?",
        children: (0, m.jsxs)("div", {
          className: r1.default.infraSpanDescription,
          children: [
            (0, m.jsx)("span", { children: n }),
            r ? (0, m.jsx)(ru, { children: r }) : r,
          ],
        }),
      });
    }
    let iB = (0, f.memo)(function ({ getQuickLinks: e, span: t }) {
      let n = e(t);
      return n.length
        ? (0, m.jsx)(iM, {
            name: "Links",
            children: n.map(({ key: e, value: t }) =>
              (0, m.jsx)(iz, { link: t, name: e }, e),
            ),
          })
        : null;
    });
    function iV(e) {
      let [t, n] = (0, f.useState)({}),
        r = void 0 !== e.__resolvedValue || void 0 !== e.__rejectedValue;
      return (
        (0, f.useEffect)(() => {
          r ||
            e
              .then((t) => {
                e.__resolvedValue = t;
              })
              .catch((t) => {
                e.__rejectedValue = t;
              })
              .finally(() => n({}));
        }, [e, r]),
        e.__resolvedValue
      );
    }
    function iz({ name: e, link: t }) {
      let n = iV(t);
      return (0, m.jsxs)(rU, {
        as: n ? void 0 : "span",
        className: (0, g.clsx)(
          r1.default.spanDetailPanelAttribute,
          r1.default.spanDetailPanelQuickLink,
        ),
        href: n?.href || "",
        children: [
          (0, m.jsx)("span", {
            className: r1.default.spanDetailPanelAttributeKey,
            children: e,
          }),
          (0, m.jsx)("span", {
            className: (0, g.clsx)(
              r1.default.spanDetailPanelAttributeValue,
              r1.default.spanDetailPanelQuickLinkLabel,
            ),
            children: n
              ? (0, m.jsxs)(m.Fragment, {
                  children: [
                    n.label,
                    n.icon ||
                      (0, m.jsx)(r0.ExternalSmall, { color: "gray-900" }),
                  ],
                })
              : (0, m.jsxs)(m.Fragment, {
                  children: [
                    (0, m.jsx)(rX, { height: 18, width: 32 + 8 * e.length }),
                    (0, m.jsx)(rX, { height: 18, rounded: !0, width: 18 }),
                  ],
                }),
          }),
        ],
      });
    }
    function iH() {
      return (0, m.jsx)(iM, {
        name: "What is this?",
        children: (0, m.jsxs)("div", {
          className: r1.default.infraSpanDescription,
          children: [
            (0, m.jsx)("span", {
              children:
                "You can visualize your application's spans alongside Vercel's spans in this viewer.",
            }),
            (0, m.jsx)(rF, {
              href: "https://vercel.com/docs/session-tracing#adding-custom-spans",
              size: "small",
              target: "_blank",
              children: "Get Started",
            }),
          ],
        }),
      });
    }
    function i$({ name: e, value: t }) {
      return (0, m.jsxs)("dl", {
        className: r1.default.spanDetailPanelAttribute,
        children: [
          (0, m.jsx)("dt", {
            className: r1.default.spanDetailPanelAttributeKey,
            children: e,
          }),
          (0, m.jsx)("dd", {
            className: r1.default.spanDetailPanelAttributeValue,
            title: String(t),
            children: String(t),
          }),
        ],
      });
    }
    function iU() {
      let {
          state: { panelWidth: e },
          dispatch: t,
        } = ic(),
        n = (0, f.useRef)({
          start: { x: 0, width: e },
          x: 0,
          width: e,
          isHeld: !1,
        });
      n.current.width = e;
      let r = (0, f.useCallback)((e) => {
          if ("mouse" !== e.pointerType) return;
          e.preventDefault();
          let t = n.current;
          ((t.start.x = e.clientX),
            (t.x = e.clientX),
            (t.start.width = t.width),
            (t.isHeld = !0));
        }, []),
        i = (0, f.useCallback)(() => {
          t({ type: "setPanelWidth", width: ii.panelWidth });
        }, [t]);
      return (
        (0, f.useEffect)(() => {
          let e = 0,
            r = () => {
              let e = n.current;
              t({
                type: "setPanelWidth",
                width: e.start.width + e.start.x - e.x,
              });
            },
            i = (t) => {
              n.current.isHeld &&
                (t.preventDefault(),
                (n.current.x = t.clientX),
                cancelAnimationFrame(e),
                (e = requestAnimationFrame(r)));
            },
            s = () => {
              n.current.isHeld = !1;
            };
          return (
            window.addEventListener("pointermove", i),
            window.addEventListener("pointerup", s),
            () => {
              (window.removeEventListener("pointermove", i),
                window.removeEventListener("pointerup", s));
            }
          );
        }, [t]),
        (0, m.jsx)("div", {
          "aria-hidden": !0,
          className: r1.default.spanDetailPanelResizer,
          onDoubleClick: i,
          onPointerDown: r,
        })
      );
    }
    var iG = r,
      iW = d,
      iq = e.i(877318);
    let iZ = (0, iq.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.5C1.5 3.73858 3.73858 1.5 6.5 1.5C9.26142 1.5 11.5 3.73858 11.5 6.5C11.5 9.26142 9.26142 11.5 6.5 11.5C3.73858 11.5 1.5 9.26142 1.5 6.5ZM6.5 0C2.91015 0 0 2.91015 0 6.5C0 10.0899 2.91015 13 6.5 13C8.02469 13 9.42677 12.475 10.5353 11.596L13.9697 15.0303L14.5 15.5607L15.5607 14.5L15.0303 13.9697L11.596 10.5353C12.475 9.42677 13 8.02469 13 6.5C13 2.91015 10.0899 0 6.5 0ZM4.125 5.875H4.75H5.875V4.75V4.125H7.125V4.75V5.875H8.25H8.875V7.125H8.25H7.125V8.25V8.875H5.875V8.25V7.125H4.75H4.125V5.875Z" fill="currentColor"/>',
      ),
      iK = (0, iq.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M6.5 1.5C3.73858 1.5 1.5 3.73858 1.5 6.5C1.5 9.26142 3.73858 11.5 6.5 11.5C9.26142 11.5 11.5 9.26142 11.5 6.5C11.5 3.73858 9.26142 1.5 6.5 1.5ZM0 6.5C0 2.91015 2.91015 0 6.5 0C10.0899 0 13 2.91015 13 6.5C13 8.02469 12.475 9.42677 11.596 10.5353L15.0303 13.9697L15.5607 14.5L14.5 15.5607L13.9697 15.0303L10.5353 11.596C9.42677 12.475 8.02469 13 6.5 13C2.91015 13 0 10.0899 0 6.5ZM4.75 5.875H4.125V7.125H4.75H8.25H8.875V5.875H8.25H4.75Z" fill="currentColor"/>',
      );
    var iY = e.i(419206),
      iJ = p;
    function iQ() {
      let { dispatch: e } = ic(),
        t = (0, iW.useCallback)(() => {
          e({ type: "adjustScaleRatio", direction: 1 });
        }, [e]),
        n = (0, iW.useCallback)(() => {
          e({ type: "adjustScaleRatio", direction: -1 });
        }, [e]),
        r = (0, iW.useCallback)(() => {
          e({ type: "adjustScaleRatio", direction: 0 });
        }, [e]);
      return (0, iG.jsxs)(rt, {
        className: iJ.default.zoomButtonGroup,
        direction: "row",
        children: [
          (0, iG.jsx)(nZ, {
            "aria-label": "Zoom Out",
            className: iJ.default.zoomButton,
            onClick: n,
            svgOnly: !0,
            variant: "unstyled",
            children: (0, iG.jsx)(iK, {}),
          }),
          (0, iG.jsx)("div", { className: iJ.default.divider }),
          (0, iG.jsx)(nZ, {
            "aria-label": "Reset Zoom",
            className: iJ.default.zoomButton,
            onClick: r,
            svgOnly: !0,
            variant: "unstyled",
            children: (0, iG.jsx)(iY.Minus, {}),
          }),
          (0, iG.jsx)("div", { className: iJ.default.divider }),
          (0, iG.jsx)(nZ, {
            "aria-label": "Zoom In",
            className: iJ.default.zoomButton,
            onClick: t,
            svgOnly: !0,
            variant: "unstyled",
            children: (0, iG.jsx)(iZ, {}),
          }),
        ],
      });
    }
    var iX = e.i(124626),
      i0 = r,
      i1 = h,
      i2 = d,
      i5 = p,
      i3 = iu,
      i4 = d;
    function i9(e) {
      let t = (0, i4.useRef)({});
      return {
        setStyle: (0, i4.useCallback)(
          (n, r) => {
            if (((t.current[n] = r), e.current)) {
              if (!r) return void e.current.style.removeProperty(n);
              e.current.style.setProperty(n, r);
            }
          },
          [e],
        ),
        styleRef: t,
        style: { ...t.current },
      };
    }
    var i7 = d;
    function i6(e) {
      let t = (0, i7.useRef)(e);
      ((t.current = e),
        (0, i7.useEffect)(() => {
          let e = 0,
            n = 0,
            r = () => {
              (t.current(e), (e = 0));
            },
            i = (t) => {
              if (!t.ctrlKey && !t.metaKey) return;
              t.preventDefault();
              let i = -t.deltaY;
              switch (t.deltaMode) {
                case WheelEvent.DOM_DELTA_PAGE:
                  i *= window.innerHeight;
                  break;
                case WheelEvent.DOM_DELTA_LINE:
                  i *= 20;
              }
              ((e += i),
                cancelAnimationFrame(n),
                (n = requestAnimationFrame(r)));
            };
          return (
            window.addEventListener("wheel", i, { passive: !1 }),
            () => {
              (window.removeEventListener("wheel", i), cancelAnimationFrame(n));
            }
          );
        }, []));
    }
    let i8 = [1, 2, 4, 5, 8, 10];
    function se({ scale: e }) {
      let {
          state: { root: t },
        } = ic(),
        n = t.duration,
        r = Math.floor(Math.log10(n)),
        i = Math.max(
          2,
          Math.pow(10, r) * (Math.floor(Math.log10(0.5 * n)) === r ? 1 : 0.5),
        ),
        s = i * e,
        a = 1;
      for (let e of i8) {
        if (i / e < 24) break;
        a = e;
      }
      ((i /= a), (s /= a));
      let o = Math.ceil(n / i),
        l = Math.ceil(100 / s) || 1;
      return (0, i0.jsx)("div", {
        className: i5.default.markersContainer,
        children: (0, i0.jsx)("div", {
          "aria-hidden": !0,
          className: i5.default.markers,
          style: {
            width: Math.floor(t.duration * e + 15),
            visibility: -1 !== e ? "visible" : "hidden",
            "--marker-width": `${s}px`,
          },
          children: Array(o)
            .fill(null)
            .map((e, t) => {
              let n = t % l == 0;
              return (0, i0.jsx)(
                "span",
                {
                  className: (0, i1.clsx)(
                    i5.default.marker,
                    !n && i5.default.notch,
                  ),
                  children: n
                    ? (0, i0.jsx)("span", {
                        className: i5.default.markerLabel,
                        children: (0, i3.formatDuration)(i * t),
                      })
                    : null,
                },
                String(t),
              );
            }),
        }),
      });
    }
    function st({ events: e, root: t, scale: n }) {
      return (0, i0.jsx)("div", {
        className: i5.default.eventMarkersContainer,
        children: (0, i0.jsx)("div", {
          "aria-hidden": !0,
          className: i5.default.eventMarkers,
          style: { width: Math.floor(t.duration * n) },
          children: e.map((e) =>
            (0, i0.jsx)(
              "span",
              {
                className: (0, i1.clsx)(i5.default.eventMarker),
                style: { left: Math.floor((e.timestamp - t.startTime) * n) },
              },
              e.key,
            ),
          ),
        }),
      });
    }
    let sn = 2;
    function sr({
      memoCacheRef: e,
      timelineRef: t,
      root: n,
      spans: r,
      events: i,
      scale: s,
      dispatch: a,
      scrollSnapshotRef: o,
    }) {
      let l = (0, i2.useRef)(!1),
        c = (0, i2.useRef)(r);
      c.current = r;
      let u = (0, i2.useRef)(i);
      u.current = i;
      let d = (0, i2.useRef)(null),
        { style: h, setStyle: p } = i9(d),
        m = (0, i2.useRef)(null),
        f = (0, i2.useRef)(null),
        { style: g, setStyle: x } = i9(f),
        v = (0, i2.useRef)(void 0),
        y = (0, i2.useRef)(null),
        { style: b, setStyle: j } = i9(y),
        w = (0, i2.useRef)(0);
      (0, i2.useEffect)(() => {
        let r = t.current;
        if (!r) return;
        let i = w.current,
          o = 0,
          d = !1,
          h = !1,
          f = !1,
          g = !1,
          b = 0,
          k = 0,
          S = Date.now() + 500,
          N = () => {
            v.current || (v.current = r.getBoundingClientRect());
          },
          E = (e) => (v.current ? (e - it - r6) / (ie + r8) : 0),
          A = () => {
            let t = e.current;
            for (let e of c.current)
              e.isHovered && ((e.isHovered = !1), t.set(e.span.spanId, {}));
            a({ type: "forceRender" });
          },
          D = 0,
          I = () => {
            if (!l.current) return;
            v.current || N();
            let t = v.current;
            if (!t) return;
            let { scrollLeft: g, scrollTop: w } = r,
              C = Math.max(0, Math.min(i + g - t.left - r6, n.duration * s)),
              M = `${C - g + r6}px`;
            (x("left", M), p("left", M));
            let T = n.startTime + C / s,
              L = T - n.startTime;
            if (
              (L < 0 || L > n.duration
                ? m.current?.removeAttribute("data-text")
                : m.current?.setAttribute(
                    "data-text",
                    (0, i3.formatTimeSelection)(L),
                  ),
              d)
            ) {
              let e,
                r,
                a = i - o,
                l = Math.abs(a);
              if (!f) {
                if (l < 4) return;
                ((f = !0), j("display", "flex"), A());
              }
              (a > 0
                ? (j("left", ""), j("right", "0"))
                : (j("left", "0"), j("right", "")),
                j("width", `${l}px`));
              let c =
                Math.max(0, Math.min(o + g - t.left - r6, n.duration * s)) / s;
              (c < L ? ((e = c), (r = L)) : ((e = L), (r = c)),
                y.current?.setAttribute(
                  "data-range",
                  `${(0, i3.formatTimeSelection)(e)}  ${(0, i3.formatTimeSelection)(r)}`,
                ),
                y.current?.setAttribute(
                  "data-duration",
                  `${(0, i3.formatTimeSelection)(r - e)} selected`,
                ));
            }
            if (Date.now() < S) {
              D = requestAnimationFrame(I);
              return;
            }
            if (g !== b || w !== k) {
              ((b = g), (k = w), (D = requestAnimationFrame(I)));
              return;
            }
            if (
              (i - t.left < 128
                ? m.current?.setAttribute("data-align", "left")
                : i - t.left > t.width - 128
                  ? m.current?.setAttribute("data-align", "right")
                  : m.current?.removeAttribute("data-align"),
              !f && !h)
            ) {
              let n = e.current,
                r = E(w) - sn,
                i = E(w + t.height) + sn;
              for (let e of c.current) {
                let t =
                  e.row >= r &&
                  e.row <= i &&
                  T >= e.startTime &&
                  T <= e.endTime;
                e.isHovered !== t &&
                  ((e.isHovered = t), n.set(e.span.spanId, {}));
              }
              let o = 12 / s;
              for (let e of u.current) {
                let t = T >= e.timestamp - o && T <= e.timestamp + o;
                if (e.isHovered === t) continue;
                e.isHovered = t;
                let n = e.ref?.current;
                n && n.setAttribute("data-hovered", String(t));
              }
              a({ type: "forceRender" });
            }
          };
        D = requestAnimationFrame(I);
        let M = (e) => {
            "mouse" === e.pointerType && (l.current = !0);
          },
          T = () => {
            l.current && ((l.current = !1), A());
          },
          L = ({ clientX: e }) => {
            ((w.current = i = e),
              cancelAnimationFrame(D),
              (D = requestAnimationFrame(I)));
          },
          P = (e) => {
            e.preventDefault();
          },
          R = (e) => {
            if (2 === e.button) ((g = !0), e.preventDefault());
            else {
              if (0 !== e.button) return;
              g = !1;
            }
            t.current?.contains(e.target)
              ? ((o = i), (d = !0))
              : ((h = !0), requestAnimationFrame(A));
          },
          F = (e) => {
            if (((h = !1), !d || ((d = !1), !f))) return;
            if (
              ((f = !1),
              j("display", ""),
              j("left", ""),
              j("right", ""),
              j("width", ""),
              e.preventDefault(),
              e.stopImmediatePropagation(),
              g)
            ) {
              g = !1;
              return;
            }
            v.current || N();
            let t = v.current;
            if (!t) return;
            let { scrollLeft: l } = r,
              c = Math.max(0, Math.min((o + l - t.left - r6) / s, n.duration)),
              u = Math.max(0, Math.min((i + l - t.left - r6) / s, n.duration));
            a({
              type: "scaleToRange",
              t1: c + n.startTime,
              t2: u + n.startTime,
            });
          },
          _ = (e) => {
            d && "Escape" === e.key && ((g = !0), F(e));
          },
          O = () => {
            ((v.current = void 0),
              (C.current = void 0),
              cancelAnimationFrame(D),
              (D = requestAnimationFrame(I)));
          },
          B = () => {
            (cancelAnimationFrame(D), (D = requestAnimationFrame(I)));
          },
          V = new ResizeObserver(() => {
            v.current = void 0;
          });
        return (
          V.observe(r),
          window.addEventListener("mousemove", L),
          r.addEventListener("contextmenu", P),
          window.addEventListener("mousedown", R),
          window.addEventListener("mouseup", F),
          window.addEventListener("blur", F),
          window.addEventListener("keydown", _, !0),
          window.addEventListener("scroll", O),
          r.addEventListener("scroll", B),
          r.addEventListener("pointerenter", M),
          r.addEventListener("pointerleave", T),
          () => {
            (V.disconnect(),
              window.removeEventListener("mousemove", L),
              r.removeEventListener("contextmenu", P),
              window.removeEventListener("mousedown", R),
              window.removeEventListener("mouseup", F),
              window.removeEventListener("blur", F),
              window.removeEventListener("keydown", _, !0),
              window.removeEventListener("scroll", O),
              r.removeEventListener("scroll", B),
              r.removeEventListener("pointerenter", M),
              r.removeEventListener("pointerleave", T),
              cancelAnimationFrame(D),
              (w.current = i),
              A());
          }
        );
      }, [a, n, s, x, p, j, e, t, o]);
      let C = (0, i2.useRef)(void 0);
      return (
        i6((e) => {
          let n = t.current;
          if (!n) return;
          v.current ??= n.getBoundingClientRect();
          let r = v.current,
            i = Math.max(
              0,
              Math.min(w.current - r.left - r6, r.width - 2 * r6),
            ),
            o = 0,
            l = C.current;
          (l?.anchorX === i
            ? (o = l.anchorT)
            : (C.current = l =
                { anchorT: (o = (n.scrollLeft + i) / s), anchorX: i }),
            a({
              type: "trackpadScale",
              delta: e / 64,
              anchorT: o,
              anchorX: i,
            }));
        }),
        (0, i0.jsxs)(i0.Fragment, {
          children: [
            (0, i0.jsx)("div", {
              className: i5.default.cursorMarkerStickyParent,
              children: (0, i0.jsx)("div", {
                className: i5.default.cursorMarkerLabelContainer,
                ref: d,
                style: h,
                children: (0, i0.jsx)("div", {
                  className: i5.default.cursorMarkerLabel,
                  ref: m,
                }),
              }),
            }),
            (0, i0.jsx)("div", {
              className: i5.default.cursorMarkerStickyParent,
              children: (0, i0.jsx)("div", {
                className: i5.default.cursorMarkerContainer,
                ref: f,
                style: g,
                children: (0, i0.jsx)("div", {
                  className: i5.default.cursorMarker,
                  children: (0, i0.jsx)("div", {
                    className: i5.default.cursorSelection,
                    ref: y,
                    style: b,
                  }),
                }),
              }),
            }),
          ],
        })
      );
    }
    var si = d,
      ss = iX;
    function sa() {
      return [];
    }
    let so = (t) => {
      let { state: n, dispatch: r } = ic(),
        {
          root: i,
          filter: s,
          scale: a,
          timelineRef: o,
          timelineWidth: l,
          spanMap: c,
          scrollSnapshotRef: u,
          selected: d,
          memoCacheRef: h,
        } = n,
        p = sl(n.timelineHeight),
        m = (0, si.useRef)(0),
        [f, g] = (0, si.useState)(sa),
        [x, v] = (0, si.useState)(sa),
        [y, b] = (0, si.useState)(sa),
        [j, w] = (0, si.useState)(-1),
        C = (0, si.useRef)(void 0);
      return (
        (0, si.useEffect)(() => C.current?.(s), [s]),
        (0, si.useEffect)(() => {
          if (t?.length) {
            for (let e of f)
              for (let n of e) {
                let e = t.includes(n.span.spanId);
                n.isHighlighted !== e &&
                  ((n.isHighlighted = e), h.current.set(n.span.spanId, {}));
              }
            r({ type: "forceRender" });
          }
        }, [f, t, r, h]),
        (0, si.useEffect)(() => {
          if (!i.startTime) return;
          let t = new Worker(e.r(581255)),
            n = ++m.current,
            s = (e) => {
              let t = e.data;
              switch (t.type) {
                case "setRowsResult":
                  if (t.isEnd)
                    for (let e of t.rows)
                      for (let t of e)
                        t.span = c[t.span.spanId]?.span ?? t.span;
                  g(t.rows);
                  break;
                case "updateHighlight": {
                  if (t.requestId !== n) return;
                  let { matches: e } = t;
                  (g((t) => {
                    for (let n of t)
                      for (let t of n) {
                        let n = e.has(t.span.spanId);
                        t.isHighlighted !== n &&
                          ((t.isHighlighted = n),
                          h.current.set(t.span.spanId, {}));
                      }
                    return t;
                  }),
                    r({ type: "forceRender" }));
                }
              }
            };
          t.addEventListener("message", s);
          let a = { requestId: n, type: "calculateSpanPositions", root: i };
          return (
            t.postMessage(a),
            (C.current = (e) => {
              let r = e.trim().toLocaleLowerCase();
              if (!r)
                return void g((e) =>
                  e.map((e) =>
                    e.map((e) => ((e.isHighlighted = void 0), { ...e })),
                  ),
                );
              let s = {
                type: "filterSpans",
                requestId: (n = ++m.current),
                root: i,
                filter: r,
              };
              t.postMessage(s);
            }),
            () => {
              t.terminate();
            }
          );
        }, [i, c, r, h]),
        (0, si.useEffect)(() => {
          if (!f.length) return;
          let e = o.current,
            t = u.current,
            n = !1,
            r = !1,
            s = 0,
            c = 0,
            d = Math.max(500, 0.5 * l),
            h = Array(f.length).fill(null),
            m = () => {
              r = !0;
              let e = Math.min(1 + c + Math.ceil(t?.endRow ?? 1 / 0), f.length);
              for (let t = e; t--; ) {
                if (h[t]) continue;
                let e = g(t);
                if (Math.abs(e) > c) {
                  if (((r = !1), e > 0)) continue;
                  break;
                }
                let n = [],
                  i = f[t];
                if (i) {
                  for (let e of i) {
                    if (!(0, ss.adjustSpanVisibility)(e, a)) continue;
                    let t = x(e);
                    ((s = Math.max(t, s)), n.push({ d: t, span: e }));
                  }
                  h[t] = n;
                }
              }
            },
            g = (e) =>
              t
                ? e < t.startRow
                  ? e - t.startRow
                  : e > t.endRow
                    ? e - t.endRow
                    : 0
                : 0,
            x = (e) => {
              if (!t) return 0;
              let n = 0;
              e.endTime < t.startTime
                ? (n = t.startTime - e.endTime)
                : e.startTime > t.endTime && (n = e.startTime - t.endTime);
              let r = Math.abs(g(e.row));
              return n || r
                ? Math.sqrt(Math.pow(n / a, 2) + Math.pow(r * ie + r8, 2))
                : 0;
            },
            y = () => {
              if (!e) return;
              let { scrollLeft: n, scrollTop: r } = e,
                s = (r - it - r6) / (ie + r8),
                o = s + Math.ceil(p / (ie + r8));
              u.current = t = {
                anchorT: n / a,
                anchorX: 0,
                scrollLeft: n,
                scrollTop: r,
                startTime: i.startTime + n / a,
                endTime: i.startTime + (n + l) / a,
                startRow: s,
                endRow: o,
                scale: a,
              };
              for (let e = h.length; e--; ) h[e] = null;
            },
            j = 0,
            C = () => {
              ((n || !t) && ((n = !1), y()), m());
              let e = [],
                i = [];
              for (let t of h)
                if (t)
                  for (let { d: n, span: r } of t)
                    !(n > c) && (e.push(r), r.events && i.push(...r.events));
              (c < d &&
                (!r || c < s) &&
                ((c = Math.min(d, c + 100)), (j = requestAnimationFrame(C))),
                v(e),
                b(i),
                w(a));
            };
          C();
          let k = Date.now(),
            S = (e) => {
              (e.ctrlKey || e.metaKey) && (k = Date.now());
            };
          e?.addEventListener("wheel", S);
          let N = () => {
            Date.now() - k <= 50 ||
              ((n = !0),
              cancelAnimationFrame(j),
              (j = requestAnimationFrame(C)));
          };
          return (
            e?.addEventListener("scroll", N),
            () => {
              (cancelAnimationFrame(j),
                e?.removeEventListener("wheel", S),
                e?.removeEventListener("scroll", N));
            }
          );
        }, [f, i, a, u, o, l, p]),
        (0, si.useEffect)(() => {
          let e;
          if (!d) return;
          for (let t of x)
            if (t.span.spanId === d.span.spanId) {
              e = t;
              break;
            }
          let t = e?.ref?.current;
          if (e && t)
            return (
              (e.isSelected = !0),
              (t.className = ib(e, a)),
              () => {
                ((e.isSelected = !1), (t.className = ib(e, a)));
              }
            );
        }, [x, a, d]),
        { rows: f, spans: x, events: y, scale: j }
      );
    };
    function sl(e) {
      let [t, n] = (0, si.useState)(e);
      return (
        (0, si.useEffect)(() => {
          if (t === e) return;
          let r = 0,
            i = 0,
            s = () => {
              if (++r <= 3) {
                i = requestAnimationFrame(s);
                return;
              }
              n(e);
            };
          return (
            s(),
            () => {
              cancelAnimationFrame(i);
            }
          );
        }, [t, e]),
        t
      );
    }
    var sc = r,
      su = d,
      sd = p;
    let sh = () =>
        ("devicePixelRatio" in globalThis && globalThis.devicePixelRatio) || 1,
      sp = () => {
        let [e, t] = (0, su.useState)(1);
        return (
          (0, su.useLayoutEffect)(() => {
            let n = () => t(sh()),
              r = matchMedia(`(resolution: ${e}dppx)`);
            return (
              r.addEventListener("change", n),
              n(),
              () => {
                r.removeEventListener("change", n);
              }
            );
          }, [e]),
          e
        );
      },
      sm = r6,
      sf = (0, su.memo)(function ({ timelineRef: e, rows: t, scale: n }) {
        let {
            state: {
              root: r,
              baseScale: i,
              timelineWidth: s,
              width: a,
              scrollbarWidth: o,
            },
          } = ic(),
          l = a + 2 * r6,
          c = sp(),
          u = (0, su.useRef)(null),
          d = (0, su.useRef)(null),
          h = (a / (a - o)) * Math.min(a / s, i / n),
          p = Math.min(a, (s - o) * h);
        ((0, su.useEffect)(() => {
          let t,
            n = !1,
            r = 0,
            i = (e) => !!u.current?.contains(e),
            s = 0,
            a = () => {
              if (!n || !t) return;
              let i = e.current;
              i && (i.scrollLeft = (r - 0.5 * p - t.left) / h);
            },
            o = (e) => {
              (({ clientX: r } = e),
                cancelAnimationFrame(s),
                (s = requestAnimationFrame(a)));
            },
            l = (e) => {
              i(e.target) &&
                ((n = !0), (t = u.current?.getBoundingClientRect()), o(e));
            },
            c = () => {
              ((n = !1), (t = void 0));
            },
            d = (e) => {
              i(e.target) && e.cancelable && e.preventDefault();
            },
            m = (e) => {
              n && e.cancelable && e.preventDefault();
            };
          return (
            window.addEventListener("pointerdown", l),
            window.addEventListener("pointermove", o),
            window.addEventListener("pointerup", c),
            window.addEventListener("blur", c),
            window.addEventListener("touchstart", d, { passive: !1 }),
            window.addEventListener("touchmove", m, { passive: !1 }),
            () => {
              (window.removeEventListener("pointerdown", l),
                window.removeEventListener("pointermove", o),
                window.removeEventListener("pointerup", c),
                window.removeEventListener("blur", c),
                window.removeEventListener("touchstart", d),
                window.removeEventListener("touchmove", m),
                cancelAnimationFrame(s));
            }
          );
        }, [e, h, p]),
          (0, su.useEffect)(() => {
            let e = d.current,
              n = e?.getContext("2d");
            if (!e || !n) return;
            let i = requestAnimationFrame(() => {
              (n.resetTransform(),
                n.clearRect(0, 0, e.width, e.height),
                n.scale(c, c));
              let i = 1,
                s = 3,
                a = (l - 2 * sm) / r.duration;
              for (let e of ((n.fillStyle = "#ccc"), n.beginPath(), t))
                for (let t of e) {
                  let e = sm - i + (i + s) * t.row;
                  if (e >= r7 - s - sm) break;
                  let o = sm + (t.startTime - r.startTime) * a,
                    l = t.duration * a;
                  n.roundRect(o, e, l, s, s);
                }
              n.fill();
            });
            return () => cancelAnimationFrame(i);
          }, [c, r, l, t]));
        let m = (0, su.useRef)(null),
          { style: f, setStyle: g } = i9(m);
        return (
          (0, su.useLayoutEffect)(() => {
            let t = e.current;
            if (!t) return;
            let n = 0,
              r = () => {
                g("transform", `translateX(${sm + t.scrollLeft * h}px)`);
              };
            r();
            let i = () => {
              (cancelAnimationFrame(n), (n = requestAnimationFrame(r)));
            };
            return (
              t.addEventListener("scroll", i),
              () => {
                (cancelAnimationFrame(n), t.removeEventListener("scroll", i));
              }
            );
          }, [e, h, g]),
          (0, sc.jsxs)("div", {
            className: sd.default.mapContainer,
            ref: u,
            style: { width: p > 0 ? l : "100%", height: r7 },
            children: [
              (0, sc.jsx)("canvas", {
                className: sd.default.mapCanvas,
                height: r7 * c,
                ref: d,
                style: { width: l, height: r7 },
                width: l * c,
              }),
              (0, sc.jsx)("div", {
                className: sd.default.mapThumb,
                ref: m,
                style: {
                  transform: f.transform,
                  width: p > 0 ? p : `calc(100% - ${2 * r6}px)`,
                  top: 2,
                  height: r7 - 4,
                },
              }),
            ],
          })
        );
      });
    var sg = r,
      sx = d,
      sv = r,
      sy = d,
      sb = e.i(441384),
      sj = e.i(365670),
      sw = r,
      sC = d,
      sk = h,
      sS = r,
      sN = d,
      sE = h,
      sA = d;
    let sD = (e = "") => e + (0, sA.useId)();
    var sI = nR,
      sM = r,
      sT = d,
      sL = h,
      sP = ro,
      sR = e.i(911390);
    function sF({
      id: e,
      style: t,
      label: n,
      className: r,
      children: i,
      size: s,
      error: a,
      ...o
    }) {
      let l = (0, sT.useMemo)(
        () =>
          i ||
          ((0, sT.isValidElement)(a)
            ? a
            : a && "object" == typeof a
              ? (0, sM.jsxs)(sM.Fragment, {
                  children: [
                    "message" in a ? a.message : null,
                    "link" in a
                      ? (0, sM.jsxs)(sM.Fragment, {
                          children: [
                            " ",
                            (0, sM.jsx)("span", {
                              className: sR.default["action-link"],
                              children: (0, sM.jsx)(rU, {
                                external: !0,
                                href: a.link,
                                type: "blend",
                                children: a.action ?? "Learn More",
                              }),
                            }),
                          ],
                        })
                      : null,
                  ],
                })
              : a),
        [i, a],
      );
      return (0, sM.jsxs)(rt, {
        "aria-atomic": "true",
        className: (0, sL.clsx)(sR.default.error, r, {
          [String(sR.default.large)]: "large" === s,
          [String(sR.default.small)]: "small" === s,
        }),
        "data-geist-error": "",
        "data-testid": o["data-testid"],
        "data-version": "v1",
        direction: "row",
        gap: 0,
        id: e,
        role: "alert",
        style: t,
        children: [
          (0, sM.jsx)("div", {
            "aria-hidden": !0,
            style: {
              display: "flex",
              alignItems: "center",
              marginRight: 8,
              marginTop: s_(s),
            },
            children: (0, sM.jsx)(sP.Stop, { color: "red-900", size: 16 }),
          }),
          (0, sM.jsxs)("div", {
            className: sR.default.text,
            children: [
              n
                ? (0, sM.jsxs)("b", {
                    className: sR.default.label,
                    children: [n, ":"],
                  })
                : null,
              l,
            ],
          }),
        ],
      });
    }
    let s_ = (e) => {
      if (void 0 === e) return 2;
      switch (e) {
        case "small":
          return 2;
        case "large":
          return 4;
      }
    };
    var sO = r,
      sB = h,
      sV = e.i(55641);
    function sz({
      bypassCasing: e = !1,
      children: t,
      className: n,
      id: r,
      style: i,
      value: s,
      withInput: a,
      wrapperClassName: o,
    }) {
      return (0, sO.jsxs)("label", {
        className: o,
        "data-version": "v1",
        htmlFor: r,
        style: i,
        children: [
          (0, sO.jsx)("div", {
            className: (0, sB.clsx)(sV.default.label, n, {
              [String(sV.default.input)]: a,
              [String(sV.default.capitalize)]: !e,
            }),
            children: s,
          }),
          t,
        ],
      });
    }
    var sH = e.i(919196);
    let s$ = (0, sN.memo)(
        (0, sN.forwardRef)(function (
          {
            explicitId: e,
            disabled: t,
            label: n,
            typeName: r = "text",
            prefix: i,
            suffix: s,
            prefixStyling: a = !0,
            prefixContainer: o = !0,
            suffixStyling: l = !0,
            suffixContainer: c = !0,
            width: u,
            error: d,
            showErrorMessage: h = !0,
            type: p,
            size: m,
            className: f,
            rounded: g,
            innerWrapperClassName: x,
            wrapperClassName: v,
            spellCheck: y = !1,
            autoCapitalize: b = "none",
            autoComplete: j = "off",
            autoCorrect: w = "off",
            bypassCasing: C = !1,
            ...k
          },
          S,
        ) {
          let { focusProps: N, isFocusVisible: E } = np({ isTextInput: !0 }),
            A = n ? sz : sN.Fragment,
            D = sD(`${k.id || "input"}-`),
            I = {
              ...(n && {
                value: n,
                withInput: !0,
                style: { width: u },
                id: D,
                wrapperClassName: v,
                bypassCasing: C,
              }),
            },
            M = nO() || t,
            T = sD("input-"),
            L = nL(d ? "error" : p),
            P = k["aria-label"] || k.title,
            R = () =>
              i
                ? o
                  ? (0, sS.jsx)("label", {
                      "aria-hidden": !0,
                      "data-geist-input-prefix": "",
                      htmlFor: e ?? D,
                      children: i,
                    })
                  : i
                : null,
            F = () =>
              s
                ? c
                  ? (0, sS.jsx)("label", {
                      "aria-hidden": !0,
                      "data-geist-input-suffix": "",
                      htmlFor: e ?? D,
                      children: s,
                    })
                  : s
                : null,
            _ = (0, sN.useMemo)(() => (0, sI.getIxIconSize)(m), [m]);
          return (0, sS.jsxs)(A, {
            ...I,
            children: [
              (0, sS.jsxs)("div", {
                className: (0, sE.clsx)(
                  sH.default.container,
                  L,
                  {
                    [String(sH.default.prefix)]: i,
                    [String(sH.default.suffix)]: s,
                    [String(sH.default.noPrefixStyle)]: !a,
                    [String(sH.default.noSuffixStyle)]: !l,
                    [String(sH.default.large)]: "large" === m,
                    [String(sH.default.small)]: "small" === m,
                    [String(sH.default.xSmall)]: "xSmall" === m,
                    [String(sH.default.mediumSmall)]: "mediumSmall" === m,
                    [String(sH.default.keyboardFocus)]: E,
                    [String(sH.default.rounded)]: g,
                    [String(sH.default.error)]: d,
                  },
                  x,
                ),
                "data-geist-input-wrapper": "",
                "data-version": "v1",
                style: { width: u, "--geist-icon-size": `${_}px` },
                children: [
                  (0, sS.jsx)("input", {
                    ...k,
                    "aria-describedby": d
                      ? `${T}-error`
                      : k["aria-describedby"],
                    "aria-invalid": !!d,
                    "aria-label": P,
                    autoCapitalize: b,
                    autoComplete: j,
                    autoCorrect: w,
                    className: (0, sE.clsx)(sH.default.input, f),
                    "data-geist-input": "",
                    disabled: M,
                    id: e ?? D,
                    onBlur: (e) => {
                      (N.onBlur?.(e), k.onBlur?.(e));
                    },
                    onFocus: (e) => {
                      (N.onFocus?.(e), k.onFocus?.(e));
                    },
                    ref: S,
                    spellCheck: y,
                    type: r,
                  }),
                  R(),
                  F(),
                ],
              }),
              h && d
                ? (0, sS.jsx)(sF, {
                    "data-testid": k["data-testid"]
                      ? rJ(k["data-testid"], "error")
                      : void 0,
                    error: d,
                    id: `${T}-error`,
                    size: sU[m || "small"],
                    style: { width: u, marginTop: "var(--geist-gap-quarter)" },
                  })
                : null,
            ],
          });
        }),
      ),
      sU = {
        xSmall: "small",
        small: "small",
        mediumSmall: "small",
        large: "large",
      };
    var sG = r,
      sW = h,
      sq = d;
    function sZ() {
      return sQ(/^Mac/);
    }
    function sK() {
      return sQ(/^iPhone/);
    }
    function sY() {
      return sQ(/^iPad/) || (sZ() && navigator.maxTouchPoints > 1);
    }
    function sJ() {
      return sZ() || sK() || sY();
    }
    function sQ(e) {
      return null != window.navigator
        ? e.test(window.navigator.platform)
        : void 0;
    }
    var sX = e.i(94603);
    function s0({
      meta: e,
      shift: t,
      alt: n,
      ctrl: r,
      small: i,
      children: s,
      className: a,
      type: o,
      ...l
    }) {
      let c = nL(o, !0);
      return (0, sG.jsxs)("kbd", {
        className: (0, sW.clsx)(
          sX.default.kbd,
          { [String(sX.default.small)]: i },
          c,
          a,
        ),
        ...l,
        "data-geist-kbd": "",
        "data-version": "v1",
        children: [
          e ? (0, sG.jsx)(s1, {}) : null,
          t ? (0, sG.jsx)("span", { children: "" }) : null,
          n ? (0, sG.jsx)("span", { children: "" }) : null,
          r ? (0, sG.jsx)("span", { children: "" }) : null,
          s ? (0, sG.jsx)("span", { children: s }) : null,
        ],
      });
    }
    function s1() {
      let [e, t] = (0, sq.useState)(""),
        n = sJ();
      return (
        (0, sq.useEffect)(() => {
          (!0 === n && t(""), !1 === n && t("Ctrl"));
        }, [n]),
        (0, sG.jsx)("span", {
          style: { minWidth: "1em", display: "inline-block" },
          children: e,
        })
      );
    }
    var s2 = e.i(904593);
    function s5(
      {
        value: e,
        scrollOnClear: t = !0,
        onChange: n,
        disabled: r,
        width: i,
        onClear: s,
        cmdk: a,
        ...o
      },
      l,
    ) {
      let c = (0, sC.useRef)(null),
        u = l || null,
        [d, h] = (0, sC.useState)(null),
        p = (0, sC.useCallback)(
          (e) => {
            e &&
              ((c.current = e),
              u && (u.current = e),
              h(
                e.closest("[data-geist-input-wrapper]")?.getBoundingClientRect()
                  .width || null,
              ),
              "function" == typeof l && l(e));
          },
          [u, l],
        ),
        m = (0, sC.useCallback)(() => {
          c.current &&
            !r &&
            (c.current.value &&
              ((c.current.value = ""), n?.({ target: { value: "" } }), s?.()),
            c.current.focus({ preventScroll: !t }));
        }, [r, t, n, s]),
        f = !!(o.defaultValue ? c.current?.value : e),
        g =
          f &&
          (0, sw.jsx)("button", {
            className: (0, sk.clsx)(s2.default.button, {
              [String(s2.default.disabled)]: r,
            }),
            onClick: m,
            tabIndex: r ? -1 : void 0,
            type: "button",
            children: (0, sw.jsx)(s0, {
              className: s2.default.kbd,
              small: !0,
              style: { margin: 0 },
              children: "Esc",
            }),
          }),
        x = (0, sw.jsxs)(rt, {
          "aria-label": f
            ? "Press Esc to clear"
            : "Press Cmd + K to open the Command Menu",
          className: s2.default.cmdk,
          "data-animate": f,
          direction: "row",
          style: { gap: 2 },
          children: [
            (0, sw.jsxs)(s0, {
              "aria-hidden": !0,
              className: s2.default.command,
              small: !0,
              children: [
                (0, sw.jsx)("span", { "data-key": "esc", children: "Esc" }),
                (0, sw.jsx)("span", { "data-key": "cmd", children: "" }),
              ],
            }),
            (0, sw.jsx)(s0, {
              "aria-hidden": !0,
              className: s2.default.k,
              small: !0,
              children: "K",
            }),
          ],
        }),
        v = a ? x : g;
      return (0, sw.jsx)(s$, {
        ...o,
        "aria-label": o["aria-label"] || o.label || o.title,
        disabled: r,
        onChange: n,
        onKeyDown: (e) => {
          "Escape" === e.key && (e.preventDefault(), m());
        },
        ref: p,
        suffix: o.suffix
          ? (0, sw.jsxs)(rt, {
              align: "center",
              className: s2.default.suffixContainer,
              "data-suffix-group": "",
              direction: "row",
              children: [o.suffix, v],
            })
          : v,
        suffixContainer: !1,
        suffixStyling: !1,
        value: e,
        width: i || d || void 0,
      });
    }
    let s3 = (0, sC.memo)((0, sC.forwardRef)(s5));
    function s4({ clearable: e = !0, loading: t = !1, ...n }, r) {
      let i = e ? s3 : s$,
        s = t
          ? nN
          : "small" === n.size
            ? sj.MagnifyingGlassSmall
            : sb.MagnifyingGlass;
      return (0, sv.jsx)(i, {
        ...n,
        "aria-label": "Search",
        prefix: (0, sv.jsx)(s, { size: 16 }),
        prefixStyling: !1,
        ref: r,
        typeName: "search",
      });
    }
    let s9 = (0, sy.forwardRef)(s4);
    var s7 = p;
    function s6() {
      return (0, sg.jsx)("nav", {
        className: s7.default.searchBar,
        children: (0, sg.jsx)(s8, {}),
      });
    }
    function s8() {
      let { dispatch: e } = ic(),
        [t, n] = (0, sx.useState)("");
      return (
        (0, sx.useEffect)(() => {
          let n = setTimeout(() => e({ type: "setFilter", filter: t }), 100);
          return () => {
            clearTimeout(n);
          };
        }, [e, t]),
        (0, sg.jsx)("div", {
          className: s7.default.searchInput,
          children: (0, sg.jsx)(s9, {
            height: r4,
            onChange: (e) => n(e.target.value),
            placeholder: "Search spans",
            value: t,
            width: "100%",
          }),
        })
      );
    }
    let ae = {
      traceId: "skeleton",
      spans: [
        {
          parentSpanId: "",
          spanId: "root",
          name: "root span",
          kind: 1,
          resource: "vercel.runtime",
          startTime: [5e3, 0],
          endTime: [6e3, 0],
          duration: [1e3, 0],
          library: { name: "vercel-site" },
          status: { code: 1 },
          attributes: { "vercel.ownerId": "team_abc" },
          traceFlags: 1,
          events: [],
          links: [],
        },
      ],
      resources: [{ name: "vercel.runtime", attributes: {} }],
      rootSpanId: "root",
    };
    function at({
      trace: e = ae,
      className: t = "",
      scrollLock: n = !1,
      height: r,
      withPanel: i = !1,
      highlightedSpans: s,
    }) {
      let a = e === ae,
        { state: o, dispatch: l } = ic(),
        { timelineRef: c, scrollSnapshotRef: m } = o,
        f = o.memoCacheRef.current,
        g = (s?.length ?? 0) > 0;
      (0, d.useEffect)(() => {
        let { root: t, map: n } = (0, iX.parseTrace)(e);
        l({
          type: "setRoot",
          root: t,
          spanMap: n,
          resources: e.resources || [],
        });
      }, [l, e]);
      let { rows: x, spans: v, events: y, scale: b } = so(s),
        j = (0, d.useRef)(null);
      (0, d.useLayoutEffect)(() => {
        let e = j.current;
        if (!e) return;
        let t = () => {
          let t = 2 * r6,
            n = e.getBoundingClientRect();
          l({ type: "setSize", width: n.width - t, height: n.height });
        };
        t();
        let n = new ResizeObserver(t);
        return (
          n.observe(e),
          window.addEventListener("resize", t),
          () => {
            (n.disconnect(), window.removeEventListener("resize", t));
          }
        );
      }, [l]);
      let w = (0, d.useRef)({ t: 0, x: -1, y: -1, spanId: "" }),
        C = (0, d.useCallback)(
          (e) => {
            let t = w.current,
              n = Date.now(),
              { clientX: r, clientY: i } = e,
              s = Math.sqrt(Math.pow(r - t.x, 2) + Math.pow(i - t.y, 2));
            if (n - t.t <= 500 && s <= 8)
              return (e.stopPropagation(), e.preventDefault(), t.spanId)
                ? (l({ type: "select", id: t.spanId }),
                  void l({ type: "scaleToNode", id: t.spanId }))
                : void l({ type: "resetScale" });
            let a = e.target;
            if (!a.closest(`.${String(p.default.timeline)}`)) return;
            let o = a.closest("[data-span-id]"),
              c = o?.dataset.spanId || "";
            ((w.current = { x: r, y: i, t: n, spanId: c }),
              c &&
                (l({ type: "toggleSelection", id: c }), e.stopPropagation()));
          },
          [l],
        );
      ((0, d.useLayoutEffect)(() => {
        let e = c.current;
        if (!e) return;
        let t = m.current;
        t && (e.scrollLeft = t.anchorT * b - t.anchorX);
      }, [m, c, b]),
        (0, d.useEffect)(() => {
          let e = o.selected?.span.spanId;
          if (!e) return;
          let t = setTimeout(() => {
            let t = o.timelineRef.current,
              n = t?.querySelector(`[data-span-id="${e}"]`);
            if (!t || !n) return;
            let r = t.getBoundingClientRect(),
              i = n.getBoundingClientRect();
            i.width < r.width &&
              (i.left < r.left ||
                i.right > r.right ||
                i.top < r.top ||
                i.bottom > r.bottom) &&
              n.scrollIntoView({
                block: "nearest",
                inline: "center",
                behavior: "smooth",
              });
          }, 500);
          return () => {
            clearTimeout(t);
          };
        }, [o.selected, o.timelineRef]),
        (0, d.useEffect)(() => {
          let e = (e) => {
            "Escape" === e.key && l({ type: "escape" });
          };
          return (
            window.addEventListener("keydown", e),
            () => {
              window.removeEventListener("keydown", e);
            }
          );
        }, [l]),
        (0, d.useEffect)(() => {
          if (!n) return;
          let e = document.documentElement,
            t = document.body;
          ((e.style.overflow = "clip"), (t.style.overflow = "clip"));
          let r = (e) => {
            e?.cancelable
              ? e.preventDefault()
              : window.scrollTo({ left: 0, top: 0, behavior: "instant" });
          };
          return (
            r(),
            window.addEventListener("scroll", r, { passive: !1 }),
            () => {
              ((e.style.overflow = ""),
                (t.style.overflow = ""),
                window.removeEventListener("scroll", r));
            }
          );
        }, [n]));
      let k = Math.max(
          o.timelineHeight - o.scrollbarWidth,
          it + r8 + x.length * (ie + r8) - r8 + 84,
        ),
        S = !!(o.isMobile && o.selected);
      return (0, u.jsxs)("div", {
        className: (0, h.clsx)(
          p.default.traceViewer,
          a && p.default.skeleton,
          t,
        ),
        onClickCapture: C,
        ref: j,
        style: {
          height: r,
          "--timeline-padding": `${r6}px`,
          "--row-height": `${ie}px`,
          "--row-padding": `${r8}px`,
          "--search-height": `${!g ? r4 : 0}px`,
          "--search-gap": `${!g ? r9 : 2}px`,
          "--map-height": `${r7}px`,
          "--timeline-width": `${o.timelineWidth}px`,
          "--timeline-height": `${o.timelineHeight}px`,
          "--timeline-scroll-width": `${Math.round(o.root.duration * o.scale)}px`,
          "--panel-width": `${o.panelWidth}px`,
          "--panel-height": `${o.panelHeight}px`,
          "--height": `${o.height}px`,
          "--scrollbar-width": `${o.scrollbarWidth}px`,
          "--marker-height": `${it}px`,
          "--marker-notch-height": `${ir}px`,
        },
        children: [
          g ? null : (0, u.jsx)(s6, {}),
          (0, u.jsx)(sf, { rows: x, scale: b, timelineRef: c }),
          (0, u.jsxs)("div", {
            className: (0, h.clsx)(
              p.default.traceViewerContent,
              S && p.default.inert,
            ),
            children: [
              (0, u.jsx)("div", {
                className: p.default.timeline,
                ref: c,
                children: (0, u.jsx)("div", {
                  style: {
                    position: "relative",
                    width: o.timelineWidth,
                    height: o.timelineHeight - 2 * r6,
                    padding: r6,
                    paddingBottom: 0,
                  },
                  children: (0, u.jsxs)("div", {
                    className: p.default.traceNode,
                    style: {
                      width: o.root.duration * b || void 0,
                      height: k - 2 * r6,
                    },
                    children: [
                      (0, u.jsx)(se, { scale: b }),
                      (0, u.jsx)(st, { events: y, root: o.root, scale: b }),
                      (0, u.jsx)(sr, {
                        dispatch: l,
                        events: y,
                        memoCacheRef: o.memoCacheRef,
                        root: o.root,
                        scale: b,
                        scrollSnapshotRef: m,
                        spans: v,
                        timelineRef: c,
                      }),
                      (0, u.jsx)(iw, {
                        cacheKey: f.get(""),
                        cache: f,
                        root: o.root,
                        scale: b,
                        scrollSnapshotRef: m,
                        spans: v,
                      }),
                    ],
                  }),
                }),
              }),
              (0, u.jsx)("div", {
                className: p.default.zoomButtonTraceViewer,
                children: (0, u.jsx)(iQ, {}),
              }),
            ],
          }),
          i
            ? (0, u.jsx)("div", {
                className: (0, h.clsx)(
                  p.default.spanDetailPanelTraceViewer,
                  !o.selected && p.default.hidden,
                  o.isMobile && p.default.mobile,
                ),
                children: (0, u.jsx)(iD, { attached: !0 }),
              })
            : null,
        ],
      });
    }
    function an(e) {
      return (0, u.jsx)(il, {
        getQuickLinks: e.getQuickLinks,
        withPanel: !0,
        children: (0, u.jsx)(at, { withPanel: !0, ...e }),
      });
    }
    function ar({ data: e, href: t, trace: n }) {
      if (!e || !n)
        return (0, r.jsx)(s.Card, {
          className: "not-prose w-full max-w-lg shadow-sm",
          children: (0, r.jsx)(s.CardContent, {
            className: "p-3",
            children: (0, r.jsxs)("div", {
              className:
                "bg-v0-background-200 flex flex-col items-center justify-center rounded-[6px] p-8",
              children: [
                (0, r.jsx)("div", {
                  className:
                    "mb-4 rounded-full border border-v0-red-300 bg-v0-red-200 p-2 text-v0-red-700",
                  children: (0, r.jsx)(o.CrossCircle, {}),
                }),
                (0, r.jsx)("h3", {
                  className: "mb-2 font-medium text-v0-gray-1000",
                  children: "Trace Analysis Failed",
                }),
                (0, r.jsx)("p", {
                  className: "max-w-96 text-center text-v0-red-700",
                  children:
                    "Something went wrong while analyzing the trace. Please try again later.",
                }),
              ],
            }),
          }),
        });
      let i = JSON.parse(decodeURIComponent(e)),
        l = JSON.parse(decodeURIComponent(n));
      return (0, r.jsxs)(s.Card, {
        className: "not-prose w-full max-w-3xl shadow-sm",
        children: [
          (0, r.jsx)(s.CardHeader, {
            className: "flex p-3",
            children: (0, r.jsxs)(s.CardTitle, {
              className:
                "mx-0.5 flex flex-col gap-1 text-sm font-medium text-v0-gray-1000",
              children: [
                (0, r.jsx)("span", { children: "Trace Analysis" }),
                (0, r.jsxs)("a", {
                  href: t,
                  className: "flex items-center font-normal hover:opacity-70",
                  children: [t, (0, r.jsx)(a.ArrowUpRightSmall, {})],
                }),
              ],
            }),
          }),
          (0, r.jsxs)(s.CardContent, {
            className: "p-0",
            children: [
              (0, r.jsx)("div", {
                className: "relative col-span-full! border-y border-y-gray-300",
                children: (0, r.jsx)(an, {
                  className: "absolute left-0 top-0 w-full",
                  height: "50vh",
                  scrollLock: !0,
                  trace: l,
                  highlightedSpans: i.map((e) => e.spanId),
                }),
              }),
              (0, r.jsxs)("section", {
                className: "p-3",
                children: [
                  (0, r.jsx)("h3", {
                    className: "text-lg font-medium text-v0-gray-1000",
                    children: "Performance Impact",
                  }),
                  (0, r.jsx)("p", {
                    className: "mb-6 text-sm text-v0-gray-900",
                    children:
                      "The following spans are the most performance-impacting spans in the trace.",
                  }),
                  (0, r.jsx)("ul", {
                    className: "flex flex-col gap-2",
                    children: i.map((e) =>
                      (0, r.jsxs)(
                        "li",
                        {
                          className: "flex flex-col gap-2",
                          children: [
                            (0, r.jsx)("b", { children: e.spanName }),
                            (0, r.jsx)("span", { children: e.description }),
                          ],
                        },
                        e.spanId,
                      ),
                    ),
                  }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    function ai({ data: e, isLast: t }) {
      let n = JSON.parse(decodeURIComponent(e));
      return t
        ? (0, r.jsx)(s.Card, {
            className: "not-prose w-full max-w-lg shadow-sm",
            children: (0, r.jsx)(s.CardContent, {
              className: "p-3",
              children: (0, r.jsx)("ul", {
                className:
                  "bg-v0-background-200 flex flex-col gap-2 rounded-[6px] p-4",
                children: n.map((e) =>
                  (0, r.jsxs)(
                    "li",
                    {
                      className: "flex items-center gap-2",
                      children: [
                        "pending" === e.status
                          ? (0, r.jsx)(c.default, { className: "size-4" })
                          : null,
                        "loading" === e.status
                          ? (0, r.jsx)(i.Spinner, { size: 16 })
                          : null,
                        "loaded" === e.status
                          ? (0, r.jsx)(l.Check, { className: "size-4" })
                          : null,
                        (0, r.jsx)("span", { children: e.label }),
                      ],
                    },
                    e.label,
                  ),
                ),
              }),
            }),
          })
        : null;
    }
    function as({ message: e }) {
      return (0, r.jsx)(s.Card, {
        className: "not-prose w-full max-w-lg shadow-sm",
        children: (0, r.jsx)(s.CardContent, {
          className: "p-3",
          children: (0, r.jsx)("div", {
            className: "text-v0-red-700",
            children: e,
          }),
        }),
      });
    }
    e.s(
      [
        "TraceAnalysisError",
        () => as,
        "TraceAnalysisReport",
        () => ar,
        "TraceAnalysisStatus",
        () => ai,
      ],
      302998,
    );
    var aa = r,
      ao = d,
      al = eQ,
      ac = e.i(756040),
      au = e.i(589654),
      ad = e.i(657736),
      ah = r,
      ap = d,
      am = e.i(800443),
      af = e.i(170105);
    function ag({ data: e, path: t = "", level: n = 0 }) {
      if (null === e)
        return (0, ah.jsx)("span", {
          className: "text-v0-gray-900",
          children: "null",
        });
      if ("object" != typeof e) return (0, ah.jsx)(ab, { value: e });
      let r = Array.isArray(e),
        i = r ? e : Object.keys(e);
      return (0, ah.jsx)("div", {
        className: "ml-4",
        children: r
          ? (0, ah.jsx)(av, { items: i, path: t, level: n })
          : (0, ah.jsx)(ax, { items: i, data: e, path: t, level: n }),
      });
    }
    function ax({ items: e, data: t, path: n, level: r }) {
      return (0, ah.jsx)(ah.Fragment, {
        children: e.map((e) =>
          (0, ah.jsx)(
            ay,
            { label: e, value: t[e], path: n ? `${n}.${e}` : e, level: r + 1 },
            e,
          ),
        ),
      });
    }
    function av({ items: e, path: t, level: n }) {
      return (0, ah.jsx)(ah.Fragment, {
        children: e.map((e, r) =>
          (0, ah.jsx)(
            ay,
            {
              label: r.toString(),
              value: e,
              path: t ? `${t}[${r}]` : `[${r}]`,
              level: n + 1,
              isArrayItem: !0,
            },
            r,
          ),
        ),
      });
    }
    function ay({
      label: e,
      value: t,
      path: n,
      level: r,
      isArrayItem: i = !1,
    }) {
      let [s, a] = (0, ap.useState)(r < 2),
        o = null !== t && "object" == typeof t,
        l = () => {
          a(!s);
        };
      return (0, ah.jsxs)("div", {
        className: "my-1",
        children: [
          (0, ah.jsxs)("div", {
            className: `flex items-start ${o ? "cursor-pointer" : ""}`,
            onClick: o ? l : void 0,
            children: [
              o &&
                (0, ah.jsx)("div", {
                  className: "mr-1 mt-0.5",
                  children: s
                    ? (0, ah.jsx)(am.ChevronDown, {
                        className: "h-4 w-4 text-v0-gray-900",
                      })
                    : (0, ah.jsx)(af.ChevronRight, {
                        className: "h-4 w-4 text-v0-gray-900",
                      }),
                }),
              (0, ah.jsxs)("div", {
                children: [
                  i
                    ? (0, ah.jsxs)("span", {
                        className: "text-v0-blue-700",
                        children: ["[", e, "]: "],
                      })
                    : (0, ah.jsxs)("span", {
                        className: "text-v0-blue-700",
                        children: ['"', e, '": '],
                      }),
                  o
                    ? (0, ah.jsx)("span", {
                        className: "text-v0-gray-900",
                        children: Array.isArray(t)
                          ? `Array(${t.length})`
                          : `Object{${Object.keys(t).length}}`,
                      })
                    : (0, ah.jsx)(ab, { value: t }),
                ],
              }),
            ],
          }),
          o && s && (0, ah.jsx)(ag, { data: t, path: n, level: r }),
        ],
      });
    }
    function ab({ value: e }) {
      return "string" == typeof e
        ? (0, ah.jsxs)("span", {
            className: "text-v0-green-700",
            children: ['"', e, '"'],
          })
        : "number" == typeof e
          ? (0, ah.jsx)("span", {
              className: "text-v0-purple-700",
              children: e,
            })
          : "boolean" == typeof e
            ? (0, ah.jsx)("span", {
                className: "text-orange-600",
                children: e.toString(),
              })
            : null === e
              ? (0, ah.jsx)("span", {
                  className: "text-v0-gray-900",
                  children: "null",
                })
              : (0, ah.jsx)("span", { children: String(e) });
    }
    var aj = e.i(383542),
      aw = e.i(335249);
    function aC({ loading: e, toolName: t, content: n, isLast: r }) {
      let [i, s] = (0, ao.useState)(!0),
        a = {
          collapsed: { height: 0, opacity: 0, marginTop: 0, marginBottom: 0 },
          expanded: {
            height: "auto",
            opacity: 1,
            marginTop: "1rem",
            marginBottom: 0,
          },
        };
      return ((0, ao.useEffect)(() => {
        e || s(!1);
      }, [e]),
      !r && e)
        ? null
        : (0, aa.jsx)(aj.Accordion, {
            className: "m-0 flex flex-col p-0",
            type: "single",
            collapsible: !e,
            children: (0, aa.jsxs)(aj.AccordionItem, {
              value: "item-1",
              className: "border-none [&>h3]:my-0",
              children: [
                (0, aa.jsx)(aj.AccordionTrigger, {
                  className:
                    "bg-v0-background-200 border-v0-alpha-400 mt-0 flex flex-row items-center justify-between gap-2 rounded-md border p-2 font-mono text-v0-gray-900",
                  children: (0, aa.jsxs)("div", {
                    className: "flex flex-row items-center gap-2 text-sm",
                    children: [(0, aa.jsx)(ac.Zap, { className: "size-3" }), t],
                  }),
                }),
                (0, aa.jsx)(aj.AccordionContent, {
                  children: (0, aa.jsx)(au.AnimatePresence, {
                    initial: !1,
                    children: (0, aa.jsx)(
                      ad.motion.div,
                      {
                        className:
                          "flex flex-col gap-4 border-l pl-3 text-sm text-zinc-600 dark:border-zinc-800 dark:text-zinc-400",
                        initial: "collapsed",
                        animate: "expanded",
                        exit: "collapsed",
                        variants: a,
                        transition: { duration: 0.2, ease: "easeInOut" },
                        children: (0, aa.jsx)(ag, {
                          data: n,
                          path: "",
                          level: 0,
                        }),
                      },
                      "reasoning",
                    ),
                  }),
                }),
              ],
            }),
          });
    }
    function ak({
      toolName: e,
      status: t = "success",
      toolId: n,
      input: r,
      output: i,
      error: s,
      timestamp: a,
      isLast: o,
      icon: l = (0, aa.jsx)(ac.Zap, { className: "h-3 w-3" }),
    }) {
      let c,
        [u, d] = (0, ao.useState)(null);
      (0, ao.useEffect)(() => {
        if ("success" === t) {
          let e = document.getElementById(`tool-execution-${n}`);
          (console.log("Got success, updating portal container", {
            loadingCard: e,
            status: t,
            toolId: n,
          }),
            e &&
              (console.log("FOUND  LOADING CARD", e),
              d(e),
              (e.innerHTML = "")));
        }
      }, [t, n]);
      try {
        c = (0, aa.jsx)(aC, {
          loading: "loading" === t,
          toolName: e,
          content: i
            ? JSON.parse(aw.default.decode(i))
            : s
              ? JSON.parse(aw.default.decode(i || ""))
              : "",
        });
      } catch (n) {
        (console.error("Error parsing output:", n),
          (c = (0, aa.jsx)(aC, {
            loading: "loading" === t,
            toolName: e,
            content: s || "Something went wrong",
          })));
      }
      return "loading" === t
        ? (0, aa.jsx)(aC, { loading: !0, toolName: e, content: "" })
        : "success" === t && u
          ? (0, al.createPortal)(c, u)
          : c;
    }
    e.s(["ToolExecutionCard", () => ak], 968552);
    var aS = e.i(142219),
      aN = d,
      aE = e.i(418929);
    function aA(e, t) {
      let { atoms: n, actions: r } = (0, aE.useCurrentChatPrompt)(),
        { setTodoList: i } = r;
      (0, aN.useEffect)(() => {
        if (!e || "task-manage-todos-v1" !== e.type) return;
        let t = e.parts.findLast((e) => "updated-todo-list" === e.type);
        t &&
          e.lastPartSentAt &&
          aS.store.get(n.derivedTodoList).updatedAt < e.lastPartSentAt &&
          i({ list: t.updatedList, updatedAt: e.lastPartSentAt });
      }, [e]);
    }
    e.s(["useMaybeUpdateTodoList", () => aA], 490838);
  },
  884284,
  795970,
  423814,
  578183,
  (e) => {
    "use strict";
    var t = e.i(576191),
      n = e.i(284627),
      r = e.i(393799),
      i = e.i(142219);
    let s = 2e3;
    function a(e, a) {
      let { actions: o, atoms: l } = (0, n.useCurrentChatLoader)(),
        c = (0, r.useAtomValue)(l.lastPartUpdate);
      (0, t.useEffect)(() => {
        if (!e || !a || !n.LOADABLE_RICH_PART_TYPES.includes(e.type)) return;
        let t = (0, i.getAtomValue)(l.lastPartUpdatedAt),
          r = (0, i.getAtomValue)(l.currentPartKey),
          u = e,
          d = u.id;
        Date.now() - t >= s
          ? (c &&
              u.createdAt &&
              c.createdAt &&
              !(u.createdAt >= c.createdAt)) ||
            (o.setPartKey(d), o.setLastPartUpdate(u))
          : r === d && o.setLastPartUpdate(u);
      }, [e, a]);
    }
    (e.s(["useMaybeUpdateLoader", () => a], 884284),
      e.s(["GetOrRequestIntegrationV1", () => en], 423814));
    var o = e.i(324834),
      l = e.i(965932),
      c = e.i(236808);
    e.s(["useRichAssistantParts", () => p], 795970);
    var u = o,
      d = t,
      h = c;
    function p(e, t, n = !1) {
      let { openReportError: r } = (0, h.useReportAgentError)();
      return (0, d.useMemo)(() => {
        let i = t.parts
          .map((i, s) => {
            let a = e[i.type];
            if ("parse-error" === i.type)
              return (0, u.jsx)(
                h.AgentNote,
                {
                  title: "Response rendering failed",
                  variant: "error",
                  primaryAction: {
                    text: "Report issue",
                    onClick: () => r("A parsing error occurred"),
                  },
                  children:
                    "Something went wrong parsing this response. Help us fix it by reporting the issue.",
                },
                s,
              );
            if (n) return a(i, s);
            let o = a(i, s);
            return o ? (0, u.jsx)(h.RichPart, { ...t, children: o }, s) : null;
          })
          .filter(Boolean);
        return 0 === i.length ? null : i;
      }, [r, e, t, n]);
    }
    var m = t,
      f = o,
      g = e.i(643312);
    e.i(563948);
    var x = e.i(407562),
      v = e.i(209819),
      y = e.i(92479),
      b = e.i(472166),
      j = e.i(44337),
      w = t,
      C = c,
      k = e.i(985005),
      S = e.i(304649),
      N = e.i(211976),
      E = e.i(762585),
      A = e.i(147675);
    let D = (0, w.createContext)(null),
      I = ({ children: e, isLastMessage: t, requestedIntegrationNames: n }) => {
        let { submit: r } = (0, b.useV0Chat)(),
          [i, s] = (0, w.useState)(!1),
          { canWriteToChat: a } = (0, v.useChatMetadata)(),
          { isStreaming: o } = (0, y.useChatLoadingState)(),
          l = (0, g.useIntegrationsApi)(),
          c = (0, w.useMemo)(() => {
            if ("ready" !== l.status) return [];
            let e = l.computed.allConnectedIntegrationNames,
              t = l.computed.optimisticConnectedIntegrationNames;
            return n.filter(
              (n) => (0, j.isIntegrationName)(n) && (e.has(n) || t.has(n)),
            );
          }, [
            n,
            l.computed?.optimisticConnectedIntegrationNames,
            l.computed?.allConnectedIntegrationNames,
            l.status,
          ]),
          u = (0, w.useCallback)(async () => {
            s(!0);
            try {
              await r({
                action: "new",
                content: {
                  version: 1,
                  parts: [
                    {
                      type: "confirmed-steps",
                      connectedIntegrationNames: c,
                      appliedScripts: [],
                      addedEnvVars: [],
                    },
                  ],
                },
                messageMode: "build",
              });
            } catch (e) {
              (x.toast.error("Failed to submit message"),
                console.error("Error submitting follow-up message:", e));
            } finally {
              setTimeout(() => {
                s(!1);
              }, 100);
            }
          }, [r, c]),
          d = !!(a && !i && !o && t);
        return (0, f.jsx)(D.Provider, {
          value: {
            state: {
              isLastMessage: t,
              requestedIntegrationNames: n,
              canSubmitFollowUp: d,
              isSubmittingFollowUp: i,
              isStreaming: o,
              requestedConnectedIntegrationNames: c,
              canWriteToChat: !!a,
            },
            actions: { handleSubmitFollowUp: u },
            api: l,
          },
          children: e,
        });
      },
      M = () => {
        let e = (0, w.useContext)(D);
        if (!e)
          throw Error(
            "useConnectIntegrationsCard must be used within a ConnectIntegrationsCardProvider",
          );
        return e;
      };
    function T(e) {
      let t = "Snowflake" === e.state.integration.name ? "Connect" : "Install";
      return (0, f.jsx)(k.ConnectIntegration.Provider, {
        ...e,
        children: (0, f.jsx)("div", {
          className: "@container/integration-row w-full",
          children: (0, f.jsxs)("div", {
            className: "flex items-center justify-between w-full gap-2",
            children: [
              (0, f.jsxs)("div", {
                className: "flex items-center gap-2 min-w-0 flex-1",
                children: [
                  (0, f.jsx)(k.ConnectIntegration.Icon, {
                    containerClassName: "size-6 shrink-0",
                    iconClassName: "mt-0 mb-0",
                  }),
                  (0, f.jsxs)("span", {
                    className: "flex items-center gap-1.5 min-w-0",
                    children: [
                      (0, f.jsx)("span", {
                        className:
                          "@[280px]/integration-row:inline hidden shrink-0",
                        children: t,
                      }),
                      (0, f.jsx)("span", {
                        className: "truncate",
                        children: e.state.integration.name,
                      }),
                      (0, f.jsx)(k.ConnectIntegration.Badge, {}),
                    ],
                  }),
                ],
              }),
              (0, f.jsx)("div", {
                className: "shrink-0",
                children: (0, f.jsx)(k.ConnectIntegration.Button, {}),
              }),
            ],
          }),
        }),
      });
    }
    function L({ requestedIntegrationName: e }) {
      let { api: t } = M();
      if ("ready" !== t.status) return null;
      let n = !!t.computed.connectingIntegrationNames.has(e),
        r = !!t.computed.optimisticConnectedIntegrationNames.has(e),
        i = t.data.find((t) => t.name === e);
      return i
        ? (0, f.jsx)(T, {
            state: {
              integration: { ...i, isConnected: i.isConnected || r },
              isConnecting: n,
              isDisabled: t.isUpdating,
              isForbidden: !1,
            },
            actions: { handleConnect: (e) => t.update(e) },
          })
        : null;
    }
    function P({ requestedIntegrationName: e }) {
      let t = (0, k.createForbiddenIntegrationState)(e);
      return (0, f.jsx)(T, { state: t, actions: { handleConnect: null } });
    }
    function R() {
      let e,
        {
          state: {
            isSubmittingFollowUp: t,
            isStreaming: n,
            requestedConnectedIntegrationNames: r,
            isLastMessage: i,
          },
          actions: { handleSubmitFollowUp: s },
          api: a,
        } = M();
      return i
        ? ((e = r.length > 0 ? "Continue building" : "Skip"),
          (0, f.jsx)("div", {
            className: (0, S.cn)(
              "flex justify-end items-center gap-2 transition-all duration-300 ease-in-out overflow-hidden",
              "h-8 max-h-8 opacity-100 py-[2px] mt-2",
            ),
            children: (0, f.jsx)(N.SpinnerButton, {
              onClick: s,
              className: "w-full h-8",
              variant: "secondary",
              size: "sm",
              pending: t,
              disabled: t || n || a.isUpdating,
              children: (0, f.jsx)("div", {
                className: "flex items-center gap-2",
                children: e,
              }),
            }),
          }))
        : null;
    }
    function F() {
      let {
        state: { requestedIntegrationNames: e, isLastMessage: t },
      } = M();
      return (0, f.jsxs)(f.Fragment, {
        children: [
          (0, f.jsx)(C.BlockRing, { isVisible: !0, isActive: t }),
          e.map((e, t) =>
            (0, f.jsxs)(
              "div",
              {
                className: "w-full items-center flex gap-2",
                children: [
                  (0, f.jsx)(E.Skeleton, { className: "rounded-full size-6" }),
                  (0, f.jsx)(E.Skeleton, { className: "h-6 flex-3" }),
                  (0, f.jsx)("div", { className: "flex-1" }),
                  (0, f.jsx)(E.Skeleton, {
                    className: "h-7 w-[114px] rounded-md",
                  }),
                ],
              },
              t + "-int-skeleton",
            ),
          ),
          t && (0, f.jsx)(E.Skeleton, { className: "w-full h-8 mt-2" }),
        ],
      });
    }
    function _() {
      let {
        state: { requestedIntegrationNames: e },
        api: t,
      } = M();
      return "error" !== t.status
        ? null
        : t.forbidden
          ? (0, f.jsx)(f.Fragment, {
              children: e.map((e, t) =>
                (0, f.jsx)(P, { requestedIntegrationName: e }, t),
              ),
            })
          : (0, f.jsxs)("div", {
              className:
                "flex items-center justify-center w-full pt-0.5 gap-2 text-[13px] text-v0-red-700",
              children: [
                (0, f.jsx)(A.Warning, { size: 12 }),
                "Failed to load integrations data.",
              ],
            });
    }
    function O() {
      let {
        state: { isLastMessage: e, requestedIntegrationNames: t },
        api: n,
      } = M();
      return "loading" === n.status
        ? (0, f.jsx)(F, {})
        : "error" === n.status
          ? (0, f.jsx)(_, {})
          : (0, f.jsxs)(f.Fragment, {
              children: [
                (0, f.jsx)(C.BlockRing, { isVisible: !0, isActive: e }),
                t.map((e, t) =>
                  (0, f.jsx)(L, { requestedIntegrationName: e }, t),
                ),
                (0, f.jsx)(R, {}),
              ],
            });
    }
    function B() {
      let {
        state: { canWriteToChat: e, isLastMessage: t },
      } = M();
      return (0, f.jsx)("div", {
        className: (0, S.cn)(
          C.AGENT_BLOCK_CLASS,
          "flex-col mb-4 py-2 min-h-11 flex gap-1",
          !e && "pointer-events-none",
          t && "border-v0-blue-700",
        ),
        children: (0, f.jsx)(O, {}),
      });
    }
    function V({ requestedIntegrations: e, isLastMessage: t }) {
      return (0, f.jsx)(I, {
        isLastMessage: t,
        requestedIntegrationNames: e.map((e) => e.stepName),
        children: (0, f.jsx)(B, {}),
      });
    }
    var z = e.i(424725),
      H = j,
      $ = o,
      U = l,
      G = e.i(794593),
      W = e.i(66990),
      q = e.i(996174),
      Z = e.i(403055),
      K = c,
      Y = e.i(480187);
    function J({ label: e, value: t }) {
      return (0, $.jsxs)("div", {
        className: "flex justify-between items-center",
        children: [
          (0, $.jsx)("span", { className: "text-v0-gray-700", children: e }),
          t,
        ],
      });
    }
    function Q({ policy: e }) {
      return (0, $.jsxs)("div", {
        className: "space-y-0.5",
        children: [
          (0, $.jsx)("div", {
            className: "font-medium text-v0-gray-1000 text-xs truncate",
            title: e.policy_name,
            children: e.policy_name,
          }),
          (0, $.jsxs)("div", {
            className: "flex items-center text-v0-gray-700 text-xs",
            children: [
              (0, $.jsx)("span", {
                className:
                  "inline-block w-1 h-1 rounded-full bg-v0-gray-500 mr-1.5",
              }),
              e.command,
            ],
          }),
        ],
      });
    }
    function X({ hasRlsPolicies: e, rlsTooltipContent: t }) {
      return (0, $.jsx)("span", {
        className: "text-v0-gray-500",
        children: e
          ? (0, $.jsx)(q.Tooltip, {
              content: t,
              children: (0, $.jsx)("span", {
                children: (0, $.jsx)(Y.IconDatabaseSecuredByRls, {}),
              }),
            })
          : (0, $.jsx)(U.Database, {}),
      });
    }
    function ee({ table: e }) {
      let t = !!(e.rls?.enabled && e.rls.policies.length > 0),
        n = e.rls
          ? (0, $.jsxs)("div", {
              className: "space-y-3 max-w-sm",
              children: [
                (0, $.jsx)("div", {
                  className: "font-semibold text-sm text-v0-gray-1000",
                  children: "Row Level Security",
                }),
                (0, $.jsxs)("div", {
                  className: "space-y-1.5 text-xs",
                  children: [
                    (0, $.jsx)(J, {
                      label: "Status",
                      value: (0, $.jsx)(G.Badge, {
                        size: "small",
                        variant: e.rls.enabled ? "blue" : "gray",
                        contrast: "subtle",
                        children: e.rls.enabled ? "Enabled" : "Disabled",
                      }),
                    }),
                    (0, $.jsx)(J, {
                      label: "Policies",
                      value: (0, $.jsx)("span", {
                        className: "font-medium text-v0-gray-1000",
                        children: e.rls.policies.length,
                      }),
                    }),
                  ],
                }),
                e.rls.policies.length > 0 &&
                  (0, $.jsxs)("div", {
                    className: "space-y-2",
                    children: [
                      (0, $.jsx)(W.Separator, {}),
                      (0, $.jsx)("div", {
                        className: "space-y-1.5",
                        children: e.rls.policies.map((e, t) =>
                          (0, $.jsx)(Q, { policy: e }, t),
                        ),
                      }),
                    ],
                  }),
              ],
            })
          : null;
      return (0, $.jsxs)("div", {
        className: (0, Z.cn)(
          "material-small flex flex-col rounded-md w-full",
          K.AGENT_BLOCK_MAX_WIDTH_CLASS,
        ),
        children: [
          (0, $.jsxs)("div", {
            className:
              "px-2.5 flex py-2 text-v0-gray-1000 border-b gap-2 justify-between border-v0-gray-200",
            children: [
              (0, $.jsxs)("span", {
                className: "flex items-center gap-2",
                children: [
                  (0, $.jsx)(X, { hasRlsPolicies: t, rlsTooltipContent: n }),
                  e.name,
                ],
              }),
              (0, $.jsxs)("span", {
                className: "text-gray-500 text-[11px]",
                children: [e.columns.length, " columns"],
              }),
            ],
          }),
          (0, $.jsx)("div", {
            className: "flex flex-col p-1.5 py-2",
            children: e.columns.map((e, t) =>
              (0, $.jsxs)(
                "div",
                {
                  className: (0, Z.cn)(
                    "flex items-center gap-4 h-7 justify-between rounded-[6px] px-1.5",
                    { "bg-v0-background-200": t % 2 == 0 },
                  ),
                  children: [
                    (0, $.jsx)("span", {
                      className: "text-label-12-mono text-v0-gray-900",
                      children: e.name,
                    }),
                    (0, $.jsx)("span", {
                      className: "text-v0-gray-900 text-[12px]",
                      children: e.type,
                    }),
                  ],
                },
                e.name,
              ),
            ),
          }),
        ],
      });
    }
    var et = k;
    function en(e) {
      let t = p(
          {
            "starting-integration-status-check": () => null,
            "request-install-integration": () => null,
            "finished-integration-status-check": (e) =>
              (0, o.jsx)(er, { ...e }),
          },
          e,
        ),
        n = e.parts.find((e) => "request-install-integration" === e.type);
      return n
        ? (0, o.jsx)(V, {
            requestedIntegrations: n.steps,
            isLastMessage: e.isLastMessage,
          })
        : (0, o.jsx)(c.RichTask, {
            ...e,
            Icon: l.Database,
            renderedParts: t,
            children: (0, o.jsx)(c.TaskName, {
              ...e,
              textActive: "Checking Integrations",
              textComplete: "Integration Check Complete",
            }),
          });
    }
    function er(e) {
      return (0, o.jsxs)("div", {
        className: "flex flex-col gap-2 [&_span]:align-middle w-full",
        children: [
          e.integrations.map((e, t) => (0, o.jsx)(ei, { ...e }, t)),
          e.envVars.length
            ? (0, o.jsxs)("span", {
                children: [
                  "Found ",
                  e.envVars.length,
                  " environment variables.",
                ],
              })
            : null,
        ],
      });
    }
    function ei({ schema: e, status: t, name: n, instanceName: r }) {
      let i = (0, m.useMemo)(
        () =>
          (0, o.jsx)(z.ContextPill, {
            prefix: (0, o.jsx)(et.ConnectIntegration.Provider, {
              state: (0, et.createForbiddenIntegrationState)(n),
              actions: { handleConnect: null },
              children: (0, o.jsx)(et.ConnectIntegration.Icon, {
                containerClassName: "size-4",
                iconClassName: "h-2.5 w-2.5 mt-0",
              }),
            }),
            className: "mx-1",
            children: r,
          }),
        [n, r],
      );
      return (0, m.useMemo)(
        () =>
          "not_connected" === t
            ? (0, o.jsxs)("span", { children: [i, " is not connected"] })
            : !e && (0, H.isSqlExecProviderName)(n)
              ? (0, o.jsxs)("span", {
                  children: [i, " is connected, but no schema available"],
                })
              : e
                ? (0, o.jsxs)("div", {
                    className: "flex flex-col gap-3 w-full",
                    children: [
                      (0, o.jsxs)("span", {
                        children: [
                          "Connected to ",
                          i,
                          " ",
                          e.tableCount,
                          " tables found.",
                        ],
                      }),
                      (0, o.jsx)("div", {
                        className: "flex flex-col gap-3",
                        children: e.tables.map((e) =>
                          (0, o.jsx)(ee, { table: e }, e.name),
                        ),
                      }),
                    ],
                  })
                : (0, o.jsxs)("span", { children: [i, " is connected"] }),
        [e, t, n, i],
      );
    }
    let es = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM10.5 5.5H5.5V10.5H10.5V5.5Z" fill="currentColor"/>',
    );
    e.s(["StopCircle", 0, es], 578183);
  },
  207086,
  141861,
  874090,
  681813,
  435153,
  198744,
  346602,
  744799,
  542727,
  851805,
  (e) => {
    "use strict";
    e.s(["CodingV1", () => $], 207086);
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(654935),
      i = e.i(494266),
      s = e.i(903500),
      a = e.i(578183),
      o = e.i(659563),
      l = e.i(910427),
      c = e.i(236808),
      u = e.i(795970),
      d = e.i(454471),
      h = e.i(304649),
      p = e.i(365290),
      m = e.i(176248),
      f = e.i(758118),
      g = e.i(818273),
      x = e.i(449381),
      v = e.i(53223),
      y = e.i(707827),
      b = e.i(301331),
      j = e.i(697856),
      w = e.i(862664),
      C = e.i(92479),
      k = e.i(530135),
      S = e.i(863785),
      N = e.i(397036),
      E = e.i(657736),
      A = e.i(926224);
    e.i(563948);
    var D = e.i(407562),
      I = e.i(316799),
      M = e.i(249897),
      T = e.i(76866),
      L = e.i(519738);
    e.i(904347);
    var P = e.i(37737),
      R = e.i(556355),
      F = e.i(385671),
      _ = e.i(996174),
      O = e.i(819969),
      B = e.i(393799);
    let V = { duration: 450 };
    function z({ changedFiles: e, blockId: r, isBlockClosed: i }) {
      let { latestSource: s } = (0, b.useBlockHistory)({
          blockId: r,
          searchAll: !0,
        }),
        a = (0, n.useMemo)(
          () =>
            s
              ? (0, A.getChangedFiles)({
                  source: s,
                  blockId: r,
                  blockType: "code-project",
                  closed: i,
                })
              : e,
          [s, r, e, i],
        );
      if (0 === a.length) return null;
      let o = a.map((e, r) => {
        let i = (0, d.filePathToIcon)(e.fileName),
          s = "loading...",
          a = e.baseName.includes(s) || e.fileName.includes(s);
        return (0, n.createElement)(
          E.motion.div,
          {
            ...(0, N.motionReplyAnimationIf)(e.isActive && !a),
            key: e.fileName + "-" + r,
            className:
              "grid grid-cols-[auto_auto_1fr] gap-2.5 items-center max-w-full",
          },
          a
            ? (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsx)(y.Spinner, { size: 16 }),
                  " Loading files changed...",
                ],
              })
            : (0, t.jsxs)(t.Fragment, {
                children: [
                  (0, t.jsx)(i, { className: "shrink-0" }),
                  (0, t.jsx)("span", {
                    className: "text-v0-gray-1000 shrink-0",
                    children: e.baseName,
                  }),
                  (0, t.jsx)("span", {
                    className: "text-v0-gray-900 min-w-0 truncate",
                    children: e.fileName,
                  }),
                ],
              }),
        );
      });
      return (0, t.jsx)("div", {
        className: "flex flex-col gap-2",
        children: o,
      });
    }
    let H = n.default.memo(z);
    function $(e) {
      let o = (0, u.useRichAssistantParts)(
          {
            "code-project": (e) =>
              (0, t.jsx)(H, {
                changedFiles: e.changedFiles,
                blockId: e.blockId,
                isBlockClosed: e.closed,
              }),
          },
          e,
        ),
        l = (0, g.useIsStreaming)(),
        d = e.parts[0],
        m = "code-project" === d.type ? d : null,
        y = (m?.isVersioned || !1) && !e.isActive && !l,
        C = m?.blockId,
        {
          currentBlockIndex: k,
          ensureBlockSource: N,
          isLoadingBlockSource: E,
          thisBlock: A,
        } = (0, b.useBlockHistory)({ blockId: C || "", searchAll: !0 }),
        L =
          A?.sourceVersionKey ||
          (m?.type === "code-project" ? m.sourceVersionKey : void 0),
        P = (L && (0, M.parseSourceVersionToNumber)(L)) || 1,
        R = k + 1,
        _ = (0, n.useCallback)(async () => {
          E || (await N());
        }, [N, E]),
        { getBlockShared: z } = (0, j.useSharedBlocks)(),
        { getBlockDeployed: $ } = (0, w.useDeployedBlocks)(),
        { actions: W } = (0, F.useChatLayout)(),
        q = !!C && (z(C) || $(C)),
        Z = !l && m && "code-project" === m.type && !m.closed,
        K = (0, x.useActiveBlockState)(),
        Y = C === K?.id,
        J = (0, x.useSetActiveBlockView)(),
        { getBlockTemplateId: Q } = (0, S.useBlockTemplateId)(),
        { saveLastOpenedBlock: X } = (0, I.useLastOpenedBlock)(),
        ee = (0, n.useCallback)(
          async (t) => {
            if ((Y || (t.preventDefault(), t.stopPropagation()), !C || !y))
              return;
            (0, v.track)("ClickBlockPreview", { blockId: C });
            let n = await N().catch(() => {
              D.toast.error("Failed to load block source.");
            });
            if ("code-project" !== m.type) return;
            let r = n || m.source;
            if (!r) return;
            let i = {
              id: C,
              meta: m.meta,
              messageId: e.messageId,
              type: "code-project",
              language: m.lang || "javascript",
              source: r,
              closed: !0,
              hasSourceBeenEdited: !1,
              remoteInfo: {},
              forkedFromBlockId: void 0,
              latestDeploymentInfo: m.latestDeploymentInfo,
              templateVersionId: Q(C)?.templateVersionId || void 0,
              templateCanonId: Q(C)?.templateCanonId || void 0,
            };
            (W.setMobilePanel("output"), J(!0, i), X(C));
          },
          [
            Y,
            C,
            y,
            N,
            m?.type,
            m?.source,
            m?.meta,
            m?.lang,
            m?.latestDeploymentInfo,
            e.messageId,
            Q,
            W,
            J,
            X,
          ],
        ),
        { restoreCurrentBlock: et, isRestoring: en } = (0,
        T.useRestoreBlockVersion)(C),
        { atoms: er } = (0, O.useCurrentChat)(),
        ei = (0, B.useAtomValue)(er.canWriteToChat),
        es = (0, n.useMemo)(
          () =>
            y
              ? q
                ? s.Globe
                : Z
                  ? a.StopCircle
                  : i.ChevronRightSmall
              : r.FileText,
          [y, q, Z],
        ),
        ea = y
          ? (e) => {
              y && ee(e);
            }
          : void 0;
      return (0, t.jsx)(U, {
        blockId: C,
        editVersionNumber: P,
        canWriteToChat: ei || !1,
        children: (0, t.jsxs)("div", {
          className: (0, h.cn)(
            c.AGENT_BLOCK_MAX_WIDTH_CLASS,
            "rounded-[8px] m-[-1px] border border-transparent relative cursor-pointer",
            y ? c.AGENT_BLOCK_CLASS : "",
            { "border-v0-blue-700": y && Y, "border-v0-gray-600": y && !Y },
          ),
          style: {
            ...(0, p.transitionStyles)(
              ["border-color", "background", "padding", "box-shadow"],
              V,
            ),
          },
          onClick: ea,
          onMouseEnter: _,
          children: [
            (0, t.jsx)(c.BlockRing, { isVisible: y, isActive: Y }),
            (0, t.jsx)(c.RichTask, {
              ...e,
              Icon: es,
              renderedParts: o,
              hideTimelineLine: y,
              hideTimeSpent: !0,
              onClick: ea,
              headerChildrenEnd: (0, t.jsx)(G, {
                isVersioned: y,
                blockId: C,
                messageId: e.messageId,
                canWriteToChat: ei || !1,
                isRestoring: en,
                restoreCurrentBlock: et,
              }),
              autoCloseDelay: y ? 0 : void 0,
              className: "w-full overflow-hidden",
              children: (0, t.jsxs)("div", {
                className:
                  "grid overflow-hidden truncate grid-cols-[auto_auto] content-center align-middle",
                children: [
                  (0, t.jsx)("span", {
                    className: (0, h.cn)("truncate pr-2 font-normal", {
                      "text-v0-gray-1000": y,
                    }),
                    children: (0, t.jsx)(c.TaskName, {
                      ...e,
                      textActive: "Making changes",
                      textComplete: "Made some changes",
                    }),
                  }),
                  (0, t.jsx)("span", {
                    className:
                      "text-v0-gray-900 text-label-13 pl-0.5 shrink-0 flex items-center gap-1",
                    ...(0, f.a11yHideIf)(!y),
                    style: {
                      ...(0, f.visibleStylesIf)(y),
                      ...(0, p.transitionStyles)(["opacity"], V),
                    },
                    children: (0, t.jsxs)("span", {
                      className: "flex items-center gap-1",
                      children: [
                        (0, t.jsx)("span", { children: R ? `v${R}` : null }),
                        P > 1 && ei
                          ? (0, t.jsx)("span", { children: "(edited)" })
                          : null,
                      ],
                    }),
                  }),
                ],
              }),
            }),
          ],
        }),
      });
    }
    function U({
      children: e,
      blockId: r,
      editVersionNumber: i,
      canWriteToChat: s,
    }) {
      let { isLatest: a } = (0, L.useBlockVersionInfo)(r),
        o = (0, n.useCallback)(() => {
          r && (0, P.openDialog)({ type: "undoChanges", data: { blockId: r } });
        }, [r]);
      if (i <= 1 || !s) return e;
      let l = i - 1;
      return (0, t.jsxs)("div", {
        className: "relative",
        children: [
          e,
          (0, t.jsxs)("div", {
            className: "flex items-end gap-1",
            children: [
              (0, t.jsx)(c.TimelineCorner20, { className: "ml-5" }),
              (0, t.jsxs)("div", {
                className:
                  "text-v0-gray-900 font-normal text-label-13 -mb-1.5 select-none flex items-center gap-1",
                children: [
                  (0, t.jsxs)("span", {
                    children: [
                      " ",
                      "You made ",
                      l,
                      " edit",
                      l > 1 ? (0, t.jsx)("span", { children: "s" }) : null,
                      " ",
                    ],
                  }),
                  a &&
                    (0, t.jsxs)(t.Fragment, {
                      children: [
                        (0, t.jsx)("span", { children: "" }),
                        " ",
                        (0, t.jsx)("button", {
                          className: "hover:text-v0-gray-1000 hover:underline",
                          onClick: o,
                          disabled: !a,
                          children: "Undo",
                        }),
                      ],
                    }),
                ],
              }),
            ],
          }),
        ],
      });
    }
    let G = n.default.memo(function ({
      isVersioned: e,
      blockId: n,
      messageId: r,
      canWriteToChat: i,
      isRestoring: s,
      restoreCurrentBlock: a,
    }) {
      if (!e || !n) return null;
      let o = e;
      return (0, t.jsx)("div", {
        className: "flex items-center gap-1 min-w-fit",
        ...(0, f.a11yHideIf)(!o),
        style: {
          ...(0, f.visibleStylesIf)(o),
          ...(0, p.transitionStyles)(["opacity"], V),
        },
        children: (0, t.jsx)(W, {
          blockId: n,
          messageId: r,
          canWriteToChat: i,
          isRestoring: s,
          restoreCurrentBlock: a,
        }),
      });
    });
    function W({
      blockId: e,
      messageId: n,
      isRestoring: r,
      restoreCurrentBlock: i,
      canWriteToChat: s,
    }) {
      let { activeForkKey: a } = (0, C.useChatMessages)(),
        c = n === a?.[a.length - 1];
      return s && e
        ? r
          ? (0, t.jsx)(q, {
              disabled: r,
              children: (0, t.jsx)(y.Spinner, { size: 16 }),
            })
          : (0, t.jsxs)(R.DropdownMenu, {
              children: [
                (0, t.jsx)(R.DropdownMenuTrigger, {
                  asChild: !0,
                  children: (0, t.jsx)(q, {
                    children: (0, t.jsx)(o.MoreHorizontal, { size: 16 }),
                  }),
                }),
                (0, t.jsxs)(R.DropdownMenuContent, {
                  className: "p-1",
                  align: "end",
                  children: [
                    (0, t.jsx)(_.Tooltip, {
                      content: c ? "Cannot restore latest version" : "",
                      children: (0, t.jsx)("span", {
                        children: (0, t.jsxs)(R.DropdownMenuItem, {
                          disabled: c,
                          onClick: i,
                          children: [(0, t.jsx)(k.UndoIcon, {}), " Restore"],
                        }),
                      }),
                    }),
                    (0, t.jsxs)(R.DropdownMenuItem, {
                      onClick: () => {
                        (0, P.openDialog)({
                          type: "forkBlock",
                          data: {
                            blockId: e,
                            page: "chat",
                            canWriteToChat: !!s,
                            actionType: "duplicate",
                          },
                        });
                      },
                      children: [(0, t.jsx)(l.PlusCircle, {}), " New Chat"],
                    }),
                  ],
                }),
              ],
            })
        : null;
    }
    function q({
      onClick: e,
      children: n,
      variant: r = "ghost",
      className: i,
      "aria-label": s,
      disabled: a,
      ...o
    }) {
      return (0, t.jsxs)(m.Button, {
        className: (0, h.cn)(
          "relative z-10 size-7 shrink-0 rounded-md px-1 transition-none has-[>svg]:p-0 ",
          i,
        ),
        size: "sm",
        variant: "ghost",
        ...o,
        children: [
          n,
          (0, t.jsx)("span", { className: "sr-only", children: s }),
        ],
      });
    }
    e.s(["DiagnosticsV1", () => X], 141861);
    var Z = t,
      K = e.i(740838),
      Y = c,
      J = u,
      Q = n;
    function X(e) {
      let t = (0, Q.useMemo)(
          () =>
            e.parts.find((e) => "diagnostics-found-issues" === e.type)
              ?.summaries.length || 0,
          [e.parts],
        ),
        n = (0, J.useRichAssistantParts)(
          {
            "fetching-diagnostics": () => null,
            "diagnostics-passed": () => null,
            "diagnostic-invocations-exhausted": () => null,
            "diagnostics-found-issues": (e) =>
              (0, Z.jsx)("div", {
                className: "flex flex-col gap-2",
                children: e.summaries.map((e, t) =>
                  (0, Z.jsx)("div", { children: e }, t),
                ),
              }),
          },
          e,
        );
      return (0, Z.jsx)(Y.RichTask, {
        ...e,
        Icon: K.Wrench,
        renderedParts: t ? n : null,
        children: (0, Z.jsx)(Y.TaskName, {
          ...e,
          textActive: "Reviewing work",
          textComplete: t ? "Reviewed work" : "No issues found",
        }),
      });
    }
    e.s(["FetchFromWebV1", () => ei], 874090);
    var ee = t,
      et = s,
      en = c,
      er = u;
    function ei(e) {
      let t = (0, er.useRichAssistantParts)(
        {
          "starting-fetch-from-web": ({ url: e }) =>
            `Visiting "${(0, en.readableUrl)({ url: e })}"`,
          "finished-fetch-from-web": (e) =>
            (0, ee.jsxs)(ee.Fragment, {
              children: [
                "Read ",
                (0, ee.jsx)(en.AgentCitationPill, { align: "start", ...e }),
              ],
            }),
        },
        e,
      );
      return (0, ee.jsx)(en.RichTask, {
        ...e,
        Icon: et.Globe,
        renderedParts: t,
        children: (0, ee.jsx)(en.TaskName, {
          ...e,
          textActive: "Fetching from Web",
          textComplete: "Fetched from Web",
        }),
      });
    }
    e.s(["GenerateDesignInspirationV1", () => el], 681813);
    var es = t,
      ea = e.i(337916),
      eo = c;
    function el(e) {
      return (0, es.jsx)(eo.RichTask, {
        ...e,
        Icon: ea.Kv,
        renderedParts: null,
        maxHeight: 400,
        children: (0, es.jsx)(eo.TaskName, {
          ...e,
          textActive: "Generating design brief",
          textComplete: "Generated enhanced design brief",
        }),
      });
    }
    e.s(["InspectSiteV1", () => ep], 198744);
    var ec = t;
    let eu = (0, e.i(877318).withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 3.5H3.5L5 1H11L12.5 3.5H14.5H16V5V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V5V3.5H1.5ZM4.78624 4.27174L5.84929 2.5H10.1507L11.2138 4.27174L11.6507 5H12.5H14.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V5H3.5H4.34929L4.78624 4.27174ZM9.75 8.5C9.75 9.4665 8.9665 10.25 8 10.25C7.0335 10.25 6.25 9.4665 6.25 8.5C6.25 7.5335 7.0335 6.75 8 6.75C8.9665 6.75 9.75 7.5335 9.75 8.5ZM11.25 8.5C11.25 10.2949 9.79493 11.75 8 11.75C6.20507 11.75 4.75 10.2949 4.75 8.5C4.75 6.70507 6.20507 5.25 8 5.25C9.79493 5.25 11.25 6.70507 11.25 8.5Z" fill="currentColor"/>',
    );
    e.s(["Camera", 0, eu], 435153);
    var ed = c,
      eh = u;
    function ep(e) {
      let t = (0, eh.useRichAssistantParts)(
        {
          "starting-inspect-site": ({ url: e }) => null,
          "skipping-inspect-site": ({ reason: e }) => e,
          "inspect-site-complete": (e) => (0, ec.jsx)(em, { ...e }),
          screenshot: (e) =>
            (0, ec.jsx)(ed.WebsiteScreenshot, {
              screenshotUrl: e.screenshotUrl,
              url: e.url,
            }),
        },
        e,
      );
      return (0, ec.jsx)(ed.RichTask, {
        ...e,
        Icon: eu,
        renderedParts: t,
        children: (0, ec.jsx)(ed.TaskName, {
          ...e,
          textActive: "Inspecting Site",
          textComplete: "Inspected Site",
        }),
      });
    }
    function em(e) {
      let t = e.screenshotResults.filter((e) => !!e.screenshotUrl);
      return (0, ec.jsxs)("div", {
        className: "flex-col flex gap-1",
        children: [
          t.map((e, t) =>
            (0, ec.jsx)(
              "div",
              {
                className: "flex gap-2 flex-col",
                children: (0, ec.jsx)(ed.WebsiteScreenshot, {
                  screenshotUrl: e.screenshotUrl,
                }),
              },
              t,
            ),
          ),
          0 === t.length &&
            (0, ec.jsx)(ed.AgentNote, {
              variant: "warning",
              children: "No screenshots were taken.",
            }),
        ],
      });
    }
    e.s(["ReadFilesV1", () => ey], 346602);
    var ef = t,
      eg = e.i(365670),
      ex = c,
      ev = u;
    function ey(e) {
      let t = (0, ev.useRichAssistantParts)(
        {
          "starting-read-files": (e) =>
            (0, ef.jsx)(ex.FileList, { label: "Reading", files: e.filePaths }),
          "finished-read-files": () => "Finished reading",
        },
        e,
      );
      return (0, ef.jsx)(ex.RichTask, {
        ...e,
        Icon: eg.MagnifyingGlassSmall,
        renderedParts: t,
        children: (0, ef.jsx)(ex.TaskName, {
          ...e,
          textActive: "Searching repository",
          textComplete: "Searched repository",
        }),
      });
    }
    e.s(["RunShellCommandV1", () => eS], 744799);
    var eb = t,
      ej = e.i(653168),
      ew = c,
      eC = u,
      ek = n;
    function eS(e) {
      let t = (0, eC.useRichAssistantParts)(
          {
            "starting-shell-command": (e) => (0, eb.jsx)(ew.Command, { ...e }),
            "finished-shell-command": (e) =>
              (0, eb.jsx)(ew.CommandOutput, { ...e }),
          },
          e,
          !0,
        ),
        n = (0, ek.useMemo)(
          () => (0, eb.jsx)(ew.Terminal, { children: t }),
          [t],
        );
      return (0, eb.jsx)(ew.RichTask, {
        ...e,
        Icon: ej.TerminalWindow,
        renderedParts: n,
        children: (0, eb.jsx)(ew.TaskName, {
          ...e,
          textActive: "Running some commands",
          textComplete: "Ran some commands",
        }),
      });
    }
    e.s(["SearchRepoV1", () => eM], 542727);
    var eN = t,
      eE = eg,
      eA = c,
      eD = u,
      eI = e.i(266007);
    function eM(e) {
      let t = (0, eD.useRichAssistantParts)(
        {
          ls: () => null,
          "grepping-repo": () => null,
          "repo-search-result": () => null,
          "starting-repo-search": (e) =>
            (0, eN.jsxs)(eN.Fragment, {
              children: [
                "Searching ",
                `"${(0, eI.cleanAgentFilePath)(e.query)}"`,
              ],
            }),
          "reading-file": (e) =>
            (0, eN.jsxs)(eN.Fragment, {
              children: ["Read ", (0, eN.jsx)(eA.File, { ...e, shorten: !0 })],
            }),
          "ls-results": (e) =>
            e.numFiles
              ? `Scanning ${e.numFiles} file${e.numFiles > 1 ? "s" : ""}`
              : "Scanning files",
          "grep-results": (e) =>
            e.numMatches
              ? `Scanned ${e.numMatches} file${e.numMatches > 1 ? "s" : ""}`
              : null,
          "grep-file-results": (e) =>
            e.numFileMatches
              ? `Scanned ${e.numFileMatches} file${e.numFileMatches > 1 ? "s" : ""}`
              : "Scanned files",
          "select-files": (e) =>
            (0, eN.jsx)(eA.FileList, {
              label: `Reading file${e.filePaths.length > 1 ? "s" : ""}`,
              files: e.filePaths.map(eI.cleanAgentFilePath),
            }),
        },
        e,
      );
      return (0, eN.jsx)(eA.RichTask, {
        ...e,
        Icon: eE.MagnifyingGlassSmall,
        renderedParts: t,
        children: (0, eN.jsx)(eA.TaskName, {
          ...e,
          textActive: "Searching repository",
          textComplete: "Searched repository",
        }),
      });
    }
    e.s(["SearchWebV1", () => eF], 851805);
    var eT = t,
      eL = s,
      eP = c,
      eR = u;
    function eF(e) {
      let t = (0, eR.useRichAssistantParts)(
        {
          "starting-web-search": (e) => `Searching "${e.query}"`,
          "got-results": (e) => `Analyzing ${e.count} results...`,
          "failed-web-search": () =>
            (0, eT.jsx)(eP.AgentNote, {
              variant: "info",
              title: "No results",
              children: "We couldn't find any results for your search.",
            }),
          "finished-web-search": (e) =>
            (0, eT.jsxs)("div", {
              className: "flex flex-col gap-1 max-w-full",
              children: [
                e.answer,
                (0, eT.jsx)("div", {
                  className: "flex flex-wrap gap-1.5",
                  children: e.citations.map((t, n) =>
                    (0, eT.jsx)(
                      eP.AgentCitationPill,
                      {
                        align: (0, eP.indexAndLengthToAlign)(
                          n,
                          e.citations.length,
                        ),
                        ...t,
                      },
                      n,
                    ),
                  ),
                }),
              ],
            }),
        },
        e,
      );
      return (0, eT.jsx)(eP.RichTask, {
        ...e,
        Icon: eL.Globe,
        renderedParts: t,
        children: (0, eT.jsx)(eP.TaskName, {
          ...e,
          textActive: "Searching the Web",
          textComplete: "Searched the Web",
        }),
      });
    }
  },
  165336,
  108355,
  500334,
  451925,
  241987,
  536617,
  705636,
  719268,
  635713,
  455684,
  343889,
  (e) => {
    "use strict";
    e.s(["MockThinkingV1", () => g, "ThinkingV1", () => x], 165336);
    var t = e.i(324834),
      n = e.i(795970),
      r = e.i(877318),
      i = e.i(576191),
      s = e.i(236808),
      a = t,
      o = i,
      l = e.i(396735),
      c = e.i(219732),
      u = e.i(694686),
      d = e.i(741430),
      h = e.i(636139);
    let p = (0, c.default)(l.default),
      m = o.default.memo(function ({ children: e }) {
        return (0, a.jsx)("div", {
          className: "flex flex-col [&_*]:!m-0 gap-1.5",
          children: (0, a.jsx)(p, {
            allowedLinkPrefixes: u.allowedLinkPrefixes,
            allowedImagePrefixes: u.allowedImagePrefixes,
            defaultOrigin: u.defaultOrigin,
            components: {
              p: ({ children: e }) => (0, a.jsx)("p", { children: e }),
              code: ({ inline: e, className: t, children: n, ...r }) => {
                if (!(!1 === e || t?.startsWith("language-")))
                  return (0, a.jsx)("code", {
                    className:
                      "rounded-[0.375rem] border border-v0-alpha-200 bg-v0-background-300 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",
                    children: n,
                  });
                let i = /language-(\w+)/.exec(t || ""),
                  s = i ? i[1] : "plaintext",
                  o = String(n).replace(/\n$/, "");
                return (0, a.jsx)("div", {
                  className:
                    "rounded-lg overflow-x-auto border border-v0-alpha-200 bg-v0-background-100",
                  children: (0, a.jsx)(d.PrismAsync, {
                    PreTag: "div",
                    customStyle: {
                      display: "flex",
                      margin: 0,
                      width: "max-content",
                      height: "min-content",
                      padding: "8px 10px",
                      textShadow: "none",
                      backgroundColor: "transparent",
                      lineHeight: "1.55",
                      fontSize: "0.8125rem",
                    },
                    codeTagProps: {
                      style: { fontFamily: "var(--font-geist-mono)" },
                    },
                    language: (0, h.getPrismLanguage)(s),
                    useInlineStyles: !1,
                    wrapLines: !0,
                    children: o,
                  }),
                });
              },
              pre: ({ children: e }) => e,
            },
            children: e,
          }),
        });
      }),
      f = (0, r.withNewIcon)(
        '<path d="M10 0c1.27 0 2.33.86 2.65 2.03a3 3 0 0 1 2.14 4.57 3.49 3.49 0 0 1-.05 5.34l.01.31A3.75 3.75 0 0 1 8 14.5a3.74 3.74 0 0 1-6.74-2.56 3.5 3.5 0 0 1-.05-5.34 2.99 2.99 0 0 1 2.14-4.57A2.75 2.75 0 0 1 8 .87C8.5.33 9.21 0 10 0Zm0 1.5c-.69 0-1.25.56-1.25 1.25V5A3.75 3.75 0 0 1 5 8.75v-1.5c1.24 0 2.25-1 2.25-2.25V2.75a1.25 1.25 0 1 0-2.4.48l.07.14.03.07a.75.75 0 0 1-1.29.75l-.04-.06-.08-.16a2.74 2.74 0 0 1-.17-.42 1.5 1.5 0 0 0-.83 2.33l.32-.07a.75.75 0 0 1 .28 1.47 2 2 0 0 0 .72 3.94.75.75 0 0 1 .28 1.47 3.51 3.51 0 0 1-1.35-.01 2.25 2.25 0 0 0 4.46-.43V12A3.75 3.75 0 0 1 11 8.25v1.5c-1.24 0-2.25 1-2.25 2.25v.25a2.25 2.25 0 0 0 4.46.43 3.51 3.51 0 0 1-1.35.01.75.75 0 0 1 .28-1.47 2 2 0 0 0 .73-3.93.75.75 0 0 1 .27-1.48l.32.07a1.5 1.5 0 0 0-.83-2.33c-.04.15-.1.29-.17.42l-.08.16-.04.06a.75.75 0 0 1-1.3-.75l.04-.07.07-.14A1.25 1.25 0 0 0 10 1.5Z" fill="currentColor"/>',
      );
    function g() {
      let e = (0, i.useId)(),
        n = (0, i.useRef)(Date.now());
      return (0, t.jsx)(x, {
        isActive: !0,
        isLast: !0,
        isFirst: !0,
        isLastMessage: !1,
        messageId: `thinking-v1-mock-${e}`,
        type: "task-thinking-v1",
        parts: [],
        createdAt: n.current,
        hideTimeSpent: !0,
        finishedAt: null,
        lastPartSentAt: null,
        id: `thinking-v1-mock-${e}`,
      });
    }
    function x({ ...e }) {
      let r,
        a = e.parts.at(-1);
      r = e.isLast ? { ...e, parts: a ? [a] : [] } : e;
      let o = (0, n.useRichAssistantParts)(
          { "thinking-end": (e) => (0, t.jsx)(m, { children: e.thought }) },
          r,
        ),
        l = (0, i.useMemo)(
          () => r.parts.findLast((e) => "thinking-end" === e.type)?.duration,
          [r],
        ),
        c = (0, i.useMemo)(() => {
          if (!l) return "for a moment";
          let e = Math.round(l);
          if (e < 60) return `for ${e}s`;
          {
            let t = Math.floor(e / 60),
              n = e % 60;
            return n > 0 ? `for ${t}m ${n}s` : `for ${t}m`;
          }
        }, [l]),
        u = r.taskNameActive || "Thinking";
      return (0, t.jsx)(s.RichTask, {
        ...r,
        Icon: f,
        hideTimeSpent: !0,
        renderedParts: o,
        children: r.isActive ? u : `Thought ${c}`,
      });
    }
    e.s(["TodoManagerV1", () => w], 108355);
    var v = t,
      y = e.i(424680),
      b = s,
      j = i;
    function w(e) {
      let t = (0, j.useMemo)(
        () =>
          e.parts
            .filter((e) => "updated-todo-list" === e.type)
            .every(
              (e) =>
                e.updatedList.every(
                  (e) => "todo" === e.status || "in-progress" === e.status,
                ) && !e.updatedList.some((e) => "done" === e.status),
            )
            ? y.ListUnordered
            : C,
        [e],
      );
      return (0, v.jsx)(b.RichTask, {
        ...e,
        Icon: t,
        renderedParts: null,
        hideTimeSpent: !0,
        children: (0, v.jsx)(b.TaskName, {
          ...e,
          textActive: "Managing Todos",
          textComplete: "Managed Todos",
        }),
      });
    }
    let C = (0, r.withNewIcon)(`
<path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5ZM12.0605 5.75L7.03027 10.7803C6.73738 11.0732 6.26262 11.0732 5.96973 10.7803L3.93945 8.75L5 7.68945L6.5 9.18945L11 4.68945L12.0605 5.75Z" fill="currentColor"/>`);
    (e.s([], 500334),
      (0, r.withNewIcon)(
        '<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 2.79933C9.19835 2.53997 9.5 2.05521 9.5 1.5C9.5 0.671573 8.82843 0 8 0C7.17157 0 6.5 0.671573 6.5 1.5C6.5 2.05521 6.80165 2.53997 7.25 2.79933V5H7C4.027 5 1.55904 7.16229 1.08296 10H0V13H1V14.5V16H2.5H13.5H15V14.5V13H16V10H14.917C14.441 7.16229 11.973 5 9 5H8.75V2.79933ZM7 6.5C4.51472 6.5 2.5 8.51472 2.5 11V14.5H13.5V11C13.5 8.51472 11.4853 6.5 9 6.5H7ZM7.25 11.25C7.25 12.2165 6.4665 13 5.5 13C4.5335 13 3.75 12.2165 3.75 11.25C3.75 10.2835 4.5335 9.5 5.5 9.5C6.4665 9.5 7.25 10.2835 7.25 11.25ZM10.5 13C11.4665 13 12.25 12.2165 12.25 11.25C12.25 10.2835 11.4665 9.5 10.5 9.5C9.5335 9.5 8.75 10.2835 8.75 11.25C8.75 12.2165 9.5335 13 10.5 13Z" fill="currentColor" />',
      ),
      e.s(["StoppedV1", () => L], 451925));
    var k = t,
      S = e.i(397036),
      N = s,
      E = n,
      A = e.i(657736);
    e.i(904347);
    var D = e.i(37737),
      I = e.i(226368),
      M = i,
      T = e.i(176248);
    function L(e) {
      let t = (0, I.useRouter)(),
        n = ({ invocations: e }) =>
          (0, k.jsxs)(N.AgentNote, {
            variant: "info",
            title: "Output Stopped",
            children: [
              "The maximum number of calls for the message has been reached (",
              e,
              ").",
            ],
          }),
        r = (0, E.useRichAssistantParts)(
          {
            "agent-timeout": () =>
              (0, k.jsx)(N.AgentNote, {
                variant: "info",
                title: "Agent Timeout",
                children: "The Agent timed out. Type a new prompt to continue.",
              }),
            "out-of-credits": () =>
              (0, k.jsx)(N.AgentNote, {
                variant: "info",
                title: "Out of Credits",
                children: (0, k.jsxs)("div", {
                  className: "flex flex-col gap-3",
                  children: [
                    (0, k.jsx)("div", {
                      children:
                        "v0 stopped because you are out of credits. Please add more credits to continue.",
                    }),
                    (0, k.jsx)(T.Button, {
                      variant: "default",
                      size: "sm",
                      onClick: () =>
                        (0, D.openDialog)({
                          type: "buyMoreCredits",
                          data: {
                            onSuccess: () => (0, M.startTransition)(t.refresh),
                          },
                        }),
                      children: "Buy Credits",
                    }),
                  ],
                }),
              }),
            "orchestrator-invocations-exhausted": n,
            "subagent-invocations-exhausted": n,
            "orchestrator-error": (e) =>
              "CONTENT_FILTER" === e.reason
                ? (0, k.jsx)(N.AgentNote, {
                    variant: "info",
                    title: "Task stopped",
                    children:
                      "The task was stopped due to content filter restrictions.",
                  })
                : (0, k.jsx)(N.AgentNote, {
                    variant: "info",
                    title: "Task stopped",
                    children:
                      "The task was stopped because the agent encountered an unrecoverable error.",
                  }),
            "manually-stopped-on-client": () => null,
          },
          e,
          !0,
        );
      return (0, k.jsx)(A.motion.div, {
        className: "flex flex-col gap-2",
        ...(0, S.motionReplyAnimationIf)(e.isActive),
        children: r?.map((e) => e),
      });
    }
    e.s(["ReadFileV1", () => B], 241987);
    var P = t,
      R = e.i(365670),
      F = s,
      _ = n,
      O = e.i(266007);
    function B(e) {
      let t = (0, _.useRichAssistantParts)(
        {
          "grepping-file": () => null,
          "starting-search-in-file": (e) =>
            (0, P.jsxs)(P.Fragment, {
              children: [
                "Searching ",
                `"${(0, O.cleanAgentFilePath)(e.query)}"`,
              ],
            }),
          "reading-file": (e) =>
            (0, P.jsxs)(P.Fragment, {
              children: ["Read ", (0, P.jsx)(F.File, { ...e, shorten: !0 })],
            }),
          "grep-results": (e) =>
            e.numMatches
              ? `Found ${e.numMatches} match${e.numMatches > 1 ? "es" : ""}`
              : "Searching file",
          "selected-chunks": (e) =>
            (0, P.jsx)(F.FileList, {
              label: `Reading chunk${e.chunks.length > 1 ? "s" : ""}`,
              files: e.chunks,
            }),
        },
        e,
      );
      return (0, P.jsx)(F.RichTask, {
        ...e,
        Icon: R.MagnifyingGlassSmall,
        renderedParts: t,
        children: (0, P.jsx)(F.TaskName, {
          ...e,
          textActive: "Searching file",
          textComplete: "Searched file",
        }),
      });
    }
    e.s(["GrepRepoV1", () => U], 536617);
    var V = t,
      z = R,
      H = s,
      $ = n;
    function U(e) {
      let t = (0, $.useRichAssistantParts)(
        {
          "grepping-repo": () => null,
          "grep-file-results": (e) =>
            e.numFileMatches
              ? `Scanned ${e.numFileMatches} file${e.numFileMatches > 1 ? "s" : ""}`
              : "Scanned files",
        },
        e,
      );
      return (0, V.jsx)(H.RichTask, {
        ...e,
        Icon: z.MagnifyingGlassSmall,
        renderedParts: t,
        children: (0, V.jsx)(H.TaskName, {
          ...e,
          textActive: "Searching repository",
          textComplete: "Searched repository",
        }),
      });
    }
    e.s(["LSRepoV1", () => K], 705636);
    var G = t,
      W = R,
      q = s,
      Z = n;
    function K(e) {
      let t = (0, Z.useRichAssistantParts)(
        {
          ls: () => null,
          "ls-results": (e) =>
            e.numFiles
              ? `Scanning ${e.numFiles} file${e.numFiles > 1 ? "s" : ""}`
              : "Scanning files",
        },
        e,
      );
      return (0, G.jsx)(q.RichTask, {
        ...e,
        Icon: W.MagnifyingGlassSmall,
        renderedParts: t,
        children: (0, G.jsx)(q.TaskName, {
          ...e,
          textActive: "Searching repository",
          textComplete: "Searched repository",
        }),
      });
    }
    var Y = t,
      J = T,
      Q = i,
      X = e.i(304649);
    let ee = (0, Q.forwardRef)(
      (
        {
          isLoading: e,
          progress: t = 0,
          className: n,
          children: r,
          disabled: i,
          onLoaded: s,
          ...a
        },
        o,
      ) => {
        let l = Math.min(100, Math.max(0, t)),
          c = (0, Q.useRef)(t);
        return (
          (0, Q.useEffect)(() => {
            if (c.current < 100 && 100 === l && s) {
              let e = setTimeout(() => {
                s();
              }, 1e3);
              return ((c.current = l), () => clearTimeout(e));
            }
            c.current = l;
          }, [l, s]),
          (0, Y.jsxs)(J.Button, {
            ref: o,
            className: (0, X.cn)("relative overflow-hidden", n),
            disabled: i,
            ...a,
            children: [
              e &&
                (0, Y.jsx)("div", {
                  className:
                    "absolute inset-y-0 left-0 bg-v0-alpha-500 transition-all duration-1000 ease-linear",
                  style: { width: `${l}%` },
                }),
              (0, Y.jsx)("span", { className: "relative z-10", children: r }),
            ],
          })
        );
      },
    );
    ((ee.displayName = "LoadingButton"), e.s(["LoadingButton", 0, ee], 719268));
    let et = (0, r.withNewIcon)(
      '<path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.75C1 2.23122 2.23122 1 3.75 1C5.26878 1 6.5 2.23122 6.5 3.75V5H9.5V3.75C9.5 2.23122 10.7312 1 12.25 1C13.7688 1 15 2.23122 15 3.75C15 5.26878 13.7688 6.5 12.25 6.5H11V9.5H12.25C13.7688 9.5 15 10.7312 15 12.25C15 13.7688 13.7688 15 12.25 15C10.7312 15 9.5 13.7688 9.5 12.25V11H6.5V12.25C6.5 13.7688 5.26878 15 3.75 15C2.23122 15 1 13.7688 1 12.25C1 10.7312 2.23122 9.5 3.75 9.5H5V6.5H3.75C2.23122 6.5 1 5.26878 1 3.75ZM11 5H12.25C12.9404 5 13.5 4.44036 13.5 3.75C13.5 3.05964 12.9404 2.5 12.25 2.5C11.5596 2.5 11 3.05964 11 3.75V5ZM9.5 6.5H6.5V9.5H9.5V6.5ZM11 12.25V11H12.25C12.9404 11 13.5 11.5596 13.5 12.25C13.5 12.9404 12.9404 13.5 12.25 13.5C11.5596 13.5 11 12.9404 11 12.25ZM5 11H3.75C3.05964 11 2.5 11.5596 2.5 12.25C2.5 12.9404 3.05964 13.5 3.75 13.5C4.44036 13.5 5 12.9404 5 12.25V11ZM5 3.75V5H3.75C3.05964 5 2.5 4.44036 2.5 3.75C2.5 3.05964 3.05964 2.5 3.75 2.5C4.44036 2.5 5 3.05964 5 3.75Z" fill="currentColor"/>',
    );
    e.s(["Command", 0, et], 635713);
    var en = t;
    e.i(890446);
    var er = e.i(89440),
      ei = e.i(403055);
    e.i(66990);
    let es = (0, er.cva)(
      "flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",
      {
        variants: {
          orientation: {
            horizontal:
              "[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",
            vertical:
              "flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none",
          },
        },
        defaultVariants: { orientation: "horizontal" },
      },
    );
    function ea({ className: e, orientation: t, ...n }) {
      return (0, en.jsx)("div", {
        role: "group",
        "data-slot": "button-group",
        "data-orientation": t,
        className: (0, ei.cn)(es({ orientation: t }), e),
        ...n,
      });
    }
    e.s(["ButtonGroup", () => ea], 455684);
    var eo = e.i(919012),
      el = (0, eo.createServerReference)(
        "4079bd87653708fc496823b8502ae22db644abbf12",
        eo.callServer,
        void 0,
        eo.findSourceMapURL,
        "resolvePendingDynamicTool",
      );
    e.s(["resolvePendingDynamicTool", () => el], 343889);
  },
  818273,
  (e) => {
    "use strict";
    e.s(
      [
        "Renderer",
        () => tC,
        "didRunOutOfCredits",
        () => tT,
        "getBlocksFromState",
        () => tP,
        "getMetadataFromState",
        () => tF,
        "isFetchingDiagnostics",
        () => tL,
        "useIsStreaming",
        () => tS,
      ],
      818273,
    );
    var t = e.i(324834),
      n = e.i(576191),
      r = e.i(15185),
      i = e.i(595432),
      s = e.i(563261),
      a = e.i(760343),
      o = e.i(595961),
      l = e.i(742998),
      c = e.i(397711),
      u = e.i(389140),
      d = e.i(583984),
      h = e.i(32170),
      p = e.i(233327),
      m = e.i(707827),
      f = e.i(985353),
      g = e.i(661535),
      x = e.i(708306),
      v = e.i(616593),
      y = e.i(229983),
      b = e.i(696871),
      j = e.i(101387),
      w = e.i(90177),
      C = e.i(302998),
      k = e.i(968552);
    e.i(168204);
    var S = e.i(225695),
      N = t,
      E = e.i(236808),
      A = e.i(490838),
      D = e.i(884284),
      I = n,
      M = e.i(423814),
      T = e.i(207086),
      L = e.i(141861),
      P = e.i(874090),
      R = e.i(681813),
      F = e.i(198744),
      _ = e.i(346602),
      O = e.i(744799),
      B = e.i(542727),
      V = e.i(851805),
      z = e.i(165336),
      H = e.i(108355);
    e.i(500334);
    var $ = e.i(451925),
      U = e.i(241987),
      G = e.i(536617),
      W = e.i(705636),
      q = t,
      Z = e.i(740838),
      K = E,
      Y = t,
      J = n,
      Q = e.i(472166);
    e.i(563948);
    var X = e.i(407562),
      ee = e.i(176248),
      et = e.i(719268),
      en = e.i(222431),
      er = e.i(751231),
      ei = e.i(635713),
      es = e.i(455684),
      ea = e.i(556355),
      eo = e.i(985005),
      el = E,
      ec = e.i(418929),
      eu = e.i(343889),
      ed = e.i(886002),
      eh = e.i(304649),
      ep = m,
      em = e.i(605624),
      ef = e.i(382889),
      eg = e.i(182473);
    let ex = (0, J.createContext)(null);
    function ev({ children: e, data: t }) {
      let { submit: n } = (0, Q.useV0Chat)(),
        { actions: r } = (0, ec.useCurrentChatPrompt)(),
        [i, s] = (0, J.useState)(!1),
        [a, o] = (0, J.useTransition)(),
        [l, c] = (0, J.useState)(null),
        { onPermissionChange: u } = (0, em.useMcpPermissions)({
          integration: {
            name: t.integrationName || t.mcpName,
            mcpPermission: null,
          },
        }),
        d = (0, J.useCallback)(
          (e) => {
            a ||
              (e.find((e) => "ALLOW_ALL_DYNAMIC_TOOLS" === e.type) &&
                r.setAutoAllowMcpTools(!0),
              e.find((e) => "ALLOW_DYNAMIC_TOOL_LOOSE" === e.type) && u("auto"),
              o(async () => {
                try {
                  await n({
                    action: "new",
                    content: {
                      version: 1,
                      parts: [
                        { type: "confirmed-permissions", permissions: e },
                      ],
                    },
                  });
                } catch (e) {
                  (X.toast.error("Failed to submit message"),
                    console.error("Error submitting follow-up message:", e));
                }
              }));
          },
          [n, r, a, u],
        ),
        h = (0, J.useCallback)(
          async (e) => {
            if ("auto-accept" === t.type) {
              "approved" === e ? c("accepted") : c(e);
              try {
                let n = await (0, eu.resolvePendingDynamicTool)({
                  key: t.pendingToolKey,
                  type: e,
                });
                if (!n.ok) throw Error(n.error);
              } catch (e) {
                (c(null),
                  X.toast.error("Failed to resolve pending tool execution"),
                  console.error("Error resolving pending tool:", e));
              }
            }
          },
          [t],
        ),
        p = (0, J.useMemo)(() => {
          function e(e) {
            let {
              taskNameActive: t,
              taskNameComplete: n,
              permissionPrompt: r,
              ...i
            } = e || {};
            return 0 === Object.keys(i).length ? null : i;
          }
          if ("auto-accept" === t.type) return e(t.input);
          let n = t.suggestedPermissions.find(
            (e) => "ALLOW_DYNAMIC_TOOL_STRICT" === e.type,
          );
          return n ? e(n.input) : null;
        }, [t]);
      return (0, Y.jsx)(ex.Provider, {
        value: {
          state: {
            ...t,
            showDetails: i,
            toolInput: p,
            optimisticPendingToolResult: l,
            isDisabled: !!("auto-accept" === t.type && t.result),
          },
          actions: {
            handleSubmitPermission: d,
            handleResolvePendingTool: h,
            setShowDetails: s,
          },
        },
        children: e,
      });
    }
    function ey() {
      let e = (0, J.useContext)(ex);
      if (!e)
        throw Error(
          "useToolConfirmation must be used within a ToolConfirmationProvider",
        );
      return e;
    }
    function eb() {
      let {
        state: { integrationName: e, mcpName: t },
      } = ey();
      if (t) {
        let e = eg.PRESET_PROVIDERS.find(
          (e) => e.name.toLowerCase() === t.toLowerCase(),
        );
        return (0, Y.jsx)(ef.McpLogo, {
          logo: e?.logo,
          name: t,
          size: "sm",
          hasDarkModeLogo: e?.hasDarkModeLogo,
        });
      }
      return e
        ? (0, Y.jsx)(eo.ConnectIntegration.Provider, {
            state: (0, eo.createForbiddenIntegrationState)(e),
            actions: { handleConnect: null },
            children: (0, Y.jsx)(eo.ConnectIntegration.Icon, {
              containerClassName: "size-4",
              iconClassName: "mt-0 mb-0",
            }),
          })
        : (0, Y.jsx)(ei.Command, {
            size: 10,
            className: "flex-shrink-0 text-v0-gray-900",
          });
    }
    let ej = ({ permission: e }) => {
      let {
          state: { integrationName: t, mcpName: n },
        } = ey(),
        r = t || n;
      switch (e.type) {
        case "ALLOW_ALL_DYNAMIC_TOOLS":
          return "Always accept all tool calls";
        case "ALLOW_DYNAMIC_TOOL_LOOSE":
          return `Always accept ${r ?? "this tool"}`;
        case "ALLOW_DYNAMIC_TOOL_STRICT":
          return "Accept";
        default:
          return e;
      }
    };
    function ew() {
      let {
        state: e,
        actions: { handleSubmitPermission: t },
      } = ey();
      if ("confirmation" !== e.type) return null;
      let { suggestedPermissions: n } = e;
      if (0 === n.length) return null;
      let r = n.at(0),
        i = (0, Y.jsx)(ee.Button, {
          onClick: () => {
            t([r]);
          },
          variant: "blue",
          className: "h-7 border border-r-v0-alpha-400 px-2 rounded-md",
          children: (0, Y.jsx)(ej, { permission: r }),
        });
      return 1 === n.length
        ? i
        : (0, Y.jsxs)(es.ButtonGroup, {
            className: "max-w-[135px] rounded-md",
            children: [
              i,
              (0, Y.jsxs)(ea.DropdownMenu, {
                children: [
                  (0, Y.jsx)(ea.DropdownMenuTrigger, {
                    asChild: !0,
                    children: (0, Y.jsx)(ee.Button, {
                      variant: "blue",
                      className: "size-7 rounded-md",
                      children: (0, Y.jsx)(en.ChevronDown, { size: 16 }),
                    }),
                  }),
                  (0, Y.jsx)(ea.DropdownMenuContent, {
                    align: "end",
                    children: (0, Y.jsx)(ea.DropdownMenuGroup, {
                      children: n.slice(1).map((e, n) =>
                        (0, Y.jsx)(
                          ea.DropdownMenuItem,
                          {
                            onClick: () => {
                              t([e]);
                            },
                            children: (0, Y.jsx)(ej, { permission: e }),
                          },
                          n,
                        ),
                      ),
                    }),
                  }),
                ],
              }),
            ],
          });
    }
    function eC({ initialSeconds: e }) {
      let {
          actions: { handleResolvePendingTool: t },
        } = ey(),
        [n, r] = (0, J.useState)(e);
      (0, J.useEffect)(() => {
        if (n <= 0) return;
        let e = setTimeout(() => {
          r((e) => e - 1);
        }, 1e3);
        return () => clearTimeout(e);
      }, [n]);
      let i = e > 0 ? ((e - n) / e) * 100 : 0;
      return (0, Y.jsxs)("div", {
        className: "flex gap-2 flex-1",
        children: [
          (0, Y.jsx)(ee.Button, {
            variant: "outline",
            onClick: () => t("cancelled"),
            className: "flex-1 h-7 rounded-md",
            children: "Cancel",
          }),
          (0, Y.jsx)(et.LoadingButton, {
            variant: "blue",
            onClick: () => t("approved"),
            className: "flex-1 h-7 rounded-md",
            isLoading: !0,
            onLoaded: () => {
              t("approved");
            },
            progress: i,
            children: "Accept",
          }),
        ],
      });
    }
    function ek({ result: e }) {
      let {
          state: { isActive: t },
        } = ey(),
        n = "accepted" === e ? "Accepted" : "Cancelled";
      return (
        t && (n = "accepted" === e ? "Accepting..." : "Cancelling..."),
        (0, Y.jsxs)(ee.Button, {
          disabled: !0,
          variant: "secondary",
          className: "w-full h-7 rounded-md",
          children: [t && (0, Y.jsx)(ep.Spinner, { size: 14 }), n],
        })
      );
    }
    function eS() {
      let { state: e } = ey();
      if ("auto-accept" === e.type) {
        let t = e.result || e.optimisticPendingToolResult;
        return t
          ? (0, Y.jsx)(ek, { result: t })
          : (0, Y.jsx)(eC, { initialSeconds: e.initialCountdown });
      }
      return (0, Y.jsx)(ew, {});
    }
    function eN() {
      let {
        state: { showDetails: e, toolInput: t },
        actions: { setShowDetails: n },
      } = ey();
      return t
        ? (0, Y.jsxs)("button", {
            onClick: () => n(!e),
            className:
              "text-label-13 text-v0-gray-900 hover:text-v0-gray-1000 cursor-pointer flex items-center gap-1",
            children: [
              (0, Y.jsx)("span", {
                children: e ? "Hide Details" : "Show Details",
              }),
              (0, Y.jsx)(er.ChevronUpDown, { size: 16 }),
            ],
          })
        : null;
    }
    function eE() {
      let {
        state: { showDetails: e, toolInput: t },
      } = ey();
      if (!e) return null;
      let n = JSON.stringify(t, null, 2).replace(/\\n/g, "\n");
      return (0, Y.jsx)("pre", {
        className:
          "text-xs bg-v0-background-200 p-2 rounded-lg overflow-x-auto max-h-48 overflow-y-auto border border-v0-gray-200 text-v0-gray-900 !m-0",
        children: n,
      });
    }
    function eA() {
      let { state: e } = ey();
      return "confirmation" === e.type && e.isMaybeDangerous
        ? (0, Y.jsx)(ed.Note, {
            variant: "warning",
            children:
              "This task may cause potentially destructive actions, and requires approval.",
          })
        : null;
    }
    let eD = function ({ children: e }) {
        let {
          state: { isDisabled: t },
        } = ey();
        return (0, Y.jsxs)("div", {
          className: (0, eh.cn)(
            t ? "border-none" : "border-v0-blue-700 border",
            "rounded-lg bg-v0-background-300 shadow-sm w-full overflow-visible mt-1 max-w-[475px] relative",
          ),
          children: [
            t
              ? null
              : (0, Y.jsx)(el.BlockRing, { isVisible: !0, isActive: !0 }),
            (0, Y.jsx)("div", {
              className: "overflow-hidden rounded-lg",
              children: e,
            }),
          ],
        });
      },
      eI = function () {
        let {
          state: { integrationName: e, mcpName: t },
        } = ey();
        return (0, Y.jsxs)("div", {
          className:
            "flex items-center justify-between gap-2 p-2.5 border-b border-v0-gray-300",
          children: [
            (0, Y.jsxs)("div", {
              className: "flex items-center gap-2",
              children: [
                (0, Y.jsx)(eb, {}),
                (0, Y.jsx)("span", {
                  className: "font-medium text-sm text-v0-gray-1000",
                  children: e || t,
                }),
              ],
            }),
            (0, Y.jsx)(eN, {}),
          ],
        });
      },
      eM = function () {
        let {
          state: { permissionsPrompt: e },
        } = ey();
        return (0, Y.jsxs)("div", {
          className: "p-2.5 gap-2.5 flex flex-col border-b border-v0-gray-300",
          children: [
            (0, Y.jsx)(eA, {}),
            (0, Y.jsx)("p", {
              className:
                "text-label-14 text-v0-gray-900 break-words !mx-0 !my-1 !p-0",
              children:
                e ||
                "This tool wants to execute with the following parameters.",
            }),
            (0, Y.jsx)(eE, {}),
          ],
        });
      },
      eT = function () {
        return (0, Y.jsx)("div", {
          className: "p-2.5 flex gap-2 justify-end",
          children: (0, Y.jsx)(eS, {}),
        });
      };
    function eL() {
      return (0, Y.jsxs)(eD, {
        children: [(0, Y.jsx)(eI, {}), (0, Y.jsx)(eM, {}), (0, Y.jsx)(eT, {})],
      });
    }
    var eP = n;
    function eR(e) {
      let t = (0, eP.useMemo)(() => {
        let t = e.parts.find(
          (e) => "starting-dynamic-tool-execution" === e.type,
        );
        if (!t || !t.pending) return null;
        let n = e.parts.find(
            (e) => "cancelled-dynamic-tool-execution" === e.type,
          ),
          r = e.parts.find((e) => "accepted-dynamic-tool-execution" === e.type),
          i = null;
        return (n ? (i = "cancelled") : r && (i = "accepted"), e.isActive || i)
          ? {
              type: "auto-accept",
              pendingToolKey: t.pending.key,
              result: i,
              initialCountdown: Math.max(
                0,
                Math.ceil((t.pending.timeoutAt - Date.now()) / 1e3),
              ),
              integrationName: e.integration || null,
              mcpName: e.mcpName || null,
              permissionsPrompt: t.permissionPrompt || null,
              input: t.input,
              isActive: e.isActive,
            }
          : null;
      }, [e.parts, e.integration, e.mcpName, e.isActive]);
      return t
        ? (0, q.jsx)(ev, { data: t, children: (0, q.jsx)(eL, {}) })
        : e.stopped && e.isLastMessage && "permissions" === e.stopped.reason
          ? (0, q.jsx)(ev, {
              data: {
                type: "confirmation",
                isActive: e.isActive,
                integrationName: e.integration || null,
                mcpName: e.mcpName || null,
                isMaybeDangerous: e.stopped.isMaybeDangerous,
                permissionsPrompt: e.stopped.permissionPrompt || null,
                suggestedPermissions: e.stopped.suggestedPermissions,
              },
              children: (0, q.jsx)(eL, {}),
            })
          : (0, q.jsx)(K.RichTask, {
              ...e,
              Icon: Z.Wrench,
              renderedParts: null,
              children: (0, q.jsx)(K.TaskName, {
                ...e,
                textActive: "Working",
                textComplete: "Completed work",
              }),
            });
    }
    var eF = t,
      e_ = z;
    function eO(e) {
      return e.isLast ? (0, eF.jsx)(e_.MockThinkingV1, {}) : null;
    }
    var eB = t,
      eV = Z,
      ez = E;
    function eH(e) {
      return (0, eB.jsx)(ez.RichTask, {
        ...e,
        Icon: eV.Wrench,
        renderedParts: null,
        children: (0, eB.jsx)(ez.TaskName, {
          ...e,
          textActive: "Searching tools",
          textComplete: "Searched tools",
        }),
      });
    }
    var e$ = M,
      eU = L,
      eG = P,
      eW = R,
      eq = F,
      eZ = _,
      eK = O,
      eY = B,
      eJ = V,
      eQ = z,
      eX = H,
      e0 = T,
      e1 = $,
      e2 = U,
      e5 = G,
      e3 = W;
    function e4({ isStreaming: e, part: t }) {
      return !!e && !!t && null === t.finishedAt;
    }
    function e9({
      isFirst: e,
      isLast: t,
      part: n,
      messageId: r,
      isConsecutiveAssistantPart: i,
      isLastMessage: s,
    }) {
      let a = e4({ isStreaming: tS(), part: n });
      ((0, A.useMaybeUpdateTodoList)(n, r), (0, D.useMaybeUpdateLoader)(n, a));
      let o = (0, I.useMemo)(() => {
        if (!n) return (0, N.jsx)("div", { children: "Error parsing part" });
        let i = {
          isActive: a,
          isFirst: e,
          isLast: t,
          messageId: r,
          isLastMessage: s,
        };
        switch (n.type) {
          case "task-start-v1":
            return null;
          case "task-search-web-v1":
            return (0, N.jsx)(eJ.SearchWebV1, { ...n, ...i });
          case "task-fetch-from-web-v1":
            return (0, N.jsx)(eG.FetchFromWebV1, { ...n, ...i });
          case "task-grep-repo-v1":
            return (0, N.jsx)(e5.GrepRepoV1, { ...n, ...i });
          case "task-ls-repo-v1":
            return (0, N.jsx)(e3.LSRepoV1, { ...n, ...i });
          case "task-search-repo-v1":
            return (0, N.jsx)(eY.SearchRepoV1, { ...n, ...i });
          case "task-thinking-v1":
            return (0, N.jsx)(eQ.ThinkingV1, { ...n, ...i });
          case "task-diagnostics-v1":
            return (0, N.jsx)(eU.DiagnosticsV1, { ...n, ...i });
          case "task-run-shell-command-v1":
            return (0, N.jsx)(eK.RunShellCommandV1, { ...n, ...i });
          case "task-manage-todos-v1":
            return (0, N.jsx)(eX.TodoManagerV1, { ...n, ...i });
          case "task-read-files-v1":
            return (0, N.jsx)(eZ.ReadFilesV1, { ...n, ...i });
          case "task-stopped-v1":
            return (0, N.jsx)(e1.StoppedV1, { ...n, ...i });
          case "task-inspect-site-v1":
            return (0, N.jsx)(eq.InspectSiteV1, { ...n, ...i });
          case "task-generate-design-inspiration-v1":
            return (0, N.jsx)(eW.GenerateDesignInspirationV1, { ...n, ...i });
          case "task-get-or-request-integration-v1":
            return (0, N.jsx)(e$.GetOrRequestIntegrationV1, { ...n, ...i });
          case "task-coding-v1":
            return (0, N.jsx)(e0.CodingV1, { ...n, ...i });
          case "task-read-file-v1":
            return (0, N.jsx)(e2.ReadFileV1, { ...n, ...i });
          case "task-dynamic-tool-v1":
            return (0, N.jsx)(eR, { ...n, ...i });
          case "task-repaired-parser-content-v1":
            return (0, N.jsx)("div", { children: "Error parsing part" });
          case "task-waiting-v1":
            return t ? (0, N.jsx)(eO, { ...n, ...i }) : null;
          case "task-search-tools-v1":
            return (0, N.jsx)(eH, { ...n, ...i });
          default:
            return n;
        }
      }, [a, e, t, s, r, n]);
      return (0, N.jsxs)(N.Fragment, {
        children: [
          i && o ? (0, N.jsx)(E.ConsecutiveTimelineLine, { animate: a }) : null,
          o,
        ],
      });
    }
    var e7 = e.i(266007),
      e6 = E,
      e8 = e.i(403055),
      te = e.i(819969),
      tt = e.i(393799),
      tn = t,
      tr = eh,
      ti = ee,
      ts = E,
      ta = e.i(449381),
      to = n,
      tl = e.i(418270),
      tc = e.i(636282);
    let tu = (0, to.createContext)(null),
      td = ({ messageId: e, children: t }) => {
        let n = (0, ta.useActiveBlockState)(),
          r = (0, tl.useWizardApi)({
            blockId: n?.id || "",
            closed: !!n?.closed,
          }),
          { actions: i } = (0, tc.useWizardAtoms)(),
          s = !!r.data?.canShowWizard,
          a = n?.messageId === e,
          o = !!(s && a);
        return (0, tn.jsx)(tu.Provider, {
          value: {
            state: { messageId: e, isBlockInMessage: a, isActive: o },
            actions: {
              handleConfigureWizard: () => {
                (i.setIsOpenIntent(!0), i.focusWizardDialog());
              },
            },
          },
          children: t,
        });
      };
    function th() {
      let e = (0, to.useContext)(tu);
      if (!e)
        throw Error(
          "useLegacyStepsCard must be used within a LegacyStepsCardProvider",
        );
      return e;
    }
    function tp() {
      let {
        state: { isBlockInMessage: e, isActive: t },
        actions: { handleConfigureWizard: n },
      } = th();
      return e
        ? (0, tn.jsx)(ti.Button, {
            type: "button",
            disabled: !t,
            size: "sm",
            className: "h-7",
            onClick: n,
            children: t ? "Configure" : "Complete",
          })
        : null;
    }
    function tm() {
      let {
        state: { isActive: e },
      } = th();
      return (0, tn.jsxs)("div", {
        className: (0, tr.cn)(
          ts.AGENT_BLOCK_MAX_WIDTH_CLASS,
          "rounded-[8px] m-[-1px] border border-transparent relative",
          ts.AGENT_BLOCK_CLASS,
          { "border-v0-blue-700": e, "border-v0-gray-600": !e },
        ),
        children: [
          (0, tn.jsx)(ts.BlockRing, { isVisible: !0, isActive: e }),
          (0, tn.jsxs)("div", {
            className: (0, tr.cn)(
              "w-full flex items-center justify-between h-7 font-medium",
              { "text-v0-gray-700": !e },
            ),
            children: ["Setup Integrations", (0, tn.jsx)(tp, {})],
          }),
        ],
      });
    }
    function tf({ messageId: e }) {
      return (0, tn.jsx)(td, { messageId: e, children: (0, tn.jsx)(tm, {}) });
    }
    let tg = (0, s.default)(() => e.A(755510).then((e) => e.InlineMath)),
      tx = (0, s.default)(() => e.A(755510).then((e) => e.BlockMath)),
      tv = (0, s.default)(() => e.A(524582).then((e) => e.Mermaid), {
        loadableGenerated: { modules: [537684] },
      }),
      ty = (0, s.default)(() => e.A(688269).then((e) => e.Table), {
        loadableGenerated: { modules: [20068] },
      }),
      tb = "\0",
      tj = String.fromCharCode(65535);
    function tw(e, t) {
      if (void 0 === e) return e;
      let n = e + tb;
      for (;;)
        if (t >= 65535) ((n += tj), (t -= 65535));
        else {
          n += String.fromCharCode(t + 1);
          break;
        }
      return n;
    }
    let tC = n.default.memo(tE),
      tk = n.default.createContext(!1),
      tS = () => n.default.use(tk),
      tN = n.default.createContext(!1);
    function tE({
      messageId: e,
      role: n,
      streaming: r,
      rows: i,
      isLastMessage: s = !1,
      v3: a = !1,
    }) {
      let o,
        { atoms: l } = (0, te.useCurrentChat)(),
        u = (0, tt.useAtomValue)(l.authorId),
        { user: d } = (0, h.useUser)(),
        m = !1,
        f = [],
        g = i.map(([i, o], l) => {
          let c = tw("", l);
          return 0 === i
            ? ((m = !0),
              (0, t.jsx)(
                tN.Provider,
                {
                  value: a,
                  children: (0, t.jsx)(tk.Provider, {
                    value: r || !1,
                    children: (0, t.jsx)(tA, {
                      data: o,
                      id: c,
                      messageId: e,
                      isLastMessage: s,
                    }),
                  }),
                },
                c,
              ))
            : (1 === i &&
                "assistant" === n &&
                o.context &&
                Array.isArray(o.context) &&
                o.context.length > 0 &&
                (f = o.context),
              null);
        });
      if (!m)
        if (0 === f.length) return null;
        else
          o = (0, t.jsx)(p.CitationsCarousel, {
            urls: f.map(({ url: e }) => e),
          });
      let x = (0, t.jsxs)(t.Fragment, { children: [o, g] });
      return "assistant" === n
        ? (0, t.jsx)(c.SegmenterProvider, {
            messageId: e,
            readonly: !!u && d?.id !== u,
            streaming: r,
            children: x,
          })
        : x;
    }
    function tA({ data: e, id: n, messageId: r, isLastMessage: i }) {
      return e.map((s, a) => {
        let o = tw(n, a),
          l = !1;
        return (
          (l = (0, e7.getIsConsecutiveAssistantPart)(s, a, e)),
          (0, t.jsx)(
            tD,
            {
              data: s,
              id: s[0] === S.AssistantMessagePartTagName ? s[1]?.id : o,
              isFirst: 0 === a,
              isLast: a === e.length - 1,
              index: a,
              messageId: r,
              isLastMessage: i,
              isConsecutiveAssistantPart: l,
            },
            s[0] === S.AssistantMessagePartTagName ? s[1]?.id : o,
          )
        );
      });
    }
    function tD({
      data: e,
      id: s,
      index: h,
      messageId: p,
      isFirst: v,
      isLast: N,
      isLastMessage: E,
      isConsecutiveAssistantPart: A,
    }) {
      let D = (0, c.useRegister)({
          id: s,
          content: "string" == typeof e ? e : void 0,
          type: "string" == typeof e ? "text" : e[0],
          props: "string" == typeof e ? {} : e[1],
        }),
        I =
          "string" != typeof e && "Codeblock" === e[0] && e[1].blockId
            ? e[1].source
            : void 0;
      if ("string" == typeof e) return e;
      let [M, T, ...L] = e;
      if (void 0 === M) return null;
      let P = (0, t.jsx)(tA, {
        data: L,
        id: s,
        messageId: p,
        isLastMessage: E,
      });
      switch (M) {
        case "text":
          return (0, t.jsx)("span", { ...D.elementProps, children: P });
        case "span":
        case "p":
        case "blockquote":
        case "strong":
        case "em":
        case "del":
        case "h1":
        case "h2":
        case "h3":
        case "h4":
        case "h5":
        case "h6":
        case "ul":
        case "ol":
        case "li":
          let R = M;
          return (0, t.jsx)(R, { ...D.elementProps, ...T, children: P });
        case "code":
          if (
            1 === L.length &&
            "string" == typeof L[0] &&
            (0, g.isColorCode)(L[0])
          )
            return (0, t.jsx)(g.ColorCode, { ...D.elementProps, value: L[0] });
          return (0, t.jsx)("code", {
            ...D.elementProps,
            className:
              "rounded-[0.375rem] border bg-v0-gray-100 px-1 py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",
            ...T,
            children: P,
          });
        case "a":
          let F = T.href;
          if ("string" == typeof F && F.startsWith("/"))
            return (0, t.jsx)("span", { ...D.elementProps, children: P });
          if ("string" == typeof F && F.startsWith("#"))
            return (0, t.jsx)("a", {
              ...D.elementProps,
              className:
                "font-normal text-v0-blue-700 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-v0-blue-700",
              href: F,
              children: P,
            });
          return (0, t.jsxs)("a", {
            ...D.elementProps,
            className:
              "font-normal text-v0-blue-700 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-v0-blue-700",
            href: T.href || "#",
            rel: "noopener noreferrer",
            target: "_blank",
            children: [
              P,
              (0, t.jsx)(u.External, {
                className: "mb-0.5 ml-0.5 inline h-3 w-3",
              }),
            ],
          });
        case "img": {
          let { style: e, ...n } = { ...D.elementProps, ...T };
          return (0, t.jsx)("img", { ...n, className: "rounded-xl" });
        }
        case "hr":
          return (0, t.jsx)("hr", { ...D.elementProps });
        case "table":
          return (0, t.jsx)("table", {
            ...D.elementProps,
            className: "table-fixed",
            children: P,
          });
        case "tr":
          return (0, t.jsx)("tr", { ...D.elementProps, children: P });
        case "td":
          return (0, t.jsx)("td", { ...D.elementProps, children: P });
        case "th":
          return (0, t.jsx)("th", { ...D.elementProps, children: P });
        case "thead":
          return (0, t.jsx)("thead", { ...D.elementProps, children: P });
        case "tbody":
          return (0, t.jsx)("tbody", { ...D.elementProps, children: P });
        case "Codeblock":
          let _ = I || L.join("");
          if (
            T.blockId &&
            T.meta.type &&
            !b.INLINE_BLOCK_TYPES.includes(T.meta.type)
          )
            return (0, t.jsxs)("div", {
              className: "flex flex-col",
              children: [
                A ? (0, t.jsx)(e6.TimelineLine, {}) : null,
                (0, t.jsx)("div", {
                  className: (0, e8.cn)(
                    "block-preview flex flex-col gap-3",
                    A ? "not-last:mb-4" : "",
                  ),
                  ...D.elementProps,
                  children: (0, t.jsx)(
                    l.RenderBlockPreview,
                    {
                      blockId: T.blockId,
                      closed: T.closed,
                      language: T.lang,
                      remoteInfo: T.remoteInfo,
                      messageId: p,
                      meta: T.meta,
                      resultId: T.resultId,
                      source: _,
                      type: T.meta.type,
                      latestDeploymentInfo: T.latestDeploymentInfo,
                    },
                    T.blockId,
                  ),
                }),
              ],
            });
          if (!_) return (0, t.jsx)("div", { ...D.elementProps });
          switch (T.lang) {
            case "mermaid":
              return (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(n.Suspense, {
                  fallback: null,
                  children: (0, t.jsx)(tv, { source: _, title: T.meta.title }),
                }),
              });
            case "math":
              return (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(tx, { math: _ }),
              });
            case "csv":
              return (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(n.Suspense, {
                  fallback: (0, t.jsx)(a.LoadingCard, {
                    title: "Loading table...",
                  }),
                  children: (0, t.jsx)(ty, { source: _ }),
                }),
              });
            case "toolcall":
              return (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(f.Toolcall, { source: _ }),
              });
            default:
              return (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(o.SyntaxHighlighter, {
                  language: T.lang,
                  blockId: T.blockId,
                  closed: T.closed,
                  sqlExecutionState: T.meta.sqlExecutionState,
                  transaction: T.meta.transaction,
                  type: T.meta.type,
                  fileName: T.meta.name,
                  children: _,
                }),
              });
          }
        case "InlineMath":
          return (0, t.jsx)("span", {
            ...D.elementProps,
            children: (0, t.jsx)(tg, { math: L.join("") }),
          });
        case "Math":
          return (0, t.jsx)("span", {
            ...D.elementProps,
            children: (0, t.jsx)(tx, { math: L.join("") }),
          });
        case "LinearProcessFlow":
        case "Steps":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(i.Steps, { children: P }),
          });
        case "Thinking":
        case "DevThinking":
        case "V0Info":
          return (0, t.jsx)(tI, {
            closed: T.closed,
            chars: T.chars,
            elementProps: D.elementProps,
            children: P,
          });
        case "Solution":
        case "footnoteDefinition":
          return null;
        case "Quiz":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(r.Quiz, { ...T, children: P }),
          });
        case "V0LoadingImage":
          return N ? (0, t.jsx)(w.LoadingImage, {}) : null;
        case "Spinner":
          let O = null,
            B = T.message || "Generating...";
          return (
            B.toLowerCase().includes("search") ||
            B.toLowerCase().startsWith("added")
              ? (O = null)
              : h > 0 && (O = (0, t.jsx)(m.Spinner, {})),
            (0, t.jsx)("div", {
              ...D.elementProps,
              children: (0, t.jsx)(tM, { isLast: N, icon: O, message: B }),
            })
          );
        case "MathInstructions":
        case "MathBlock":
          return (0, t.jsx)("div", { ...D.elementProps, children: P });
        case "footnoteReference":
          return (0, t.jsx)("span", {
            ...D.elementProps,
            children: (0, t.jsx)(d.Reference, {
              idPrefix: `cite-${p}-`,
              label: T.label,
            }),
          });
        case "AddEnvironmentVariables":
        case "AddEnvironmentVariable":
          return (0, t.jsx)(tf, { messageId: p });
        case "ToolExecutionCardLoading":
          return (0, t.jsx)(k.ToolExecutionCard, {
            ...T,
            status: "loading",
            isLast: N,
          });
        case "ToolExecution":
        case "ToolExecutionCard":
          return (0, t.jsx)(k.ToolExecutionCard, { status: "success", ...T });
        case S.AssistantMessagePartTagName:
          return (0, t.jsx)(e9, {
            ...T,
            closed: T.closed,
            isFirst: v,
            isLastMessage: E,
            isLast: N,
            messageId: p,
            isConsecutiveAssistantPart: A,
          });
        case "AddIntegration":
        case "StepsCard":
          return (0, t.jsx)(tf, { messageId: p });
        case "SuggestedNextSteps":
          return E
            ? (0, t.jsx)(y.SuggestedNextSteps, { options: T.options })
            : null;
        case "LoadingLighthouse":
          return N
            ? (0, t.jsx)("div", {
                ...D.elementProps,
                children: (0, t.jsx)(x.LighthouseReportLoading, {}),
              })
            : null;
        case "Lighthouse":
        case "LighthouseReport":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(x.default, { ...T }),
          });
        case "TraceAnalysis":
        case "TraceAnalysisReport":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(C.TraceAnalysisReport, { ...T }),
          });
        case "TraceAnalysisStatus":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(C.TraceAnalysisStatus, { ...T, isLast: N }),
          });
        case "TraceAnalysisError":
          return (0, t.jsx)("div", {
            ...D.elementProps,
            children: (0, t.jsx)(C.TraceAnalysisError, { ...T }),
          });
        case "br":
          return (0, t.jsx)("br", { ...D.elementProps });
        case "Action":
          return (0, t.jsx)(j.SuggestedAction, {
            name: T.name,
            elementProps: D.elementProps,
            description: T.description,
            messageId: p,
          });
        case "Actions":
          if (!E) return null;
          return (0, t.jsx)(j.SuggestedActions, {
            elementProps: D.elementProps,
            isLast: N,
            messageId: p,
            children: P,
          });
        default:
          return (0, t.jsxs)("div", {
            ...D.elementProps,
            children: [
              (0, t.jsx)("h5", { children: `<${M}>` }),
              P,
              (0, t.jsx)("h5", { children: `</${M}>` }),
            ],
          });
      }
    }
    function tI({ closed: e, chars: n, elementProps: r, children: i = null }) {
      let s = tS();
      return (0, t.jsx)(v.ThinkingTime, {
        isLoading: (void 0 === e && !!s) || !e,
        seconds: n ? n / 170 : void 0,
        children: (0, t.jsx)("div", {
          ...r,
          className: "[&>p:first-child]:mt-0 [&>p:last-child]:mb-0",
          children: i,
        }),
      });
    }
    function tM({ isLast: e, icon: n, message: r }) {
      let i = tS();
      return e && i
        ? (0, t.jsxs)("div", {
            className: "flex items-center justify-start gap-2",
            children: [
              n,
              (0, t.jsx)("span", { className: "animate-pulse", children: r }),
            ],
          })
        : null;
    }
    function tT(e) {
      try {
        let t = e?.[0]?.[1];
        if (!t || 0 === t.length) return !1;
        let n = t[t.length - 1],
          r = n[0],
          i = n[1].part;
        if (r !== S.AssistantMessagePartTagName || "task-stopped-v1" !== i.type)
          return !1;
        return 1 === i.parts.length && i.parts[0]?.type === "out-of-credits";
      } catch (e) {
        return !1;
      }
    }
    function tL(e) {
      try {
        let t = e?.[0]?.[1];
        if (!t || 0 === t.length) return !1;
        let n = t[t.length - 1],
          r = n[0],
          i = n[1].part;
        if (
          r !== S.AssistantMessagePartTagName ||
          "task-diagnostics-v1" !== i.type
        )
          return !1;
        return (
          1 === i.parts.length && i.parts[0]?.type === "fetching-diagnostics"
        );
      } catch (e) {
        return !1;
      }
    }
    function tP(e, t, n) {
      let r = [];
      if (
        !e ||
        "message-binary-format" !== e.type ||
        !Array.isArray(e.value) ||
        !e.value.length
      )
        return r;
      function i(e, i) {
        if (e !== S.AssistantMessagePartTagName) return;
        let s = i.part;
        if ("task-coding-v1" !== s.type) return;
        let a = s.parts[0];
        !a ||
          "code-project" !== a.type ||
          ("isVersioned" in a &&
            (a.isVersioned || n?.includeNonVersionedBlocks) &&
            "blockId" in a &&
            "meta" in a &&
            "source" in a &&
            r.push({
              id: a.blockId,
              meta: a.meta,
              remoteInfo: void 0,
              type: a.type,
              messageId: t,
              source: a.source,
              language: "lang" in a ? a.lang : "javascript",
              lastEditedAt: "lastEditedAt" in a ? a.lastEditedAt : void 0,
              lastDeployedAt: "lastDeployedAt" in a ? a.lastDeployedAt : void 0,
              closed: "closed" in a && !!a.closed,
              createdAt: void 0,
              latestDeploymentInfo: void 0,
              forkedFromBlockId: void 0,
              needsBlockSource: "needsBlockSource" in a && a.needsBlockSource,
              sourceVersionKey:
                "sourceVersionKey" in a ? a.sourceVersionKey : void 0,
            }));
      }
      function s(e, n, i) {
        if ("Codeblock" !== e || !n.meta.type) return null;
        let s = i.join(""),
          a = n.blockId;
        if (!a) return null;
        r.push({
          id: a,
          meta: n.meta,
          type: n.meta.type,
          messageId: t,
          source: n.source || s,
          language: n.lang,
          resultId: n.resultId,
          remoteInfo: n.remoteInfo,
          lastEditedAt: n.lastEditedAt,
          lastDeployedAt: n.lastDeployedAt,
          closed: void 0 !== n.closed && !!n.closed,
          createdAt: n.createdAt,
          latestDeploymentInfo: void 0,
          forkedFromBlockId: void 0,
          needsBlockSource: n.needsBlockSource || !1,
          sourceVersionKey: n.sourceVersionKey,
        });
      }
      if (e.value[0]?.[0] === 0)
        for (let t of e.value[0]?.[1] || [])
          t_(t, (e) => {
            let [t, n, ...r] = e;
            (i(t, n), s(t, n, r));
          });
      return r;
    }
    function tR(e) {
      return e && 0 === e[0]
        ? "markdown"
        : e && 1 === e[0]
          ? "metadata"
          : void 0;
    }
    function tF(e) {
      let t,
        n,
        r,
        i = "",
        s = e.find((e) => "metadata" === tR(e))?.[1];
      return (
        s &&
          ("title" in s && "string" == typeof s.title && (i = s.title),
          "finishReason" in s && (t = s.finishReason),
          "usage" in s && (n = s.usage),
          "modelId" in s && (r = s.modelId)),
        { title: i, modelId: r, finishReason: t, usage: n }
      );
    }
    function t_(e, t) {
      if (Array.isArray(e)) {
        let [n, r, ...i] = e;
        ("string" == typeof n && t(e), i.map((e) => t_(e, t)));
      }
    }
  },
  449381,
  (e) => {
    "use strict";
    e.s([
      "assertBlockId",
      () => l,
      "useActiveBlockClosed",
      () => d,
      "useActiveBlockId",
      () => u,
      "useActiveBlockState",
      () => c,
      "useActiveBlockView",
      () => h,
      "useCloseActiveBlock",
      () => f,
      "useSetActiveBlockState",
      () => p,
      "useSetActiveBlockView",
      () => m,
    ]);
    var t = e.i(818273),
      n = e.i(767373),
      r = e.i(92479),
      i = e.i(576191),
      s = e.i(418625),
      a = e.i(15916),
      o = e.i(301331);
    function l(e) {
      return e ?? "_no_block_";
    }
    function c(e) {
      let { chatId: t } = (0, r.useChatId)(),
        { data: n } = (0, s.default)(["active-block", e ?? t]);
      return n;
    }
    function u() {
      let e = c();
      return (0, i.useMemo)(() => e?.id, [e?.id]);
    }
    function d() {
      let e = c();
      return (0, i.useMemo)(() => !!e?.closed, [e?.closed]);
    }
    function h() {
      let { chatId: e } = (0, r.useChatId)(),
        { data: t } = (0, s.default)(["block-view", e]);
      return !!t;
    }
    function p() {
      let { chatId: e } = (0, r.useChatId)(),
        { mutate: t } = (0, a.useSWRConfig)(),
        { ensureBlockSource: n } = (0, o.useBlockSource)();
      return (0, i.useCallback)(
        (r) => {
          (r?.id && n(r.id), t(["active-block", e], r ?? null, !1));
        },
        [e, t, n],
      );
    }
    function m() {
      let { chatId: e } = (0, r.useChatId)(),
        { mutate: t } = (0, a.useSWRConfig)();
      return (0, i.useCallback)(
        (n, r) => {
          (n ? t(["active-block", e], r, !1) : t(["active-block", e], null, !1),
            t(["block-view", e], n, !1));
        },
        [e, t],
      );
    }
    function f() {
      let { messages: e } = (0, r.useChatMessages)(),
        s = c(),
        a = m(),
        { ensureBlockSource: l } = (0, o.useBlockSource)();
      return (0, i.useCallback)(
        (r, i) => {
          if (!s) return;
          let o = () => {
            let n;
            if (!i) return void a(!1);
            let r = -1;
            for (let s of e
              .map((e) => (0, t.getBlocksFromState)(e.content ?? "", e.id))
              .flat()) {
              if (!s) continue;
              let e = i.findIndex((e) => e === s.messageId);
              e > -1 && e >= r && ((r = e), (n = s));
            }
            n ? (l(n.id), a(!0, n)) : a(!1);
          };
          r
            ? r === s.messageId
              ? o()
              : new Set(
                  (0, n.getChildMessageIds)(
                    e.map((e) => ({ ...e, messageId: e.id })),
                    r,
                  ),
                ).has(s.messageId) && o()
            : a(!1);
        },
        [s, e, a],
      );
    }
  },
]);
